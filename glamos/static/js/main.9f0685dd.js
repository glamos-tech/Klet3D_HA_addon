/*! For license information please see main.9f0685dd.js.LICENSE.txt */
"use strict";(this.webpackChunkaddon_app=this.webpackChunkaddon_app||[]).push([[792],{9250:(e,t,i)=>{var o=i(6357),n=i(9316),s=i(3022),a=i(6801);const r=(e,t)=>{const i=Number(Math.round(e+"e"+t)+"e-"+t);return isNaN(i)?0:i},l=(e,t,i)=>e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height,h=(e,t,i)=>{let o,n;return()=>{let s=+new Date;o&&s<o+i?(clearTimeout(n),n=setTimeout((function(){o=s,t(e)}),i)):(o=s,t(e))}},c=e=>(()=>{let e,t=0;for(e in window.localStorage)t+=2*((window.localStorage[e].length||0)+(e.length||0));return t})()+(e=>{let t=new ArrayBuffer(2*e.length),i=new Uint16Array(t);for(let o=0,n=e.length;o<n;o++)i[o]=e.charCodeAt(o);return i})(JSON.stringify(e)).byteLength<5138022.4,d=()=>window.matchMedia&&window.matchMedia("(hover: none)").matches||"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,p=e=>!e&&0!==e&&!1!==e,m=e=>!e&&0!==e,u=e=>!e&&0!==e,g=(e,t,i)=>(0,s.Ay)(e,t).to(i),f=e=>e*(Math.PI/180),b=e=>e*(180/Math.PI),w=e=>{const t=(t,i)=>(0,a.jsx)(e,{ref:i||null,...t});return t.displayName=`Wrapped(${e.displayName||e.name||"Component"})`,t};var C=i(1421);const x=document.URL+"static/media/http-error.cf84c924.png",_=C.A.default.create({baseURL:"https://app.glamos.eu/api",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});_.interceptors.request.use((e=>{var t;const i="post"===(null===(t=e.method)||void 0===t?void 0:t.toLowerCase()),o=e.data instanceof FormData;var n;i&&o&&(delete e.headers["Content-Type"],null===(n=e.headers.common)||void 0===n||delete n["Content-Type"]);return e}));function y(e){return function(t){console.log("HTTP error"),console.log(t),console.log(this.mounted);const i=((e,t,i)=>t&&e&&("403"===t||"401"===t)?(console.log("Invalid token"),i&&i(),t):!(!t||!e||"400"!==t&&"404"!==t&&"500"!==t&&"501"!==t&&"502"!==t&&"Network Error"!==t)&&t)(this.mounted,(e=>String(e).includes("403")?"403":String(e).includes("401")?"401":String(e).includes("400")?"400":String(e).includes("404")?"404":String(e).includes("500")?"500":String(e).includes("501")?"501":String(e).includes("502")?"502":String(e).includes("Error: Network Error")?"Network Error":e)(t),e);this.props.setResponseError?this.props.setResponseError({responseError:i}):this.setState({responseError:i}),this.loadingComponentContainer&&this.loadingComponentContainer.current&&n.unmountComponentAtNode(this.loadingComponentContainer.current),this.props.loadingComponentContainer&&n.unmountComponentAtNode(this.props.loadingComponentContainer),this.props.mainComponentThis&&this.props.mainComponentThis.loadingComponentContainer&&this.props.mainComponentThis.loadingComponentContainer.current&&n.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current)}}const S={get:function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _.get(e.apiURI,{...t,...e.headers}).then((e=>{i(e.data)})).catch(y(o.onAuthenticationAutorizationErrorCallback).bind(this))},post:function(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return _.post(e.apiURI,o,{...t,...e.headers}).then((e=>{i(e)})).catch(y(n.onAuthenticationAutorizationErrorCallback).bind(this))},put:function(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return _.put(t.apiURI,o,{...t,...e.headers}).then((e=>{i(e)})).catch(y(n.onAuthenticationAutorizationErrorCallback).bind(this))},patch:function(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return _.patch(e.apiURI,o,{...t,...e.headers}).then((e=>{i(e)})).catch(y(n.onAuthenticationAutorizationErrorCallback).bind(this))},delete:function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return _.delete(e.apiURI,{...t,...e.headers}).then((e=>{i(e)})).catch(y(o.onAuthenticationAutorizationErrorCallback).bind(this))}},v=e=>"no_servers"===e?(0,a.jsxs)("div",{className:"error-container",children:[(0,a.jsx)("p",{children:"Please create server and then add gateways (hotspots) to that server here."}),(0,a.jsx)("p",{children:"Add gateways for area you want to test/track"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:"You will find your API key for integration of your devices in account."}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["For support contact: ",(0,a.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["Find instructions at"," ",(0,a.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_gateways"===e?(0,a.jsxs)("div",{className:"error-container",children:[(0,a.jsx)("p",{children:"Please add gateways (hotspots) to your server in gateways."}),(0,a.jsx)("p",{children:"Add gateways for area you want to test/track"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:"You will find your API key for integration of your devices in account."}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["For support contact: ",(0,a.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["Find instructions at"," ",(0,a.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_devices"===e?(0,a.jsxs)("div",{className:"error-container",children:[(0,a.jsx)("p",{children:"Please first add your device here"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("p",{children:"You will find your API key for integration of your devices inaccount."}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["For support contact: ",(0,a.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["Find instructions at"," ",(0,a.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_online_devices"===e?(0,a.jsxs)("div",{className:"error-container",children:[(0,a.jsx)("p",{children:"Looks like you didn't activate any device. In order to see device data you must activate licence for it."}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["Please go to devices page and activate licence."," ",(0,a.jsx)("a",{target:"_blank",href:"https://glamos.eu/blog/new-chapter-glamos/",rel:"noreferrer",children:"More details"})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["For support contact: ",(0,a.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["Find instructions at"," ",(0,a.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"Network Error"===e?(0,a.jsxs)("div",{className:"error-container",children:[(0,a.jsx)("p",{children:"Error getting data (network error)"}),(0,a.jsx)("p",{children:"Check your internet connnection and try again."}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("p",{children:["If that doesn't work, please contact support at ",(0,a.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]})]}):"400"===e?(0,a.jsxs)("div",{className:"http-error error-container",children:[(0,a.jsx)("img",{alt:"HTTP error",src:x}),(0,a.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:"HTTP 400 Bad request"})})]}):"404"===e?(0,a.jsxs)("div",{className:"http-error error-container",children:[(0,a.jsx)("img",{alt:"HTTP error",src:x}),(0,a.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:"HTTP 404 Not Found"})})]}):"500"===e?(0,a.jsxs)("div",{className:"http-error error-container",children:[(0,a.jsx)("img",{alt:"HTTP error",src:x}),(0,a.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:"HTTP 500 Internal Server Error"})})]}):"501"===e?(0,a.jsxs)("div",{className:"http-error error-container",children:[(0,a.jsx)("img",{alt:"HTTP error",src:x}),(0,a.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:"HTTP 501 Not Implemented"})})]}):"502"===e?(0,a.jsxs)("div",{className:"http-error error-container",children:[(0,a.jsx)("img",{alt:"HTTP error",src:x}),(0,a.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,a.jsx)("p",{children:(0,a.jsx)("b",{children:"HTTP 502 Bad Gateway"})})]}):null,D=e=>!(!e||"Network Error"!==e&&"400"!==e&&"404"!==e&&"500"!==e&&"501"!==e&&"502"!==e),T={isEmpty:function(){return!String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ").replace(/ /g,"").length&&"Entry can not be empty."},isNumber:function(){return!!isNaN(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Entry can be just a number."},isEmail:function(){return!/\S+@\S+\.\S+/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Invalid e-mail format."},isGpsCoordinate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return T.isEmpty(e)?"Entry can not be empty.":T.isNumber(e)?"Entry can be just a number.":"gps_lat"===t?!(Number(e)>=-90&&Number(e)<=90)&&"Latitude out of bounds([-90, 90]).":!(Number(e)>=-180&&Number(e)<=180)&&"Longitude out of bounds([-180, 180])."},isValidGpsCoordinates:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";console.log("Ptimljen koordinate: "+e);const t=e.replace(/\s+/g,"").split(",");return t&&2===t.length?T.isGpsCoordinate(t[0],"gps_lat")||T.isGpsCoordinate(t[1],"gps_long"):"Invalid GPS coordinates. Please follow specified format."},deviceEUI:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length>0&&(16!==e.length&&"DevEUI must be 16 characters long")},isLicenseNumber:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!1;if("string"===typeof e)if(19!==e.length)t=!0;else{const i=e.split("-");if(console.log("License parts"),console.log(i),4!==i.length)t=!0;else for(let e=0;e<i.length;e++)if(4!==i[e].length){t=!0;break}}else t=!0;return!!t&&"Invalid license format"},isHexColor:function(){return!/^#([A-Fa-f0-9]{3}|[A-Fa-f0-9]{6})$/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Invalid hex color format"},validateFileSize:e=>function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).size>1048576*e&&`File size exceeds the maximum allowed size of ${e}MB`},validateObjFileContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((t,i)=>{const o=new FileReader;o.onload=()=>{const e=o.result.split(/\r?\n/);let i=!1,n=!1;for(const t of e){const e=t.trim();if(e.startsWith("#")||""===e)continue;const o=e.split(/\s+/)[0];if("v"===o?i=!0:"f"===o&&(n=!0),i&&n)break}return i?n?void t(!1):t("The .obj file must define at least one face (f)."):t("The .obj file must define at least one vertex (v).")},o.onerror=()=>i(new Error("Error reading file")),o.readAsText(e)}))},validateMtlFileContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((t,i)=>{const o=new FileReader;o.onload=()=>{const e=o.result;e.includes("newmtl")||t("Invalid .mtl file. The file must define at least one material with 'newmtl'.");const i=e.split(/\r?\n/);for(const o of i){const e=o.trim();if(e.startsWith("map_Kd")||e.startsWith("map_bump")||e.startsWith("map_Ka")){const i=e.split(/\s+/).slice(1).join(" ");(i.startsWith("http://")||i.startsWith("https://"))&&t("Invalid .mtl file. External links are not allowed in texture paths."),(i.includes("..")||i.startsWith("/"))&&t("Invalid .mtl file. Path traversal or absolute paths are not allowed in texture paths.")}}t(!1)},o.onerror=()=>i(new Error("Error reading file")),o.readAsText(e)}))},validateImage:e=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(((i,o)=>{const n=T.validateFileSize(e.MAX_IMAGE_SIZE_MB)(t);if(n)i(n);else{const e=new FileReader;e.onloadend=function(){const t=new Uint8Array(e.result).slice(0,4),o={"image/jpeg":[255,216,255,224],"image/png":[137,80,78,71]};for(const e in o){const n=o[e];if(t.every(((e,t)=>e===n[t])))return void i(!1)}i("Invalid MIME type. The file is not a valid image.")},e.onerror=()=>o(new Error("Error reading file")),e.readAsArrayBuffer(t.slice(0,4))}}))}},j=async(e,t)=>{let i=[...e];try{let e=0;for(let t=0;t<i.length;t++){let{value:o,validate:n,...s}=i[t],a=!1;if(n){let e;if(s.isGpsCoord)console.log("Comma value"+o),e=o.toString()&&o.toString().replace(",","."),console.log("Dotted value"+e),a=await n(e),a||(o=e);else if(Array.isArray(o))for(let t=0;t<o.length;t++){const e=await n(o[t]);if(e){a=e;break}}else a=await n(o)}a&&e++,i[t]={...s,validate:n,value:o,error:a}}const o=!e;return t(i,o),o}catch(o){return console.log("Error",o),t(i,!1),!1}},I=(e,t)=>{for(let i=0;i<t.length;i++)if(e[i].value!==t[i].value)return!0;return!1},P=(e,t)=>JSON.stringify(e)!==JSON.stringify(t);var O=i(8181),k=i(4406),F=i.n(k);const M=[...[{field:"gps_lat",label:"Floorplan latitude",placeholder:"e.g. 43.5079",validate:e=>T.isEmpty(e)||T.isGpsCoordinate(e,"gps_lat"),isGpsCoord:!0},{field:"gps_long",label:"Floorplan longitude",placeholder:"e.g. 16.43699",validate:e=>T.isEmpty(e)||T.isGpsCoordinate(e,"gps_long"),isGpsCoord:!0}],{field:"bearing_angle",label:"Floorplan bearing(\xb0)",placeholder:"e.g. 45\xb0",validate:e=>T.isEmpty(e)||T.isNumber(e),defaultValue:0}],A=[{field:"show_measures",label:"MEASURES",title:"Show floorplan measures",type:"checkbox",updateMethodName:"updateRibStatus",mainComponentThisPropertyName:"showRib",defaultValue:!0},{field:"show_grid",label:"GRID",title:"Show grid",type:"checkbox",updateMethodName:"updateGridStatus",mainComponentThisPropertyName:"showGrid",defaultValue:!0},{field:"background_color",label:"COLOR",type:"color",updateMethodName:"updateBackgroundColor",mainComponentThisPropertyName:"backgroundColor",defaultValue:"#ffffff"}],R={options:[{name:"Default",value:"default",infoText:(0,a.jsx)("span",{children:"Set the room floor to its default appearance."})},{name:"Pattern",value:"pattern",infoText:(0,a.jsx)("span",{children:"Use a texture pattern and scale it to fill the room floor."})},{name:"Color",value:"color",infoText:(0,a.jsx)("span",{children:"Fill the room floor with a chosen color."})},{name:"None",value:"none",infoText:(0,a.jsx)("span",{children:"Hide the room floor in 3D view."})}]};var L=i(8724);const B=class{constructor(){this.hover=!1,this.selected=!1,this.highlighted=!1,this.emissiveColor=4473924,this.defaultEmissiveColor=0}updateMeshHighlight(){const e=this.hover||this.selected;this.highlighted=e;const t=e?this.emissiveColor:this.defaultEmissiveColor;this.mesh.traverse((i=>{if(i instanceof L.eaF){(i.material.isMaterial?[i.material]:i.material).forEach((i=>{i.emissive?i.emissive.setHex(t):i.color&&(this.mesh.textColor&&!e?i.color.setHex(this.mesh.textColor.getHex()):i.color.setHex(t))}))}}))}mouseOver(){this.hover=!0,this.updateMeshHighlight()}mouseOff(){this.hover=!1,this.updateMeshHighlight()}setSelected(){this.selected=!0,this.updateMeshHighlight()}setUnselected(){this.selected=!1,this.updateMeshHighlight(),this.error&&this.hideError()}customIntersectionPlanes(){return[]}};const W=class extends B{constructor(e,t,i,o,n,s,a,r){let l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];super(),this.scene=e,this.errorGlow=new L.eaF,this.error=!1,this.errorColor=16711680,this.disabled=!1,this.fixed=r.fixed||!1,this.resizable=r.resizable||!1,this.modelProperties=r,this.floorNumber=s,this.itemStartHeight=a.props.mainComponentThis.getFloorStartElevation(this.floorNumber,!0),this.floorplan3DThis=a,this.object3DProperties=i,this.object2D=o,this.object2DPositionTolerance=Math.pow(10,-8),this.sceneTransformedCalled=!1,this.debugMode=l,this.position_set=!0,this.boxSelectorMesh=null,this.highlightedColor=null,this.highlightEntitiesColorOn=2600544,this.highlightEntitiesColorOff=12597547,this.highlightEntitiesColorClickable=2719929,this.initializeItemMeshData(t,n),this.scene===this.floorplan3DThis.floorplan3DOnMapScene&&document.addEventListener("sceneTransformed",(e=>this.onSceneTransformed(e)),{once:!0})}initializeItemMeshData(e,t){if(this.originalMaterialColors=[],this.paintedMaterialColors=[],this.customMaterialTextures=[],this.animations=[],this.allowRotate="lightSource"!==t,this.dragOffset=new L.Pq0,this.position=new L.Pq0,this.scale=new L.Pq0,this.meshPositionOffsetFromCenter=new L.Pq0(0,0,0),this.loadedObjectPositionOffsetFromCenter=new L.Pq0(0,0,0),this.loadedObjectSizeVector=new L.Pq0,this.initialHalfSize=new L.Pq0,this.rotation=0,this.rotateLastAngle=0,this.objectType=t,this.meshScaleXSign=this.calculateMeshScaleXSign(),this.meshScaleYSign=1,this.meshScaleZSign=this.calculateMeshScaleZSign(),this.objects3DArray=e,_e[this.objectType])this.mesh=this.floorplan3DThis[_e[this.objectType].model3DCreationMethod](this.object2D);else{const{object:e}=this.objects3DArray.find((e=>e.floorplanItemType===this.objectType)),t=e.deepClone();this.mesh=t,this.loadedObjectPositionOffsetFromCenter=this.position.clone().sub(this.getMeshCenter()),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone()}this.mesh.isFloorplanItem=!0,this.mesh.itemObject=this,(new L.NRn).setFromObject(this.mesh,!0).getSize(this.loadedObjectSizeVector),(this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"light")||this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"fan")||this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"cover"))&&(this.boxSelectorMesh=new L.eaF(new L.iNn(this.loadedObjectSizeVector.x,this.loadedObjectSizeVector.y,this.loadedObjectSizeVector.z),new L.V9B({visible:!1})),this.boxSelectorMesh.floorplanItemBoxSelector=!0,this.boxSelectorMesh.itemObject=this);for(let n in this.object3DProperties)this.mesh[n]=this.object3DProperties[n];this.initialHalfSize=this.meshHalfSize(),this.halfSize=this.initialHalfSize.clone();let i=this.itemStartHeight/this.floorplan3DThis.scaleFactor;u(this.object2D.additionalParams.positionY)||(i+=this.object2D.additionalParams.positionY+this.object2D.additionalParams.height3D/2);const o=new L.Pq0(this.object2D.x,i,this.object2D.y).multiplyScalar(this.floorplan3DThis.scaleFactor);if(this.setItemPosition(o),this.debugMode){const e=new L.Gu$(5,32,15),t=new L.V9B({color:16776960}),i=new L.eaF(e,t);i.position.set(o.x,o.y,o.z),this.scene.add(i)}this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"light")?this.mesh.light=new L.B69:this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"screen")?this.mesh.screenPart=new L.B69:"surface_area"===this.object2D.class&&(this.mesh.surfacePlane=new L.B69),this.mesh.traverse((e=>{if(e instanceof L.eaF){(e.material.isMaterial?[e.material]:e.material).forEach(((t,i)=>{this.originalMaterialColors.push({meshName:e.name,materialIndex:i,color:t.color.getHex(),map:t.map})}))}})),(this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"door")||this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"window"))&&(this.doorWindowOpeningsParameters=[])}getPartColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const o=this.originalMaterialColors.filter((e=>t===e.meshName)),n=this.paintedMaterialColors.filter((e=>t===e.meshName));let s;return"default"===e&&(s=n.length>0?n:o),"original"===e&&(s=o),"painted"===e&&(s=n||null),s?i?s[0].color:s:null}setPartColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=!this.highlightedColor&&["default","original","painted"].includes(e),n=this.highlightedColor?this.highlightedColor:o?this.getPartColor(e,t,!1):e;this.mesh.traverse((s=>{if(s instanceof L.eaF&&s.name===t){(s.material.isMaterial?[s.material]:s.material).forEach(((s,a)=>{const r=o?n.find((e=>e.materialIndex===a)).color:n;"original"===e||"default"===e&&!this.paintedMaterialColors.find((e=>t===e.meshName))?(s.flatShading=!1,i&&(s.map=this.originalMaterialColors.find((e=>t===e.meshName&&e.materialIndex===a)).map)):(s.flatShading=!0,i&&(s.map=null)),s.color&&(s.color.setHex(r),s.needsUpdate=!0)}))}}))}setAllPartsColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.mesh.traverse((t=>{t instanceof L.eaF&&this.originalMaterialColors.find((e=>e.meshName===t.name))&&this.setPartColor(e,t.name)}))}setCustomTexture(e,t,i){if(e instanceof L.gPd===!1)throw new Error("Invalid texture provided");this.mesh.traverse((o=>{if(o instanceof L.eaF&&o.name===t){(o.material.isMaterial?[o.material]:o.material).forEach(((o,n)=>{o.map=e,o.color=new L.Q1f(16777215),o.needsUpdate=!0;const s=this.customMaterialTextures.find((e=>e.meshName===t&&e.materialIndex===n));s?s.map=e:this.customMaterialTextures.push({textureName:i,meshName:t,materialIndex:n,map:e})}))}}))}setCustomTextureByName(e,t){const i=this.floorplan3DThis.props.mainComponentThis.isAddOnApp?`https://app.klet3d.com/textures/${e}.png`:`/textures/${e}.png`,o=this.floorplan3DThis.loadedTextures.find((t=>t.name===e));o?this.setCustomTexture(o.textureData,t,e):this.floorplan3DThis.textureLoader.load(i,(i=>{this.floorplan3DThis.loadedTextures.push({name:e,textureData:i}),this.setCustomTexture(i,t,e)}),void 0,(e=>{console.error("Error loading texture:",e)}))}isPartUVUnwrapped(e){return void 0!==this.mesh.getObjectByName(e).geometry.attributes.uv}removeCustomTexture(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.mesh.traverse((i=>{if(i instanceof L.eaF&&i.name===e){(i.material.isMaterial?[i.material]:i.material).forEach(((o,n)=>{const s=this.originalMaterialColors.find((e=>e.meshName===i.name&&e.materialIndex===n));if(s&&(o.color.setHex(s.color),o.map=s.map,o.needsUpdate=!0,t)){const t=this.customMaterialTextures.findIndex((t=>t.meshName===e&&t.materialIndex===n));-1!==t&&this.customMaterialTextures.splice(t,1)}}))}}))}restoreCustomTexture(e){const t=this.customMaterialTextures.find((t=>t.meshName===e));return t?(this.setCustomTexture(t.map,e),t.textureName):(this.setPartColor("original",e),null)}setPaintedColor(e,t){this.setPartColor(e,t);const i=this.paintedMaterialColors.filter((e=>e.meshName===t));if(i.length>0)i.forEach((t=>t.color=e));else{const i=this.mesh.getObjectByName(t);if(i instanceof L.eaF){(i.material.isMaterial?[i.material]:i.material).forEach(((i,o)=>{this.paintedMaterialColors.push({meshName:t,materialIndex:o,color:e})}))}}}removePaintedColor(e){const t=this.paintedMaterialColors.length;this.paintedMaterialColors=this.paintedMaterialColors.filter((t=>t.meshName!==e)),this.paintedMaterialColors.length!==t&&this.setPartColor("original",e)}calculateMeshScaleZSign(){let e=1;return fe.includes(this.objectType)&&(e*=-1),ge.includes(this.objectType)&&(e*=-1),e}calculateMeshScaleXSign(){let e=1;return this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"door")&&ii(this.objectType)&&"reverse"===this.object2D.hinge&&(e=-1),!xe[this.objectType]&&this.object2D.additionalParams.mirrored&&(e*=-1),be.includes(this.objectType)?-1*e:e}recalculateMeshScaleXSign(){this.meshScaleXSign=this.calculateMeshScaleXSign()}initObject(){if(xe[this.objectType])this.resize(this.loadedObjectSizeVector.x/this.floorplan3DThis.scaleFactor,this.loadedObjectSizeVector.y/this.floorplan3DThis.scaleFactor,this.loadedObjectSizeVector.z/this.floorplan3DThis.scaleFactor);else{this.resize(this.object2D.additionalParams.width3D,this.object2D.additionalParams.height3D,this.object2D.additionalParams.depth3D);const e=this.object2D.additionalParams.materials;e&&this.mesh.traverse((t=>{const i=e.find((e=>e.meshName===t.name));if(i)if("color"===i.type&&i.color){const e=parseInt(i.color.split("#").at(-1),16);this.setPaintedColor(e,t.name)}else"texture"===i.type&&i.textureName&&this.setCustomTextureByName(i.textureName,t.name)}))}this.rotateItem(f(this.object2D.angle),-1),this.rotateLastAngle=-f(this.object2D.angle);let e=this.getItemCenter();if(this.depthDirectionOffsetTranslation(e,1,this.floorplan3DThis.scaleFactor),this.setItemPosition(e),this.placeInRoom(),this.floorplan3DThis.isFloorHidden(this.floorNumber)&&this.setVisibilityStatus(!1),this.scene.add(this.mesh),this.boxSelectorMesh&&this.scene.add(this.boxSelectorMesh),this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"light")){if(this.scene.add(this.mesh.light),this.debugMode){const e=new L.F1l(this.mesh.light,20,16711680);this.scene.add(e)}}else this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"screen")?this.getScreenChildMesh().add(this.mesh.screenPart):"surface_area"===this.object2D.class&&this.mesh.add(this.mesh.surfacePlane);if(this.mesh.updateWorldMatrix(!0,!0),this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"camera")){this.floorplan3DThis.cameraItemRotation(this,ei(0,ue[this.objectType].modelRotationXOffsetDeg,0,ue[this.objectType].modelRotationYOffsetDeg)),this.cameraItemProperties={};const e=this.mesh.children.find((e=>e.name===ue[this.objectType].cameraLensMeshName)),t=new L.NRn;t.setFromObject(e,!0);const i=wi(t,this.mesh),o=new L.Pq0;i.getCenter(o);const n=o.clone();n.z+=_i(this.object2D,"forward")*(i.max.z-o.z);const s=o.clone();this.mesh.localToWorld(s),e.worldToLocal(s),this.cameraItemProperties.cameraLensMeshCenterLocal=s.clone();const a=n.clone();this.mesh.localToWorld(a),e.worldToLocal(a),this.cameraItemProperties.cameraLensMeshLensPosLocal=a.clone(),this.floorplan3DThis.cameraItemRotation(this,ei(0,this.object2D.additionalParams.cameraRotationAngleXDeg,0,this.object2D.additionalParams.mirrored?ue[this.objectType].modelMirroredRotationYSign*this.object2D.additionalParams.cameraRotationAngleYDeg:this.object2D.additionalParams.cameraRotationAngleYDeg))}else if("surface_area"===this.object2D.class){this.rotateItem(0,1),this.mesh.updateWorldMatrix(!0,!0),this.surfaceItemProperties={};const e=new L.NRn;e.setFromObject(this.mesh,!0);const t=wi(e,this.mesh),i=new L.Pq0;this.mesh.getWorldScale(i);const o=new L.Pq0;t.getCenter(o);const n=o.clone();"on_floor"===this.object2D.additionalParams.choiceOptionValue?n.y+=(t.max.y-t.min.y)/2:n.z+=-_i(this.object2D,"forward")*(t.max.z-t.min.z)/2,this.surfaceItemProperties.surfaceAreaMeshFrontPointLocal=n,this.surfaceItemProperties.surfaceAreaMeshLocalToWorldScale=i,this.rotateItem(f(this.object2D.angle),-1),this.floorplan3DThis.renderSurfaceAreaPlaneDefaultState(this)}if(this.floorplan3DThis.props.mainComponentThis.isAddOnApp)if(this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"screen")){this.rotateItem(0,1),this.mesh.updateWorldMatrix(!0,!0),this.screenItemProperties={},this.screenPartProperties={};const e=this.getScreenChildMesh(),t=new L.NRn;t.setFromObject(e,!0);const i=wi(t,this.mesh),o=new L.Pq0;this.mesh.getWorldScale(o);const n=i.max.x-i.min.x,s=i.max.y-i.min.y,a=i.max.z-i.min.z;this.screenItemProperties.screenPartDimensions={localWidth:n,localHeight:s,localDepth:a,worldWidth:n*Math.abs(o.x),worldHeight:s*Math.abs(o.y),worldDepth:a*Math.abs(o.z)},-90===Ue[this.objectType].rotationXDeg&&(this.screenItemProperties.screenPartDimensions.localHeight=a,this.screenItemProperties.screenPartDimensions.localDepth=s,this.screenItemProperties.screenPartDimensions.worldHeight=this.screenItemProperties.screenPartDimensions.localHeight*Math.abs(o.z),this.screenItemProperties.screenPartDimensions.worldDepth=this.screenItemProperties.screenPartDimensions.localDepth*Math.abs(o.y)),this.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor=0!==this.screenItemProperties.screenPartDimensions.localDepth?this.screenItemProperties.screenPartDimensions.localDepth/this.screenItemProperties.screenPartDimensions.worldDepth:1;const r=new L.Pq0;i.getCenter(r);const l=r.clone();l.z+=_i(this.object2D,"forward")*this.screenItemProperties.screenPartDimensions.localDepth/2,this.screenItemProperties.screenPartCenterPointLocal=r,this.screenItemProperties.screenPartCenterEdgePointLocal=l,this.rotateItem(f(this.object2D.angle),-1)}else if(this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"door")||this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"window"))if(nt[this.objectType]){const e=this.object2D.additionalParams.mirrored?-1:1;nt[this.objectType].forEach((t=>{const i=Ci(this,t.direction,"horizontal"===t.direction?-1*e:-1,t.destinationPointFactor,this.floorplan3DThis.scaleFactor).clone();this.mesh.worldToLocal(i);const o=Ci(this,t.direction,1,1!==t.destinationPointFactor?1:1.1,this.floorplan3DThis.scaleFactor).clone();this.mesh.worldToLocal(o),t.doorPartChildName.forEach((n=>{const s=new L.NRn,a=this.mesh.getObjectByName(n);s.setFromObject(a,!0);const r=wi(s,this.mesh),l=new L.Pq0;r.getSize(l);const h=new L.Pq0;r.getCenter(h);const c=h.clone();"horizontal"===t.direction?c.x+=e*(t.originPointDirectionCalculationSign*(xi(this.mesh,"lefttoright")*(r.max.x-r.min.x)))/2:c.y-=t.originPointDirectionCalculationSign*(r.max.y-r.min.y)/2;const d=yi(c,i,o),p=si(d,i);let m={childName:n,originPointLocal:c,destinationPointLocal:i,originToDestinationDistanceLocal:p,doorPartOriginalSizeVectorLocal:l};if(t.translateAndScale){const e="horizontal"===t.direction?l.x:l.y;"open"===t.defaultModelState?(m.openSizeLocal=e,m.closedSizeLocal=e+p):(m.openSizeLocal=e-p,m.closedSizeLocal=e)}this.doorWindowOpeningsParameters.push(m)}))}))}else if("accordionFoldDoors"===this.objectType){const e=st[this.objectType];let t={};for(let i in e){const o=e[i].rotationPointPartName.map((e=>this.mesh.getObjectByName(e))),n=new L.NRn;o.forEach((e=>n.union((new L.NRn).setFromObject(e,!0))));const s=wi(n,this.mesh),a=new L.Pq0;s.getCenter(a),t[i]=a}this.doorWindowOpeningsParameters.push(t)}this.scene.needsUpdate=!0}setItemPosition(e,t){(t=t||this.mesh)===this.mesh&&1===this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.objectType)&&(e.y=this.itemStartHeight+(this.object2D.additionalParams.positionY+this.object2D.additionalParams.height3D/2)*this.floorplan3DThis.scaleFactor);const i=e.clone().add(this.getItemMeshRotatedPositionOffsetFromCenter());if(t.position.set(i.x,i.y,i.z),t===this.mesh){if(this.position.copy(i),this.boxSelectorMesh&&this.boxSelectorMesh.position.copy(this.getMeshCenter(this.mesh)),"onWall"!==this.object2D.family&&"inWall"!==this.object2D.family){const t=e.x/this.floorplan3DThis.scaleFactor-this.object2D.x,i=e.z/this.floorplan3DThis.scaleFactor-this.object2D.y;Math.abs(t)>this.object2DPositionTolerance&&(this.object2D.x+=t),Math.abs(i)>this.object2DPositionTolerance&&(this.object2D.y+=i),this.object2D.update(this.floorplan3DThis.props.mainComponentThis)}else if(!$.includes(this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.objectType))){const t=this.floorplan3DThis.props.mainComponentThis.convertSvgToValueUnits((e.y-this.itemStartHeight)/this.floorplan3DThis.scaleFactor-this.object2D.additionalParams.height3D/2);this.object2D.additionalParams.positionY=this.floorplan3DThis.props.mainComponentThis.convertValueToSvgUnits(t),this.floorplan3DThis.props.mainComponentThis.activeItemPositionsRef.current&&this.floorplan3DThis.props.mainComponentThis.activeItemPositionsRef.current.setPositionYInputValues(t)}this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"light")&&this.mesh.light?this.mesh.light.position.set(e.x,e.y,e.z):this.floorplan3DThis.props.mainComponentThis.isAddOnApp&&this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"screen")&&this.mesh.screenPart?this.floorplan3DThis.setScreenPartMeshPosition(this):"surface_area"===this.object2D.class&&this.mesh.surfacePlane&&this.floorplan3DThis.setSurfacePlanePosition(this)}}depthDirectionOffsetTranslation(){}rotateItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i=i||this.mesh,"onWall"===this.object2D.family&&(e+=f(this.object2D.params.onWallOffsetAngle));let n=e*=t;i===this.mesh&&(n=e-this.rotation);const s=i===this.mesh?this.getItemCenter():this.getMeshCenter(i);this.floorplan3DThis.rotateAroundPoint(i,s,new L.Pq0(0,1,0),n),i===this.mesh&&(this.boxSelectorMesh&&this.floorplan3DThis.rotateAroundPoint(this.boxSelectorMesh,s,new L.Pq0(0,1,0),n,!1),this.rotation=e,this.position=s.add(this.getItemMeshRotatedPositionOffsetFromCenter())),console.log(o)}remove(){this.removeAllAnimations(),this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"light")?this.unrenderLight():this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"screen")?this.unrenderScreenPart():"surface_area"===this.object2D.class&&this.unrenderSurfacePlane();let e=[this.mesh];this.boxSelectorMesh&&e.push(this.boxSelectorMesh),this.error&&e.push(this.errorGlow),e.forEach((e=>{this.scene.remove(e),hi(e)})),this.removed()}setVisibilityStatus(e){this.mesh.visible=this.errorGlow.visible=e,this.setAnimationsVisibility(e)}resize(e,t,i){const o=new L.Pq0(e/this.loadedObjectSizeVector.x,t/this.loadedObjectSizeVector.y,i/this.loadedObjectSizeVector.z).multiplyScalar(this.floorplan3DThis.scaleFactor);this.scale.set(this.meshScaleXSign*o.x,this.meshScaleYSign*o.y,this.meshScaleZSign*o.z),this.boxSelectorMesh&&this.boxSelectorMesh.scale.set(o.x,o.y,o.z);const n=this.getMeshCenter();this.mesh.scale.set(this.scale.x,this.scale.y,this.scale.z);const s=this.getMeshCenter(),a=n.sub(s);this.floorplan3DThis.translateObjectInWorld(this.mesh,a.x,a.y,a.z,this.sceneTransformedCalled),this.position.copy(this.mesh.position),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone().multiply(this.scale),this.halfSize=this.initialHalfSize.clone().multiply(o),this.resized(),this.mesh.needsUpdate=!0}resizeByReferencePoint(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>this.getMeshCenter(this.mesh);const n=new L.Pq0(e/this.loadedObjectSizeVector.x,t/this.loadedObjectSizeVector.y,i/this.loadedObjectSizeVector.z).multiplyScalar(this.floorplan3DThis.scaleFactor);this.scale.set(this.meshScaleXSign*n.x,this.meshScaleYSign*n.y,this.meshScaleZSign*n.z),this.boxSelectorMesh&&this.boxSelectorMesh.scale.set(n.x,n.y,n.z);const s=o();this.mesh.scale.set(this.scale.x,this.scale.y,this.scale.z),this.mesh.updateMatrixWorld(!0);const a=o(),r=(new L.Pq0).subVectors(s,a);this.mesh.position.add(r),this.mesh.updateMatrixWorld(!0),this.position.copy(this.mesh.position),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone().multiply(this.mesh.scale),this.halfSize=this.initialHalfSize.clone().multiply(n),this.mesh.needsUpdate=!0}rotateByEulerByReferencePoint(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>this.getMeshCenter(this.mesh);const o=(new L.Pq0).copy(i());t.setRotationFromEuler(e);const n=(new L.Pq0).copy(i()),s=(new L.Pq0).subVectors(o,n);t.position.add(s),t.updateMatrixWorld(!0),"function"===typeof this.rotated&&this.rotated(),t.needsUpdate=!0}clickPressed(e){this.dragOffset.copy(e.point).sub(this.position)}clickDragged(e,t){if(e){if(t){const t=e.point.clone().sub(this.dragOffset);this.moveToPosition(t.sub(this.getItemMeshRotatedPositionOffsetFromCenter()),e)}else this.moveToPosition(e.point,e);if(this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.isWallItem){const t=this.floorplan3DThis.getFloorplanViewSceneItem(this.object2D);if(t){const i={};i.point=e.point,i.object={};const o=this.floorplan3DThis.floorplanViewWalls3D.find((e=>e.wall2D.wallId===this.itemWall.wall3D.wall2D.wallId));i.object.wall3D=o,i.object.uuid=this.itemWall.wallPlane.planeObject.uuid===this.itemWall.wall3D.interiorWallPlane.planeObject.uuid?o.interiorWallPlane.planeObject.uuid:o.exteriorWallPlane.planeObject.uuid,t.moveToPosition(this.getItemCenter(),i)}}}}rotate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=null!==t?t:null;const o=this.getItemCenter();if(null===t&&e){i=this.floorplan3DThis.props.mainComponentThis.qSVG.angleBetweenLines(0,1,e.point.x-o.x,e.point.z-o.z);const t=Math.PI/16;for(let e=-4;e<=4;e++)if(Math.abs(i-e*(Math.PI/2))<t){i=e*(Math.PI/2);break}}if(null!==i){const e="onWall"!==this.object2D.family&&"inWall"!==this.object2D.family,n=-r(b(i),0),s=this.isValidRotation(i);if(s)this.hideError(),this.rotateItem(i),null===t&&e&&(this.object2D.angle=n,this.object2D.update(this.floorplan3DThis.props.mainComponentThis));else{this.error||(this.error=!0,this.errorGlow=this.createErrorGlow(this.errorColor,.8,!0),this.scene.add(this.errorGlow));const e=o.clone().add(this.getItemMeshRotatedPositionOffsetFromCenter(this.errorGlow));this.errorGlow.position.set(e.x,e.y,e.z),this.floorplan3DThis.rotateAroundPoint(this.errorGlow,o,new L.Pq0(0,1,0),i-this.rotateLastAngle,!1)}null===t&&e&&this.floorplan3DThis.props.mainComponentThis.activeItemRotationsRef.current&&this.floorplan3DThis.props.mainComponentThis.activeItemRotationsRef.current.setRotationInputValues(n,s),this.rotateLastAngle=i}}moveToPosition(e){this.setItemPosition(e)}clickReleased(){this.rotateLastAngle=this.rotation,this.error&&this.hideError(),this.fixed||("onWall"!==this.object2D.family&&"inWall"!==this.object2D.family&&this.floorplan3DThis.props.mainComponentThis.activeItemRotationsRef.current&&this.floorplan3DThis.props.mainComponentThis.activeItemRotationsRef.current.setRotationInputValues(-r(b(this.rotation),0),!0),this.floorplan3DThis.props.mainComponentThis.save(!1,!0))}meshHalfSize(){const e=new L.NRn;return e.setFromObject(this.mesh,!0),e.max.clone().sub(e.min).divideScalar(2)}getXZCorners(){const e=new L.NRn;e.setFromObject(this.mesh,!0);const t=ui(e),i=Yt(t.map((e=>new L.I9Y(e.x,e.z))));return[{x:i.minX,y:i.minY},{x:i.minX,y:i.maxY},{x:i.maxX,y:i.minY},{x:i.maxX,y:i.maxY}]}getItemMeshRotatedPositionOffsetFromCenter(e){e=e||this.mesh;const t=this.meshPositionOffsetFromCenter.clone();return mi(t,e),t}getMeshCenter(e){e=e||this.mesh;const t=new L.Pq0;return(new L.NRn).setFromObject(e,!0).getCenter(t),this.sceneTransformedCalled&&this.floorplan3DThis.processSceneVec3(t),t}getItemCenterPositionY(){let e=this.itemStartHeight+this.halfSize.y;return $.includes(this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.objectType))||(e+=this.object2D.additionalParams.positionY*this.floorplan3DThis.scaleFactor),e}getMeshPoint(e,t){t=t||this.mesh,(e=e||{}).x=Math.max(-1,Math.min(1,e.x))||0,e.y=Math.max(-1,Math.min(1,e.y))||0,e.z=Math.max(-1,Math.min(1,e.z))||0;const i=t.clone();this.rotateByEulerByReferencePoint(new L.O9p(0,0,0),i,(()=>this.getMeshCenter(i)));const o=(new L.NRn).setFromObject(t,!0),n=(new L.NRn).setFromObject(i,!0),s=new L.Pq0;n.getCenter(s);const a=new L.Pq0;n.getSize(a),s.x=n.min.x+(e.x+1)/2*a.x,s.y=n.min.y+(e.y+1)/2*a.y,s.z=n.min.z+(e.z+1)/2*a.z;const r=new L.Pq0;return o.getCenter(r),s.sub(r),s.applyQuaternion(t.quaternion),s.add(r),s}getItemCenter(){return this.position.clone().sub(this.getItemMeshRotatedPositionOffsetFromCenter())}showError(e){e=e||this.getItemCenter(),this.error||(this.error=!0,this.errorGlow=this.createErrorGlow(this.errorColor,.8,!0),this.scene.add(this.errorGlow)),this.setItemPosition(e,this.errorGlow)}hideError(){this.error&&(this.error=!1,this.scene.remove(this.errorGlow))}createErrorGlow(e,t,i){i=i||!1,t=t||.2;const o=new L.V9B({color:e,blending:L.EZo,opacity:.2,transparent:!0,depthTest:!i}),n=this.mesh.deepClone();return n.traverse((e=>{e instanceof L.eaF&&(e.material.isMaterial?(e.material=o,e.material.needsUpdate=!0):(e.material=e.material.map((()=>o)),e.material.needsUpdate=!0))})),n.position.copy(this.position),n.scale.copy(this.scale),n}placeInRoom(){}resized(){}removed(){}isValidPosition(){return!0}isValidRotation(){return!0}onSceneTransformed(){this.sceneTransformedCalled=!0}stopAllAnimations(){this.animations.forEach((e=>e.stop()))}removeAllAnimations(){this.stopAllAnimations(),this.animations.forEach((e=>e.remove())),this.animations=[]}addAnimation(e){return this.animations.push(e),e}getAnimation(e){return this.animations.find((t=>t.name===e))}setAnimationsVisibility(e){this.animations.forEach((t=>t.setIsVisible(e)))}setMaterialOpacity(e){this.mesh.traverse((t=>{if(t instanceof L.eaF&&this.originalMaterialColors.find((e=>e.meshName===t.name))){(t.material.isMaterial?[t.material]:t.material).forEach((t=>{t.transparent=e<1,t.opacity=e,t.visible=0!==e,t.needsUpdate=!0}))}}))}changeMesh3DObject(e,t){this.remove();const i=this.sceneTransformedCalled;this.sceneTransformedCalled=!1,this.initializeItemMeshData(e,t),this.initObject(),this.sceneTransformedCalled=i}setHighlightColor(e){this.highlightedColor=e,this.setAllPartsColor(e)}highlightOnColor(){this.setHighlightColor(this.highlightEntitiesColorOn)}highlightOffColor(){this.setHighlightColor(this.highlightEntitiesColorOff)}highlightClickableColor(){this.setHighlightColor(this.highlightEntitiesColorClickable)}resetHighlightColor(){this.highlightedColor=null,this.setAllPartsColor("default")}unrenderLight(){this.mesh.light&&(this.mesh.light instanceof L.nCl&&(this.scene.remove(this.mesh.light.target),hi(this.mesh.light.target)),this.scene.remove(this.mesh.light),hi(this.mesh.light))}renderLight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"spot",t=arguments.length>1?arguments[1]:void 0;if(!t)if("spot"===e)t={spotAngle:45,spotDistance:1e3};else t={};if("point"===e&&!(this.mesh.light instanceof L.HiM)||"spot"===e&&!(this.mesh.light instanceof L.nCl)){if(this.unrenderLight(),"spot"===e){this.mesh.light=this.floorplan3DThis.createSpotLight(this.position,this.floorNumber,t);const e=this.getItemCenter();this.setItemPosition(e),this.mesh.light.target.position.set(e.x,e.y-100,e.z),this.scene.add(this.mesh.light.target)}else{this.mesh.light=this.floorplan3DThis.createPointLight(this.position,this.floorNumber);let e=this.getItemCenter();this.setItemPosition(e)}this.scene.add(this.mesh.light),this.mesh.light.needsUpdate=!0}else if("spot"===e){const e=t.spotAngle;f(e)!==this.mesh.light.angle&&(this.mesh.light.angle=f(e),this.mesh.light.needsUpdate=!0);const i=t.spotDistance;this.mesh.light&&i!==this.mesh.light.distance&&(this.mesh.light.distance=i,this.mesh.light.needsUpdate=!0)}}getScreenChildMesh(){return this.mesh.children.find((e=>e.name===Ue[this.objectType].targetChildName))}unrenderScreenPart(){this.mesh.screenPart&&(this.getScreenChildMesh().remove(this.mesh.screenPart),hi(this.mesh.screenPart),this.mesh.screenPart=new L.B69)}renderScreenPart(e){this.screenPartProperties=e;let t=!e.screen_is_light&&!this.mesh.screenPart.userData.nonLightScreenPart||e.screen_is_light&&!e.screen_3d_glow_effect&&!this.mesh.screenPart.userData.basicLightScreenPart||e.screen_is_light&&e.screen_3d_glow_effect&&!this.mesh.screenPart.userData.glow3DLightScreenPart;if(!t&&e.screen_is_light&&e.screen_3d_glow_effect&&(this.mesh.screenPart.userData.screenProperties.screen_3d_glow_factor===e.screen_3d_glow_factor&&this.mesh.screenPart.userData.screenProperties.screen_3d_glow_spread===e.screen_3d_glow_spread||(t=!0)),t){this.unrenderScreenPart(),e.screen_is_light?e.screen_3d_glow_effect?this.mesh.screenPart=this.floorplan3DThis.createScreenPart3DGlowLight(this):this.mesh.screenPart=this.floorplan3DThis.createScreenPartBasicLight(this):this.mesh.screenPart=this.floorplan3DThis.createScreenPartMesh(this);const t=this.getItemCenter();this.setItemPosition(t),this.getScreenChildMesh().add(this.mesh.screenPart),this.mesh.screenPart.needsUpdate=!0}}renderSurfacePlane(){if(this.mesh.surfacePlane.userData.isSurfacePlaneMesh)return;this.mesh.surfacePlane=this.floorplan3DThis.createSurfacePlane(this);const e=this.getItemCenter();this.setItemPosition(e),this.mesh.add(this.mesh.surfacePlane)}unrenderSurfacePlane(){this.mesh.surfacePlane&&(this.mesh.remove(this.mesh.surfacePlane),hi(this.mesh.surfacePlane),this.mesh.surfacePlane=new L.B69,this.mesh.material.visible=!0,this.mesh.material.needsUpdate=!0)}};const N=class extends W{constructor(e,t,i,o,n,s,a,r){super(e,t,i,o,n,s,a,r)}placeInRoom(){}resized(){const e=this.getItemCenter();this.setItemPosition(new L.Pq0(e.x,this.halfSize.y+this.itemStartHeight,e.z))}moveToPosition(e){if(!this.isValidPosition(e))return e.y=this.halfSize.y+this.itemStartHeight,void this.showError(e);this.hideError(),e.y=this.halfSize.y+this.itemStartHeight,this.setItemPosition(e)}isValidPosition(e){const t=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData;return!!this.floorplan3DThis.props.mainComponentThis.floorFreeObjectPositionValidation(new L.I9Y(e.x,e.z).divideScalar(this.floorplan3DThis.scaleFactor),t,this.halfSize.x/this.floorplan3DThis.scaleFactor,this.halfSize.z/this.floorplan3DThis.scaleFactor,-b(this.rotation))}isValidRotation(e){const t=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData,i=this.getItemCenter();return this.floorplan3DThis.props.mainComponentThis.floorFreeObjectPositionValidation(new L.I9Y(i.x,i.z).divideScalar(this.floorplan3DThis.scaleFactor),t,this.halfSize.x/this.floorplan3DThis.scaleFactor,this.halfSize.z/this.floorplan3DThis.scaleFactor,-b(e))}};const V=class extends W{constructor(e,t,i,o,n,s,a,r){super(e,t,i,o,n,s,a,r),this.allowRotate=!1,this.wallOffsetScalar=0,this.isWallItem=!0,this.itemWall=null,this.floorWallsData=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData,this.walls3DArray=this.scene===this.floorplan3DThis.floorplan3DOnMapScene?this.floorplan3DThis.currentWalls3D:this.floorplan3DThis.floorplanViewWalls3D}depthDirectionOffsetTranslation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=this.floorplan3DThis.props.mainComponentThis.getOnWallItemDepthOffsetParams(this.object2D,this.object2D.additionalParams.depth3D/2,null,i),n=ti(this.object2D,o.offsetValue,o.wall2D.angle);e.x+=t*n.offsetX,e.z+=t*n.offsetY}createItemWall(e,t){const i=new L.I9Y(t.x,t.z).divideScalar(this.floorplan3DThis.scaleFactor),o=this.walls3DArray.find((t=>t.wall2D.wallId===e.wallId));return Wt(i,o.interiorLineEquation).distance<Wt(i,o.exteriorLineEquation).distance?{wall3D:o,wallPlane:o.interiorWallPlane}:{wall3D:o,wallPlane:o.exteriorWallPlane}}closestItemWall(){const e=this.getItemCenter();let t=new L.Pq0(e.x,0,e.z).divideScalar(this.floorplan3DThis.scaleFactor);this.depthDirectionOffsetTranslation(t,-1);const i=this.floorplan3DThis.props.mainComponentThis.editor.nearWall(new L.I9Y(t.x,t.z),this.floorWallsData);if(i){if(this.addToWall){const e=this.object2D.angleSign,t=this.walls3DArray.find((e=>e.wall2D.wallId===i.wall.wallId));return 1===e?{wall3D:t,wallPlane:t.exteriorWallPlane}:{wall3D:t,wallPlane:t.interiorWallPlane}}return this.createItemWall(i.wall,e)}return null}removed(){null!=this.itemWall&&(this.itemWall.wall3D.removeWallObject(this,this.addToWall?"inWall":"onWall"),this.addToWall&&this.redrawWall())}redrawWall(){this.addToWall&&this.itemWall&&this.itemWall.wall3D.redrawWallExteriorInteriorPlanes()}updateSize(){this.wallOffsetScalar=this.halfSize.z,this.sizeX=2*this.halfSize.x,this.sizeY=2*this.halfSize.y}resized(){this.updateSize();const e=this.getItemCenter();this.itemWall?(this.boundToFloor&&(e.y=this.halfSize.y),this.boundMove(e),e.y+=this.itemStartHeight,this.setItemPosition(e)):this.boundToFloor&&this.setItemPosition(new L.Pq0(e.x,this.halfSize.y+this.itemStartHeight,e.z)),this.redrawWall()}placeInRoom(){const e=this.closestItemWall();if(e){const t=this.getItemCenter();this.changeItemWall(t,t,e,!0),this.updateSize()}}moveToPosition(e,t){if(t){const i=t.object.wall3D.interiorWallPlane.planeObject.uuid===t.object.uuid?t.object.wall3D.interiorWallPlane:t.object.wall3D.exteriorWallPlane;this.changeItemWall(e,t.point,{wall3D:t.object.wall3D,wallPlane:i})}this.boundMove(e),e.y+=this.itemStartHeight,this.setItemPosition(e),this.redrawWall()}getWallOffset(e){return-1*e*this.wallOffsetScalar}changeItemWall(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=t.clone().divideScalar(this.floorplan3DThis.scaleFactor);o&&this.depthDirectionOffsetTranslation(n,-1);const s=new L.I9Y(n.x,n.z),a=this.floorplan3DThis.props.mainComponentThis.editor.nearWall(s,this.floorWallsData);if(a){let n=!0;if(!o||!this.position_set){const t=Zt(this.object2D),i=this.object2D[t];this.floorplan3DThis.props.mainComponentThis.inWallonWallObjectForceJoinToWall(a.wall,a,s,this.object2D)?this.rotateItem(f(this.object2D.angle),-1):n=!1,i!==this.object2D[t]&&(this.object2D.additionalParams.width3D=this.object2D[t],this.resize(this.object2D.additionalParams.width3D,this.object2D.additionalParams.height3D,this.object2D.additionalParams.depth3D)),e.x=this.object2D.x*this.floorplan3DThis.scaleFactor,e.z=this.object2D.y*this.floorplan3DThis.scaleFactor}n&&(null!=this.itemWall&&(this.addToWall?(this.itemWall.wall3D.removeWallObject(this,"inWall"),this.redrawWall()):this.itemWall.wall3D.removeWallObject(this,"onWall")),i.wall3D.wall2D.wallId===a.wall.wallId?this.itemWall=i:this.itemWall=this.createItemWall(a.wall,t),this.addToWall?(i.wall3D.addWallObject(this,"inWall"),this.redrawWall()):i.wall3D.addWallObject(this,"onWall"))}}customIntersectionPlanes(){let e=[];const t=this.walls3DArray.filter((e=>e.floorNumber===this.floorNumber));for(let i=0;i<t.length;i++)e.push(t[i].interiorWallPlane.planeObject),e.push(t[i].exteriorWallPlane.planeObject);return e}boundMove(e){const t=this.itemWall.wallPlane.planeObject.uuid===this.itemWall.wall3D.interiorWallPlane.planeObject.uuid;let i=t?this.itemWall.wall3D.interiorLineCoords:this.itemWall.wall3D.exteriorLineCoords;i=i.map((e=>new L.I9Y(e.x,e.y)));const o=Bt(i[0],i[1])*this.floorplan3DThis.scaleFactor,{transform3Dto2DMatrix:n,transform2Dto3DMatrix:s}=this.itemWall.wall3D.calculateWallPlaneTransformMatrices(i[0].multiplyScalar(this.floorplan3DThis.scaleFactor),i[1].multiplyScalar(this.floorplan3DThis.scaleFactor));e.applyMatrix4(n),e.x<this.sizeX/2+0?e.x=this.sizeX/2+0:e.x>o-this.sizeX/2-0&&(e.x=o-this.sizeX/2-0),this.boundToFloor?e.y=this.halfSize.y+.01:(e.y-=this.itemStartHeight,e.y<this.sizeY/2+0?e.y=this.sizeY/2+0:e.y>this.itemWall.wall3D.wallHeight-this.sizeY/2-0&&(e.y=this.itemWall.wall3D.wallHeight-this.sizeY/2-0)),e.z=this.getWallOffset(t?1:-1),e.applyMatrix4(s)}};const E=class extends V{constructor(e,t,i,o,n,s,a,r){super(e,t,i,o,n,s,a,r),this.addToWall=!0}depthDirectionOffsetTranslation(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=this.itemWall?this.itemWall.wall3D.wall2D:this.floorplan3DThis.props.mainComponentThis.editor.nearWall({x:this.object2D.x,y:this.object2D.y},this.floorWallsData).wall,n=ti(this.object2D,this.getAdditionalInWallItemDepthOffset(o,i),o.angle);e.x+=t*n.offsetX,e.z+=t*n.offsetY}getAdditionalInWallItemDepthOffset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.floorplan3DThis.props.mainComponentThis.getInWallItemDepthOffsetParams(this.object2D,e||this.itemWall.wall3D.wall2D,t).offsetValue}getWallOffset(e){return e*(this.itemWall.wall3D.wall2D.thick*this.floorplan3DThis.scaleFactor)/2-e*this.getAdditionalInWallItemDepthOffset(this.itemWall.wall3D.wall2D,this.floorplan3DThis.scaleFactor)}changeDoorHinge(e){this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(this.objectType,"door")&&(this.floorplan3DThis.props.mainComponentThis.setDoorObject2DHinge(this.object2D,e),this.meshScaleXSign*=-1,this.resize(this.object2D.additionalParams.width3D,this.object2D.additionalParams.height3D,this.object2D.additionalParams.depth3D))}onWindowRotationOptionsChange(){}};const H=class extends E{constructor(e,t,i,o,n,s,a,r){super(e,t,i,o,n,s,a,r),this.boundToFloor=!0}};const z=class extends N{constructor(e,t,i,o,n,s,a,r){super(e,t,i,o,n,s,a,r),this.obstructFloorMoves=!1,this.mesh.receiveShadow=!0}};const G=class extends V{constructor(e,t,i,o,n,s,a,r){super(e,t,i,o,n,s,a,r),this.boundToFloor=!0}},q=[{gradientStartColor:"rgb(245, 88, 71)",gradientStopColor:"rgb(255, 0, 0)"},{gradientStartColor:"rgb(228, 192, 110)",gradientStopColor:"rgb(255, 176, 0)"},{gradientStartColor:"rgb(136, 204, 108)",gradientStopColor:"rgb(96, 196, 55)"},{gradientStartColor:"rgb(119, 225, 244)",gradientStopColor:"rgb(0, 217, 255)"},{gradientStartColor:"rgb(79, 114, 166)",gradientStopColor:"rgb(40, 77, 126)"},{gradientStartColor:"rgb(102, 102, 102)",gradientStopColor:"rgb(170, 170, 170)"},{gradientStartColor:"rgb(250, 250, 250)",gradientStopColor:"rgb(234, 234, 234)"},{gradientStartColor:"rgb(249, 173, 103)",gradientStopColor:"rgb(249, 127, 0)"},{gradientStartColor:"rgb(167, 132, 217)",gradientStopColor:"rgb(137, 81, 218)"},{gradientStartColor:"rgb(223, 103, 189)",gradientStopColor:"rgb(226, 42, 174)"},{gradientStartColor:"rgb(60, 59, 59)",gradientStopColor:"rgb(0, 0, 0)"},{gradientStartColor:"rgb(226, 198, 149)",gradientStopColor:"rgb(198, 157, 86)"}],U=["None","Lounge","Lunchroom","Kitchen","Bathroom","Bedroom","Locker","Office","Hall","Loggia","Balcony","Terrace","Corridor","Garage"],Y=[{title:"Color",fill:"#fefbf3"},{title:"Unknown",fill:"#666666",width:256,height:256},{id:"concrete",title:"Concrete",fill:"url(#Concrete)",width:256,height:256},{id:"brick",title:"Brick",fill:"url(#Brick)",width:256,height:256},{id:"stone",title:"Stone",fill:"url(#Stone)",width:256,height:256},{id:"knauf",title:"Knauf",fill:"url(#Knauf)",width:256,height:256},{id:"wood",title:"Wood",fill:"url(#Wood)",width:256,height:256},{id:"glass",title:"Glass",fill:"url(#Glass)",width:256,height:256},{id:"plastic",title:"Plastic",fill:"url(#Plastic)",width:256,height:256},{id:"metal",title:"Metal",fill:"url(#Metal)",width:256,height:256},{id:"granite",title:"Granite",fill:"url(#Granite)",width:256,height:256}],X=[{field:"interiorPlaneMaterial",label:"Side 1:",validate:e=>T.isEmpty(e)||T.isHexColor(e),defaultColorValue:Y.find((e=>"Color"===e.title)).fill,selectRefPropertyName:"interiorPlaneMaterialSelectRef",dropdownRefPropertyName:"interiorPlaneMaterialDropdownRef"},{field:"exteriorPlaneMaterial",label:"Side 2:",validate:e=>T.isEmpty(e)||T.isHexColor(e),defaultColorValue:Y.find((e=>"Color"===e.title)).fill,selectRefPropertyName:"exteriorPlaneMaterialSelectRef",dropdownRefPropertyName:"exteriorPlaneMaterialDropdownRef"}],K=[{name:"Light",value:"light-v11"},{name:"Satellite",value:"satellite-v9"},{name:"Dark",value:"dark-v10"}],Z={1:W,2:N,3:H,4:E,5:z,6:G,7:V},$=[2,3,5,6],J=[3,4,6,7],Q={1:"free",2:"floorFree",3:"inWall",4:"inWall",5:"floorFree",6:"onWall",7:"onWall"},ee=e=>{for(const[t,i]of Object.entries(Ee))if(i.models.includes(e))return t;return""},te=["CCTV","hangingLight","fluorescent","ceiling-lamp","lamp2","ceilingFan","minispot","lightSource"],ie=["frenchWindow2","frenchWindow85x200","window85x123","window85x163","turn-window","smallWindow2","window_2x3_frame_sill","window_deep","fixed_window_2x2","doubleOutwardOpeningWindow","doubleWindow126x123","doubleWindow126x163","doubleWindow2","window_double_2x3_frame_sill","doubleFrenchWindow2","doubleFrenchWindow126x200","window_2x4","window_2x6","window_4x5","window_3x1","window_4x1","window_2x1_medium_with_large_pane","sliderWindow126x200","window_2x1_with_sliders","window-08","window_shop","window_stain_glass","fixedWindow85x123","glassblock","serviceHatch","fivePanesWindowWithWallPart","rectangularFivePanesWindow","pictureWindow","simpleShutter","traditionalShutter","twoPartsShutter","fancyWindow","newWindowDk","windowFrostedGlass","window_shutter","window_double_3x3","door_window_thick_double_2x4","door_window_thick_double","door_window_thick","window_double_frame_sill","window_urban_neoclassic","window2","window-01","window-08-02","window-shutter","window_2x3_arched","window_2x3_regular","window_2x3","window_2x4_arched","window_4x3_arched","window_4x3"],oe=["door","glass_door_framless","screen-door","puerta","craftsmanDoorClosed","sliderPocketDoor","doorFrame","double_door_2","double_door","double_plain_door_with_little_part","exterior-door-05","exterior-door-07","frontDoor","frontDoor2","glass_door","double_door_with_little_part","glassDoor2","japanesedoor","garage-door","garage-door2","emergencyGlassDoubleDoor","revdoor","elevator","elevator-door","slidingDoors","frontDoorDark","garageDoor","patioGlassDoorUnit","sixDoorFrenchStyle","frenchDoors","DianaWindow","accordionFoldDoors","garageDoor2","doorGlassPanels","door1","glassDoorsOpened","patioDoorOpened","patioDoor","patioSideDoor","fancyFrontDoor","door_glass","exterior-door-01","exterior-door-02","exterior-door-03"],ne=["hangingLight","lamp2","pendantLamp","lustreBoule","ceiling-lamp","minispot","painting_light","track-lights","spotlight","wall-spotlight","wallUplight","wall_lamp","fluorescent","fluorescent-strip","lightSource","lightSource2","floorUplight","porch-light","street_light_modern","farola1","lampeHalogene","led_striplight","wallLight","bougeoir","neon","candleOrnament","deskLamp1","deskLight","ceiling_lamp_globo_feria","lamp_paraffin_feuerhand","lamp_wall_outside","classic-lamppost","flashlight","hanging-restaurant-light","park-light","pedestal-vase-lamp","wall-lamp-artwork","desk_lamp1","desk_lamp2","little_lamp1","little_lamp3","saloon_lamp","table_lamp","living_room_lamp1","living_lamp","chandelier-lamp","candelabre","candle"],se=["washbasin_jay_hardy","bathroom3","hand-washbasin","stone-washbasin","ergonomic-washbasin","bathroom_vanity","modernVanity","washbasin","bathroom_sink","mobilettoLavaboWenge","wash_basin_corner","washbasinWithCabinet","islandBath","bathtub_jet_system","fittedBath","bath","corner_bathtub","bacADouchePlat","mixer-tap-for-shower","shower","doccia","shower_cabin","shower-cabin-with-seat","toilet_hang_round","japanese-toilet","toiletUnit","small-urinal","bidet","towel2","com_bath3","towel3","showerCurtain","barreAppuiCoude","barreAppui","folding-grab-bar","savon","com_bath2_jabon_pijo","potBrossesADent","secheCheveux","potty","toiletBrush","bathroom-tissue","pesePersonne","basin","bathmat","clothes-basket","clothes_line","clothes_washing_machine","clothesWasher","dryer_machine","fer","plancheARepasser","comb","cosmeticsPot","showerDoor","toiletPaperDispenser","toiletsUnit","flacon","showerStall","urinal","bath_jay_hardy","bathroomRadiator","lipStick","toilets_unit_jay_hardy","radiatorAndTowels","modernToilet","meubleSalleDeBain","bidon","robinet","parfumAmbiance","rasoir","shampoo","gelDouche","boiteDeMouchoirs","derouleurWC","tube","pareDouche","bathroomFurniture","towelMedicineCabinet","bath_L","bathroom_cupboard_mirror","towel_rack","tendaDoccia","barreAppuiL","towel-rack","showerHeadAndFaucet","mobilettoSpecchioBlu","mobilettoSpecchioWenge","mobilettowenge","water","bathroom4","bathroom1","double_vanity","com_bath","com_bath2_cepillo","com_bath2_esponja","com_bath2_peineta","com_bath2_soap","com_bath3_toalla","medicoscopia_bottle","medicoscopia_bottle2","medicoscopia_box","small_lavatory","folding-wall-seat","mixer-tap-for-bath-and-shower","mixer-tap-for-bath","shower-armchair","shower-chair","turkish-toilet"],ae=["bedFlowers","air-mattress","bed3","bed","bed1","bed140x190","bed90x190","bedWithTexture","captains-bed","juniorBed","convertible-sofa-BZ-opened","bunkBed","bunkBed90x190","loftBed140x190","cornerBunkBed90x190","litMezzanine","litMezzanine2","mezzanine-bed","crib","adjustable-hospital-bed","armoireLotus","mobileCiliegio","mobileangoloCiliegio","mobileAngoloInterno","mobileAzzurro","corner","wardrobe","wardrobe2","changing-table","chest","kommode","petiteCommode","armoire","bedsideTable","bedsideTable2","comoCiliegio","mensolaCurvaAcero","pensileAcero","clothes-rack","clothes-hanger","clothes-horse","portemanteaux2","folded_clothes","futon","hanging-clothes1","backpack","casque","hospital-table-on-wheels","hotelSafe","sleepingBag","bootieSeparated","slippersSeparated","sneakersSeparated","mocassinSeparated","womanShoesSeparated","blocks","doll","doll-house","smiley","teddyBear","train","letters","housePuzzle","rubix2","bed2","caballito","cartoon_biplane","wardrobeWithSlidingDoors","cupboard","babyRockingBed","cardGame","briefcase","handbag","woodToy","carrito-de-madera","clock","suit","chessboard","lettoCloud","toyTrain","xylophone","petitReveil","p40","daybed","captainsBed","trundleBed","litParents","clicClacOuvert","lit","meubleChevet","suits_racked","childBed","hanging-clothes2","comodinoSinistroCiliegio","lettoCiliegio","mensolaCiliegio","comodinoAzzurro","lettoAzzurro","lettoSoppalcoAzzurro","mensolaAcero","scaletta","iron_bed","wardrobe1","children_bed","kids_shelves","robe","casquette","chapeau","short-shadows","pantalon-shadows","blouson","jupe","jupe-doeskin","chaussette","montre-with-pose","montre","bague","gant-textured","dressing-table","day_bed_frame","tasDeVetements","oreiller","flipFlops"],re=["awning_bracket","barnum","umbrella","hangingUmbrella","pergola","deckChair","hammock","cafe-chair","silla_teca","ext_table","cafe-table","rattanArmchair","rattanSofa","rattanTable","picnic_table","painted-bench","barbecue","grillNgauge","basketball_net_and_board","football-goal","big-football-goal","campingTent","campingLamp","swimming-pool","diving-board","pool_ladder","round-swimming-pool","jacuzzi","sandpit","motorbike","trampoline","child_swing","parque","bonecoDeNeve","fence","iron-railing-separated-hooks-2","gardeCorps","railing","railing_glass","privacyFence2","portillon","fence_grid","fence_picket","pedestrianRailing1","pedestrianRailing2","gate_grind","column_balustrade","column_balustrade_corner","waterFountain","fountain","greenhouse","garden-hut","dog-house","boiteALettre","feu-de-signalisation-simple","stoneLantern","outdoorLamp","window_flat_roof_skylight_bubble","porch-column-03","rainGutterPart1","rainGutterPart2","passage-pieton","croisement2et2","routeCourbe2VoiesAvecTrottoirs90Deg","route2VoiesAvecTrottoirs","voiesFerreesAiguillage","voiesFerreesCourbe20m","voiesFerreesDroit10m","birch","bush","hedgeTextured","lavender-bush","palm","pansy","tree","lombardyPoplar","pine","plantie","rock1","rock2","rock3","roses-bush","bump","wheelie_bin","flowerBox","mofx_mailbox","relaxChair","bench","childHut","childSwing","seesaw","wheelbarrow","lantern","chair_deck","poolLounge","rowboat","transat","table_footrest","fencepost1","fencepost2","borderfence-main","borderfence-small","dogHouse","blackDeckTable","gardenUmbrella","blackDeckChair","privacyFence","canapeJardin","swimmingPool","balancelle","cloture","fence_grid_gate","bordure","gate_iron","portail","etendoirLinge","flag_hinged_pole","parasol_str","traffic_light_ped","concrete-bench","park-trashcan","porch-column-01","porch-column-02","residential-trashcan","spray-bottle","concrete-sidewalk","fire-hydrant","hose-reel","ext_chair","littlebank","wood_bank","beach_chair","letters_box","rectangle-swimming-pool","garden-faucet","passage-a-niveau","rails","fleche-tout-droit","fleche-tourner-a-droite-et-direct","fleche-tourner-a-droite","stationnement-creneau","stationnement-en-bataille","stationnement-epi-45","stationnement-epi-60","stationnement-epi-75","high-hedge","hedge","acacia","bamboo","ficusTree","bluePineSnow","coconutTree","coconutTreeBended","copperBeech","cypress","japaneseMaple","poplar","peachBlossom","pineSnow","sabalPalmeto","sycamoreMaple","tasDeTerre","tasDeSable","tasDeGravillons","tasDeGravats","voiesFerreesCourbe10m","voiesFerreesCourbe40m","voiesFerreesDroit1m","routeCourbe2VoiesAvecTrottoirs26m","routeCourbe1VoieAvecTrottoirs26m","routeCourbe2VoiesAvecTrottoirs6.5m","routeCourbe1VoieAvecTrottoirs6.5m","routeCourbe1VoieAvecTrottoirs13m","routeCourbe2VoiesAvecTrottoirs13m","route1VoieAvecTrottoirs","croisement1et1","croisement1et2","pont2Voies","pont1Voie","separateurDeVoie","pilierPont1Voie","autoroute2Voies","routeCourbe1VoieAvecTrottoirs90Deg","filElectrique","poteau-en-beton","poteau-en-bois","feu-de-signalisation-avec-signalisation-au-dessus","hydrangea","blackTupelo","quakingAspen","fanPalm","sassafras","weepingWillow"],le=["lowerCabinet","lowerCornerCabinet","drawersCabinet","smallUpperCabinet","upperCabinet","sinkCabinet2","kitchenSmallLowerCabinet","kitchenLowerCabinet","kitchenIsland","kitchenDrawersCabinet","kitchenSink","kitchenUpperCabinet","kitchenSmallUpperCabinet","kitchenGlassDoorCabinet","kitchenCabinet","cabinet","cabinetWithBasin","drawers","upperCabinet2","highCabinet","meubleMicroOnde","sink","islandExtension","tableCuisine","meubleChaussures","dishwasher","fridge","fridgeFreezer","refrigerator","largeFridge","rangeHood","chest-freezer","stove1","stove","largeStove","oven","ovenFront","hood","kitchenHood","induction-cooker-2-zones","induction-cooker-4-zones","mano_cooktop","lavastoviglie","doubleOven","sgabello","tabouretBar","stool2","baby_high_chair","boiler","bouilloire","toaster","coffeeBrewer","percolateur","coffee-maker","cooker","electronicScale","autocuiseur","sandwichMaker","small-oven","spiceTower","saltShaker","grillePain","towel","poubelleInox","tray","kitchenKnife","kitchenKnifeStandSet","poele","casserole","paperTowelHolder","bouteille","bolDeRiz","plate-and-ustensils","ensemble-assiette-couteau-fourchette-cuillere-verre","kitchen-glass-jar-high","cocktailGlass","glass","coffee-mug","coffeePress","choppingBoard","baguettes","bowl","mamadeira","utensilsPot","aspirateur","broom","bucket","eponge","food-box-pasta","food-box-corn-flakes","tetrapak","container","caffe_final","butter","cupcake","birthday_cake","bowlWithFruits","bowlWithSalad","bread","apples","baguettePain","toast","steak","roasted-chicken","citrouille","pizza","hotDog","hamburger","frenchFries","kitchenaid","knifeStandSwap","plasticCup","silla2","yogurtBottle","beerGlass","upperCornerCabinet","upperShelves","beer_bottle","coffee_cup","fork","kitchenblender","kitchenTools","knife","largePan","microwave","spoon","washing_machine","breadBox","kitchenScale","espressokettle","boiteMetal","chaiseCuisine","verreFlute","glassDoorKitchenCabinet","verreLongDrink","microOnde","mug","assietteVerresCouverts","smallGlass","carafeEau","verreEau","carafeVin","verreVin","glassdoorCabinet","mobile_cucina_60x60","lavello_doppio_90x60","cassetti_cucina_45x60","isola_cucina_150x90","pensile_cucina_45x90","pensile_cucina_60x70","capa","piano_cottura","frigorifero","ceramicHob","cornerCabinet","3DrawerCabinet","2GlassDoorCabinet","2DoorUpperCabinet","2DoorLowerCabinet","1GlassDoorCabinet","1DoorUpperCabinet","1DoorLowerCabinet","refridgerator","pantry","kitchenSinkWithMarble","cornerChina","couteauADecouper","couteauAPain","plancheADecouper","barCusisine","frigo","desserte","casierBouteilles","cookingPlate","gaz","washer_dryer","ashtray","bullet-trash-can","12-oz-glass","highball-glass","oil-servers","dinner-plate","bread-plate","propane-stove","red-wine-bottle-01","angolo","cucina","curva","curvaEsterna30","curvaInterna30","doppio","pensileAngolo","pensileCurva","pensileDoppio","pensileVetro","pianoIsola","singolo","lavello","cassettiera","mobilettoGrande","mobilettoPiccolo","gasHob","old_jar","pottery","sushi_tray","kitchen_tool1","kitchen_tool2","kitchen_tool3","kitchen_tool4","wine_bottle","bar_chair","kitchen_stool","coffee_machine","creamer","cup","sugar","teapot","shovel","shopping-basket","squeezer","deepFryerWithFrenchFries","stoneGrillDevice","food-spaghetti-box","kitchen-glass-jar-low","waitress-table-on-wheels"],he=["clear_sofa","beige_sofa","L_shaped_sofa","cornerSofa","sofa","couch2","futon-couch","simple_sofa","sofa1","sofa2","convertible-sofa-BZ-closed","clicClac","bookcase","dining_room","cabinet2","elementHautSalon","meubleHiFiHaut","stainlessSteelShelf","shelves_storage_steel","shelves_storage_wood","dresserWithDrawers","full-bookcase","tourRangeCD","glassDoorCabinet","pinewoodRackLowHeight","pinewoodRackMediumHeight","etageres","etagereEnfant","longcase_clock","winchesterArmchair","rocking_chair","fotel","armchair","armchair2","armchair3","chair_granmother","chair","kitchenChair","thonet","chair3","chair4","white_kitchen_chair","childChair","children_chair","foldingChair","folding_chair","chaiseOrange","osakaChair","ryokanChair","stool_small","green_stool","stool","pianoBench","tabouretPiano","puff","black_table","folding-table","children_table","coffeeTable","coffee_table","table_wood_and_iron","tableBasse2","couchTable","round-table","roundTable","squareTable","table-on-trestles","white_kitchen_table","table","table2","table-with-leaning-feet","tableCuisine2","glass-dining-table","meubleHiFiBas","table_half_round","oakTable","tableWithTablecloth","dresser","dvd","playstation4","ps4-joystick","tv-remote-control","video-projector","wirelessOfficePhone3","aquarium","filledBookcase","fireplace","cheminee","fireplace1","fireplace2","AtorHaut","furnace","guitar","piano","pianoDroit","MIDI-keyboard","batterie","microphone-with-foot","carpet","oriental-rug","round-carpet","desklamp","lamp","little_lamp2","JapaneseLantern","luckyBamboo","bonsai-tree","boston-fern","cactus","decorativePlant","flowers","mediumIndoorPlant","orchids","augalas","maceta","plant","roses","succulentPlant","yuccaPlant","christmas_tree","deer","oakChair","pianoAQueue","plasticChair","shelves","televisionCabinet","verticalShelves","electricGuitar","littlePlant","sillaBlanca","couch","modernArmchair","antiqueChair","chairWithCushion","winchesterSofa","designChair","arbolito","cafe_set_mota_chair","cafe_set_mota_table","cafe_set_tonon_chair","cafe_set_tonon_table","ella_chair_f","leaf_chair","spatifilum","tvStand","armchair1","spider_plant","tulip","white_lily","plaidChair","sofa3","tulips","couch3","barStool","bookcase2","computerWorkstation","cornerWorkstation","bocalPoisson","tableGnome","rectangularTable","squareCoffeeTable","tableBasseBois","woodTable","priseTV","petiteTableSalon","bibliothequeDroite","allenOrgan","highBoyDresser","smallbookshelves","salontafel","couchTwoSeats","kleed_grieks","pinewoodRackFullHeightHalfWidth","pinewoodRackFullHeight","latticeChair","meubleMural","CDrack","displayCabinet","hallTable","potplant2","roundTable2","shelving","sofa3Single","sofa4","couchPoofyPillows","largeCouch","singleChair","throwPillow","counter","tableBasse","pancaFratinoSing","tavoloFratino","chair_high","shelves_storage_wood2","table_granmother_marble","armchair_wing","bar_stool","dropLeafTable","mid-century-chair","chair-ottoman","bar-stool","dining-chair","utility-shelving","mid-century-bench-sofa","mid-century-sofa","credenza","sedia","tavolino","tavolo","box_room","saloon_table","table3","table4","wooden_table_office","tubular_chair","metal_glass_table","glass_table_office","desk_table","bar_table","beige_sofa_2seats","burlap_sofa","leather_sofa","living_room_table","modern_armchair","plastic_chair","calla_lily_with_roses","sofa_white_beige","ficus","coffee-table2","lavender"],ce=["box","cylinder","sphere","smoke-detector","emergencySign","estintore","antenaTV","antenaParabolica","external-unity-air-conditioning","solar_panel_140W","intercom","headphones","mini_stereo","speaker2","reflex_camera","abdominalBench","treadmill","indoor-bike","punching-ball","flipper","table_football","dart_game","poolTable","table_tennis","ballonFoot","tatami","livreAvecReliure","book","livres","foldedNewspaper","revue","pileMagazines","bdOuverte","revueOuverte","cardboard-box","crate","litiere","lockedLocker","gift","suitcase","putekasse","cageFuret","arbreAChat","clock2","corniceConcaveCorner","cornice","doormat","folding-armchair","rectangularMirror","ovalMirror","mirror","frame","frame1","frame3HorizontalNorwayPhotos","frame3VerticalSummerPhotos","HaiVanPassFrame","ButterflyFrame","frame_square","cendrier","complements2","keys","glasses","hotWaterRadiator","radiateur","radiator3","radiateurVertical","radiator1","electricRadiator","electric_water_heater","gaz_water_heater","entry-bell-ring","entry-bell-speech-unit","marteau","tournevis","square-double-switch","square-switch","square-plug-TypeB","square-plug-TypeE","double-switch-whites","switch-whites","plug-TypeB-whites","plug-TypeE-whites","electricOutlet","electricOutlet2","boucheVMC","step-ladder-metal","mower","sewing_machine","pallet","wood_logs","umbrellaFolded","vase3","jar","wheelchairSymbol","electricWheelchair","wheelchair","walker-with-wheels","wall_handrail","japanese_style_screen","shippingContainer","radiator2","radiator","speaker3","tableFan","ammoBox","barrel","basketball","fireExtinguisher","numberLock","cuckooClock","riggedFan","tennisRacket","radio","wallDoubleSocket","wallSocket","wire-coathanger","sunglasses","tableTennisBat","modernRadiator","mp3Station","workbench","fitnessTower","fut","pompeBiere","curtainRod","priseTelephonique","rampe","tableauMulet","tableauVisage","tableauVisage2","tableauVisage3","tableauYing","prise","railing1","roundedEdgesRailing","roundedEdgesRailing1","scie","rampeArcCercle","interrupteur","tableauElectrique","horlogeUbuntu","venetianBlind","etau","portemanteaux","arch","AntelopeCanyonFrame","EiffelTowerFrame","InariFrame","MontBlancFrame","lightSwitch","smallWroughtIronRails","wroughtIronRails","pavesDeVerre","pile","polygonalRoof","toitureArdoiseRouge","TorontoOntarioPlaceFrame","TigerFrame","NiagaraFallsFrame","VeniceFrame","picture","guacal","LakeMoraineFrame","SquirrelFrame","StatueOfLibertyFrame","VaticanMuseumFrame","EtretatFrame","ColoredFountainFrame","HorseShoeBendFrame","TucanFrame","YosemiteFrame","WaterLilyFrame","ruffledVase","radiator_7section","bd","livreJava","sh3dMag","SweetHome3DKompakt","enceinteColonne","AtorArriere","bathroom_fan","frame_horizontal","frame_vertical","frame3HorizontalMomijiPhotos","frame3VerticalTowerPhotos","ladder_simple","ladder_water","plastic_storage_box","sauna_120x120","vent_round","staircase_handrail_hor","metalBeam","pwdRamp","iron-railing-02","recycling-bin","tape-measure","trunk-large","newspaper","vase1","vase2","vase5","frame2","basic_camera","electric_water_heater_big","mp3_base_for_ipad","stereo_amplifier","open-cardboard-box","step-ladder-wood","wall-hanger","iron-railing-separated-hooks-1","iron-railing-separated-hooks-3","scie-egoine","rouleau-de-ruban-adhesif","pelle","cone","perceuse-electrique","meuleuse-electrique","billet-10-euros","billet-20-euros","billet-50-euros","rounded-antenna","rounded-dimmer","rounded-double-switch","rounded-plug-TypeA","rounded-plug-TypeB","rounded-plug-TypeCFlat","rounded-plug-TypeE","rounded-plug-TypeG","rounded-RJ-45","rounded-switch","square-antenna","square-dimmer","square-plug-TypeA","square-plug-TypeCFlat","square-plug-TypeG","square-RJ-45","antenna-whites","dimmer-whites","plug-TypeA-whites","plug-TypeCFlat-whites","plug-TypeG-whites","RJ-45-whites","chimney","round-chimney","pince-coupante","parpaing","cageALapin","roueAvecJante","newspapersPile","openedNewspaper","safeOnFeet","fil-electrique-1m","pileRevues","walker"],de=["angolo160W","angolo198W","angolo80W","mobile45160W","mobile45198W","mobile4580W","cassettieraW","office_furniture1","office_box","chair2","office_chair","chair_office_y","desk","lbDesk","office_desk","bureauInfoOuvert","wooden_office_pear_table","bureau3","pcstul","inkjet_and_scanner_printer","souris","tourPC","phone","imprimanteFaxPhotocopieur","penbox","pencil1","water_cooler","whiteBoard","lamp_office","workLamp","dustbin","cissors_swap","ruler","technicalTable1","technicalTable2","textMarker","kalender","biurko3","sef-kasa","simpleDesk","officeTable","classSeat","armChair2","bureauInformatique","clavier","bigCornerDesk","plantersDesk","stylo","secretarysDesk","desk2","officeChair","officeChair2","officeChair3","escritorio","bureauEcolier","invoice","bureauInfoClair","chair_office_x","scissors","office-chair","custom-desk","filing-cabinet","stapler","raccordo80W","scrivania160W","mobile90160W","mobile90198W","mobile9080W","kids_desk_chair","kids_desk_table","kids_wooden_desk","wooden_office_alder_table","wooden_office_pear_table_rect","wooden_office_teak_table","bandeja","pencil2"],pe=["staircase_90_bottom","curveStaircase","staircase_180_long","escalator","staircase_180_landing","staircase_90_landing","stairs_90_closed_legal_high","stairs_rail","stairs_180_circular_notopstep_rail","spiralStaircase","staircase_360_circle","stairs_180_square","staircase","stair_ladder_loft","staircase_samba_265x150x85","stair_straight_open_stringer","staircase_ladder_steep","staircase_90_top","staircase_270_box","staircase_u2h","grandStaircaseDark","escalierColimacon2","outdoor_staircase","stairs_topcurve_90","staircase_90_high_open","staircase_straight","stairs_legal","stairs_spiral","quarterSlope","home-lift","stair-lift-rail","stair-lift"],me=["seat_leon","smart-car","sportive","break","decapotable","monospace","renault-scenic","pickup","4x4","renaultKangoo","van","truck","dafTruck","scooter","bicycle","scooter2","remorque","caravane","stroller","bus","cityBus","tramway","locomotive","wagon","forkLift","peterbilt","bike","fordFocus","peugeot103","concept-sedan-01v2","concept-sedan-02","concept-sedan-02-sport","VW-new-beetle","concept-sedan-01v1","peugeot-308","yamaha-yzr-r6","tricycle","chevrolet","skateboard","suv2","carSegmentA"],ue={CCTV:{cameraLensMeshName:"Sphere",rotationYAngleDegMin:-180,rotationYAngleDegMax:180,modelRotationYOffsetDeg:0,modelMirroredRotationYSign:-1,modelRotationYAngleSign:-1,rotationXAngleDegMin:-90,rotationXAngleDegMax:90,modelRotationXOffsetDeg:20,coverage2DAreaOffsetAngleDeg:180},surveillanceCamera:{cameraLensMeshName:"sweethome3d_opening_on_hinge_1_Cubo_Cubo.007",rotationYAngleDegMin:-90,rotationYAngleDegMax:90,modelRotationYOffsetDeg:-33,modelMirroredRotationYSign:-1,modelRotationYAngleSign:1,rotationXAngleDegMin:-90,rotationXAngleDegMax:90,modelRotationXOffsetDeg:0,coverage2DAreaOffsetAngleDeg:0}},ge=[],fe=["craftsmanDoorClosed","door","exterior-door-05","exterior-door-07","garage-door2","glass_door","glass_door_framless","puerta","double_door_with_little_part","double_door_2","doubleFrenchWindow2","doubleWindow2","fixed_window_2x2","frenchWindow2","smallWindow2","window_2x1_medium_with_large_pane","window_2x1_with_sliders","window_2x4","window_2x6","window_3x1","window_4x1","window_4x5","window_deep","window_double_2x3_frame_sill","awning_bracket","fireplace1","fireplace2","curvedWallOLEDTV","wall-flat-tv","ergonomic-washbasin","wash_basin_corner","toiletBrush","turkish-toilet","bathroom_vanity","highCabinet","largeFridge","largeStove","refrigerator","sinkCabinet2","dishwasher","stove1","barreAppuiCoude","barreAppui","folding-grab-bar","toilet_hang_round","mixer-tap-for-shower","shower","stone-washbasin","bathroom-tissue","towel2","com_bath3","towel3","small-urinal","bathroom3","awning_bracket","basketball_net_and_board","entry-bell-ring","entry-bell-speech-unit","window_shutter","doubleOven","kitchenGlassDoorCabinet","upperCabinet","upperCabinet2","hood","kitchenHood","oven","rangeHood","kitchenSmallUpperCabinet","smallUpperCabinet","towel","tray","glassDoorCabinet","stainlessSteelShelf","clock","clock2","curtain","curtains","dart_game","emergencySign","ButterflyFrame","frame","frame3VerticalSummerPhotos","frame3HorizontalNorwayPhotos","HaiVanPassFrame","intercom","intercom_with_screen","mirror","ovalMirror","wheelchairSymbol","radiator3","rectangularMirror","smoke-detector","square-double-switch","frame_square","square-switch","square-plug-TypeB","square-plug-TypeE","surveillanceCamera","double-switch-whites","wall_handrail","switch-whites","plug-TypeB-whites","plug-TypeE-whites","window-blinds","radiator1","stairs_rail","hand-washbasin","washbasin_jay_hardy","external-unity-air-conditioning","internal-unity-air-conditioning","kitchenUpperCabinet","drawersCabinet","lavastoviglie","AtorHaut","putekasse","doccia","screen-door","elevator","sixDoorFrenchStyle","accordionFoldDoors","glassDoorsOpened","window_2x3_arched","window_2x3_regular","window_2x3","window_2x4_arched","window_4x3_arched","window_4x3","frontDoor","door_glass","elevator-door","sliderPocketDoor","doorFrame","double_door","double_plain_door_with_little_part","frontDoor2","glassDoor2","revdoor","japanesedoor","garage-door","emergencyGlassDoubleDoor","garageDoor2","frenchDoors","patioGlassDoorUnit","garageDoor","slidingDoors","frontDoorDark","door1","patioDoorOpened","exterior-door-01","exterior-door-02","exterior-door-03","fancyFrontDoor","patioDoor","patioSideDoor","doorGlassPanels","DianaWindow","frenchWindow85x200","window85x123","window85x163","turn-window","window_2x3_frame_sill","doubleOutwardOpeningWindow","doubleWindow126x123","doubleWindow126x163","doubleFrenchWindow126x200","sliderWindow126x200","window-08","fixedWindow85x123","glassblock","serviceHatch","fivePanesWindowWithWallPart","rectangularFivePanesWindow","pictureWindow","simpleShutter","traditionalShutter","twoPartsShutter","fancyWindow","newWindowDk","windowFrostedGlass","window_double_3x3","door_window_thick_double_2x4","door_window_thick_double","door_window_thick","window_double_frame_sill","window_urban_neoclassic","window2","window-01","window-08-02","window-shutter","window_shop","window_stain_glass","gaz_water_heater"],be=["door","double_door","double_plain_door_with_little_part","exterior-door-05","exterior-door-07","frontDoor2","glassDoor2","glass_door","double_door_with_little_part","frontDoorDark","door1","patioDoor","door_glass","exterior-door-01","exterior-door-02","exterior-door-03","double_door_2","elevator","frenchDoors","doubleFrenchWindow2","doubleWindow2","frenchWindow2","smallWindow2","window_2x1_medium_with_large_pane","window_2x4","window_2x6","window_3x1","window_4x1","window_4x5","external-unity-air-conditioning","internal-unity-air-conditioning"],we={sixDoorFrenchStyle:!0,accordionFoldDoors:!0,glassDoorsOpened:!0,window_urban_neoclassic:!0},Ce={revdoor:!0},xe={lightSource:!0,generic_surface_area:!0},_e={lightSource:{model3DCreationMethod:"createLightSourceMesh"},generic_surface_area:{model3DCreationMethod:"createSurfaceMesh"}},ye=(e,t,i,o,n,s)=>({dimensions:{width3D:e,depth3D:t,height3D:i},author:o,itemType:s,title:n}),Se={doubleFrenchWindow2:ye(150,25,221,"Seber Rider","Double French window",4),doubleWindow2:ye(150,25,126,"Seber Rider","Double window",4),fixed_window_2x2:ye(60,16,60,"Ola-Kristian Hoff","Fixed small window",4),smallWindow2:ye(100,25,76,"Seber Rider","Small window",4),frenchWindow2:ye(100,25,221,"Seber Rider","French window",4),"turn-window":ye(59,13.5,102,"Scopia","Turn window",4),"window-08":ye(62.6,16.6,128,"Kator Legaz","Double hung window",4),window_2x1_medium_with_large_pane:ye(110,31.3,130,"Scopia","Double window with large pane",4),window_2x1_with_sliders:ye(188,25,218,"Scopia","Sliding window",4),window_2x3_frame_sill:ye(56,35,110,"Ola-Kristian Hoff","Window 2x3",4),window_2x4:ye(108.5,31.3,200,"Scopia","Double window 4 panes",4),window_2x6:ye(108.5,31.3,218,"Scopia","Double French window small panes",4),window_3x1:ye(188,32.2,218,"Scopia","Triple French window",4),window_4x1:ye(250.3,32.2,218,"Scopia","Quadruple French window",4),window_4x5:ye(160.3,32.2,218,"Scopia","Quadruple French window small panes",4),window_deep:ye(105,60,150,"Ola-Kristian Hoff","Deep window",4),window_double_2x3_frame_sill:ye(123,25,110,"Ola-Kristian Hoff","Double small window 2x3 panes with sill",4),window_shop:ye(180,15,120,"Ola-Kristian Hoff","Shop window",4),window_stain_glass:ye(80,16,120,"Ola-Kristian Hoff","Window stain glass",4),glassblock:ye(21,8.8,168,"RonnieTandriady","Glass blocks",4),doubleFrenchWindow126x200:ye(132,34,210,"eTeks","Double French window",4),doubleHungWindow80x122:ye(81,27,128,"eTeks","Double-hung window",4),doubleOutwardOpeningWindow:ye(115.2,26,134,"eTeks","Outward opening window",4),doubleWindow126x123:ye(132,34,134,"eTeks","Double small window",4),doubleWindow126x163:ye(132,34,174,"eTeks","Double window",4),fixedWindow85x123:ye(91,27,134,"eTeks","Fixed window",4),frenchWindow85x200:ye(91,34,210,"eTeks","French window",4),sliderWindow126x200:ye(132,31.5,210,"eTeks","Slider window",4),window85x123:ye(91,34,134,"eTeks","Small window",4),window85x163:ye(91,34,174,"eTeks","Window",4),roundWindow:ye(91,25,91,"eTeks","Round window",4),fixedTriangleWindow85x85:ye(91,27,91,"eTeks","Fixed triangle window",4),halfRoundWindow:ye(91,25,46,"eTeks","Half round window",4),serviceHatch:ye(50,16,50,"eTeks","Service hatch",4),fivePanesWindowWithWallPart:ye(213.2,11.6,174,"Pencilart","Five panes window",4),rectangularFivePanesWindow:ye(213.2,12,133.19992,"Pencilart","Five panes window",4),pictureWindow:ye(213.2,54.3,135.8,"Pencilart","Picture window",4),simpleShutter:ye(61,5,124,"Pencilart","Simple shutter",4),traditionalShutter:ye(61,5,124,"Pencilart","Traditional shutter",4),twoPartsShutter:ye(61,5,124,"Pencilart","Two parts shutter",4),fancyWindow:ye(60.9,5.6,128,"Pencilart","Fancy window",4),newWindowDk:ye(60.9,3.4,94.9,"Pencilart","Window",4),windowFrostedGlass:ye(60.9,2.8,94.9,"Pencilart","Window frosted glass",4),window_shutter:ye(43.9,2.9,129,"Ola-Kristian Hoff","Window shutter",4),window_double_3x3:ye(135,16,90,"Ola-Kristian Hoff","Double small window 3x3 panes",4),door_window_thick_double_2x4:ye(160,23,210,"Ola-Kristian Hoff","Double door window small panes",4),door_window_thick_double:ye(160,23,210,"Ola-Kristian Hoff","Double door window",4),door_window_thick:ye(80,23,210,"Ola-Kristian Hoff","Door window",4),window_double_frame_sill:ye(123,25,110,"Ola-Kristian Hoff","Double small window with sill",4),window_urban_neoclassic:ye(200,60,220,"Ola-Kristian Hoff","Neoclassic window",4),window2:ye(100,25,126,"Seber Rider","Window",4),"window-01":ye(55.3,16.6,128,"Kator Legaz","Double-hung window",4),"window-08-02":ye(62.6,16.6,128,"Kator Legaz","Double-hung window",4),"window-shutter":ye(30.6,1.8,125,"Kator Legaz","Window shutter",4),window_2x3_arched:ye(108.5,31.3,226,"Scopia","Double arched window",4),window_2x3_regular:ye(108.5,31.3,200,"Scopia","Double window 3 panes",4),window_2x3:ye(108.5,31.3,218,"Scopia","Double French window 3 panes",4),window_2x4_arched:ye(108.5,31.3,229,"Scopia","Double arched window",4),window_4x3_arched:ye(160.3,32.2,226,"Scopia","Quadruple arched window",4),window_4x3:ye(160.3,32.2,218,"Scopia","Quadruple French window 3 panes",4)},ve={craftsmanDoorClosed:ye(100.9,18.7,209.6,"Mchnz","Craftsman door",3),door:ye(91.5,14.5,208.5,"eTeks","Door",3),double_door:ye(176,17.5,210,"Scopia","Double door with panes",3),double_plain_door_with_little_part:ye(132.7,17.5,210,"Scopia","Double door with small part",3),"elevator-door":ye(185.6,21.5,244.9,"Scopia","Elevator door",3),emergencyGlassDoubleDoor:ye(219.1,28.4,210,"Siath","Emergency glass double door",3),"exterior-door-05":ye(99,18.5,205,"Kator Legaz","Exterior door",3),"exterior-door-07":ye(102,18,205,"Kator Legaz","Exterior door",3),frontDoor2:ye(112,20,216,"Seber Rider","Front door",3),"garage-door":ye(391,26,221.3,"Scopia","Garage door",3),"garage-door2":ye(441.2,32,216.7,"Scopia","Garage door",3),glassDoor2:ye(84.5,14.1,204,"Scopia","Glass door",3),glass_door:ye(104.4,17.5,210,"Scopia","Glass door",3),glass_door_framless:ye(91,20,210.5,"Ola-Kristian Hoff","Glass door",3),puerta:ye(87,13.7,210,"Scopia","Door",3),revdoor:ye(384,300,230,"Ola-Kristian Hoff","Revolving door",3),"screen-door":ye(87.6,9.7,200,"Kator Legaz","Screen door",3),sliderPocketDoor:ye(94.8,12.2,212.5,"Ola-Kristian Hoff","Slider pocket door",3),double_door_2:ye(176,17.5,210,"Scopia","Double door",3),double_door_with_little_part:ye(132.7,17.5,210,"Scopia","Double door with panes",3),japanesedoor:ye(298,9.7,210,"RonnieTandriady","Japanese door",3),elevator:ye(185.6,189.6,245.4,"Scopia","Elevator",3),doorFrame:ye(91,16,210,"eTeks","Door frame",3),frontDoor:ye(101.5,23,208.5,"eTeks","Front door",3),openDoor:ye(91.5,68,208.5,"eTeks","Open door",3),slidingDoors:ye(154,8,205,"eTeks","Sliding doors",3),roundDoorFrame:ye(80,15,200,"eTeks","Round door frame",3),roundedDoor:ye(91.5,14.5,208.5,"eTeks","Rounded door",3),frontDoorDark:ye(112.8,40,205,"Pencilart","Front door",3),garageDoor:ye(420,25,210,"Geantick","Garage door",3),patioGlassDoorUnit:ye(161,18.4,200,"Pencilart","Patio glass door unit",3),sixDoorFrenchStyle:ye(595,101.3,210,"Siath","Six door French style",3),frenchDoors:ye(239.2,28.4,210,"Pencilart","Sliding French doors",3),DianaWindow:ye(389.6,25.6,210,"Pencilart","Triple window",3),accordionFoldDoors:ye(284,126.5,220,"Pencilart","Accordion fold doors",3),garageDoor2:ye(210,15,220,"Pencilart","Garage door",3),doorGlassPanels:ye(77.1,11.2,205.7,"Peter Smolik","Glass door",3),door1:ye(91.44,18.23,213.7,"Peter Smolik","Door",3),glassDoorsOpened:ye(336,86.66,203,"Pencilart","Opened quadruple glass doors",3),patioDoorOpened:ye(168.3,82.7,203,"Pencilart","Opened patio door",3),patioDoor:ye(99.4,18.4,200,"Pencilart","Patio door",3),patioSideDoor:ye(60.7,6.2,200,"Pencilart","Patio side door",3),fancyFrontDoor:ye(99.8,24,200,"Pencilart","Fancy front door",3),door_glass:ye(96,17,209.7,"Dorin Vatavu","Glass door",3),"exterior-door-01":ye(104.9,18,208,"Kator Legaz","Exterior door",3),"exterior-door-02":ye(98.6,17.8,205,"Kator Legaz","Exterior door",3),"exterior-door-03":ye(104.2,16.3,205,"Kator Legaz","Exterior door",3)},De={floorUplight:ye(33,33,181,"eTeks","Floor uplight",2),fluorescent:ye(105,24.3,10.6,"Kator Legaz","Fluorescent light",1),hangingLight:ye(43.9,43.9,86,"Jay-Artist","Hanging light",1),lightSource:ye(0,0,0,"eTeks","Simple light",1),lightSource2:ye(40,40,40,"eTeks","Simple light",1),lustreBoule:ye(30,30,67.6,"Sheep","Pendant light",1),painting_light:ye(40,14.6,2.6,"Ronnie Tantriady","Painting light",7),"porch-light":ye(17.7,17,32,"Kator Legaz","Porch light",7),spotlight:ye(6.8,9.9,13.1,"eTeks","Spotlight",1),street_light_modern:ye(34,245,770,"Ola-Kristian Hoff","Street light",2),"track-lights":ye(100,17,13.8,"Kator Legaz","Track lights",7),"wall-spotlight":ye(6,23.5,10.3,"Kator Legaz","Wall spotlight",7),wall_lamp:ye(22.3,11,9,"alaX","Wall lamp",7),"ceiling-lamp":ye(30,30,5.4,"Scopia","Ceiling lamp",1),farola1:ye(43.9,43.5,250,"Scopia","Street lamp",2),lampeHalogene:ye(31.3,68.9,180,"GdB","Floor lamp",2),lamp2:ye(53.4,51.3,63.4,"Megeon","Lamp",1),pendantLamp:ye(60,60,80,"eTeks","Pendant lamp",1),minispot:ye(25,25,1,"Emmanuel Puybaret","Mini spot",1),"fluorescent-strip":ye(55,8.9,8.3,"Kator Legaz","Fluorescent strip",7),wallUplight:ye(24,12,26,"eTeks","Wall uplight",7),led_striplight:ye(100,4,3,"eTeks","LED striplight",1),wallLight:ye(22.8,24.6,53.8,"Ndakasha","Wall light",2),bougeoir:ye(12.7,11.7,25.7,"Sleipnir1","Candlestick",2),neon:ye(42,6.4,5,"Snduc","Fluorescent strip",2),candleOrnament:ye(8,12.5,31.9,"Peter Smolik","Candle ornament",2),deskLamp1:ye(40.6,40.601,61.23814,"Peter Smolik","Desk lamp",2),deskLight:ye(23.2,73.766,56.23,"Peter Smolik","Desk lamp",2),ceiling_lamp_globo_feria:ye(46,46,11,"MineaCristian","Ceiling lamp",2),lamp_paraffin_feuerhand:ye(12.3,11,33.1,"Ola-Kristian Hoff","Oil lamp",2),lamp_wall_outside:ye(45,50,65,"Ola-Kristian Hoff","Wall lamp",2),"classic-lamppost":ye(30,30,250,"Kator Legaz","Classic lamppost",2),flashlight:ye(4.5,15,4.5,"Kator Legaz","Flashlight",2),"hanging-restaurant-light":ye(39.3,39.3,66.2,"Kator Legaz","Hanging light",2),"park-light":ye(61.4,56.4,300,"Kator Legaz","Park light",2),"pedestal-vase-lamp":ye(28.2,28.2,80,"Kator Legaz","Pedestal vase lamp",2),"wall-lamp-artwork":ye(30,37.2,27.3,"Kator Legaz","Wall lamp artwork",2),desk_lamp1:ye(13.7,34.2,45,"Scopia","Desk lamp",2),desk_lamp2:ye(22.5,41.7,40,"Scopia","Desk lamp",2),little_lamp1:ye(33.1,33.1,41.9,"Scopia","Little lamp",2),little_lamp3:ye(41,41,72.8,"Scopia","Little lamp",2),saloon_lamp:ye(13.2,83.6,60,"Scopia","Pendant lamp",2),table_lamp:ye(20,20,50.1,"Scopia","Lamp",2),living_room_lamp1:ye(27.2,27.2,66.9,"Scopia","Lamp",2),living_lamp:ye(39.6,58.3,142.9,"Scopia","Lamp",2),"chandelier-lamp":ye(130.6,130.6,174.4,"Scopia","Chandelier lamp",2),candelabre:ye(43,145.2,738.2,"Scopia","Street light",2),candle:ye(10.6,10.4,43.6,"Scopia","Candle",2)},Te={barreAppuiCoude:ye(76.9,11,36.4,"Emmanuel Puybaret","Angled grab bar",7),barreAppui:ye(57.6,11,7.5,"Emmanuel Puybaret","Grab bar",7),basin:ye(76.8,65.8,27,"Scopia","Basin",1),bathmat:ye(73.3,47,1.4,"Kator Legaz","Bathmat",5),bathtub_jet_system:ye(160,70,58,"Ola-Kristian Hoff","Bathtub jet system",2),bidet:ye(39.9,53.6,51.3,"Arusano","Bidet",2),com_bath2_jabon_pijo:ye(5.7,5.7,13.7,"Scopia","Bottle",1),"clothes-basket":ye(53.9,53.8,67.4,"Scopia","Clothes basket",1),clothes_line:ye(500,15,140,"Ola-Kristian Hoff","Clothes line",1),corner_bathtub:ye(160,160,80.3,"Scopia","Corner bathtub",2),wash_basin_corner:ye(50,50,81,"Ola-Kristian Hoff","Corner washbasin",6),"ergonomic-washbasin":ye(60,46,53.8,"Scopia","Ergonomic washbasin",7),"folding-grab-bar":ye(7,62.4,17.7,"Scopia","Folding grab bar",7),secheCheveux:ye(15.8,15.3,7.2,"Toomy","Hair dryer",1),"hand-washbasin":ye(49.1,30,27,"Scopia","Hand washbasin",7),toilet_hang_round:ye(38,56.5,82,"Ola-Kristian Hoff","Hanged toilet",7),islandBath:ye(169.6,93.7,108.1,"Scopia","Island bath",5),"japanese-toilet":ye(52.7,83.6,98,"Scopia","Japanese toilet unit",2),"mixer-tap-for-shower":ye(29,34.7,99.1,"Scopia","Mixer tap for shower",7),potty:ye(30.3,30.3,18.4,"Icarus","Potty",1),pesePersonne:ye(28.2,32.1,2.8,"Emmanuel Puybaret","Scale",2),"shower-cabin-with-seat":ye(100.5,170.4,213.5,"Scopia","Shower cabin",2),shower_cabin:ye(90,90,199,"Ola-Kristian Hoff","Shower cabin",2),doccia:ye(70,70,200,"LucaPresidente","Shower cabin",2),showerCurtain:ye(90.3,29.4,190,"Kator Legaz","Shower curtain",1),shower:ye(20.8,53.8,114.3,"Wfg5001","Shower head and faucet",7),savon:ye(7,5.8,16.7,"Toomy","Soap",1),"stone-washbasin":ye(53.7,45.5,36.8,"Scopia","Stone washbasin",7),toiletBrush:ye(9.6,12.9,38.6,"Nhumrod","Toilet brush",6),"bathroom-tissue":ye(21.3,17.3,15,"Kator Legaz","Toilet paper dispenser",7),potBrossesADent:ye(7.2,8.7,18.2,"Toomy","Tooth brushes and paste",1),towel2:ye(21.8,13.7,66.9,"Wfg5001","Towel",7),com_bath3:ye(60,16.8,41.8,"Scopia","Towel rack",7),towel3:ye(59.6,8.1,47.8,"Wfg5001","Towel rack",7),"small-urinal":ye(34,27.1,61.8,"Scopia","Urinal",7),bathroom_vanity:ye(107.1,38.5,207.8,"Scopia","Vanity",6),modernVanity:ye(90.4,70.8,93.3,"Dobbs","Vanity",2),washbasin_jay_hardy:ye(59.7,43.1,86.7,"Jay-Artist","Washbasin",6),bathroom3:ye(71.9,40.3,48.4,"Scopia","Washbasin",7),bathroom_sink:ye(122,55,78,"Ola-Kristian Hoff","Washbasin with cabinet",2),mobilettoLavaboWenge:ye(81,42.5,101.3,"LucaPresidente","Washbasin with cabinet",2),dryer_machine:ye(59,61.8,84.2,"Scopia","Dryer machine",2),clothes_washing_machine:ye(59,60.1,84.2,"Scopia","Clothes washing machine",2),clothesWasher:ye(59,60.1,84.2,"Scopia","Clothes washing machine",2),fer:ye(13.7,13.2,30.6,"Toomy","Iron",1),plancheARepasser:ye(54.5,137.1,79.5,"Toomy","Ironing board",2),washbasin:ye(56,47,97,"eTeks","Washbasin",2),washbasinWithCabinet:ye(62,57,97,"eTeks","Washbasin with cabinet",7),fittedBath:ye(178,77,72,"eTeks","Fitted bath",2),bacADouchePlat:ye(90,90,6.5,"Snduc","Shower cubicle",2),toiletUnit:ye(40,80,62,"eTeks","Toilet unit",2),bath:ye(163,73,57,"eTeks","Bath",2),comb:ye(12.5,3.6,.4,"JonFreer","Comb",2),cosmeticsPot:ye(7.7,7.8,7.1,"Bocko","Cosmetics pot",2),showerDoor:ye(90.5,22.5,229.9,"Wfg5001","Shower door",2),toiletPaperDispenser:ye(15.6,10.4,18.45,"Nhumrod","Toilet paper dispenser",2),toiletsUnit:ye(35.3,69.2,77.2,"Nhumrod","Toilet unit",2),flacon:ye(3.7,2.1,13,"Tappi","Flacon",2),showerStall:ye(93.05768,111.88634,200.01599,"Asterlil","Shower stall",2),urinal:ye(36.1,30,88.1,"Ndakasha","Urinal",2),bath_jay_hardy:ye(180.1,70.1,65.1,"Jay-Artist","Bath",2),bathroomRadiator:ye(48.4,18.8,110.75,"Nikitron","Radiator",2),lipStick:ye(2.04,2.04,9.54,"Bjo.bernis","Lip stick",2),toilets_unit_jay_hardy:ye(41.25,54.4,76.6,"Jay-Artist","Toilet unit",2),radiatorAndTowels:ye(60,10,154,"Gianmariaveronese","Radiator",2),modernToilet:ye(44.8,85,76.5,"Starapple","Toilet unit",2),meubleSalleDeBain:ye(60,59.2,91.9,"Snduc","Washbasin with cabinet",2),bidon:ye(6.5,6.5,16.7,"Snduc","Bottle",2),robinet:ye(5.1,14.4,12,"Snduc","Faucet",2),parfumAmbiance:ye(8.7,4.6,8.3,"Snduc","Perfume",2),rasoir:ye(12.5,5,2,"Snduc","Razor",2),shampoo:ye(7.4,3.4,16.7,"Snduc","Shampoo",2),gelDouche:ye(8,4.2,15.3,"Snduc","Soap bottle",2),boiteDeMouchoirs:ye(22.5,11.5,13.6,"Snduc","Tissue box",2),derouleurWC:ye(16,13.5,19.5,"Snduc","Toilet paper dispenser",2),tube:ye(2,2,6.8,"Snduc","Tube",2),pareDouche:ye(90,8,180,"Snduc","Shower door",2),bathroomFurniture:ye(119,50.9,131.1,"Maui","Cabinet",2),towelMedicineCabinet:ye(62.2,61.4,144.8,"Pencilart","Towel and medicine cabinet",2),bath_L:ye(170,85,186,"Ola-Kristian Hoff","Bath L shape",2),bathroom_cupboard_mirror:ye(60,15,78,"Ola-Kristian Hoff","Cupboard mirror",2),towel_rack:ye(45,20.7,29.8,"Ola-Kristian Hoff","Towel rack",2),tendaDoccia:ye(73.6,93.4,197.9,"Alex","Corner shower curtain",2),barreAppuiL:ye(59.2,11.5,127.6,"Emmanuel Puybaret","L shaped grab bar",2),"towel-rack":ye(50,9.5,10.9,"Kator Legaz","Towel rack",2),showerHeadAndFaucet:ye(24.5,22.55,88.8,"Kator Legaz","Shower head and faucet",2),mobilettoSpecchioBlu:ye(70,12.5,60,"LucaPresidente","Mirror",2),mobilettoSpecchioWenge:ye(80,22,72,"LucaPresidente","Mirror cabinet",2),mobilettowenge:ye(80,42,82,"LucaPresidente","Cabinet",2),water:ye(36,55.7,45.25,"LucaPresidente","Toilet unit",2),bathroom4:ye(61.5,61.5,50,"Scopia","Washbasin",2),bathroom1:ye(73.2,77.9,172.7,"Scopia","Washbasin",2),double_vanity:ye(185.2,68.1,225.4,"Scopia","Double vanity",2),com_bath:ye(5.4,5.4,12,"Scopia","Bottle",2),com_bath2_cepillo:ye(19.2,5.5,3.5,"Scopia","Brush",2),com_bath2_esponja:ye(9.5,9.3,10.1,"Scopia","Sponge",2),com_bath2_peineta:ye(6.6,6.1,.8,"Scopia","Comb",2),com_bath2_soap:ye(11,5.3,20.1,"Scopia","Soap",2),com_bath3_toalla:ye(17.9,11.6,3.39,"Scopia","Towel",2),medicoscopia_bottle:ye(4.3,4.3,8.7,"Scopia","Medicine bottle",2),medicoscopia_bottle2:ye(5.7,5.7,13.9,"Scopia","Medicine bottle",2),medicoscopia_box:ye(10.9,4.3,6.6,"Scopia","Medicine box",2),small_lavatory:ye(50,42.4,34.4,"Scopia","Small lavatory",2),"folding-wall-seat":ye(40,45,14.7,"Scopia","Folding wall seat",2),"mixer-tap-for-bath-and-shower":ye(29,34.7,106.5,"Scopia","Mixer tap for bath and shower",2),"mixer-tap-for-bath":ye(29,16.6,6.7,"Scopia","Mixer tap for bath",2),"shower-armchair":ye(43.6,43.2,85.2,"Scopia","Shower armchair",2),"shower-chair":ye(46.1,44.5,84.7,"Scopia","Shower chair",2),"turkish-toilet":ye(45,70.5,68.6,"Scopia","Turkish toilet",2)},je={bedFlowers:ye(202.2,228.2,144.2,"Flowers","Bed",2),"air-mattress":ye(69.4,181.9,15.8,"Scopia","Air mattress",2),mobileangoloCiliegio:ye(86.7,86,240,"LucaPresidente","Angle wardrobe cherry",2),bed3:ye(202.2,228.2,144.2,"SVAFnemesis","Bed",2),bed1:ye(170.5,216.5,110.8,"Scopia","Bed",2),bedWithTexture:ye(198,226.4,76.5,"Nhumrod","Bed",2),bedsideTable:ye(50,41.4,48,"SirOccor","Bedside table",2),bedsideTable2:ye(48.6,48.1,45.4,"Nhumrod","Bedside table",2),blocks:ye(60,50,34.6,"LucaPresidente","Blocks",1),mobileAngoloInterno:ye(105,105,240,"LucaPresidente","Blue corner wardrobe",2),mobileAzzurro:ye(100,57,240,"LucaPresidente","Blue wardrobe",2),bootieSeparated:ye(21,26.8,17.5,"Cgrifter","Bootie",1),bunkBed:ye(113.1,205,160,"NabHlEsCK & eTeks","Bunk bed",2),"captains-bed":ye(98.2,209.2,86.6,"Scopia","Captain's bed",2),"changing-table":ye(122.7,48.1,97.5,"Scopia","Changing table",2),chest:ye(143.5,53.6,82,"Elhzar","Chest",2),kommode:ye(95.1,41.9,93,"JabberWalky","Chest",2),juniorBed:ye(105.7,197.8,65.6,"SirOccor & eTeks","Child bed",2),"clothes-rack":ye(111.9,35.8,125.1,"Scopia","Clothes rack",2),"clothes-hanger":ye(43,1.3,21.5,"Kator Legaz","Clothes hanger",1),"clothes-horse":ye(65,95,87,"Scopia","Clothes horse",2),portemanteaux2:ye(46,46,161.8,"Baffab","Hat and coat stand",1),corner:ye(52.5,52.5,240,"LucaPresidente","Corner bookcase",2),mensolaCurvaAcero:ye(40,40,3,"LucaPresidente","Corner shelf maple",7),crib:ye(72.8,124.3,110.9,"Scopia","Crib",2),pensileAcero:ye(40,25,40,"LucaPresidente","Cube shelf maple",1),doll:ye(14.4,12.1,16,"Scopia","Doll",1),"doll-house":ye(69,32.4,86.8,"Scopia","Doll house",1),comoCiliegio:ye(160,60,70,"LucaPresidente","Dresser cherry",2),folded_clothes:ye(26.3,40.4,12.2,"Scopia","Folded clothes",1),futon:ye(142,211.3,18.2,"Scopia","Futon",5),"hanging-clothes1":ye(32.5,59,142.5,"Kator Legaz","Hanging clothes",1),backpack:ye(28.9,33.7,40,"Jo.3D","Backpack",1),casque:ye(26,37.9,30.1,"Scopia","Helmet",1),"adjustable-hospital-bed":ye(100,209.6,89.7,"Scopia","Hospital bed",2),"hospital-table-on-wheels":ye(76.6,45.5,74.5,"Scopia","Hospital table on wheels",2),hotelSafe:ye(44,39.6,20,"Scopia","Hotel safe",1),letters:ye(40.1,12.7,18,"LucaPresidente","Letter cubes",1),litMezzanine2:ye(296.4,184.9,210,"Clyriss","Mezzanine bed",2),"mezzanine-bed":ye(121.8,259,192.6,"Scopia","Mezzanine bed",2),mocassinSeparated:ye(22.2,28.1,10.5,"Mocassin","Scopia",1),"convertible-sofa-BZ-opened":ye(158.3,190.1,47.8,"Scopia","Opened convertible sofa BZ",2),housePuzzle:ye(15.5,15.6,1.3,"Snu","Puzzle",1),rubix2:ye(5.6,5.6,5.6,"Farcgs","Rubik's cube",1),sleepingBag:ye(88.2,200,10.1,"Scopia","Sleeping bag",2),slippersSeparated:ye(23.7,28.1,6.1,"Mik1190","Slippers",1),smiley:ye(13.4,13.4,20.9,"LucaPresidente","Smiley tower",1),sneakersSeparated:ye(23.7,30.1,11.8,"Scopia","Sneakers",1),teddyBear:ye(33.1,21.8,32.2,"Mantislate","Teddy bear",1),train:ye(119,97,10.2,"LucaPresidente","Train",2),armoireLotus:ye(179.5,67.5,221.4,"Ga\xebl Bettinelli","Wardrobe",2),mobileCiliegio:ye(100,50,240,"LucaPresidente","Wardrobe cherry",2),wardrobe2:ye(173.5,60,208,"Richu","Wardrobe",2),womanShoesSeparated:ye(18.9,24.9,16.5,"Scopia","Woman shoes",1),bed:ye(144.6,193.1,52.8,"eTeks","Bed",2),bed140x190:ye(158,208,70,"eTeks","Bed 140x190",2),bed90x190:ye(108,208,70,"eTeks","Bed 90x190",2),bunkBed90x190:ye(115,208,180,"eTeks","Bunk bed",2),wardrobe:ye(100,54,165,"eTeks","Wardrobe",2),cornerBunkBed90x190:ye(208,208,155,"eTeks","Corner bunk bed",2),petiteCommode:ye(82,46.4,83,"Snduc","Small chest",2),armoire:ye(109,52.8,200.5,"Icybones","Wardrobe",1),litMezzanine:ye(200.5,216.8,200.4,"Infernal-quack","Loft bed",2),loftBed140x190:ye(165,208,180,"eTeks","Loft bed 140x190",2),bed2:ye(144.7,213.7,107.7,"Blend Swap","Bed",2),caballito:ye(67.65,29.1,49.8,"Sangio","Rocking horse",2),cartoon_biplane:ye(13.8,12.4,5.7,"Robo3dguy","Biplane",2),wardrobeWithSlidingDoors:ye(200,66,236.4,"Ashaihullin","Wardrobe",2),cupboard:ye(100.5,39,150,"Mahmood","Cupboard",2),babyRockingBed:ye(59.7,82.5,76.2,"SVAFnemesis","Baby bed",2),cardGame:ye(21.1,11.3,.38,"Bagiryu","Card game",2),briefcase:ye(40,10.4,33.3,"Ulanbek","Briefcase",2),handbag:ye(26.1,12.4,19.4,"Ulanbek","Handbag",2),woodToy:ye(7.7,6,11.7,"Miroljub","Wood toy",2),"carrito-de-madera":ye(12.6,26.9,12.7,"Oldtimer","Car model",2),clock:ye(7,4.3,7,"Krabz","Clock",2),suit:ye(44,11.8,60,"Rosenth","Suit",2),chessboard:ye(30,30,8,"Swapnilrocks98","Chessboard",2),lettoCloud:ye(188.9,216.5,78.8,"Fabbyone & eTeks","Bed",2),toyTrain:ye(30.1,12.4,9.6,"RegusTtef","Toy train",2),xylophone:ye(48.3,28.9,6,"SonnySee","Xylophone",2),petitReveil:ye(9,4.6,5,"Snduc","Alarm clock",2),p40:ye(18,15.2,5.1,"Geantick","P40",2),daybed:ye(264.8,210,105.7,"Pencilart","Trundle bed",2),captainsBed:ye(131.8,208,119.3,"Pencilart","Captain's bed",2),trundleBed:ye(215.7,95,117.1,"Pencilart","Daybed",2),litParents:ye(188.8,225.6,88.8,"Icybones","Bed",2),clicClacOuvert:ye(182,132,39.9,"Ga\ufffdl Bettinelli","Opened sofa bed",2),lit:ye(167.2,220.1,78.5,"Ga\ufffdl Bettinelli","Bed",2),meubleChevet:ye(39.86778,29,54,"Ga\ufffdl Bettinelli","Bedside table",2),suits_racked:ye(80,60,94,"Ola-Kristian Hoff","Hanging suits",2),childBed:ye(105,210,110,"Jabberwalky","Child bed",2),"hanging-clothes2":ye(62.1,54.4,116.2,"Kator Legaz","Hanging clothes",2),comodinoSinistroCiliegio:ye(150,45,65,"LucaPresidente","Bedside table cherry",2),lettoCiliegio:ye(184,197,65,"LucaPresidente","Bed cherry",2),mensolaCiliegio:ye(102,20,34,"LucaPresidente","Shelf cherry",2),comodinoAzzurro:ye(50,42.5,48,"LucaPresidente","Blue bedside table",2),lettoAzzurro:ye(80,180,56,"LucaPresidente","Blue child bed",2),lettoSoppalcoAzzurro:ye(82.9,180,146,"LucaPresidente","Blue loft bed",2),mensolaAcero:ye(60,20,5,"LucaPresidente","Shelf maple",2),scaletta:ye(44,46.1,128.5,"LucaPresidente","Ladder",2),iron_bed:ye(131.7,215,116,"Scopia","Iron bed",2),wardrobe1:ye(217.4,53,200,"Scopia","Wardrobe",2),children_bed:ye(91.8,205.3,87.4,"Scopia","Child bed",2),kids_shelves:ye(101,42.4,190.7,"Scopia","Shelves",2),robe:ye(75.9,82.7,2.7,"Scopia","Dress",2),casquette:ye(23.7,32.7,15.2,"Scopia","Cap",2),chapeau:ye(36.1,42.4,15,"Scopia","Hat",2),"short-shadows":ye(37.8,51.9,1.9,"Scopia","Short",2),"pantalon-shadows":ye(40.8,98.6,2,"Scopia","Trousers",2),blouson:ye(51.3,73.15,3.2,"Scopia","Jacket",2),jupe:ye(40.7,40.6,3.6,"Scopia","Skirt",2),"jupe-doeskin":ye(40.2,32.3,1.75,"Scopia","Skirt",2),chaussette:ye(21.9,30.6,.7,"Scopia","Socket",2),"montre-with-pose":ye(4.3,8.7,4.9,"Scopia","Watch",2),montre:ye(4.3,24.3,.6,"Scopia","Watch",2),bague:ye(2.2,2.4,.38,"Scopia","Ring",2),"gant-textured":ye(14.8,26.6,6,"Scopia","Glove",2),"dressing-table":ye(85.7,46.5,135.9,"Scopia","Dressing table",2),day_bed_frame:ye(208,97,70,"Scopia","Day bed",2),tasDeVetements:ye(122.2,103.8,37.7,"Scopia","Clothes heap",2),oreiller:ye(40.5,40.5,13.9,"Scopia","Pillow",2),flipFlops:ye(19.9,19.3,4.6,"Scopia","Flip flops",2)},Ie={awning_bracket:ye(310,169.4,61.6,"Ola-Kristian Hoff","Awning",7),column_balustrade:ye(30,24.4,92.5,"Ola-Kristian Hoff","Balustrade column",1),column_balustrade_corner:ye(54.4,54.4,92.5,"Ola-Kristian Hoff","Balustrade corner",1),barbecue:ye(39.2,48.4,50.9,"Sophie","Barbecue",2),barnum:ye(300.3,300.5,340.1,"Scopia","Barnum",2),basketball_net_and_board:ye(109,60.9,105.6,"Scopia","Basketball net",7),birch:ye(394,375,750,"Ola-Kristian Hoff","Birch Tree",2),bush:ye(151.6,143.5,131.2,"Scopia","Bush Tree",2),"cafe-chair":ye(49.5,51.7,85,"Kator Legaz","Cafe chair",2),"cafe-table":ye(74.2,74.2,70,"Kator Legaz","Cafe table",2),campingLamp:ye(15.4,15.4,36.7,"Bloknayrb","Camping lamp",1),campingTent:ye(248.1,236.2,141.4,"Scopia","Camping tent",2),child_swing:ye(162.8,160.7,176.3,"Scopia","Child swing",2),parque:ye(406.9,95.9,200,"Scopia","Children game",2),croisement2et2:ye(1045,1045,18,"Scopia","Crossroad 2x2 lanes",5),routeCourbe2VoiesAvecTrottoirs90Deg:ye(1045,1045,18,"Scopia","Curved road lanes 90\xb0",5),deckChair:ye(71.4,125.5,82.2,"BigMouse","Deck chair",2),"diving-board":ye(42,183,28,"Scopia","Diving board",1),"dog-house":ye(71.6,90,71.9,"Scopia","Dog house",2),privacyFence2:ye(100,15,100.8,"Pencilart","Fence",2),"iron-railing-separated-hooks-2":ye(135,11,70,"Scopia","Iron railing",1),railing:ye(94.4,5,90,"eTeks","Railing",1),railing_glass:ye(155,5,130,"Ola-Kristian Hoff","Railing glass",1),gardeCorps:ye(140,6,107.8,"Julie Fabre","Railing",2),fence:ye(179.6,5.8,104.9,"Dobbs","Fence",1),fence_grid:ye(200,5,105,"Ola-Kristian Hoff","Fence grid",1),fence_picket:ye(85,6,125,"Ola-Kristian Hoff","Fence picket",1),"football-goal":ye(152.4,89,120,"Scopia","Football goal",2),"big-football-goal":ye(732,180.9,244,"Scopia","Big football goal",2),waterFountain:ye(51.4,51.4,46.5,"Sparkywalk","Fountain",2),fountain:ye(184.9,184.9,150,"NabHlEsCK & eTeks","Fountain",2),"garden-hut":ye(171,182,198,"Scopia","Garden hut",2),gate_grind:ye(191,11.5,86,"Ola-Kristian Hoff","Gate",2),greenhouse:ye(310,310,290,"Ola-Kristian Hoff","Greenhouse",2),grillNgauge:ye(180,69.5,135,"Pencilart","Grill",2),hammock:ye(350.5,164.3,158.5,"Scopia","Hammock",2),hangingUmbrella:ye(240,297,272.1,"Seber Rider","Hanging umbrella",2),hedgeTextured:ye(154.7,59.4,100,"Scopia","Hedge",1),jacuzzi:ye(228,228,94.8,"Scopia","Jacuzzi",2),"lavender-bush":ye(81.8,82.1,64.7,"Scopia","Lavender bush",2),boiteALettre:ye(31,30,30,"Venceslas","Letters box",1),lombardyPoplar:ye(203,192,750,"Wolfram Diestel","Lombardy poplar",2),motorbike:ye(91.4,33,74.6,"Ulanbek","Motorbike",2),"painted-bench":ye(142.6,51.8,80,"Kator Legaz","Painted bench",2),palm:ye(530,547,950,"Wolfram Diestel","Palm tree",2),pansy:ye(30.8,30.3,21.5,"Scopia","Pansy",2),"passage-pieton":ye(400,750,.3,"Scopia","Pedestrian crossing",5),pedestrianRailing1:ye(208.1,4.8,103.9,"Colkaih","Pedestrian railing",2),pedestrianRailing2:ye(200,5,108.9,"Colkaih","Pedestrian railing",2),pergola:ye(240,255.6,263,"Sophie","Pergola",2),picnic_table:ye(180.2,145.3,75,"Hawkdawg","Picnic table",2),pine:ye(340,320,600,"Ola-Kristian Hoff","Pine Tree",2),plantie:ye(68.9,27.7,37.3,"Rendars","Plant box",2),pool_ladder:ye(50,50,190,"Ola-Kristian Hoff","Pool ladder",1),"porch-column-03":ye(33.3,33.3,250,"Kator Legaz","Porch column",2),voiesFerreesDroit10m:ye(1e3,440,39.9,"Scopia","Railroad 10m",5),voiesFerreesCourbe20m:ye(2034.3,692.8,39.9,"Scopia","Railroad curve 20m",5),voiesFerreesAiguillage:ye(2006.6,692.8,39.9,"Scopia","Railroad switch",5),rainGutterPart1:ye(200,12,6.5,"Dingenskirchen","Rain gutter Part 1",1),rainGutterPart2:ye(10,91.6,260,"Dingenskirchen","Rain gutter Part 2",1),rattanArmchair:ye(71,72.4,78.7,"Scopia","Rattan armchair",2),rattanSofa:ye(128.5,72.4,78.7,"Scopia","Rattan sofa",2),rattanTable:ye(120,60,40,"Scopia","Rattan table",2),route2VoiesAvecTrottoirs:ye(1300,1045,18,"Scopia","Road 2 lanes",5),rock1:ye(50.5,33.7,50,"1000bones","Rock",1),rock2:ye(69,53.4,30.7,"1000bones","Rock",1),rock3:ye(68.5,42.3,43.8,"1000bones","Rock",1),"roses-bush":ye(39.6,45.3,36.1,"Scopia","Roses bush",1),"round-swimming-pool":ye(165,165,52,"Scopia","Round swimming pool",1),sandpit:ye(130.3,120.2,26,"Scopia","Sandpit",1),bonecoDeNeve:ye(94,71.1,98.8,"Zema","Snowman",1),stoneLantern:ye(34.7,34.7,49.4,"Argonius","Stone lantern",1),"swimming-pool":ye(1713.4,997.6,100.5,"Scopia","Swimming pool",2),ext_table:ye(202.2,154.7,40,"Scopia","Table",2),silla_teca:ye(58,67,98.4,"Scopia","Teck chair",2),"feu-de-signalisation-simple":ye(37.5,53.3,316.6,"Scopia","Traffic light",2),trampoline:ye(300,300,53.2,"Scopia","Trampoline",2),tree:ye(600,640,800,"Ola-Kristian Hoff","Tree",2),umbrella:ye(223.1,222.7,199.8,"BigMouse","Umbrella",2),wheelie_bin:ye(60,62.5,101.5,"Ola-Kristian Hoff","Wheelie bin",2),outdoorLamp:ye(21.3,21.3,59.1,"Mindfront","Outdoor lamp",1),window_shutter:ye(43.9,2.9,129,"Ola-Kristian Hoff","Window shutter",7),window_flat_roof_skylight_bubble:ye(100,100,45,"Ola-Kristian Hoff","Flat roof skylight bubble",1),bump:ye(100,100,10.6,"Emmanuel Puybaret","Bump",2),portillon:ye(122,6.5,110,"Roger Lonqueux","Gate",2),flowerBox:ye(55,16.75,19.4,"MattMump","Flower box",2),mofx_mailbox:ye(15.9,46.5,81.55,"Mofx","Mailbox",2),relaxChair:ye(66,190,84.7,"Semhustej","Relax chair",2),bench:ye(170.1,45.9,50.8,"Ulanbek","Bench",2),childHut:ye(328,520.7,302.3,"Ulanbek","Child hut",2),childSwing:ye(213.4,124.8,207,"Ulanbek","Child swing",2),seesaw:ye(239.7,41.7,90.7,"Ulanbek","Seesaw",2),wheelbarrow:ye(166.3,59.8,56.7,"Grs","Wheelbarrow",2),lantern:ye(37.7,32.6,80,"CerFriBar","Stone lantern",2),chair_deck:ye(67.35,208.5,55.3,"North.star","Deck chair",2),poolLounge:ye(88,200,88.5,"LarryStephenRobb","Pool lounge",2),rowboat:ye(125.8,309,58.5,"Asterlil","Rowboat",2),transat:ye(60,104.6,97.7,"GdB","Deck chair",2),table_footrest:ye(150,34,32.5,"Pencilart","Table",2),fencepost1:ye(12,12,100,"Pencilart","Fence post",2),fencepost2:ye(12,12,95,"Pencilart","Fence post",2),"borderfence-main":ye(96.4,11.8,65,"Pencilart","Border fence",2),"borderfence-small":ye(56.7,11.8,65,"Pencilart","Small border fence",2),dogHouse:ye(104,133.8,73,"Theo Blonk","Dog house",2),blackDeckTable:ye(155,156.6,72,"Pencilart","Black deck table",2),gardenUmbrella:ye(256.7,222,250,"Pencilart","Garden umbrella",2),blackDeckChair:ye(51.5,66,110,"Pencilart","Black deck chair",2),privacyFence:ye(73.3,7.6,104.5,"Pencilart","Fence",2),canapeJardin:ye(221,75,180,"Ga\ufffdl Bettinelli","Garden sofa",2),swimmingPool:ye(832,339.1,212.7,"Emmanuel Puybaret","Swimming pool",2),balancelle:ye(150,147.1,182.4,"Roger Lonqueux","Swinging chair",2),cloture:ye(117,10,118.8,"Roger Lonqueux","Fence",2),fence_grid_gate:ye(85,5,110,"Ola-Kristian Hoff","Fence grid gate",2),bordure:ye(45,3,18,"Roger Lonqueux","Edge",2),gate_iron:ye(98.1,1,234.6,"Ola-Kristian Hoff","Gate",2),portail:ye(190.5,12.7,210,"Roger Lonqueux","Gate",2),etendoirLinge:ye(416.8,90.1,204.4,"Julie Fabre","Cloth lines",2),flag_hinged_pole:ye(230,140,820,"Ola-Kristian Hoff","Flag hinged pole",2),parasol_str:ye(200,200,249.2,"Ola-Kristian Hoff","Umbrella",2),traffic_light_ped:ye(53.2,53.2,300,"Ola-Kristian Hoff","Traffic light",2),"concrete-bench":ye(142.3,60,72.9,"Kator Legaz","Concrete bench",2),"park-trashcan":ye(79,79,85.8,"Kator Legaz","Park trashcan",2),"porch-column-01":ye(33.2,33.2,250,"Kator Legaz","Porch column",2),"porch-column-02":ye(43.2,43.2,250,"Kator Legaz","Porch column",2),"residential-trashcan":ye(58.6,58.6,80,"Kator Legaz","Residential trashcan",2),"spray-bottle":ye(9.6,11.9,30,"Kator Legaz","Spray bottle",2),"concrete-sidewalk":ye(549,96.2,16.1,"Kator Legaz","Concrete sidewalk",2),"fire-hydrant":ye(41.4,33.3,76.4,"Kator Legaz","Fire hydrant",2),"hose-reel":ye(34.2,26.7,46.1,"Kator Legaz","Hose reel",2),ext_chair:ye(100,76.4,73.4,"Scopia","Chair",2),littlebank:ye(259.5,67,47.3,"Scopia","Little bank",2),wood_bank:ye(200,100.3,98.5,"Scopia","Wood bank",2),beach_chair:ye(69.6,193.5,108.1,"Scopia","Beach chair",2),letters_box:ye(31,12.2,40.5,"Scopia","Letters box",2),"rectangle-swimming-pool":ye(500,275.5,139.9,"Scopia","Rectangle swimming pool",2),"garden-faucet":ye(4.96,20,15.5,"Scopia","Garden faucet",2),"passage-a-niveau":ye(596.5,92.8,262.1,"Scopia","Rail crossing",2),rails:ye(1e3,163.1,13.4,"Scopia","Rails",2),"fleche-tout-droit":ye(70,400,.3,"Scopia","Arrow straight ahead",2),"fleche-tourner-a-droite-et-direct":ye(127.5,400,.3,"Scopia","Arrow turn right and ahead",2),"fleche-tourner-a-droite":ye(100,400,.3,"Scopia","Arrow turn right",2),"stationnement-creneau":ye(510,205,.3,"Scopia","Parking slot",2),"stationnement-en-bataille":ye(237.5,504.9,.3,"Scopia","Parking slot 90\ufffd",2),"stationnement-epi-45":ye(801.9,485.1,.3,"Scopia","Parking slot 45\ufffd",2),"stationnement-epi-60":ye(573.7,519.9,.3,"Scopia","Parking slot 60\ufffd",2),"stationnement-epi-75":ye(385.1,514.4,.3,"Scopia","Parking slot 75\ufffd",2),"high-hedge":ye(150.7,104.1,179,"Scopia","High hedge",2),hedge:ye(150.9,104.6,106.3,"Scopia","Hedge",2),acacia:ye(770.8,645.7,649.4,"Scopia","Acacia",2),bamboo:ye(299.5,277.7,500,"Scopia","Bamboo",2),ficusTree:ye(275,283.9,500,"Scopia","Ficus",2),bluePineSnow:ye(351.8,369.6,559.4,"Scopia","Blue pine under snow",2),coconutTree:ye(777.2,800,1100,"Scopia","Coconut tree",2),coconutTreeBended:ye(729.4,750.9,1e3,"Scopia","Bended coconut tree",2),copperBeech:ye(751.3,730,800,"Scopia","Copper beech",2),cypress:ye(132.2,134.2,560,"Scopia","Cypress",2),japaneseMaple:ye(790.3,697.1,700,"Scopia","Japanese maple",2),poplar:ye(404.4,375.4,730,"Scopia","Poplar",2),peachBlossom:ye(503.9,746.4,500,"Scopia","Peach blossom",2),pineSnow:ye(374.5,378.9,545.7,"Scopia","Pine under snow",2),sabalPalmeto:ye(347.4,310.4,1150,"Scopia","Palm tree",2),sycamoreMaple:ye(908.6,1060.2,1200,"Scopia","Sycamore maple",2),tasDeTerre:ye(92.3,93,19.8,"Scopia","Ground heap",2),tasDeSable:ye(95.1,97.5,15.7,"Scopia","Sand heap",2),tasDeGravillons:ye(98,89.4,14.8,"Scopia","Gravel heap",2),tasDeGravats:ye(96,91.5,13.7,"Scopia","Rubble heap",2),voiesFerreesCourbe10m:ye(1045.1,562.6,39.9,"Scopia","Railroad curve 10m",2),voiesFerreesCourbe40m:ye(3933.3,942.8,39.9,"Scopia","Railroad curve 40m",2),voiesFerreesDroit1m:ye(100,440,39.9,"Scopia","Railroad 1m",2),routeCourbe2VoiesAvecTrottoirs26m:ye(2705.7,1365.7,18,"Scopia","Curved road 2 lanes 26m",2),routeCourbe1VoieAvecTrottoirs26m:ye(2660.4,1021.6,18,"Scopia","Curved road 1 lane 26m",2),"routeCourbe2VoiesAvecTrottoirs6.5m":ye(778,1111.9,18,"Scopia","Curved road 2 lanes 6.5m",2),"routeCourbe1VoieAvecTrottoirs6.5m":ye(732.9,769.9,18,"Scopia","Curved road 1 lane 6.5m",2),routeCourbe1VoieAvecTrottoirs13m:ye(1375.9,852.6,18,"Scopia","Curved road 1 lane 13m",2),routeCourbe2VoiesAvecTrottoirs13m:ye(1421.2,1196.6,18,"Scopia","Curved road 2 lanes 13m",2),route1VoieAvecTrottoirs:ye(1300,695,18,"Scopia","Road 1 lane",2),croisement1et1:ye(695,695,18,"Scopia","Crossroad 1x1 lane",2),croisement1et2:ye(695,1045,18,"Scopia","Crossroad 1x2 lanes",2),pont2Voies:ye(1300,1045,228,"Scopia","Bridge 2 lanes",2),pont1Voie:ye(1300,695,228,"Scopia","Bridge 1 lane",2),separateurDeVoie:ye(240,60,75,"Scopia","Traffic lane separator",2),pilierPont1Voie:ye(70,450,450,"Scopia","Bridge pillar",2),autoroute2Voies:ye(5200,1061.2,75.2,"Scopia","Highway 2 lanes",2),routeCourbe1VoieAvecTrottoirs90Deg:ye(695,695,18,"Scopia","Curved road 1 lane 90\ufffd",2),filElectrique:ye(2287.1,3.46,34.8,"Scopia","Electric wire",2),"poteau-en-beton":ye(339.9,240.6,1202,"Scopia","Concrete pole",2),"poteau-en-bois":ye(339.9,107,1202.3,"Scopia","Wood pole",2),"feu-de-signalisation-avec-signalisation-au-dessus":ye(320.6,56.4,499.1,"Scopia","Traffic light",2),hydrangea:ye(79.8,78.2,64.9,"Scopia","Hydrangea",2),blackTupelo:ye(666,650,1e3,"Wolfram Diestel","Black tupelo",2),quakingAspen:ye(355,369,700,"Wolfram Diestel","Quaking aspen",2),fanPalm:ye(246,257,300,"Wolfram Diestel","Fan palm tree",2),sassafras:ye(607,592,950,"Wolfram Diestel","Sassafras",2),weepingWillow:ye(700,683,800,"Wolfram Diestel","Weeping willow",2)},Pe={apples:ye(25.7,25.7,16,"Scopia","Apples",1),mamadeira:ye(5,5,14.7,"Valdps","Baby bottle",1),baby_high_chair:ye(60,64.4,104,"Scopia","Baby high chair",2),sgabello:ye(32,36,85,"LucaPresidente","Bar stool",2),birthday_cake:ye(24,24,10.6,"Scopia","Birthday cake",1),boiler:ye(17.9,16.2,20,"Jay-Artist","Boiler",1),bouilloire:ye(16.7,20.2,22.1,"Toomy","Boiler",1),bowl:ye(20.1,20.1,12.4,"Scopia","Bowl",1),bowlWithFruits:ye(32,33.6,14.1,"Scopia","Bowl with fruits",1),bowlWithSalad:ye(25,25,11.7,"Scopia","Bowl with salad",1),bread:ye(6,23.5,10.3,"Yd","Bread",1),baguettePain:ye(54.7,7.5,4.1,"Emmanuel Puybaret","Baguette",1),broom:ye(36.6,8.2,156,"Scopia","Broom",1),bucket:ye(30,28,26.5,"Ola-Kristian Hoff","Bucket",1),butter:ye(16,7.5,3.4,"BMF","Butter",1),"chest-freezer":ye(130,85.8,74,"Scopia","Chest freezer",2),choppingBoard:ye(37.6,26,4.5,"Jay-Artist","Chopping board",1),baguettes:ye(1.4,21,.6,"Toomy","Chopsticks",1),cocktailGlass:ye(8.3,8.3,13.1,"Xablend1222","Cocktail glass",1),coffeeBrewer:ye(13.4,38.5,27.2,"TreyClaine","Coffee brewer",1),caffe_final:ye(10,10,4.3,"Reduno","Coffee cup",1),percolateur:ye(20.5,30.4,27.9,"Toomy","Coffee machine",1),"coffee-maker":ye(18.6,28.7,30,"Kator Legaz","Coffee maker",1),"coffee-mug":ye(8.5,12,10.8,"Kator Legaz","Coffee mug",1),coffeePress:ye(16.3,10.3,26.5,"Cephei","Coffee press",1),cooker:ye(28.9,40,27.1,"Scopia","Cooker",1),mano_cooktop:ye(58,50,3.8,"Mano","Cooktop",1),"food-box-corn-flakes":ye(19.1,9.1,27.1,"Kator Legaz","Corn flakes box",1),cupcake:ye(5.9,5.9,7.5,"Dvachib","Cup cake",1),lavastoviglie:ye(60,62.6,78,"LucaPresidente","Dishwasher",2),doubleOven:ye(60,51.5,108.9,"Martanda","Double oven",1),drawersCabinet:ye(60,61.2,88.5,"Vladoffsky","Drawers cabinet",2),kitchenDrawersCabinet:ye(44.2,61.2,87.8,"Jay-Artist","Drawers cabinet",2),electronicScale:ye(15,22,2,"Scopia","Electronic scale",1),frenchFries:ye(20.4,19.2,3.5,"Scopia","French fries",1),glass:ye(7.5,7.4,19.5,"Jay-Artist","Glass",1),kitchenGlassDoorCabinet:ye(33.6,32.1,77.1,"Jay-Artist & eTeks","Glass door cabinet",7),"kitchen-glass-jar-high":ye(9.9,9.9,21.8,"Scopia","Glass jar",1),upperCabinet:ye(60,41,56.6,"Vladoffsky","Upper cabinet",7),upperCabinet2:ye(60,41,56.6,"Vladoffsky","Upper cabinet",7),hamburger:ye(11,11,8.6,"SaiZyca2","Hamburger",1),highCabinet:ye(60,61.2,217,"Vladoffsky","High cabinet",6),hood:ye(101.6,39.2,48.6,"Jay-Artist","Hood",7),kitchenHood:ye(59.8,51.4,14.3,"Scopia","Hood",1),hotDog:ye(21.1,7.3,6.5,"Erickfree","Hot dog",1),"induction-cooker-2-zones":ye(30,52,.4,"Scopia","Induction cooker 2 zones",1),"induction-cooker-4-zones":ye(56,49.5,.4,"Scopia","Induction cooker 4 zones",1),kitchenIsland:ye(93.9,69.9,83.1,"Jay-Artist","Island",2),islandExtension:ye(60,123.7,88.5,"Vladoffsky","Island extension",2),kitchenKnife:ye(3.5,26.3,2.1,"Jay-Artist","Kitchen knife",1),kitchenUpperCabinet:ye(109.4,32.1,77.1,"Jay-Artist","Upper cabinet",7),kitchenKnifeStandSet:ye(9,27.1,21.9,"Scopia","Knife stand",1),largeFridge:ye(92.5,80.6,184.3,"Vladoffsky","Large fridge",2),largeStove:ye(103.9,72.3,85.2,"Jay-Artist","Large stove",2),lowerCabinet:ye(60,61.2,88.5,"Vladoffsky","Lower cabinet",2),kitchenLowerCabinet:ye(97.6,61.6,87.8,"Jay-Artist","Lower cabinet",2),lowerCornerCabinet:ye(81,82.3,88.5,"Vladoffsky","Lower corner cabinet",2),tetrapak:ye(9.6,9.5,26.5,"Tastykle3d & eTeks","Milk",1),oven:ye(60,51.5,57.8,"Martanda","Oven",7),ovenFront:ye(60,6.7,55,"LucaPresidente","Oven front",1),poele:ye(25.7,43.2,5.4,"Toomy","Pan",1),casserole:ye(17.4,30.3,8.5,"Toomy","Pan",1),paperTowelHolder:ye(16,16,29.2,"Scopia","Paper towel holder",1),"food-box-pasta":ye(13.9,5.4,19.7,"Scopia","Pasta box",1),pizza:ye(29.7,30,.9,"Toomy","Pizza",1),"plate-and-ustensils":ye(27,34,13.2,"Kator Legaz","Plate, glass and cultery",1),"ensemble-assiette-couteau-fourchette-cuillere-verre":ye(41.7,38.9,14,"Scopia","Plate, glasses and cutlery",1),citrouille:ye(29.4,29.4,24.7,"Sophie","Pumpkin",1),rangeHood:ye(60,31.8,42.6,"Donypolo","Range hood",7),refrigerator:ye(90,90,172,"Hilander","Refrigerator",2),bolDeRiz:ye(15,15,12,"Toomy","Rice bowl",1),autocuiseur:ye(25.8,22.5,22.8,"Tommy","Rice cooker",1),"roasted-chicken":ye(30,20.3,19.5,"Scopia","Roasted chicken",1),saltShaker:ye(4.1,4.1,7.9,"Jswing","Salt shaker",1),sandwichMaker:ye(24,25.2,6.8,"Scopia","Sandwich maker",1),meubleChaussures:ye(71.7,39.6,102.3,"Ga\xebl Bettinelli","Shoe cabinet",2),kitchenSink:ye(97.6,61.6,97.6,"Jay-Artist & Kator Legaz & eTeks","Sink",2),sinkCabinet2:ye(60,61.2,121.2,"Vladoffsky","Sink cabinet",2),dishwasher:ye(45,60,84.5,"Scopia","Small dishwasher",2),kitchenSmallLowerCabinet:ye(48.7,61.6,87.8,"Jay-Artist","Small lower cabinet",2),"small-oven":ye(56.4,47.3,36.4,"Scopia","Small oven",1),kitchenSmallUpperCabinet:ye(33.6,32.1,77.1,"Jay-Artist","Small upper cabinet",7),smallUpperCabinet:ye(60,41,56.6,"Vladoffsky","Small upper cabinet",7),spiceTower:ye(15.9,15.9,31,"Scopia","Spice tower",1),eponge:ye(10,6,1.4,"Toomy","Sponge",1),steak:ye(32.4,19.3,5.1,"Scopia","Steak",1),tabouretBar:ye(51.1,44.2,101.7,"Ga\xebl Bettinelli","Stool",2),stool2:ye(36.1,36.1,78,"Vladoffsky","Stool",2),stove1:ye(83.3,93.6,104,"Pencilart","Stove",2),stove:ye(33.3,60,5.6,"Doniypolo","Stove",1),toast:ye(10.1,9.9,.8,"Toomy","Toast",1),grillePain:ye(34.2,11.9,18,"Toomy","Toaster",1),toaster:ye(27,15.5,17.4,"Scopia","Toaster",1),towel:ye(14.5,13.4,45.4,"Jay-Artist","Towel",7),poubelleInox:ye(29,34.2,65.2,"Ga\xebl Bettinelli","Trash can",2),tray:ye(39,29.4,5.5,"Scopia","Tray",1),utensilsPot:ye(12.2,11.1,40.2,"Oldtimer","Utensils pot",1),aspirateur:ye(142.8,32.8,82.3,"Tommy","Vacuum",2),kitchenCabinet:ye(60,64,85,"eTeks","Kitchen cabinet",2),meubleMicroOnde:ye(62.6,44,118.3,"Infernal-quack","Microwave cabinet",2),sink:ye(120,64,105.72,"eTeks","Sink",2),fridge:ye(60,66,85,"eTeks","Fridge",2),fridgeFreezer:ye(60,66,185,"eTeks","Fridge & Freezer",2),cabinet:ye(80,62,86,"Robert Pastierovic","Gray cabinet",2),cabinetWithBasin:ye(80,62,86,"Robert Pastierovic","Gray cabinet",2),bouteille:ye(8.2,8.2,29.2,"Snduc","Plastic bottle",1),container:ye(13.3,9.1,31,"Rlocatelli","Container",1),drawers:ye(40,62,86,"Robert Pastierovic","Gray drawers",2),tableCuisine:ye(120,40,88,"Infernal-quack","Table",2),kitchenaid:ye(21.4,36,35.3,"Swno","Mixer",2),knifeStandSwap:ye(39.15,3.5,35.6,"PrinterKiller","Knife stand",2),plasticCup:ye(7.9,7.9,10,"Chemsciguy","Plastic cup",2),silla2:ye(32.6,31.1,78.8,"Starkblend","Stool",2),yogurtBottle:ye(6.85,6.85,21.2,"Tastykle3d","Yogurt bottle",2),beerGlass:ye(15.4,10.2,16.5,"Hedgehogpro","Beer glass",2),upperCornerCabinet:ye(81,81,72,"Vladoffsky","Upper corner cabinet",2),upperShelves:ye(35,35,72,"Vladoffsky","Upper shelves cabinet",2),beer_bottle:ye(5.1,5.1,20,"Poifox","Beer bottle",2),coffee_cup:ye(8.5,8.5,13,"Dzerbs","Coffee cup",2),fork:ye(1.9,17.85,.95,"Jay-Artist","Fork",2),kitchenblender:ye(15.6,22.3,42.7,"PrinterKiller","Blender",2),kitchenTools:ye(44,9.8,31.6,"Jay-Artist","Kitchen tools",2),knife:ye(1.8,20.8,.3,"Jay-Artist","Knife",2),largePan:ye(33.1,26.8,28.2,"Jay-Artist","Large pan",2),microwave:ye(40.2,35.8,24.75,"Jay-Artist","Microwave",2),spoon:ye(3.2,18,1.1,"Jay-Artist","Spoon",2),washing_machine:ye(60,62.4,73.5,"Cattail","Washing machine",2),breadBox:ye(56.2,27.5,27.5,"Oldtimer","Bread box",2),kitchenScale:ye(23,23,27.5,"Oldtimer","Kitchen scale",2),espressokettle:ye(17.9,9.4,15.2,"Krabz","Espresso kettle",2),boiteMetal:ye(6.7,6.7,11.2,"Snduc","Metal box",2),chaiseCuisine:ye(36.6,54.2,80.6,"Infernal-quack","Chair",2),verreFlute:ye(4.2,4.2,17,"Geantick","Flute",2),glassDoorKitchenCabinet:ye(132.6,36,121,"Pencilart","Glass door cabinet",2),verreLongDrink:ye(5.5,5.5,17.8,"Geantick","Long drink glass",2),microOnde:ye(49,35.3,27.4,"Infernal-quack","Microwave",2),mug:ye(8,10.8,9.7,"Geantick","Mug",2),assietteVerresCouverts:ye(37,36.2,10.9,"Sleipnir1","Plate, glasses and cutlery",2),smallGlass:ye(10,10,7.9,"Pencilart","Small glass",2),carafeEau:ye(31.1,31.1,30,"Sleipnir1","Water carafe",2),verreEau:ye(7,7,7.2,"Geantick","Water glass",2),carafeVin:ye(31.1,31.1,30,"Sleipnir1","Wine carafe",2),verreVin:ye(7.3,7.3,10.1,"Geantick","Wine glass",2),glassdoorCabinet:ye(40,44,80.1,"Robert Pastierovic","Gray glass door cabinet",2),mobile_cucina_60x60:ye(60,65.5,100.6,"Ben Omari","Red cabinet",2),lavello_doppio_90x60:ye(120,65.5,124.4,"Ben Omari","Red cabinet with basin",2),cassetti_cucina_45x60:ye(45,65.5,100.6,"Ben Omari","Red drawers",2),isola_cucina_150x90:ye(150,105,100,"Ben Omari","Red island",2),pensile_cucina_45x90:ye(90,68.3,42.7,"Ben Omari","Upper cabinet",2),pensile_cucina_60x70:ye(70,49.5,59,"Ben Omari","Glass door cabinet",2),capa:ye(66.5,50,61.5,"Ben Omari","Hood",2),piano_cottura:ye(60,61.6,96.5,"Ben Omari","Cooker",2),frigorifero:ye(60,72.5,218.2,"Ben Omari","Fridge",2),ceramicHob:ye(60,52,.9,"Emmanuel Puybaret","Ceramic hob",2),cornerCabinet:ye(79,78,86,"Pencilart","Wood corner cabinet",2),"3DrawerCabinet":ye(52.66595,64,86,"Pencilart","Wood drawer cabinet",2),"2GlassDoorCabinet":ye(96,39.2,70,"Pencilart","Wood glass door cabinet",2),"2DoorUpperCabinet":ye(96,39.2,70.9,"Pencilart","Wood upper cabinet",2),"2DoorLowerCabinet":ye(96,64,86,"Pencilart","Wood lower cabinet",2),"1GlassDoorCabinet":ye(45.2,39.2,70,"Pencilart","Wood glass door cabinet",2),"1DoorUpperCabinet":ye(45.2,39.2,70.9,"Pencilart","Wood upper cabinet",2),"1DoorLowerCabinet":ye(51.9,64,86,"Pencilart","Wood lower cabinet",2),refridgerator:ye(76.4,65,167,"Pencilart","Refrigerator",2),pantry:ye(98.3,64,184.6,"Pencilart","Wood pantry",2),kitchenSinkWithMarble:ye(90.9,64,111.35,"Pencilart","Wood cabinet with sink",2),cornerChina:ye(77,77,171.5,"Pencilart","Wood corner China",2),couteauADecouper:ye(3.1,31.9,1.6,"Toomy","Kitchen knife",2),couteauAPain:ye(2.5,28.6,1.2,"Toomy","Bread knife",2),plancheADecouper:ye(35,23.8,1.7,"Toomy","Chopping board",2),barCusisine:ye(121.1,45,108.4,"Ga\ufffdl Bettinelli","Bar table",2),frigo:ye(57,60,113.2,"Ga\ufffdl Bettinelli","Fridge",2),desserte:ye(46.7,37.2,85.8,"Ga\ufffdl Bettinelli","Cart",2),casierBouteilles:ye(60,25,60,"Sophie","Bottles rack",2),cookingPlate:ye(40,20.5,3,"Peter Glas","Cooking plate",2),gaz:ye(31,31,63.14828,"Sophie","Gaz bottle",2),washer_dryer:ye(59.5,55,85,"Ola-Kristian Hoff","Washer dryer",2),ashtray:ye(7.8,7.8,3,"Kator Legaz","Ashtray",2),"bullet-trash-can":ye(33,33,74,"Kator Legaz","Bullet trash can",2),"12-oz-glass":ye(7,7,9.7,"Kator Legaz","Glass",2),"highball-glass":ye(6,6,12.1,"Kator Legaz","Glass",2),"oil-servers":ye(14.3,7.2,34.6,"Kator Legaz","Oil servers",2),"dinner-plate":ye(25,17.9,2.2,"Kator Legaz","Oval plate",2),"bread-plate":ye(20,20,2.2,"Kator Legaz","Plate",2),"propane-stove":ye(60.05,59.6,58.4,"Kator Legaz","Propane stove",2),"red-wine-bottle-01":ye(8.5,8.5,30,"Kator Legaz","Wine bottle",2),angolo:ye(65,65,78,"LucaPresidente","Corner cabinet",2),cucina:ye(80,66,81.1,"LucaPresidente","Cooker",2),curva:ye(60,60,78,"LucaPresidente","Corner shelves",2),curvaEsterna30:ye(30,60,78,"LucaPresidente","Corner shelves 30\ufffd",2),curvaInterna30:ye(30,60,78,"LucaPresidente","Corner cabinet 30\ufffd",2),doppio:ye(80,63.4,78,"LucaPresidente","Lower cabinet",2),pensileAngolo:ye(65,65,60,"LucaPresidente","Upper corner cabinet",2),pensileCurva:ye(27.5,27.5,60,"LucaPresidente","Upper corner shelves",2),pensileDoppio:ye(80,33.4,60,"LucaPresidente","Upper cabinet",2),pensileVetro:ye(40,29.75,60,"LucaPresidente","Glass door cabinet",2),pianoIsola:ye(40,120,78,"LucaPresidente","Island extension",2),singolo:ye(40,63.4,78,"LucaPresidente","Lower cabinet",2),lavello:ye(80,63.4,95,"LucaPresidente","Sink",2),cassettiera:ye(40,63.4,78,"LucaPresidente","Drawers",2),mobilettoGrande:ye(80,63.4,141,"LucaPresidente","Large pantry",2),mobilettoPiccolo:ye(40,63.4,141,"LucaPresidente","Pantry",2),gasHob:ye(60,40,3.1,"LucaPresidente","Gas hob",2),old_jar:ye(24.2,20.2,25,"Scopia","Old jar",2),pottery:ye(11,11,9,"Scopia","Pottery",2),sushi_tray:ye(32,24.8,4.5,"Scopia","Sushi tray",2),kitchen_tool1:ye(7,46.5,3.3,"Scopia","Tool",2),kitchen_tool2:ye(9.6,44.6,4.7,"Scopia","Tool",2),kitchen_tool3:ye(7.9,46.4,2.4,"Scopia","Tool",2),kitchen_tool4:ye(6,43.6,3,"Scopia","Tool",2),wine_bottle:ye(7.8,7.8,30,"Scopia","Wine bottle",2),bar_chair:ye(44.7,48.6,107.8,"Scopia","Bar chair",2),kitchen_stool:ye(45.5,45.5,98.4,"Scopia","Stool",2),coffee_machine:ye(58.2,40.2,36.4,"Scopia","Coffee machine",2),creamer:ye(12.2,8.4,8.9,"Scopia","Creamer",2),cup:ye(12,12,6.8,"Scopia","Cup",2),sugar:ye(10.1,10.1,10.1,"Scopia","Sugar",2),teapot:ye(21.7,14.7,21.3,"Scopia","Teapot",2),shovel:ye(27,53.8,16.1,"Scopia","Shovel",2),"shopping-basket":ye(60,50.2,61.1,"Scopia","Shopping basket",2),squeezer:ye(16.2,12,8.1,"Scopia","Squeezer",2),deepFryerWithFrenchFries:ye(27.9,56.8,27.8,"Scopia","Deep fryer",2),stoneGrillDevice:ye(31.6,25.5,11.6,"Scopia","Stone grill device",2),"food-spaghetti-box":ye(27.7,4.8,9,"Scopia","Spaghetti box",2),"kitchen-glass-jar-low":ye(9.9,9.9,12.8,"Scopia","Glass jar",2),"waitress-table-on-wheels":ye(83.5,41.6,89.6,"Scopia","Waitress table on wheels",2)},Oe={"convertible-sofa-BZ-closed":ye(143.2,102.3,87.3,"Scopia","Convertible sofa BZ",2),clicClac:ye(182,93.3,93.1,"Ga\xebl Bettinelli","Sofa bed",2),chair_granmother:ye(61,58,105,"Ola-Kristian Hoff","Armchair",2),fotel:ye(73.5,61.1,69.7,"TripleJ","Armchair",2),fauteuil:ye(73.5,61.1,69.7,"TripleJ","Armchair",2),armchair3:ye(59.1,69.4,94.9,"eTeks","Armchair",2),luckyBamboo:ye(15.5,14.9,34,"Renderbob","Bamboo",1),black_table:ye(170.1,90,75,"Scopia","Black table",2),"bonsai-tree":ye(44.5,38.2,42.9,"Scopia","Bonsai tree",1),bookcase:ye(166.4,33.1,186.4,"Gerardbelnder","Bookcase",2),dining_room:ye(255.6,36.4,175,"Scopia","Bookcase",2),cabinet2:ye(223.4,64.5,210.6,"Peter Smolik","Bookcase",2),elementHautSalon:ye(51.9,42.6,163.2,"Ga\xebl Bettinelli","Bookcase",2),"boston-fern":ye(65,61,44.5,"Scopia","Boston fern",1),cactus:ye(14.8,12.8,22.5,"Evivivi","Cactus",1),carpet:ye(160,225,1,"Emmanuel Puybaret","Carpet",5),tourRangeCD:ye(19.9,17,179.6,"Ga\xebl Bettinelli","CD rack",2),chair:ye(42,47.4,88,"Scopia","Chair",2),kitchenChair:ye(43,44,91,"Cisco336","Chair",2),thonet:ye(54.7,57.7,75.4,"JoelEapen","Chair",2),chair3:ye(43.3,50.4,90.6,"MatBot","Chair",2),chair4:ye(48.4,44.2,88.4,"Scopia","Chair",2),white_kitchen_chair:ye(42.7,46.9,86,"Scopia","Chair",2),childChair:ye(38.2,39.5,67,"Radio hate","Child chair",2),children_chair:ye(28,28,51,"Scopia","Children chair",2),children_table:ye(63,48,45,"Scopia","Children table",2),christmas_tree:ye(127.8,129.6,202.9,"Scopia","Christmas tree",2),clear_sofa:ye(193.9,75.9,80,"Scopia","Clear sofa",2),coffee_table:ye(89.6,45.9,47.5,"Scopia","Coffee table",2),table_wood_and_iron:ye(121.4,75.9,50.3,"Scopia","Coffee table",2),tableBasse2:ye(112.5,59.8,39.1,"Ga\xebl Bettinelli","Coffee table",2),L_shaped_sofa:ye(233.7,143.6,80,"Nhumrod","Corner sofa",2),sofa:ye(147,87,87,"eTeks","Corner sofa",2),couch2:ye(230,159.7,86.6,"Karagez","Couch",2),couchTable:ye(101.1,70.1,44,"Jabberwalky","Couch table",2),decorativePlant:ye(31.8,32.2,60.6,"Nmn9","Decorative plant",1),dresserWithDrawers:ye(160.5,51.9,81,"Hsdevys","Dresser with drawers",2),batterie:ye(104.9,92.8,115.6,"Sophie","Drums",2),dvd:ye(43,28.2,5.6,"Scopia","DVD player",1),fireplace1:ye(115.4,35.1,105,"Scopia","Fireplace",6),fireplace2:ye(121,44.9,250,"Scopia","Fireplace",6),flowers:ye(20.9,15.9,50,"Peter Smolik","Flowers",1),foldingChair:ye(50.8,60,91.2,"Giovagiova","Folding chair",2),folding_chair:ye(49,50.9,76.5,"alaX","Folding chair",2),"folding-table":ye(186,77.6,75,"Kator Legaz","Folding table",2),"full-bookcase":ye(89.8,34.7,221,"Kator Legaz","Full bookcase",2),"futon-couch":ye(196,89.8,87.8,"Kator Legaz","Futon couch",2),glassDoorCabinet:ye(70,38.7,198.2,"eTeks","Glass door cabinet",2),"glass-dining-table":ye(161.8,97.6,75,"Kator Legaz","Glass table",2),table_half_round:ye(102,58.6,78,"Ola-Kristian Hoff","Half round table",2),mediumIndoorPlant:ye(72.5,76.6,67.9,"Betomo16","Indoor plant",1),"ps4-joystick":ye(16.2,10.6,6.2,"Scopia","Joystick",1),longcase_clock:ye(50,30,200,"Ola-Kristian Hoff","Longcase clock",2),"microphone-with-foot":ye(67.4,98.7,142.8,"Scopia","Microphone with foot",2),oakTable:ye(124,124,74.1,"Doug C","Oak table",2),chaiseOrange:ye(41.2,46.7,95,"Icybones","Orange chair",2),orchids:ye(31.1,35.3,57.4,"Elysia","Orchids",1),"oriental-rug":ye(185.8,257.7,2.5,"Kator Legaz","Oriental rug",5),osakaChair:ye(47.5,52.5,77,"Daniliescudsg","Osaka chair",2),pianoBench:ye(61.9,35.5,52.2,"Simonrepp","Piano bench",2),pinewoodRackLowHeight:ye(89.8,30.2,56.5,"Dingenskirchen","Pinewood rack low height",2),pinewoodRackMediumHeight:ye(89.8,30.2,143,"Dingenskirchen","Pinewood rack medium height",2),augalas:ye(60.9,34.9,31.5,"MZiemys","Plant",1),maceta:ye(59,65,58,"Scopia","Plant",1),plant:ye(81.8,69,117.1,"Ndakasha","Plant",1),playstation4:ye(32.7,29.5,5.5,"Scopia","PlayStation4",1),puff:ye(91.3,84.8,60.3,"Scopia","Puff",2),rocking_chair:ye(65,80,109,"Ola-Kristian Hoff","Rocking chair",2),roses:ye(22.8,27.3,52.9,"Scopia","Roses",1),"round-carpet":ye(80,80,.5,"Scopia","Round carpet",5),"round-table":ye(110,110,75.7,"Scopia","Round table",2),ryokanChair:ye(53.3,59,54.8,"Scopia","Ryokan chair",1),meubleHiFiHaut:ye(155.9,41.4,183,"Ga\xebl Bettinelli","Shelf unit",2),simple_sofa:ye(179.8,67.3,95,"Scopia","Sofa",2),sofa1:ye(234,79.4,79.2,"Peter Smolik","Sofa",2),sofa2:ye(200,86.5,88,"eTeks","Sofa",2),stainlessSteelShelf:ye(78,28,15,"N Mi","Stainless steel shelf",7),shelves_storage_steel:ye(80,30,180,"Ola-Kristian Hoff","Steel shelves",2),stool_small:ye(30,30,45,"alaX","Stool",2),green_stool:ye(42.9,42.9,46,"Dalenryder","Stool",2),stool:ye(40,40,46,"eTeks","Stool",2),succulentPlant:ye(13.7,12.9,11.4,"Nmn9","Succulent plant",1),"table-on-trestles":ye(160,66.4,76.1,"Scopia","Table on trestles",2),white_kitchen_table:ye(110,70.1,75,"Scopia","Table",2),table:ye(144.3,93.4,72.4,"Jay-Artist","Table",2),table2:ye(144.3,93.4,72.4,"Jay-Artist","Table",2),"table-with-leaning-feet":ye(150,65,75,"Scopia","Table",2),tableCuisine2:ye(174.2,91.1,75,"Icybones","Table",2),tableWithTablecloth:ye(80.3,81.2,75,"Sizzler","Table with table cloth",2),"tv-remote-control":ye(4.5,18,1.7,"Scopia","TV remote control",1),meubleHiFiBas:ye(103.8,44.4,33.3,"Ga\xebl Bettinelli","TV shelf unit",2),"video-projector":ye(47,37.8,15.1,"Scopia","Video projector",1),winchesterArmchair:ye(112,93.4,80.4,"Gnanasaireddy","Winchester armchair",2),wirelessOfficePhone3:ye(11.2,15.8,17.1,"DennisH2010","Wireless phone",1),shelves_storage_wood:ye(78,31.5,171,"Ola-Kristian Hoff","Wood shelves",2),yuccaPlant:ye(107.9,102.4,180,"Betomo16","Yucca",2),desklamp:ye(24.4,24.4,40,"ColdShiverGames","Desk lamp",1),JapaneseLantern:ye(15.6,15.6,35.1,"Mindfront","Japanese lantern",1),lamp:ye(30.5,30.5,40.9,"Bulgakov","Lamp",1),little_lamp2:ye(31,31,43,"Scopia","Little lamp",1),"MIDI-keyboard":ye(80,25.3,8.4,"Kator Legaz","Musical keyboard",1),cornerSofa:ye(233,168,87,"eTeks","Corner sofa",2),aquarium:ye(60,30,35,"eTeks","Aquarium",1),armchair:ye(87,92,87,"eTeks","Armchair",2),armchair2:ye(80,78.1,77.2,"eTeks","Armchair",2),coffeeTable:ye(125,46,40,"eTeks","Coffee table",2),roundTable:ye(126,126,74,"eTeks","Round table",2),etageres:ye(150,39,150,"Icybones","Shelves",2),etagereEnfant:ye(70,30.1,188.8,"Icybones","Shelves",2),squareTable:ye(115,115,74,"eTeks","Square table",2),guitar:ye(38.6,97.6,6,"Robert Pastierovic","Guitar",1),dresser:ye(170,50,64.7,"eTeks","Dresser",2),fireplace:ye(145,85,250,"eTeks","Fireplace",2),cheminee:ye(145,85,250,"eTeks","Fireplace cheminee",2),AtorHaut:ye(60.2,52.8,203.1,"Ga\xebl Bettinelli","Stove",2),filledBookcase:ye(85,35,180,"eTeks","Filled bookcase",2),piano:ye(140,43,82,"eTeks","Piano",2),tabouretPiano:ye(35.6,37.6,48,"GdB","Piano stool",2),pianoDroit:ye(128,55.4,121,"GdB","Upright piano",2),beige_sofa:ye(193.9,75.9,80,"Scopia","Clear beige sofa",2),furnace:ye(66.7,97.7,125.6,"Scopia","Furnace",2),deer:ye(4.6,10,20,"Sizzler","Deer",2),oakChair:ye(49.1,61.2,117.8,"Doug C","Oak chair",2),pianoAQueue:ye(132,170,178,"Dante","Grand piano",2),plasticChair:ye(44.4,58.4,82,"exL","Chair",2),shelves:ye(79,39.4,79,"jclevet.net","Shelves",2),televisionCabinet:ye(135.4,69.3,160,"Niebieski","Television cabinet",2),verticalShelves:ye(44,39,185,"jclevet.net","Vertical shelves",2),electricGuitar:ye(34.5,32.1,110,"Seavenois","Electric guitar",2),littlePlant:ye(26.6,26.6,23.2,"Rameshrj","Little plant",2),sillaBlanca:ye(50.5,58.4,85,"Jviersalas","Chair",2),couch:ye(207.4,87.6,85.6,"TowerCG","Couch",2),modernArmchair:ye(77.3,84.9,86.5,"Dreadbwai","Armchair",2),antiqueChair:ye(49.8,63.2,98.2,"Niuskir","Chair",2),chairWithCushion:ye(44.1,44.1,94.8,"MZiemys","Chair with cushion",2),winchesterSofa:ye(231.9,93.8,80.4,"Gnanasaireddy","Winchester sofa",2),designChair:ye(77.9,62.8,99.4,"Semhustej","Chair",2),arbolito:ye(25.4,26.2,38,"Hermescn","Christmas tree",2),cafe_set_mota_chair:ye(60.9,55.8,78.3,"Voodoc","Chair",2),cafe_set_mota_table:ye(62.2,62.2,74,"Voodoc","Round table",2),cafe_set_tonon_chair:ye(48,53.3,82.2,"Voodoc","Chair",2),cafe_set_tonon_table:ye(66,52.8,64.4,"Voodoc","Table",2),ella_chair_f:ye(46,57,92,"Sizzler","Chair",2),leaf_chair:ye(67.1,81.3,82.65,"Voodoc","Chair",2),spatifilum:ye(79.8,74.9,87.5,"HeraSK","Spathiphyllum",2),tvStand:ye(135.1,46.5,52.6,"Leximumxii","TV stand",2),armchair1:ye(100.5,88.2,80,"Aymanslman","Armchair",2),spider_plant:ye(66.6,63.6,34.2,"Nmn9","Spider plant",2),tulip:ye(38.1,43.8,39.9,"Nmn9","Tulips",2),white_lily:ye(37.1,31.2,60,"Nmn9","White lily",2),plaidChair:ye(40.5,42.6,80,"Cezar","Chair",2),sofa3:ye(204.2,76.9,80,"3dModeling","Sofa",2),tulips:ye(31.8,25.2,42.7,"Nad451","Tulips",2),couch3:ye(201,90.9,84.3,"MatBot","Couch",2),barStool:ye(33,33,74,"Geantick","Bar stool",2),bookcase2:ye(82,44,150,"Geantick","Bookcase",2),computerWorkstation:ye(124,138.5,182,"GdB","Computer desk",2),cornerWorkstation:ye(109,108,171,"Geantick","Computer desk",2),bocalPoisson:ye(33.5,33.5,28.4,"Geantick","Fish bowl",2),tableGnome:ye(103.4,66.2,44,"Sleipnir1","Gnome table",2),rectangularTable:ye(175,100.5,74,"Sleipnir1","Rectangular table",2),squareCoffeeTable:ye(67.1,67.1,44,"GdB","Square coffee table",2),tableBasseBois:ye(95,50,37.8,"Infernal-quack","Wooden coffee table",2),woodTable:ye(171,106,74,"Pencilart","Wood table",2),priseTV:ye(8,1.1,8,"Sheep","TV plug",2),petiteTableSalon:ye(32,32,57,"Snduc","Small table",2),bibliothequeDroite:ye(50,40.1,229,"Snduc","Bookcase",2),allenOrgan:ye(185.9,155.9,186.3,"Don Ravey","Allen organ",2),highBoyDresser:ye(96.6,56.7,168.4,"Don Ravey","High boy dresser",2),smallbookshelves:ye(87.4,33.5,105.9,"Don Ravey","Small bookshelves",2),salontafel:ye(100,100,30,"Theo Blonk","Coffee table",2),couchTwoSeats:ye(198,90.6,72,"Theo Blonk","Couch two seats",2),kleed_grieks:ye(170,120,1,"Theo Blonk","Greek carpet",2),pinewoodRackFullHeightHalfWidth:ye(48.8,30.2,227,"Dingenskirchen","Pinewood rack full height half width",2),pinewoodRackFullHeight:ye(89.8,30.2,227,"Dingenskirchen","Pinewood rack full height",2),latticeChair:ye(43,42.3,87.3,"Pencilart","Lattice chair",2),meubleMural:ye(261.5,55.3,215,"Icybones","Bookcase",2),CDrack:ye(65.7,20.3,122.4,"Peter Smolik","CD rack",2),displayCabinet:ye(84,84,179.8,"Peter Smolik","Display cabinet",2),hallTable:ye(117.42,62.9,87.62,"Peter Smolik","Dresser",2),potplant2:ye(96.68,96.19,85.35,"Peter Smolik","Plant",2),roundTable2:ye(53.81,53.81,68.8,"Peter Smolik","Round table",2),shelving:ye(119,30.9,45.6,"Peter Smolik","Shelving",2),sofa3Single:ye(138.43,102.7,91.63,"Peter Smolik","Armchair",2),sofa4:ye(185,74,83.54,"Peter Smolik","Sofa",2),couchPoofyPillows:ye(156.1,70.6,75,"Pencilart","Couch",2),largeCouch:ye(236.7,76.7,75,"Pencilart","Large couch",2),singleChair:ye(101.2,77.1,75,"Pencilart","Armchair",2),throwPillow:ye(35,17,32.1,"Pencilart","Pillow",1),counter:ye(191.2,288.4,93.3,"Wrosun","Counter",2),tableBasse:ye(112.5,59.8,39.1,"Ga\ufffdl Bettinelli","Coffee table",2),pancaFratinoSing:ye(85,49.8,85,"Nictac","Bench",2),tavoloFratino:ye(110,70.1,75,"Nictac","Table",2),chair_high:ye(65,70,135,"Ola-Kristian Hoff","Armchair",2),shelves_storage_wood2:ye(77,37,170,"Ola-Kristian Hoff","Wood shelves",2),table_granmother_marble:ye(120,120,70,"Ola-Kristian Hoff","Marble table",2),armchair_wing:ye(85,90,112,"Ola-Kristian Hoff","Armchair",2),bar_stool:ye(44.5,42,70,"alaX","Bar stool",2),dropLeafTable:ye(260,78,72,"Seber Rider","Drop leaf table",2),"mid-century-chair":ye(73.5,84.4,80,"Kator Legaz","Armchair",2),"chair-ottoman":ye(77,155.2,100,"Kator Legaz","Armchair ottoman",2),"bar-stool":ye(53.2,59.3,110,"Kator Legaz","Bar stool",2),"dining-chair":ye(42.3,57.3,100,"Kator Legaz","Chair",2),"utility-shelving":ye(60,30,120,"Kator Legaz","Shelves",2),"mid-century-bench-sofa":ye(278.9,107.3,75,"Kator Legaz","Sofa",2),"mid-century-sofa":ye(199,84,80,"Kator Legaz","Sofa",2),credenza:ye(166,50,78,"LucaPresidente","Sideboard",2),sedia:ye(44.7,45.8,79,"LucaPresidente","Chair",2),tavolino:ye(60,30,27,"LucaPresidente","Coffee table",2),tavolo:ye(160,70,78,"LucaPresidente","Table",2),box_room:ye(157.6,47.8,104,"Scopia","Box",2),saloon_table:ye(143.9,64.1,51.1,"Scopia","Coffee table",2),table3:ye(100,100,90.7,"Scopia","Table",2),table4:ye(140,90,75,"Scopia","Table",2),wooden_table_office:ye(151.1,80.4,77.5,"Scopia","Table",2),tubular_chair:ye(53.2,49.9,81.4,"Scopia","Chair",2),metal_glass_table:ye(160.8,89.7,76.7,"Scopia","Glass table",2),glass_table_office:ye(186.05267,80.29927,76.64766,"Scopia","Glass table",2),desk_table:ye(191.6,88.4,76.7,"Scopia","Glass table",2),bar_table:ye(80,80,102.4,"Scopia","Bar table",2),beige_sofa_2seats:ye(158.86,73.5,86.6,"Scopia","Sofa 2 seats",2),burlap_sofa:ye(170,90,79.7,"Scopia","Burlap sofa",2),leather_sofa:ye(192.5,90.3,100.1,"Scopia","Sofa",2),living_room_table:ye(106.7,72.5,53.6,"Scopia","Table",2),modern_armchair:ye(63.1,52.9,72,"Scopia","Modern armchair",2),plastic_chair:ye(48.3,55.7,96.5,"Scopia","Plastic chair",2),calla_lily_with_roses:ye(43.6,38.6,52.4,"Scopia","Flowers",2),sofa_white_beige:ye(173.8,81.6,85,"Scopia","Sofa",2),ficus:ye(42.5,41.5,82.4,"Scopia","Ficus",2),"coffee-table2":ye(123.8,51.2,47.7,"Scopia","Coffee table",2),lavender:ye(13.4,12,53.5,"Scopia","Lavender",2)},ke={ceilingFan:ye(91.3,79.8,39.2,"PrinterKiller","Ceiling fan",1)},Fe={"window-blinds":ye(100,7,120,"Kator Legaz","Window blind",7),cover_outdoor1:ye(100,7,120,"Kator Legaz","Outdoor window blind",7),storeCalifornien:ye(200.4,16.2,170,"Julie Fabre","Blind",7),curtain:ye(110,5,180,"Scopia","Curtain",7),blind:ye(100,7,120,"Scopia","Curtain Blind",7),curtains:ye(70,15,200,"eTeks","Curtains",7)},Me={man:ye(60,25,180,"Scopia","Presence",1),mannequinMale:ye(60,25,180,"Scopia","Presence",1),boyStanding:ye(60,35,180,"Scopia","Presence",1),male01:ye(55,45,180,"Scopia","Presence",1),male03:ye(55,40,180,"Scopia","Presence",1),male02:ye(80,50,180,"Scopia","Presence",1),holdingMale01:ye(60,60,180,"Scopia","Presence",1),mannequinBrunette:ye(60,25,180,"Scopia","Presence",1),female01:ye(55,55,170,"Scopia","Presence",1),female02:ye(60,50,170,"Scopia","Presence",1),female03:ye(60,60,170,"Scopia","Presence",1),girlStanding:ye(40,40,165,"Scopia","Presence",1),holdingFemale01:ye(50,60,170,"Scopia","Presence",1),holdingFemale02:ye(70,70,170,"Scopia","Presence",1),holdingFemale03:ye(50,50,170,"Scopia","Presence",1),nourrison:ye(30,50,15,"Scopia","Presence",1),boySitting:ye(50,60,110,"Scopia","Presence",1),sitMale01:ye(60,70,110,"Scopia","Presence",1),sitMale02:ye(60,70,110,"Scopia","Presence",1),sitMale03:ye(60,90,70,"Scopia","Presence",1),sitFemale03:ye(50,60,110,"Scopia","Presence",1),girlSittingTable:ye(35,60,110,"Scopia","Presence",1),sitFemale02:ye(75,100,70,"Scopia","Presence",1),girlSittingGround:ye(60,55,70,"Scopia","Presence",1),boyLying:ye(60,180,70,"Scopia","Presence",1),lyingDownMale02:ye(60,170,60,"Scopia","Presence",1),lyingDownMale01:ye(60,180,30,"Scopia","Presence",1),lyingDownFemale01:ye(70,150,70,"Scopia","Presence",1),dog:ye(30,90,50,"Scopia","Presence",1),cat:ye(18,35,35,"Scopia","Presence",1),siameseCat:ye(13,60,35,"Scopia","Presence",1),rabbit:ye(15,25,30,"Scopia","Presence",1),horse2:ye(60,250,190,"Scopia","Presence",1),chicken:ye(24.2,32.8,45.6,"CDmir230","Chicken",1),bulldog:ye(38.8,64.5,47.4,"Priide","Bulldog",1),horse:ye(58.7,229.2,193,"B2przemo","Horse",1),"female-01-casual-clothing":ye(47.5,37.1,170,"Kator Legaz","Female",1),"male-01-suit":ye(55.9,41.3,185,"Kator Legaz","Male",1),sitFemale01:ye(56.2,81.7,75.8,"Reallusion","Sitting female",1),fille:ye(49.1,22.9,146.8,"Scopia","Mannequin girl",1),boy:ye(53.9,27.3,159.6,"Scopia","Mannequin boy",1)},Ae={"internal-unity-air-conditioning":ye(88.5,19.8,28.5,"Scopia","Air conditioning - Internal unit",7)},Re={CCTV:ye(14,14,11.7,"Scopia","CCTV",1),surveillanceCamera:ye(22.9,39,18.3,"Starkerg","Surveillance camera",7)},Le={"wall-flat-tv":ye(102.8,10.9,65.9,"Scopia","Wall flat TV",7),curvedTVForTable:ye(126.3,18.1,79.9,"Jabberwalky","Curved TV",1),curvedWallOLEDTV:ye(151,13,87,"RonnieTantriady","Curved wall TV",7),flatTV:ye(121,30,79.3,"eTeks","Flat TV",1),tvUnit:ye(100,52,93,"eTeks","TV unit",2),led_tv:ye(77.5,14.2,50.8,"Nhumrod","TV",2),ecran16_9:ye(86.7,28.1,58,"Geantick","TV 16:9",2),TVCenter:ye(77.2,53.8,129.9,"Pencilart","TV center",2),tv:ye(56,31.9,50,"Scopia","TV 16:9",2),contemp_living_room:ye(330.9,40.3,199.5,"Scopia","Contemporary living room",2),laptop:ye(33.9,25.3,26.6,"Mayollo","Laptop",1),monitorLCD:ye(66.4,30.7,56.8,"Carvalho","Monitor LCD",1),portable:ye(30,25.3,19.2,"Sleipnir1","Laptop",2),"apple-ibook-2001":ye(28.5,27.2,22.9,"Kator Legaz","Apple iBook",2),"apple-imac-1998":ye(42.5,50,40.1,"Kator Legaz","Apple iMac 1998",2),apple_pc:ye(44,36.2,38,"Scopia","Apple iMac 2004",2),iphone:ye(5.8,11.5,.9,"Bheema","Apple iPhone",1),mobile:ye(4.9,11,1.3,"Songkro","Mobile phone",1),tablet:ye(17,24,.8,"Scopia","Tablet",1),intercom_with_screen:ye(19,6.2,36,"Scopia","Intercom with screen",7),thermometer:ye(7.7,5.9,17.1,"DennisH2010","Thermometer",2),appleIpod:ye(6.2,10.3,1.6,"Snduc","Apple iPod",2)},Be={abdominalBench:ye(67.2,192.9,86.9,"Muhtesemozcinar","Abdominal bench",2),livreAvecReliure:ye(17.6,10.9,3.8,"Toomy","Book",1),book:ye(28.1,18.4,2.4,"Jay-Artist","Book",1),livres:ye(24,16.9,26.9,"Toomy","Books",1),cageFuret:ye(79,50,74.5,"Ga\xebl Bettinelli","Cage",1),"cardboard-box":ye(55,35,30,"Scopia","Cardboard box",1),arbreAChat:ye(65,48.8,89.6,"Scopia","Cat tree",2),clock:ye(33.4,1.9,33.4,"Robert Pastierovic","Clock",7),clock2:ye(30,3,30,"alaX","Clock",7),crate:ye(60,58.9,59.4,"GyngaNynja","Crate",1),dart_game:ye(45.3,16.3,45.3,"Scopia","Dart game",7),doormat:ye(60,30,1.1,"Scopia","Doormat",5),electric_water_heater:ye(45.6,45.9,61.9,"Scopia","Electric water heater",1),electricWheelchair:ye(55.4,88.6,91.4,"Scopia","Electric wheelchair",2),emergencySign:ye(30,3.5,9,"Marcinc53","Emergency sign",7),flipper:ye(72,132.6,184.8,"Scopia","Flipper",2),foldedNewspaper:ye(29.3,20.2,2.1,"Scopia","Folded newspaper",1),"folding-armchair":ye(59.2,60.6,90.7,"Scopia","Folding armchair",2),table_football:ye(150.3,124.6,100.9,"Jeff2207","Football table",2),ButterflyFrame:ye(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Butterfly",7),frame:ye(50,2.2,35,"eTeks","Frame",7),frame1:ye(14.5,14.5,19.6,"Scopia & eTeks","Frame Chambord",1),frame3HorizontalNorwayPhotos:ye(25.4,3,52.5,"Emmanuel Puybaret","Frame Norway photos",7),frame3VerticalSummerPhotos:ye(52.5,3,25.4,"Kator Legaz","Frame summer photos",7),HaiVanPassFrame:ye(77.2,1.5,47.9,"Emmanuel Puybaret","Frame Hai Van Pass",7),gaz_water_heater:ye(40.5,34.5,67.6,"Scopia","Gaz water heater",1),gift:ye(23.2,18.1,25.1,"Tadine","Gift",1),glasses:ye(15,14.4,2.8,"Scopia","Glasses",1),marteau:ye(34.6,12.9,3.3,"Scopia","Hammer",1),cendrier:ye(12,12,3.4,"Scopia","Ash tray",1),headphones:ye(18.9,8.2,20,"Alaskaman","Headphones",1),"indoor-bike":ye(71.8,101.2,131.3,"Scopia","Indoor bike",2),intercom:ye(9.8,5.4,36.4,"Scopia","Intercom",7),keys:ye(11.5,11.4,2.9,"Scopia","Keys",1),litiere:ye(28.9,50.2,42.9,"Scopia","Litter",2),lockedLocker:ye(20,22,40,"Twin97","Locked locker",1),revue:ye(20,28,.6,"Scopia","Magazine",1),pileMagazines:ye(27.3,33.7,1.2,"Toomy","Magazines pile",1),mini_stereo:ye(48.9,21,21,"Scopia","Mini stereo",1),mirror:ye(40,.5,40,"Emmanuel Puybaret","Mirror",7),mower:ye(51,96.5,104.2,"Scopia","Mower",2),bdOuverte:ye(42.4,29.8,2.6,"Toomy","Opened comics book",1),revueOuverte:ye(39.3,28.2,2.8,"Scopia","Opened magazine",1),ovalMirror:ye(55,1,105,"Emmanuel Puybaret","Oval mirror",7),pallet:ye(120,120.4,12,"Shivraj","Pallet",1),poolTable:ye(256,139.2,82.3,"Jeffie","Pool table",2),"punching-ball":ye(45.9,45.9,152.8,"Scopia","Punching ball",2),wheelchairSymbol:ye(149,149,.1,"Emmanuel Puybaret","PWD symbol",7),radiator3:ye(55.4,20.7,64.3,"Testinator","Radiator",7),rectangularMirror:ye(50,1,70,"Emmanuel Puybaret","Rectangular mirror",7),reflex_camera:ye(12.5,14.9,9.8,"Scopia","Reflex camera",1),japanese_style_screen:ye(178,15.8,189,"Scopia","Japanese style screen",2),tournevis:ye(25.5,3.1,3.1,"Scopia","Screwdriver",1),sewing_machine:ye(52,12,44,"Ola-Kristian Hoff","Sewing machine",1),shippingContainer:ye(243,606,259,"Bhoult","Shipping container",2),"smoke-detector":ye(10,1.8,10,"Scopia","Smoke detector",7),ballonFoot:ye(22,22,22,"DooL","Soccer ball",2),speaker2:ye(22.1,25.4,35.4,"Nhumrod","Speaker",1),"square-double-switch":ye(8.5,1.1,8.5,"Scopia","Square double switch",7),frame_square:ye(100,10,100,"Ola-Kristian Hoff & Annik","Square frame",7),"square-switch":ye(8.5,1.1,8.5,"Scopia","Square switch",7),"square-plug-TypeB":ye(8.5,.7,8.5,"Scopia","Square type B plug",7),"square-plug-TypeE":ye(8.5,.7,8.5,"Scopia","Square type E plug",7),"step-ladder-metal":ye(57.8,75.9,180,"Step ladder","Scopia",2),suitcase:ye(99.8,31.5,72.5,"Pyrophorus","Suitcase",1),table_tennis:ye(274,173,96,"Bheema","Table tennis",2),tatami:ye(100,200,5.5,"Scopia","Tatami",5),treadmill:ye(88.5,195.8,152.6,"Muhtesemozcinar","Treadmill",2),putekasse:ye(118,45,58,"Ola-Kristian Hoff","Trunk",2),umbrellaFolded:ye(35.8,35.7,80,"Ralmon","Umbrella",1),vase3:ye(23.5,23.5,50.9,"Scopia","Vase",1),jar:ye(24.4,24.4,40,"Scopia","Vase",1),"walker-with-wheels":ye(60.2,72.2,93,"Scopia","Walker with wheels",2),"double-switch-whites":ye(8.5,1.1,8.5,"Scopia","Wall double switch",7),wall_handrail:ye(230,9.9,9.8,"Ola-Kristian Hoff","Wall handrail",7),"switch-whites":ye(8.5,1.1,8.5,"Scopia","Wall switch",7),"plug-TypeB-whites":ye(8.5,.7,8.5,"Scopia","Wall type B plug",7),"plug-TypeE-whites":ye(8.5,.7,8.5,"Scopia","Wall type E plug",7),wheelchair:ye(64.4,76.9,91,"Bgamage","Wheelchair",2),wood_logs:ye(40.3,69.9,31.8,"Scopia","Wood logs",2),complements2:ye(13,13,15,"Scopia","Candle",1),radiator1:ye(216.3,14.3,83.4,"Knyghtfall13x","Horizontal radiator",1),cornice:ye(100,10,10,"Emmanuel Puybaret","Cornice",1),corniceConcaveCorner:ye(10,10,10,"Emmanuel Puybaret","Concave corner cornice",1),electricOutlet:ye(7.1,.5,11.2,"Pencilart","Electric outlet",1),electricOutlet2:ye(7.1,.5,11.2,"Pencilart","Electric outlet 2",1),electricRadiator:ye(37,10,45,"eTeks","Electric radiator",1),estintore:ye(35.5,20.7,60,"Sergio Capretta","Extinguisher",1),hotWaterRadiator:ye(65,25,61,"eTeks","Hot water radiator",1),radiateur:ye(50.2,6,164.4,"Snduc","Radiator",1),boucheVMC:ye(21.5,2,21.5,"Snduc","Vent",1),radiateurVertical:ye(61,4.4,187,"Snduc","Vertical radiator",1),antenaTV:ye(200,80.3,266.6,"Miguel Angel Serra","Antenna TV",1),antenaParabolica:ye(65,70.4,71.1,"Miguel Angel Serra","Satellite dish",1),"external-unity-air-conditioning":ye(77.1,28.4,54.2,"Scopia","Air conditioning - External unit",7),solar_panel_140W:ye(125,66.8,3,"Ola-Kristian Hoff","Solar panel",1),"entry-bell-ring":ye(3.8,2.4,10,"Scopia","Entry bell ring",7),"entry-bell-speech-unit":ye(10.4,2,20.3,"Scopia","Entry speech unit",7),box:ye(50,50,50,"Klet3D","Box empty",1),cylinder:ye(50,50,50,"Klet3D","Cylinder empty",1),sphere:ye(50,50,50,"Klet3D","Sphere empty",1),radiator2:ye(132.6,41.4,45.66,"Redsymbzone","Radiator",2),radiator:ye(140.3,24.7,73.1,"Redsymbzone","Radiator",2),speaker3:ye(22.1,25.4,55.1,"Nhumrod","Speaker",2),tableFan:ye(27.1,21.8,40.1,"Shivraj","Table fan",2),ammoBox:ye(100,52.1,30.6,"Mahesh","Box",2),barrel:ye(81.5,81.5,89.7,"GyngaNynja","Barrel",2),basketball:ye(23.8,23.8,23.8,"SEspider","Basketball",2),fireExtinguisher:ye(31.1,18,62.3,"Bastable","Extinguisher",2),numberLock:ye(10,.45,10.2,"Avi9526","Number lock",2),cuckooClock:ye(26.6,17.7,73.8,"Guclu","Cuckoo clock",2),riggedFan:ye(32.7,20.7,32.2,"Kagi","Rigged fan",2),tennisRacket:ye(26,68.5,2.9,"Ndakasha","Tennis racket",2),radio:ye(30.7,8.4,26.3,"Jay-Artist","Radio",2),wallDoubleSocket:ye(15.5,1,7.9,"Jay-Artist","Wall double socket",2),wallSocket:ye(7.7,.8,7.9,"Jay-Artist","Wall socket",2),"wire-coathanger":ye(41,1.2,26.8,"Loopo","Wire coathanger",2),sunglasses:ye(15.1,15.7,3.5,"Krabz","Sunglasses",2),tableTennisBat:ye(14.7,25.4,1.3,"BrunoMatheus","Table tennis bat",2),modernRadiator:ye(50.4,11.6,60,"Atszgo","Radiator",2),mp3Station:ye(39.8,9.8,12.1,"TrueCryer","MP3 station",2),workbench:ye(123.3,62.4,173.8,"Victorbied","Workbench",2),fitnessTower:ye(222.8,173.9,208,"Blenderik","Fitness tower",2),fut:ye(45,45,64.1,"Geantick","Beer barrel",2),pompeBiere:ye(58.9,25.2,30,"Geantick","Beer pump",2),curtainRod:ye(150,16.5,7.7,"Geantick","Curtain rod",2),priseTelephonique:ye(8,1,8,"Sheep","French telephone plug",2),rampe:ye(200,11.7,85.2,"Geantick","Handrail",2),tableauMulet:ye(32,.4,21.2,"Sleipnir1","Picture mule",2),tableauVisage:ye(21.3,.6,30,"Sleipnir1","Picture portrait",2),tableauVisage2:ye(33.2,.2,33.1,"Sleipnir1","Picture portrait",2),tableauVisage3:ye(26.6,.4,35,"Sleipnir1","Picture portrait",2),tableauYing:ye(37,.5,42.9,"Sleipnir1","Picture Ying",2),prise:ye(8,1.6,8,"Sheep","Plug",2),railing1:ye(162.7,11.3,62,"Pencilart","Railing",2),roundedEdgesRailing:ye(80,9.3,62,"Pencilart","Rounded edges railing",2),roundedEdgesRailing1:ye(83.7,9.7,62,"Pencilart","Rounded edges railing",2),scie:ye(11.9,45,1.8,"Geantick","Saw",2),rampeArcCercle:ye(176.3,101.1,85.2,"Geantick","Semicircle handrail",2),interrupteur:ye(8,1.4,8,"Sheep","Switch",2),tableauElectrique:ye(25,10.6,25,"Sheep","Switchboard",2),horlogeUbuntu:ye(38.3,7.7,38.5,"Sleipnir1","Ubuntu clock",2),venetianBlind:ye(90,9,60,"Geantick","Venetian blind",2),etau:ye(12.6,20,13.3,"Geantick","Vise",2),portemanteaux:ye(79.4,79.3,184.8,"Sheep","Hat and coat stand",2),arch:ye(100,16,65,"Robert Pastierovic","Arch",2),AntelopeCanyonFrame:ye(50.1,1.6,88,"Emmanuel Puybaret","Frame Antelope Canyon",2),EiffelTowerFrame:ye(67,1.6,47.9,"Emmanuel Puybaret","Frame Eiffel Tower",2),InariFrame:ye(48,1.6,67.9,"Emmanuel Puybaret","Frame Inari",2),MontBlancFrame:ye(94.5,1.6,47.9,"Emmanuel Puybaret","Frame Mont Blanc",2),lightSwitch:ye(7.1,2,11.2,"Pencilart","Light switch",2),smallWroughtIronRails:ye(117.9,10.6,110,"Pencilart","Small wrought iron rails",2),wroughtIronRails:ye(186.8,10.6,110,"Pencilart","Wrought iron rails",2),pavesDeVerre:ye(21,5,188,"Snduc","Glass blocks",2),pile:ye(1.4,5,1.4,"Snduc","Battery",2),polygonalRoof:ye(501,150,150,"Pencilart","Polygonal roof",2),toitureArdoiseRouge:ye(200,143,153,"Emmanuel Puybaret","Red slate roof",2),TorontoOntarioPlaceFrame:ye(61.1,1.6,47.9,"Emmanuel Puybaret","Frame Toronto Ontario Place",2),TigerFrame:ye(62.8,1.6,47.9,"Emmanuel Puybaret","Frame Tiger",2),NiagaraFallsFrame:ye(80.9,1.6,47.9,"Emmanuel Puybaret","Frame Niagara Falls",2),VeniceFrame:ye(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Venice",2),picture:ye(133.97,9.49,81.46,"Peter Smolik","Picture",2),guacal:ye(59.1,39.8,19.7,"Arturo Matheus","Crate",2),LakeMoraineFrame:ye(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Lake Moraine",2),SquirrelFrame:ye(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Squirrel",2),StatueOfLibertyFrame:ye(50.1,1.6,88,"Emmanuel Puybaret","Frame Statue Of Liberty",2),VaticanMuseumFrame:ye(61.2,1.6,47.9,"Emmanuel Puybaret","Frame Vatican Museum",2),EtretatFrame:ye(67,1.6,47.9,"Emmanuel Puybaret","Frame Etretat",2),ColoredFountainFrame:ye(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Colored Fountain",2),HorseShoeBendFrame:ye(61.2,1.6,47.9,"Emmanuel Puybaret","Frame Horse Shoe Bend",2),TucanFrame:ye(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Tucan",2),YosemiteFrame:ye(73.5,1.6,47.8,"Emmanuel Puybaret","Frame Yosemite",2),WaterLilyFrame:ye(67,1.6,47.9,"Emmanuel Puybaret","Frame Water Lily",2),ruffledVase:ye(26.7,28.7,38,"Pencilart","Ruffled vase",2),radiator_7section:ye(68.3,19,91,"Russian","Radiator",2),bd:ye(21.44196,29.8,.7,"Toomy","Comics book",2),livreJava:ye(21,23.9,2.55,"Emmanuel Puybaret","Book Java 7",2),sh3dMag:ye(21,29.7,.3,"Toomy","Magazine",2),SweetHome3DKompakt:ye(14.5,20.6,1.3,"Emmanuel Puybaret","Book Sweet Home 3D kompakt",2),enceinteColonne:ye(22,29.62183,91.00232,"Ga\ufffdl Bettinelli","Speaker",2),AtorArriere:ye(60.2,56.1,117.2,"Ga\ufffdl Bettinelli","Stove",2),bathroom_fan:ye(20,33,20,"Ola-Kristian Hoff","Fan",2),frame_horizontal:ye(155,10,130,"Ola-Kristian Hoff & Annick","Horizontal frame",2),frame_vertical:ye(127.5,7.5,155,"Ola-Kristian Hoff & Annick","Vertical frame",2),frame3HorizontalMomijiPhotos:ye(25.4,3,52.5,"Emmanuel Puybaret","Frame momiji photos",2),frame3VerticalTowerPhotos:ye(52.5,3,25.4,"Emmanuel Puybaret","Frame Towers",2),ladder_simple:ye(56,86.6,283.2,"Ola-Kristian Hoff","Ladder",2),ladder_water:ye(44,85,225,"Ola-Kristian Hoff","Ladder",2),plastic_storage_box:ye(58,41,19.5,"Ola-Kristian Hoff","Plastic storage box",2),sauna_120x120:ye(120,131.6,198,"Ola-Kristian Hoff","Sauna",2),vent_round:ye(22,30,24,"Ola-Kristian Hoff","Round vent",2),staircase_handrail_hor:ye(94,3,87.8,"Ola-Kristian Hoff","Handrail",2),metalBeam:ye(200,20,20,"Emmanuel Puybaret","Metal beam",2),pwdRamp:ye(75.6,118.7,19.5,"Emmanuel Puybaret","PWD ramp",2),"iron-railing-02":ye(112,13.6,70,"Kator Legaz","Iron railing",2),"recycling-bin":ye(36.1,27,25.49968,"Kator Legaz","Recycling bin",2),"tape-measure":ye(14.58,1.8,5,"Kator Legaz","Tape measure",2),"trunk-large":ye(100,50.8,34.4,"Kator Legaz","Trunck",2),newspaper:ye(26.8,24.1,2,"Kator Legaz","Newspaper",2),vase1:ye(22.7,22.7,30,"Scopia","Vase",2),vase2:ye(27.2,27.2,30,"Scopia","Vase",2),vase5:ye(32.6,31.2,87.4,"Scopia","Vase",2),frame2:ye(14.5,14.5,19.9,"Scopia & eTeks","Frame H\ufffdi An",2),basic_camera:ye(9.7,2.3,6,"Scopia","Camera",2),electric_water_heater_big:ye(45.6,45.9,100.8,"Scopia","Electric water heater",2),mp3_base_for_ipad:ye(26.3,16.3,13.5,"Scopia","MP3 base",2),stereo_amplifier:ye(45.4,38.8,16.8,"Scopia","Stereo amplifier",2),"open-cardboard-box":ye(81.5,62.5,43.7,"Scopia","Open cardboard box",2),"step-ladder-wood":ye(45.5,74.5,82.7,"Scopia","Small step ladder",2),"wall-hanger":ye(45,6.1,7.9,"Scopia","Wall hanger",2),"iron-railing-separated-hooks-1":ye(165,11,80,"Scopia","Iron railing",2),"iron-railing-separated-hooks-3":ye(113,13.4,70,"Scopia","Iron railing",2),"scie-egoine":ye(61.56,17.3,2,"Scopia","Saw",2),"rouleau-de-ruban-adhesif":ye(15.1,3.4,12.7,"Scopia","Tape",2),pelle:ye(22.2,99,10,"Scopia","Shovel",2),cone:ye(37.9,37.9,70,"Scopia","Cone",2),"perceuse-electrique":ye(6.9,27,25.9,"Scopia","Drill",2),"meuleuse-electrique":ye(31.1,51.3,12.6,"Scopia","Grinder",2),"billet-10-euros":ye(12.7,6.7,.1,"Scopia","Bill 10\\u20ac",2),"billet-20-euros":ye(13.3,7.2,.1,"Scopia","Bill 20\\u20ac",2),"billet-50-euros":ye(14,7.7,.1,"Scopia","Bill 50\\u20ac",2),"rounded-antenna":ye(8.5,.7,8.5,"Scopia","Rounded antenna plug",2),"rounded-dimmer":ye(8.5,1.7,8.5,"Scopia","Rounded dimmer switch",2),"rounded-double-switch":ye(8.5,1.2,8.5,"Scopia","Rounded double switch",2),"rounded-plug-TypeA":ye(8.5,.7,8.5,"Scopia","Rounded type A plug",2),"rounded-plug-TypeB":ye(8.5,.7,8.5,"Scopia","Rounded type B plug",2),"rounded-plug-TypeCFlat":ye(8.5,.7,8.5,"Scopia","Rounded type C plug",2),"rounded-plug-TypeE":ye(8.5,.7,8.5,"Scopia","Rounded type E plug",2),"rounded-plug-TypeG":ye(8.5,.7,8.5,"Scopia","Rounded type G plug",2),"rounded-RJ-45":ye(8.5,.7,8.5,"Scopia","Rounded RJ45 plug",2),"rounded-switch":ye(8.5,1.2,8.5,"Scopia","Rounded switch",2),"square-antenna":ye(8.5,.6,8.5,"Scopia","Square antenna plug",2),"square-dimmer":ye(8.5,1.6,8.5,"Scopia","Square dimmer switch",2),"square-plug-TypeA":ye(8.5,.7,8.5,"Scopia","Square type A plug",2),"square-plug-TypeCFlat":ye(8.5,.7,8.5,"Scopia","Square type C plug",2),"square-plug-TypeG":ye(8.5,.6,8.5,"Scopia","Square type G plug",2),"square-RJ-45":ye(8.5,.6,8.5,"Scopia","Square RJ45 plug",2),"antenna-whites":ye(8.5,.6,8.5,"Scopia","Wall antenna plug",2),"dimmer-whites":ye(8.5,1.7,8.5,"Scopia","Wall dimmer switch",2),"plug-TypeA-whites":ye(8.5,.7,8.5,"Scopia","Wall type A plug",2),"plug-TypeCFlat-whites":ye(8.5,.7,8.5,"Scopia","Wall type C plug",2),"plug-TypeG-whites":ye(8.5,.6,8.5,"Scopia","Wall type G plug",2),"RJ-45-whites":ye(8.5,.6,8.5,"Scopia","Wall RJ45 plug",2),chimney:ye(67.3,67.3,118.1,"Scopia","Chimney",2),"round-chimney":ye(36.6,36.5,99.7,"Scopia","Round chimney",2),"pince-coupante":ye(60,17.5,3,"Scopia","Cutting pliers",2),parpaing:ye(50,19.5,20,"Scopia","Cinder block",2),cageALapin:ye(102.5,57.6,46.1,"Scopia","Rabbit cage",2),roueAvecJante:ye(18.1,58.6,58.6,"Scopia","Wheel",2),newspapersPile:ye(30.1,23.6,7.7,"Scopia","Newspapers pile",2),openedNewspaper:ye(58.3,40.2,.92,"Scopia","Opened newspaper",2),safeOnFeet:ye(46,46.1,71.7,"Scopia","Safe on feet",2),"fil-electrique-1m":ye(100.135,.3,.3,"Scopia","Electric wire 1m",2),pileRevues:ye(21.5,28.6,3.4,"Scopia","Magazines pile",2),walker:ye(66.6,44,83.4,"Scopia","Walker",2)},We={angolo160W:ye(45,45,160,"LucaPresidente","Angle shelf",2),angolo198W:ye(45,45,198,"LucaPresidente","Angle shelf",2),angolo80W:ye(45,45,80,"LucaPresidente","Angle shelf",2),office_furniture1:ye(299.5,54.5,150,"Scopia","Bookcase",2),mobile45160W:ye(45,48.8,160,"LucaPresidente","Bookcase 45x160",2),mobile45198W:ye(45,48.8,190,"LucaPresidente","Bookcase 45x198",2),mobile4580W:ye(45,48.8,80,"LucaPresidente","Bookcase 45x80",2),office_box:ye(212,53.5,174.9,"Scopia","Box",2),chair2:ye(57.9,60.9,90.2,"Peter Smolik","Chair",2),office_chair:ye(63.5,63.7,100,"Scopia","Office chair",2),chair_office_y:ye(48,49.5,87,"Ola-Kristian Hoff","Chair",2),pcstul:ye(136.3,93.1,144.3,"Jarda Benkowsky","Computer desk",2),lbDesk:ye(160,80,72.3,"Wiresoulstudio","Desk",2),office_desk:ye(160,80,72,"Ola-Kristian Hoff","Desk",2),bureauInfoOuvert:ye(77.9,85.9,76.4,"Ga\xebl Bettinelli","Desk2",2),bureau3:ye(120,59,72.5,"Ga\xebl Bettinelli","Desk1",2),cassettieraW:ye(42,53.8,53.5,"LucaPresidente","Drawer unit on casters",2),dustbin:ye(23.3,23.3,35,"Ndakasha","Dustbin",1),inkjet_and_scanner_printer:ye(44.6,33.2,18.9,"Scopia","Inkjet printer and scanner",1),penbox:ye(7.3,8.3,17,"Scopia","Penbox",1),pencil1:ye(1,13.5,.7,"Scopia","Pencil",1),phone:ye(19.7,21.9,7.3,"Scopia","Phone",1),imprimanteFaxPhotocopieur:ye(105.8,69.5,110,"Cristophe Tellerain","Photocopier printer",2),water_cooler:ye(27.4,31.8,132.2,"Scopia","Water cooler",2),whiteBoard:ye(124.7,55.1,129,"Redsymbzone","White board",2),wooden_office_pear_table:ye(160,120,75.4,"Scopia","Wooden table",2),lamp_office:ye(16,50,47,"Ola-Kristian Hoff","Desk lamp",1),tourPC:ye(12,24,25,"Carvalho","Desktop computer",1),workLamp:ye(16,50,47,"eTeks","Work Desk lamp",1),souris:ye(6,10.1,2.4,"Geantick","Mouse",1),desk:ye(140,67.8,77,"eTeks","Desk",2),cissors_swap:ye(13.7,6.9,1.5,"Celticluis","Scissors",2),ruler:ye(31.2,3.4,.17,"Doujon","Ruler",2),technicalTable1:ye(214.7,118.8,95,"Redsymbzone","Technical table",2),technicalTable2:ye(136.6,171.4,101.3,"Redsymbzone","Technical table",2),textMarker:ye(3.1,10.3,1.7,"Mothome","Text marker",2),kalender:ye(12,7.9,10.8,"Teguh9384","Calendar",2),biurko3:ye(120.1,60.2,72,"Hilux","Desk",2),"sef-kasa":ye(50,54.7,50,"Bocko","Safe",2),simpleDesk:ye(140.1,81.1,72,"SirOccor","Desk",2),officeTable:ye(189.2,83.4,75.1,"Nmn9","Desk",2),classSeat:ye(62.5,67.7,80,"Ericblender7","Class seat",2),armChair2:ye(97.8,82.1,88.5,"TreyClaine","Armchair",2),bureauInformatique:ye(117.1,60,86.7,"Infernal-quack","Computer desk",2),clavier:ye(42.5,13.9,2.1,"Geantick","Keyboard",2),bigCornerDesk:ye(199.6,167.3,140,"Pencilart","Corner desk",2),plantersDesk:ye(76,66,160,"Pencilart","Planters desk",2),stylo:ye(.8,15,.8,"Snduc","Pen",2),secretarysDesk:ye(106.7,79.8,150,"Pencilart","Secretary's desk",2),desk2:ye(180,163,72,"Peter Smolik","Desk",2),officeChair:ye(62.62,59.67,87.34,"Peter Smolik","Office chair",2),officeChair2:ye(62.88,68.8,101.5,"Peter Smolik","Office chair",2),officeChair3:ye(55.88,56.35,107,"Peter Smolik","Office chair",2),escritorio:ye(140,59.1,75.8,"Migdalia Lopez","PC table",2),bureauEcolier:ye(88.5,56.1,90,"Fabrice Delobe","School desk",2),invoice:ye(21,29.7,.49,"Emmanuel Puybaret","Invoice",2),bureauInfoClair:ye(77.9,54.6,76.4,"Ga\ufffdl Bettinelli","Desk",2),chair_office_x:ye(52,51,87,"Ola-Kristian Hoff","Armchair",2),scissors:ye(4.4,12,.6,"alaX","Scissors",2),"office-chair":ye(64.3,64.3,91,"Kator Legaz","Chair",2),"custom-desk":ye(235.1,83.8,180,"Kator Legaz","Desk",2),"filing-cabinet":ye(38.6,52.6,60,"Kator Legaz","Filing cabinet",2),stapler:ye(2.9,11.6,3.5,"Kator Legaz","Stapler",2),raccordo80W:ye(80,80,72,"LucaPresidente","Desk extension",2),scrivania160W:ye(160,80,72,"LucaPresidente","Desk",2),mobile90160W:ye(90,48.74561,160,"LucaPresidente","Bookcase 90x160",2),mobile90198W:ye(90,48.75,198,"LucaPresidente","Bookcase 90x198",2),mobile9080W:ye(90,48.75,80,"LucaPresidente","Bookcase 90x80",2),kids_desk_chair:ye(53.4,51.9,88.3,"Scopia","Chair",2),kids_desk_table:ye(112,60.5,74.6,"Scopia","Desk table",2),kids_wooden_desk:ye(100.4,61.8,74.6,"Scopia","Wooden desk",2),wooden_office_alder_table:ye(161.5,94.2,75.4,"Scopia","Wooden alder table",2),wooden_office_pear_table_rect:ye(160,80,75.4,"Scopia","Wooden table",2),wooden_office_teak_table:ye(160,120,75.4,"Scopia","Wooden teak table",2),bandeja:ye(26.9,37.8,6.5,"Scopia","Letter tray",2),pencil2:ye(.8,14,.6,"Scopia","Pencil",2)},Ne={staircase_90_bottom:ye(100,330,352.2,"Ola-Kristian Hoff","Bottom winder staircase",2),staircase_180_long:ye(100,330,353.1,"Ola-Kristian Hoff","Double winder staircase",2),escalator:ye(129.1,882.2,424.8,"Scopia","Escalator",2),staircase_180_landing:ye(200,260,349,"Ola-Kristian Hoff","Half landing staircase",2),staircase_90_landing:ye(225,228.3,347.8,"Ola-Kristian Hoff","Quarter landing staircase",2),stairs_90_closed_legal_high:ye(166,300,362.8,"Ola-Kristian Hoff","Quarter landing staircase",2),stairs_rail:ye(329.8,6,234.5,"Ola-Kristian Hoff","Stairs rail",1),stairs_180_circular_notopstep_rail:ye(600,301,355,"Ola-Kristian Hoff","Semiciruclar staircase",2),staircase_360_circle:ye(230,230,353.4,"Ola-Kristian Hoff","Spiral staircase",2),stairs_180_square:ye(200,100,335.6,"Ola-Kristian Hoff","Square spiral staircase",2),stair_ladder_loft:ye(58,114,262,"Ola-Kristian Hoff","Staircase ladder",2),staircase_samba_265x150x85:ye(85,150,262,"Ola-Kristian Hoff","Staircase samba",2),stair_straight_open_stringer:ye(80,334.3,350.2,"Ola-Kristian Hoff","Staircase with open stringer",2),staircase_ladder_steep:ye(94.4,167.1,356.7,"Ola-Kristian Hoff","Steep staircase",2),staircase_90_top:ye(100,330,353.1,"Ola-Kristian Hoff","Top winder staircase",2),staircase_270_box:ye(225,225,341.4,"Ola-Kristian Hoff","Triple winder staircase",2),staircase_u2h:ye(338,176,342.5,"Ola-Kristian Hoff","Triple winder staircase",2),curveStaircase:ye(72,238,362.4,"eTeks","Curve staircase",1),spiralStaircase:ye(140,140,362,"eTeks","Spiral staircase",1),staircase:ye(72,222,362.4,"eTeks","Staircase",1),grandStaircaseDark:ye(507.6,288.1,400,"Pencilart","Grand staircase",2),escalierColimacon2:ye(201.3,216.4,356.5,"Geantick","Spiral staircase",2),outdoor_staircase:ye(128,282,205.5,"DaniFeri","Outdoor staircase",2),stairs_topcurve_90:ye(200,401,358.6,"Ola-Kristian Hoff","Staircase curved at top",2),staircase_90_high_open:ye(179,254,358.8,"Ola-Kristian Hoff","Winder staircase",2),staircase_straight:ye(90,341.7,349.8,"Ola-Kristian Hoff","Straight staircase",2),stairs_legal:ye(90,307.8,355.9,"Ola-Kristian Hoff","Straight staircase",2),stairs_spiral:ye(200,200,358.1,"Ola-Kristian Hoff","Spiral staircase",2),quarterSlope:ye(800,800,151,"Emmanuel Puybaret","Quarter slope",2),"home-lift":ye(101.6,73.6,512,"Scopia","Home lift",2),"stair-lift-rail":ye(539.9,11.4,20.4,"Scopia","Stair lift rail",2),"stair-lift":ye(59.8,54.4,83.9,"Scopia","Stair lift",2)},Ve={"4x4":ye(186.4,381.6,194.3,"Scopia","4x4",2),bicycle:ye(46,149.2,84.3,"Scopia","Bicycle",2),bus:ye(279.5,1404.3,366.7,"Scopia","Bus",2),caravane:ye(211.9,547,236.3,"Scopia","Caravan",2),cityBus:ye(303.1,1219.2,302,"Scopia","City bus",2),decapotable:ye(210.4,459.2,141.2,"Scopia","Convertible",2),locomotive:ye(247.3,1500.2,647.2,"Scopia","Locomotive",2),monospace:ye(212.7,467.2,179,"Scopia","Minivan",2),pickup:ye(215.2,524.3,180.8,"Scopia","Pickup",2),renaultKangoo:ye(203.4,403.4,177,"Scopia","Renault Kangoo",2),"renault-scenic":ye(212.7,426.2,196.2,"Scopia","Renault Scenic",2),scooter:ye(34,86.4,88,"Scopia","Scooter",2),scooter2:ye(76.4,173.1,120.8,"Scopia","Scooter",2),seat_leon:ye(192.4,419.5,146,"Scopia","Seat Leon",2),"smart-car":ye(170.8,252.8,154.6,"Scopia","Smart car",2),sportive:ye(210.2,447.8,128,"Scopia","Sports car",2),break:ye(200.4,457.3,155.4,"Scopia","Station wagon",2),stroller:ye(48,81.2,99.2,"Scopia","Stroller",2),remorque:ye(180.2,313.4,102.4,"Scopia","Trailer",2),tramway:ye(250.4,3000.8,481.6,"Scopia","Tramway",2),truck:ye(271.8,630,340,"Scopia","Truck",2),dafTruck:ye(305.8,1653.6,400.5,"Kartoffelphantom","DAF truck",2),van:ye(240.5,595.8,256.5,"Scopia","Van",2),wagon:ye(215.5,1500,412.4,"Scopia","Wagon",2),forkLift:ye(351.4,130.1,215.7,"TheGIWI","Fork lift",2),peterbilt:ye(287.2,2104.9,403,"Thomaswornall","Truck",2),bike:ye(40.7,116.3,76.5,"Rodrigoalves123","Bike",2),fordFocus:ye(204.5,435.8,155.1,"Ruff","Ford Focus",2),peugeot103:ye(56.7,170,96.5,"Sleipnir1","Peugeot 103",2),"concept-sedan-01v2":ye(184.9,455.9,155,"Kator Legaz","Concept Sedan 01",2),"concept-sedan-02":ye(210.7,439.8,150,"Kator Legaz","Concept Sedan 02",2),"concept-sedan-02-sport":ye(210.7,424.9,150,"Kator Legaz","Concept Sedan 02 Sport",2),"VW-new-beetle":ye(193.6,409.1,154.5,"Kator Legaz","VW new beetle",2),"concept-sedan-01v1":ye(191.1,471.1,155,"Kator Legaz","Concept Sedan 01",2),"peugeot-308":ye(210,444,138.9,"Scopia","Peugeot 308 CC",2),"yamaha-yzr-r6":ye(79.6,203.1,114.8,"Scopia","Yamaha YZR R6",2),tricycle:ye(37.4,60,43.4,"Scopia","Tricycle",2),suv:ye(209.1,463.1,162.7,"Scopia","SUV",2),chevrolet:ye(210.15,445.7,121.1,"Scopia","Chevrolet",2),skateboard:ye(20,80.2,10.4,"Scopia","Skateboard",2),suv2:ye(209.2,427.2,176.2,"Scopia","SUV",2),carSegmentA:ye(170.8,274.2,154.6,"Scopia","Small car",2),carSegmentB:ye(184.4,393.9,141.3,"Scopia","City car",2)},Ee={window:{title:"Windows",models:ie,details:Se},door:{title:"Doors",models:oe,details:ve},light:{title:"Lights",models:ne,details:De},fan:{title:"Fans",models:["ceilingFan"],details:ke},cover:{title:"Covers",models:["window-blinds","cover_outdoor1","storeCalifornien","curtain","blind","curtains"],details:Fe},presence:{title:"Presence",models:["man","mannequinMale","boyStanding","male03","male01","male02","holdingMale01","mannequinBrunette","female01","female02","female03","girlStanding","holdingFemale01","holdingFemale02","holdingFemale03","nourrison","boySitting","sitMale01","sitMale02","sitMale03","sitFemale03","girlSittingTable","sitFemale02","girlSittingGround","boyLying","lyingDownMale02","lyingDownMale01","lyingDownFemale01","dog","cat","siameseCat","rabbit","horse2","chicken","bulldog","horse","female-01-casual-clothing","male-01-suit","sitFemale01","fille","boy"],details:Me},camera:{title:"Camera",models:["CCTV","surveillanceCamera"],details:Re},screen:{title:"Screen",models:["wall-flat-tv","curvedTVForTable","curvedWallOLEDTV","flatTV","tvUnit","led_tv","ecran16_9","TVCenter","tv","contemp_living_room","laptop","monitorLCD","portable","apple-ibook-2001","apple-imac-1998","apple_pc","iphone","mobile","tablet","intercom_with_screen","thermometer","appleIpod"],details:Le},livingRoom:{title:"Living room",models:he,details:Oe,isFurnitureCategory:!0},kitchen:{title:"Kitchen",models:le,details:Pe,isFurnitureCategory:!0},bedroom:{title:"Bedroom",models:ae,details:je,isFurnitureCategory:!0},office:{title:"Office",models:de,details:We,isFurnitureCategory:!0},bathroom:{title:"Bathroom",models:se,details:Te,isFurnitureCategory:!0},staircase:{title:"Staircase",models:pe,details:Ne,isFurnitureCategory:!0},exterior:{title:"Exterior",models:re,details:Ie,isFurnitureCategory:!0},other:{title:"Other",models:ce,details:Be,isFurnitureCategory:!0},vehicles:{title:"Vehicles",models:me,details:Ve,isFurnitureCategory:!0},airCondition:{title:"Air condition",models:["internal-unity-air-conditioning"],details:Ae,isHVACCategory:!0}},He={seat_leon:{width:231,height:504},"smart-car":{width:205,height:304},sportive:{width:253,height:538},break:{width:241,height:549},decapotable:{width:253,height:551},monospace:{width:256,height:561},"renault-scenic":{width:256,height:512},pickup:{width:259,height:630},"4x4":{width:224,height:458},renaultKangoo:{width:245,height:485},van:{width:289,height:715},truck:{width:327,height:756},dafTruck:{width:367,height:1985},scooter:{width:41,height:104},bicycle:{width:56,height:180},scooter2:{width:92,height:208},remorque:{width:217,height:377},caravane:{width:255,height:657},stroller:{width:58,height:98},bus:{width:336,height:1686},cityBus:{width:364,height:1463},tramway:{width:301,height:3601},locomotive:{width:297,height:1801},wagon:{width:259,height:1800},washbasin_jay_hardy:{width:72,height:52},bathroom3:{width:87,height:49},"hand-washbasin":{width:59,height:36},"stone-washbasin":{width:65,height:55},"ergonomic-washbasin":{width:72,height:56},bathroom_vanity:{width:129,height:47},modernVanity:{width:109,height:85},bathroom_sink:{width:147,height:66},mobilettoLavaboWenge:{width:98,height:51},wash_basin_corner:{width:60,height:60},islandBath:{width:204,height:113},bathtub_jet_system:{width:192,height:84},corner_bathtub:{width:192,height:192},"mixer-tap-for-shower":{width:35,height:42},shower:{width:25,height:65},doccia:{width:84,height:84},shower_cabin:{width:108,height:108},"shower-cabin-with-seat":{width:121,height:205},toilet_hang_round:{width:46,height:68},"japanese-toilet":{width:64,height:101},"small-urinal":{width:41,height:33},bidet:{width:48,height:65},towel2:{width:27,height:17},com_bath3:{width:72,height:21},towel3:{width:72,height:10},showerCurtain:{width:109,height:36},barreAppuiCoude:{width:93,height:14},"folding-grab-bar":{width:9,height:75},savon:{width:9,height:7},com_bath2_jabon_pijo:{width:7,height:7},potBrossesADent:{width:9,height:11},secheCheveux:{width:19,height:19},potty:{width:37,height:37},toiletBrush:{width:12,height:16},"bathroom-tissue":{width:26,height:21},pesePersonne:{width:34,height:39},basin:{width:93,height:79},bathmat:{width:88,height:57},"clothes-basket":{width:65,height:65},clothes_line:{width:600,height:18},clothes_washing_machine:{width:71,height:73},dryer_machine:{width:71,height:75},fer:{width:17,height:16},plancheARepasser:{width:66,height:165},bedFlowers:{width:243,height:274},"air-mattress":{width:84,height:219},bed3:{width:243,height:274},bed1:{width:205,height:260},bedWithTexture:{width:238,height:272},"captains-bed":{width:118,height:252},juniorBed:{width:127,height:238},"convertible-sofa-BZ-opened":{width:190,height:229},bunkBed:{width:136,height:246},litMezzanine2:{width:356,height:222},"mezzanine-bed":{width:147,height:311},crib:{width:88,height:150},"adjustable-hospital-bed":{width:120,height:252},armoireLotus:{width:216,height:81},mobileCiliegio:{width:120,height:60},mobileangoloCiliegio:{width:105,height:104},mobileAngoloInterno:{width:126,height:126},mobileAzzurro:{width:120,height:69},corner:{width:63,height:63},wardrobe2:{width:209,height:72},"changing-table":{width:148,height:58},chest:{width:173,height:65},kommode:{width:115,height:51},bedsideTable:{width:60,height:50},bedsideTable2:{width:59,height:58},comoCiliegio:{width:192,height:72},"clothes-rack":{width:135,height:43},mensolaCurvaAcero:{width:48,height:48},pensileAcero:{width:48,height:30},folded_clothes:{width:32,height:49},futon:{width:171,height:254},"hanging-clothes1":{width:39,height:71},casque:{width:32,height:46},"hospital-table-on-wheels":{width:92,height:55},hotelSafe:{width:53,height:48},sleepingBag:{width:106,height:240},bootieSeparated:{width:26,height:33},slippersSeparated:{width:29,height:34},sneakersSeparated:{width:29,height:37},mocassinSeparated:{width:27,height:34},womanShoesSeparated:{width:23,height:30},blocks:{width:72,height:60},doll:{width:18,height:15},"doll-house":{width:83,height:39},smiley:{width:17,height:17},teddyBear:{width:40,height:27},train:{width:143,height:117},letters:{width:49,height:16},housePuzzle:{width:19,height:19},rubix2:{width:7,height:7},awning_bracket:{width:372,height:204},barbecue:{width:48,height:59},basketball_net_and_board:{width:131,height:74},barnum:{width:361,height:361},campingLamp:{width:19,height:19},campingTent:{width:298,height:284},deckChair:{width:86,height:151},"diving-board":{width:51,height:220},"dog-house":{width:86,height:108},"entry-bell-ring":{width:5,height:3},"entry-bell-speech-unit":{width:13,height:3},privacyFence2:{width:120,height:18},fence_grid:{width:240,height:6},fence_picket:{width:102,height:8},"football-goal":{width:183,height:107},"big-football-goal":{width:879,height:217},waterFountain:{width:62,height:62},fountain:{width:222,height:222},"garden-hut":{width:206,height:219},gate_grind:{width:230,height:14},greenhouse:{width:372,height:372},grillNgauge:{width:216,height:84},hammock:{width:421,height:198},hangingUmbrella:{width:288,height:357},jacuzzi:{width:274,height:274},boiteALettre:{width:38,height:36},motorbike:{width:110,height:40},"painted-bench":{width:172,height:63},"passage-pieton":{width:480,height:900},pedestrianRailing1:{width:250,height:6},pedestrianRailing2:{width:240,height:6},pergola:{width:288,height:307},picnic_table:{width:217,height:175},pool_ladder:{width:60,height:60},"porch-column-03":{width:40,height:40},rainGutterPart1:{width:240,height:15},rainGutterPart2:{width:12,height:110},rattanArmchair:{width:86,height:87},rattanSofa:{width:155,height:87},rattanTable:{width:144,height:72},"round-swimming-pool":{width:198,height:198},sandpit:{width:157,height:145},bonecoDeNeve:{width:113,height:86},solar_panel_140W:{width:150,height:81},stoneLantern:{width:42,height:42},"swimming-pool":{width:2057,height:1198},ext_table:{width:243,height:186},silla_teca:{width:70,height:81},"feu-de-signalisation-simple":{width:45,height:64},trampoline:{width:360,height:360},umbrella:{width:268,height:268},wheelie_bin:{width:72,height:75},outdoorLamp:{width:26,height:26},window_flat_roof_skylight_bubble:{width:120,height:120},"external-unity-air-conditioning":{width:93,height:35},column_balustrade:{width:36,height:30},column_balustrade_corner:{width:66,height:66},birch:{width:473,height:450},bush:{width:182,height:173},"cafe-chair":{width:60,height:63},"cafe-table":{width:90,height:90},child_swing:{width:196,height:193},parque:{width:489,height:116},croisement2et2:{width:1254,height:1254},routeCourbe2VoiesAvecTrottoirs90Deg:{width:1254,height:1254},route2VoiesAvecTrottoirs:{width:1560,height:1254},voiesFerreesAiguillage:{width:2408,height:832},voiesFerreesCourbe20m:{width:2442,height:832},voiesFerreesDroit10m:{width:1200,height:528},hedgeTextured:{width:186,height:72},"lavender-bush":{width:99,height:99},palm:{width:636,height:657},pansy:{width:37,height:37},tree:{width:720,height:768},lombardyPoplar:{width:244,height:231},pine:{width:408,height:384},plantie:{width:83,height:34},rock1:{width:61,height:41},rock2:{width:83,height:65},rock3:{width:83,height:51},"roses-bush":{width:48,height:55},kitchenUpperCabinet:{width:132,height:39},kitchenSmallUpperCabinet:{width:41,height:39},kitchenSmallLowerCabinet:{width:59,height:74},lowerCabinet:{width:72,height:74},lowerCornerCabinet:{width:98,height:99},drawersCabinet:{width:72,height:74},kitchenLowerCabinet:{width:118,height:74},kitchenIsland:{width:113,height:84},kitchenDrawersCabinet:{width:54,height:74},smallUpperCabinet:{width:72,height:50},upperCabinet:{width:72,height:50},highCabinet:{width:72,height:74},kitchenSink:{width:118,height:74},sinkCabinet2:{width:72,height:74},islandExtension:{width:72,height:149},meubleChaussures:{width:87,height:48},kitchenGlassDoorCabinet:{width:41,height:39},dishwasher:{width:54,height:72},refrigerator:{width:108,height:108},largeFridge:{width:111,height:97},rangeHood:{width:72,height:39},"chest-freezer":{width:156,height:103},stove1:{width:100,height:113},stove:{width:40,height:72},largeStove:{width:125,height:87},oven:{width:72,height:62},ovenFront:{width:72,height:9},hood:{width:122,height:48},kitchenHood:{width:72,height:62},"induction-cooker-2-zones":{width:36,height:63},"induction-cooker-4-zones":{width:68,height:60},mano_cooktop:{width:70,height:60},lavastoviglie:{width:72,height:76},doubleOven:{width:72,height:62},sgabello:{width:39,height:44},tabouretBar:{width:62,height:54},stool2:{width:44,height:44},baby_high_chair:{width:72,height:78},boiler:{width:22,height:20},bouilloire:{width:21,height:25},toaster:{width:33,height:19},coffeeBrewer:{width:17,height:47},percolateur:{width:25,height:37},"coffee-maker":{width:23,height:35},cooker:{width:35,height:48},electronicScale:{width:18,height:27},autocuiseur:{width:31,height:27},sandwichMaker:{width:29,height:31},"small-oven":{width:68,height:57},spiceTower:{width:20,height:20},saltShaker:{width:5,height:5},grillePain:{width:42,height:15},towel:{width:18,height:17},poubelleInox:{width:35,height:42},tray:{width:47,height:36},kitchenKnife:{width:5,height:32},kitchenKnifeStandSet:{width:11,height:33},poele:{width:31,height:52},casserole:{width:21,height:37},paperTowelHolder:{width:20,height:20},bolDeRiz:{width:18,height:18},"plate-and-ustensils":{width:33,height:41},"ensemble-assiette-couteau-fourchette-cuillere-verre":{width:51,height:47},"kitchen-glass-jar-high":{width:12,height:12},cocktailGlass:{width:10,height:10},glass:{width:9,height:9},"coffee-mug":{width:11,height:15},coffeePress:{width:20,height:13},choppingBoard:{width:46,height:32},baguettes:{width:2,height:26},bowl:{width:25,height:25},mamadeira:{width:6,height:6},utensilsPot:{width:15,height:14},aspirateur:{width:172,height:40},broom:{width:44,height:10},bucket:{width:36,height:34},eponge:{width:12,height:8},"food-box-pasta":{width:17,height:7},"food-box-corn-flakes":{width:23,height:11},tetrapak:{width:12,height:12},caffe_final:{width:12,height:12},butter:{width:20,height:9},cupcake:{width:8,height:8},birthday_cake:{width:29,height:29},bowlWithFruits:{width:39,height:41},bowlWithSalad:{width:30,height:30},bread:{width:8,height:29},apples:{width:31,height:31},baguettePain:{width:66,height:9},toast:{width:13,height:12},steak:{width:39,height:24},"roasted-chicken":{width:36,height:25},citrouille:{width:36,height:36},pizza:{width:36,height:36},hotDog:{width:26,height:9},hamburger:{width:14,height:14},frenchFries:{width:25,height:24},clear_sofa:{width:233,height:92},L_shaped_sofa:{width:281,height:173},couch2:{width:276,height:192},"futon-couch":{width:236,height:108},simple_sofa:{width:216,height:81},sofa1:{width:281,height:96},"convertible-sofa-BZ-closed":{width:172,height:123},clicClac:{width:219,height:112},dining_room:{width:307,height:44},cabinet2:{width:269,height:78},elementHautSalon:{width:63,height:52},meubleHiFiHaut:{width:188,height:50},stainlessSteelShelf:{width:94,height:34},shelves_storage_steel:{width:96,height:36},shelves_storage_wood:{width:94,height:38},dresserWithDrawers:{width:193,height:63},"full-bookcase":{width:108,height:42},tourRangeCD:{width:24,height:21},pinewoodRackLowHeight:{width:108,height:37},pinewoodRackMediumHeight:{width:108,height:37},longcase_clock:{width:60,height:36},rocking_chair:{width:78,height:96},fotel:{width:89,height:74},armchair3:{width:71,height:84},chair_granmother:{width:74,height:70},chair:{width:51,height:57},kitchenChair:{width:52,height:53},thonet:{width:66,height:70},chair3:{width:52,height:61},chair4:{width:59,height:54},white_kitchen_chair:{width:52,height:57},childChair:{width:46,height:48},children_chair:{width:34,height:34},foldingChair:{width:61,height:72},folding_chair:{width:59,height:62},chaiseOrange:{width:50,height:57},osakaChair:{width:57,height:63},ryokanChair:{width:64,height:71},stool_small:{width:36,height:36},green_stool:{width:52,height:52},pianoBench:{width:75,height:43},black_table:{width:205,height:108},"folding-table":{width:224,height:94},children_table:{width:76,height:58},coffee_table:{width:108,height:56},table_wood_and_iron:{width:146,height:92},couchTable:{width:122,height:85},"round-table":{width:132,height:132},"table-on-trestles":{width:192,height:80},white_kitchen_table:{width:132,height:85},table:{width:174,height:113},"table-with-leaning-feet":{width:180,height:78},tableCuisine2:{width:210,height:110},"glass-dining-table":{width:195,height:118},meubleHiFiBas:{width:125,height:54},table_half_round:{width:123,height:71},oakTable:{width:149,height:149},tableWithTablecloth:{width:97,height:98},"wall-flat-tv":{width:124,height:14},curvedTVForTable:{width:152,height:22},curvedWallOLEDTV:{width:182,height:16},dvd:{width:52,height:34},playstation4:{width:40,height:36},"ps4-joystick":{width:20,height:13},"tv-remote-control":{width:6,height:22},"video-projector":{width:57,height:46},wirelessOfficePhone3:{width:14,height:19},fireplace1:{width:139,height:43},fireplace2:{width:146,height:54},carpet:{width:192,height:270},puff:{width:110,height:102},"round-carpet":{width:96,height:96},desklamp:{width:30,height:30},JapaneseLantern:{width:19,height:19},lamp:{width:37,height:37},little_lamp2:{width:38,height:38},"MIDI-keyboard":{width:96,height:31},batterie:{width:126,height:112},"microphone-with-foot":{width:81,height:119},luckyBamboo:{width:19,height:18},"bonsai-tree":{width:54,height:46},"boston-fern":{width:78,height:74},cactus:{width:18,height:16},decorativePlant:{width:39,height:39},flowers:{width:26,height:20},mediumIndoorPlant:{width:87,height:92},orchids:{width:38,height:43},augalas:{width:74,height:42},maceta:{width:71,height:78},plant:{width:99,height:83},roses:{width:28,height:33},succulentPlant:{width:17,height:16},yuccaPlant:{width:130,height:123},christmas_tree:{width:154,height:156},abdominalBench:{width:81,height:232},"internal-unity-air-conditioning":{width:107,height:24},iphone:{width:7,height:14},backpack:{width:35,height:41},storeCalifornien:{width:241,height:20},livreAvecReliure:{width:22,height:14},book:{width:34,height:23},livres:{width:29,height:21},cageFuret:{width:95,height:60},"cardboard-box":{width:66,height:42},arbreAChat:{width:78,height:59},CCTV:{width:17,height:17},ceilingFan:{width:110,height:96},clock2:{width:36,height:4},"clothes-hanger":{width:52,height:2},"clothes-horse":{width:78,height:114},crate:{width:72,height:71},curtain:{width:132,height:6},curtains:{width:180,height:28},dart_game:{width:55,height:20},doormat:{width:72,height:36},electric_water_heater:{width:55,height:56},electricWheelchair:{width:67,height:107},emergencySign:{width:36,height:5},fence:{width:216,height:7},flipper:{width:87,height:160},foldedNewspaper:{width:36,height:25},"folding-armchair":{width:72,height:73},table_football:{width:181,height:150},ButterflyFrame:{width:59,height:2},frame:{width:60,height:3},frame1:{width:18,height:18},frame3HorizontalNorwayPhotos:{width:31,height:4},frame3VerticalSummerPhotos:{width:63,height:4},HaiVanPassFrame:{width:93,height:2},furnace:{width:81,height:118},gaz_water_heater:{width:49,height:42},gift:{width:28,height:22},glasses:{width:18,height:18},barreAppui:{width:70,height:14},marteau:{width:42,height:16},cendrier:{width:15,height:15},headphones:{width:23,height:10},"indoor-bike":{width:87,height:122},intercom:{width:12,height:7},intercom_with_screen:{width:23,height:8},"iron-railing-separated-hooks-2":{width:162,height:14},keys:{width:14,height:14},litiere:{width:35,height:61},lockedLocker:{width:24,height:27},revue:{width:24,height:34},mini_stereo:{width:59,height:26},mirror:{width:48,height:1},mobile:{width:6,height:14},mower:{width:62,height:116},bdOuverte:{width:51,height:36},revueOuverte:{width:48,height:34},ovalMirror:{width:66,height:2},pallet:{width:144,height:145},poolTable:{width:308,height:168},"punching-ball":{width:56,height:56},wheelchairSymbol:{width:179,height:179},radiator3:{width:67,height:25},gardeCorps:{width:168,height:8},railing_glass:{width:186,height:6},rectangularMirror:{width:60,height:2},reflex_camera:{width:15,height:18},japanese_style_screen:{width:214,height:19},tournevis:{width:31,height:4},sewing_machine:{width:63,height:15},shippingContainer:{width:292,height:728},"smoke-detector":{width:12,height:3},ballonFoot:{width:27,height:27},speaker2:{width:27,height:31},"square-double-switch":{width:11,height:2},frame_square:{width:120,height:12},"square-switch":{width:11,height:2},"square-plug-TypeB":{width:11,height:1},"square-plug-TypeE":{width:11,height:1},"step-ladder-metal":{width:70,height:92},AtorHaut:{width:73,height:64},suitcase:{width:120,height:38},surveillanceCamera:{width:28,height:47},table_tennis:{width:329,height:208},tablet:{width:21,height:29},tatami:{width:120,height:240},treadmill:{width:107,height:235},putekasse:{width:142,height:54},umbrellaFolded:{width:43,height:43},vase3:{width:29,height:29},jar:{width:30,height:30},"walker-with-wheels":{width:73,height:87},"double-switch-whites":{width:11,height:2},wall_handrail:{width:276,height:12},"switch-whites":{width:11,height:2},"plug-TypeB-whites":{width:11,height:1},"plug-TypeE-whites":{width:11,height:1},wheelchair:{width:78,height:93},"window-blinds":{width:120,height:9},cover_outdoor1:{width:120,height:9},wood_logs:{width:49,height:84},complements2:{width:16,height:16},mobile45160W:{width:54,height:59},mobile45198W:{width:54,height:59},mobile4580W:{width:54,height:59},office_furniture1:{width:360,height:66},cassettieraW:{width:51,height:65},office_box:{width:255,height:65},chair2:{width:70,height:74},office_chair:{width:77,height:77},chair_office_y:{width:58,height:60},pcstul:{width:164,height:112},lbDesk:{width:192,height:96},office_desk:{width:192,height:96},bureauInfoOuvert:{width:94,height:104},wooden_office_pear_table:{width:192,height:144},bureau3:{width:144,height:71},inkjet_and_scanner_printer:{width:54,height:40},laptop:{width:41,height:31},monitorLCD:{width:80,height:37},phone:{width:24,height:27},imprimanteFaxPhotocopieur:{width:127,height:84},penbox:{width:9,height:10},pencil1:{width:2,height:17},water_cooler:{width:33,height:39},whiteBoard:{width:150,height:67},lamp_office:{width:20,height:60},dustbin:{width:28,height:28},staircase_90_bottom:{width:120,height:396},staircase_180_long:{width:120,height:396},escalator:{width:155,height:1059},staircase_180_landing:{width:240,height:312},staircase_90_landing:{width:270,height:274},stairs_90_closed_legal_high:{width:200,height:360},stairs_rail:{width:396,height:8},stairs_180_circular_notopstep_rail:{width:720,height:362},staircase_360_circle:{width:276,height:276},stairs_180_square:{width:240,height:120},stair_ladder_loft:{width:70,height:137},staircase_samba_265x150x85:{width:102,height:180},stair_straight_open_stringer:{width:96,height:402},staircase_ladder_steep:{width:114,height:201},staircase_90_top:{width:120,height:396},staircase_270_box:{width:270,height:270},staircase_u2h:{width:406,height:212},man:{width:72,height:30},mannequinMale:{width:72,height:30},boyStanding:{width:72,height:42},male03:{width:66,height:48},male01:{width:66,height:54},male02:{width:96,height:60},holdingMale01:{width:72,height:72},mannequinBrunette:{width:72,height:30},female01:{width:66,height:66},female02:{width:72,height:60},female03:{width:72,height:72},girlStanding:{width:48,height:48},holdingFemale01:{width:60,height:72},holdingFemale02:{width:84,height:84},holdingFemale03:{width:60,height:60},nourrison:{width:36,height:60},boySitting:{width:60,height:72},sitMale01:{width:72,height:84},sitMale02:{width:72,height:84},sitMale03:{width:72,height:108},sitFemale03:{width:60,height:72},girlSittingTable:{width:42,height:72},sitFemale02:{width:90,height:120},girlSittingGround:{width:72,height:66},boyLying:{width:72,height:216},lyingDownMale02:{width:72,height:204},lyingDownMale01:{width:72,height:216},lyingDownFemale01:{width:84,height:180},dog:{width:36,height:108},cat:{width:22,height:42},siameseCat:{width:16,height:72},rabbit:{width:18,height:30},horse2:{width:72,height:300},bed:{width:174,height:232},boucheVMC:{width:26,height:3},radiator1:{width:260,height:18},radiateur:{width:61,height:8},radiateurVertical:{width:74,height:6},cornice:{width:120,height:12},corniceConcaveCorner:{width:12,height:12},pileMagazines:{width:33,height:41},antenaTV:{width:240,height:97},guitar:{width:47,height:118},winchesterArmchair:{width:135,height:113},etageres:{width:180,height:47},etagereEnfant:{width:84,height:37},bookcase:{width:200,height:40},beige_sofa:{width:233,height:92},container:{width:16,height:11},bouteille:{width:10,height:10},tableCuisine:{width:144,height:48},meubleMicroOnde:{width:76,height:53},cabinet:{width:96,height:75},cabinetWithBasin:{width:96,height:75},drawers:{width:48,height:75},upperCabinet2:{width:72,height:50},portillon:{width:147,height:8},bump:{width:120,height:120},petiteCommode:{width:99,height:56},armoire:{width:131,height:64},portemanteaux2:{width:56,height:56},litMezzanine:{width:241,height:261},bacADouchePlat:{width:108,height:108},frontDoor:{width:122,height:28},frenchWindow85x200:{width:110,height:41},window85x123:{width:110,height:41},window85x163:{width:110,height:41},doubleOutwardOpeningWindow:{width:139,height:32},doubleWindow126x123:{width:159,height:41},doubleWindow126x163:{width:159,height:41},doubleFrenchWindow126x200:{width:159,height:41},sliderWindow126x200:{width:159,height:38},fixedWindow85x123:{width:110,height:33},serviceHatch:{width:60,height:10},slidingDoors:{width:185,height:10},pendantLamp:{width:72,height:72},spotlight:{width:9,height:12},wallUplight:{width:29,height:15},floorUplight:{width:40,height:40},lampeHalogene:{width:38,height:83},led_striplight:{width:120,height:5},washbasin:{width:68,height:57},washbasinWithCabinet:{width:75,height:69},fittedBath:{width:214,height:93},bath:{width:196,height:88},toiletUnit:{width:48,height:96},clothesWasher:{width:71,height:73},bed140x190:{width:190,height:250},bed90x190:{width:130,height:250},bunkBed90x190:{width:138,height:250},loftBed140x190:{width:198,height:250},cornerBunkBed90x190:{width:250,height:250},wardrobe:{width:120,height:65},railing:{width:114,height:6},kitchenCabinet:{width:72,height:77},sink:{width:144,height:77},fridge:{width:72,height:80},fridgeFreezer:{width:72,height:80},cornerSofa:{width:280,height:202},sofa:{width:177,height:105},sofa2:{width:240,height:104},glassDoorCabinet:{width:84,height:47},armchair:{width:105,height:111},armchair2:{width:96,height:94},stool:{width:48,height:48},tabouretPiano:{width:43,height:46},coffeeTable:{width:150,height:56},roundTable:{width:152,height:152},squareTable:{width:138,height:138},tvUnit:{width:120,height:63},dresser:{width:204,height:60},aquarium:{width:72,height:36},filledBookcase:{width:102,height:42},flatTV:{width:146,height:36},fireplace:{width:174,height:102},cheminee:{width:174,height:102},piano:{width:168,height:52},pianoDroit:{width:154,height:67},box:{width:60,height:60},cylinder:{width:60,height:60},estintore:{width:43,height:25},antenaParabolica:{width:78,height:85},hotWaterRadiator:{width:78,height:30},electricRadiator:{width:45,height:12},electricOutlet:{width:9,height:1},electricOutlet2:{width:9,height:1},desk:{width:168,height:82},souris:{width:8,height:13},tourPC:{width:15,height:29},workLamp:{width:20,height:60},curveStaircase:{width:87,height:286},spiralStaircase:{width:168,height:168},staircase:{width:87,height:267},blind:{width:120,height:9},fivePanesWindowWithWallPart:{width:256,height:14},rectangularFivePanesWindow:{width:256,height:14},pictureWindow:{width:256,height:65},simpleShutter:{width:73,height:6},traditionalShutter:{width:73,height:6},twoPartsShutter:{width:73,height:6},fancyWindow:{width:73,height:7},newWindowDk:{width:73,height:4},windowFrostedGlass:{width:73,height:3},window_shutter:{width:53,height:3},window_double_3x3:{width:162,height:19},door_window_thick_double_2x4:{width:192,height:28},door_window_thick_double:{width:192,height:28},door_window_thick:{width:96,height:28},window_double_frame_sill:{width:148,height:30},window_urban_neoclassic:{width:240,height:72},window2:{width:120,height:30},"window-01":{width:66,height:20},"window-08-02":{width:75,height:20},"window-shutter":{width:37,height:2},window_2x3_arched:{width:130,height:38},window_2x3_regular:{width:130,height:38},window_2x3:{width:130,height:38},window_2x4_arched:{width:130,height:38},window_4x3_arched:{width:192,height:39},window_4x3:{width:192,height:39},frontDoorDark:{width:135,height:48},garageDoor:{width:504,height:30},patioGlassDoorUnit:{width:193,height:22},sixDoorFrenchStyle:{width:714,height:122},frenchDoors:{width:287,height:34},DianaWindow:{width:468,height:31},accordionFoldDoors:{width:341,height:152},garageDoor2:{width:252,height:18},doorGlassPanels:{width:93,height:13},door1:{width:110,height:22},glassDoorsOpened:{width:403,height:104},patioDoorOpened:{width:202,height:99},patioDoor:{width:119,height:22},patioSideDoor:{width:73,height:7},fancyFrontDoor:{width:120,height:29},door_glass:{width:115,height:20},"exterior-door-01":{width:126,height:22},"exterior-door-02":{width:118,height:21},"exterior-door-03":{width:125,height:20},wallLight:{width:27,height:30},bougeoir:{width:15,height:14},neon:{width:50,height:8},candleOrnament:{width:10,height:15},deskLamp1:{width:49,height:49},deskLight:{width:28,height:89},ceiling_lamp_globo_feria:{width:55,height:55},lamp_paraffin_feuerhand:{width:15,height:13},lamp_wall_outside:{width:54,height:60},"classic-lamppost":{width:36,height:36},flashlight:{width:5,height:18},"hanging-restaurant-light":{width:47,height:47},"park-light":{width:74,height:68},"pedestal-vase-lamp":{width:34,height:34},"wall-lamp-artwork":{width:36,height:45},desk_lamp1:{width:16,height:41},desk_lamp2:{width:27,height:50},little_lamp1:{width:40,height:40},little_lamp3:{width:49,height:49},saloon_lamp:{width:16,height:100},table_lamp:{width:24,height:24},living_room_lamp1:{width:33,height:33},living_lamp:{width:48,height:70},"chandelier-lamp":{width:157,height:157},candelabre:{width:52,height:174},candle:{width:13,height:12},deer:{width:6,height:12},led_tv:{width:93,height:17},oakChair:{width:59,height:73},pianoAQueue:{width:158,height:204},plasticChair:{width:53,height:70},shelves:{width:95,height:47},televisionCabinet:{width:162,height:83},verticalShelves:{width:53,height:47},electricGuitar:{width:41,height:39},littlePlant:{width:32,height:32},sillaBlanca:{width:61,height:70},couch:{width:249,height:105},modernArmchair:{width:93,height:102},antiqueChair:{width:60,height:76},chairWithCushion:{width:53,height:53},winchesterSofa:{width:278,height:113},designChair:{width:93,height:75},arbolito:{width:30,height:31},cafe_set_mota_chair:{width:73,height:67},cafe_set_mota_table:{width:75,height:75},cafe_set_tonon_chair:{width:58,height:64},cafe_set_tonon_table:{width:79,height:63},ella_chair_f:{width:55,height:68},leaf_chair:{width:81,height:98},spatifilum:{width:96,height:90},tvStand:{width:162,height:56},armchair1:{width:121,height:106},spider_plant:{width:80,height:76},tulip:{width:46,height:53},white_lily:{width:45,height:37},plaidChair:{width:49,height:51},sofa3:{width:245,height:92},tulips:{width:38,height:30},couch3:{width:241,height:109},barStool:{width:40,height:40},bookcase2:{width:98,height:53},computerWorkstation:{width:149,height:166},cornerWorkstation:{width:131,height:130},bocalPoisson:{width:40,height:40},tableGnome:{width:124,height:79},rectangularTable:{width:210,height:121},squareCoffeeTable:{width:81,height:81},ecran16_9:{width:104,height:34},tableBasseBois:{width:114,height:60},woodTable:{width:205,height:127},priseTV:{width:10,height:1},petiteTableSalon:{width:38,height:38},bibliothequeDroite:{width:60,height:48},allenOrgan:{width:223,height:187},highBoyDresser:{width:116,height:68},smallbookshelves:{width:105,height:40},salontafel:{width:120,height:120},couchTwoSeats:{width:238,height:109},kleed_grieks:{width:204,height:144},pinewoodRackFullHeightHalfWidth:{width:59,height:36},pinewoodRackFullHeight:{width:108,height:36},latticeChair:{width:52,height:51},meubleMural:{width:314,height:66},CDrack:{width:79,height:24},displayCabinet:{width:101,height:101},hallTable:{width:141,height:75},potplant2:{width:116,height:115},roundTable2:{width:65,height:65},shelving:{width:143,height:37},sofa3Single:{width:166,height:123},sofa4:{width:222,height:89},couchPoofyPillows:{width:187,height:85},largeCouch:{width:284,height:92},singleChair:{width:121,height:93},throwPillow:{width:42,height:20},counter:{width:229,height:346},tableBasse:{width:135,height:72},pancaFratinoSing:{width:102,height:60},tavoloFratino:{width:132,height:84},TVCenter:{width:93,height:65},chair_high:{width:78,height:84},shelves_storage_wood2:{width:92,height:44},table_granmother_marble:{width:144,height:144},armchair_wing:{width:102,height:108},bar_stool:{width:53,height:50},dropLeafTable:{width:312,height:94},"mid-century-chair":{width:88,height:101},"chair-ottoman":{width:92,height:186},"bar-stool":{width:64,height:71},"dining-chair":{width:51,height:69},"utility-shelving":{width:72,height:36},"mid-century-bench-sofa":{width:335,height:129},"mid-century-sofa":{width:239,height:101},credenza:{width:199,height:60},sedia:{width:54,height:55},tavolino:{width:72,height:36},tavolo:{width:192,height:84},box_room:{width:189,height:57},saloon_table:{width:173,height:77},table3:{width:120,height:120},table4:{width:168,height:108},tv:{width:67,height:38},wooden_table_office:{width:181,height:96},tubular_chair:{width:64,height:60},metal_glass_table:{width:193,height:108},glass_table_office:{width:223,height:96},desk_table:{width:230,height:106},bar_table:{width:96,height:96},beige_sofa_2seats:{width:191,height:88},burlap_sofa:{width:204,height:108},contemp_living_room:{width:397,height:48},leather_sofa:{width:231,height:108},living_room_table:{width:128,height:87},modern_armchair:{width:76,height:63},plastic_chair:{width:58,height:67},calla_lily_with_roses:{width:52,height:46},sofa_white_beige:{width:209,height:98},ficus:{width:51,height:50},"coffee-table2":{width:149,height:61},lavender:{width:16,height:14},kitchenaid:{width:26,height:44},knifeStandSwap:{width:47,height:5},plasticCup:{width:10,height:10},silla2:{width:40,height:38},yogurtBottle:{width:9,height:9},beerGlass:{width:19,height:13},upperCornerCabinet:{width:98,height:98},upperShelves:{width:42,height:42},beer_bottle:{width:7,height:7},coffee_cup:{width:11,height:11},fork:{width:3,height:22},kitchenblender:{width:19,height:27},kitchenTools:{width:53,height:12},knife:{width:3,height:25},largePan:{width:40,height:33},microwave:{width:49,height:43},spoon:{width:4,height:22},washing_machine:{width:72,height:75},breadBox:{width:68,height:33},kitchenScale:{width:28,height:28},espressokettle:{width:22,height:12},boiteMetal:{width:9,height:9},chaiseCuisine:{width:44,height:66},verreFlute:{width:6,height:6},glassDoorKitchenCabinet:{width:160,height:44},verreLongDrink:{width:7,height:7},microOnde:{width:59,height:43},mug:{width:10,height:13},assietteVerresCouverts:{width:45,height:44},smallGlass:{width:12,height:12},carafeEau:{width:38,height:38},verreEau:{width:9,height:9},carafeVin:{width:38,height:38},verreVin:{width:9,height:9},glassdoorCabinet:{width:48,height:53},mobile_cucina_60x60:{width:72,height:79},lavello_doppio_90x60:{width:144,height:79},cassetti_cucina_45x60:{width:54,height:79},isola_cucina_150x90:{width:180,height:126},pensile_cucina_45x90:{width:108,height:82},pensile_cucina_60x70:{width:84,height:60},capa:{width:80,height:60},piano_cottura:{width:72,height:74},frigorifero:{width:72,height:87},ceramicHob:{width:72,height:63},cornerCabinet:{width:95,height:94},"3DrawerCabinet":{width:64,height:77},"2GlassDoorCabinet":{width:116,height:48},"2DoorUpperCabinet":{width:116,height:48},"2DoorLowerCabinet":{width:116,height:77},"1GlassDoorCabinet":{width:55,height:48},"1DoorUpperCabinet":{width:55,height:48},"1DoorLowerCabinet":{width:63,height:77},refridgerator:{width:92,height:78},pantry:{width:118,height:77},kitchenSinkWithMarble:{width:110,height:77},cornerChina:{width:93,height:93},couteauADecouper:{width:4,height:39},couteauAPain:{width:3,height:35},plancheADecouper:{width:42,height:29},barCusisine:{width:146,height:54},frigo:{width:69,height:72},desserte:{width:57,height:45},casierBouteilles:{width:72,height:30},cookingPlate:{width:48,height:25},gaz:{width:38,height:38},washer_dryer:{width:72,height:66},ashtray:{width:10,height:10},"bullet-trash-can":{width:40,height:40},"12-oz-glass":{width:9,height:9},"highball-glass":{width:8,height:8},"oil-servers":{width:18,height:9},"dinner-plate":{width:30,height:22},"bread-plate":{width:24,height:24},"propane-stove":{width:73,height:72},"red-wine-bottle-01":{width:11,height:11},angolo:{width:78,height:78},cucina:{width:96,height:80},curva:{width:72,height:72},curvaEsterna30:{width:36,height:72},curvaInterna30:{width:36,height:72},doppio:{width:96,height:77},pensileAngolo:{width:78,height:78},pensileCurva:{width:33,height:33},pensileDoppio:{width:96,height:41},pensileVetro:{width:48,height:36},pianoIsola:{width:48,height:144},singolo:{width:48,height:77},lavello:{width:96,height:77},cassettiera:{width:48,height:77},mobilettoGrande:{width:96,height:77},mobilettoPiccolo:{width:48,height:77},gasHob:{width:72,height:48},old_jar:{width:30,height:25},pottery:{width:14,height:14},sushi_tray:{width:39,height:30},kitchen_tool1:{width:9,height:56},kitchen_tool2:{width:12,height:54},kitchen_tool3:{width:10,height:56},kitchen_tool4:{width:8,height:53},wine_bottle:{width:10,height:10},bar_chair:{width:54,height:59},kitchen_stool:{width:55,height:55},coffee_machine:{width:70,height:49},creamer:{width:15,height:11},cup:{width:15,height:15},sugar:{width:13,height:13},teapot:{width:27,height:18},shovel:{width:33,height:65},"shopping-basket":{width:72,height:61},squeezer:{width:20,height:15},deepFryerWithFrenchFries:{width:34,height:69},stoneGrillDevice:{width:38,height:31},"food-spaghetti-box":{width:34,height:6},"kitchen-glass-jar-low":{width:12,height:12},"waitress-table-on-wheels":{width:101,height:50},bed2:{width:174,height:257},caballito:{width:82,height:35},cartoon_biplane:{width:17,height:15},wardrobeWithSlidingDoors:{width:240,height:80},cupboard:{width:121,height:47},babyRockingBed:{width:72,height:99},cardGame:{width:26,height:14},briefcase:{width:48,height:13},handbag:{width:32,height:15},woodToy:{width:10,height:8},"carrito-de-madera":{width:16,height:33},clock:{width:9,height:6},suit:{width:53,height:15},chessboard:{width:36,height:36},lettoCloud:{width:227,height:260},toyTrain:{width:37,height:15},xylophone:{width:58,height:35},petitReveil:{width:11,height:6},p40:{width:22,height:19},daybed:{width:318,height:252},captainsBed:{width:159,height:250},trundleBed:{width:259,height:114},litParents:{width:227,height:271},clicClacOuvert:{width:219,height:159},lit:{width:201,height:265},meubleChevet:{width:48,height:35},suits_racked:{width:96,height:72},childBed:{width:126,height:252},"hanging-clothes2":{width:75,height:66},comodinoSinistroCiliegio:{width:180,height:54},lettoCiliegio:{width:221,height:237},mensolaCiliegio:{width:123,height:24},comodinoAzzurro:{width:60,height:51},lettoAzzurro:{width:96,height:216},lettoSoppalcoAzzurro:{width:100,height:216},mensolaAcero:{width:72,height:24},scaletta:{width:53,height:56},iron_bed:{width:159,height:258},wardrobe1:{width:261,height:64},children_bed:{width:111,height:247},kids_shelves:{width:122,height:51},robe:{width:92,height:100},casquette:{width:29,height:40},chapeau:{width:44,height:51},"short-shadows":{width:46,height:63},"pantalon-shadows":{width:49,height:119},blouson:{width:62,height:88},jupe:{width:49,height:49},"jupe-doeskin":{width:49,height:39},chaussette:{width:27,height:37},"montre-with-pose":{width:6,height:11},montre:{width:6,height:30},bague:{width:3,height:3},"gant-textured":{width:18,height:32},"dressing-table":{width:103,height:56},day_bed_frame:{width:250,height:117},tasDeVetements:{width:147,height:125},oreiller:{width:49,height:49},flipFlops:{width:24,height:24},cissors_swap:{width:17,height:9},ruler:{width:38,height:5},technicalTable1:{width:258,height:143},technicalTable2:{width:164,height:206},textMarker:{width:4,height:13},kalender:{width:15,height:10},biurko3:{width:145,height:73},"sef-kasa":{width:60,height:66},simpleDesk:{width:169,height:98},officeTable:{width:228,height:101},classSeat:{width:75,height:82},armChair2:{width:118,height:99},bureauInformatique:{width:141,height:72},clavier:{width:51,height:17},portable:{width:36,height:31},bigCornerDesk:{width:240,height:201},plantersDesk:{width:92,height:80},stylo:{width:1,height:18},secretarysDesk:{width:129,height:96},desk2:{width:216,height:196},officeChair:{width:76,height:72},officeChair2:{width:76,height:83},officeChair3:{width:68,height:68},escritorio:{width:168,height:71},bureauEcolier:{width:107,height:68},invoice:{width:26,height:36},bureauInfoClair:{width:94,height:66},chair_office_x:{width:63,height:62},scissors:{width:6,height:15},"apple-ibook-2001":{width:35,height:33},"office-chair":{width:78,height:78},"custom-desk":{width:283,height:101},"filing-cabinet":{width:47,height:64},"apple-imac-1998":{width:51,height:60},stapler:{width:4,height:14},raccordo80W:{width:96,height:96},scrivania160W:{width:192,height:96},mobile90160W:{width:108,height:59},mobile90198W:{width:108,height:59},mobile9080W:{width:108,height:59},apple_pc:{width:53,height:44},kids_desk_chair:{width:65,height:63},kids_desk_table:{width:135,height:73},kids_wooden_desk:{width:121,height:75},wooden_office_alder_table:{width:194,height:114},wooden_office_pear_table_rect:{width:192,height:96},wooden_office_teak_table:{width:192,height:144},bandeja:{width:33,height:46},pencil2:{width:1,height:17},comb:{width:15,height:5},cosmeticsPot:{width:10,height:10},showerDoor:{width:109,height:27},toiletPaperDispenser:{width:19,height:13},toiletsUnit:{width:43,height:84},flacon:{width:5,height:3},showerStall:{width:112,height:135},urinal:{width:44,height:36},bath_jay_hardy:{width:217,height:85},bathroomRadiator:{width:59,height:23},lipStick:{width:3,height:3},toilets_unit_jay_hardy:{width:50,height:66},radiatorAndTowels:{width:72,height:12},modernToilet:{width:54,height:102},meubleSalleDeBain:{width:72,height:72},bidon:{width:8,height:8},robinet:{width:7,height:18},parfumAmbiance:{width:11,height:6},rasoir:{width:15,height:6},shampoo:{width:9,height:5},gelDouche:{width:10,height:6},boiteDeMouchoirs:{width:27,height:14},derouleurWC:{width:20,height:17},tube:{width:3,height:3},pareDouche:{width:108,height:10},bathroomFurniture:{width:143,height:62},towelMedicineCabinet:{width:75,height:74},bath_L:{width:204,height:102},bathroom_cupboard_mirror:{width:72,height:18},towel_rack:{width:54,height:25},tendaDoccia:{width:89,height:113},barreAppuiL:{width:72,height:14},"towel-rack":{width:60,height:12},showerHeadAndFaucet:{width:30,height:28},mobilettoSpecchioBlu:{width:84,height:15},mobilettoSpecchioWenge:{width:96,height:27},mobilettowenge:{width:96,height:51},water:{width:44,height:67},bathroom4:{width:74,height:74},bathroom1:{width:88,height:94},double_vanity:{width:223,height:82},com_bath:{width:7,height:7},com_bath2_cepillo:{width:24,height:7},com_bath2_esponja:{width:12,height:12},com_bath2_peineta:{width:8,height:8},com_bath2_soap:{width:14,height:7},com_bath3_toalla:{width:22,height:14},medicoscopia_bottle:{width:6,height:6},medicoscopia_bottle2:{width:7,height:7},medicoscopia_box:{width:14,height:6},small_lavatory:{width:60,height:51},"folding-wall-seat":{width:48,height:54},"mixer-tap-for-bath-and-shower":{width:35,height:42},"mixer-tap-for-bath":{width:35,height:20},"shower-armchair":{width:53,height:52},"shower-chair":{width:56,height:54},"turkish-toilet":{width:54,height:85},grandStaircaseDark:{width:610,height:346},escalierColimacon2:{width:242,height:260},outdoor_staircase:{width:154,height:339},stairs_topcurve_90:{width:240,height:482},staircase_90_high_open:{width:215,height:305},staircase_straight:{width:108,height:410},stairs_legal:{width:108,height:370},stairs_spiral:{width:240,height:240},quarterSlope:{width:960,height:960},"home-lift":{width:122,height:89},"stair-lift-rail":{width:648,height:14},"stair-lift":{width:72,height:66},flowerBox:{width:66,height:21},mofx_mailbox:{width:20,height:56},relaxChair:{width:80,height:228},bench:{width:205,height:56},childHut:{width:394,height:625},childSwing:{width:257,height:150},seesaw:{width:288,height:51},wheelbarrow:{width:200,height:72},lantern:{width:46,height:40},chair_deck:{width:81,height:251},poolLounge:{width:106,height:240},rowboat:{width:151,height:371},transat:{width:72,height:126},table_footrest:{width:180,height:41},fencepost1:{width:15,height:15},fencepost2:{width:15,height:15},"borderfence-main":{width:116,height:15},"borderfence-small":{width:69,height:15},dogHouse:{width:125,height:161},blackDeckTable:{width:186,height:188},gardenUmbrella:{width:309,height:267},blackDeckChair:{width:62,height:80},privacyFence:{width:88,height:10},canapeJardin:{width:266,height:90},swimmingPool:{width:999,height:407},balancelle:{width:180,height:177},cloture:{width:141,height:12},fence_grid_gate:{width:102,height:6},bordure:{width:54,height:4},gate_iron:{width:118,height:2},portail:{width:229,height:16},etendoirLinge:{width:501,height:109},flag_hinged_pole:{width:276,height:168},parasol_str:{width:240,height:240},traffic_light_ped:{width:64,height:64},"concrete-bench":{width:171,height:72},"park-trashcan":{width:95,height:95},"porch-column-01":{width:40,height:40},"porch-column-02":{width:52,height:52},"residential-trashcan":{width:71,height:71},"spray-bottle":{width:12,height:15},"concrete-sidewalk":{width:659,height:116},"fire-hydrant":{width:50,height:40},"hose-reel":{width:42,height:33},ext_chair:{width:120,height:92},littlebank:{width:312,height:81},wood_bank:{width:240,height:121},beach_chair:{width:84,height:233},letters_box:{width:38,height:15},"rectangle-swimming-pool":{width:600,height:331},"garden-faucet":{width:6,height:24},"passage-a-niveau":{width:716,height:112},rails:{width:1200,height:196},"fleche-tout-droit":{width:84,height:480},"fleche-tourner-a-droite-et-direct":{width:153,height:480},"fleche-tourner-a-droite":{width:120,height:480},"stationnement-creneau":{width:612,height:246},"stationnement-en-bataille":{width:285,height:606},"stationnement-epi-45":{width:963,height:583},"stationnement-epi-60":{width:689,height:624},"stationnement-epi-75":{width:463,height:618},"high-hedge":{width:181,height:125},hedge:{width:182,height:126},acacia:{width:925,height:775},bamboo:{width:360,height:334},ficusTree:{width:330,height:341},bluePineSnow:{width:423,height:444},coconutTree:{width:933,height:960},coconutTreeBended:{width:876,height:901},copperBeech:{width:902,height:876},cypress:{width:159,height:161},japaneseMaple:{width:949,height:837},poplar:{width:486,height:451},peachBlossom:{width:605,height:896},pineSnow:{width:450,height:455},sabalPalmeto:{width:417,height:373},sycamoreMaple:{width:1091,height:1272},tasDeTerre:{width:111,height:112},tasDeSable:{width:115,height:117},tasDeGravillons:{width:118,height:108},tasDeGravats:{width:116,height:110},voiesFerreesCourbe10m:{width:1255,height:676},voiesFerreesCourbe40m:{width:4720,height:1132},voiesFerreesDroit1m:{width:120,height:528},routeCourbe2VoiesAvecTrottoirs26m:{width:3247,height:1639},routeCourbe1VoieAvecTrottoirs26m:{width:3193,height:1226},"routeCourbe2VoiesAvecTrottoirs6.5m":{width:934,height:1335},"routeCourbe1VoieAvecTrottoirs6.5m":{width:880,height:924},routeCourbe1VoieAvecTrottoirs13m:{width:1652,height:1024},routeCourbe2VoiesAvecTrottoirs13m:{width:1706,height:1436},route1VoieAvecTrottoirs:{width:1560,height:834},croisement1et1:{width:834,height:834},croisement1et2:{width:834,height:1254},pont2Voies:{width:1560,height:1254},pont1Voie:{width:1560,height:834},separateurDeVoie:{width:288,height:72},pilierPont1Voie:{width:84,height:540},autoroute2Voies:{width:6240,height:1274},routeCourbe1VoieAvecTrottoirs90Deg:{width:834,height:834},filElectrique:{width:2745,height:5},"poteau-en-beton":{width:408,height:289},"poteau-en-bois":{width:408,height:128},"feu-de-signalisation-avec-signalisation-au-dessus":{width:385,height:68},hydrangea:{width:96,height:94},blackTupelo:{width:800,height:780},quakingAspen:{width:426,height:443},fanPalm:{width:296,height:309},sassafras:{width:729,height:711},weepingWillow:{width:840,height:820},radiator2:{width:160,height:50},radiator:{width:169,height:30},speaker3:{width:27,height:31},tableFan:{width:33,height:27},ammoBox:{width:120,height:63},barrel:{width:98,height:98},basketball:{width:29,height:29},fireExtinguisher:{width:38,height:22},numberLock:{width:12,height:1},cuckooClock:{width:32,height:22},riggedFan:{width:40,height:25},tennisRacket:{width:32,height:83},radio:{width:37,height:11},thermometer:{width:10,height:8},wallDoubleSocket:{width:19,height:2},wallSocket:{width:10,height:1},"wire-coathanger":{width:50,height:2},sunglasses:{width:19,height:19},tableTennisBat:{width:18,height:31},modernRadiator:{width:61,height:14},mp3Station:{width:48,height:12},workbench:{width:148,height:75},fitnessTower:{width:268,height:209},fut:{width:54,height:54},pompeBiere:{width:71,height:31},curtainRod:{width:180,height:20},priseTelephonique:{width:10,height:2},rampe:{width:240,height:15},tableauMulet:{width:39,height:1},tableauVisage:{width:26,height:1},tableauVisage2:{width:40,height:1},tableauVisage3:{width:32,height:1},tableauYing:{width:45,height:1},prise:{width:10,height:2},railing1:{width:196,height:14},roundedEdgesRailing:{width:96,height:12},roundedEdgesRailing1:{width:101,height:12},scie:{width:15,height:54},rampeArcCercle:{width:212,height:122},interrupteur:{width:10,height:2},tableauElectrique:{width:30,height:13},horlogeUbuntu:{width:46,height:10},venetianBlind:{width:108,height:11},etau:{width:16,height:24},portemanteaux:{width:96,height:96},arch:{width:120,height:20},AntelopeCanyonFrame:{width:61,height:2},EiffelTowerFrame:{width:81,height:2},InariFrame:{width:58,height:2},MontBlancFrame:{width:114,height:2},lightSwitch:{width:9,height:3},smallWroughtIronRails:{width:142,height:13},wroughtIronRails:{width:225,height:13},pavesDeVerre:{width:26,height:6},appleIpod:{width:8,height:13},pile:{width:2,height:6},polygonalRoof:{width:602,height:180},toitureArdoiseRouge:{width:240,height:172},TorontoOntarioPlaceFrame:{width:74,height:2},TigerFrame:{width:76,height:2},NiagaraFallsFrame:{width:98,height:2},VeniceFrame:{width:89,height:2},picture:{width:161,height:12},guacal:{width:71,height:48},LakeMoraineFrame:{width:89,height:2},SquirrelFrame:{width:59,height:2},StatueOfLibertyFrame:{width:61,height:2},VaticanMuseumFrame:{width:74,height:2},EtretatFrame:{width:81,height:2},ColoredFountainFrame:{width:89,height:2},HorseShoeBendFrame:{width:74,height:2},TucanFrame:{width:59,height:2},YosemiteFrame:{width:89,height:2},WaterLilyFrame:{width:81,height:2},ruffledVase:{width:33,height:35},radiator_7section:{width:82,height:23},bd:{width:26,height:36},livreJava:{width:26,height:29},sh3dMag:{width:26,height:36},SweetHome3DKompakt:{width:18,height:25},enceinteColonne:{width:27,height:36},AtorArriere:{width:73,height:68},bathroom_fan:{width:24,height:40},frame_horizontal:{width:186,height:12},frame_vertical:{width:153,height:9},frame3HorizontalMomijiPhotos:{width:31,height:4},frame3VerticalTowerPhotos:{width:63,height:4},ladder_simple:{width:68,height:104},ladder_water:{width:53,height:102},plastic_storage_box:{width:70,height:50},sauna_120x120:{width:144,height:158},vent_round:{width:27,height:36},staircase_handrail_hor:{width:113,height:4},metalBeam:{width:240,height:24},pwdRamp:{width:91,height:143},"iron-railing-02":{width:135,height:17},"recycling-bin":{width:44,height:33},"tape-measure":{width:18,height:3},"trunk-large":{width:120,height:61},newspaper:{width:33,height:29},vase1:{width:28,height:28},vase2:{width:33,height:33},vase5:{width:40,height:38},frame2:{width:18,height:18},basic_camera:{width:12,height:3},electric_water_heater_big:{width:55,height:56},mp3_base_for_ipad:{width:32,height:20},stereo_amplifier:{width:55,height:47},"open-cardboard-box":{width:98,height:75},"step-ladder-wood":{width:55,height:90},"wall-hanger":{width:54,height:8},"iron-railing-separated-hooks-1":{width:198,height:14},"iron-railing-separated-hooks-3":{width:136,height:17},"scie-egoine":{width:74,height:21},"rouleau-de-ruban-adhesif":{width:19,height:5},pelle:{width:27,height:119},cone:{width:46,height:46},"perceuse-electrique":{width:9,height:33},"meuleuse-electrique":{width:38,height:62},"billet-10-euros":{width:16,height:9},"billet-20-euros":{width:16,height:9},"billet-50-euros":{width:17,height:10},"rounded-antenna":{width:11,height:1},"rounded-dimmer":{width:11,height:3},"rounded-double-switch":{width:11,height:2},"rounded-plug-TypeA":{width:11,height:1},"rounded-plug-TypeB":{width:11,height:1},"rounded-plug-TypeCFlat":{width:11,height:1},"rounded-plug-TypeE":{width:11,height:1},"rounded-plug-TypeG":{width:11,height:1},"rounded-RJ-45":{width:11,height:1},"rounded-switch":{width:11,height:2},"square-antenna":{width:11,height:1},"square-dimmer":{width:11,height:2},"square-plug-TypeA":{width:11,height:1},"square-plug-TypeCFlat":{width:11,height:1},"square-plug-TypeG":{width:11,height:1},"square-RJ-45":{width:11,height:1},"antenna-whites":{width:11,height:1},"dimmer-whites":{width:11,height:3},"plug-TypeA-whites":{width:11,height:1},"plug-TypeCFlat-whites":{width:11,height:1},"plug-TypeG-whites":{width:11,height:1},"RJ-45-whites":{width:11,height:1},chimney:{width:81,height:81},"round-chimney":{width:44,height:44},"pince-coupante":{width:72,height:21},parpaing:{width:60,height:24},cageALapin:{width:123,height:70},roueAvecJante:{width:22,height:71},newspapersPile:{width:37,height:29},openedNewspaper:{width:70,height:49},safeOnFeet:{width:56,height:56},"fil-electrique-1m":{width:121,height:1},pileRevues:{width:26,height:35},walker:{width:80,height:53},forkLift:{width:422,height:157},peterbilt:{width:345,height:2526},bike:{width:49,height:140},fordFocus:{width:246,height:523},peugeot103:{width:69,height:204},"concept-sedan-01v2":{width:222,height:548},"concept-sedan-02":{width:253,height:528},"concept-sedan-02-sport":{width:253,height:510},"VW-new-beetle":{width:233,height:491},"concept-sedan-01v1":{width:230,height:566},"peugeot-308":{width:252,height:533},"yamaha-yzr-r6":{width:96,height:244},tricycle:{width:45,height:72},suv:{width:251,height:556},chevrolet:{width:253,height:535},skateboard:{width:24,height:97},suv2:{width:252,height:513},carSegmentA:{width:205,height:329},carSegmentB:{width:222,height:473},chicken:{width:30,height:40},bulldog:{width:47,height:78},horse:{width:71,height:275},"female-01-casual-clothing":{width:57,height:45},"male-01-suit":{width:68,height:50},sitFemale01:{width:68,height:99},fille:{width:59,height:28},boy:{width:65,height:33},frenchWindow2:{width:120,height:30},"turn-window":{width:71,height:17},smallWindow2:{width:120,height:30},window_2x3_frame_sill:{width:68,height:42},window_deep:{width:126,height:72},fixed_window_2x2:{width:72,height:20},doubleWindow2:{width:180,height:30},window_double_2x3_frame_sill:{width:148,height:30},doubleFrenchWindow2:{width:180,height:30},window_2x4:{width:131,height:38},window_2x6:{width:131,height:38},window_4x5:{width:193,height:39},window_3x1:{width:226,height:39},window_4x1:{width:301,height:39},window_2x1_medium_with_large_pane:{width:132,height:38},window_2x1_with_sliders:{width:226,height:30},"window-08":{width:76,height:20},window_shop:{width:216,height:18},window_stain_glass:{width:96,height:20},glassblock:{width:26,height:11},door:{width:110,height:18},glass_door_framless:{width:110,height:24},"screen-door":{width:106,height:12},puerta:{width:105,height:17},craftsmanDoorClosed:{width:122,height:23},sliderPocketDoor:{width:114,height:15},double_door_2:{width:212,height:21},double_door:{width:212,height:21},double_plain_door_with_little_part:{width:160,height:21},"exterior-door-05":{width:119,height:23},"exterior-door-07":{width:123,height:22},frontDoor2:{width:135,height:24},glass_door:{width:126,height:21},double_door_with_little_part:{width:160,height:21},glassDoor2:{width:102,height:17},japanesedoor:{width:358,height:12},"garage-door":{width:470,height:32},"garage-door2":{width:530,height:39},emergencyGlassDoubleDoor:{width:263,height:35},revdoor:{width:461,height:360},elevator:{width:223,height:228},"elevator-door":{width:223,height:26},hangingLight:{width:53,height:53},lamp2:{width:65,height:62},lustreBoule:{width:36,height:36},"ceiling-lamp":{width:36,height:36},minispot:{width:30,height:30},painting_light:{width:48,height:18},"track-lights":{width:120,height:21},"wall-spotlight":{width:8,height:29},wall_lamp:{width:27,height:14},fluorescent:{width:126,height:30},"fluorescent-strip":{width:66,height:11},lightSource2:{width:48,height:48},"porch-light":{width:22,height:21},street_light_modern:{width:41,height:294},farola1:{width:53,height:53},tableBasse2:{width:135,height:72},table2:{width:174,height:113},"oriental-rug":{width:223,height:310},angolo160W:{width:54,height:54},angolo198W:{width:54,height:54},angolo80W:{width:54,height:54},sphere:{width:60,height:60}},ze=["3_blue_and_white_lines_wallpaper","3_brown_lines_wallpaper","3_green_and_white_lines_wallpaper","3_red_and_white_lines_wallpaper","african-wallpaper-2","african-wallpaper","alu_siding_greyscale2","animal-skin","asphalte-clair-4x4m","asphalte-fonce-4x4m","balanced-blue-sponge-wallpaint","balanced-green-sponge-wallpaint","basic-white-tile","bathroom-tile-beige","bathroom_tiles-multicolour","bathroom_tiles","bathroom_tiles_2","beech","beige-bricks-wall-bricks","beige-carpet-square","beige-granite-cook-tops","beige-leather","beigeTile","beige_brown_tiles","beige_fabric","beige_fabric2","beige_grey_squares_wallpaper","beige_pattern","beige_tiles","beige_waves_wallpaper","big-stones-floor-tiles","big-sun-sky","birch","black-and-white-stones","blackAndWhiteTiles","bleachedWood","blue-and-geometric-kitchen-tiles","blue-and-green-plaid-furniture-fabric","blue-fabric","blue-fibres_fabric-for-furniture","blue-painted-wood","blue-rectangles-bathroom-tiles","blue-sponge-wallpaint","blue-wall-pattern","blueSky","blueSlates","blueSlates2","blueTiles","blue_and_white_wallpaper","blue_cells_wallpaper","blue_diamants_wallpaper","blue_lines_wallpaper","blue_with_stars_wallpaper","boxTree","brass","brick-wall-with-old-stones","brown-cercles","brown-circles-floor-carpeting","brown-esparto-fibers","brown-sponge-wallpaint","brown-terrazzo-floor-tiles","brown_lines_with_white_bands_wallpaper","brown_waves_combinated_2_wallpaper","brown_waves_combinated_wallpaper","browns-and-blue-geometrics-kitchen-tiles","browns-bathroom-tiles","browns_wallpaper","butterflies_wallpaper","carpet-with-coloured-tiles","carpet-with-geometric-shapes","cercles_and_stars_wallpaper","cheetah-skin","cherry","chess-parquet","claret-cotton-velvet","classic-red-squares-fabric-for-furniture","classic-red-wallpaper","classic-roof","clay-floor","cloudy","cobblest","coloured-glass-stones","coloured-stones-stonewalls","compact-and-grey-marble-for-cook-tops","concentrated-stones-roughcast","concrete-wall-1","concrete-wall-2","concrete-wall-3","corrugated-roof","dark-blue-seamless-floor-carpeting","dark-blue-sponge-wallpaint","dark-brown-sponge-wallpaint","dark-brown_leather","dark-ceramic-tiles","dark-granite-cook-tops","dark-green-sponge-wallpaint","dark-leather","dark-wall-paper","darkBlueTile","darkBlueTiles","darkBrown","darkWood","detailed-mosaic-arab-wall","drawing_lines_wallpaper","dry_mud","dryflowers_wallpaper","encircled_grey_wallpaper","encircled_wallpaper","english-parquet-1","english-parquet-2","english-parquet-3","english-parquet-dark","esparto-floor-carpeting","false-ceiling-2","false-ceiling-3","false-ceiling","fantasy-wall-mosaic","field-of-daisies","field-of-poppies","field-with-floral-stripes","field-with-white-and-yellow-flowers","fireplace-stones","fish_in_the_sea_wallpaper","floor-carpet-grey-and-white","floor-carpeting-grey","floor-slates","floor-stones-1","floor-stones-2","floor-tiles-hexagonal","flowers_and_yellow_fabric-for-furniture","fruits-kitchen-tiles","geometric-brown-carpet","geometric-kitchen-tiles","geometric_dark_flowers_wallpaper","geometric_green_wallpaper","geometry_colors_wallpaper","giraffe-skin","glass-tiles-wall","gold_circles_wallpaper","granite","grass","grass2","grass3","grass_darker","gray-and-cyan-floor-carpeting","gray-and-green-floor-carpeting","gray-carpet","gray-medium-thick-floor-carpeting","gray-medium-thick-with-squares-floor-carpeting","gray-metal-floor","green-and-black-bathroom-tiles","green-and-bone-kitchen-tiles","green-and-yello-geometry-kitchen-tiles","green-apples-and-white-kitchen-tiles","green-apples-kitchen-tiles","green-fabric-for-furniture","green_leather","green_waves_wallpaper","green_with_leaves_wallpaper","grey-ceramic-tiles","grey-dark-parquet","grey-rough-stonewall","greyTile","grey_marble_for_cook-tops","ground-gravel","ground-pebbles-2","ground-pebbles","hairy-gray-floor-carpeting","hexagon-red-slate","hungarian_parquet","hut-wall-texture","irregular-cercles","irregular-orange-kitchen-tiles","japanese-wallpaper-pink-and-lila-flowers","japanese-wallpaper-with-cranes-and-trees","japanese-wallpaper-with-cranes","laft_05","laft_05_light","leopard-skin","letter_O_wallpaper","light-beige-parquet","light-brown-sponge-wallpaint","light-brown-tiles","light-moss-yellow","lightBlueTile","light_wood","lilac_70s_wallpaper","little-browns-kitchen-wall-tiles","little-stones-bathroom","logWall","logs-wall-2","logs-wall-3","logs-wall","marble-floor-tiles","marble-tiles","marbleWall","mexican-carpet","moon-and-stars","mosaic-patchwork","multi-grey-stones-floor-tiles","multifruit-multicolor-kitchen-tiles","multifruit-orange-kitchen-tiles","natural_colors_wallpaper","navy-blue-stripes","night-sky","oak-brown-parquet","oak","oak2","oak3","old-and-light-gray-parquet","old-and-red-bricks-wall","old-bricks-floor","old-brown-parquet","old-carpet","old-floor-tile","old-grey-parquet","old-mosaic-arab-wall","old-mosaic-wall-arab-2","old-roof-tiles","old-stones-wall","old-wooden-wall","oldWood","oldWoodenFloor","old_grey_bricks","orange-and-browns-kitchen-tiles","orange-fabric-for-furniture","orange-leather","orange-line-and-flowers-kitchen-tiles","orange-napkin-texture","orange_pattern","oranges_70s_wallpaper","oriental-carpet","overlapping-white-wood","overlapping-white-wood_brighter","paneling-for-interior","pansy-purple-velvet","pastel-blue-sponge-wallpaint","pastel-brown-sponge-wallpaint","pastel-cyan-sponge-wallpaint","pastel-gray-sponge-wallpaint","pastel-lilac-sponge-wallpaint","pastel-orange-sponge-wallpaint","pastel-yellow-sponge-wallpaint","pavement","pavement_2","paves-autobloquants-60x60cm","pavingStone","paving_stone_2","peacock-velvet","peacock_blue_velvet","pebbles","persianCarpet","pine","pink-carpet","pink_clouds_wallpaper","pink_squares_fabric-for-furniture","pink_squares_wallpaper","poplar","portuguese-wall-2","portuguese-wall","rattan-for-outdoor-furniture","rattan-furniture","rattan-red","rattan-texture-2","rattan-texture-3","rattan-texture-4","rawPine","rectangularStones","red-american-carpet","red-and-black-plaid-furniture-fabric","red-and-yellow-floor-carpeting","red-bricks-wall","red-brown-parquet","red-building-bricks","red-carpet-large-hair","red-sponge-wallpaint","red-stones-brown-background-stonewalls","red-stripes","red-tomatoes-and-white-kitchen-tiles","red-tomatoes-kitchen-tiles","redOak","redTiles","red_bricks","red_slates","red_tiles","red_with_stars_wallpaper","rough-brown-kitchen-tiles","roughcast","roundBlueSlates","rustic-brown-beige-bathroom-tiles","rusty-metal-texture","salmon-sponge-wallpaint","sandy-soil-2","sandy-soil","sauna_panel","sea-rush-woven","sea-texture","sky-dawn","smallBricks","smallRedBricks","smallWhiteBricks","soil","square-roof-slates","square_shapes","stain_glass","stain_glass_2","stained-brown-ceramic-floor-tiles","stone-bricks-stonewall","stone2Wall","stone3Wall","stoneTiles","stoneWall","stones_wall_coloured","stoneway-floor-tiles","straw-roof","striped-fabric-texture","sunset-sky","swimming-pool-ceramic","swimming-pool-top-cyan","swimming-pool-top","swimmingPool","teira-blue-velvet","terrazo-floor","terrazzo-floor-tiles","texture_knit","thatched-roof","thin-grey-ceramics-floor-tiles","tiger-skin","tile-ext-border","tiled-stones-for-bathroom","travertine-tiles","trendy-wall-paper","trunk","vertical-wood","vertical_blue_lines","vertical_lines","veryCloudy","wall-coloured-glass","wall-effect-beige-tadelakt","wall-effect-gray-tadelakt","wall-effect-green-tadelakt","wall-fabric-blue-duck","wall-fabric-blue-ink","wall-fabric-gold","wall-frosted-glass","wall-glass-geometric-tiles","wall-metal-texture","wall-portuguese-mosaic-3-green","wall-portuguese-mosaic-3","wall-striped-canvas","wall-tile-bathroom","wall-tiles-brown","wallBeigeTile","wall_texture_white","wall_with_little_stones","wallpaper-chiyogami","wallpaper-japanese-blue-flowers","wallpaper-japanese-painted","wallpaper-japanese-pansy-painted","wallpaper-japanese-pink-flowers","wallpaper-japanese-pink-geometry","wallpaper-japanese-pink-pansy-painted","wallpaper-japanese-white-and-pink-flowers","wallpaper-japanese-white-and-yellow-flowers","wallpaper-nepalese-beige-dots-over-red","wallpaper-nepalese-red-dots","wallpaper-with-flamingos","wet-mud","white-little-roughcast","white-marble","white-with-border-kitchen-tiles","white_with_stars_wallpaper","wood-paneling","wood-pine","wood","wooden-bathroom-floor","woodenFloor","words_of_world_wallpaper","yellow-and-black-plaid-furniture-fabric","yellow-lemon-and-white-kitchen-tiles","yellow-lemon-kitchen-tiles","yellow-medium-floor-carpeting","yellow-pears-and-white-kitchen-tiles","yellow-pears-kitchen-tiles","yellow_classic_wallpaper","zebra-skin","wall_texture_red","wall_texture_green","wall_texture_blue","roughcast2","wallp_fleur_de_lis_blue_multi","wallp_fleur_de_lis_green_multi","wallp_fleur_de_lis_red_multi","tommerstokker_1","tile_wall_pattern","beige_tiles_frieze","tile_deco_wall","tile_wall3","shower_tiles","wallp_tomatoes","tile_burg_shad","curtains","vertical_brown_lines","dark-carpet","yellow-carpet","yellow_and_grey_squares-fabric-for-furniture","beige-wall-with-white-stones-roughcast","old-castle-stonewall","green-sponge-wallpaint","pink_with_stars_wallpaper","feline-skin","beige-carpet-rounded","rattan-rouge","wallpaper-nepalese-beige-dots-over-blue","red-metal-floor","wall-glass-with-bubbles","chinese-paper-wall","corrugated-roof-2","painted-wallpaper-fuchsia","zebra-asphalte-clair-4x4m","zebra-asphalte-fonce-4x4m"],Ge={"3_blue_and_white_lines_wallpaper":{width:512,height:512},"3_brown_lines_wallpaper":{width:512,height:512},"3_green_and_white_lines_wallpaper":{width:512,height:512},"3_red_and_white_lines_wallpaper":{width:512,height:512},"african-wallpaper-2":{width:512,height:512},"african-wallpaper":{width:512,height:512},alu_siding_greyscale2:{width:64,height:64},"animal-skin":{width:512,height:512},"asphalte-clair-4x4m":{width:512,height:512},"asphalte-fonce-4x4m":{width:512,height:512},"balanced-blue-sponge-wallpaint":{width:512,height:512},"balanced-green-sponge-wallpaint":{width:512,height:512},"basic-white-tile":{width:512,height:512},"bathroom-tile-beige":{width:512,height:512},"bathroom_tiles-multicolour":{width:512,height:512},bathroom_tiles:{width:512,height:512},bathroom_tiles_2:{width:512,height:512},beech:{width:256,height:512},"beige-bricks-wall-bricks":{width:512,height:512},"beige-carpet-rounded":{width:512,height:512},"beige-carpet-square":{width:512,height:512},"beige-granite-cook-tops":{width:512,height:512},"beige-leather":{width:512,height:512},"beige-wall-with-white-stones-roughcast":{width:512,height:512},beigeTile:{width:256,height:256},beige_brown_tiles:{width:128,height:128},beige_fabric:{width:512,height:512},beige_fabric2:{width:512,height:512},beige_grey_squares_wallpaper:{width:512,height:512},beige_pattern:{width:512,height:512},beige_tiles:{width:100,height:100},beige_tiles_frieze:{width:128,height:640},beige_waves_wallpaper:{width:512,height:512},"big-stones-floor-tiles":{width:512,height:512},"big-sun-sky":{width:2304,height:384},birch:{width:256,height:512},"black-and-white-stones":{width:512,height:512},blackAndWhiteTiles:{width:256,height:256},bleachedWood:{width:256,height:512},"blue-and-geometric-kitchen-tiles":{width:512,height:512},"blue-and-green-plaid-furniture-fabric":{width:512,height:512},"blue-fabric":{width:512,height:512},"blue-fibres_fabric-for-furniture":{width:512,height:512},"blue-painted-wood":{width:512,height:512},"blue-rectangles-bathroom-tiles":{width:512,height:512},"blue-sponge-wallpaint":{width:512,height:512},"blue-wall-pattern":{width:512,height:512},blueSky:{width:1500,height:620},blueSlates:{width:256,height:256},blueSlates2:{width:256,height:256},blueTiles:{width:256,height:256},blue_and_white_wallpaper:{width:512,height:512},blue_cells_wallpaper:{width:512,height:512},blue_diamants_wallpaper:{width:512,height:512},blue_lines_wallpaper:{width:512,height:512},blue_with_stars_wallpaper:{width:512,height:512},boxTree:{width:256,height:256},brass:{width:512,height:512},"brick-wall-with-old-stones":{width:512,height:512},"brown-cercles":{width:512,height:512},"brown-circles-floor-carpeting":{width:512,height:512},"brown-esparto-fibers":{width:512,height:512},"brown-sponge-wallpaint":{width:512,height:512},"brown-terrazzo-floor-tiles":{width:512,height:512},brown_lines_with_white_bands_wallpaper:{width:512,height:512},brown_waves_combinated_2_wallpaper:{width:512,height:512},brown_waves_combinated_wallpaper:{width:512,height:512},"browns-and-blue-geometrics-kitchen-tiles":{width:512,height:512},"browns-bathroom-tiles":{width:512,height:512},browns_wallpaper:{width:512,height:512},butterflies_wallpaper:{width:512,height:512},"carpet-with-coloured-tiles":{width:768,height:512},"carpet-with-geometric-shapes":{width:700,height:512},cercles_and_stars_wallpaper:{width:512,height:512},"cheetah-skin":{width:512,height:512},cherry:{width:256,height:512},"chess-parquet":{width:512,height:512},"chinese-paper-wall":{width:512,height:512},"claret-cotton-velvet":{width:512,height:512},"classic-red-squares-fabric-for-furniture":{width:512,height:512},"classic-red-wallpaper":{width:512,height:512},"classic-roof":{width:512,height:512},"clay-floor":{width:512,height:512},cloudy:{width:1500,height:414},cobblest:{width:64,height:64},"coloured-glass-stones":{width:512,height:512},"coloured-stones-stonewalls":{width:512,height:512},"compact-and-grey-marble-for-cook-tops":{width:512,height:512},"concentrated-stones-roughcast":{width:512,height:512},"concrete-wall-1":{width:512,height:512},"concrete-wall-2":{width:512,height:512},"concrete-wall-3":{width:512,height:512},"corrugated-roof-2":{width:512,height:512},"corrugated-roof":{width:512,height:512},curtains:{width:64,height:64},"dark-blue-seamless-floor-carpeting":{width:512,height:512},"dark-blue-sponge-wallpaint":{width:512,height:512},"dark-brown-sponge-wallpaint":{width:512,height:512},"dark-brown_leather":{width:512,height:512},"dark-carpet":{width:512,height:328},"dark-ceramic-tiles":{width:512,height:512},"dark-granite-cook-tops":{width:512,height:512},"dark-green-sponge-wallpaint":{width:512,height:512},"dark-leather":{width:512,height:512},"dark-wall-paper":{width:512,height:512},darkBlueTile:{width:256,height:256},darkBlueTiles:{width:128,height:256},darkBrown:{width:256,height:512},darkWood:{width:512,height:256},"detailed-mosaic-arab-wall":{width:512,height:512},drawing_lines_wallpaper:{width:512,height:512},dry_mud:{width:512,height:512},dryflowers_wallpaper:{width:512,height:512},encircled_grey_wallpaper:{width:512,height:512},encircled_wallpaper:{width:512,height:512},"english-parquet-1":{width:512,height:512},"english-parquet-2":{width:512,height:512},"english-parquet-3":{width:512,height:512},"english-parquet-dark":{width:512,height:512},"esparto-floor-carpeting":{width:512,height:512},"false-ceiling-2":{width:512,height:512},"false-ceiling-3":{width:512,height:512},"false-ceiling":{width:512,height:512},"fantasy-wall-mosaic":{width:512,height:512},"feline-skin":{width:512,height:512},"field-of-daisies":{width:512,height:512},"field-of-poppies":{width:512,height:512},"field-with-floral-stripes":{width:512,height:512},"field-with-white-and-yellow-flowers":{width:512,height:512},"fireplace-stones":{width:512,height:512},fish_in_the_sea_wallpaper:{width:512,height:512},"floor-carpet-grey-and-white":{width:512,height:512},"floor-carpeting-grey":{width:512,height:512},"floor-slates":{width:512,height:512},"floor-stones-1":{width:512,height:512},"floor-stones-2":{width:512,height:512},"floor-tiles-hexagonal":{width:512,height:512},"flowers_and_yellow_fabric-for-furniture":{width:512,height:512},"fruits-kitchen-tiles":{width:512,height:512},"geometric-brown-carpet":{width:812,height:512},"geometric-kitchen-tiles":{width:512,height:512},geometric_dark_flowers_wallpaper:{width:512,height:512},geometric_green_wallpaper:{width:512,height:512},geometry_colors_wallpaper:{width:512,height:512},"giraffe-skin":{width:512,height:512},"glass-tiles-wall":{width:512,height:512},gold_circles_wallpaper:{width:512,height:512},granite:{width:256,height:256},grass:{width:512,height:512},grass2:{width:384,height:384},grass3:{width:100,height:100},grass_darker:{width:512,height:512},"gray-and-cyan-floor-carpeting":{width:512,height:512},"gray-and-green-floor-carpeting":{width:512,height:512},"gray-carpet":{width:512,height:290},"gray-medium-thick-floor-carpeting":{width:512,height:512},"gray-medium-thick-with-squares-floor-carpeting":{width:512,height:512},"gray-metal-floor":{width:512,height:512},"green-and-black-bathroom-tiles":{width:512,height:512},"green-and-bone-kitchen-tiles":{width:512,height:512},"green-and-yello-geometry-kitchen-tiles":{width:512,height:512},"green-apples-and-white-kitchen-tiles":{width:512,height:512},"green-apples-kitchen-tiles":{width:512,height:512},"green-fabric-for-furniture":{width:512,height:512},"green-sponge-wallpaint":{width:512,height:512},green_leather:{width:512,height:512},green_waves_wallpaper:{width:512,height:512},green_with_leaves_wallpaper:{width:512,height:512},"grey-ceramic-tiles":{width:512,height:512},"grey-dark-parquet":{width:512,height:512},"grey-rough-stonewall":{width:512,height:512},greyTile:{width:256,height:256},"grey_marble_for_cook-tops":{width:512,height:512},"ground-gravel":{width:512,height:512},"ground-pebbles-2":{width:512,height:512},"ground-pebbles":{width:512,height:512},"hairy-gray-floor-carpeting":{width:512,height:512},"hexagon-red-slate":{width:512,height:512},hungarian_parquet:{width:512,height:359},"hut-wall-texture":{width:512,height:512},"irregular-cercles":{width:512,height:512},"irregular-orange-kitchen-tiles":{width:512,height:512},"japanese-wallpaper-pink-and-lila-flowers":{width:512,height:512},"japanese-wallpaper-with-cranes-and-trees":{width:512,height:512},"japanese-wallpaper-with-cranes":{width:512,height:512},laft_05:{width:128,height:128},laft_05_light:{width:128,height:128},"leopard-skin":{width:512,height:512},letter_O_wallpaper:{width:512,height:512},"light-beige-parquet":{width:512,height:512},"light-brown-sponge-wallpaint":{width:512,height:512},"light-brown-tiles":{width:512,height:512},"light-moss-yellow":{width:512,height:512},lightBlueTile:{width:256,height:256},light_wood:{width:64,height:64},lilac_70s_wallpaper:{width:512,height:512},"little-browns-kitchen-wall-tiles":{width:512,height:512},"little-stones-bathroom":{width:512,height:512},logWall:{width:512,height:512},"logs-wall-2":{width:512,height:512},"logs-wall-3":{width:512,height:512},"logs-wall":{width:512,height:512},"marble-floor-tiles":{width:512,height:512},"marble-tiles":{width:512,height:512},marbleWall:{width:256,height:256},"mexican-carpet":{width:984,height:512},"moon-and-stars":{width:512,height:512},"mosaic-patchwork":{width:512,height:512},"multi-grey-stones-floor-tiles":{width:512,height:512},"multifruit-multicolor-kitchen-tiles":{width:512,height:512},"multifruit-orange-kitchen-tiles":{width:512,height:512},natural_colors_wallpaper:{width:512,height:512},"navy-blue-stripes":{width:512,height:512},"night-sky":{width:2048,height:512},"oak-brown-parquet":{width:512,height:512},oak:{width:256,height:512},oak2:{width:256,height:512},oak3:{width:256,height:512},"old-and-light-gray-parquet":{width:512,height:512},"old-and-red-bricks-wall":{width:512,height:512},"old-bricks-floor":{width:512,height:512},"old-brown-parquet":{width:512,height:512},"old-carpet":{width:870,height:512},"old-castle-stonewall":{width:512,height:512},"old-floor-tile":{width:512,height:512},"old-grey-parquet":{width:512,height:512},"old-mosaic-arab-wall":{width:512,height:512},"old-mosaic-wall-arab-2":{width:526,height:455},"old-roof-tiles":{width:512,height:512},"old-stones-wall":{width:512,height:512},"old-wooden-wall":{width:512,height:512},oldWood:{width:256,height:512},oldWoodenFloor:{width:256,height:256},old_grey_bricks:{width:512,height:512},"orange-and-browns-kitchen-tiles":{width:512,height:512},"orange-fabric-for-furniture":{width:512,height:512},"orange-leather":{width:512,height:512},"orange-line-and-flowers-kitchen-tiles":{width:512,height:512},"orange-napkin-texture":{width:512,height:512},orange_pattern:{width:512,height:512},oranges_70s_wallpaper:{width:512,height:512},"oriental-carpet":{width:913,height:512},"overlapping-white-wood":{width:512,height:512},"overlapping-white-wood_brighter":{width:512,height:512},"painted-wallpaper-fuchsia":{width:512,height:512},"paneling-for-interior":{width:512,height:512},"pansy-purple-velvet":{width:512,height:512},"pastel-blue-sponge-wallpaint":{width:512,height:512},"pastel-brown-sponge-wallpaint":{width:512,height:512},"pastel-cyan-sponge-wallpaint":{width:512,height:512},"pastel-gray-sponge-wallpaint":{width:512,height:512},"pastel-lilac-sponge-wallpaint":{width:512,height:512},"pastel-orange-sponge-wallpaint":{width:512,height:512},"pastel-yellow-sponge-wallpaint":{width:512,height:512},pavement:{width:512,height:512},pavement_2:{width:512,height:512},"paves-autobloquants-60x60cm":{width:512,height:512},pavingStone:{width:256,height:182},paving_stone_2:{width:128,height:128},"peacock-velvet":{width:512,height:512},peacock_blue_velvet:{width:512,height:512},pebbles:{width:256,height:256},persianCarpet:{width:500,height:300},pine:{width:256,height:512},"pink-carpet":{width:512,height:512},pink_clouds_wallpaper:{width:512,height:512},"pink_squares_fabric-for-furniture":{width:512,height:512},pink_squares_wallpaper:{width:512,height:512},pink_with_stars_wallpaper:{width:512,height:512},poplar:{width:256,height:512},"portuguese-wall-2":{width:512,height:512},"portuguese-wall":{width:512,height:512},"rattan-for-outdoor-furniture":{width:512,height:512},"rattan-furniture":{width:512,height:512},"rattan-red":{width:512,height:512},"rattan-rouge":{width:512,height:512},"rattan-texture-2":{width:512,height:512},"rattan-texture-3":{width:512,height:512},"rattan-texture-4":{width:512,height:512},rawPine:{width:256,height:512},rectangularStones:{width:512,height:512},"red-american-carpet":{width:683,height:512},"red-and-black-plaid-furniture-fabric":{width:512,height:512},"red-and-yellow-floor-carpeting":{width:512,height:512},"red-bricks-wall":{width:512,height:512},"red-brown-parquet":{width:512,height:512},"red-building-bricks":{width:512,height:512},"red-carpet-large-hair":{width:740,height:512},"red-metal-floor":{width:512,height:512},"red-sponge-wallpaint":{width:512,height:512},"red-stones-brown-background-stonewalls":{width:512,height:512},"red-stripes":{width:512,height:512},"red-tomatoes-and-white-kitchen-tiles":{width:512,height:512},"red-tomatoes-kitchen-tiles":{width:512,height:512},redOak:{width:256,height:512},redTiles:{width:256,height:256},red_bricks:{width:120,height:120},red_slates:{width:100,height:150},red_tiles:{width:100,height:100},red_with_stars_wallpaper:{width:512,height:512},"rough-brown-kitchen-tiles":{width:512,height:512},roughcast:{width:256,height:256},roughcast2:{width:60,height:60},roundBlueSlates:{width:256,height:256},"rustic-brown-beige-bathroom-tiles":{width:512,height:512},"rusty-metal-texture":{width:512,height:512},"salmon-sponge-wallpaint":{width:512,height:512},"sandy-soil-2":{width:512,height:512},"sandy-soil":{width:512,height:512},sauna_panel:{width:256,height:256},"sea-rush-woven":{width:512,height:512},"sea-texture":{width:512,height:512},shower_tiles:{width:64,height:256},"sky-dawn":{width:2048,height:512},smallBricks:{width:256,height:166},smallRedBricks:{width:256,height:105},smallWhiteBricks:{width:256,height:108},soil:{width:256,height:256},"square-roof-slates":{width:512,height:512},square_shapes:{width:512,height:512},stain_glass:{width:128,height:128},stain_glass_2:{width:64,height:64},"stained-brown-ceramic-floor-tiles":{width:512,height:512},"stone-bricks-stonewall":{width:512,height:512},stone2Wall:{width:256,height:158},stone3Wall:{width:256,height:162},stoneTiles:{width:256,height:172},stoneWall:{width:256,height:118},stones_wall_coloured:{width:512,height:512},"stoneway-floor-tiles":{width:512,height:512},"straw-roof":{width:512,height:512},"striped-fabric-texture":{width:512,height:512},"sunset-sky":{width:2304,height:384},"swimming-pool-ceramic":{width:512,height:512},"swimming-pool-top-cyan":{width:512,height:512},"swimming-pool-top":{width:512,height:512},swimmingPool:{width:256,height:256},"teira-blue-velvet":{width:512,height:512},"terrazo-floor":{width:512,height:512},"terrazzo-floor-tiles":{width:512,height:512},texture_knit:{width:256,height:256},"thatched-roof":{width:512,height:512},"thin-grey-ceramics-floor-tiles":{width:512,height:512},"tiger-skin":{width:512,height:512},"tile-ext-border":{width:256,height:256},tile_burg_shad:{width:150,height:150},tile_deco_wall:{width:21,height:250},tile_wall3:{width:60,height:250},tile_wall_pattern:{width:64,height:512},"tiled-stones-for-bathroom":{width:512,height:512},tommerstokker_1:{width:256,height:64},"travertine-tiles":{width:512,height:512},"trendy-wall-paper":{width:512,height:512},trunk:{width:128,height:512},"vertical-wood":{width:512,height:512},vertical_blue_lines:{width:512,height:512},vertical_brown_lines:{width:512,height:512},vertical_lines:{width:512,height:512},veryCloudy:{width:1e3,height:448},"wall-coloured-glass":{width:512,height:512},"wall-effect-beige-tadelakt":{width:512,height:512},"wall-effect-gray-tadelakt":{width:512,height:512},"wall-effect-green-tadelakt":{width:512,height:512},"wall-fabric-blue-duck":{width:512,height:512},"wall-fabric-blue-ink":{width:512,height:512},"wall-fabric-gold":{width:512,height:512},"wall-frosted-glass":{width:512,height:512},"wall-glass-geometric-tiles":{width:512,height:512},"wall-glass-with-bubbles":{width:512,height:512},"wall-metal-texture":{width:512,height:512},"wall-portuguese-mosaic-3-green":{width:512,height:512},"wall-portuguese-mosaic-3":{width:512,height:512},"wall-striped-canvas":{width:512,height:512},"wall-tile-bathroom":{width:512,height:512},"wall-tiles-brown":{width:512,height:512},wallBeigeTile:{width:163,height:256},wall_texture_blue:{width:128,height:128},wall_texture_green:{width:128,height:128},wall_texture_red:{width:128,height:128},wall_texture_white:{width:128,height:128},wall_with_little_stones:{width:512,height:512},wallp_fleur_de_lis_blue_multi:{width:240,height:240},wallp_fleur_de_lis_green_multi:{width:240,height:240},wallp_fleur_de_lis_red_multi:{width:240,height:240},wallp_tomatoes:{width:128,height:128},"wallpaper-chiyogami":{width:512,height:512},"wallpaper-japanese-blue-flowers":{width:512,height:512},"wallpaper-japanese-painted":{width:512,height:512},"wallpaper-japanese-pansy-painted":{width:512,height:512},"wallpaper-japanese-pink-flowers":{width:512,height:512},"wallpaper-japanese-pink-geometry":{width:512,height:512},"wallpaper-japanese-pink-pansy-painted":{width:512,height:512},"wallpaper-japanese-white-and-pink-flowers":{width:512,height:512},"wallpaper-japanese-white-and-yellow-flowers":{width:512,height:512},"wallpaper-nepalese-beige-dots-over-blue":{width:512,height:512},"wallpaper-nepalese-beige-dots-over-red":{width:512,height:512},"wallpaper-nepalese-red-dots":{width:512,height:512},"wallpaper-with-flamingos":{width:512,height:512},"wet-mud":{width:512,height:512},"white-little-roughcast":{width:512,height:512},"white-marble":{width:512,height:512},"white-with-border-kitchen-tiles":{width:512,height:512},white_with_stars_wallpaper:{width:512,height:512},"wood-paneling":{width:512,height:512},"wood-pine":{width:256,height:256},wood:{width:256,height:512},"wooden-bathroom-floor":{width:512,height:512},woodenFloor:{width:256,height:256},words_of_world_wallpaper:{width:512,height:512},"yellow-and-black-plaid-furniture-fabric":{width:512,height:512},"yellow-carpet":{width:512,height:328},"yellow-lemon-and-white-kitchen-tiles":{width:512,height:512},"yellow-lemon-kitchen-tiles":{width:512,height:512},"yellow-medium-floor-carpeting":{width:512,height:512},"yellow-pears-and-white-kitchen-tiles":{width:512,height:512},"yellow-pears-kitchen-tiles":{width:512,height:512},"yellow_and_grey_squares-fabric-for-furniture":{width:512,height:512},yellow_classic_wallpaper:{width:512,height:512},"zebra-asphalte-clair-4x4m":{width:512,height:512},"zebra-asphalte-fonce-4x4m":{width:512,height:512},"zebra-skin":{width:512,height:512}},qe=function(e){return{targetChildName:e,offsetLeft:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,offsetRight:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,offsetTop:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,offsetBottom:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,offsetDepth:arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,rotationXDeg:arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,useCenterPoint:arguments.length>7&&void 0!==arguments[7]&&arguments[7],screenPartDepthScaleFactor:arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,offsetDepthWorld:arguments.length>9&&void 0!==arguments[9]?arguments[9]:0}},Ue={"wall-flat-tv":qe("tv-screen_Cube.003",0,0,0,0,0,0,!1,1,1),curvedTVForTable:qe("Screen"),curvedWallOLEDTV:qe("Plane.002"),flatTV:qe("Screen_Cube.001",0,0,0,0,0,0,!1,1,1),tvUnit:qe("TV",.1,.1,.1,.3),led_tv:qe("tv_set_Circle",.02,.02,.026,.185,-.375),ecran16_9:qe("sweethome3d_window_pane",0,0,0,0,0,0,!1,1,1),TVCenter:qe("Screen",0,0,0,0,0,0,!1,1,1),tv:qe("tv_Cube_tvblack",0,0,0,0,0,0,!1,1,1),contemp_living_room:qe("tv_Cube.018",.055,.055,.065,.215),laptop:qe("Plane.003_Plane.001",0,0,0,0,0,0,!1,.2,.2),monitorLCD:qe("monitorLCD",.06,.06,.041,.3,-.38),portable:qe("dalle",0,0,0,0,0,-18,!0,.2,1),"apple-ibook-2001":qe("sweethome3d_opening_on_hinge_1_iBook_lid_LCD",0,0,0,0,0,-10,!0,.2,.2),"apple-imac-1998":qe("iMac",.1,.1,.08,.28,-.065,-15,!1,.2),apple_pc:qe("applemonitor_Circle.003_screen",0,0,0,0,0,-7,!0,.2,.3),iphone:qe("iphone_Plane",.05,.05,.05,.05,.35,-90,!0,.05,.2),mobile:qe("lcd_Plane",0,0,0,0,0,-90,!0,.05,.1),tablet:qe("screen_Cube.001",0,0,0,0,0,-90,!0,.05,.2),intercom_with_screen:qe("Cube",.02,.37,.07,.57,-.41,0,!1,.05),thermometer:qe("Plane.001_Plane.005",0,0,0,0,0,0,!1,.05,.1),appleIpod:qe("fond_inox",.05,.05,.05,.05,.5,-90,!0,.05,.05)},Ye=[{fieldPrefix:"layout_on",label:"Active layout",type:"radio",infoText:(0,a.jsxs)("span",{children:["Select the layout to be displayed ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"inside add-on"})," when this element is in ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"active"})," state."]})},{fieldPrefix:"layout_off",label:"Inactive layout",type:"radio",infoText:(0,a.jsxs)("span",{children:["Select the layout to be displayed ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"inside add-on"})," when this element is in ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"inactive"})," state."]})},{field:"default_layout_option_prefix",label:"Set as default",type:"checkbox",infoText:(0,a.jsxs)("span",{children:["Select this option to make this layout the default appearance when"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"no entity"})," is linked to the surface object."]}),form:[]}];Ye.filter((e=>"radio"===e.type)).forEach((e=>{e.field=`${e.fieldPrefix}_type`,e.choices=[{name:"Image",value:"image"},{name:"Color",value:"color"}],e.form=[{field:`${e.fieldPrefix}_image`,label:"Image",placeholder:"Upload (PNG/JPG) texture image here",type:"file",accept:"image/png, image/jpeg",validate:e=>T.validateImage({MAX_IMAGE_SIZE_MB:5})(e)},{field:`${e.fieldPrefix}_color`,label:"Color:",type:"color",validate:e=>T.isEmpty(e)||T.isHexColor(e),defaultValue:"#ffffff"}]}));const Xe=document.URL+"static/media/logo-text@2x.23f596ec.png",Ke=document.URL+"static/media/logo-text.23f596ec.png",Ze=Xe,$e=Ke,Je=[{name:"Light",value:"light-v11"},{name:"Satellite",value:"satellite-v9"},{name:"Outdoors",value:"outdoors-v9"},{name:"3D Terrain",value:"TERRAIN"},{name:"3D Buildings",value:"BUILDINGS"},{name:"Dark",value:"dark-v10"}],Qe={field:"obj_item_class",label:"Class",validate:e=>T.isEmpty(e),selectInput:!0,options:[{name:"Free",value:1,infoText:(0,a.jsx)("span",{children:"Items can be placed anywhere without any restrictions"})},{name:"Floor",value:2,infoText:(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"Standing"})," items placed on the floor that occupy"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"vertical"})," space (e.g. wardrobe, desk)"]})},{name:"On floor",value:5,infoText:(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"Flat"})," items placed directly on the floor,"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"covering"})," surface area without standing (e.g carpet)"]})},{name:"In wall",value:4,infoText:(0,a.jsxs)("span",{children:["Items are placed ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"inside"})," the wall and"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"do not need"})," to touch the floor (e.g. windows)"]})},{name:"In wall floor",value:3,infoText:(0,a.jsxs)("span",{children:["Items are placed ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"inside"})," the wall and"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"must also"})," touch the floor (e.g. doors)"]})},{name:"On wall",value:7,infoText:(0,a.jsxs)("span",{children:["Items are placed ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"on"})," the wall and"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"do not need"})," to touch the floor (e.g. painting, mirror)"]})},{name:"On wall floor",value:6,infoText:(0,a.jsxs)("span",{children:["Items are placed ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"on"})," the wall and"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"must also"})," touch the floor (e.g. bookcase, cabinets)"]})}]},et=["doorFrame","patioSideDoor","window_shop","window_stain_glass","glassblock","fixedWindow85x123","serviceHatch","fivePanesWindowWithWallPart","rectangularFivePanesWindow","pictureWindow","window2","window_2x3_frame_sill","fixed_window_2x2","newWindowDk","windowFrostedGlass","window_double_3x3","window_urban_neoclassic","DianaWindow"],tt={door:.2,puerta:.2,craftsmanDoorClosed:.2,frontDoor:.15,double_door_2:.1,double_door:.1,double_plain_door_with_little_part:.1,"exterior-door-05":.2,"exterior-door-07":.2,frontDoor2:.2,glass_door:.19,glassDoor2:.06,double_door_with_little_part:.1,frontDoorDark:0,patioGlassDoorUnit:.8,door1:.18,patioDoor:.1,fancyFrontDoor:0,door_glass:.15,"exterior-door-01":.15,"exterior-door-02":.15,"exterior-door-03":.15,patioDoorOpened:.8,glass_door_framless:0,"screen-door":0,doorGlassPanels:0,frenchWindow2:.1,frenchWindow85x200:.1,window85x123:.1,window85x163:.1,smallWindow2:.15,window_deep:.23,simpleShutter:0,twoPartsShutter:0,"turn-window":.05,window_shutter:0,"window-shutter":0,door_window_thick:.1},it={revdoor:!0},ot={emergencyGlassDoubleDoor:{part1:.1,part2:.1},"garage-door2":{part1:.1,part2:.1},glassDoorsOpened:{part1:.39,part2:.39},doubleOutwardOpeningWindow:{part1:.2,part2:.2},doubleWindow126x123:{part1:.1,part2:.1},doubleWindow126x163:{part1:.1,part2:.1},doubleWindow2:{part1:.1,part2:.1},window_double_2x3_frame_sill:{part1:.1,part2:.1},doubleFrenchWindow2:{part1:.1,part2:.1},doubleFrenchWindow126x200:{part1:.1,part2:.1},window_2x4:{part1:.1,part2:.1},window_2x6:{part1:.1,part2:.1},window_4x5:{part1:.4,part2:.4},window_3x1:{part1:.7,part2:.1},window_4x1:{part1:.5,part2:.5},window_2x1_medium_with_large_pane:{part1:.1,part2:.1},door_window_thick_double_2x4:{part1:.1,part2:.1},door_window_thick_double:{part1:.1,part2:.1},window_double_frame_sill:{part1:.1,part2:.1},window_2x3_arched:{part1:.1,part2:.1},window_2x3_regular:{part1:.1,part2:.1},window_2x3:{part1:.1,part2:.1},window_2x4_arched:{part1:.1,part2:.1},window_4x3_arched:{part1:.4,part2:.4},window_4x3:{part1:.4,part2:.4}},nt={slidingDoors:[{destinationPointFactor:.05,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1_door"],translateAndScale:!0,defaultModelState:"closed"}],japanesedoor:[{destinationPointFactor:.7,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_2_frame"],translateOnly:!0}],elevator:[{destinationPointFactor:.4,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["right-door_Cube.001"],translateAndScale:!0,defaultModelState:"open"}],"elevator-door":[{destinationPointFactor:.4,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:-1,doorPartChildName:["right-door_Cube.001"],translateAndScale:!0,defaultModelState:"closed"}],frenchDoors:[{destinationPointFactor:1,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["handle2"],translateOnly:!0}],sliderPocketDoor:[{destinationPointFactor:.2,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["4_4_1_1"],translateAndScale:!0,defaultModelState:"open"}],"garage-door":[{destinationPointFactor:.4,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cube"],translateAndScale:!0,defaultModelState:"closed"}],garageDoor:[{destinationPointFactor:.25,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cylinder_9","Cylinder_9_1","Cylinder_9_2"],translateAndScale:!0,defaultModelState:"closed"}],garageDoor2:[{destinationPointFactor:.1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["PolyMesh_1","sweethome3d_window_pane"],translateAndScale:!0,defaultModelState:"closed"}],sixDoorFrenchStyle:[{destinationPointFactor:.7,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:-1,doorPartChildName:["Cube_5"],translateOnly:!0,defaultModelState:"open"},{destinationPointFactor:1.3,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["Cube_4"],translateOnly:!0,defaultModelState:"open"}],sliderWindow126x200:[{destinationPointFactor:.15,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1"],translateOnly:!0,defaultModelState:"closed"}],window_2x1_with_sliders:[{destinationPointFactor:1,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:-1,doorPartChildName:["sweethome3d_opening_on_rail_1_frame"],translateOnly:!0,defaultModelState:"closed"}],"window-08":[{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1_window_gloss_white"],translateOnly:!0,defaultModelState:"closed"}],traditionalShutter:[{destinationPointFactor:.15,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cube_2","Cube_2_1","Cube_2_2","Cube_2_3","Cube_2_4","Cube_2_5","Cube_2_6","Cube_2_7","Cube_2_8","Cube_2_9","Cube_2_10","Cube_2_11","Cube_2_12","Cube_2_13","Cube_2_14","Cube_2_15","Cube_2_16","Cube_2_17","Cube_2_18","Cube_2_19","Cube_2_20","Cube_2_51","Cube_2_52","Cube_2_53"],translateOnly:!0,defaultModelState:"closed"},{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cube_2_21","Cube_2_22","Cube_2_23","Cube_2_24","Cube_2_25","Cube_2_26","Cube_2_27","Cube_2_28","Cube_2_29","Cube_2_30","Cube_2_31","Cube_2_32","Cube_2_33","Cube_2_34","Cube_2_35","Cube_2_36","Cube_2_37","Cube_2_38","Cube_2_39","Cube_2_40","Cube_2_41","Cube_2_42","Cube_2_43","Cube_2_44","Cube_2_45","Cube_2_46","Cube_2_47","Cube_2_48","Cube_2_49","Cube_2_50"],translateOnly:!0,defaultModelState:"closed"}],fancyWindow:[{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cube_4_2"],translateOnly:!0,defaultModelState:"closed"}],"window-01":[{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1_window_bottom_gloss_white"],translateAndScale:!0,defaultModelState:"closed"}],"window-08-02":[{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1_window_bottom_gloss_white"],translateAndScale:!0,defaultModelState:"closed"}]},st={craftsmanDoorClosed:["HandleBack_7","Door_1","DoorFrame_2","HandleFront_6"],frontDoor:["sweethome3d_opening_on_hinge_1_doorOutside","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_door"],door:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle"],double_door:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass"],double_plain_door_with_little_part:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle"],"exterior-door-05":["sweethome3d_opening_on_hinge_1_Exterior_door_5_PAINT_gloss_black","sweethome3d_opening_on_hinge_1_Exterior_door_5_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_5_METAL_aluminum","sweethome3d_window_pane_on_hinge_1_Exterior_door_5_GLASS"],"exterior-door-07":["sweethome3d_window_pane_on_hinge_1_front_door_GLASS","sweethome3d_opening_on_hinge_1_front_door_gloss_white","sweethome3d_opening_on_hinge_1_front_door_METAL_aluminum"],frontDoor2:["sweethome3d_opening_on_hinge_1_Leaf_Side_B_front_6","sweethome3d_opening_on_hinge_1_Handles_Tuergriff_wall_1_18_wall"],frontDoorDark:["Extruded_Object_3","Extruded_Object_1_1","Extruded_Object_1","PolyMesh_7-mirror","Cylinder_2","sweethome3d_window_pane","Extruded_Object_3_1","Cylinder_2_1","PolyMesh_7"],glassDoor2:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_tieForWindow","sweethome3d_opening_on_hinge_1_handle","frame_Cube.001"],glass_door:["sweethome3d_hinge_1","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_door"],glass_door_framless:["sweethome3d_opening_on_hinge_1_door_1","sweethome3d_opening_on_hinge_1_clamps_1","sweethome3d_opening_on_hinge_1_handle_1"],puerta:["sweethome3d_opening_on_hinge_1_maneta_puerta","sweethome3d_opening_on_hinge_1_door"],revdoor:["sweethome3d_opening_on_hinge_1_doorglass","sweethome3d_opening_on_hinge_1_doorbar","sweethome3d_opening_on_hinge_1_door2","top","roundwlgls","wl_rnd"],"screen-door":["screen_door_01_screen_door_01_PAINT_gloss_white","sweethome3d_window_pane_screen_door_01_SYNTH_screen","screen_door_01_screen_door_01_PAINT_gloss_black"],double_door_2:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle"],double_door_with_little_part:["sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_door"],door1:["revolvedSurface42_1_1","revolvedSurface41_2_2","revolvedSurface43_3_3","revolvedSurface44_4_4","pCube222_5_5","pCube223_6_6","extrudedSurface179_7_7","pCube224_8_8","pCube225_9_9","pCube226_10_10","pCube227_11_11","pCube228_12_12","extrudedSurface180_13_13","extrudedSurface181_14_14","extrudedSurface182_15_15","extrudedSurface183_16_16","extrudedSurface184_17_17","extrudedSurface185_18_18","extrudedSurface186_19_19","extrudedSurface189_20_20","extrudedSurface190_21_21","extrudedSurface191_22_22","extrudedSurface192_23_23","extrudedSurface193_24_24","extrudedSurface194_25_25","extrudedSurface195_26_26","extrudedSurface196_27_27","pPlane729_28_28","pPlane730_29_29","pPlane731_30_30","pPlane732_31_31","HingeTube1_36_36","HingePlate2_37_37","HingePlate3_38_38","HingeTube11_39_39","HingePlate21_40_40","HingePlate31_41_41","topnurbsCube1_44_44","rightnurbsCube11_54_54","revolvedSurface42_1_57","revolvedSurface41_2_58","revolvedSurface43_3_59","revolvedSurface44_4_60","pCube222_5_61","pCube223_6_62","extrudedSurface179_7_63","pCube224_8_64","pCube225_9_65","pCube226_10_66","pCube227_11_67","pCube228_12_68","extrudedSurface180_13_69","extrudedSurface181_14_70","extrudedSurface182_15_71","extrudedSurface183_16_72","extrudedSurface184_17_73","extrudedSurface185_18_74","extrudedSurface186_19_75","extrudedSurface189_20_76","extrudedSurface190_21_77","extrudedSurface191_22_78","extrudedSurface192_23_79","extrudedSurface193_24_80","extrudedSurface194_25_81","extrudedSurface195_26_82","extrudedSurface196_27_83","pPlane729_28_84","pPlane730_29_85","pPlane731_30_86","pPlane732_31_87","HingeTube1_36_92","HingePlate2_37_93","HingePlate3_38_94","HingeTube11_39_95","HingePlate21_40_96","HingePlate31_41_97","bottomnurbsCube1_45_101","topnurbsCube11_51_107","bottomnurbsCube11_52_108","leftnurbsCube11_53_109"],patioDoor:["knob_1","right","left","Cube_4","Cube_5_3","bottom","Cube_5","sweethome3d_window_pane","top","knob","Cube_5_1","Cube_5_2","Cube_5_4","Cube_4_1"],door_glass:["sweethome3d_opening_on_hinge_1_cap_surub","sweethome3d_opening_on_hinge_1_Clanta_L","sweethome3d_opening_on_hinge_1_Glass_0","sweethome3d_opening_on_hinge_1_cap_surub_6","sweethome3d_opening_on_hinge_1_Door_0","sweethome3d_opening_on_hinge_1_limba_2","sweethome3d_opening_on_hinge_1_miner","sweethome3d_opening_on_hinge_1_bare_orizontale_0","sweethome3d_opening_on_hinge_1_limba","sweethome3d_opening_on_hinge_1_screw","sweethome3d_opening_on_hinge_1_miner_1","sweethome3d_opening_on_hinge_1_locker_0","sweethome3d_opening_on_hinge_1_Rama_geam_0","sweethome3d_opening_on_hinge_1_Clanta_R","InnerCasing"],"exterior-door-01":["sweethome3d_opening_on_hinge_1_Lock_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_GLASS","sweethome3d_opening_on_hinge_1_Exterior_door_PAINT_gloss_red","Exterior_door_Exterior_door_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_METAL_aluminum","Exterior_doorframe_Exterior_doorframe_METAL_brass_polish"],"exterior-door-02":["sweethome3d_opening_on_hinge_1_Exterior_door_2_PAINT_gloss_white","sweethome3d_opening_on_hinge_1_Exterior_door_2_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_2_METAL_aluminum","Door_frame_Door_frame_METAL_brass_polis"],"exterior-door-03":["sweethome3d_opening_on_hinge_1_Exterior_door_3_PAINT_gloss_white","sweethome3d_opening_on_hinge_1_Exterior_door_3_GLASS","sweethome3d_opening_on_hinge_1_Exterior_door_3_METAL_brass_polis","Door_frame_Door_frame_METAL_brass_polish"],patioGlassDoorUnit:["knob_1","Cube_5_3","knob","sweethome3d_window_pane","Cube_5_1","Cube_5_2","Cube_4_1","left","right","Cube_4","Cube_5","Cube_5_4","top","bottom"],patioDoorOpened:["Cube_4","bottom","sweethome3d_window_pane","Cube_5_1","Cube_5_2","Cube_4_1","left","right","Cube_5_3","Cube_5","knob","knob_1","Cube_5_4","top"],frenchWindow2:["sweethome3d_opening_on_hinge_1_Inside_Inner_Frame_top_74_104","sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_top_56_122","sweethome3d_opening_on_hinge_1_Window_Handle_back_83_95","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_97","sweethome3d_opening_on_hinge_1_Window_Pane_wall_1_1_1_25_153"],frenchWindow85x200:["sweethome3d_opening_on_hinge_1","sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"],window85x123:["sweethome3d_opening_on_hinge_1_handle","sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1"],window85x163:["sweethome3d_opening_on_hinge_1","sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"],smallWindow2:["sweethome3d_opening_on_hinge_1_Inside_Inner_Frame_top_77_125","sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_top_59_143","sweethome3d_opening_on_hinge_1_Window_Handle_back_86_116","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_96","sweethome3d_opening_on_hinge_1_Window_Pane_wall_1_1_1_28_174"],window_deep:["16_16.001","15_15","19_19","7_7","21_21","15_15.001","20_20","16_16","17_17","18_18"],simpleShutter:[],twoPartsShutter:[],"turn-window":["sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frameOut","sweethome3d_opening_on_hinge_1_frameIn"],window_shutter:["43_43","40_40","46_46","42_42","45_45","39_39","36_36","41_41","38_38","47_47","35_35","37_37","44_44"],"window-shutter":[],door_window_thick:["8_8","1_1","2_2"],emergencyGlassDoubleDoor:{part1:["Cube.009_chrome_Cube.009_chrome_frame","Cube.008_chrome_Cube.008_chrome_frame","Cube.003_Cube.004_chr_Cube.003_Cube.004_chr_frame","Cylinder.001_silver_s_Cylinder.001_silver_s_silver_spraypaint","sweethome3d_window_pa_sweethome3d_window_pa_Glass","Cube_Cube.001_chrome_Cube_Cube.001_chrome_frame"],part2:["Cube.004_Cube.005_chr_Cube.004_Cube.005_chr_frame","Cylinder_chrome_Cylinder_chrome_silver_spraypaint","sweethome3d_window_sweethome3d_window_Glass","Cube.002_Cube.006_chr_Cube.002_Cube.006_chr_frame","Cube.006_Cube_chrome_Cube.006_Cube_chrome_frame","Cube.007_Cube.003_chr_Cube.007_Cube.003_chr_frame"]},"garage-door2":{part1:["sweethome3d_opening_on_hinge_1_right-handle_Cube.004","sweethome3d_opening_on_hinge_1_large_hinges_Cube.009","sweethome3d_opening_on_hinge_1_right-door_Cube.008"],part2:["sweethome3d_opening_on_hinge_2_left-handle_Cube.003","sweethome3d_opening_on_hinge_2_large-hinges_Cube.007","sweethome3d_opening_on_hinge_2_left-door_Cube.001"]},glassDoorsOpened:{part1:["Cube_5_1","right","knob","Cube_5_4","Cube_4_1","top","knob_1","sweethome3d_window_pane_1","bottom","Cube_5_2","left","Cube_5_3","Cube_5","Cube_4_2"],part2:["Cube_4_5","Cube_5_5","top_1","right_1","Cube_4_4","sweethome3d_window_pane_3","Cube_5_8","Cube_5_6","knob_3","Cube_5_9","bottom_1","left_1","knob_2","Cube_5_7"]},doubleOutwardOpeningWindow:{part1:["sweethome3d_opening_on_hinge_2_handles","sweethome3d_opening_on_hinge_2_muntinOut","sweethome3d_opening_on_hinge_2_out","sweethome3d_opening_on_hinge_2_muntinIn","sweethome3d_opening_on_hinge_2_in","sweethome3d_window_pane_on_hinge_2"],part2:["sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1_handles","sweethome3d_opening_on_hinge_1_muntinIn","sweethome3d_opening_on_hinge_1_out","sweethome3d_opening_on_hinge_1_in","sweethome3d_opening_on_hinge_1_muntinOut"]},doubleWindow126x123:{part1:["sweethome3d_window_pane_on_hinge_2","sweethome3d_opening_on_hinge_2"],part2:["sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"]},doubleWindow126x163:{part1:["sweethome3d_opening_on_hinge_2","sweethome3d_window_pane_on_hinge_2"],part2:["sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"]},doubleWindow2:{part1:["sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_1_front_57_1","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_96","sweethome3d_opening_on_hinge_1_Window_Handle_top_95_110","sweethome3d_opening_on_hinge_1_Window_Pane_1_wall_1_6_6_33_172"],part2:["sweethome3d_opening_on_hinge_2_Inside_Inner_Frame_2_top_161_191","sweethome3d_opening_on_hinge_2_Outside_Inner_Frame_2_top_137_21","sweethome3d_opening_on_hinge_2_Window_Pane_2_wall_1_6_6_117_235"]},window_double_2x3_frame_sill:{part1:["8_8.006"],part2:["21_21_21_21.000","27_27.004"]},doubleFrenchWindow2:{part1:["sweethome3d_opening_on_hinge_1_Inside_Inner_Frame_1_top_77_122","sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_1_top_59_140","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_32","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_10","sweethome3d_opening_on_hinge_1_Window_Pane_1_wall_1_6_6_33_166"],part2:["sweethome3d_opening_on_hinge_2_Inside_Inner_Frame_2_top_161_185","sweethome3d_opening_on_hinge_2_Outside_Inner_Frame_2_top_143_20","sweethome3d_opening_on_hinge_2_Window_Pane_2_wall_1_5_5_116_230"]},doubleFrenchWindow126x200:{part1:["sweethome3d_window_pane_on_hinge_2","sweethome3d_opening_on_hinge_2"],part2:["sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"]},window_2x4:{part1:["sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame"]},window_2x6:{part1:["sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_handle"]},window_4x5:{part1:["sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame"]},window_3x1:{part1:["sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_glass"],part2:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle"]},window_4x1:{part1:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass"]},window_2x1_medium_with_large_pane:{part1:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_handle"]},door_window_thick_double_2x4:{part1:["12_12","6_6"],part2:["10_10","11_11"]},door_window_thick_double:{part1:["12_12","6_6"],part2:["10_10","11_11"]},window_double_frame_sill:{part1:["8_8.008"],part2:["21_21.005","27_27.006"]},window_2x3_arched:{part1:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle"],part2:["sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_panes"]},window_2x3_regular:{part1:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_handle"],part2:["sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass"]},window_2x3:{part1:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_panes"],part2:["sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"]},window_2x4_arched:{part1:["sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_panes"],part2:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_panes"]},window_4x3_arched:{part1:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_glass"],part2:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_frame"]},window_4x3:{part1:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle"],part2:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_panes"]},slidingDoors:["sweethome3d_opening_on_rail_1_door"],japanesedoor:["sweethome3d_opening_on_rail_2_frame","sweethome3d_opening_on_rail_2_plane"],elevator:["right-door_Cube.001"],"elevator-door":["right-door_Cube.001"],frenchDoors:["screentop","screenleft","screenright","screenbottom","Cube_1","Cube_2","Cube_2_1","Cube_1_1","sweethome3d_window_pane0","sweethome3d_window_pane2","handle2","sliderhandle","Cube_3_2","Cube_3_3","Cube_1_8","Cube_1_9","Cube_1_10","Cube_1_11"],sliderPocketDoor:["4_4_1_1","5_5_4_4","7_7_6_6"],"garage-door":["Cube"],garageDoor:["Cylinder_9","Cylinder_9_1","Cylinder_9_2","Cylinder_9_3"],garageDoor2:["PolyMesh_1","sweethome3d_window_pane"],sixDoorFrenchStyle:{lefttoright:{slideOnly:["sweethome3d_window_pane_3","Cube_5"],slideAndRotate:["sweethome3d_window_pane_2","Cube_1"],rotationAngleRad:f(56)},righttoleft:{slideOnly:["sweethome3d_window_pane","Cube_4"],slideAndRotate:["sweethome3d_window_pane_1","Cube"],rotationAngleRad:f(58)}},accordionFoldDoors:{movableDoors:{parts:["Cube_4_5","sweethome3d_window_pane2","Cube_2_4","Cube_5_1","Cube_5_2","Cube_3_2","Cube_3_3","Cube_2_3","Cube_5","Cube_4_6"],rotationPointPartName:["Cube_2_2","Cube_2_3"],rotationAngleRad:f(66)},cornerRotationDoors:{parts:["Cube_1_2","Cube_4_3","sweethome3d_window_pane1","Cube_4_1","Cube_2_2","Cube_4","Cube_4_4","Cube_3","Cube_2_5","Cube_3_1","Cube_4_2"],rotationPointPartName:["Cube_2"],rotationAngleRad:f(63)}},sliderWindow126x200:["sweethome3d_opening_on_rail_1","sweethome3d_opening_on_rail_1_handle","sweethome3d_window_pane_on_rail_1"],window_2x1_with_sliders:["sweethome3d_opening_on_rail_1_glass","sweethome3d_opening_on_rail_1_handle","sweethome3d_opening_on_rail_1_frame"],"window-08":["sweethome3d_opening_on_rail_1_window_gloss_white","sweethome3d_window_pane_on_rail_1_GLASS"],"window-01":["sweethome3d_opening_on_rail_1_window_bottom_gloss_white","sweethome3d_window_pane_on_rail_1_bottom_GLASS"],"window-08-02":["sweethome3d_opening_on_rail_1_window_bottom_gloss_white","sweethome3d_window_pane_on_rail_1_bottom_GLASS"],fancyWindow:["sweethome3d_window_pane_1","Cube_5_2","Cube_5_3","Cube_4_2","Cube_4_3"],traditionalShutter:["Cube_2","Cube_2_1","Cube_2_2","Cube_2_3","Cube_2_4","Cube_2_5","Cube_2_6","Cube_2_7","Cube_2_8","Cube_2_9","Cube_2_10","Cube_2_11","Cube_2_12","Cube_2_13","Cube_2_14","Cube_2_15","Cube_2_16","Cube_2_17","Cube_2_18","Cube_2_19","Cube_2_20","Cube_2_51","Cube_2_52","Cube_2_53","Cube_2_21","Cube_2_22","Cube_2_23","Cube_2_24","Cube_2_25","Cube_2_26","Cube_2_27","Cube_2_28","Cube_2_29","Cube_2_30","Cube_2_31","Cube_2_32","Cube_2_33","Cube_2_34","Cube_2_35","Cube_2_36","Cube_2_37","Cube_2_38","Cube_2_39","Cube_2_40","Cube_2_41","Cube_2_42","Cube_2_43","Cube_2_44","Cube_2_45","Cube_2_46","Cube_2_47","Cube_2_48","Cube_2_49","Cube_2_50"]},at=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"block",n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];0!==t?requestAnimationFrame((()=>{let s;e.style.display=o,n?(s=e.firstChild,s.style.transitionDuration=`${t}ms`):(s=e,s.style.transitionDuration=`${t}ms`);if(n?!s.classList.contains("indoor-modal-fade-in"):!s.classList.contains("fade-in")){if(i){const e=t=>{t.target===s&&(i(),s.removeEventListener("transitionend",e))};s.addEventListener("transitionend",e)}requestAnimationFrame((()=>{n?s.classList.add("indoor-modal-fade-in"):s.classList.add("fade-in")}))}})):(e.style.display=o,i&&i())},rt=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];0!==t?requestAnimationFrame((()=>{let s;o?(s=e.firstChild,s.style.transitionDuration=`${t}ms`):(s=e,s.style.transitionDuration=`${t}ms`);if(o?s.classList.contains("indoor-modal-fade-in"):s.classList.contains("fade-in")){const t=o=>{o.target===s&&(n||(e.style.display="none"),i&&i(),s.removeEventListener("transitionend",t))};s.addEventListener("transitionend",t),requestAnimationFrame((()=>{o?s.classList.remove("indoor-modal-fade-in"):s.classList.remove("fade-in")}))}})):(e.style.display="none",i&&i())},lt=e=>{let t=[],i=[];for(let o=0;o<e.coords.length;o++)t.push(e.coords[o].x),i.push(e.coords[o].y);return t.sort(((e,t)=>e-t)),i.sort(((e,t)=>e-t)),{minX:t[0],maxX:t[t.length-1],minY:i[0],maxY:i[i.length-1]}},ht=(e,t)=>{t||(t=e),t.maxX=r(e.maxX,0),t.minX=r(e.minX,0),t.minY=r(e.minY,0),t.maxY=r(e.maxY,0),t.width=t.maxX-t.minX,t.height=t.maxY-t.minY},ct=e=>e.length>0?Yt(e.flatMap((e=>(e=>{let t=[{x:-e.size/2,y:-e.thick/2},{x:e.size/2,y:-e.thick/2},{x:e.size/2,y:e.thick/2},{x:-e.size/2,y:e.thick/2}];Ut(t,{x:0,y:0},f(e.angle));for(let i=0;i<t.length;i++)t[i].x+=e.x,t[i].y+=e.y;return t})(e)))):null,dt=e=>{let t=e.filter((e=>!vt(e.start,e.end)));if(0===t.length)return null;{let e,i,o,n,s;if(1===t.length)s=lt(t[0]),e=s.minX,i=s.maxX,o=s.minY,n=s.maxY;else for(let a=0;a<t.length;a++)s=lt(t[a]),0===a?(e=s.minX,i=s.maxX,o=s.minY,n=s.maxY):(e=s.minX<e?s.minX:e,i=s.maxX>i?s.maxX:i,o=s.minY<o?s.minY:o,n=s.maxY>n?s.maxY:n);return{minX:e,minY:o,maxX:i,maxY:n}}},pt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};e.forEach((e=>{const o=e.x*t,n=e.y*t;o>i.maxX&&(i.maxX=o),o<i.minX&&(i.minX=o),n>i.maxY&&(i.maxY=n),n<i.minY&&(i.minY=n)}));for(let o in i)i[o]=r(i[o],0);return i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i},mt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e?{x:(e.minX+(e.maxX-e.minX)/2)*t,y:(e.minY+(e.maxY-e.minY)/2)*t}:null},ut=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return"v"===t.A?0===Number((e.x-t.B).toFixed(i)):"h"===t.A?0===Number((e.y-t.B).toFixed(i)):0===Number((e.y-t.A*e.x-t.B).toFixed(i))},gt=(e,t,i)=>!(e>i.maxX||e<i.minX||t>i.maxY||t<i.minY),ft=function(e,t,i,o,n){let s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6?arguments[6]:void 0;const l=r(t,e),h=r(i,e),c=r(o.minX,e),d=r(o.maxX,e),p=r(o.minY,e),m=r(o.maxY,e),u=r(n.minX,e),g=r(n.maxX,e),f=r(n.minY,e),b=r(n.maxY,e);return s?l>=c&&l>=u&&l<=d&&l<=g&&h>=p&&h>=f&&h<=m&&h<=b:s?void 0:"h"===a?l>c&&l>u&&l<d&&l<g&&h>=p&&h>=f&&h<=m&&h<=b:"v"===a?l>=c&&l>=u&&l<=d&&l<=g&&h>p&&h>f&&h<m&&h<b:l>c&&l>u&&l<d&&l<g&&h>p&&h>f&&h<m&&h<b},bt=(e,t)=>{let i={minX:null,maxX:null,minY:null,maxY:null};return e.y>t.y?(i.maxY=e.y,i.minY=t.y):(i.maxY=t.y,i.minY=e.y),e.x>t.x?(i.maxX=e.x,i.minX=t.x):(i.maxX=t.x,i.minX=e.x),i},wt=(e,t)=>{let i=[],o=[];for(let n=0;n<e.coords.length;n++)ut(e.coords[n],e.equations.up,t)?i.push(e.coords[n]):o.push(e.coords[n]);return{interiorLineCoords:i,exteriorLineCoords:o}},Ct=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},xt=(e,t)=>{let i=["svg","g"];for(let o=0;o<e.children.length;o++){let n=e.children[o];if(-1!==i.indexOf(n.tagName)){xt(n,t.children[o]);continue}let s=t.children[o].currentStyle||window.getComputedStyle(t.children[o]);if("undefined"!==s&&null!=s)for(let e=0;e<s.length;e++)n.style.setProperty(s[e],s.getPropertyValue(s[e]))}},_t=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&console.log(i);let o=!0;for(let n in e)if(e[n]!==t[n]){o=!1;break}return o},yt=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o&&console.log(o);let n,s,a=i.x,r=i.y,l=e.A,h=e.B;if("v"===l)n={x:a,y:r-t/2},s={x:a,y:r+t/2};else if("h"===l)n={x:a-t/2,y:r},s={x:a+t/2,y:r};else{let e=1+l*l,i=-2*a+2*l*h+-2*r*l,o=i*i-4*e*(a*a+h*h-2*r*h+r*r-t*t/4),c=(-i-Math.sqrt(o))/(2*e),d=(-i+Math.sqrt(o))/(2*e);n={x:c,y:l*c+h},s={x:d,y:l*d+h}}return[n,s]},St=e=>{let t=e[0].minX,i=e[0].maxX,o=e[0].minY,n=e[0].maxY;for(let s=1;s<e.length;s++)e[s].maxY>n&&(n=e[s].maxY),e[s].minY<o&&(o=e[s].minY),e[s].maxX>i&&(i=e[s].maxX),e[s].minX<t&&(t=e[s].minX);return[{x:t+(i-t)/2,y:o+(n-o)/2},{minX:t,maxX:i,minY:o,maxY:n}]},vt=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return 0===Number((e.x-t.x).toFixed(i))&&0===Number((e.y-t.y).toFixed(i))},Dt=e=>{let t,i,o=0;for(let n=0;n<e.length-1;n++)t=n,i=n+1,n===e.length-2&&(i=0),console.log(t+" -> "+i),o+=(e[i].x-e[t].x)*(e[i].y+e[t].y);return o<0},Tt=function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];let o=180*Math.atan2(t,e)/Math.PI+90;return e<0&&t<0&&(o+=360),i&&(o=jt(o)),o},jt=e=>e>180?e-360:e,It=(e,t)=>Math.log2(2*Math.cos(e*Math.PI/180)*Math.PI*6378137/(512*t)),Pt=function(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const s=F()([t,e]),a=(0,O.A)(s,i/1e3,jt(90+n)),r=(0,O.A)(a,o/1e3,jt(180+n)),l=(0,O.A)(s,o/1e3,jt(180+n));return[[t,e],a.geometry.coordinates,r.geometry.coordinates,l.geometry.coordinates]},Ot=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=0,s=2;i>90&&i<=180?(n=3,s=1):i>180&&i<=270?(n=2,s=0):i>270&&i<=359&&(n=1,s=3),e.fitBounds([t[s],t[n]],{padding:o})},kt=(e,t)=>{let i=e.x,o=e.y,n=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){let e=t[s].x,r=t[s].y,l=t[a].x,h=t[a].y;r>o!==h>o&&i<(l-e)*(o-r)/(h-r)+e&&(n=!n)}return n},Ft=(e,t)=>{if(kt(e,t))return!0;{let i=!1;for(let o=0;o<t.length-1;o++)if(e.x<=Math.max(t[o].x,t[o+1].x)&&e.x>=Math.min(t[o].x,t[o+1].x)&&e.y<=Math.max(t[o].y,t[o+1].y)&&e.y>=Math.min(t[o].y,t[o+1].y)&&ut(e,Lt(t[o].x,t[o].y,t[o+1].x,t[o+1].y,0),0)){i=!0;break}return i}},Mt=function(e,t){let i,o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"array";if(e.A===t.A&&(i=!1,o=!1),"v"===e.A&&"h"===t.A&&(i=[e.B,t.B],o={x:e.B,y:t.B}),"h"===e.A&&"v"===t.A&&(i=[t.B,e.B],o={x:t.B,y:e.B}),"h"===e.A&&"v"!==t.A&&"h"!==t.A&&(i=[(e.B-t.B)/t.A,e.B],o={x:(e.B-t.B)/t.A,y:e.B}),"v"===e.A&&"v"!==t.A&&"h"!==t.A&&(i=[e.B,t.A*e.B+t.B],o={x:e.B,y:t.A*e.B+t.B}),"h"===t.A&&"v"!==e.A&&"h"!==e.A&&(i=[(t.B-e.B)/e.A,t.B],o={x:(t.B-e.B)/e.A,y:t.B}),"v"===t.A&&"v"!==e.A&&"h"!==e.A&&(i=[t.B,e.A*t.B+e.B],o={x:t.B,y:e.A*t.B+e.B}),"h"!==e.A&&"v"!==e.A&&"v"!==t.A&&"h"!==t.A){let n=(t.B-e.B)/(e.A-t.A),s=e.A*n+e.B;i=[n,s],o={x:n,y:s}}return"array"===n?i:o},At=function(e,t){let i=[],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?"coordsInsideWithOrphans":"coordsInside";for(let n=0;n<t.length;n++){kt(e,t[n][o])&&i.push(n)}if(i.length>0){let e,o=t[i[0]].realRoomArea;for(let n=0;n<i.length;n++)t[i[n]].realRoomArea<=o&&(o=t[i[n]].realRoomArea,e=t[i[n]]);return e}return!1},Rt=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{wallNode1:e[t],wallNode2:e[i],wallEquation:o&&Lt(e[t].x,e[t].y,e[i].x,e[i].y)}},Lt=function(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:12;return 0===Number((i-e).toFixed(n))?{A:"v",B:e}:0===Number((o-t).toFixed(n))?{A:"h",B:t}:{A:(o-t)/(i-e),B:o-i*((o-t)/(i-e))}},Bt=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),Wt=(e,t)=>{let i,o,n;"v"===t.A?(i=1,o=0,n=-t.B):"h"===t.A?(i=0,o=1,n=-t.B):(i=t.A,o=-1,n=t.B);const s=e.x,a=e.y,r=(o*(o*s-i*a)-i*n)/(i**2+o**2),l=(i*(i*a-o*s)-o*n)/(i**2+o**2);return{distance:Bt({x:s,y:a},{x:r,y:l}),projectedPoint:{x:r,y:l}}},Nt=e=>{for(let t=0;t<e.length;t++)if(!e[t])return!1;return!0},Vt=e=>e.area>0?e.area:Math.sign(e.realArea)>0&&Math.sign(e.outsideArea)>0?Math.min(e.realArea,e.outsideArea):Math.sign(e.realArea)>0?e.realArea:Math.sign(e.outsideArea)>0?e.outsideArea:null,Et=function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],n=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return("metric"!==t||arguments.length>7&&void 0!==arguments[7]&&arguments[7])&&(e=g(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"meter",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"feet")),e=r(e,i),o&&(n&&(e+=" "),e+="metric"===t?"m":"ft"),e},Ht=function(e,t){return("metric"!==t||arguments.length>4&&void 0!==arguments[4]&&arguments[4])&&(e=g(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"feet",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"meter")),e},zt=function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],n=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return("metric"!==t||arguments.length>7&&void 0!==arguments[7]&&arguments[7])&&(e=g(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"square meter",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"square foot")),e=r(e,i),o&&(n&&(e+=" "),e+="metric"===t?"m\xb2":"ft\xb2"),e},Gt=(e,t,i)=>{const{arrowHalfLength:o}=qt(i),n=-o,s=o,a=.5*(s+n),r=Math.atan2(0,s-n)-Math.PI/2,l=oi(i.type)?0:"start"===e?15:-15,h=a+l*Math.cos(r),c=0+l*Math.sin(r),d=new DOMMatrix;d.translateSelf(i.x,i.y),d.rotateSelf(i.angle+90);const p=new DOMPoint(h,c).matrixTransform(d),{translateX:m,translateY:u}=qt(i,t),g=new DOMMatrix;g.translateSelf(m,u),g.rotateSelf(i.angle+90);return{curvePoint1X:n,curvePoint1Y:0,curvePoint2X:s,curvePoint2Y:0,controlPointX:h,controlPointY:c,transformedControlPointOnWallCoordinates:p,transformedArrowControlPointCoordinates:new DOMPoint(h,c).matrixTransform(g)}},qt=(e,t)=>{let i={arrowHalfLength:0,translateX:0,translateY:0};if(i.arrowHalfLength=e.thick/2+5,t){const o=e.angle*(Math.PI/180),n="up"===t?0:Math.PI;i.translateX=e.bbox.origin.x+i.arrowHalfLength*Math.sin(o+n),i.translateY=e.bbox.origin.y-i.arrowHalfLength*Math.cos(o+n)}return i},Ut=(e,t,i)=>{for(let o=0;o<e.length;o++){const n=e[o].x-t.x,s=e[o].y-t.y;e[o].x=n*Math.cos(i)-s*Math.sin(i),e[o].y=n*Math.sin(i)+s*Math.cos(i),e[o].x+=t.x,e[o].y+=t.y}},Yt=e=>{let t=1/0,i=-1/0,o=1/0,n=-1/0;for(let s=0;s<e.length;s++)e[s].x<t&&(t=e[s].x),e[s].x>i&&(i=e[s].x),e[s].y<o&&(o=e[s].y),e[s].y>n&&(n=e[s].y);return{minX:t,maxX:i,minY:o,maxY:n,width:i-t,height:n-o}},Xt=e=>({...e,objData:e.objData.map((e=>{let{bbox:t,realBbox:i,size:o,thick:n,height:s,width:a,...r}=e;return r}))}),Kt=(e,t)=>`<div ${t?`class="${t}"`:""}>\n<div>\n  <span style="font-weight: bold;">Floor number: </span>\n  <span>${e.floorNumber}</span>\n</div>\n${e.floorNote?`<div>\n        <span>\n          <span style="font-weight: bold;">Floor note: </span>\n          <span>${e.floorNote}</span>\n        </span>\n      </div>`:""}\n</div>`,Zt=e=>e.obj&&90===e.obj.params.onWallOffsetAngle||90===e.params.onWallOffsetAngle?"thick":"size",$t=(e,t)=>{("onWall"===e.family||e.obj&&"onWall"===e.obj.family)&&(e.obj?e.angle+=e.obj.params.onWallOffsetAngle:e.angle+=e.params.onWallOffsetAngle,e.additionalParams.onWallAngle=t.angle,e.additionalParams.onWallThick=t.thick)},Jt=(e,t,i,o)=>{const n=f(o-90);return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}},Qt=(e,t,i,o)=>{const n=-o/2,s=o/2,a=Jt(e,t,i,n),r=Jt(e,t,i,s),l=s-n<=180?"0":"1";return["M",e,t,"L",a.x,a.y,"A",i,i,0,l,1,r.x,r.y,"Z"].join(" ")},ei=(e,t,i,o)=>({rotationX:{previousAngleDeg:e,newAngleDeg:t},rotationY:{previousAngleDeg:i,newAngleDeg:o}}),ti=(e,t,i)=>{const o=1===e.angleSign?-1:1;return{offsetX:o*t*Math.sin(i),offsetY:-o*t*Math.cos(i)}},ii=e=>Object.hasOwn(tt,e),oi=e=>ot[e],ni=e=>ii(e)||oi(e),si=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2));function ai(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.get.call(this,"/location",(e=>{console.log("Ipapify response:"),console.log(e),this.mounted&&e?e.latitude&&e.longitude?(console.log("Postavi lat long u prvom"),this.setState({[t]:[e.longitude,e.latitude]},(()=>!!o&&o()))):e.geoplugin_latitude&&e.geoplugin_longitude?(console.log("postavi lat long u drugom"),this.setState({[t]:[e.geoplugin_longitude,e.geoplugin_latitude]},(()=>!!o&&o()))):o&&o():o&&o()}),!0,!0)}const ri="eagrar_storage";let li={};li={...(()=>{const e=localStorage.getItem(ri);return e?JSON.parse(e):{}})()};const hi=e=>{if(e.isMesh){if(e.geometry.dispose(),e.material.isMaterial)ci(e.material);else for(const t of e.material)ci(t);e=null}},ci=e=>{e.dispose();for(const t of Object.keys(e)){const i=e[t];i&&"object"===typeof i&&"minFilter"in i&&i.dispose()}},di=(e,t)=>{console.log("disposeScene"),e&&(e.traverse((e=>hi(e))),e=null),t&&(t.dispose(),t=null)},pi=e=>{let t=e.parent;for(;t;){if(t.isScene)return t;t=t.parent}return null},mi=(e,t)=>{e.applyQuaternion(t.quaternion)},ui=e=>[new L.Pq0(e.min.x,e.min.y,e.min.z),new L.Pq0(e.max.x,e.min.y,e.min.z),new L.Pq0(e.min.x,e.max.y,e.min.z),new L.Pq0(e.min.x,e.min.y,e.max.z),new L.Pq0(e.max.x,e.max.y,e.min.z),new L.Pq0(e.max.x,e.min.y,e.max.z),new L.Pq0(e.min.x,e.max.y,e.max.z),new L.Pq0(e.max.x,e.max.y,e.max.z)],gi=(e,t)=>2*Math.atan(t*Math.tan(e/2)),fi=e=>{const t=new L.Pq0;e.getWorldDirection(t);const i=new L.Pq0(t.x,0,t.z).normalize();return Tt(i.x,i.z,!1)},bi=(e,t)=>{const i=e.clone();return t.clone().clone().sub(i).normalize()},wi=(e,t)=>{const i=ui(e).map((e=>{const i=e.clone();return t.worldToLocal(i),i})),o=new L.NRn;return o.setFromPoints(i),o},Ci=(e,t,i,o,n)=>{const s=e.object2D;let a,r="horizontal"===t?e.halfSize.x:e.halfSize.y;if(o&&(r-=o*r),"horizontal"===t){const t=f(s.angle);a=new L.Pq0(s.x*n+i*r*Math.cos(t),e.getItemCenterPositionY(n),s.y*n+i*r*Math.sin(t))}else a=new L.Pq0(s.x*n,e.getItemCenterPositionY(n)+r,s.y*n);return e.depthDirectionOffsetTranslation(a,1,n),a},xi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lefttoright";const i=e.itemObject,o=Ci(i,"horizontal",1,1,1),n=Ci(i,"horizontal",-1,0,1),s=new L.Pq0;e.getWorldScale(s);const a=Math.abs(s.x),r=o.clone();e.worldToLocal(r);const l=r.clone();l.x+=.5*i.halfSize.x/a;const h=l.clone();e.localToWorld(h);const c=si(h,n)<i.halfSize.x?1:-1;return"lefttoright"!==t?-1*c:c},_i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"forward",i=1;return ge.includes(e.type)&&(i=-1),"forward"!==t?-1*i:i},yi=(e,t,i)=>{const o=(new L.Pq0).subVectors(i,t),n=(new L.Pq0).subVectors(e,t).dot(o)/o.lengthSq();return(new L.Pq0).copy(t).addScaledVector(o,n)},Si=e=>e.getDate().toString().padStart(2,"0")+"."+(e.getMonth()+1).toString().padStart(2,"0")+"."+e.getFullYear()+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0"),vi=e=>{const t={timeZone:e,hour12:!1,weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},i=Intl.DateTimeFormat("en-US",t).formatToParts(new Date),o=i.find((e=>"year"===e.type)).value,n=new Date(`${i.find((e=>"month"===e.type)).value} 1, 2000`).getMonth(),s=i.find((e=>"day"===e.type)).value,a=i.find((e=>"hour"===e.type)).value,r=i.find((e=>"minute"===e.type)).value,l=i.find((e=>"second"===e.type)).value;return new Date(o,n,s,a,r,l)};function Di(e,t,i,o){return e.post.call(this,"/klet3d/objects",{myid:t,name:t,metadata:{details:{itemType:i}},class:"furniture"},(()=>{console.log("User added item type object saved",t),o&&o()}))}function Ti(e,t,i,o,n){let s={};return t&&(s.name=t),i&&(s.metadata=i),e.post.call(this,`/klet3d/objects-update/${o}`,s,(()=>n&&n()))}const ji=(e,t,i)=>{let o,n={headers:{}};return t?(o="https://app.glamos.eu/api",o+="/glamos",o+=e):o=e,i&&(n.headers["Cache-Control"]="no-store"),{headers:n,apiURI:encodeURI(o)}},Ii={get:function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=ji(e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0);return S.get.call(this,o,i,t)},post:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const n=ji(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return S.post.call(this,n,o,i,t)},put:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const n=ji(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return S.put.call(this,n,o,i,t)},patch:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const n=ji(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return S.patch.call(this,n,o,i,t)},delete:function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=ji(e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0);return S.delete.call(this,o,i,t)}},Pi=e=>{e=e.replace("#","");const t=parseInt(e.substring(0,2),16)/255,i=parseInt(e.substring(2,4),16)/255,o=parseInt(e.substring(4,6),16)/255,n=Math.max(t,i,o),s=n-Math.min(t,i,o);let a=0;return 0===s?a=0:n===t?a=(i-o)/s%6:n===i?a=(o-t)/s+2:n===o&&(a=(t-i)/s+4),a=Math.round(60*a),a<0&&(a+=360),a},Oi=(e,t,i)=>{e%=360,t=Math.max(0,Math.min(1,t));let o=(i=Math.max(0,Math.min(1,i)))*t,n=o*(1-Math.abs(e/60%2-1)),s=i-o,a=0,r=0,l=0;e>=0&&e<60?(a=o,r=n,l=0):e>=60&&e<120?(a=n,r=o,l=0):e>=120&&e<180?(a=0,r=o,l=n):e>=180&&e<240?(a=0,r=n,l=o):e>=240&&e<300?(a=n,r=0,l=o):e>=300&&e<360&&(a=o,r=0,l=n),a=Math.round(255*(a+s)),r=Math.round(255*(r+s)),l=Math.round(255*(l+s));const h=e=>e.toString(16).padStart(2,"0");return`#${h(a)}${h(r)}${h(l)}`.toUpperCase()},ki=(e,t)=>{let i=((t%=360)-(e%=360))%360;i<0&&(i+=360);let o=(e-t)%360;return o<0&&(o+=360),i>o?i:-o},Fi=(e,t,i)=>{let o=(e%=360)+i*ki(e,t%=360);return o<0&&(o+=360),o%360},Mi=(e,t)=>[{x:e.minX*t,y:e.minY*t},{x:e.maxX*t,y:e.minY*t},{x:e.maxX*t,y:e.maxY*t},{x:e.minX*t,y:e.maxY*t}],Ai=function(e,t){let i=!1;const o=Mi(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);for(let n=0;n<e.length;n++)if(!Ft(e[n],o)){i=!0;break}return!i},Ri=(e,t,i)=>{const o=(new L.Pq0).subVectors(t,e),n=new L.kn4;return n.makeRotationY(i),o.applyMatrix4(n),(new L.Pq0).addVectors(e,o)},Li=e=>null!==e.coordX&&null!==e.coordY&&"unavailable"!==e.coordX&&"unavailable"!==e.coordY&&!T.isNumber(e.coordX)&&!T.isNumber(e.coordY)&&(0!==e.coordX||e.coordY>0),Bi=["christmas_tree"],Wi={christmas_tree:{startFactor:.25,endFactor:.9,lightDistanceMeters:.3}},Ni=[{label:"Edit",infoText:"Allows you to select objects and customize Home Assistant entity bindings and parameters.",title:"Enter edit mode",value:"edit"},{label:"Control",infoText:"Enables you to select specific Home Assistant bound objects to change their state. For other objects, it's view-only.",title:"Enter edit mode",value:"control"}],Vi=[{field:"open_state",label:"Open:",keepTextWidth:!0,longText:"Closed:",validate:e=>T.isEmpty(e)},{field:"closed_state",label:"Closed:",validate:e=>T.isEmpty(e)}],Ei=[{field:"switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>T.isEmpty(e)},{field:"switched_off_state",label:"Switched off:",validate:e=>T.isEmpty(e)},{field:"power_sync",label:"Sync power",type:"checkbox",defaultValue:!1},{field:"power",label:"Luminous Power(lm)",min:0,max:500,step:1,placeholder:"Luminous power of light in lumens",validate:e=>T.isEmpty(e)||T.isNumber(e)},{field:"color_sync",label:"Sync color",type:"checkbox",defaultValue:!1},{field:"color",label:"Color",type:"color",validate:e=>T.isEmpty(e)||T.isHexColor(e)},{field:"variant",label:"Light variant",validate:e=>T.isEmpty(e),options:[{name:"Omnidirectional",value:"point"},{name:"Spot",value:"spot"}],selectInput:!0},{field:"spot_angle",label:"Spot light angle",placeholder:"Spot light angle",min:1,max:90,step:1,validate:e=>T.isEmpty(e)||T.isNumber(e)},{field:"spot_distance",label:"Spot light distance",placeholder:"Spot light distance",min:1,step:1,validate:e=>T.isEmpty(e)||T.isNumber(e),max:20}],Hi=[{field:"percentage_sync",label:"Percentage sync",type:"checkbox",defaultValue:!1},{field:"percentage",label:"Fan percentage",min:1,max:100,step:1,validate:e=>T.isEmpty(e)||T.isNumber(e)},{field:"direction_sync",label:"Direction sync",type:"checkbox",defaultValue:!1},{field:"direction",label:"Fan direction",validate:e=>T.isEmpty(e),selectInput:!0,options:[{name:"Forward",value:"forward"},{name:"Reverse",value:"reverse"}]},{field:"switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>T.isEmpty(e)},{field:"switched_off_state",label:"Switched off:",validate:e=>T.isEmpty(e)}],zi=[{field:"closing_direction",label:"Direction",validate:e=>T.isEmpty(e),selectInput:!0,options:[{name:"Top",value:"top"},{name:"Left",value:"left"},{name:"Right",value:"right"}]},{field:"open_offset",label:"Open",validate:e=>T.isEmpty(e)||T.isNumber(e),keepTextWidth:!0,longText:"Bottom (cm):"},{field:"closed_offset",label:"Closed",keepTextWidth:!0,longText:"Bottom (cm):",validate:e=>T.isEmpty(e)||T.isNumber(e)}],Gi=[{field:"detected_state",label:"Detected:",keepTextWidth:!0,longText:"Not detected:",validate:e=>T.isEmpty(e)},{field:"undetected_state",label:"Not detected:",validate:e=>T.isEmpty(e)},{field:"detected_opacity",label:"Detected opacity",min:0,max:100,step:1,validate:e=>T.isEmpty(e)||T.isNumber(e)},{field:"undetected_opacity",label:"Undetected opacity",min:0,max:100,step:1,validate:e=>T.isEmpty(e)||T.isNumber(e)}],qi=[{field:"hvac_switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>T.isEmpty(e)},{field:"hvac_switched_off_state",label:"Switched off:",validate:e=>T.isEmpty(e)}],Ui=[{field:"christmas_light_switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>T.isEmpty(e)},{field:"christmas_light_switched_off_state",label:"Switched off:",validate:e=>T.isEmpty(e)}],Yi=[{field:"screen_switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>T.isEmpty(e)},{field:"screen_switched_off_state",label:"Switched off:",validate:e=>T.isEmpty(e)},{field:"screen_on_color",label:"On color:",longText:"Off color:",type:"color",validate:e=>T.isEmpty(e)||T.isHexColor(e),fieldPrefix:"screen_on"},{field:"screen_off_color",label:"Off color:",isLongText:!0,type:"color",validate:e=>T.isEmpty(e)||T.isHexColor(e),fieldPrefix:"screen_off"}];Yi.filter((e=>e.fieldPrefix)).forEach((e=>{return e.form=[{field:`${t=e.fieldPrefix}_is_light`,label:"Screen Light",type:"checkbox",infoText:(0,a.jsx)("span",{children:"Check this box to enable light effect for the screen."}),defaultValue:!1},{field:`${t}_3d_glow_effect`,label:"3D Glow",type:"checkbox",infoText:(0,a.jsxs)("span",{children:["Check this box to enable enhanced light simulation. When on, the glow will include"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"3D depth"})," and"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"realistic dispersion"})," for a natural effect."]}),defaultValue:!1},{field:`${t}_3d_glow_factor`,label:"Glow Factor:",keepTextWidth:!0,longText:"Spread Factor:",min:.01,max:1,step:.01,placeholder:"Glow factor",validate:e=>T.isEmpty(e)||T.isNumber(e)},{field:`${t}_3d_glow_spread`,label:"Spread Factor:",min:1,max:100,step:.01,placeholder:"Spread factor",validate:e=>T.isEmpty(e)||T.isNumber(e)}];var t}));const Xi=e=>[{field:`${e}_coloring_type`,label:"Coloring",type:"radio",formChoices:!0,choices:[{name:"Fixed",value:"fixed",form:[{label:"Color:",field:`${e}_fixed_color`,type:"color",validate:e=>T.isEmpty(e)||T.isHexColor(e)}]},{name:"Range",value:"range",form:[{label:"Min value:",field:`${e}_range_min_value`,validate:e=>T.isEmpty(e)||T.isNumber(e)},{label:"Min color:",field:`${e}_range_min_color`,validate:e=>T.isEmpty(e)||T.isHexColor(e)},{label:"Max value:",field:`${e}_range_max_value`,validate:e=>T.isEmpty(e)||T.isNumber(e)},{label:"Max color:",field:`${e}_range_max_color`,validate:e=>T.isEmpty(e)||T.isHexColor(e)},{label:"Intermediate color",field:`${e}_range_intermediate_colors`,value:[]}]}]},{field:`${e}_opacity`,label:"Opacity:",validate:e=>T.isNumber(e),placeholder:"Color opacity",min:0,max:1,step:.01,isNumberInput:!0,keepTextWidth:!0,longText:"Font size:"}],Ki=function(e){return{counter:e,form:[{label:"Value:",field:`range_intermediate_color_value_${e}`,keepTextWidth:!0,longText:"Max value:",validate:e=>T.isEmpty(e)||T.isNumber(e),value:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""},{label:"Color:",field:`range_intermediate_color_color_${e}`,keepTextWidth:!0,longText:"Max color:",validate:e=>T.isEmpty(e)||T.isHexColor(e),value:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""}]}},Zi=[{field:"sensor_type",label:"Sensor type",type:"radio",choices:[{name:"Number",value:"number"},{name:"Text",value:"text"}]},{field:"background",label:"Background",type:"checkbox",infoText:(0,a.jsxs)("span",{children:["Select this option to visually represent sensor values by the background color of the room where the sensor is located ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"if one exists"})]}),explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},form:[...Xi("background")]},{field:"text",label:"Text",type:"checkbox",infoText:(0,a.jsx)("span",{children:"Select this option to visually represent sensor values by text colors"}),explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},form:[...Xi("text"),{field:"text_font_size",label:"Font size:",validate:e=>T.isNumber(e),min:1,max:100,step:1,isNumberInput:!0}]}],$i=[{field:"color",label:"Color:",isColorInput:!0,validate:e=>T.isEmpty(e)||T.isHexColor(e)},{field:"opacity",label:"Opacity:",isNumberInput:!0,validate:e=>T.isNumber(e),placeholder:"Color opacity",min:0,max:1,step:.01,keepTextWidth:!0,longText:"Font size:"},{field:"font_size",label:"Font size:",validate:e=>T.isNumber(e),min:1,max:100,step:1,isNumberInput:!0}],Ji=[{field:"active_layout_state",label:"Active:",keepTextWidth:!0,longText:"Inactive:",validate:e=>T.isEmpty(e)},{field:"inactive_layout_state",label:"Inactive:",validate:e=>T.isEmpty(e)}],Qi=[{field:"toggle_on_click_status",label:"Enable Click-to-Toggle",type:"checkbox",infoText:(0,a.jsx)("span",{children:"Check this box to toggle entity's state by clicking on object."}),defaultValue:!1}],eo=[{label:"Min value:",field:"critical_min_value",validate:e=>T.isEmpty(e)||T.isNumber(e),defaultValue:10},{label:"Min color:",field:"critical_min_color",validate:e=>T.isEmpty(e)||T.isHexColor(e),defaultValue:"#0000ff"},{label:"Max value:",field:"critical_max_value",validate:e=>T.isEmpty(e)||T.isNumber(e),defaultValue:30},{label:"Max color:",field:"critical_max_color",validate:e=>T.isEmpty(e)||T.isHexColor(e),defaultValue:"#ff0000"},{field:"intermediate_colors",defaultValue:[]}];var to=i(9449),io=i(1357);class oo extends o.PureComponent{constructor(){super(),this.showApplicationInfoTrack=()=>this.setState({hideHeaderTrack:!1}),this.onHideButtonClick=()=>this.setState({hideHeaderTrack:!0}),this.state={hideHeaderTrack:!0},this.showApplicationInfoTrack=this.showApplicationInfoTrack.bind(this),this.onHideButtonClick=this.onHideButtonClick.bind(this)}render(){const{hideHeaderTrack:e}=this.state;return e?null:(0,a.jsxs)("div",{className:"application-info-track",children:[(0,a.jsxs)("div",{className:"content-container",children:[(0,a.jsx)("div",{style:{pointerEvents:"none"},className:"svg-center-inside-container no-shrink",children:(0,a.jsx)(io.A,{})}),(0,a.jsx)("div",{className:"info-message-container",children:(0,a.jsx)("div",{className:"message-row",children:(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{children:"Update available:\xa0"}),"A newer version of this add-on has been released. Upgrade now for the latest features and fixes."]})})}),(0,a.jsxs)("div",{className:"close-details-container no-shrink",children:[(0,a.jsx)(go,{type:"headerTrack",onClick:()=>window.open("https://www.facebook.com/groups/324623293725162","_blank"),children:"More details"}),(0,a.jsx)("div",{onClick:this.onHideButtonClick,className:"svg-center-inside-container",children:(0,a.jsx)(to.A,{})})]})]}),(0,a.jsx)("div",{className:"more-details-mobile",children:(0,a.jsx)(go,{type:"headerTrack",onClick:()=>window.open("https://www.facebook.com/groups/324623293725162","_blank"),children:"More details"})})]})}}const no=oo;class so extends o.Component{render(){return(0,a.jsx)("div",{className:"button-centered-container edit-button",children:(0,a.jsx)(go,{type:"primary",style:{paddingLeft:"1.2rem",paddingRight:"1.2rem"},children:(0,a.jsx)("a",{href:`https://app.klet3d.com/floorplan/${this.props.mainComponentThis.getFloorplanID()}`,target:"_blank",rel:"noreferrer",style:{textDecoration:"none",color:"#fff"},children:"Edit values"})})})}}const ao=so;class ro extends o.Component{constructor(){super(),this.callErrorLogAPI=e=>{const t=window._env_.floorplanID,i=window._env_.licenseKey;if(console.log("callErrorLogAPI",e,t,i),t&&i){!0&&Ii.post.call(this,`/klet3d/error/${t}/${i}`,{version:this.props.addOnVersion,error:e},(e=>{console.log("Error logged succesfully",e)}))}},this.windowErrorEventHandler=(e,t,i,o,n)=>{this.callErrorLogAPI(JSON.stringify({message:e.message,source:t,lineno:i,colno:o,error:JSON.stringify(n)}))},this.windowUnhandledRejectionEventHandler=e=>{this.callErrorLogAPI(JSON.stringify({message:e.reason.message,stack:e.reason.stack}))},this.state={responseError:null},this.mounted=!1,this.callErrorLogAPI=this.callErrorLogAPI.bind(this),this.windowErrorEventHandler=this.windowErrorEventHandler.bind(this),this.windowUnhandledRejectionEventHandler=this.windowUnhandledRejectionEventHandler.bind(this)}componentDidCatch(e,t){this.callErrorLogAPI(JSON.stringify({error:JSON.stringify(e),errorInfo:t}))}componentDidMount(){this.mounted=!0,window.addEventListener("error",this.windowErrorEventHandler),window.addEventListener("unhandledrejection",this.windowUnhandledRejectionEventHandler)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("error",this.windowErrorEventHandler),window.removeEventListener("unhandledrejection",this.windowUnhandledRejectionEventHandler)}render(){return(0,a.jsx)(En,{responseError:this.state.responseError,children:this.props.children})}}const lo=ro;class ho extends o.Component{render(){return(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)("div",{className:"checked-input-container",children:(0,a.jsx)("input",{type:"checkbox",style:{visibility:"hidden"}})}),(0,a.jsx)("div",{style:{flexGrow:1},children:this.props.children})]})}}const co=ho;class po extends o.Component{constructor(){super(),this.setTimeoutCallback=e=>{this.state.setVisibleCounter===e&&this.mounted&&this.setState({visible:!1,setVisibleCounter:this.state.setVisibleCounter+1})},this.showAlert=(e,t)=>{const i=this.state.setVisibleCounter+1;this.setState({visible:!0,alertMessage:e,alertType:t,setVisibleCounter:i},(()=>{void 0!==this.props.delay?this.containerRef.current.animate([{opacity:0,offset:0},{opacity:1,offset:.1},{opacity:1,offset:.9},{opacity:0,offset:.91}],this.props.delay):this.containerRef.current.style.opacity=1})),void 0!==this.props.delay&&setTimeout(this.setTimeoutCallback.bind(this,i),this.props.delay)},this.hideAlert=()=>this.setState({visible:!1}),this.state={visible:!1,setVisibleCounter:0,alertType:null,alertMessage:null},this.containerRef=o.createRef(),this.showAlert=this.showAlert.bind(this),this.hideAlert=this.hideAlert.bind(this),this.setTimeoutCallback=this.setTimeoutCallback.bind(this),this.mounted=!1}componentWillUnmount(){this.mounted=!1}componentDidMount(){this.mounted=!0}render(){return this.state.visible?(0,a.jsxs)("div",{ref:this.containerRef,className:`alert ${"error"===this.state.alertType?"alert-error":""} ${"success"===this.state.alertType?"alert-success":""} ${"warning"===this.state.alertType?"alert-warning":""}`,style:this.props.style?{...this.props.style,animationDuration:void 0!==this.props.delay?this.props.delay+"ms":"auto"}:{animationDuration:void 0!==this.props.delay?this.props.delay+"ms":"auto"},children:[(0,a.jsx)("p",{children:this.state.alertMessage}),(0,a.jsx)("div",{className:"svg-center-inside-container alert-close",onClick:()=>this.setState({visible:!1,setVisibleCounter:this.state.setVisibleCounter+1}),children:(0,a.jsx)(to.A,{})})]}):null}}const mo=po;class uo extends o.PureComponent{render(){const{className:e,onClick:t,children:i,type:o,disabled:n,disabledNative:s,style:r={}}=this.props;return(0,a.jsx)("button",{className:s?"":`button ${o?`button--type-${o}`:""} ${n?"button-disabled":""} ${e||""}`,onClick:n||s?null:t,disabled:s,style:r,children:i})}}const go=uo;var fo=i(4511);class bo extends o.Component{render(){const{buttonType:e,ButtonIcon:t,buttonText:i,loading:o,spinnerLoading:n,spinnerColor:s}=this.props;return(0,a.jsxs)(go,{type:e,disabled:this.props.disabled||!1,style:{position:o?"relative":"static"},onClick:()=>!this.props.disabled&&!o&&this.props.onClick&&this.props.onClick(),children:[(0,a.jsxs)("div",{className:"loading-button-content-container",style:{visibility:o?"hidden":"visible"},children:[t,(0,a.jsx)("span",{children:i})]})," ",o?n?(0,a.jsx)("div",{style:{height:"0.875rem",width:"0.875rem",borderColor:s,borderRightColor:"transparent",position:"absolute",top:"0.6rem",left:"calc(50% - 0.4375rem)",boxSizing:"border-box"},className:"spinner"}):(0,a.jsx)(fo.A,{style:{position:"absolute",top:0,left:0,height:"2.75rem",width:"100%"},animation:"pulse"}):null]})}}const wo=bo;class Co extends o.Component{render(){return(0,a.jsxs)("div",{ref:this.props.containerRef||null,className:`form-group ${this.props.containerClasses||""}`,style:this.props.containerStyle||{},children:[this.props.label&&(0,a.jsx)("label",{style:this.props.labelStyle||{},className:`label form-control ${this.props.labelClasses||""}`,children:this.props.label}),this.props.children]})}}const xo=Co;var _o=i(4573),yo=i(9746),So=i(1290),vo=i(4594),Do=i(9441),To=i(9012);(0,To.Ay)({overrides:{MuiPickersToolbar:{toolbar:{backgroundColor:"#19ab7f"}},MuiPickersCalendarHeader:{switchHeader:{backgroundColor:"#19ab7f"},transitionContainer:{color:"#FFFFFF"},iconButton:{backgroundColor:"transparent"}},MuiTabs:{root:{backgroundColor:"#19ab7f !important"},indicator:{backgroundColor:"rgba(0, 0, 0, 0.54)"}},MuiButton:{textPrimary:{color:"rgba(0, 0, 0, 0.54)",fontWeight:"bold"}},MuiPickersDay:{day:{color:"#19ab7f"},daySelected:{color:"#FFFFFF",backgroundColor:"#19ab7f","&:hover":{backgroundColor:"#19ab7f !important"}},current:{color:"rgba(0, 0, 0, 0.54)"}},MuiPickersClock:{pin:{backgroundColor:"#19ab7f"}},MuiPickersClockPointer:{pointer:{backgroundColor:"#19ab7f"},thumb:{borderColor:"#19ab7f !important"}},MuiPickersClockNumber:{clockNumberSelected:{backgroundColor:"#19ab7f"}},MuiInput:{underline:{"&:after":{borderBottomColor:"#19ab7f !important"}}},MuiFormLabel:{root:{"&$focused":{color:"#19ab7f !important"}},focused:{}},MuiCheckbox:{colorSecondary:{color:"#19ab7f !important"}},MuiIconButton:{root:{"&:$hover":{backgroundColor:"transparent !important"}},colorSecondary:{"&:$hover":{backgroundColor:"#transparent !important"}}},MuiChecked:{root:{"&:$hover":{backgroundColor:"#transparent !important"}}},MuiMenu:{paper:{maxHeight:"40vh"}},MuiPickersModal:{dialogAction:{color:"#19ab7f"}},MuiSlider:{root:{color:"#19ab7f"}}}});const jo=(0,To.Ay)({overrides:{MuiPopover:{root:{zIndex:"1402!important"}},MuiSelect:{root:{"&:$focus":{border:"2px solid #19ab7f !important"}}},MuiInput:{underline:{"&:after":{borderBottomColor:"#19ab7f !important"},"&:before":{borderBottomColor:"#ffffff !important"}}},MuiFormLabel:{root:{"&$focused":{color:"#19ab7f !important"}},focused:{}},MuiIconButton:{colorSecondary:{"&:hover":{backgroundColor:"rgba(27, 215, 65, 0.04)"}}},MuiCheckbox:{colorSecondary:{color:"#19ab7f !important"}},MuiChecked:{root:{"&:$hover":{backgroundColor:"#transparent !important"}}},MuiTypography:{root:{fontSize:"0.875rem !important"}},MuiListItemText:{root:{margin:"0 !important",textAlign:"center"}},MuiMenu:{paper:{maxHeight:"50vh"}}}}),Io=(0,To.Ay)({overrides:{MuiSwitch:{switchBase:{color:"#fff","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)!important"}},colorSecondary:{"&$checked":{color:"#19ab7f","&:hover":{backgroundColor:"rgba(27, 215, 65, 0.04)!important"}}},track:{"$checked$checked + &":{opacity:.7,backgroundColor:"#19ab7f"}}},MuiSlider:{root:{color:"#19ab7f"}}}});var Po=i(3336);class Oo extends o.Component{constructor(e){super(e),this.onChange=e=>{e.persist(),this.setState({value:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.resetValue=()=>{this.setState({value:""})},this.state={value:e.item.value},this.onChange=this.onChange.bind(this),this.resetValue=this.resetValue.bind(this)}render(){return(0,a.jsx)(Po.A,{theme:jo,children:(0,a.jsx)("div",{children:(0,a.jsx)(Do.A,{className:"select-input-form-control",style:{width:this.props.fullWidth?"100%":"50%"},children:(0,a.jsx)(So.A,{disabled:this.props.disabled,MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},labelId:"select-device-label",defaultValue:"",value:this.state.value,renderValue:e=>(0,a.jsx)(yo.A,{children:e.name||e}),onChange:e=>!this.props.disabled&&this.onChange(e),children:this.props.item.options.map((e=>(0,a.jsxs)("div",{value:e,className:"select-menu-item-container",style:{pointerEvents:this.props.viewOnlySelect?"none":"auto"},children:[(0,a.jsxs)(vo.A,{value:e,children:[(0,a.jsx)(_o.A,{checked:(e.value||e)===(this.state.value.value||this.state.value),style:{visibility:(e.value||e)===(this.state.value.value||this.state.value)?"visible":"hidden"}}),(0,a.jsx)(yo.A,{children:e.name||e})]}),e.infoText&&(0,a.jsx)(Eo,{infoText:e.infoText,explanationInfoBoxStyles:this.props.explanationInfoBoxStyles||{}})]},e.value||e)))})})})})}}const ko=Oo;class Fo extends o.Component{constructor(e){super(e),this.onChange=e=>{e.persist(),this.setState({value:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.resetValue=()=>{this.setState({value:[]})},this.state={value:e.item.value||[]},this.onChange=this.onChange.bind(this),this.resetValue=this.resetValue.bind(this)}render(){return(0,a.jsx)(Po.A,{theme:jo,children:(0,a.jsx)("div",{style:{backgroundColor:"#fff"},children:(0,a.jsx)(Do.A,{className:"select-input-form-control",style:{width:this.props.fullWidth?"100%":"50%"},children:(0,a.jsx)(So.A,{disabled:this.props.disabled,multiple:!0,MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},style:{width:"100%"},renderValue:e=>{if(e.length>0){let t=e[0].name||e[0];for(let i=1;i<e.length;i++)t+=", "+e[i].name||0;return t}return""},value:this.state.value,onChange:e=>!this.props.disabled&&this.props.handleChange&&this.onChange(e),children:this.props.item.options.map(((e,t)=>(0,a.jsxs)("div",{value:e,className:"select-menu-item-container",style:{pointerEvents:this.props.viewOnlySelect?"none":"auto"},children:[(0,a.jsxs)(vo.A,{value:e,children:[(0,a.jsx)(_o.A,{checked:!!this.state.value.find((t=>(t.value||t)===(e.value||e)))}),(0,a.jsx)(yo.A,{children:e.name||e})]},t),e.infoText&&(0,a.jsx)(Eo,{infoText:e.infoText})]},e.value||e)))})})})})}}const Mo=Fo;class Ao extends o.Component{constructor(e){super(e),this.setInitialValue=e=>this.initialValue=e,this.setValue=e=>this.setState({value:e}),this.getValue=()=>this.state.value,this.setRangeValues=(e,t)=>{this.setState({min:e,max:t})},this.setValueInsideInterval=e=>(this.props.allowEmpty&&""===e||(e>this.state.max?e=this.state.max:e<this.state.min&&(e=this.state.min)),e),this.onInputChange=e=>{let t=r(e.target.value,this.decimalPrecision),i=e.target.value,o=!1;(!isNaN(t)||this.props.allowEmpty&&""===i)&&(i=this.props.allowEmpty&&""===i?i:t,i===this.setValueInsideInterval(i)&&(o=!0)),this.setState({value:i,isInvalid:!o},(()=>{!this.props.callOnlyOnBlur&&o&&this.props.onInputValueChanged&&this.inputValueChangedCalledWithValue!==i&&(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged(this.state.value))}))},this.onInputBlur=e=>{let t=r(e.target.value,this.decimalPrecision),i=this.initialValue;(!isNaN(t)||this.props.allowEmpty&&""===e.target.value)&&(i=this.props.allowEmpty&&""===e.target.value?e.target.value:t,i=this.setValueInsideInterval(i)),this.setState({value:i,isInvalid:!1},(()=>{(this.props.callOnlyOnBlur||this.props.onInputValueChanged&&this.inputValueChangedCalledWithValue!==i)&&(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged(this.state.value))}))},this.state={value:e.value||"",min:e.inputMin,max:e.inputMax,isInvalid:!1},this.decimalPrecision=-Math.log10(e.inputStep),this.initialValue=void 0!==e.value?e.value:e.inputMin,this.inputValueChangedCalledWithValue=null,this.setValue=this.setValue.bind(this),this.getValue=this.getValue.bind(this),this.setRangeValues=this.setRangeValues.bind(this),this.setInitialValue=this.setInitialValue.bind(this),this.setValueInsideInterval=this.setValueInsideInterval.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}render(){console.log("Is invalid "+this.state.isInvalid);const{value:e,min:t,max:i,isInvalid:o}=this.state;return(0,a.jsx)("input",{type:"number",min:t,max:i,step:this.props.inputStep,placeholder:this.props.placeholder||"",title:this.props.title||"",style:this.props.inputStyle||{},lang:"en",className:`form-control input ${o?"is-invalid":""} ${this.props.hideNumberArrows?"hide-number-arrows":""} ${this.props.inputClasses||""} ${this.props.disabled?"form-disabled-input":""}`,value:this.props.usePropsValue?this.props.value:e,onChange:this.props.disabled?void 0:this.onInputChange,onBlur:this.props.disabled?void 0:this.onInputBlur,onKeyDown:e=>!this.props.disabled&&"Enter"===e.key&&this.props.callOnlyOnBlur&&e.target.blur()})}}const Ro=Ao;class Lo extends o.Component{constructor(e){super(e),this.setInitialValue=e=>this.initialValue=e,this.setValue=e=>this.inputRef.current.value=e,this.getValue=()=>this.inputRef.current.value,this.setRangeValues=(e,t)=>{this.inputRef.current.setAttribute("min",e),this.inputMin=e,this.inputRef.current.setAttribute("max",t),this.inputMax=t},this.setValueInsideInterval=e=>(this.props.allowEmpty&&""===e||(e>this.inputMax?e=this.inputMax:e<this.inputMin&&(e=this.inputMin)),e),this.onInputChange=e=>{let t=r(e.target.value,this.decimalPrecision),i=e.target.value,o=!1;(!isNaN(t)||this.props.allowEmpty&&""===i)&&(i=this.props.allowEmpty&&""===i?i:t,i===this.setValueInsideInterval(i)&&(o=!0)),this.inputRef.current.value=i,this.setState({isInvalid:!o},(()=>{this.props.callOnlyOnBlur||!o||!this.props.onInputValueChanged||this.props.checkInputValueChangeBeforeCall&&this.inputValueChangedCalledWithValue===i||(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged())}))},this.onInputBlur=e=>{let t=r(e.target.value,this.decimalPrecision),i=this.initialValue;(!isNaN(t)||this.props.allowEmpty&&""===e.target.value)&&(i=this.props.allowEmpty&&""===e.target.value?e.target.value:t,i=this.setValueInsideInterval(i)),this.inputRef.current.value=i,this.setState({isInvalid:!1},(()=>{!this.props.onInputValueChanged||this.props.checkInputValueChangeBeforeCall&&this.inputValueChangedCalledWithValue===i||(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged())}))},this.state={isInvalid:!1},this.inputMin=e.inputMin,this.inputMax=e.inputMax,this.initialValue=void 0!==e.defaultValue?e.defaultValue:e.inputMin,this.decimalPrecision=-Math.log10(e.inputStep),this.inputValueChangedCalledWithValue=null,this.inputRef=o.createRef(),this.setValue=this.setValue.bind(this),this.getValue=this.getValue.bind(this),this.setRangeValues=this.setRangeValues.bind(this),this.setInitialValue=this.setInitialValue.bind(this),this.setValueInsideInterval=this.setValueInsideInterval.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}componentDidMount(){this.props.defaultValue&&(this.inputRef.current.value=this.props.defaultValue)}render(){return(0,a.jsx)("input",{ref:this.inputRef,type:"number",disabled:this.props.disabled,min:this.inputMin,max:this.inputMax,step:this.props.inputStep,placeholder:this.props.placeholder||"",title:this.props.title||"",style:this.props.inputStyle||{},lang:"en",className:`form-control input ${this.state.isInvalid?"is-invalid":""} ${this.props.hideNumberArrows?"hide-number-arrows":""} ${this.props.disabled?"form-disabled-input":""}`,onChange:this.props.disabled?void 0:this.onInputChange,onBlur:this.props.disabled?void 0:this.onInputBlur,onKeyDown:e=>!this.props.disabled&&"Enter"===e.key&&this.props.callOnlyOnBlur&&e.target.blur()})}}const Bo=Lo;class Wo extends o.Component{render(){return(0,a.jsx)("div",{className:"indoor-modal",ref:this.props.modalRef,style:this.props.indoorModalContainerStyle||{},children:(0,a.jsx)("div",{className:`indoor-modal-dialog ${this.props.indoorModalDialogClasses||""}`,style:this.props.indoorModalDialogStyle||{},children:(0,a.jsxs)("div",{className:"indoor-modal-content",children:[(0,a.jsx)("div",{className:"indoor-modal-header",children:(0,a.jsx)("h3",{className:"indoor-modal-title",children:"GLAMOS Indoor Mapping"})}),this.props.modalBody?(0,a.jsx)("div",{className:"indoor-modal-body",children:this.props.modalBody}):null,this.props.modalFooter?(0,a.jsx)("div",{className:"indoor-modal-footer",children:this.props.modalFooter}):null]})})})}}const No=Wo;class Vo extends o.Component{constructor(){super(),this.state={displayMessage:!1},this.infoIconRef=o.createRef()}render(){return(0,a.jsxs)("div",{ref:this.infoIconRef,className:"info-icon-container",style:{...this.props.infoContainerStyles},children:[(0,a.jsx)(io.A,{className:"info-icon",onMouseOver:()=>{if(!this.state.displayMessage){if(this.props.indoorPanelExplanationBox){let e=this.infoIconRef.current.getBoundingClientRect();console.log(e),this.props.indoorPanelExplanationBox.current.style.top=e.top+"px",this.props.indoorPanelExplanationBox.current.style.left=e.left+20+"px",this.props.indoorPanelExplanationBox.current.innerHTML=this.props.infoText,this.props.indoorPanelExplanationBox.current.style.display="block"}this.setState({displayMessage:!0})}},onMouseLeave:()=>{this.state.displayMessage&&(this.props.indoorPanelExplanationBox&&(this.props.indoorPanelExplanationBox.current.style.display="none"),this.setState({displayMessage:!1}))}}),this.props.indoorPanelExplanationBox?null:(0,a.jsx)("div",{className:"explanation-info-box "+(this.props.persistExplanationBox?"explanation-box-persist":""),style:{display:this.state.displayMessage||this.props.persistExplanationBox?"inline-block":"none",...this.props.explanationInfoBoxStyles},children:this.props.infoText})]})}}const Eo=Vo;class Ho extends o.Component{render(){return(0,a.jsxs)("div",{className:"label form-control info-label "+(this.props.disableMarginIncrease?"":"increase-margin"),children:[(0,a.jsx)("span",{children:this.props.labelText}),(0,a.jsx)(Eo,{infoText:this.props.infoText,explanationInfoBoxStyles:{top:20,left:this.props.explanationInfoBoxLeft||0,width:150,zIndex:2}})]})}}const zo=Ho;class Go extends o.Component{render(){return(0,a.jsxs)("div",{className:`checked-input-container ${this.props.disabled?"disabled":""} ${this.props.containerClasses||""}`,style:this.props.containerStyle||{},children:[(0,a.jsx)("input",{ref:this.props.inputRef||null,title:this.props.title,type:"checkbox",onChange:this.props.disabled?void 0:this.props.onChange,defaultChecked:this.props.defaultChecked,disabled:this.props.disabled,checked:this.props.checked}),this.props.label&&(0,a.jsx)("label",{children:this.props.label}),this.props.infoLabel&&(0,a.jsxs)("div",{className:"label-info-box-container",children:[(0,a.jsx)("label",{children:this.props.infoLabelTitle}),(0,a.jsx)(Eo,{infoText:this.props.infoText,explanationInfoBoxStyles:this.props.explanationInfoBoxStyles||{}})]})]})}}const qo=Go;var Uo=i(8493);class Yo extends o.Component{constructor(){super(),this.onColorChange=e=>!this.props.disabled&&this.props.onChange(this.props.item)({target:{value:e}}),this.onOpenColorPickerClick=()=>{this.setState({isColorPickerVisible:!this.state.isColorPickerVisible})},this.colorPickerPopupRaycasting=e=>{this.state.isColorPickerVisible&&(l(e.clientX,e.clientY,this.colorPickerPopupContainerRef.current.getElementsByClassName("react-colorful")[0].getBoundingClientRect())||l(e.clientX,e.clientY,this.colorPickerInputContainerRef.current.getBoundingClientRect())||this.setState({isColorPickerVisible:!1}))},this.updateInputsPadding=()=>{const e=this.colorPickerInputContainerRef.current.getElementsByClassName("input");for(let t=0;t<e.length;t++)e[t].style.paddingLeft=this.colorPickerInputContainerRef.current.offsetHeight+this.paddingValue+"px"},this.state={isColorPickerVisible:!1},this.colorPickerPopupContainerRef=o.createRef(),this.colorPickerInputContainerRef=o.createRef(),this.paddingValue=3,this.onColorChange=this.onColorChange.bind(this),this.onOpenColorPickerClick=this.onOpenColorPickerClick.bind(this),this.colorPickerPopupRaycasting=this.colorPickerPopupRaycasting.bind(this),this.updateInputsPadding=this.updateInputsPadding.bind(this)}componentWillUnmount(){this.props.boxContainer&&this.props.boxContainer.removeEventListener("click",this.colorPickerPopupRaycasting)}componentDidMount(){this.updateInputsPadding(),this.props.boxContainer&&this.props.boxContainer.addEventListener("click",this.colorPickerPopupRaycasting)}render(){return(0,a.jsxs)("div",{className:"color-picker-container",style:this.props.containerStyle||{},children:[(0,a.jsx)("div",{ref:this.colorPickerPopupContainerRef,className:"color-picker-popup-container",style:{display:this.state.isColorPickerVisible?"block":"none",opacity:this.state.isColorPickerVisible?1:0,pointerEvents:this.state.isColorPickerVisible?"auto":"none"},children:(0,a.jsx)(Uo.jI,{color:this.props.item.value,onChange:this.onColorChange,disabled:this.props.disabled})}),(0,a.jsxs)("div",{ref:this.colorPickerInputContainerRef,className:"color-picker-input-container input-auto-width",children:[(0,a.jsx)("span",{className:"form-control input keep-width-span",style:{paddingRight:this.paddingValue},children:"#000000"}),(0,a.jsx)(Uo.HC,{className:"form-control input color-picker-input",style:{paddingRight:this.paddingValue},color:this.props.item.value,prefixed:!0,disabled:this.props.disabled,onChange:this.onColorChange}),(0,a.jsx)("div",{className:"color-value-layout",style:{backgroundColor:this.props.item.value},onClick:this.onOpenColorPickerClick})]})]})}}const Xo=Yo;var Ko=i(8092);class Zo extends o.Component{constructor(e){super(),this.setValue=e=>this.setState({value:e}),this.copyInputValue=()=>{if(navigator.clipboard)navigator.clipboard.writeText(this.inputRef.current.textContent).then((()=>{this.setState({showCopyStatus:!0,copyStatusText:"Copied!"},(()=>{setTimeout((()=>{this.setState({showCopyStatus:!1})}),1e3)}))})).catch((()=>{this.setState({showCopyStatus:!0,copyStatusText:"Can't copy!"})}));else{const e=document.createElement("textarea");e.value=this.inputRef.current.textContent,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),this.setState({showCopyStatus:!0,copyStatusText:"Copied!"},(()=>{setTimeout((()=>{this.setState({showCopyStatus:!1})}),1e3)}))}},this.state={showCopyStatus:!1,value:e.value},this.inputRef=o.createRef(),this.setValue=this.setValue.bind(this),this.copyInputValue=this.copyInputValue.bind(this)}render(){const{showCopyStatus:e,copyStatusText:t,value:i}=this.state;return i?(0,a.jsxs)("div",{style:{width:"100%",...this.props.containerStyle},children:[(0,a.jsxs)("div",{className:"copy-alert-and-label-container",children:[(0,a.jsx)("label",{className:"label form-control",children:this.props.label}),(0,a.jsx)("div",{style:{display:e?"block":"none"},children:t})]}),(0,a.jsxs)("div",{className:"clipboard-label",children:[(0,a.jsx)("div",{ref:this.inputRef,style:{wordBreak:"break-all"},className:"form-control input form-disabled-input",children:i}),(0,a.jsx)("div",{className:"clipboard-container copy-input",onClick:this.copyInputValue,children:(0,a.jsx)(Ko.A,{className:"copy-icon"})})]})]}):null}}const $o=Zo;class Jo extends o.Component{render(){return(0,a.jsxs)(xo,{containerRef:this.props.formGroupRef||null,containerClasses:this.props.containerClasses,containerStyle:this.props.formGroupStyle,label:this.props.label,labelStyle:this.props.labelStyle,labelClasses:this.props.labelClasses,children:[this.props.inputLoading?(0,a.jsx)("div",{children:(0,a.jsx)(Zn,{center:!0,noMargin:!0,spinnerStyle:{width:20,height:20}})}):(0,a.jsx)(o.Fragment,{children:this.props.selectInput?this.props.selectBoxComboInput?(0,a.jsx)(Un,{disabled:this.props.disabled,item:this.props.item,handleChange:this.props.onChange}):this.props.multiple?(0,a.jsx)(Mo,{disabled:this.props.disabled,ref:this.props.selectInputRef||null,fullWidth:this.props.fullWidth,item:this.props.item,handleChange:this.props.onChange}):(0,a.jsx)(ko,{disabled:this.props.disabled,ref:this.props.selectInputRef||null,fullWidth:this.props.fullWidth,explanationInfoBoxStyles:this.props.explanationInfoBoxStyles,item:this.props.item,handleChange:this.props.onChange}):(0,a.jsx)(tn,{inputProps:{item:this.props.item,onChange:this.props.onChange,inputRef:this.props.inputRef,inputClasses:this.props.inputClasses,disabled:this.props.disabled,inputStyle:this.props.inputStyle,value:"file"!==this.props.type?this.props.value:void 0,error:this.props.error,type:this.props.type,placeholder:this.props.placeholder,accept:this.props.accept,inputMultiple:this.props.inputMultiple}})}),this.props.error&&(0,a.jsx)("div",{className:`form-control feedback ${this.props.errorClasses||""}`,children:this.props.error}),this.props.bellowInputElements&&this.props.bellowInputElements]})}}const Qo=Jo;class en extends o.Component{render(){return(0,a.jsx)("input",{ref:this.props.inputProps.inputRef||null,className:`form-control input ${this.props.inputProps.inputClasses||""} ${this.props.inputProps.error?"is-invalid":""} ${this.props.inputProps.disabled?"form-disabled-input":""}`,style:this.props.inputProps.inputStyle||{},value:this.props.inputProps.value,disabled:this.props.inputProps.disabled,type:this.props.inputProps.type||"text",placeholder:this.props.inputProps.placeholder||"",onChange:!this.props.inputProps.disabled&&this.props.inputProps.onChange?this.props.inputProps.onChange(this.props.inputProps.item):void 0,accept:this.props.inputProps.accept,multiple:this.props.inputProps.inputMultiple})}}const tn=en;class on extends o.Component{render(){return(0,a.jsxs)("div",{ref:this.props.containerRef||null,className:`form-group inline ${this.props.autoWidth?"auto-width-container":""} ${this.props.containerClasses||""}`,style:this.props.containerStyle||{},children:[(0,a.jsx)("div",{className:"label-container",children:(0,a.jsx)("label",{style:this.props.labelStyle||{},className:`label form-control ${this.props.labelClasses||""}`,children:this.props.label})}),(0,a.jsxs)("div",{className:"input-container "+(this.props.autoWidth?"input-auto-width":""),children:[this.props.autoWidth&&(0,a.jsx)("span",{className:`form-control input ${this.props.autoWidthClass}`,children:this.props.keepWidthValue}),this.props.isColorInput?(0,a.jsx)(Xo,{disabled:this.props.disabled,item:this.props.item,onChange:this.props.onChange,boxContainer:this.props.colorPickerBoxContainer}):this.props.isNumberInput?this.props.controledNumberInput?(0,a.jsx)(Ro,{placeholder:this.props.item.placeholder,disabled:this.props.disabled,inputStep:this.props.item.step,inputMin:this.props.item.min,inputMax:this.props.item.max,usePropsValue:this.props.usePropsValue,value:this.props.item.value,onInputValueChanged:this.props.onChange(this.props.item)}):(0,a.jsx)(Bo,{ref:this.props.uncontroledNumberInputRef,disabled:this.props.disabled,placeholder:this.props.item.placeholder,inputStep:this.props.item.step,inputMin:this.props.item.min,inputMax:this.props.item.max,onInputValueChanged:this.props.onChange(this.props.item)}):(0,a.jsx)(tn,{inputProps:{item:this.props.item,onChange:this.props.onChange,inputRef:this.props.inputRef,inputClasses:this.props.inputClasses,disabled:this.props.disabled,inputStyle:this.props.inputStyle,value:this.props.value,error:this.props.error,type:this.props.type,placeholder:this.props.placeholder,accept:this.props.accept}}),this.props.error&&(0,a.jsx)("div",{className:`form-control feedback ${this.props.errorClasses||""}`,children:this.props.error})]})]})}}const nn=on;class sn extends o.Component{render(){return(0,a.jsxs)(xo,{label:this.props.label,containerStyle:this.props.formGroupContainerStyle||{},children:[(0,a.jsx)("div",{className:"form-radio-group",style:this.props.radioGroupContainerStyle||{},children:this.props.item.choices.map(((e,t)=>(0,a.jsxs)("div",{style:this.props.choiceRowStyle||{},children:[!this.props.rightLabel&&(0,a.jsx)("label",{className:"left-label",children:e.name}),(0,a.jsx)("input",{disabled:this.props.disabled,value:e.value,type:"radio",checked:this.props.item.value===e.value,onChange:this.props.disabled?void 0:this.props.onChange(this.props.item)}),this.props.rightLabel&&(0,a.jsx)("label",{className:"right-label",children:e.name}),e.inputSiblingElement||null]},t)))}),this.props.item.error&&(0,a.jsx)("div",{className:"form-control feedback",children:this.props.item.error})]})}}const an=sn;var rn=i(1485);class ln extends o.Component{constructor(){var e;super(),e=this,this.getSearchInputValue=()=>this.state.searchInputValue,this.setSearchInputValue=function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?e.onSearchInputChange({target:{value:t}}):e.setState({searchInputValue:t})},this.onSearchInputChange=e=>{this.setState({searchInputValue:e.target.value},(()=>this.props.onSearchInputChangeCallback(this.state.searchInputValue)))},this.state={searchInputValue:""},this.getSearchInputValue=this.getSearchInputValue.bind(this),this.setSearchInputValue=this.setSearchInputValue.bind(this),this.onSearchInputChange=this.onSearchInputChange.bind(this)}render(){return(0,a.jsxs)("div",{className:"search-container",children:[(0,a.jsxs)("div",{style:{flexGrow:1},children:[(0,a.jsx)("div",{className:"hidden-placeholder",children:"Search"}),(0,a.jsx)("input",{placeholder:"Search",className:"form-control input",value:this.state.searchInputValue,onChange:this.onSearchInputChange})]}),(0,a.jsx)("div",{className:"search-icon-container",children:(0,a.jsx)(rn.A,{})})]})}}const hn=ln;class cn extends o.Component{render(){return(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("span",{style:{visibility:"hidden"},children:this.props.longText}),(0,a.jsx)("div",{style:{position:"absolute",left:0,top:0},children:(0,a.jsx)("span",{children:this.props.shortText})})]})}}const dn=cn;class pn extends o.Component{render(){return(0,a.jsxs)("header",{className:"layout__header",children:[this.props.title&&(0,a.jsx)("h1",{className:"layout__title",children:this.props.title}),this.props.controls&&(0,a.jsx)("div",{className:"layout__controls",children:this.props.controls})]})}}const mn=pn,un=o.createContext({Header:()=>null});class gn extends o.Component{render(){return(0,a.jsx)(un.Provider,{value:{Header:this.props.CustomHeader||null},children:this.props.children})}}class fn extends o.Component{render(){const{activeRoute:e,children:t,title:i,controls:o,responseError:n,indoorMapping:s=!1,hideLayoutHeader:r=!1}=this.props;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(un.Consumer,{children:t=>{let{Header:i}=t;return e&&i&&(0,a.jsx)(i,{activeRoute:e})}}),(0,a.jsxs)("main",{className:`layout container ${"Map"===i?"fieldmap-container":""} ${s?"layout-indoormapping":""}`,children:[!r&&(0,a.jsx)(mn,{title:i,controls:!D(n)&&o}),D(n)?v(n):t]})]})}}const bn=fn;var wn=i(4420);class Cn extends o.Component{render(){return(0,a.jsx)(wn.ov,{visualizePitch:!0,style:{boxShadow:"none",...this.props.style||{}}})}}const xn=Cn;class _n extends o.Component{render(){return(0,a.jsx)(wn.g0,{unit:this.props.unitSystem,position:"top-left"})}}const yn=_n;var Sn=i(4663);class vn extends o.Component{render(){return(0,a.jsxs)("div",{className:"map-onhover-dropdown-list-options-container",children:[(0,a.jsx)("div",{className:"bolded-title",children:"STYLES"}),this.props.mapStyles.map((e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:e.name}),(0,a.jsx)("div",{children:(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsx)(Sn.A,{checked:this.props.selectedMapStyle===e.value,onChange:this.props.switchLayer(e.value)})})})]},e.value)))]})}}const Dn=vn;class Tn extends o.Component{render(){return(0,a.jsx)(xo,{containerStyle:{marginBottom:this.props.sizePoliceComponent?0:"0.5rem"},label:!this.props.sizePoliceComponent&&this.props.valueLabelText,children:(0,a.jsx)("input",{ref:this.props.sliderInputRef,type:"range",disabled:this.props.disabled,step:this.props.sliderStep,min:this.props.minValue,max:this.props.maxValue,className:"range "+(this.props.disabled?"disabled":""),onChange:this.props.disabled?void 0:this.props.onSliderChange,onMouseUp:()=>!this.props.disabled&&this.props.onSliderChangeFinished&&this.props.onSliderChangeFinished()})})}}const jn=Tn;class In extends o.Component{render(){return(0,a.jsx)("div",{children:(0,a.jsx)(Bo,{ref:this.props.inputNumberComponentRef,inputStep:this.props.sliderStep,disabled:this.props.disabled,inputMin:this.props.minValue,inputMax:this.props.maxValue,onInputValueChanged:this.props.onInputChange,checkInputValueChangeBeforeCall:!1})})}}const Pn=In;class On extends o.Component{constructor(){super(),this.onSliderChange=e=>{this.props.onSliderValueChanged(e.target.value),this.inputNumberComponentRef.current.setValue(this.props.sliderInputRef.current.value)},this.onInputChange=()=>{this.props.sliderInputRef.current.value=this.inputNumberComponentRef.current.getValue(),this.props.onSliderValueChanged(this.props.sliderInputRef.current.value),this.props.onSliderChangeFinished&&this.props.onSliderChangeFinished()},this.setNumberInputInitialValues=e=>{this.inputNumberComponentRef.current.setInitialValue(e),this.inputNumberComponentRef.current.setValue(e)},this.setMaxMinRangeValues=(e,t)=>{this.props.sliderInputRef.current.setAttribute("min",e),this.props.sliderInputRef.current.setAttribute("max",t),this.inputNumberComponentRef.current.setRangeValues(e,t)},this.containerRef=o.createRef(),this.inputNumberComponentRef=o.createRef(),this.setMaxMinRangeValues=this.setMaxMinRangeValues.bind(this),this.setNumberInputInitialValues=this.setNumberInputInitialValues.bind(this),this.onSliderChange=this.onSliderChange.bind(this),this.onInputChange=this.onInputChange.bind(this)}componentDidMount(){this.props.defaultValue&&(this.props.sliderInputRef.current.value=this.props.defaultValue,this.inputNumberComponentRef.current.setValue(this.props.defaultValue),this.inputNumberComponentRef.current.setInitialValue(this.props.defaultValue))}render(){return(0,a.jsxs)("div",{ref:this.containerRef,className:"form-group",children:[this.props.sizePoliceComponent&&this.props.sizePoliceComponent,this.props.sizePoliceComponent?(0,a.jsxs)("div",{className:"modify-size-police-container",children:[(0,a.jsx)(jn,{disabled:this.props.disabled,valueLabelText:this.props.valueLabelText,sizePoliceComponent:this.props.sizePoliceComponent,sliderInputRef:this.props.sliderInputRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onSliderChange:this.onSliderChange,onSliderChangeFinished:this.props.onSliderChangeFinished}),(0,a.jsx)(Pn,{disabled:this.props.disabled,inputNumberComponentRef:this.inputNumberComponentRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onInputChange:this.onInputChange})]}):(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(jn,{disabled:this.props.disabled,valueLabelText:this.props.valueLabelText,sliderInputRef:this.props.sliderInputRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onSliderChange:this.onSliderChange,onSliderChangeFinished:this.props.onSliderChangeFinished}),(0,a.jsx)(Pn,{disabled:this.props.disabled,inputNumberComponentRef:this.inputNumberComponentRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onInputChange:this.onInputChange})]})]})}}const kn=On;var Fn=i(7920),Mn=i(5906);class An extends o.Component{constructor(){super(),this.handleYesClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!0},(()=>{this.props.userChoice()}))},this.handleOkClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!1},(()=>{this.props.userChoice&&this.props.userChoice()}))},this.handleNoClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!1},(()=>{this.props.userChoice&&this.props.userChoice()}))},this.handleYesClick=this.handleYesClick.bind(this),this.handleNoClick=this.handleNoClick.bind(this),this.handleOkClick=this.handleOkClick.bind(this)}render(){const{message:e,visible:t,loading:i,loadingText:n,singleButton:s,type:r,error:l,buttonGreenText:h,buttonCancelText:c}=this.props;return t?(0,a.jsx)("div",{className:"popup-disable-background",children:(0,a.jsx)("div",{className:"popup-container",style:this.props.containerStyle||{},children:this.props.children?this.props.children:(0,a.jsxs)(o.Fragment,{children:[l?(0,a.jsx)("div",{className:"popup-icon-container",children:(0,a.jsx)(Fn.A,{className:"popup-alert-icon"})}):1===r?s&&!i?(0,a.jsx)("div",{className:"popup-icon-container",children:(0,a.jsx)(Mn.A,{className:"popup-success-icon"})}):s?null:(0,a.jsx)("div",{className:"popup-icon-container",children:(0,a.jsx)(Fn.A,{className:"popup-alert-icon"})}):2===r?(0,a.jsx)("div",{className:"popup-icon-container",children:(0,a.jsx)(Fn.A,{className:"popup-alert-icon"})}):3===r?(0,a.jsx)("div",{className:"popup-icon-container",children:(0,a.jsx)(io.A,{className:"popup-alert-icon"})}):void 0,i?(0,a.jsxs)(o.Fragment,{children:[n?(0,a.jsx)("div",{className:"popup-message",children:n}):null,(0,a.jsx)(Zn,{center:!0})]}):(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{className:"popup-message",children:l||e}),(0,a.jsx)("div",{className:"popup-button-container",children:(()=>s?(0,a.jsx)(go,{type:"primary",onClick:this.handleOkClick,children:"OK"}):s||1!==r?s||2!==r?null:(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(go,{type:"popup-delete",onClick:this.handleYesClick,children:"Delete"}),(0,a.jsx)(go,{type:"popup-cancel",onClick:this.handleNoClick,children:"Cancel"})]}):(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(go,{type:"primary",style:{borderRadius:"0.75rem"},onClick:this.handleYesClick,children:h||"Confirm"}),(0,a.jsx)(go,{type:"popup-cancel",onClick:this.handleNoClick,children:c||"Cancel"})]}))()})]})]})})}):null}}const Rn=An;class Ln extends o.PureComponent{constructor(e){super(),this.checkMapCenterUpdate=()=>{JSON.stringify(this.props.center)!==JSON.stringify(this.mapCurrentCenter)&&(this.mapCurrentCenter=this.props.center,this._map.setCenter(this.mapCurrentCenter))},this.onMapLoad=e=>{this._map=e.target,this.checkMapCenterUpdate(),this.props.onMapLoadCallback&&this.props.onMapLoadCallback(this._map)},this._map=null,this.mapCurrentCenter=e.center,this.checkMapCenterUpdate=this.checkMapCenterUpdate.bind(this),this.onMapLoad=this.onMapLoad.bind(this)}componentDidUpdate(){this._map&&this.checkMapCenterUpdate()}render(){return(0,a.jsx)(wn.KU,{children:(0,a.jsx)(wn.T5,{mapboxAccessToken:"pk.eyJ1Ijoic2xhdmVuZGFtIiwiYSI6ImNrZ3pudHFxZzE1ZHoycnIxOXEzMndidTEifQ.sKPryHAJXxnH32c2W0HPsQ",mapStyle:this.props.mapStyle||"mapbox://styles/mapbox/light-v11",initialViewState:{longitude:this.props.center[0],latitude:this.props.center[1],zoom:p(this.props.zoom)?11:this.props.zoom},minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,preserveDrawingBuffer:this.props.preserveDrawingBuffer,onClick:this.props.onClick,onZoom:this.props.onZoom,onZoomStart:this.props.onZoomStart,onZoomEnd:this.props.onZoomEnd,onPitchStart:this.props.onPitchStart,onPitchEnd:this.props.onPitchEnd,onLoad:this.onMapLoad,children:this.props.children})})}}const Bn=Ln;class Wn extends o.Component{render(){return(0,a.jsxs)("div",{className:"screen-centered response-error-container",children:[(0,a.jsx)("div",{className:"popup-icon-container",children:(0,a.jsx)(Fn.A,{className:"popup-alert-icon"})}),(0,a.jsx)("p",{className:"error-message",children:this.props.message})]})}}const Nn=Wn;class Vn extends o.Component{render(){return"403"===this.props.responseError?(0,a.jsx)(Nn,{message:"You do not have access to this site."}):"401"===this.props.responseError?(0,a.jsx)(Nn,{message:"Session expired, please log in again."}):!this.props.errorMessageCheckDisabled&&D(this.props.responseError)?this.props.contextError?(0,a.jsx)("div",{style:{padding:"1rem"},children:v(this.props.responseError)}):v(this.props.responseError):this.props.customResponseError?(0,a.jsx)(Nn,{message:this.props.customResponseError}):(0,a.jsx)(o.Fragment,{children:this.props.children})}}const En=Vn;var Hn=i(6286);class zn extends o.Component{render(){return(0,a.jsxs)("div",{className:`screen-centered-tabs-and-close-button-modal ${this.props.className||""}`,style:this.props.modalStyles||{},children:[(0,a.jsx)("div",{className:"tab-labels-container",children:this.props.modalTabs||(0,a.jsx)("div",{className:"keep-height",children:"Keep height"})}),(0,a.jsx)("div",{className:"close-button-container",onClick:this.props.onCloseModalClick,children:(0,a.jsx)(Hn.A,{})}),this.props.children]})}}const Gn=zn;class qn extends o.Component{constructor(e){super(e),this.handleSelectChange=e=>{"Other..."===e.target.value?this.state.showInputBox||(this.inputRef.current.focus(),e.target.value="",this.setState({showInputBox:!0,inputValue:"",selectValue:this.props.item.options[this.props.item.options.length-1]},(()=>this.props.handleChange(this.props.item)(e)))):this.setState({showInputBox:!1},(()=>this.handleChangeSelect(e)))},this.onInputChange=()=>e=>this.handleChangeInput(e),this.handleChangeInput=e=>{e.persist(),this.setState({inputValue:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.handleChangeSelect=e=>{e.persist(),this.setState({selectValue:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.state={selectValue:e.item.options.find((t=>t===e.item.value))||""===e.item.value?e.item.value:e.item.options[e.item.options.length-1],inputValue:e.item.options.find((t=>t===e.item.value))||""===e.item.value?"":e.item.value||"",showInputBox:!e.item.options.find((t=>t===e.item.value))&&""!==e.item.value},this.inputRef=o.createRef(),this.handleSelectChange=this.handleSelectChange.bind(this),this.onInputChange=this.onInputChange.bind(this),this.handleChangeInput=this.handleChangeInput.bind(this),this.handleChangeSelect=this.handleChangeSelect.bind(this)}render(){return(0,a.jsx)(Po.A,{theme:jo,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(Do.A,{className:"select-input-form-control",style:{width:"50%"},children:(0,a.jsx)(So.A,{disabled:this.props.disabled,MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},labelId:"select-device-label",value:this.state.selectValue,renderValue:e=>(0,a.jsx)(yo.A,{children:e}),onChange:e=>!this.props.disabled&&this.handleSelectChange(e),children:this.props.item.options.map((e=>(0,a.jsxs)(vo.A,{value:e,children:[(0,a.jsx)(_o.A,{checked:e===this.state.selectValue,style:{visibility:e===this.state.selectValue?"visible":"hidden"}}),(0,a.jsx)(yo.A,{children:e})]},e)))})}),(0,a.jsx)(Qo,{disabled:this.props.disabled,formGroupRef:this.inputRef,formGroupStyle:{width:"50%",display:this.state.showInputBox?"block":"none"},placeholder:"Type name",value:this.state.inputValue,error:this.props.item.error,onChange:this.onInputChange})]})})}}const Un=qn;class Yn extends o.Component{constructor(){super(),this.closeDropdownMenu=()=>this.actionButtonRef.current.nextSibling.classList.remove("show"),this.setValue=e=>{this.actionButtonRef.current.innerHTML=e+' <span class="caret"></span>',this.setState({selectedValue:e}),this.closeDropdownMenu()},this.onActionButtonClick=e=>{!this.props.disabled&&e.target.nextSibling&&e.target.nextSibling.classList.toggle("show")},this.handleClickOutside=e=>{this.props.disableCloseOnOutsideClick||this.containerRef.current&&!this.containerRef.current.contains(e.target)&&this.closeDropdownMenu()},this.state={selectedValue:null},this.onActionButtonClick=this.onActionButtonClick.bind(this),this.setValue=this.setValue.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.closeDropdownMenu=this.closeDropdownMenu.bind(this),this.actionButtonRef=o.createRef(),this.containerRef=o.createRef()}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}render(){return(0,a.jsxs)("div",{ref:this.containerRef,className:`select-custom-mini-container ${this.props.containerClasses||""}`,children:[(0,a.jsx)("button",{disabled:this.props.disabled,ref:this.actionButtonRef,className:"btn btn-default form-control input",onClick:this.onActionButtonClick}),(0,a.jsx)("ul",{ref:this.props.dropdownMenuRef||null,className:"list-unstyled select-custom-mini-dropdown-menu",children:this.props.listItems.map(((e,t)=>(0,a.jsx)("li",{className:""+(e===this.state.selectedValue?"selected":""),onClick:e=>!this.props.disabled&&this.props.onListItemClick(e,t),children:e},e)))})]})}}const Xn=Yn;class Kn extends o.Component{render(){const{center:e,screenCenter:t,spinnerHolderStyle:i={},spinnerStyle:o={},noMargin:n}=this.props;return(0,a.jsx)("div",{style:{...i,textAlign:e?"center":"auto"},className:`spinner-holder ${t?"screen-centered":""} ${n?"spinner-holder-no-margin":""}`,children:(0,a.jsx)("div",{style:o,className:"spinner"})})}}const Zn=Kn;var $n=i(3045),Jn=i(7219),Qn=i(5126),es=i(1272),ts=i(9428),is=i(8292),os=i(4276);class ns extends o.Component{render(){return(0,a.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 60 60",style:{enableBackground:"new 0 0 60 60",width:22,height:22},xmlSpace:"preserve",children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M58,37.104V4c0-0.553-0.448-1-1-1H1C0.448,3,0,3.447,0,4v44c0,0.553,0.448,1,1,1h34.003c1.963,4.693,6.6,8,11.997,8\r c7.168,0,13-5.832,13-13C60,41.465,59.26,39.105,58,37.104z M34.359,47H2V5h54v29.622c-0.17-0.164-0.354-0.311-0.532-0.465\r c-0.088-0.075-0.171-0.155-0.261-0.228c-0.235-0.192-0.48-0.37-0.728-0.545c-0.092-0.065-0.181-0.135-0.275-0.198\r c-0.245-0.163-0.498-0.312-0.754-0.458c-0.109-0.063-0.214-0.13-0.325-0.189c-0.077-0.041-0.154-0.083-0.232-0.123\r c0.179-0.385,0.112-0.852-0.218-1.154l-12-11c-0.196-0.179-0.45-0.277-0.72-0.262c-0.265,0.012-0.515,0.129-0.694,0.325\r l-9.794,10.727l-4.743-4.743c-0.374-0.373-0.972-0.391-1.368-0.044L6.339,41.249c-0.415,0.365-0.455,0.997-0.09,1.412\r C6.447,42.886,6.723,43,7,43c0.234,0,0.47-0.082,0.66-0.249l16.313-14.362l10.302,10.301c0.203,0.203,0.47,0.295,0.736,0.287\r C34.361,40.523,34,42.22,34,44c0,0.493,0.033,0.977,0.087,1.456c0.009,0.075,0.024,0.149,0.034,0.224\r c0.056,0.428,0.131,0.849,0.227,1.262C34.353,46.961,34.354,46.981,34.359,47z M48.779,31.136\r c-0.162-0.022-0.321-0.055-0.485-0.071C47.867,31.023,47.435,31,47,31c-4.773,0-8.942,2.593-11.203,6.437\r c-0.036-0.054-0.06-0.114-0.107-0.162l-4.807-4.807l9.181-10.054l9.694,8.887c-0.067-0.015-0.133-0.032-0.2-0.045\r C49.301,31.204,49.039,31.172,48.779,31.136z M47,55c-4.787,0-8.859-3.08-10.367-7.358c-0.094-0.267-0.176-0.536-0.249-0.806\r c-0.015-0.058-0.03-0.115-0.045-0.173c-0.06-0.238-0.112-0.476-0.156-0.716c-0.024-0.133-0.042-0.267-0.061-0.401\r c-0.026-0.18-0.054-0.36-0.071-0.54C36.021,44.674,36,44.339,36,44c0-6.065,4.935-11,11-11c0.426,0,0.848,0.031,1.265,0.079\r c0.127,0.015,0.25,0.039,0.375,0.057c0.291,0.044,0.579,0.096,0.863,0.162c0.141,0.033,0.281,0.07,0.421,0.108\r c0.268,0.074,0.531,0.159,0.792,0.253c0.134,0.048,0.269,0.094,0.4,0.147c0.295,0.119,0.583,0.255,0.866,0.399\r c0.083,0.042,0.17,0.077,0.252,0.121c0.342,0.185,0.671,0.393,0.992,0.614c0.131,0.09,0.255,0.19,0.382,0.286\r c0.199,0.15,0.395,0.305,0.584,0.469c0.127,0.11,0.251,0.224,0.373,0.339c0.193,0.184,0.379,0.377,0.559,0.575\r c0.094,0.103,0.191,0.202,0.281,0.309c0.261,0.311,0.51,0.634,0.739,0.976C57.315,39.643,58,41.743,58,44\r C58,50.065,53.065,55,47,55z"}),(0,a.jsx)("path",{d:"M53,43h-5v-5c0-0.553-0.448-1-1-1s-1,0.447-1,1v5h-5c-0.552,0-1,0.447-1,1s0.448,1,1,1h5v5c0,0.553,0.448,1,1,1\r s1-0.447,1-1v-5h5c0.552,0,1-0.447,1-1S53.552,43,53,43z"}),(0,a.jsx)("path",{d:"M16,25.138c3.071,0,5.569-2.498,5.569-5.568C21.569,16.498,19.071,14,16,14s-5.569,2.498-5.569,5.569\r C10.431,22.64,12.929,25.138,16,25.138z M16,16c1.968,0,3.569,1.602,3.569,3.569S17.968,23.138,16,23.138s-3.569-1.601-3.569-3.568\r S14.032,16,16,16z"})]})})}}const ss=ns;class as extends o.Component{render(){return(0,a.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,a.jsx)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,a.jsx)("path",{d:"M337 583 c-4 -3 -7 -46 -7 -95 l0 -88 -100 0 -100 0 0 -140 0 -140\r 240 0 240 0 0 235 0 235 -133 0 c-74 0 -137 -3 -140 -7z m243 -103 l0 -80 -55\r 0 c-42 0 -55 -3 -55 -15 0 -12 13 -15 55 -15 l55 0 0 -110 0 -110 -105 0 -105\r 0 0 50 c0 38 -4 50 -15 50 -11 0 -15 -12 -15 -50 l0 -50 -90 0 -90 0 0 110 0\r 110 100 0 100 0 0 95 0 95 110 0 110 0 0 -80z"})})})}}const rs=as;class ls extends o.Component{render(){return(0,a.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,a.jsxs)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:[(0,a.jsx)("path",{d:"M375 654 c-16 -17 -12 -53 9 -66 30 -20 66 0 66 37 0 42 -44 59 -75\r 29z"}),(0,a.jsx)("path",{d:"M311 516 c-44 -34 -70 -87 -71 -143 0 -41 28 -26 35 18 6 37 40 87\r 51 76 7 -7 -23 -150 -45 -208 -12 -30 -32 -70 -46 -89 -27 -36 -31 -55 -15\r -65 25 -15 50 11 96 100 l48 94 40 -36 c55 -49 56 -50 56 -111 0 -50 2 -53 23\r -50 18 2 23 10 25 47 5 65 -3 86 -58 146 -28 30 -50 61 -50 68 0 6 7 32 14 57\r 12 40 15 43 22 23 5 -12 26 -33 47 -47 66 -45 94 -28 32 20 -19 14 -47 49 -63\r 78 -24 45 -31 51 -62 54 -27 1 -45 -6 -79 -32z"})]})})}}const hs=ls;class cs extends o.Component{render(){return(0,a.jsx)("svg",{fill:"#000000",height:"800px",width:"800px",version:"1.1",id:"Capa_1",viewBox:"0 0 297 297",children:(0,a.jsx)("path",{d:"M148.5,0C66.653,0,0.067,66.616,0.067,148.499C0.067,230.383,66.653,297,148.5,297s148.433-66.617,148.433-148.501\r C296.933,66.616,230.347,0,148.5,0z M158.597,276.411v-61.274c0-5.575-4.521-10.097-10.097-10.097s-10.097,4.521-10.097,10.097\r v61.274c-62.68-4.908-112.845-55.102-117.747-117.814h61.207c5.575,0,10.097-4.521,10.097-10.097s-4.522-10.097-10.097-10.097\r H20.656C25.558,75.69,75.723,25.497,138.403,20.589v61.274c0,5.575,4.521,10.097,10.097,10.097s10.097-4.521,10.097-10.097V20.589\r c62.681,4.908,112.846,55.102,117.747,117.814h-61.207c-5.575,0-10.097,4.521-10.097,10.097s4.521,10.097,10.097,10.097h61.207\r C271.441,221.31,221.276,271.503,158.597,276.411z"})})}}const ds=cs;class ps extends o.Component{render(){return(0,a.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"20px",viewBox:"-10 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",style:this.props.style||{},children:(0,a.jsxs)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none",children:[(0,a.jsx)("path",{d:"M2061 5100 c-195 -52 -330 -195 -387 -412 -14 -54 -15 -175 -16 -996\r\nl0 -934 25 -37 c64 -96 207 -92 268 6 l24 38 5 935 5 935 22 41 c28 53 83 100\r\n130 113 26 7 431 11 1235 11 1169 0 1199 0 1250 -20 68 -26 133 -90 158 -158\r\n20 -52 20 -79 20 -1230 0 -770 -4 -1190 -10 -1214 -17 -59 -71 -130 -124 -163\r\nl-49 -30 -926 -5 c-699 -4 -931 -8 -947 -17 -37 -22 -83 -82 -90 -119 -9 -51\r\n9 -104 51 -144 l36 -35 932 -3 c647 -2 948 1 985 9 95 19 209 85 287 163 81\r\n82 127 163 155 272 19 75 20 115 20 1278 0 1302 1 1272 -55 1390 -59 126 -156\r\n223 -283 286 -125 62 -79 60 -1422 59 -1179 0 -1228 -1 -1299 -19z"}),(0,a.jsx)("path",{d:"M3300 4448 c-107 -30 -152 -167 -83 -249 49 -58 55 -59 383 -59 165\r\n0 300 -3 300 -8 0 -4 -720 -727 -1601 -1607 -880 -880 -1607 -1612 -1615\r\n-1627 -20 -39 -18 -117 6 -155 36 -60 107 -90 174 -72 36 9 232 201 1651 1620\r\n886 885 1613 1609 1618 1609 4 0 7 -133 7 -296 0 -331 2 -344 69 -390 71 -48\r\n169 -27 225 49 21 28 21 39 24 520 2 271 0 511 -3 535 -9 60 -60 116 -120 131\r\n-56 14 -984 14 -1035 -1z"}),(0,a.jsx)("path",{d:"M373 2456 c-178 -44 -325 -195 -362 -374 -15 -74 -15 -1630 0 -1704\r\n27 -130 119 -254 235 -315 121 -65 96 -63 986 -63 550 0 824 4 860 11 167 35\r\n303 156 357 317 20 59 21 81 21 590 l0 529 -22 33 c-32 47 -68 71 -116 77 -55\r\n7 -123 -26 -154 -75 l-23 -37 -5 -515 c-5 -495 -6 -516 -25 -542 -11 -15 -38\r\n-37 -61 -48 -40 -20 -54 -20 -842 -18 -791 3 -801 3 -828 24 -15 11 -37 33\r\n-48 48 -21 27 -21 37 -24 825 l-2 797 23 44 c16 30 37 51 67 67 l43 23 495 0\r\n495 0 42 25 c100 58 101 196 2 269 -28 21 -38 21 -545 23 -388 1 -530 -2 -569\r\n-11z"})]})})}}const ms=ps;class us extends o.Component{render(){return(0,a.jsx)("svg",{width:"20px",height:"20px",style:{marginRight:5},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"m22 6-3-4-3 4h2v4h-2l3 4 3-4h-2V6zM9.307 4l-6 16h2.137l1.875-5h6.363l1.875 5h2.137l-6-16H9.307zm-1.239 9L10.5 6.515 12.932 13H8.068z"})})}}const gs=us;class fs extends o.Component{render(){return(0,a.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",strokeWidth:"2px",stroke:"#19ab7f",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M10.57,5.8l2.71-2.72a5.4,5.4,0,0,1,7.64,7.64L18.2,13.43"}),(0,a.jsx)("path",{d:"M5.8,10.57,3.08,13.28a5.4,5.4,0,0,0,7.64,7.64l2.71-2.72"}),(0,a.jsx)("line",{x1:"16.77",y1:"7.23",x2:"7.23",y2:"16.77"})]})}}const bs=fs;class ws extends o.Component{render(){return(0,a.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",strokeWidth:"2px",stroke:"#4b4b5a",children:[(0,a.jsx)("path",{d:"M10.56,5.77l2.72-2.72a5.43,5.43,0,0,1,3.84-1.59,5.43,5.43,0,0,1,5.42,5.42A5.43,5.43,0,0,1,21,10.72l-2.72,2.72"}),(0,a.jsx)("path",{d:"M5.77,10.56,3.05,13.28A5.42,5.42,0,1,0,10.72,21l2.72-2.72"}),(0,a.jsx)("line",{x1:"16.79",y1:"7.21",x2:"7.21",y2:"16.79"}),(0,a.jsx)("line",{x1:"20.63",y1:"15.83",x2:"23.5",y2:"15.83"}),(0,a.jsx)("line",{x1:"15.83",y1:"20.63",x2:"15.83",y2:"23.5"}),(0,a.jsx)("line",{x1:"19.19",y1:"19.19",x2:"21.1",y2:"21.1"}),(0,a.jsx)("line",{x1:"3.38",y1:"8.17",x2:"0.5",y2:"8.17"}),(0,a.jsx)("line",{x1:"8.17",y1:"3.38",x2:"8.17",y2:"0.5"}),(0,a.jsx)("line",{x1:"4.81",y1:"4.81",x2:"2.9",y2:"2.9"})]})}}const Cs=ws;class xs extends o.Component{render(){return(0,a.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,a.jsx)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,a.jsx)("path",{d:"M299 595 l-84 -52 -5 -49 c-5 -47 -6 -49 -67 -84 l-62 -35 -3 -88\r c-2 -49 0 -97 4 -107 3 -9 49 -39 100 -66 l94 -47 195 114 194 114 3 87 3 87\r -43 27 c-24 15 -88 55 -144 90 l-100 62 -85 -53z m214 -55 c58 -36 107 -67\r 107 -70 0 -3 -31 -23 -70 -44 l-70 -37 -45 32 -45 32 0 80 c0 43 4 77 8 75 4\r -1 56 -32 115 -68z m-143 -15 c0 -63 -3 -76 -19 -85 -28 -15 -31 -13 -31 18 0\r 18 -10 35 -32 53 l-32 27 49 31 c27 17 53 31 57 31 4 0 8 -34 8 -75z m-100\r -35 c0 -4 -7 -10 -15 -14 -10 -4 -15 1 -15 14 0 13 5 18 15 14 8 -4 15 -10 15\r -14z m28 -77 c-3 -45 -6 -49 -46 -71 l-43 -24 -41 27 -41 27 74 44 c41 24 80\r 44 87 44 9 0 12 -13 10 -47z m352 -31 c0 -44 -5 -63 -17 -74 -27 -22 -331\r -198 -343 -198 -7 0 -10 26 -8 73 l3 72 170 92 c94 51 176 92 183 93 8 0 12\r -18 12 -58z m-231 19 l34 -28 -88 -46 c-97 -52 -96 -52 -113 -35 -9 9 -2 17\r 28 35 27 17 40 31 40 46 0 13 11 29 28 39 35 21 32 22 71 -11z m-233 -97 l74\r -46 0 -74 c0 -41 -3 -74 -7 -74 -5 0 -41 17 -80 37 l-73 38 0 83 c0 45 3 82 6\r 82 4 0 40 -21 80 -46z"})})})}}const _s=xs;class ys extends o.Component{render(){return(0,a.jsxs)("svg",{viewBox:"0 0 1229 1024",children:[(0,a.jsx)("path",{d:"M710.23616 236.98432c1.88416 1.56672 4.20864 2.37568 6.56384 2.37568 1.47456 0 2.95936-0.31744 4.34176-0.96256C724.736 236.70784 727.04 233.09312 727.04 229.12L727.04 215.04l40.96 0 0 40.96-10.24 0c-3.97312 0-7.58784 4.21888-9.2672 7.81312-1.6896 3.60448-1.13664 8.8064 1.40288 11.85792l25.6 31.20128c1.9456 2.33472 4.83328 3.92192 7.87456 3.92192s5.91872-1.2288 7.87456-3.56352l25.6-30.65856c2.53952-3.05152 3.09248-9.18528 1.40288-12.78976C816.54784 260.18816 812.93312 256 808.96 256l-10.24 0 0-40.96 40.96 0 0 14.08c0 3.97312 2.304 7.58784 5.89824 9.27744 1.3824 0.64512 2.85696 0.96256 4.34176 0.96256 2.34496 0 4.67968-0.80896 6.56384-2.37568l30.72-25.6C889.52832 209.43872 890.88 206.55104 890.88 203.52s-1.35168-5.91872-3.67616-7.86432l-30.72-25.6c-3.05152-2.53952-7.31136-3.08224-10.89536-1.41312C841.984 170.32192 839.68 173.93664 839.68 177.92L839.68 184.32l-40.96 0 0-40.96 10.24 0c3.97312 0 7.58784-0.37888 9.2672-3.98336 1.6896-3.60448 1.13664-6.89152-1.40288-9.94304l-25.6-30.23872c-3.90144-4.66944-11.83744-4.43392-15.73888 0.23552l-25.6 30.84288c-2.53952 3.05152-3.09248 5.44768-1.40288 9.04192C750.17216 142.91968 753.78688 143.36 757.76 143.36l10.24 0 0 40.96-40.96 0 0-6.4c0-3.97312-2.304-7.58784-5.89824-9.27744-3.56352-1.66912-7.8336-1.13664-10.89536 1.41312l-30.72 25.6C677.19168 197.59104 675.84 200.47872 675.84 203.52s1.35168 5.91872 3.67616 7.86432L710.23616 236.98432z"}),(0,a.jsx)("path",{d:"M834.37568 469.76c-4.16768 0-14.7456 1.4336-25.62048 4.8128-2.77504-36.99712-33.78176-66.2528-71.4752-66.2528-16.96768 0-32.58368 5.92896-44.87168 15.8208-9.08288-27.72992-33.09568-46.5408-62.83264-46.5408-19.69152 0-37.21216 8.09984-49.70496 21.32992l-3.15392-88.2176c34.95936-25.10848 57.79456-66.07872 57.79456-112.31232 0-76.22656-62.01344-138.24-138.24-138.24s-138.24 62.01344-138.24 138.24c0 53.00224 30.08512 98.93888 73.99424 122.10176l4.62848 216.40192c-8.27392 4.49536-20.82816 12.71808-36.89472 27.31008-55.59296 50.52416-73.78944 172.72832-11.008 267.3152 69.888 105.28768 151.77728 150.23104 273.83808 150.23104 129.32096 0 172.58496-64.90112 205.824-131.3792 31.96928-63.93856 32.33792-308.79744 32.33792-319.1808C900.7616 498.46272 869.74464 469.76 834.37568 469.76zM840.93952 836.63872c-31.29344 62.58688-66.304 114.40128-178.33984 114.40128-111.98464 0-183.90016-39.54688-248.23808-136.4992-37.48864-56.48384-53.76-173.21984 6.07232-227.60448 6.46144-5.86752 12.16512-10.46528 16.9984-14.03904l2.29376 107.10016c0.18432 8.47872 6.85056 15.43168 15.68768 15.03232 8.47872-0.18432 15.2064-7.19872 15.03232-15.68768l-10.07616-470.70208c0-27.12576 16.85504-46.08 41.00096-46.08s41.00096 18.95424 41.0112 46.63296l10.24 286.72c0.27648 7.87456 6.48192 14.26432 14.336 14.77632 7.77216 0.48128 14.83776-4.99712 16.15872-12.76928l7.77216-46.08c0.14336-0.84992 0.21504-1.69984 0.21504-2.56 0-23.3472 16.54784-40.96 38.49216-40.96 24.75008 0 36.02432 21.22752 36.02432 40.96l0 30.72c0 8.48896 6.88128 15.36 15.36 15.36s15.36-6.87104 15.36-15.36c0-22.58944 18.37056-40.96 40.96-40.96s40.96 18.37056 40.96 40.96l0 66.56c0 8.47872 6.88128 15.36 15.36 15.36s15.36-6.88128 15.36-15.36l0-39.1168c6.144-2.99008 18.18624-6.97344 25.41568-6.97344 18.3296 0 35.65568 14.92992 35.65568 30.72C870.0416 599.97184 864.79872 788.92032 840.93952 836.63872z"})]})}}const Ss=ys;class vs extends o.Component{render(){return(0,a.jsxs)("svg",{viewBox:"0 0 1024 1024",children:[(0,a.jsx)("path",{d:"M331.7248 412.202667c-3.882667 0.2816-7.765333 0.5888-11.7248 0.5888-87.048533 0-157.866667-70.818133-157.866667-157.866667s70.818133-157.866667 157.866667-157.866667S477.866667 167.876267 477.866667 254.933333c0 3.5584-0.1792 7.082667-0.418133 10.581333l-1.058133-0.187733-33.604267-6.033067c-5.0944-0.913067-10.231467 1.3312-13.0304 5.691733-2.798933 4.352-2.688 9.966933 0.264533 14.216533l41.344 59.4432c4.0448 5.802667 12.0064 7.236267 17.8176 3.2l59.4432-41.344c4.2496-2.952533 6.306133-8.183467 5.1968-13.243733s-5.154133-8.951467-10.24-9.864533l-32.384-5.8112C511.675733 266.077867 512 260.539733 512 254.933333c0-105.873067-86.135467-192-192-192S128 149.060267 128 254.933333s86.135467 192 192 192c8.0128 0 15.906133-0.546133 23.671467-1.5104l-10.487467-28.6208C332.6208 415.274667 332.2112 413.730133 331.7248 412.202667z"}),(0,a.jsx)("path",{d:"M811.9808 527.1296c-7.074133-19.4304-27.3664-32.4864-50.491733-32.4864-6.621867 0-13.013333 1.1008-19.003733 3.285333-3.259733 1.186133-11.144533 5.333333-18.679467 11.076267-9.6-21.188267-30.933333-35.131733-54.442667-35.131733-6.954667 0-13.832533 1.211733-20.4288 3.6096-12.945067 4.7104-23.6288 13.525333-30.651733 25.147733-14.848-18.944-39.492267-26.8544-62.429867-18.5088-14.984533 5.4528-26.6496 16.392533-32.8704 30.805333l-59.5456-147.0208c-9.6-26.368-32.1792-43.400533-57.506133-43.400533-6.877867 0-13.781333 1.245867-20.539733 3.703467-32.017067 11.665067-46.754133 46.3104-34.176 80.8448l98.961067 254.7968c-5.188267 5.879467-12.680533 15.8976-21.102933 31.8976-29.1328 55.415467-8.5504 156.296533 67.566933 212.471467 54.417067 40.157867 104.584533 58.8544 157.883733 58.8544 31.240533 0 63.752533-6.2976 99.3792-19.268267 101.2736-36.864 116.6592-100.0192 123.7248-161.536C884.445867 727.108267 814.9504 535.2704 811.9808 527.1296zM852.1984 783.368533c-6.656 57.9328-19.310933 108.4672-107.042133 140.398933-32.785067 11.9296-62.421333 17.732267-90.624 17.732267-48.2048 0-92.2112-16.605867-142.685867-53.8624-45.448533-33.544533-91.460267-120.328533-60.100267-179.959467 3.3792-6.442667 6.528-11.665067 9.2928-15.829333l32.324267 83.208533c2.56 6.587733 9.966933 9.847467 16.5632 7.296 6.587733-2.56 9.856-9.975467 7.296-16.5632L375.185067 400.059733c-7.7312-21.239467 0.0768-40.891733 18.978133-47.7696 18.645333-6.775467 37.751467 3.822933 45.397333 24.823467l89.745067 221.602133c2.4576 6.084267 9.122133 9.344 15.453867 7.483733 6.2976-1.834667 10.1888-8.1408 9.0112-14.600533l-7.048533-38.2976c-0.136533-0.699733-0.315733-1.390933-0.5632-2.065067-3.217067-8.823467-3.089067-18.0992 0.341333-26.103467 3.3792-7.901867 9.821867-13.917867 18.133333-16.938667 16.64-6.058667 33.143467 3.319467 39.876267 21.8112l8.7552 24.0384 0 0.008533c2.414933 6.638933 9.770667 10.069333 16.401067 7.645867 6.638933-2.414933 10.069333-9.762133 7.645867-16.4096l-0.017067-0.0512c-3.0976-8.5504-2.679467-17.800533 1.160533-26.052267 3.848533-8.260267 10.692267-14.532267 19.2512-17.646933 3.780267-1.373867 7.7056-2.065067 11.6736-2.065067 14.301867 0 27.195733 9.0368 32.093867 22.468267 0 0 17.245867 42.888533 21.026133 52.1216 3.780267 9.250133 9.7792 10.717867 16.1792 8.32s8.686933-9.002667 5.8112-17.1008-11.144533-30.600533-11.144533-30.600533c3.950933-4.096 12.2624-10.6496 17.92-12.714667 3.165867-1.152 6.6048-1.732267 10.24-1.732267 12.219733 0 23.082667 6.434133 26.4448 15.633067C807.534933 589.7472 857.2928 739.2 852.1984 783.368533z"})]})}}const Ds=vs;class Ts extends o.Component{render(){return(0,a.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 95.098 95.098",style:{enableBackground:"new 0 0 95.098 95.098",marginRight:5},xmlSpace:"preserve",children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M47.549,0C21.288,0,0,21.288,0,47.549s21.288,47.549,47.549,47.549c26.262,0,47.549-21.288,47.549-47.549\r S73.811,0,47.549,0z M47.549,85.098C26.844,85.098,10,68.253,10,47.549S26.844,10,47.549,10s37.549,16.845,37.549,37.549\r S68.254,85.098,47.549,85.098z"}),(0,a.jsx)("path",{d:"M77.665,29.911c-0.25-0.428-0.755-0.633-1.231-0.503l-33.783,9.213c-0.186,0.052-0.355,0.151-0.492,0.288L17.596,63.865\r c-0.346,0.354-0.414,0.895-0.164,1.32c0.25,0.428,0.755,0.635,1.232,0.504l33.783-9.214c0.093-0.024,0.182-0.062,0.265-0.11\r c0.083-0.049,0.159-0.108,0.228-0.178l24.562-24.957C77.848,30.879,77.915,30.337,77.665,29.911z M26.705,59.756l16.46-16.725\r l6.179,10.551L26.705,59.756z"})]})})}}const js=Ts;class Is extends o.Component{render(){return(0,a.jsx)("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"22px",height:"22px",viewBox:"0 0 360.39 360.389",style:{enableBackground:"new 0 0 360.39 360.389"},xmlSpace:"preserve",children:(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:"M301.123,173.306L118.995,3.265c-3.242-3.038-7.891-4.049-12.105-2.639c-4.211,1.404-7.317,5.006-8.086,9.389\r L55.602,255.404c-0.854,4.847,1.306,9.717,5.464,12.341c4.152,2.625,9.49,2.465,13.491-0.378l59.968-42.699l47.219,127.448\r c2.127,6.336,8.984,9.765,15.332,7.648l62.087-20.771c6.342-2.116,9.771-8.984,7.648-15.327l-47.228-127.43l73.596-1.975\r c4.905-0.13,9.262-3.215,11.006-7.802C305.929,181.85,304.717,176.654,301.123,173.306z M202.591,172.455\r c-3.842,0.109-7.4,2.004-9.599,5.163c-2.205,3.147-2.778,7.146-1.561,10.781l48.557,131.467l-39.111,13.075l-48.56-131.455\r c-1.224-3.647-4.093-6.502-7.743-7.679c-3.656-1.188-7.643-0.585-10.772,1.649l-49.216,35.027l34.206-194.281l144.19,134.636\r L202.591,172.455z"})})})}}const Ps=Is;class Os extends o.Component{render(){return(0,a.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 347.523 347.523",style:{marginRight:5,enableBackground:"new 0 0 347.523 347.523"},xmlSpace:"preserve",children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M108.674,196.125c-2.857-0.402-5.777-0.592-8.746-0.534c-14.267,0.278-36.342,6.092-60.493,32.207\r c-19.171,20.729-19.954,42.635-20.644,61.961c-0.66,18.474-1.181,33.065-16.507,43.727c-1.506,1.049-2.318,2.837-2.113,4.661\r c0.128,1.147,0.645,2.191,1.434,2.98c0.466,0.466,1.026,0.843,1.658,1.099c28.523,11.553,77.316,5.895,117.044-33.833\r c18.043-18.044,28.812-37.145,31.14-55.233c0.607-4.719,0.618-9.323,0.091-13.763L108.674,196.125z M100.915,229.382\r c-1.553,2.174-3.859,3.612-6.494,4.052c-19.209,3.202-25.884,15.953-26.159,16.494c-1.627,3.387-5.167,5.611-8.989,5.611\r c-0.337,0-0.676-0.017-1.015-0.052c-1.149-0.117-2.264-0.432-3.313-0.936c-4.97-2.391-7.069-8.376-4.681-13.347\r c0.442-0.918,11.153-22.546,40.869-27.5c0.546-0.09,1.1-0.136,1.647-0.136c4.908,0,9.055,3.516,9.861,8.357\r C103.08,224.559,102.467,227.207,100.915,229.382z"}),(0,a.jsx)("path",{d:"M340.587,6.796c-8.615-8.614-22.425-9.1-31.624-1.112c-5.782,5.021-141.818,123.166-160.166,141.513\r c-9.175,9.175-20.946,24.898-31.124,39.428l42.864,43.271c14.546-10.18,30.345-22.003,39.65-31.308\r C218.749,180.024,336.69,44.193,341.703,38.42C349.688,29.22,349.201,15.41,340.587,6.796z"})]})})}}const ks=Os;class Fs extends o.Component{render(){return(0,a.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"25px",height:"25px",viewBox:"0 0 477.381 477.382",style:{marginRight:5,enableBackground:"new 0 0 477.381 477.382"},xmlSpace:"preserve",children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M477.381,103.373c0-54.988-44.577-99.564-99.565-99.564c-53.146,0-96.562,41.64-99.413,94.074\r c-13.35-2.513-27.168-3.838-41.322-3.838c-113.595,0-205.681,84.96-205.681,189.764c0,28.472,6.81,55.472,18.986,79.71\r L1.735,451.491c-2.703,4.889-2.215,10.917,1.239,15.308c2.673,3.397,6.721,5.3,10.911,5.3c1.223,0,2.457-0.163,3.674-0.498\r l106.506-29.233c32.435,19.721,71.269,31.206,113.016,31.206c113.594,0,205.681-84.96,205.681-189.764\r c0-32.378-8.8-62.854-24.3-89.521C453.186,178.737,477.381,143.881,477.381,103.373z M377.816,177.937\r c-41.115,0-74.565-33.449-74.565-74.564c0-41.115,33.45-74.564,74.565-74.564s74.565,33.449,74.565,74.564\r C452.381,144.487,418.931,177.937,377.816,177.937z"}),(0,a.jsx)("path",{d:"M419.955,92.871h-31.636V61.233c0-5.801-4.703-10.503-10.503-10.503c-5.799,0-10.502,4.702-10.502,10.503V92.87h-31.636\r c-5.802,0-10.503,4.702-10.503,10.503c0,5.8,4.701,10.502,10.503,10.502h31.636v31.636c0,5.801,4.703,10.503,10.502,10.503\r c5.801,0,10.503-4.702,10.503-10.503v-31.636h31.636c5.802,0,10.503-4.702,10.503-10.502\r C430.458,97.572,425.755,92.871,419.955,92.871z"})]})})}}const Ms=Fs;class As extends o.Component{render(){return(0,a.jsx)("svg",{fill:"#000000",viewBox:"0 0 492.589 492.589",children:(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{d:"M468.467,222.168h-28.329c-9.712-89.679-80.46-161.18-169.71-172.258V24.135c0-13.338-10.791-24.134-24.134-24.134\r\nc-13.311,0-24.117,10.796-24.117,24.134V49.91C132.924,60.988,62.177,132.488,52.482,222.168H24.153\r\nC10.806,222.168,0,232.964,0,246.286c0,13.336,10.806,24.132,24.153,24.132h29.228c12.192,86.816,81.551,155.4,168.797,166.229\r\nv31.804c0,13.336,10.806,24.135,24.117,24.135c13.343,0,24.134-10.799,24.134-24.135v-31.804\r\nc87.228-10.829,156.607-79.413,168.775-166.229h29.264c13.33,0,24.122-10.796,24.122-24.132\r\nC492.589,232.964,481.797,222.168,468.467,222.168z M246.294,398.093c-85.345,0-154.804-69.453-154.804-154.813\r\nc0-85.363,69.459-154.813,154.804-154.813c85.376,0,154.823,69.45,154.823,154.813\r\nC401.117,328.639,331.671,398.093,246.294,398.093z"}),(0,a.jsx)("path",{d:"M246.294,176.93c-36.628,0-66.34,29.704-66.34,66.349c0,36.635,29.711,66.349,66.34,66.349\r\nc36.66,0,66.34-29.713,66.34-66.349C312.634,206.635,282.955,176.93,246.294,176.93z"})]})})}}const Rs=As;class Ls extends o.PureComponent{render(){return(0,a.jsxs)("div",{className:"left-panel-switch-option-container",children:[(0,a.jsx)("label",{children:"CONTROLS"}),(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsx)(Sn.A,{checked:this.props.checked,title:"Show scene controls",onChange:this.props.floorplan3DThis.handleSceneControlsVisibilityChange})})]})}}const Bs=Ls;class Ws extends o.Component{constructor(e){var t;super(),t=this,this.onFloorplanDrawedCallback=()=>{this.floorplanDrawedCallbackCalled||(this.imagePaths.filter((e=>!this.props.usedImagePaths.find((t=>t.name===e.name)))).forEach((e=>this.imageLoadAndDraw(e,e.format))),this.floorplanDrawedCallbackCalled=!0)},this.imageLoadAndDraw=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.props.fixedImageFormat;const o=!!e.objId;t.loadingImageDataUrls.push(e.name);const n=new Image;n.onload=()=>{if(t.loadingImageDataUrls=t.loadingImageDataUrls.filter((t=>t!==e.name)),t.loadedImageDataUrls.find((t=>t.id===e.name)))return;const o=document.createElement("canvas");o.width=e.width,o.height=e.height;const s=o.getContext("2d");e.mirrorImage&&(s.translate(e.width,e.height),s.rotate(Math.PI)),s.drawImage(n,0,0,e.width,e.height),t.loadedImageDataUrls.push({id:e.name,dataURL:o.toDataURL(`image/${i}`),width:e.width,height:e.height}),t.forceUpdate((()=>{t.arePatternsLoaded()&&t.props.emitDataLoadedEvent&&document.dispatchEvent(new Event("patternImageDataLoaded"))}))},n.onerror=e=>console.log("AsyncSvgImagePattern error",e);let s="";t.props.mainComponentThis.isAddOnApp&&(s="https://app.klet3d.com",n.crossOrigin="anonymous"),n.src=t.props.furniturePattern?o?`https://app.klet3d.com/api/glamos/klet3d/objects-download2/${e.objId}/${e.name}-top.${i}`:`${s}/models3D/objMtl/${t.props.publicFolderName}/${e.folder}/${e.name}-top.${i}`:o?`https://app.klet3d.com/api/glamos/klet3d/objects-download2/${e.objId}/${e.name}.${i}`:`${s}/${t.props.publicFolderName}/${e.name}.${i}`},this.isPatternLoaded=e=>this.loadedImageDataUrls.find((t=>t.id===e))||this.loadingImageDataUrls.find((t=>t===e))||this.props.usedImagePaths.find((t=>t.name===e)),this.getImagePathData=e=>this.imagePaths.find((t=>t.name===e)),this.loadPattern=e=>{const t=this.getImagePathData(e);t&&this.imageLoadAndDraw(t,t.format)},this.clearPatterns=()=>{this.loadingImageDataUrls=[],this.loadedImageDataUrls=[],this.floorplanDrawedCallbackCalled=!1,this.forceUpdate()},this.arePatternsLoaded=()=>0===this.loadingImageDataUrls.length,this.addImagePathData=e=>this.imagePaths=[...this.imagePaths,...e],this.imagePaths=e.imagePaths,this.loadingImageDataUrls=[],this.loadedImageDataUrls=[],this.floorplanDrawedCallbackCalled=!1,this.imageLoadAndDraw=this.imageLoadAndDraw.bind(this),this.onFloorplanDrawedCallback=this.onFloorplanDrawedCallback.bind(this),this.isPatternLoaded=this.isPatternLoaded.bind(this),this.getImagePathData=this.getImagePathData.bind(this),this.loadPattern=this.loadPattern.bind(this),this.clearPatterns=this.clearPatterns.bind(this),this.arePatternsLoaded=this.arePatternsLoaded.bind(this),this.addImagePathData=this.addImagePathData.bind(this)}componentDidMount(){this.props.usedImagePaths.forEach((e=>this.imageLoadAndDraw(e,e.format)))}render(){return this.props.furniturePattern||this.props.surfaceAreaPattern?(0,a.jsx)(o.Fragment,{children:this.loadedImageDataUrls.map((e=>(0,a.jsx)("pattern",{id:e.id,patternUnits:"objectBoundingBox",width:"100%",height:"100%",viewBox:`0 0 ${e.width} ${e.height}`,preserveAspectRatio:"none",children:(0,a.jsx)("image",{href:e.dataURL,x:0,y:0,width:e.width,height:e.height})},e.id)))}):(0,a.jsx)(o.Fragment,{children:this.loadedImageDataUrls.map((e=>(0,a.jsx)("pattern",{id:e.id,patternUnits:"userSpaceOnUse",width:e.width,height:e.height,children:(0,a.jsx)("image",{href:e.dataURL,x:0,y:0,width:e.width,height:e.height})},e.id)))})}}const Ns=Ws;class Vs extends o.Component{constructor(e){super(),this.updateCameraCoverageAreaGraph=()=>{const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.cameraObj2DId);this.props.mainComponentThis.floorplan3DComponent.current?this.props.mainComponentThis.floorplan3DComponent.current.createCameraCoverageArea3DVisualization(e):this.props.mainComponentThis.createCameraCoverageArea2DVisualization(e)},this.onCameraCoverageOptionItemChange=e=>()=>{let t=parseFloat(e.inputRef.current.getValue());e.isMeasureItem&&(t=this.props.mainComponentThis.convertValueToSvgUnits(t,"meter","feet"));const i=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.cameraObj2DId),o=i.additionalParams[e.parameterName];if(i.additionalParams[e.parameterName]=t,this.updateCameraCoverageAreaGraph(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0),this.props.mainComponentThis.floorplan3DComponent.current){const t=i.additionalParams.mirrored?ue[i.type].modelMirroredRotationYSign:1;this.props.mainComponentThis.floorplan3DComponent.current.selectedCameraItemRotation(ei("cameraRotationAngleXDeg"===e.parameterName?o:i.additionalParams.cameraRotationAngleXDeg,i.additionalParams.cameraRotationAngleXDeg,"cameraRotationAngleYDeg"===e.parameterName?o*t:i.additionalParams.cameraRotationAngleYDeg*t,i.additionalParams.cameraRotationAngleYDeg*t))}},this.handleItemMirroredChange=()=>{const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.cameraObj2DId),t=ue[e.type].modelMirroredRotationYSign*parseFloat(this.cameraRotationYInputComponentRef.current.getValue());this.cameraRotationYInputComponentRef.current.setValue(t),this.cameraRotationYInputComponentRef.current.setInitialValue(t),e.additionalParams.cameraRotationAngleYDeg=t,this.updateCameraCoverageAreaGraph()},this.handleItemRotationChange=()=>{this.props.mainComponentThis.floorplan3DComponent.current||this.props.mainComponentThis.createCameraCoverageArea2DVisualization(this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.cameraObj2DId))},this.cameraHorizontalFOVInputComponentRef=o.createRef(),this.cameraDistanceInputComponentRef=o.createRef(),this.cameraRotationYInputComponentRef=o.createRef(),this.cameraRotationXInputComponentRef=o.createRef();const t=e.mainComponentThis.getSelectedWallFreeItemObj2D(e.cameraObj2DId);this.cameraCoverageOptionItems=[{field:"camera_horizontal_fov_angle",label:"FOV(\xb0):",min:1,max:170,step:1,inputRef:this.cameraHorizontalFOVInputComponentRef,parameterName:"cameraHorizontalFOVAngleDeg"},{field:"camera_distance",label:`Distance(${"metric"===e.mainComponentThis.context.userUnit?"m":"ft"}):`,min:"metric"===e.mainComponentThis.context.userUnit?.5:1,max:1/0,step:"metric"===e.mainComponentThis.context.userUnit?.1:1,inputRef:this.cameraDistanceInputComponentRef,parameterName:"cameraDistance",isMeasureItem:!0},{field:"camera_rotation_y",label:"Rotation Y(\xb0):",min:ue[t.type].rotationYAngleDegMin,max:ue[t.type].rotationYAngleDegMax,step:1,inputRef:this.cameraRotationYInputComponentRef,parameterName:"cameraRotationAngleYDeg"},{field:"camera_rotation_x",label:"Rotation X(\xb0):",min:ue[t.type].rotationXAngleDegMin,max:ue[t.type].rotationXAngleDegMax,step:1,inputRef:this.cameraRotationXInputComponentRef,parameterName:"cameraRotationAngleXDeg",isLongTextItem:!0}],this.updateCameraCoverageAreaGraph=this.updateCameraCoverageAreaGraph.bind(this),this.onCameraCoverageOptionItemChange=this.onCameraCoverageOptionItemChange.bind(this),this.handleItemMirroredChange=this.handleItemMirroredChange.bind(this),this.handleItemRotationChange=this.handleItemRotationChange.bind(this)}componentDidMount(){this.updateCameraCoverageAreaGraph(),this.cameraCoverageOptionItems.forEach((e=>{let t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.cameraObj2DId).additionalParams[e.parameterName];e.isMeasureItem&&(t=this.props.mainComponentThis.convertSvgToValueUnits(t,"meter","feet",-Math.log10(e.step))),e.inputRef.current.setValue(t),e.inputRef.current.setInitialValue(t)}))}render(){return(0,a.jsxs)(xo,{label:"Camera coverage",children:[this.cameraCoverageOptionItems.map((e=>(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:e.inputRef,isNumberInput:!0,controledNumberInput:!1,label:e.isLongTextItem?e.label:(0,a.jsx)(dn,{longText:this.cameraCoverageOptionItems.find((e=>e.isLongTextItem)).label,shortText:e.label}),labelClasses:"label-form-control-cancel",item:e,onChange:this.onCameraCoverageOptionItemChange},e.field))),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.isCameraPOVEnabled()&&(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsx)(go,{type:"primary",onClick:()=>this.props.mainComponentThis.floorplan3DComponent.current.setCameraPOVView(),children:"Camera POV"})})]})}}const Es=Vs;class Hs extends o.Component{constructor(e){super(),this.onItemClick=e=>t=>{this.setState({selectedItem:e}),this.props.onClickCallback&&this.props.onClickCallback(t,e)},this.setSelectedItem=e=>this.setState({selectedItem:e}),this.getSelectedItem=()=>this.state.selectedItem,this.state={selectedItem:null},this.texturesSrcBasePath=e.mainComponentThis.isAddOnApp?"https://app.klet3d.com":"",this.onItemClick=this.onItemClick.bind(this),this.setSelectedItem=this.setSelectedItem.bind(this),this.getSelectedItem=this.getSelectedItem.bind(this)}render(){const{selectedItem:e}=this.state;return(0,a.jsx)("div",{className:"colors-textures-grid-container "+(this.props.isColor?"":"textures"),children:this.props.isColor?this.props.items.map((t=>(0,a.jsx)("div",{className:`selection-grid-item-card color textEditorColorModify ${e===t.gradientStartColor?"selected":""} ${this.props.disabled?"disabled":""}`,style:{color:t.gradientStartColor,background:`linear-gradient(30deg, ${t.gradientStartColor}, ${t.gradientStopColor})`},onClick:this.props.disabled?void 0:this.onItemClick(t.gradientStartColor)},t.gradientStartColor))):this.props.items.map(((t,i)=>(0,a.jsx)("div",{className:`selection-grid-item-card ${e===t?"selected":""} ${this.props.disabled?"disabled":""}`,style:{backgroundImage:"none"===t?t:`/textures/${t}.png`},onClick:this.props.disabled?void 0:this.onItemClick(t),children:"none"!==t&&(0,a.jsx)("img",{src:`${this.texturesSrcBasePath}/textures/${t}.png`})},i)))})}}const zs=Hs;class Gs extends o.Component{constructor(){super(),this.getCheckedStatus=()=>this.state.showFloorDrawingHelper,this.onFloorDrawingHelperChange=()=>{this.state.showFloorDrawingHelper?rt(this.props.mainComponentThis.boxFloorDrawingHelper.current,this.props.mainComponentThis.othersTimeout,null,!1):(this.props.mainComponentThis.drawUnderlyingFloorDrawingHelper(this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor()),at(this.props.mainComponentThis.boxFloorDrawingHelper.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1)),this.setState({showFloorDrawingHelper:!this.state.showFloorDrawingHelper})},this.state={showFloorDrawingHelper:!0},this.onFloorDrawingHelperChange=this.onFloorDrawingHelperChange.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this)}render(){return(0,a.jsxs)("div",{className:"floor-drawing-helper-container",children:[(0,a.jsxs)("div",{className:"label-container",children:[(0,a.jsx)("h3",{className:"parameter-title",children:"UNDERLYING FLOOR"}),(0,a.jsx)(Eo,{infoText:"Show or hide the floor below as a drawing guide",explanationInfoBoxStyles:{left:-150,width:130,zIndex:1}})]}),(0,a.jsx)("div",{className:"switch-container parameter-input-container",children:(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsx)(Sn.A,{checked:this.state.showFloorDrawingHelper,onChange:this.onFloorDrawingHelperChange})})})]})}}const qs=Gs;class Us extends o.Component{constructor(e){super(),this.setFloorNoteValue=e=>{this.setState({value:e})},this.handleFloorNoteInputChange=e=>{this.props.mainComponentThis.floorNote=e.target.value,this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0),this.setState({value:e.target.value})},this.state={value:""},this.disabledValue=e.mainComponentThis.isAddOnApp,this.setFloorNoteValue=this.setFloorNoteValue.bind(this),this.handleFloorNoteInputChange=this.handleFloorNoteInputChange.bind(this)}render(){return(0,a.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,a.jsx)("h3",{className:"parameter-title",children:"FLOOR NOTE"}),(0,a.jsx)("div",{className:"parameter-input-container",children:(0,a.jsx)("textarea",{disabled:this.disabledValue,style:{fontFamily:"inherit"},placeholder:"Insert floor notes",className:"form-control input",value:this.state.value,type:"text",onChange:this.handleFloorNoteInputChange})})]})}}const Ys=Us;class Xs extends o.Component{constructor(e){super(),this.setFloorNumber=e=>{this.numberInputRef.current.setValue(e),this.numberInputRef.current.setInitialValue(e),this.setState({floorNumberError:null})},this.onFloorNumberChanged=()=>{const e=parseInt(this.numberInputRef.current.getValue()),t=this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();this.props.mainComponentThis.floorplanFloorsData.filter((e=>e.floorNumber!==t.floorNumber)).find((t=>t.floorNumber===e))?(this.props.mainComponentThis.floorNumber=t.floorNumber,this.setState({floorNumberError:"Floor number already exists"})):(this.props.mainComponentThis.floorNumber=e,this.setState({floorNumberError:null})),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)},this.state={floorNumberError:null},this.disabledValue=e.mainComponentThis.isAddOnApp,this.numberInputRef=o.createRef(),this.setFloorNumber=this.setFloorNumber.bind(this),this.onFloorNumberChanged=this.onFloorNumberChanged.bind(this)}render(){return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"parameter-title",children:"FLOOR NUMBER"}),(0,a.jsx)("div",{className:"parameter-input-container",children:(0,a.jsxs)(xo,{children:[(0,a.jsx)(Bo,{disabled:this.disabledValue,ref:this.numberInputRef,placeholder:"Floor number",allowEmpty:!0,inputStep:1,inputMin:0,inputMax:300,onInputValueChanged:this.onFloorNumberChanged}),this.state.floorNumberError&&(0,a.jsx)("div",{className:"form-control feedback",children:this.state.floorNumberError})]})})]})}}const Ks=Xs;var Zs=i(468);class $s extends o.Component{constructor(){super(),this.setFloorplanFloorsData=(e,t)=>this.setState({floorplanFloors:e},(()=>t&&t())),this.setSelectedFloorplanFloor=(e,t)=>this.setState({selectedFloor:e},(()=>{this.props.mainComponentThis.floorplan3DComponent.current||this.props.mainComponentThis.openFloorParametersRightBox(),t&&t()})),this.getSelectedFloorplanFloor=()=>this.state.selectedFloor,this.onDeleteFloorplanFloorClick=e=>()=>{this.props.mainComponentThis.getFloorplanID()?this.state.floorplanFloors.length>1?this.setState({targetDeleteFloor:e},(()=>{(this.props.mainComponentThis.isSaveNeeded()?this.props.mainComponentThis.deleteFloorplanFloorAlertFloorNumberValueRef:this.props.mainComponentThis.deleteFloorplanFloorFloorNumberValueRef).current.innerHTML=e.floorNumber,at(this.props.mainComponentThis.isSaveNeeded()?this.props.mainComponentThis.deleteFloorplanFloorAlertModal.current:this.props.mainComponentThis.deleteFloorplanFloorModal.current,this.props.mainComponentThis.modalTimeout)})):at(this.props.mainComponentThis.deleteFloorplanFloorAlertModal.current,this.props.mainComponentThis.modalTimeout):at(this.props.mainComponentThis.saveFloorplanModal.current,this.props.mainComponentThis.modalTimeout)},this.getTargetSwitchFloor=()=>this.state.targetSwitchFloor,this.getTargetDeleteFloor=()=>this.state.targetDeleteFloor,this.onFloorplanFloorClick=e=>()=>{this.state.selectedFloor.floorNumber!==e.floorNumber?this.setState({targetSwitchFloor:e},(()=>this.props.mainComponentThis.handleFloorplanFloorClick(e))):this.props.mainComponentThis.floorplan3DComponent.current||this.props.mainComponentThis.openFloorParametersRightBox()},this.state={floorplanFloors:[],selectedFloor:null,targetSwitchFloor:null,targetDeleteFloor:null},this.setFloorplanFloorsData=this.setFloorplanFloorsData.bind(this),this.setSelectedFloorplanFloor=this.setSelectedFloorplanFloor.bind(this),this.getSelectedFloorplanFloor=this.getSelectedFloorplanFloor.bind(this),this.getTargetSwitchFloor=this.getTargetSwitchFloor.bind(this),this.getTargetDeleteFloor=this.getTargetDeleteFloor.bind(this),this.onDeleteFloorplanFloorClick=this.onDeleteFloorplanFloorClick.bind(this),this.onFloorplanFloorClick=this.onFloorplanFloorClick.bind(this)}render(){const{floorplanFloors:e,selectedFloor:t}=this.state;return(0,a.jsx)("div",{ref:this.props.containerRef,className:"floorplan-floors-buttons-container",children:t&&e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((i=>(0,a.jsxs)("div",{className:"panel-option-container",children:[(0,a.jsxs)("div",{className:"option-name-note-container",children:[(0,a.jsxs)("button",{title:`Floor ${i.floorNumber}`,className:"option-button btn "+(t.floorNumber===i.floorNumber?"btn-active":""),style:{margin:"5px 0"},onClick:this.onFloorplanFloorClick(i),children:[(0,a.jsx)("span",{className:"label-span",children:"Floor\xa0"}),(0,a.jsx)("span",{children:i.floorNumber})]}),(0,a.jsx)("div",{className:"floor-info",children:(0,a.jsx)(Eo,{indoorPanelExplanationBox:this.props.mainComponentThis.panelFloorNoteExplanationBox,infoText:Kt(i)})})]}),this.props.mainComponentThis.isAddOnApp?(0,a.jsx)("a",{href:`https://app.klet3d.com/floorplan/${this.props.mainComponentThis.getFloorplanID()}`,target:"_blank",rel:"noreferrer",style:{textDecoration:"none",visibility:"hidden"},children:(0,a.jsx)("button",{className:"btn btn-default action-icon-button",title:`Delete floor ${i.floorNumber}`,children:(0,a.jsx)(Zs.A,{})})}):(0,a.jsx)("button",{className:"btn btn-default action-icon-button",title:`Delete floor ${i.floorNumber}`,onClick:this.onDeleteFloorplanFloorClick(i),style:{visibility:1===e.length?"hidden":"visible"},children:(0,a.jsx)(Zs.A,{})})]},i.floorNumber)))})}}const Js=$s;class Qs extends o.Component{constructor(e){super(),this.setSelectedObjectData=e=>{this.selectedObject2D=e,this.setState({checked:e.additionalParams.hideWithWall})},this.onWallItemHideWithWallChange=()=>{this.selectedObject2D.additionalParams.hideWithWall=!this.state.checked,this.setState({checked:this.selectedObject2D.additionalParams.hideWithWall}),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.updateWallsVisibility(),this.props.mainComponentThis.save(!1,!0)},this.state={checked:!0},this.selectedObject2D=null,this.disabledValue=e.mainComponentThis.isAddOnApp,this.setSelectedObjectData=this.setSelectedObjectData.bind(this),this.onWallItemHideWithWallChange=this.onWallItemHideWithWallChange.bind(this)}render(){return(0,a.jsx)(xo,{children:(0,a.jsx)(qo,{disabled:this.disabledValue,infoLabel:!0,infoLabelTitle:"Hide with wall",infoText:"Check this box to hide the object along with the wall.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:this.state.checked,onChange:this.onWallItemHideWithWallChange})})}}const ea=Qs;class ta extends o.Component{constructor(e){super(),this.onItemTypeChange=()=>e=>{this.setState({itemTypeEdit:{...this.state.itemTypeEdit,value:e.target.value},needsSave:this.state.originalItemTypeValue!==e.target.value.value})},this.updateSelectedItemAssociatedObjects=()=>{const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId),t=e.family,i=this.props.mainComponentThis.panelDrawingOptions2D.find((t=>t.isTargetObjectMode(e.type))),o=this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber;let n=[];this.props.mainComponentThis.getFloorplanObj2Ds().forEach((t=>{if(t.type===e.type){const e=this.props.mainComponentThis.getObj2DFloorNumber(t),i=n.find((t=>t.floorNumber===e));i?i.floorAssociatedObjects2D.push(t):n.push({floorNumber:e,floorObjData:e===o?this.props.mainComponentThis.OBJDATA:this.props.mainComponentThis.floorplanFloorsData.find((t=>t.floorNumber===e)).objData,floorAssociatedObjects2D:[t]})}})),this.props.mainComponentThis.removeBinder(),this.props.mainComponentThis.removeSelectedBinder(),this.props.mainComponentThis.previousFloorplanItemBinder=null,n.forEach((t=>{t.floorAssociatedObjects2D.forEach(((n,s)=>{const a=t.floorObjData.findIndex((e=>e.id===n.id));t.floorNumber===o&&t.floorObjData[a].graph.remove();const r=this.props.mainComponentThis.calcul_snap_inverse(n.x,n.y);i.createBinderMethod({pageX:r.screenX,pageY:r.screenY},!1,e.type,t.floorNumber),i.createBinderMethod({pageX:r.screenX,pageY:r.screenY},!0,e.type,t.floorNumber),t.floorObjData[a]=this.props.mainComponentThis.binder,t.floorObjData[a].id=n.id,t.floorObjData[a].size=n.size,t.floorObjData[a].thick=n.thick,t.floorObjData[a].value=n.value,t.floorObjData[a].additionalParams={...n.additionalParams},t.floorObjData[a].update(this.props.mainComponentThis),this.props.mainComponentThis.binder.graph.remove(),t.floorNumber===o&&this.props.mainComponentThis.boxCarpentry.current.appendChild(t.floorObjData[a].graph),this.props.mainComponentThis.binder=null,t.floorAssociatedObjects2D[s]=t.floorObjData[a]}))})),console.log("selectedItemAssociatedObjectsFloorsDistribution",n,e.family),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.onSelectedItemObjectItemTypeChanged(n,t),this.props.mainComponentThis.save(!1,!0),this.props.mainComponentThis.saveItemRightBoxParameters()},this.onItemTypeChangeSavedCallback=e=>{const t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);this.props.api.get.call(this,"/klet3d/objects?v=2",(i=>{let o;this.props.mainComponentThis.userAddedObjects=i,o=e?this.props.mainComponentThis.userAddedObjects.find((t=>t.object_id===e)):this.props.mainComponentThis.userAddedObjects.find((e=>e.object_external_id===t.type)),this.props.mainComponentThis.createUserAddedObjectModelsDetailsDimensionsData(o),this.updateSelectedItemAssociatedObjects(o),this.setState({updateItemTypeLoading:!1,needsSave:!1,originalItemTypeValue:o.object_metadata.details.itemType})}))},this.onSaveChangedItemTypeClick=()=>{const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId),t=this.state.itemTypeEdit.value.value,i=Q[t],o=this.props.mainComponentThis.userAddedObjects.find((t=>t.object_external_id===e.type));this.setState({updateItemTypeLoading:!0}),o?this.updateUserAddedObjectNameMetadata(this.props.api,null,{...o.object_metadata,objFamily:i,details:{...o.object_metadata.details,itemType:t}},o.object_id,(()=>this.onItemTypeChangeSavedCallback(o.object_id))):this.changeSupportedObjectItemType(this.props.api,e.type,t,(()=>this.onItemTypeChangeSavedCallback()))},this.state={itemTypeEdit:null,needsSave:!1,originalItemTypeValue:null,updateItemTypeLoading:!1},this.disabledValue=e.mainComponentThis.isAddOnApp,this.onItemTypeChange=this.onItemTypeChange.bind(this),this.onSaveChangedItemTypeClick=this.onSaveChangedItemTypeClick.bind(this),this.updateSelectedItemAssociatedObjects=this.updateSelectedItemAssociatedObjects.bind(this),this.onItemTypeChangeSavedCallback=this.onItemTypeChangeSavedCallback.bind(this),this.changeSupportedObjectItemType=Di.bind(this),this.updateUserAddedObjectNameMetadata=Ti.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);if("lights"===e.class||"furniture"===e.class){const t=this.props.mainComponentThis.getObjectItemType(e.type);this.setState({itemTypeEdit:{...Qe,value:Qe.options.find((e=>e.value===t))},originalItemTypeValue:t})}}render(){const{itemTypeEdit:e,needsSave:t,updateItemTypeLoading:i}=this.state;return null===e?null:(0,a.jsxs)(xo,{children:[(0,a.jsx)(Qo,{disabled:this.disabledValue,selectInput:!0,label:e.label,item:e,error:e.error,fullWidth:!0,explanationInfoBoxStyles:{width:120,left:-140},onChange:this.onItemTypeChange}),t&&(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsx)(wo,{buttonType:"primary",buttonText:"Save",onClick:this.onSaveChangedItemTypeClick,loading:i,spinnerLoading:!0,spinnerColor:"#ffffff"})})]})}}const ia=ta;class oa extends o.Component{constructor(e){super(),this.saveChanges=(e,t,i,o,n,s)=>{if(s){const s=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId),a=[s];this.props.mainComponentThis.selectedBinder&&a.push(this.props.mainComponentThis.selectedBinder),a.forEach((e=>{t&&(e[t]=i),e.update(this.props.mainComponentThis)})),s.additionalParams[e]=i,this[n.lastSavedPropertyName]=o,this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.resizeSelectedItem(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}s?n.inputRef.current.inputRef.current.classList.remove("is-invalid"):n.inputRef.current.inputRef.current.classList.add("is-invalid")},this.onWidthChange=()=>e=>{const t=this.widthInputComponentRef.current.getValue(),i=e||this.props.mainComponentThis.convertValueToSvgUnits(t),o=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId),n=Zt(o);let s=!0;e||("inWall"===o.family||"onWall"===o.family?s=this.props.mainComponentThis.onWallItemWidthChange(i,o,this.props.mainComponentThis.WALLS):"floorFree"===o.family&&(s=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:o.x,y:o.y},this.props.mainComponentThis.WALLS,"size"===n?i/2:o.thick/2,"size"===n?o.thick/2:i/2,o.angle))),this.saveChanges("width3D",n,i,t,this.dimensionsInputsData[0],s)},this.onDepthChange=()=>e=>{const t=this.depthInputComponentRef.current.getValue(),i=e||this.props.mainComponentThis.convertValueToSvgUnits(t),o=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId),n=90===o.params.onWallOffsetAngle?"size":"thick";let s=!0;e||"floorFree"===o.family&&(s=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:o.x,y:o.y},this.props.mainComponentThis.WALLS,"size"===n?i/2:o.size/2,"size"===n?o.size/2:i/2,o.angle)),this.saveChanges("depth3D",n,i,t,this.dimensionsInputsData[1],s)},this.onHeightChange=()=>()=>{const e=this.heightInputComponentRef.current.getValue(),t=this.props.mainComponentThis.convertValueToSvgUnits(e),i=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);let o=!0;if(!this.props.mainComponentThis.isFloorplanItemClassMember(i.type,"furniture_items","staircase")){o=(u(i.additionalParams.positionY)?0:i.additionalParams.positionY)+t<this.props.mainComponentThis.floorHeight}this.saveChanges("height3D",null,t,e,this.dimensionsInputsData[2],o)},this.widthInputComponentRef=o.createRef(),this.depthInputComponentRef=o.createRef(),this.heightInputComponentRef=o.createRef(),this.dimensionItem={min:0,max:1/0,step:e.mainComponentThis.itemDimensionsInputStep},this.lastSavedWidthValue=null,this.lastSavedDepthValue=null,this.lastSavedHeightValue=null,this.dimensionsInputsData=[{inputRef:this.widthInputComponentRef,dimensionPropertyName:"width3D",lastSavedPropertyName:"lastSavedWidthValue"},{inputRef:this.depthInputComponentRef,dimensionPropertyName:"depth3D",lastSavedPropertyName:"lastSavedDepthValue"},{inputRef:this.heightInputComponentRef,dimensionPropertyName:"height3D",lastSavedPropertyName:"lastSavedHeightValue"}],this.userUnit=e.mainComponentThis.isAddOnApp?e.mainComponentThis.measureSystemContext.userUnit:e.mainComponentThis.context.userUnit,this.disabledValue=e.mainComponentThis.isAddOnApp,this.saveChanges=this.saveChanges.bind(this),this.onWidthChange=this.onWidthChange.bind(this),this.onDepthChange=this.onDepthChange.bind(this),this.onHeightChange=this.onHeightChange.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);this.dimensionsInputsData.forEach((t=>{const i=this.props.mainComponentThis.convertSvgToValueUnits(e.additionalParams[t.dimensionPropertyName]);t.inputRef.current.setValue(i),t.inputRef.current.setInitialValue(i),this[t.lastSavedPropertyName]=i})),this.props.restoreSelectedBinderCall&&(this.onWidthChange()(e.additionalParams.width3D),this.onDepthChange()(e.additionalParams.depth3D))}render(){return(0,a.jsxs)(xo,{label:`Dimensions(${"metric"===this.userUnit?"cm":"in"})`,children:[(0,a.jsx)(nn,{disabled:this.disabledValue,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.widthInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:(0,a.jsx)(dn,{longText:"Height:",shortText:"Width:"}),labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onWidthChange}),(0,a.jsx)(nn,{disabled:this.disabledValue,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.depthInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:(0,a.jsx)(dn,{longText:"Height:",shortText:"Depth:"}),labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onDepthChange}),(0,a.jsx)(nn,{disabled:this.disabledValue,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.heightInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:"Height:",labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onHeightChange})]})}}const na=oa;class sa extends o.Component{constructor(e){super(),this.onMirroredChange=e=>{const t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);t.additionalParams.mirrored=!!e.target.checked,this.setState({checked:t.additionalParams.mirrored}),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.mirrorSelectedItem(),this.props.mainComponentThis.save(!1,!0),this.props.mainComponentThis.cameraCoverageOptionsActiveRef.current&&this.props.mainComponentThis.cameraCoverageOptionsActiveRef.current.handleItemMirroredChange()},this.state={checked:!1},this.disabledValue=e.mainComponentThis.isAddOnApp,this.onMirroredChange=this.onMirroredChange.bind(this)}componentDidMount(){this.setState({checked:this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId).additionalParams.mirrored})}render(){return(0,a.jsx)(xo,{children:(0,a.jsx)(qo,{disabled:this.disabledValue,infoLabel:!0,infoLabelTitle:"Mirror object",infoText:"Check this box to mirror the object.",explanationInfoBoxStyles:{left:-120,width:100,zIndex:1},checked:this.state.checked,onChange:this.onMirroredChange})})}}const aa=sa;class ra extends o.Component{constructor(e){var t;super(),t=this,this.onPositionYChange=()=>()=>{const e=this.positionYInputComponentRef.current.getValue(),t=this.props.mainComponentThis.convertValueToSvgUnits(e),i=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId),o=t+i.additionalParams.height3D<=this.props.mainComponentThis.floorHeight&&t>=0;o&&(this.lastSavedPositionYValue=e,i.additionalParams.positionY=t,this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedItemVerticalPosition(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)),o?this.positionYInputComponentRef.current.inputRef.current.classList.remove("is-invalid"):this.positionYInputComponentRef.current.inputRef.current.classList.add("is-invalid")},this.setPositionYInputValues=function(e){let i=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(i=t.props.mainComponentThis.convertSvgToValueUnits(e)),t.positionYInputComponentRef.current.setValue(i)},this.positionYInputComponentRef=o.createRef(),this.positionItem={min:0,max:1/0,step:e.mainComponentThis.itemDimensionsInputStep},this.lastSavedPositionYValue=null,this.userUnit=e.mainComponentThis.isAddOnApp?e.mainComponentThis.measureSystemContext.userUnit:e.mainComponentThis.context.userUnit,this.disabledValue=e.mainComponentThis.isAddOnApp,this.onPositionYChange=this.onPositionYChange.bind(this),this.setPositionYInputValues=this.setPositionYInputValues.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.convertSvgToValueUnits(this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId).additionalParams.positionY);this.setPositionYInputValues(e),this.positionYInputComponentRef.current.setInitialValue(e),this.lastSavedPositionYValue=e}render(){return(0,a.jsxs)(xo,{children:[(0,a.jsxs)("div",{className:"label form-control label-info-box-container",style:{display:"flex"},children:[(0,a.jsx)("span",{children:`Vertical position(${"metric"===this.userUnit?"cm":"in"})`}),(0,a.jsx)(Eo,{infoText:(0,a.jsxs)("span",{children:["Vertical position of the item's ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"bottom"})," relative to the"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"floor"})]}),explanationInfoBoxStyles:{left:-150,width:130,zIndex:1}})]}),(0,a.jsx)(nn,{disabled:this.disabledValue,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.positionYInputComponentRef,isNumberInput:!0,controledNumberInput:!1,labelClasses:"label-form-control-cancel",item:this.positionItem,onChange:this.onPositionYChange})]})}}const la=ra;class ha extends o.Component{constructor(e){super(),this.setRotationInputValues=(e,t)=>{this.itemRotationSlider.current.value=e,this.props.itemRotationValueRef.current.textContent=e,this.itemRotationNumberSliderInput.current.inputNumberComponentRef.current.setValue(e),t?this.itemRotationNumberSliderInput.current.inputNumberComponentRef.current.inputRef.current.classList.remove("is-invalid"):this.itemRotationNumberSliderInput.current.inputNumberComponentRef.current.inputRef.current.classList.add("is-invalid")},this.onRotationChange=e=>{e=parseInt(e);let t=!0;const i=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);"floorFree"===i.family&&(t=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:i.x,y:i.y},this.props.mainComponentThis.WALLS,i.size/2,i.thick/2,e)),this.setRotationInputValues(e,t),t&&(this.lastSavedAngleValue=e,this.props.mainComponentThis.setItemRotationAngle(e,i),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.rotateSelectedItem(e),this.props.mainComponentThis.cameraCoverageOptionsActiveRef.current&&this.props.mainComponentThis.cameraCoverageOptionsActiveRef.current.handleItemRotationChange()},this.itemRotationSlider=o.createRef(),this.itemRotationNumberSliderInput=o.createRef(),this.lastSavedAngleValue=null,this.disabledValue=e.mainComponentThis.isAddOnApp,this.setRotationInputValues=this.setRotationInputValues.bind(this),this.onRotationChange=this.onRotationChange.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);this.setRotationInputValues(e.angle,!0),this.itemRotationNumberSliderInput.current.setNumberInputInitialValues(e.angle),this.lastSavedAngleValue=e.angle,this.props.restoreSelectedBinderCall&&this.onRotationChange(e.angle)}render(){return(0,a.jsx)(xo,{children:(0,a.jsx)(kn,{disabled:this.disabledValue,ref:this.itemRotationNumberSliderInput,sliderInputRef:this.itemRotationSlider,valueLabelText:(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(js,{}),"Rotation:\xa0",(0,a.jsx)("span",{ref:this.props.itemRotationValueRef})," \xb0"]}),sliderStep:1,minValue:-180,maxValue:180,onSliderValueChanged:this.onRotationChange,onSliderChangeFinished:()=>{this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}})})}}const ca=ha;class da extends o.Component{constructor(e){var t;super(),t=this,this.updateRibStatus=e=>{e?(at(this.props.mainComponentThis.boxScale.current,this.props.showHideTransitionDurationMs,null,"inline",!1),at(this.props.mainComponentThis.boxRib.current,this.props.showHideTransitionDurationMs,null,"inline",!1)):(rt(this.props.mainComponentThis.boxScale.current,this.props.showHideTransitionDurationMs,null,!1,!0),rt(this.props.mainComponentThis.boxRib.current,this.props.showHideTransitionDurationMs,null,!1))},this.updateGridStatus=e=>{e?at(this.props.mainComponentThis.boxGridRef.current,this.props.showHideTransitionDurationMs,null,"inline",!1):rt(this.props.mainComponentThis.boxGridRef.current,this.props.showHideTransitionDurationMs,null,!1)},this.updateBackgroundColor=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.props.mainComponentThis.showMapLayer2DInputRef.current.getCheckedStatus()||(t.props.mainComponentThis.linRef.current.style.backgroundColor="#ffffff"===e||i?"transparent":e)},this.onLayersListOptionChange=e=>t=>{const i="checkbox"===e.type?!e.value:t.target.value;this.setState({edit:this.state.edit.map((t=>({...t,value:t.field===e.field?i:t.value})))},(()=>{this[e.updateMethodName](i),this.props.mainComponentThis[e.mainComponentThisPropertyName]=i,this.props.mainComponentThis.save(!1,!0)}))},this.setLayersListOptions=e=>{const t=A.map((t=>({...t,value:e&&Object.hasOwn(e,t.mainComponentThisPropertyName)?e[t.mainComponentThisPropertyName]:t.defaultValue})));t.forEach((e=>{this.props.mainComponentThis[e.mainComponentThisPropertyName]=e.value,this[e.updateMethodName](e.value)})),this.setState({edit:t})},this.onLayersListDropdownOpenActions=()=>{this.colorInputsRefs.forEach((e=>e.colorPickerInputRef.current.updateInputsPadding()))},this.state={edit:[]},this.colorInputsRefs=A.filter((e=>"color"===e.type)).map((e=>({field:e.field,colorPickerInputRef:o.createRef()}))),this.disabledValue=e.mainComponentThis.isAddOnApp,this.updateRibStatus=this.updateRibStatus.bind(this),this.updateGridStatus=this.updateGridStatus.bind(this),this.updateBackgroundColor=this.updateBackgroundColor.bind(this),this.onLayersListOptionChange=this.onLayersListOptionChange.bind(this),this.setLayersListOptions=this.setLayersListOptions.bind(this),this.onLayersListDropdownOpenActions=this.onLayersListDropdownOpenActions.bind(this)}render(){const{edit:e}=this.state;return(0,a.jsx)("div",{ref:this.props.layersListRef,className:"list-unstyled layer-list hidden",children:e.map((e=>{switch(e.type){case"checkbox":return(0,a.jsx)(qo,{disabled:this.disabledValue,title:e.title,label:e.label,checked:e.value,onChange:this.onLayersListOptionChange(e)},e.field);case"color":return(0,a.jsx)(Xo,{disabled:this.disabledValue,ref:this.colorInputsRefs.find((t=>t.field===e.field)).colorPickerInputRef,item:e,onChange:this.onLayersListOptionChange,boxContainer:this.props.layersListRef.current},e.field);default:return null}}))})}}const pa=da;var ma=i(9034);class ua extends o.Component{render(){return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{ref:this.props.panelRef,className:"panel panel-transition",onMouseMove:()=>this.props.onPanelMouseMove&&this.props.onPanelMouseMove(),style:{width:this.props.panelWidth||200,left:this.props.panelWidth?-this.props.panelWidth:-200},children:(0,a.jsx)("ul",{className:"list-unstyled",children:this.props.children})}),this.props.panelControlRef&&(0,a.jsxs)("div",{ref:this.props.panelControlRef,className:"panel-control-container panel-transition",style:this.props.panelControlStyles||{},children:[this.props.panelControlCustomComponents&&this.props.panelControlCustomComponents,(0,a.jsx)("div",{title:"Hide panel",className:"panel-control-arrow-container svg-center-inside-container",onClick:this.props.onPanelControlClick,children:(0,a.jsx)(ma.A,{className:"panel-transition"})})]})]})}}const ga=ua;class fa extends o.Component{constructor(){super(),this.close=()=>this.setState({show:!1}),this.setAndShowChoiceOptions=(e,t)=>{const i=e.choiceOptions.find((e=>e.default));this.props.mainComponentThis[e.mainComponentThisSelectedChoiceOptionPropertyName]=i,this.setState({show:!0,choiceOptions:e.choiceOptions,selectedChoiceOption:i||null,choiceOptionsData:e},(()=>{const e=t.current.getBoundingClientRect(),i=this.containerRef.current.getBoundingClientRect();this.containerRef.current.style.top=e.top+e.height/2-i.height/2+"px",this.containerRef.current.style.left=e.left+e.width+"px"}))},this.onChoiceOptionClick=e=>()=>{this.setState({selectedChoiceOption:e},(()=>{this.props.mainComponentThis[this.state.choiceOptionsData.mainComponentThisSelectedChoiceOptionPropertyName]=e,this.props.mainComponentThis.floorplan3DComponent.current?this.props.mainComponentThis.floorplan3DComponent.current.userInteractionCurrentController.removeItemBinder():(this.props.mainComponentThis.removeBinder(),this.props.mainComponentThis.previousFloorplanItemBinder=null),this.state.choiceOptionsData.onChoiceOptionClickCallback&&this.state.choiceOptionsData.onChoiceOptionClickCallback(e)}))},this.state={show:!1,choiceOptions:[],selectedChoiceOption:null,choiceOptionsData:null},this.containerRef=o.createRef(),this.close=this.close.bind(this),this.setAndShowChoiceOptions=this.setAndShowChoiceOptions.bind(this),this.onChoiceOptionClick=this.onChoiceOptionClick.bind(this)}render(){const{show:e,choiceOptions:t,selectedChoiceOption:i}=this.state;return e?(0,a.jsx)("div",{ref:this.containerRef,className:"left-panel-extended-choice-options-container",children:t.reduce(((e,t,i)=>(e[e.length-1].push(t),(i+1)%2===0&&e.push([]),e)),[[]]).filter((e=>e.length>0)).map(((e,t)=>(0,a.jsx)("div",{className:"left-panel-extended-choice-option-row-container",children:e.map(((e,t)=>(0,a.jsx)("div",{className:"btn btn-default left-panel-extended-choice-option-container "+(e===i?"selected":""),onClick:this.onChoiceOptionClick(e),children:e.label},t)))},t)))}):null}}const ba=fa;class wa extends o.Component{render(){return(0,a.jsx)("div",{className:"popup-disable-background",children:(0,a.jsx)(Zn,{spinnerHolderStyle:this.props.whiteSpinnerBackground?{borderRadius:"50%",backgroundColor:"#ffffff"}:{},screenCenter:!0})})}}const Ca=wa;var xa=i(4604);class _a extends o.Component{constructor(e){super(),this.imageSourceBasePath=e.mainComponentThis.isAddOnApp?"https://app.klet3d.com":""}render(){return(0,a.jsx)("div",{className:`selection-grid-item-card ${this.props.selected?"selected":""} ${this.props.disabled?"disabled":""}`,onClick:()=>!this.props.disabled&&this.props.onFloorplanItemModelClick(this.props.floorplanItemModel),children:(0,a.jsx)(xa.LazyLoadImage,{alt:this.props.floorplanItem.details[this.props.floorplanItemModel].title,src:this.props.floorplanItem.details[this.props.floorplanItemModel].objId?`https://app.klet3d.com/api/glamos/klet3d/objects-download2/${this.props.floorplanItem.details[this.props.floorplanItemModel].objId}/${this.props.floorplanItemModel}.png`:`${this.imageSourceBasePath}/models3D/objMtl/thumbnails/${this.props.mainComponentThis.getObjectFolderName(this.props.floorplanItemModel)}/${this.props.floorplanItemModel}.png`,placeholder:(0,a.jsx)("div",{className:"spinner-container",children:(0,a.jsx)(Zn,{center:!0,noMargin:!0,spinnerStyle:{width:14,height:14}})}),width:"100%",height:"100%",onLoad:this.props.onLoadHandler,visibleByDefault:this.props.visibleByDefault})})}}const ya=_a;class Sa extends o.Component{constructor(e){super(),this.onFloorplanItemModelClick=e=>{this.setState({selectedFloorplanItemModel:e}),this.props.onFloorplanItemSelectionCallback(e)},this.onFloorplanItemsCategorySelectClick=e=>{const t=e.target.textContent;this.setState({selectedCategory:t},(()=>{this.floorplanItemCategorySelectRef.current.closeDropdownMenu(),this.floorplanItemCategorySelectRef.current.setValue(t),this.saveSettingsDataToParent()}))},this.onFloorplanItemSearchInputChange=e=>{let t=[];t=""===e?this.props.items:this.props.items.map((t=>({...t,models:t.models.filter((i=>i.toLowerCase().includes(e.toLowerCase())||t.details[i].title.toLowerCase().includes(e.toLowerCase())))}))),this.setState({floorplanItemsFiltered:t},(()=>this.saveSettingsDataToParent()))},this.onOpenPanelSelectionBoxActions=e=>{this.setState({floorplanItemsFiltered:this.props.items,selectedFloorplanItemModel:null,selectedCategory:e.selectedCategory},(()=>{this.floorplanItemCategorySelectRef.current&&this.floorplanItemCategorySelectRef.current.setValue(this.state.selectedCategory),this.searchInputRef.current&&this.searchInputRef.current.setSearchInputValue(e.searchInputValue)}))},this.saveSettingsDataToParent=()=>{this.props.setFloorplanItemsSelectionSettingsData&&this.props.setFloorplanItemsSelectionSettingsData({searchInputValue:this.searchInputRef.current?this.searchInputRef.current.getSearchInputValue():"",selectedCategory:this.state.selectedCategory})},this.state={floorplanItemsFiltered:[],selectedFloorplanItemModel:null,selectedCategory:"All"},this.disabledValue=e.mainComponentThis.isAddOnApp,this.floorplanItemCategorySelectRef=o.createRef(),this.searchInputRef=o.createRef(),this.onFloorplanItemModelClick=this.onFloorplanItemModelClick.bind(this),this.onFloorplanItemsCategorySelectClick=this.onFloorplanItemsCategorySelectClick.bind(this),this.onFloorplanItemSearchInputChange=this.onFloorplanItemSearchInputChange.bind(this),this.onOpenPanelSelectionBoxActions=this.onOpenPanelSelectionBoxActions.bind(this),this.saveSettingsDataToParent=this.saveSettingsDataToParent.bind(this)}componentDidMount(){this.setState({floorplanItemsFiltered:this.props.items,selectedFloorplanItemModel:this.props.initialSelectedItemModel,selectedCategory:"All"},(()=>{this.floorplanItemCategorySelectRef.current&&this.floorplanItemCategorySelectRef.current.setValue("All"),this.searchInputRef.current&&this.searchInputRef.current.setSearchInputValue("",!1)}))}render(){const{floorplanItemsFiltered:e,selectedFloorplanItemModel:t,selectedCategory:i}=this.state,n="All"===i?e:[e.find((e=>e.title===i))];return(0,a.jsxs)("div",{className:`floorplan-items-container ${this.props.containerClasses||""}`,children:[this.props.items.length>1&&(0,a.jsx)(Xn,{disabled:this.props.disabled,ref:this.floorplanItemCategorySelectRef,onListItemClick:this.onFloorplanItemsCategorySelectClick,listItems:["All",...Object.values(this.props.items).map((e=>e.title))]}),this.props.items.reduce(((e,t)=>e+t.models.length),0)>1&&!this.props.hideSearchInput&&(0,a.jsx)(hn,{ref:this.searchInputRef,onSearchInputChangeCallback:this.onFloorplanItemSearchInputChange}),(0,a.jsx)("div",{className:"floorplan-items-data-container",children:n.map((e=>{let i=[],n=[];for(let t=0;t<e.models.length;t++)this.props.mainComponentThis.userAddedObjects.find((i=>i.object_external_id===e.models[t]))&&""===ee(e.models[t])?n.push(e.models[t]):i.push(e.models[t]);return(0,a.jsxs)("div",{className:"floorplan-item-data-container",children:[e.models.length>0&&!this.props.hideCategoryLabel&&(0,a.jsx)("div",{className:"floorplan-item-category-label",children:e.title}),(0,a.jsx)("div",{className:`floorplan-item-models-selection-grid ${this.props.gridContainerClasses||""}`,children:i.map((i=>(0,a.jsx)(ya,{disabled:this.props.disabled,selected:t===i,visibleByDefault:this.state[`${i}_loaded`],floorplanItemModel:i,floorplanItem:e,onFloorplanItemModelClick:this.onFloorplanItemModelClick,onLoadHandler:()=>this.setState({[`${i}_loaded`]:!0}),mainComponentThis:this.props.mainComponentThis},i)))}),n.length>0&&(0,a.jsxs)(o.Fragment,{children:[e.models.length>1&&(0,a.jsx)("hr",{className:"indoor-modal-divider",style:{backgroundColor:"#19ab7f"}}),(0,a.jsx)("div",{className:`floorplan-item-models-selection-grid ${this.props.gridContainerClasses||""}`,children:n.map((i=>(0,a.jsx)(ya,{disabled:this.props.disabled,selected:t===i,visibleByDefault:this.state[`${i}_loaded`],floorplanItemModel:i,floorplanItem:e,onFloorplanItemModelClick:this.onFloorplanItemModelClick,onLoadHandler:()=>this.setState({[`${i}_loaded`]:!0}),mainComponentThis:this.props.mainComponentThis},i)))})]})]},e.title)}))})]})}}const va=Sa;class Da extends o.Component{constructor(e){super(),this.onChangeSelectedItemTypeStatusChange=()=>{this.setState({changeFloorplanItemType:!this.state.changeFloorplanItemType})},this.onSelectedItemTypeChangeCallback=e=>{const t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);if("furniture"===t.class){!this.props.mainComponentThis.furnitureAsyncPatternRef.current.isPatternLoaded(e)&&this.props.mainComponentThis.furnitureAsyncPatternRef.current.loadPattern(e);const i=t.graph.querySelectorAll("path");for(let o=0;o<i.length;o++)i[o].getAttribute("fill")===`url(#${t.type})`&&i[o].setAttribute("fill",`url(#${e})`)}t.type=e,t.update(this.props.mainComponentThis),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedItemType(e),this.props.mainComponentThis.save(!1,!1)},this.state={changeFloorplanItemType:!1},this.disabledValue=e.mainComponentThis.isAddOnApp,this.onChangeSelectedItemTypeStatusChange=this.onChangeSelectedItemTypeStatusChange.bind(this),this.onSelectedItemTypeChangeCallback=this.onSelectedItemTypeChangeCallback.bind(this)}render(){const{changeFloorplanItemType:e}=this.state,t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);return(0,a.jsxs)(xo,{children:[(0,a.jsx)(qo,{disabled:this.disabledValue,infoLabel:!0,infoLabelTitle:"Replace object",infoText:"Check this box if you want to change selected item type.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:e,onChange:this.onChangeSelectedItemTypeStatusChange}),e?(0,a.jsx)(va,{disabled:this.disabledValue,gridContainerClasses:"right-box-change-floorplan-item-type-selection-container",initialSelectedItemModel:t.type,items:[{...this.props.mainComponentThis.folderNameToModelsMapping[this.props.selectedItemFolderName],models:this.props.mainComponentThis.folderNameToModelsMapping[this.props.selectedItemFolderName].models.filter((e=>Q[this.props.mainComponentThis.folderNameToModelsMapping[this.props.selectedItemFolderName].details[e].itemType]===t.family))}],onFloorplanItemSelectionCallback:this.onSelectedItemTypeChangeCallback,mainComponentThis:this.props.mainComponentThis},e):(0,a.jsx)(va,{disabled:!0,containerClasses:"right-box-floorplan-item-type-selection-container",gridContainerClasses:"single-column",initialSelectedItemModel:t.type,items:[{...this.props.mainComponentThis.folderNameToModelsMapping[this.props.selectedItemFolderName],models:this.props.mainComponentThis.folderNameToModelsMapping[this.props.selectedItemFolderName].models.filter((e=>e===t.type))}],mainComponentThis:this.props.mainComponentThis},e)]})}}const Ta=Da;class ja extends o.Component{constructor(e){var t;super(),t=this,this.updatePresenceAreaGraph=()=>{if(!this.props.mainComponentThis.floorplan3DComponent.current){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.presenceAreaObj2DId);this.props.mainComponentThis.createPresenceArea2DVisualization(e)}},this.setPresenceAreaParameterValue=(e,t)=>{e.isMeasureItem&&(t=this.props.mainComponentThis.convertValueToSvgUnits(t,"meter","feet")),this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.presenceAreaObj2DId).additionalParams[e.parameterName]=t,this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)},this.onPresenceAreaNumberParameterChange=e=>function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.setPresenceAreaParameterValue(e,null!==i&&void 0!==i?i:parseFloat(e.inputRef.current.getValue())),t.updatePresenceAreaGraph()},this.onPresenceAreaSelectDetectedObjectChange=()=>e=>{this.setState({presenceAreaModelsItem:{...this.state.presenceAreaModelsItem,value:e.target.value}})},this.onPresenceAreaDetectedObjectModelChange=e=>{let t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.presenceAreaObj2DId).additionalParams[this.state.presenceAreaModelsItem.parameterName];t.find((e=>e.detectedObjectField===this.state.presenceAreaModelsItem.value.value)).modelType=e,this.setPresenceAreaParameterValue(this.state.presenceAreaModelsItem,t)},this.onPresenceAreaRotationAngleChange=e=>function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const o=null!==e&&void 0!==e?e:t.presenceAreaOptionItems.find((e=>"presence_area_rotation"===e.field));let n;null!==i?(n=i,o.inputRef.current.setValue(i)):n=parseFloat(o.inputRef.current.getValue()),t.props.mainComponentThis.setItemRotationAngle(n,t.props.mainComponentThis.getSelectedWallFreeItemObj2D(t.props.presenceAreaObj2DId)),t.onPresenceAreaNumberParameterChange(o)(n)},this.state={presenceAreaModelsItem:{field:"presence_area_models",label:"",parameterName:"detectedObjectToModelMappings"}},this.userUnit=e.mainComponentThis.isAddOnApp?e.mainComponentThis.measureSystemContext.userUnit:e.mainComponentThis.context.userUnit,this.disabledValue=e.mainComponentThis.isAddOnApp,this.presenceAreaOptionItems=[{field:"presence_area_width",label:"Width:",min:"metric"===this.userUnit?.5:1,max:1/0,step:"metric"===this.userUnit?.1:1,inputRef:o.createRef(),parameterName:"presenceAreaWidth",isMeasureItem:!0},{field:"presence_area_height",label:"Height:",min:"metric"===this.userUnit?.5:1,max:1/0,step:"metric"===this.userUnit?.1:1,inputRef:o.createRef(),parameterName:"presenceAreaHeight",isMeasureItem:!0,isLongTextItem:!0},{field:"presence_area_rotation",label:"Rotation(\xb0):",min:-180,max:180,step:1,inputRef:o.createRef(),parameterName:"presenceAreaRotation"}],this.presenceModelsFolderName=e.mainComponentThis.getItemsClassSubClassFolderName("presence"),this.updatePresenceAreaGraph=this.updatePresenceAreaGraph.bind(this),this.setPresenceAreaParameterValue=this.setPresenceAreaParameterValue.bind(this),this.onPresenceAreaNumberParameterChange=this.onPresenceAreaNumberParameterChange.bind(this),this.onPresenceAreaSelectDetectedObjectChange=this.onPresenceAreaSelectDetectedObjectChange.bind(this),this.onPresenceAreaDetectedObjectModelChange=this.onPresenceAreaDetectedObjectModelChange.bind(this),this.onPresenceAreaRotationAngleChange=this.onPresenceAreaRotationAngleChange.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.presenceAreaObj2DId);this.updatePresenceAreaGraph(),this.presenceAreaOptionItems.forEach((t=>{let i=e.additionalParams[t.parameterName];t.isMeasureItem&&(i=this.props.mainComponentThis.convertSvgToValueUnits(i,"meter","feet",-Math.log10(t.step))),t.inputRef.current.setValue(i),t.inputRef.current.setInitialValue(i),this.props.restoreSelectedBinderCall&&this.props.mainComponentThis.setItemRotationAngle(i,e)}));const t=this.props.mainComponentThis.getPresenceAreaParametersDefaultValues()[this.state.presenceAreaModelsItem.parameterName].map((e=>({name:e.detectedObjectName,value:e.detectedObjectField})));this.setState({presenceAreaModelsItem:{...this.state.presenceAreaModelsItem,options:t,value:t[0]}})}render(){const{presenceAreaModelsItem:e}=this.state,t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.presenceAreaObj2DId),i=this.presenceAreaOptionItems.filter((e=>e.isMeasureItem)),n=this.presenceAreaOptionItems.find((e=>"presence_area_rotation"===e.field));return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(xo,{label:`Dimensions(${"metric"===this.userUnit?"m":"ft"})`,containerStyle:{marginBottom:"0.5rem"},children:i.map((e=>(0,a.jsx)(nn,{disabled:this.disabledValue,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:e.inputRef,isNumberInput:!0,controledNumberInput:!1,label:e.isLongTextItem?e.label:(0,a.jsx)(dn,{longText:this.presenceAreaOptionItems.find((e=>e.isLongTextItem)).label,shortText:e.label}),labelClasses:"label-form-control-cancel",item:e,onChange:this.onPresenceAreaNumberParameterChange},e.field)))}),(0,a.jsx)(xo,{label:"Orientation",containerStyle:{marginBottom:"0.5rem"},children:(0,a.jsx)(nn,{disabled:this.disabledValue,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:n.inputRef,isNumberInput:!0,controledNumberInput:!1,label:n.label,labelClasses:"label-form-control-cancel",item:n,onChange:this.onPresenceAreaRotationAngleChange})}),(0,a.jsxs)(xo,{containerClasses:"presence-area-models-container",children:[(0,a.jsx)(zo,{labelText:"Models",infoText:"Specify which models to display for each detected object in the presence area.",explanationInfoBoxLeft:-50,disableMarginIncrease:!0}),e.value&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(Qo,{disabled:this.disabledValue,selectInput:!0,item:e,fullWidth:!0,formGroupStyle:{marginBottom:"0.5rem"},onChange:this.onPresenceAreaSelectDetectedObjectChange}),(0,a.jsx)(va,{disabled:this.disabledValue,containerClasses:"right-box-presence-area-model-selection-container",initialSelectedItemModel:t.additionalParams[e.parameterName].find((t=>t.detectedObjectField===e.value.value)).modelType,items:[{...this.props.mainComponentThis.folderNameToModelsMapping[this.presenceModelsFolderName]}],hideSearchInput:!0,hideCategoryLabel:!0,onFloorplanItemSelectionCallback:this.onPresenceAreaDetectedObjectModelChange,mainComponentThis:this.props.mainComponentThis},e.value.value)]})]})]})}}const Ia=ja;class Pa extends o.Component{constructor(){var e;super(),e=this,this.getRightBoxWidth=()=>this.containerRef.current.offsetWidth,this.setRightBoxAsActive=function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&e.props.mainComponentThis.hideActiveRightBox(),e.props.mainComponentThis.translateRightBox(e.containerRef.current,-e.getRightBoxWidth(),!0),e.props.mainComponentThis.activeRightBoxComponent=e,e.setState({isActive:!0})},this.setRightBoxAsInactive=()=>{this.props.mainComponentThis.translateRightBox(this.containerRef.current,this.getRightBoxWidth(),!1),this.props.mainComponentThis.activeRightBoxComponent=null,this.setState({isActive:!1,hide:!1})},this.onShowHideControlClick=()=>{const e=this.getRightBoxWidth();this.props.mainComponentThis.translateRightBox(this.containerRef.current,this.state.hide?-e:e,!0),this.setState({hide:!this.state.hide})},this.state={isActive:!1,hide:!1},this.containerRef=o.createRef(),this.getRightBoxWidth=this.getRightBoxWidth.bind(this),this.setRightBoxAsActive=this.setRightBoxAsActive.bind(this),this.setRightBoxAsInactive=this.setRightBoxAsInactive.bind(this),this.onShowHideControlClick=this.onShowHideControlClick.bind(this)}render(){const e=this.props.showHideControl&&this.state.isActive;return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsxs)("div",{ref:this.containerRef,style:this.props.containerStyle||{},className:`rightBox right-box-transition ${this.props.containerClasses||""}`,children:[(0,a.jsx)("div",{title:this.props.closeButtonTitle||"Close",className:"close-rightBox",onClick:this.props.onCloseRightBox,children:(0,a.jsx)(to.A,{})}),this.props.children]}),(0,a.jsx)("div",{title:this.state.hide?"Show":"Hide",className:"panel-control-container right-box-control right-box-transition svg-center-inside-container",style:{visibility:e?"visible":"hidden",pointerEvents:e?"auto":"none",transform:`translateX(${e&&!this.state.hide?-this.getRightBoxWidth():0}px)`},onClick:this.onShowHideControlClick,children:(0,a.jsx)(ma.A,{className:"right-box-transition",style:this.state.hide?{transform:"rotate(0deg)"}:{}})})]})}}const Oa=Pa;class ka extends o.Component{constructor(){super(),this.onManualTextureToggleChange=e=>{const t=e.target.checked?1:0;this.props.onRepeatChangeCallback&&this.props.onRepeatChangeCallback(t),this.setValue(t)},this.onTextureRepeatCountChange=e=>{const t=parseFloat(e);this.props.onRepeatChangeCallback&&this.props.onRepeatChangeCallback(t),this.setValue(t)},this.state={floorTextureRepeatCount:void 0},this.MIN_REPEAT_TIMES=5,this.MAX_REPEAT_TIMES=5,this.NUMBER_OF_STEPS=40,this.MIN_REPEAT_VALUE=1/this.MIN_REPEAT_TIMES,this.MAX_REPEAT_VALUE=1*this.MAX_REPEAT_TIMES,this.STEP_VALUE=r((this.MAX_REPEAT_VALUE-this.MIN_REPEAT_VALUE)/this.NUMBER_OF_STEPS,1),this.repeatSliderInputRef=o.createRef(),this.repeatSliderComponentRef=o.createRef()}getValue(){return this.state.floorTextureRepeatCount}setValue(e,t){this.setState({floorTextureRepeatCount:e},(()=>t&&t())),this.repeatSliderInputRef.current.value=e,this.repeatSliderComponentRef.current.inputNumberComponentRef.current.setValue(e),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}render(){return(0,a.jsxs)("div",{children:[(0,a.jsx)(qo,{disabled:this.props.disabled,infoLabel:!0,infoLabelTitle:"Set texture size",infoText:"Manually set the texture size.",explanationInfoBoxStyles:{left:-120,width:100,zIndex:1},checked:!!this.state.floorTextureRepeatCount,onChange:this.onManualTextureToggleChange}),(0,a.jsx)("div",{style:{display:[0,void 0].includes(this.state.floorTextureRepeatCount)?"none":"block"},children:(0,a.jsx)(kn,{disabled:this.props.disabled,ref:this.repeatSliderComponentRef,sliderInputRef:this.repeatSliderInputRef,minValue:this.MIN_REPEAT_VALUE,maxValue:this.MAX_REPEAT_VALUE,sliderStep:this.STEP_VALUE,onSliderValueChanged:this.onTextureRepeatCountChange})})]})}}const Fa=ka;class Ma extends o.Component{constructor(e){super(),this.setFloorParametersForRoom=e=>{let t=e.roomFloorType;t||(t="none"!==e.floorTexture?"pattern":"default"),this.setState({roomFloorTypeItem:{...R,value:R.options.find((e=>e.value===t))}},(()=>{this.setFloorParametersData()}))},this.setFloorParametersData=()=>{const e=this.props.mainComponentThis.getSelectedRoom2D();switch(this.state.roomFloorTypeItem.value.value){case"default":this.props.mainComponentThis.onRoomFloorDefaultType();break;case"pattern":this.roomFloorTypesSelectionRef.current.setSelectedItem(e.floorTexture),this.roomFloorTexturesRepeatComponentRef.current.setValue(e.floorTextureRepeatCount,(()=>this.props.mainComponentThis.onRoomFloorTextureChange(null,e.floorTexture)));break;case"color":this.setState({floorColorItem:{value:e.floorColor||this.defaultRoomFloorColor}},(()=>this.onFloorColorChange()({target:{value:this.state.floorColorItem.value}})));break;case"none":this.props.mainComponentThis.onRoomFloorNoneType();break;default:console.error("Invalid room floor type")}},this.onRoomFloorTypeItemClick=()=>e=>{this.setState({roomFloorTypeItem:{...this.state.roomFloorTypeItem,value:e.target.value}},(()=>{this.props.mainComponentThis.getSelectedRoom2D().roomFloorType=this.state.roomFloorTypeItem.value.value,this.setFloorParametersData(),this.props.mainComponentThis.save(!1,!0)}))},this.onFloorColorChange=()=>e=>{const t=e.target.value;this.setState({floorColorItem:{...this.state.floorColorItem,value:t}}),this.props.mainComponentThis.onRoomFloorColorChange(t)},this.state={roomFloorTypeItem:null,floorColorItem:null},this.roomFloorTypesSelectionRef=o.createRef(),this.roomFloorTexturesRepeatComponentRef=o.createRef(),this.defaultRoomFloorColor="#ffffff",this.disabledValue=e.mainComponentThis.isAddOnApp,this.setFloorParametersForRoom=this.setFloorParametersForRoom.bind(this),this.setFloorParametersData=this.setFloorParametersData.bind(this),this.onRoomFloorTypeItemClick=this.onRoomFloorTypeItemClick.bind(this),this.onFloorColorChange=this.onFloorColorChange.bind(this)}render(){const{roomFloorTypeItem:e,floorColorItem:t}=this.state;return(0,a.jsxs)(xo,{label:"Room floor",containerClasses:"room-floor-textures-form-group-container",children:[e&&(0,a.jsx)(Qo,{disabled:this.disabledValue,formGroupStyle:{marginBottom:0},selectInput:!0,fullWidth:!0,explanationInfoBoxStyles:{left:-120,width:100,zIndex:1},item:e,onChange:this.onRoomFloorTypeItemClick},this.props.mainComponentThis.selectedRoomId),(()=>{switch(e&&e.value.value){case"pattern":return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{ref:this.props.mainComponentThis.roomFloorTexturesRepeatComponentContainerRef,children:(0,a.jsx)(Fa,{disabled:this.disabledValue,ref:this.roomFloorTexturesRepeatComponentRef,onRepeatChangeCallback:this.props.mainComponentThis.onRoomFloorTextureRepeatChange,mainComponentThis:this.props.mainComponentThis})}),(0,a.jsx)("div",{ref:this.props.mainComponentThis.roomFloorTexturesComponentContainerRef,className:"room-floor-textures-component-container",children:(0,a.jsx)(zs,{disabled:this.disabledValue,ref:this.roomFloorTypesSelectionRef,items:ze,onClickCallback:this.props.mainComponentThis.onRoomFloorTextureChange,mainComponentThis:this.props.mainComponentThis})})]});case"color":return t?(0,a.jsx)(Xo,{disabled:this.disabledValue,item:t,containerStyle:{marginTop:"0.5rem"},onChange:this.onFloorColorChange,boxContainer:this.props.mainComponentThis.roomTools.current.containerRef.current}):null;default:return null}})()]})}}const Aa=Ma;class Ra extends o.Component{constructor(e){super(),this.setMaterialColor=(e,t)=>{this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((i=>i.setPaintedColor(t,e.name)),this.props.selectedItem)},this.resetMaterialColor=e=>{this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>t.setPartColor("default",e.name)),this.props.selectedItem)},this.getPartListItemClickHandler=()=>(e,t)=>{const i=this.state.edit[t];if(this.state.selectedMesh){const e=this.state.edit[this.state.selectedMesh.index],t=Object.values(this.MATERIAL_OPTIONS).findIndex((t=>t.value===e.value.type));this.syncMeshWithItemOption(e,Object.values(this.MATERIAL_OPTIONS)[t])}this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((e=>{e.setPartColor(this.HIGHLIGHT_COLOR,i.value.meshName)}),this.props.selectedItem),this.highlightedTimeout&&clearTimeout(this.highlightedTimeout),this.highlightedTimeout=setTimeout((()=>{this.syncMeshWithItemOption(this.state.edit[t],Object.values(this.MATERIAL_OPTIONS).find((e=>e.value===this.state.edit[t].value.type)))}),this.partHiglightTimeoutMs),this.partSelectListsRef.current.setValue(i.label);const o=Object.values(this.MATERIAL_OPTIONS).find((e=>e.value===i.value.type));o?this.partMaterialSelectListsRef.current.setValue(o.label):this.partMaterialSelectListsRef.current.setValue(Object.values(this.MATERIAL_OPTIONS)[0].label),this.setState({selectedMesh:{name:i.value.meshName,index:t}});o.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():this.props.selectedItem.setSelected()},this.getPartMaterialListItemClickHandler=(e,t)=>(e,i)=>{const o=Object.values(this.MATERIAL_OPTIONS)[i];o.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():this.props.selectedItem.setSelected(),this.setState({edit:this.state.edit.map(((e,i)=>{if(i===t){const{colorPickerColor:t,textureName:i}=this.syncMeshWithItemOption(e,o);return o.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.partTextureSelectRef.current.setSelectedItem(i),{...e,value:{...e.value,type:o.value,...o.value===this.MATERIAL_OPTIONS.COLOR.value&&{color:t}}}}return e}))},(()=>{this.save()})),this.partMaterialSelectListsRef.current&&this.partMaterialSelectListsRef.current.setValue(o.label)},this.getOnItemColorChange=e=>{let{mesh:t}=e;return e=>{let{target:i}=e;const o=i.value;this.setState({edit:this.state.edit.map((e=>e.value.meshName===t.name?{...e,value:{...e.value,color:o}}:e))},(()=>{this.save()}));const n=parseInt(o.split("#").at(-1),16);this.setMaterialColor(t,n)}},this.texturesSelectionCallbackHandler=(e,t)=>{this.setState({edit:this.state.edit.map((e=>e.value.meshName===this.state.selectedMesh.name?{...e,value:{...e.value,type:this.MATERIAL_OPTIONS.TEXTURE.value,textureName:t}}:e))},(()=>{this.save()})),this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((e=>{e.setCustomTextureByName(t,this.state.selectedMesh.name)}),this.props.selectedItem)},this.state={edit:[],selectedMesh:null},this.meshes={},this.partHiglightTimeoutMs=2e3,this.disabledValue=e.mainComponentThis.isAddOnApp,this.MATERIAL_OPTIONS={DEFAULT:{label:"Default",value:"default"},COLOR:{label:"Color",value:"color"},TEXTURE:{label:"Texture",value:"texture"}},this.HIGHLIGHT_COLOR=2600544,this.partSelectListsRef=o.createRef(),this.partMaterialSelectListsRef=o.createRef(),this.selectListsColorPickerRef=o.createRef(),this.partTextureSelectRef=o.createRef(),this.save=this.save.bind(this),this.getPartMaterialListItemClickHandler=this.getPartMaterialListItemClickHandler.bind(this),this.getOnItemColorChange=this.getOnItemColorChange.bind(this),this.setMaterialColor=this.setMaterialColor.bind(this),this.resetMaterialColor=this.resetMaterialColor.bind(this),this.syncMeshWithItemOption=this.syncMeshWithItemOption.bind(this),this.highlightedTimeout=null}save(){const e=this.state.edit.map((e=>e.value));this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId).additionalParams.materials=e,this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}syncMeshWithItemOption(e,t){let i,o;if(t.value===this.MATERIAL_OPTIONS.DEFAULT.value&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>{t.removePaintedColor(e.value.meshName,!1),t.removeCustomTexture(e.value.meshName,!1)}),this.props.selectedItem),t.value===this.MATERIAL_OPTIONS.COLOR.value){const t=this.props.selectedItem.getPartColor("default",e.value.meshName,!0),o=t?`#${t.toString(16).padStart(6,"0")}`:null;i=e.value.color||o||"#000000";const n=parseInt(i.split("#").at(-1),16);this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>t.setPaintedColor(n,e.value.meshName)),this.props.selectedItem)}return t.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>{o=t.restoreCustomTexture(e.value.meshName)}),this.props.selectedItem),{colorPickerColor:i,textureName:o}}componentDidMount(){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId).additionalParams.materials||[];this.setState({edit:this.props.selectedItem.mesh.children.filter((e=>e.name&&e.name.length>0)).map(((t,i)=>(this.meshes[t.name]=t,{mesh:t,label:`Part ${i+1}`,value:e.find((e=>e.meshName===t.name))||{type:this.MATERIAL_OPTIONS.DEFAULT.value,meshName:t.name}}))),selectedMesh:this.props.selectedItem.mesh.children[0]?{name:this.props.selectedItem.mesh.children[0].name,index:0}:null},(()=>{const e=this.state.selectedMesh&&this.state.edit[this.state.selectedMesh.index];if(e&&(this.partSelectListsRef.current&&this.partSelectListsRef.current.setValue(e.label),this.partMaterialSelectListsRef.current)){const t=Object.values(this.MATERIAL_OPTIONS).find((t=>t.value===e.value.type));t?(t.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():t.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.partTextureSelectRef.current.setSelectedItem(e.value.textureName),this.partMaterialSelectListsRef.current.setValue(t.label)):this.partMaterialSelectListsRef.current.setValue(Object.values(this.MATERIAL_OPTIONS)[0].label)}}))}reset(){if(this.props.mainComponentThis.floorplan3DComponent.current&&this.state.selectedMesh){const e=this.state.selectedMesh.index,t=this.state.edit[e],i=Object.values(this.MATERIAL_OPTIONS).findIndex((e=>e.value===t.value.type));this.syncMeshWithItemOption(t,Object.values(this.MATERIAL_OPTIONS)[i])}}render(){const e=this.state.edit.map((e=>e.label)),t=this.state.selectedMesh&&this.state.selectedMesh.index,i=t>=0&&this.state.edit[t];return i?(0,a.jsxs)(xo,{label:"Item material",containerClasses:"select-object-material-container",children:[(0,a.jsx)(Xn,{ref:this.partSelectListsRef,onListItemClick:this.getPartListItemClickHandler(),listItems:e}),(0,a.jsx)("div",{style:{marginBottom:"0.5rem"}}),(0,a.jsx)(Xn,{disabled:this.disabledValue,ref:this.partMaterialSelectListsRef,onListItemClick:this.getPartMaterialListItemClickHandler(i,t),listItems:Object.values(this.MATERIAL_OPTIONS).filter((e=>e.value!==this.MATERIAL_OPTIONS.TEXTURE.value||this.props.selectedItem.isPartUVUnwrapped(this.state.selectedMesh.name))).map((e=>e.label))}),i.value.type===this.MATERIAL_OPTIONS.COLOR.value&&(0,a.jsx)(Xo,{disabled:this.disabledValue,containerStyle:{marginTop:"0.5rem",zIndex:this.state.edit.length-t},item:{...i,value:i.value.color},onChange:this.getOnItemColorChange,boxContainer:this.props.colorPickerBoxContainer}),(0,a.jsx)("div",{style:{display:i.value.type===this.MATERIAL_OPTIONS.TEXTURE.value?"block":"none"},children:(0,a.jsx)(xo,{label:"Select texture",containerClasses:"room-floor-textures-form-group-container ",children:(0,a.jsx)("div",{className:"room-floor-textures-component-container",style:{height:"500px"},children:(0,a.jsx)(zs,{disabled:this.disabledValue,ref:this.partTextureSelectRef,items:ze,onClickCallback:this.texturesSelectionCallbackHandler,mainComponentThis:this.props.mainComponentThis})})})})]}):null}}const La=Ra,Ba="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbcAAABgCAYAAACe2zzIAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAZgElEQVR42u2dW2wc13nH/2dm9jYURS11oWinlkWqSF0XLly6BQr3kQLcPCSOG6qxrSCBm1BoKj+4TkA9BEgC+EFC7OZFNSomNRLEsVzRVY2+NID4WL3UZgMLUaogIhU51oWUyBFNieJtZ/owe8Tds2d2Z2bncmb5/QBCEkXunpmdc/7f7XyHOY6DuDmz8KtXZp3l725n+fPdLPf158qP34j9TQmCIIgtC4tT3P7duvjMbfv+yU+d9UH+PYOx1T5mvvVC7xPfTPviCYIgiM4kFnE7a13sX3LWfzxn3/+c188Umb7Yz7qOfqn38bfTvgkEQRBEZxG5uL2zcOHNWWf5pQ3HKfj5+e0sN92nmSPPlv/4l2nfDIIgCKIziEzc3lu4ePiGc+/kilPpCfP7ezXzdBczXqV8HEEQBNEubYvb+9avn5y1lydq82phMRhb3cvM15/vfeI7ad8YgiAIIruEFrez1sX+e87GGzft5eejHpTJjJt9zPw25eMIgiCIMIQSt9MLF1676Sx/y29eLSw7teL5XlZ4mfJxBEEQRBACidt7CxcPzzrLP1h2NvYmNUCDsdVdrHSW8nEEQRCEX3yJ2/vWr5+8Za/85I6z+kRaAy0yfXEXK56kfBxBEATRiqbixvNqt537z8UdgvTLdpab3qWVjv5N+fFfpD0WgiAIQk08xe30woXXbjsrR8OW9sfNTq14fgfLj1CokiAIghBpEDdZyyxV4fm4r/T+6Qtpj4UgCIJQhwfidta62H/HWZuYt1eeTntQQSkyfbGPmd8/1PsnP0x7LARBEET6MMdx8LOFj95RKa8WFmrlRRAEQQAAG7899VGaVZBRs7icw771vg92a4UvPLt/D+XjCIIgtiCaDbsr7UFEwfKajt/Pm5hdLGJ2xf7zqysbV96dnn0z7XERBEEQyaOlPYB2qdgMN+8U8cm8iftr+ub3HRSur1b+/p8v3bhz9src4bTHSRAEQSQH+5fbH1zOQmWkjPmlAqx7OdgOq/v+Pq0bJsvVfW+HoV3Ylde+9vlH92yFfNxYzd+Pt/jZKQAT1b9bAMZjGtMAgGnhe4MAZhK/O2pxCsBozb8tuPfFSnFM4mc1CeBgiuOJijKAD6vXp8J18XlaRv2clXECm8/EiRTHHIRhAEPVv4/U/F1G7To0Wf13W2RS3O6uGJj7tIiNCpP+v0zcOH15/XSXzl7tsHzcCNwJ20rI/DIDV+QmEJ34kLg1IrsnAHAM6S5gsnEdhLvoZJkx1M+RpMVtCO6CPwZX0NrBgvuMRCIEETJavcaRCF5rvHptoQzuTIUl1ysafj9v4rpV8hS2VsyuVZ6/urJx5d+mZ19L+3rahFt7CwDOIDphAzaFchqupTva3ssRHowG/H6anEp7AG0SpfEXlFG48+jD6hjaFTZUX+N49TWn0drzixu+Fp1CNMIGuPftFACneq0DQX45E55bxWaYv5vHnXt5Xz/fzHOrpVvXpnfmte89t39Plo7W4aIW9GGuDWsA7oMSZBGdqb5G2LAleW71lOHeD6+F7gjiCxG3QlWPsh3OoHHRjdtzG0GwRZl7Y7UE8fIsuJ9Rks/NMFwB8nuNk6iPAARdh8ar96jluqG8uFn38phfyjfk1ZrhV9w4O3Pa+XJOezkD+ThuyTSDPzxTCBZG4iGTITS3vCbhTqCgoRASt3rEEJnIFICnUhqbl7ipkA8MwzCAc5LvxyVuA3Dn6XCTn5lE/Vz1g985OgXXOIo7XNnsGeZCHTSPP1bzZzNRb2n8KStuy2s6bt4JF34MKm4AoDOs7srpZxXNx7WaLDwZG6VVPQp3Anm9Z1DPgsStngXUT94jaAxZpZXn8hI3wP3Mj6Qwpnb4EPJihjjErZkBynPZUc3Tser7eXlNcXraxyGPHk1iM1/fLgPY9H5lNP38lMu5rVc0XLNK+GTeDJ1XC0PFQWF2rfL8tdXK/703M/dK2vehhmG4k1MmMvzDfQrRP8Tj1df2WmBPIb0cRtYZRb2I1Rbw1JJ2HsVr7ENtv0pnjvcM5MI2A+AQXGMuynl6ovqahyA3Eo9D7rG2i1da5Ajc9SIKYQM2UyEMrlBbkv/3RBlxq9gM80sFXJnrwr0VI7VxrNpOz8crG//0o9/cvPwfV+aeSfm2jMF9OEX3nE+WJCx7LqAya30M2S80SANxYTgh/MmpLaVWiawYNbzoIgnOQR4qPAZXgKJa8GVMVN/jmOT/uHEcRREL4D6P4j2dgWtgx5nrOwGgF/VzpKmhoIS4LS7ncGWuC/N3/RWMJMFSxR68cn/jv37625v//f6Vuf4UhuAVzx5H/JNFBn/f2jg+t6wI//BtG5zanMQMGhcIFSsnoyr1jhsxbxNHrpDvnRMjKzxnmuT8OFF9T9GjGYLcSA6DuCZZcA3tpLYjHKte4zGo7Lktr+m4eqsLs4vFQAUjSTK/bj99dWXjys8vz76T4Nt6CdshpJvv4BbaJNyH+iC2bs4sLKJYiYufTNwClUDHhDgu1b23AXh7yFFyBo3e9STceZLG/jMuqmJEhwtcOwyjUcTDFJdFcY0tP8tUxG29oj1ombW6oYTz2BSej0uolZcsgcqFJGlvzQue5yNhC4a4OMgqyWRVrirk3mRbSVQYlxdiuJxvCI6S42hc7HmuOk34eiETuDNtvK54rbx4REkSVRaeV7t6y8Sn94NVM6rAqu30/O7+xs9+9Jubl//zd3NPxvAWvCpSRMXuECRswRG9tnHIQ2WiVTqC6HImYZGFoMeghlcpIlb5yvaPRfEeorhPQK1KUtm6IRu3X8TnVxVjW0pi4vbJuokr89swfzfYnjUVWarYg5eXN/43hlDlGTQuYknGs4n44GXNtXhZveLepzLUyL2Jm2f99ERMAzHy4WvTbwBkRugU3LmqGrL1I4xRMoDGtWlri9syDFxyenDF7sbV4jYsFtQpGmn72irOX0T4cmNojN0fg+IPEOEbUQTG0XzBHZf8ftreG9DomfBegqogLtxxFD3JClVUFDavsZURvMpZFEMLim/mj03cKmCYcbpx0d6BJccNQdqM4U6+gGvburCi622+Q0chs4B9JU2JTCDzvFoZLaL4laFGheKkZOyqFJfI5lHUYcJhNH6WLSv3UmYGjdsEZMUhzRANK6WFDYhJ3K45Jj6yezHvFKT/v8E0zJomZs0SNjT1C0oSQNzUC6hrCRLBERdDsb+eFzLvTQXEhXIIaoRNxQ4vE4g+Vy1+BkoXVdRwAvLwpF+UFzORSJVlCTl8ZPfiumOigtZ5tRXdwLWuLliFAmyW7TxcG8iszVYhKyI7yD5fvx65WHAStMlsXMg8gbTDpjKBPRbmhZog83ayFF1p13urRYUQeVMiEbdV6Ljk9OCS3YO1EC/5aT6Pa11dWMp3Tj4uADKvLepJSaSHrNWWX29CVuWnQmgSaDTA0hZeMTQaR6hQdqqAalXMzZCN1+9nJt7LMtTsnvOAtsStAoaPnS5csMsP8mphsRnDQqGAG13mVsvH+S0PJ7JJq03brRBDXu1Y21EiE97AZ25FhFjUIuv00i6ynGeWvDaOeF/8bjOZQeO6pMJz6ElocZt1SvjI7sWsU4p0QGuajlnTxK3SlsjHDaFxMchC/J7wh9hdJMyiK9vorUrubRyNnkAaxSWysG/UBuIwwnvgKjGBxnvj13uTNfZWNjwZWD2WkMOvnDI+drp85dXCsmy4+bjFQr6T83GyfnS0p61zkOVSwyBrqKzK5mkxhN7smKQ4EEv/4yrwEL22LG/REe+P3/CieM1hthQkhm9xW4WO3zrbccnuwX0nubDhnbwbqryby15HEx/IetIRnYEoQEEPbaxF5vGp4r1NScaW1IInawEWV75a1noqq4gGtF9jRJazG0F7Lb1io6W4VcBwzTFxwS7jjpNOwccG0zBfLGLWLHVaPk7muRGdQdShMtFqVqWhMtB41lZSxSViWCyO/pGovocYfsvyXBUFqgz/z9IRND7HI3BPRlDleQTQQtxuO8UHpf0qsKIbmDVNzBeLnZCPk7WzybI1SGwiK/poN4zlZTWrgIVGj0nccxY14mZq2RiifK9appDtoi8LjeLsNzQ5A3lj6CG4p7ersqFfLm5LyLkts5xtsebVwnI3l8MN08x6Ky/xYVK+nQ3hG1kPySjK0mWNi1VJ6IteU9x9J2X9I+OaP6JHkmWvjSM+j0G8Ln6sjux+jwFw4IamUzW+6sRtFTpmnG5csnvaLu2Pm9pWXstGeid3t4HsdG0i+8hCclGVjE+isSWXCpu6ObKN3XGEqkZRbxwmfWhuJ8xV2b61IHidG8cZhZuLc+AaIonniB+I2zXHxEV7h2fLLFXZYBpulUqYNUtY0zMVqiRx60xk7Zmi/GzFRVwlcZNVKkZdXJJE/0gRpXJJESF6XWEiADxEeQTNn3F++LIDN3Q5hgS8Om0BxR1BWmapyopu4IbZhfliEZVsXgaFJLNPEht9VesMIiKGB4cR7UImFtLE0T+yFZ0wV6O8hnEAg3BFrlVueQCu0HGv7kPEJHbaOnrhsEyG9aSs5Quo6GqHVDPOENyHkX+pUtSgAmKrrbjaM6m6LQCQhwijKjLgC2Mt1KouGqLI3Y7DbfjO4P+4riHUi90ZRPQ8a9tY8c4BbQd2aSVoGd4sbTAN21keXcgle7z41oM/jPxL6RY8CSILl8W10VfWUFklI0M8HFS2Hy0MSfSP3KpE7Y2ewKbQHYL/z2oEmyFM7tWF4oEO7GYlDGg96GHZyrlpALYxA93IQc9wWBXqVL0R4RB79MXR35Aj6+uoUmgSiP7UADG8Gef9bUUnzNUkr2EC7vM6CFfsjsB9PlpVnXJDmldfBsp91jk5OWh4SOvCPm07TKZ2aI8BKDIdPayAHDK5sVu0lDoxab2VCHusTVhUbajMmUC951pGe+FJsTAlztJ/kU70DtM8fHQc7uf3FOrFrtkYRrFZjOILaQTPZAb2ad14SOtSMlSZr4YgS8h0rpDErXMQixwsxN97UNbOS3XvTSzh94t4f9M+ILQT5qp4DWkWyXCx64Xr3TULYR6Hz24oTdNTPawAno9TAYNp6Ga5al5NPdENiOiSy1r8ENlAViGZxGIhO+tNpYVXdqhpUO9N5vElXUQiLrRKn2PmE/E5UcU75QVJg3C3GcgKsoYAnEOLZ71l7YUOht2shAP6Dmxj6XQE0QB0VfNqRueUi2TufCRCihgObKdBclBmID+GRCXErQti26xWxNk/0q8hIC6wWRc32UGjKnZdmYQrcAch76hyDk0cAt9KkYOGP9C2YZ+2HYUEtw4UmY7tLI98NvNqrei0SbMVkVVIJp2/qEV2snuayIpf/BaXiFWWcfaPbHUNnWSIimO3oI7nJmMS8m4oA2jSJCCwG2QyAwPadvRpZqz5uBzT0FPNq7HshyC9EK0llcq5idYMoHGhSPp0ZtleOtVyb+Khpn43nqdZRCIi3uMsi1sWj9qy4HpwsjVT+lmEdsF6WRE9rIDb9n0sOCuRXYHOGEwYnRR+bIbMEhlGNh42otFrm0E6Boq44I+hcS9c2hyDWwjAOQ7Xy/XyGMRFawrJGw61TKD+sx1BdjeQi4aFiiFJLw7CrZqs9fxHIVkz24ov6mDo00z0oojr9j0sO+uhX4sBKDEDhc4MP3oxBXdy18b+R0DilgVk3oesg0Ya8IbKaYqBCD/UtPaejcG7L2TaRSQik3CNBb6oZtUQFfdjAulWngaFh7lrnw+p5xaJe5SDhn1aN/Zp25FjwV/S3a+W32rCxpHlTFSqeCPkqBb6y8L4xL1Mo5AvTOJpAmJYMw1k2ztUK97xg/hcJJ0jjgLxc5AVyEQb+zOZgSCtvIytkVdrhSx8lMVJs5VQ7agZGao1VAbkxSWihya2MZP9TlqIi6pqG+dbIRtvlrw2jqzSvMEhiCWxtZuVcEDb4dnKSwPQzXLo7oz9au3i1UopS5NmqyFWJM7Ajayn/aX6pm7AfdZrczxDwjjFE7zFPpVpIiveyZIhKhoScTX2TgLZPuE6Yqva0MHwkNaF/XrPg1ZetS2ztkjBiF9k3lvU52AR0SEuaKpYv6KRNAQ1jSTZxm4eWqoVuqQPIfWDOJ6g+/bSYgyNoTvV7m2kxK4wRehuKy+jiJ16Iests+owdfY/Eb2UzHtTpTiBqEf02pLctN2KGWTDsxDbZ/FQpGpFJH7Gjuq4Vc6Ty05lyLLXBvjojZmY+9RnFDBQymFXXoOW8Uhkt65NHzCNP3vxQN8LEb6sGK4BNs9MI9RB1iBZpYS8zLNQsTmAeN/GUO9lTiL+/pxRjb0M9xwyFeFjEw2yuE8vj5uW7cMSjQ3qDNiV17G/ZKAnl72wZEFji4+WjK9847N7D3z+0T2/jOEtDqFxoTwO2tytCrLejaotwFnY1A20DjmqvPjOSMY3BDUF7gzk4UhV8phhGEajWDfs1UtFYXIaQ39BxyMlA4UMuHE6w2pfXj/9D3/Uv+O5/XvejvGtZJMGcB9QErj0EUVC7JuoCqLgqrq9xGuRzcLiy88oq2UEauXKz6Ex5yobtx8GoE4EQFwLpeHVVN0nU2fYbxroL+rKhip35rTz+4rG/ohDkM2YgDzXENnx60QoslRGLRNdVZ8d8VlXqfTfz9hlXvK5lMdVhlzYpuBGh8LAj5pJu0BJLDoCPKInSsQGewwNg6abj1OFbl2b3l8y/vqrf7j3r57dv+dGwm9/AnKBO47G+HmSlLF1PUhxQk1C7bZFMq9CpYbKnAnUC0SrQytV4xAan4NhuEKQhqfDj4ORCdvBkK85gs15fw7pFbrJcpuykzEAKCJuwGY+btA0sM1Iz40raGzxkaLxj9/47N4DX9y/5xcp3hIvgRuB21st6TwKf9+0Lbc0GID8zDaVETtPqLzxnJ/EfAzqesNe8Ia+shM+PkSyHvMY5KLKhS2s0SA++2NIfi3gR9yI4XXP3Kwy4sbJaQyfKRp4pGQgyZoTnld7uKA/9qWBPT9M+z5UOQF5GKEMN7afRJiAW4Iyj3EKapZrR424QE1B/TLqdo6aSRpeXKK6weAFFziZB3EcrhDEGfHghqfMo5qAe1xMO97wIcm1cbE5F/O18euTibYsLPwA5cSNY+oMg2YOfYX483E7c9r5/SXjL1880PdCCiHIVkzAPZVWFgLjwhOHhchzB14COo72J00WkHk8WfEuxOYAWzmsnASHIPckBuAah9OIdp5yD+oM5AVDxxA+xya7NpkhOyxcW5TG0zC8DetxtDCG2Bvz85cXHWcwwgFFTsUBbq9VYK3bvn7+sRUb2yutf65b16Z35rXvxVwBGSWjaF2NxUvBg3oXvJvFEJovgDNwH/KgJfADcCdALYNQvypO3Fw8Ux13VjiFxq4frcYv+6wULfkKBF8sg9yLMPBDNJtFVSZRP1f94HeOTsEV2ThywkNw50Oza5vBpgEY1Bsfq/nTSyiP+XndTIgbZ912cGO1guWK0/TnWombzrC6N6+//reDfd9J+5pCwLs5BLUAxY2nYRrr+nqoPJAtmCpsgG52PWU0nh3Vzj1IA9l9P4Lm3ieJWzSMIFj3knZDyfyk8iQiCyOQt/RqxhQajeKRAK/Bt0r5MtozJW6cpQ0bc2sVeDlyzcStL6+f7tLZqwqGH4PCw2VxVy7xB7LdBV22YKZNq8VN9Nqs6s+nLchBEb23STSvnCNxi5bR6ldc1ZPcU0rD6BpBfTWlMteXyUaP3YaGbkPD7bUKFtZt2E7r39lhaBd25bWvxdRZJA24lXcCm50zohI6LmjNTkreCshybVkTNsD9HGuvhe/ZU70oplMYr37xsGIUuSk+/9MubuLrBLDpyUUldPwcv1BdgDIpbpxdeR3lnI65tQoWPdy4gsYW+wv60Qzl1cLAP3xu2fCQpXg2lozaUIHnnpEtiHhgJpCdQhIRntupzZMch1sQRCTHVPUrzDytDeGrGhavHVftiRR+BG8CmznCSPaQZjIsKWO54uD2mpuPe2zFRtnGal9ef+vLg33fTHtsBEEQRLIYOnAv7UFEgakzPFIysLhhY6/NPtgL9oUOyKsRBEEQIWCO42B8YeGdWcd5bgMotP+S6dHD2PRDjI18uVzulLwaQRAEEQLmOG41xjuW1b/gOBO3HOfptAcVlBKw2K9p3/9quaxKZxGCIAgiRR6IG+fnlvXMrOOczEIezgBW+xg7O9rbm1THfoIgCCIDNIgb5y3Lem3Oto/eB3rSHqSM3Yyd72Vs5IVymfJqBEEQRB2e4ga4ocq7jvOGSvm4Hsam+xg7+mK5nGbHfoIgCEJhmoob513LenLWcX6y4DhPpDXQErC4R9NOvlQuZ7FlFkEQBJEgvsSN87ZlHb7hOD+46zh7kxogz6ttY+xVCkESBEEQfggkbpy3LOu1a7b9rbhDlbsZO7+LsZeptJ8gCIIIQihxAzbzcdcc5/moB7WNsZv9jH37cLncyS2zCIIgiJgILW6cdy3ryeuOMxHF1gEDWH1Y016nvBpBEATRDm2LG+dtyzr8iW2fDLt14GHGTlNejSAIgoiCyMSN86+W9eZ1237Jbz6OWmYRBEEQURO5uAFuPm7RcX5803E+5/UzJWDxM5p2lPJqBEEQRNTEIm4cWSsvA1h9SNPe+rtymY6iIQiCIGIhVnHj/NSyXrlh29/tYex8D2Nfp7waQRAEESeJiBtBEARBJImW9gAIgiAIImpI3AiCIIiOg8SNIAiC6Dj+H70JmpUCX4E6AAAAEnRFWHRFWElGOk9yaWVudGF0aW9uADGEWOzvAAAAAElFTkSuQmCC";var Wa=i(8264),Na=i(18),Va=i(4500),Ea=i(9581),Ha=i(3775);class za extends o.Component{constructor(e){var t;super(e),t=this,this.generateFloorplanImageCanvas=e=>{const t=this.props.mainComponentThis.qSVG.create("none","svg",{preserveAspectRatio:"xMidYMin slice"}),i=this.props.mainComponentThis.qSVG.create("none","g");return this.props.mainComponentThis.floorplanFloorsData.forEach((e=>{this.props.mainComponentThis.setWallsChildParentValues(e.wallData),this.props.mainComponentThis.editor.wallsComputing(e.wallData,!1,i,!1)})),t.appendChild(i),this.props.mainComponentThis.downloadSvg(!1,!1,!0,e,!1,{svgElement:t,bboxCoords:this.props.mainComponentThis.getFloorplanWallsBBoxCoords()})},this.addFloorplanImageLayer=e=>{this.currentFloorplanImageCanvasCoordinates=this.calculateFloorplanImageCanvasCoordinatesForBearing(this.state.edit.find((e=>"bearing_angle"===e.field)).value),this._map.addSource("floorplan-image-source",{type:"canvas",canvas:this.floorplanCanvas,coordinates:this.currentFloorplanImageCanvasCoordinates,animate:!1}),this._map.addLayer({id:"floorplan-image-layer",type:"raster",source:"floorplan-image-source"}),e&&this.setState({floorplanImageLayerAdded:!0},(()=>this.focusFloorplanImageCanvas(!1)))},this.setMapLayers=()=>{this._map&&this.state.floorplanImageLoaded&&!this.state.floorplanImageLayerAdded&&(this._map.setMaxZoom(22),this.addFloorplanImageLayer(!0))},this.focusFloorplanImageCanvas=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!t.floorplanImageCanvasCurrentBearingPolygon||e&&!t.isStyleChangeAllowed()||t.setState({mapCenter:(0,Ha.A)(t.floorplanImageCanvasCurrentBearingPolygon).geometry.coordinates},(()=>{Ot(t._map,t.currentFloorplanImageCanvasCoordinates,Number(t.floorplanBearingSliderRef.current.value))}))},this.closeShowFloorplanOnMapModal=(e,t,i)=>{e&&this.props.mainComponentThis.showMapLayer2DInputRef.current.getCheckedStatus()&&n.unmountComponentAtNode(this.props.mainComponentThis.mapLayer2DContainerRef.current),rt(this.props.containerRef.current,200,(()=>{n.unmountComponentAtNode(this.props.containerRef.current),e&&this.props.mainComponentThis.showMapLayer2DInputRef.current.getCheckedStatus()&&n.render((0,a.jsx)(sr,{ref:this.props.mainComponentThis.showMapLayer2D3DRef,api:this.props.api,is3D:!1,center:[16.8557,44.0462],floorplanGpsCoords:[t,i],onMapContextLoadedCallback:this.props.mainComponentThis.onMapContextLoadedCallback2D,preserveDrawingBuffer:!1,mapStylesChangeRef:this.props.mainComponentThis.mapStylesChangeRef,mainComponentThis:this.props.mainComponentThis}),this.props.mainComponentThis.mapLayer2DContainerRef.current)}),!1)},this.onSave=()=>{this.state.needsSave&&j(this.state.edit,((e,t)=>{this.setState({edit:e},(()=>{if(t){let e={planGeneral:{...this.floorplanGeneralLocal,gps_latitude:parseFloat(this.state.edit.find((e=>"gps_lat"===e.field)).value),gps_longitude:parseFloat(this.state.edit.find((e=>"gps_long"===e.field)).value),floorplan_bearing:this.state.edit.find((e=>"bearing_angle"===e.field)).value}};this.props.api.post.call(this,`/klet3d/plans/${this.props.floorplanID}`,e,(()=>{this.mounted&&(this.props.mainComponentThis.floorplanGeneral=e.planGeneral,this.closeShowFloorplanOnMapModal(!0,parseFloat(this.state.edit.find((e=>"gps_long"===e.field)).value),parseFloat(this.state.edit.find((e=>"gps_lat"===e.field)).value)))}))}}))}))},this.onMapZoom=()=>{this._map&&(this._zoom=this._map.getZoom())},this.onMapClick=e=>{if(this._map&&this.state.changeTopLeftGpsCoordinatesEnabled){const t=this.state.edit.map((t=>"gps_lat"===t.field?{...t,value:e.lngLat.lat.toString()}:"gps_long"===t.field?{...t,value:e.lngLat.lng.toString()}:{...t}));this.setState({edit:t,needsSave:I(t,this.state.originalData)},(()=>this.handleFloorplanImageCanvasCoordinateChange(e.lngLat.lng,e.lngLat.lat)))}},this.onGpsCoordinatesInputChange=e=>t=>{let{target:{value:i}}=t;console.log(i);const o=this.state.edit.map((t=>t.field===e.field?{...t,value:i}:{...t})),n=parseFloat(o.find((e=>"gps_long"===e.field)).value),s=parseFloat(o.find((e=>"gps_lat"===e.field)).value),a=!T.isGpsCoordinate(n,"gps_long")&&!T.isGpsCoordinate(s,"gps_lat");console.log(a),console.log(n+" , "+s),this.setState({edit:o,needsSave:I(o,this.state.originalData)},(()=>{a&&this.handleFloorplanImageCanvasCoordinateChange(n,s)}))},this.switchLayer=e=>()=>{if(this._map&&this.isStyleChangeAllowed()&&this.state.selectedMapStyle!==e&&this.mounted){let t=this.state.selectedMapStyle;this.setState({selectedMapStyle:e,mapStyleLoaded:!1},(()=>{this._map.getStyle().layers.forEach((e=>{this._map.removeLayer(e.id)}));const{callback:i,newStyle:o}=((e,t,i)=>{let o=null,n="mapbox/"+e;return"TERRAIN"!==e&&"TERRAIN"===t&&(i.setTerrain(null),i.removeSource("mapbox-dem")),"TERRAIN"===e&&(n="mapbox-map-design/ckhqrf2tz0dt119ny6azh975y",o=()=>{i.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),i.setTerrain({source:"mapbox-dem",exaggeration:1.5}),i.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})}),"BUILDINGS"===e&&(n="mapbox/light-v10",o=()=>{const e=i.getStyle().layers;let t;for(let i=0;i<e.length;i++)if("symbol"===e[i].type&&e[i].layout["text-field"]){t=e[i].id;break}i.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},t)}),{callback:o,newStyle:n}})(e,t,this._map);this._map.setStyle("mapbox://styles/"+o,{diff:!1}),this._map.once("idle",(()=>{this.mounted&&this.setState({mapStyleLoaded:!0},(()=>{i&&i(),this.state.floorplanImageLayerAdded&&this.addFloorplanImageLayer(!1)}))}))}))}},this.isStyleChangeAllowed=()=>{if(this.state.mapStyleLoaded){const e=this._map.getStyle();let t=e&&e.layers;return t?this.state.floorplanImageLayerAdded&&!t.find((e=>"floorplan-image-layer"===e.id))?(console.log("False, nema floorplanImageCanvas layera"),!1):"BUILDINGS"!==this.state.selectedMapStyle||"BUILDINGS"===this.state.selectedMapStyle&&t.find((e=>"3d-buildings"===e.id))?"TERRAIN"!==this.state.selectedMapStyle||"TERRAIN"===this.state.selectedMapStyle&&t.find((e=>"sky"===e.id))&&e.sources["mapbox-dem"]?(console.log("Omogucena promjena stila"),!0):(console.log("False. nema terrain layera"),!1):(console.log("False. nema buildings layera"),!1):(console.log("Nema layera"),!1)}return console.log("Vanjski if. Nije loadan stil"),!1},this.onFloorplanBearingInputChange=e=>{const t=this.state.edit.map((t=>"bearing_angle"===t.field?{...t,value:Number(e)}:{...t}));this.setState({edit:t,needsSave:this.state.floorplanNoInitialBearing||I(t,this.state.originalData)})},this.onFloorplanBearingChangeFinished=()=>{this.currentFloorplanImageCanvasCoordinates=this.calculateFloorplanImageCanvasCoordinatesForBearing(Number(this.floorplanBearingSliderRef.current.value)),this._map.getSource("floorplan-image-source").setCoordinates(this.currentFloorplanImageCanvasCoordinates)},this.calculateFloorplanImageCanvasCoordinatesForBearing=e=>{const t={pivot:[this.state.edit.find((e=>"gps_long"===e.field)).value,this.state.edit.find((e=>"gps_lat"===e.field)).value]};return this.floorplanImageCanvasCurrentBearingPolygon=(0,Wa.A)(this.floorplanImageCanvasZeroBearingPolygon,e,t),this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0].slice(0,-1)},this.onChangeBearingAngleSwitchChange=()=>{this.setState({changeBearingAngleEnabled:!this.state.changeBearingAngleEnabled,changeTopLeftGpsCoordinatesEnabled:!1})},this.onChangeTopLeftGpsCoordsSwitchChange=()=>{this.setState({changeTopLeftGpsCoordinatesEnabled:!this.state.changeTopLeftGpsCoordinatesEnabled,changeBearingAngleEnabled:!1})},this.handleFloorplanImageCanvasCoordinateChange=(e,t)=>{this.state.floorplanBearingAngleMechanismDisabled?this.createFloorplanImageCanvas(e,t,{floorplanBearingAngleMechanismDisabled:!1}):this.translateFloorplanImageCanvas(e,t)},this.createFloorplanImageCanvas=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;t.floorplanImageCanvasZeroBearingPolygon.geometry.coordinates=[[...Pt(i,e,t.floorplanDimensions.width,t.floorplanDimensions.height),[e,i]]],t.generateFloorplanImageCanvas(!t.state.showFloorplanImageBackground).then((e=>{let i=new Image;i.onload=()=>{t.state.showFloorplanImageBackground?t.floorplanWhiteBgImage=i:t.floorplanTransparentBgImage=i,t.floorplanCanvas.width=i.width,t.floorplanCanvas.height=i.height,t.floorplanCanvas.getContext("2d").drawImage(i,0,0),t.setState({...o,floorplanImageLoaded:!0,loading:!1,mapCenter:(0,Ha.A)(t.floorplanImageCanvasZeroBearingPolygon).geometry.coordinates},(()=>!!n&&n()))},i.onerror=e=>{t.setState({error:e,visibleErrorPopup:!0,loading:!1,mapCenter:(0,Ha.A)(t.floorplanImageCanvasZeroBearingPolygon).geometry.coordinates})},i.src=e})).catch((()=>t.setState({errorNote:"Ooops. An error happened during floorplan image creation."})))},this.translateFloorplanImageCanvas=(e,t)=>{const i=F()(this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0][0]),o=F()([e,t]),n=(0,Va.A)(i,o),s=(0,Ea.A)(i,o);this.floorplanImageCanvasZeroBearingPolygon=(0,Na.A)(this.floorplanImageCanvasZeroBearingPolygon,s,n),this.floorplanImageCanvasCurrentBearingPolygon=(0,Na.A)(this.floorplanImageCanvasCurrentBearingPolygon,s,n),this.currentFloorplanImageCanvasCoordinates=this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0].slice(0,-1),this._map.getSource("floorplan-image-source").setCoordinates(this.currentFloorplanImageCanvasCoordinates)},this.changeFloorplanImageCanvasImage=e=>{this._map.removeLayer("floorplan-image-layer"),this._map.removeSource("floorplan-image-source"),this.floorplanCanvas.width=e.width,this.floorplanCanvas.height=e.height,this.floorplanCanvas.getContext("2d").drawImage(e,0,0),this.addFloorplanImageLayer()},this.onChangeFloorplanImageCanvasBackgroundOptionClick=()=>{if(this.isStyleChangeAllowed()){let e=!0,t=!this.state.showFloorplanImageBackground;t?this.floorplanWhiteBgImage&&(e=!1):this.floorplanTransparentBgImage&&(e=!1),e?this.generateFloorplanImageCanvas(!t).then((e=>{let i=new Image;i.onload=()=>{t?this.floorplanWhiteBgImage=i:this.floorplanTransparentBgImage=i,this.changeFloorplanImageCanvasImage(i),this.setState({showFloorplanImageBackground:t})},i.onerror=e=>{this.setState({error:e,visibleErrorPopup:!0})},i.src=e})).catch((()=>this.setState({errorNote:"Ooops. An error happened during floorplan image creation."}))):(this.changeFloorplanImageCanvasImage(t?this.floorplanWhiteBgImage:this.floorplanTransparentBgImage),this.setState({showFloorplanImageBackground:t}))}},this.state={edit:null,originalData:{},needsSave:!1,floorplanImageLoaded:!1,floorplanImageLayerAdded:!1,floorplanNoInitialBearing:!1,loading:!0,error:null,floorplanLoadingError:null,tooltip:null,visibleErrorPopup:!1,mapCenter:[],selectedMapStyle:"light-v11",mapStyleLoaded:!0,changeTopLeftGpsCoordinatesEnabled:!1,errorNote:null,changeBearingAngleEnabled:!1,floorplanGpsCoordinatesMechanismDisabled:!1,floorplanBearingAngleMechanismDisabled:!1,showFloorplanImageBackground:!0},this._map=null,this.zoomRange=4,this._zoom=9,this.mounted=!1,this.floorplanDimensions={width:0,height:0},this.floorplanImageCanvasZeroBearingPolygon={type:"Feature",geometry:{type:"Polygon",coordinates:[]},properties:{}},this.getBaseStations=!1,this.floorplanGeneralLocal=null,this.floorplanImageCanvasCurrentBearingPolygon=null,this.currentFloorplanImageCanvasCoordinates=null,this.floorplanCanvas=document.createElement("canvas"),this.floorplanWhiteBgImage=null,this.floorplanTransparentBgImage=null,this.userUnit=e.mainComponentThis.isAddOnApp?e.mainComponentThis.measureSystemContext.userUnit:e.mainComponentThis.context.userUnit,this.disabledValue=e.mainComponentThis.isAddOnApp,this.floorplanBearingNumberSliderInput=o.createRef(),this.floorplanBearingSliderRef=o.createRef(),this.addFloorplanImageLayer=this.addFloorplanImageLayer.bind(this),this.setMapLayers=this.setMapLayers.bind(this),this.closeShowFloorplanOnMapModal=this.closeShowFloorplanOnMapModal.bind(this),this.onMapZoom=this.onMapZoom.bind(this),this.onMapClick=this.onMapClick.bind(this),this.switchLayer=this.switchLayer.bind(this),this.isStyleChangeAllowed=this.isStyleChangeAllowed.bind(this),this.onSave=this.onSave.bind(this),this.onFloorplanBearingInputChange=this.onFloorplanBearingInputChange.bind(this),this.calculateFloorplanImageCanvasCoordinatesForBearing=this.calculateFloorplanImageCanvasCoordinatesForBearing.bind(this),this.focusFloorplanImageCanvas=this.focusFloorplanImageCanvas.bind(this),this.onGpsCoordinatesInputChange=this.onGpsCoordinatesInputChange.bind(this),this.onChangeBearingAngleSwitchChange=this.onChangeBearingAngleSwitchChange.bind(this),this.onChangeTopLeftGpsCoordsSwitchChange=this.onChangeTopLeftGpsCoordsSwitchChange.bind(this),this.handleFloorplanImageCanvasCoordinateChange=this.handleFloorplanImageCanvasCoordinateChange.bind(this),this.createFloorplanImageCanvas=this.createFloorplanImageCanvas.bind(this),this.translateFloorplanImageCanvas=this.translateFloorplanImageCanvas.bind(this),this.changeFloorplanImageCanvasImage=this.changeFloorplanImageCanvasImage.bind(this),this.onChangeFloorplanImageCanvasBackgroundOptionClick=this.onChangeFloorplanImageCanvasBackgroundOptionClick.bind(this),this.generateFloorplanImageCanvas=this.generateFloorplanImageCanvas.bind(this)}componentWillUnmount(){this.mounted=!1}componentDidMount(){this.mounted=!0,this.props.floorplanID?this.props.api.get.call(this,this.props.mainComponentThis.isAddOnApp?`/klet3d/entity/${this.props.mainComponentThis.getFloorplanID()}/${this.props.mainComponentThis.props.licenseKey}`:`/klet3d/plans?planId=${this.props.mainComponentThis.getFloorplanID()}`,(e=>{if(e&&e.length>0){this.floorplanGeneralLocal=e[0].plan_general;const o=this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general),n=this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general),s=this.props.mainComponentThis.getFloorplanWallsBBoxCoords();this.floorplanDimensions.width=r(s.width/this.props.mainComponentThis.meter,2),this.floorplanDimensions.height=r(s.height/this.props.mainComponentThis.meter,2);const a=e[0].plan_general.floorplan_bearing||M.find((e=>"bearing_angle"===e.field)).defaultValue,l=(t={gps_lat:n&&n.toString(),gps_long:o&&o.toString(),bearing_angle:a},i=M,Object.entries(t).map((e=>{let[t,o]=e;return{...i.find((e=>e.field===t)),value:void 0!==o&&null!==o?o:""}})));m(n)&&m(o)?ai.call(this,this.props.api,"mapCenter",this.props.setResponseError,(()=>{this.setState({edit:l,originalData:l,loading:!1,floorplanNoInitialBearing:!0,needsSave:!0,floorplanBearingAngleMechanismDisabled:!0},(()=>{this.floorplanBearingSliderRef.current.value=a,this.floorplanBearingNumberSliderInput.current.setNumberInputInitialValues(a)}))})):this.createFloorplanImageCanvas(o,n,{edit:l,originalData:l,floorplanNoInitialBearing:!e[0].plan_general.floorplan_bearing&&0!==e[0].plan_general.floorplan_bearing,needsSave:!e[0].plan_general.floorplan_bearing&&0!==e[0].plan_general.floorplan_bearing},(()=>{this.floorplanBearingSliderRef.current.value=a,this.floorplanBearingNumberSliderInput.current.setNumberInputInitialValues(a)}))}var t,i})):this.setState({loading:!1,floorplanLoadingError:"Floorplan couldn't be found. Please save it first then try again."})}render(){return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(Gn,{onCloseModalClick:()=>this.closeShowFloorplanOnMapModal(!1),children:(0,a.jsx)("div",{className:"layout__section",style:{height:"auto",maxHeight:"85vh"},children:(()=>this.state.loading?(0,a.jsx)(Zn,{center:!0}):this.state.floorplanLoadingError?(0,a.jsx)("p",{className:"show-floorplan-on-map-error",children:this.state.floorplanLoadingError}):(this.setMapLayers(),(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("section",{className:"show-floorplan-on-map-form-controls-container",children:this.state.edit&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsxs)("div",{className:"form-controls-container",children:[(0,a.jsx)("div",{className:"form-container",children:this.state.edit.slice(0,2).map((e=>(0,a.jsx)(Qo,{label:e.label,placeholder:e.placeholder,disabled:this.disabledValue||!this.state.changeTopLeftGpsCoordinatesEnabled,item:e,value:e.value||"",type:e.type,onChange:this.onGpsCoordinatesInputChange,error:e.error},e.label)))}),(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsx)("div",{title:"Change floorplan coordinates",children:(0,a.jsx)(Sn.A,{disabled:this.disabledValue||this.state.floorplanGpsCoordinatesMechanismDisabled,checked:this.state.changeTopLeftGpsCoordinatesEnabled,onChange:this.onChangeTopLeftGpsCoordsSwitchChange})})})]}),(0,a.jsxs)("div",{className:"form-controls-container",children:[(0,a.jsx)("div",{className:"form-container",children:(0,a.jsx)(kn,{ref:this.floorplanBearingNumberSliderInput,sliderInputRef:this.floorplanBearingSliderRef,valueLabelText:M.find((e=>"bearing_angle"===e.field)).label,disabled:this.disabledValue||!this.state.changeBearingAngleEnabled,sliderStep:1,minValue:0,maxValue:359,defaultValue:M.find((e=>"bearing_angle"===e.field)).defaultValue,onSliderValueChanged:this.onFloorplanBearingInputChange,onSliderChangeFinished:this.onFloorplanBearingChangeFinished})}),(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsx)("div",{title:"Change floorplan bearing",children:(0,a.jsx)(Sn.A,{disabled:this.disabledValue||this.state.floorplanBearingAngleMechanismDisabled,checked:this.state.changeBearingAngleEnabled,onChange:this.onChangeBearingAngleSwitchChange})})})]})]})}),(this.state.changeTopLeftGpsCoordinatesEnabled||this.state.changeBearingAngleEnabled||this.state.errorNote)&&(0,a.jsx)("p",{className:"above-map-note "+(this.state.errorNote?"error":""),children:this.state.errorNote?this.state.errorNote:this.state.changeTopLeftGpsCoordinatesEnabled?"Select coordinates of the top left corner of your floorplan":"Rotate floorplan around the top left corner"}),(0,a.jsxs)("section",{className:"layout__section map",children:[(0,a.jsx)("div",{className:"layer-change show-floorplan-on-map map-feature-icon svg-center-inside-container"}),(0,a.jsx)("div",{className:"layer-dropdown",style:{top:105},children:(0,a.jsx)(Dn,{mapStyles:Je,switchLayer:this.switchLayer,selectedMapStyle:this.state.selectedMapStyle})}),this.state.floorplanImageLayerAdded&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{className:"last-point-center show-floorplan-on-map map-feature-icon svg-center-inside-container",onClick:this.focusFloorplanImageCanvas,children:(0,a.jsx)(Rs,{})}),(0,a.jsx)("div",{className:"feature-info",children:(0,a.jsx)("div",{children:"Focus floorplan image"})}),(0,a.jsx)("div",{className:"floorplan-image-background-option map-feature-icon svg-center-inside-container",onClick:this.onChangeFloorplanImageCanvasBackgroundOptionClick,children:this.state.showFloorplanImageBackground?(0,a.jsx)("svg",{viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",children:(0,a.jsx)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,a.jsx)("path",{d:"M2448 4784 c-97 -23 -157 -60 -248 -153 -116 -119 -245 -286 -415\r -541 -564 -845 -870 -1711 -817 -2305 45 -495 297 -921 710 -1198 164 -110\r 377 -198 585 -239 160 -32 434 -32 593 0 579 116 1039 517 1223 1070 58 175\r 76 294 75 512 0 154 -5 222 -22 324 -93 545 -363 1176 -767 1796 -158 243\r -378 526 -488 627 -113 104 -276 145 -429 107z m178 -320 c65 -31 283 -302\r 471 -584 296 -443 562 -1006 663 -1400 6 -25 13 -53 16 -62 5 -17 -58 -18\r -1215 -18 -672 0 -1221 1 -1221 3 0 2 15 57 34 123 119 418 342 886 633 1329\r 192 291 418 575 484 608 43 21 92 21 135 1z"})})}):(0,a.jsx)("svg",{viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",children:(0,a.jsx)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,a.jsx)("path",{d:"M2448 4784 c-97 -23 -157 -60 -248 -153 -116 -119 -245 -286 -415\r\n-541 -564 -845 -870 -1711 -817 -2305 65 -721 582 -1295 1295 -1437 160 -32\r\n434 -32 593 0 579 116 1039 517 1223 1070 58 175 76 294 75 512 0 154 -5 222\r\n-22 324 -93 545 -363 1176 -767 1796 -158 243 -378 526 -488 627 -113 104\r\n-276 145 -429 107z m178 -320 c65 -31 283 -302 471 -584 296 -443 562 -1006\r\n663 -1400 6 -25 13 -53 16 -62 5 -17 -58 -18 -1215 -18 -672 0 -1221 1 -1221\r\n3 0 2 15 57 34 123 119 418 342 886 633 1329 192 291 418 575 484 608 43 21\r\n92 21 135 1z m1210 -2431 c11 -71 -4 -287 -25 -383 -99 -438 -410 -789 -831\r\n-938 -152 -53 -237 -67 -425 -66 -137 0 -187 5 -261 22 -260 61 -452 168 -635\r\n351 -188 188 -297 386 -350 636 -22 107 -35 288 -25 368 l7 57 1269 0 1269 0\r\n7 -47z"})})})}),(0,a.jsx)("div",{className:"feature-info",style:{width:this.state.showFloorplanImageBackground?150:180},children:(0,a.jsx)("div",{children:this.state.showFloorplanImageBackground?"White background":"Transparent background"})})]}),(0,a.jsx)("div",{className:"glamos-bottom-left-logo",children:(0,a.jsx)("img",{alt:"Glamos logo",src:"dark-v10"===this.state.selectedMapStyle||"satellite-v9"===this.state.selectedMapStyle||"TERRAIN"===this.state.selectedMapStyle?Ba:Ke})}),(0,a.jsxs)(Bn,{center:this.state.mapCenter,zoom:[this._zoom],minZoom:3,onZoom:this.onMapZoom,onClick:this.onMapClick,onMapLoadCallback:e=>{this._map=e,this.setMapLayers()},children:[(0,a.jsx)(xn,{}),(0,a.jsx)(yn,{unitSystem:this.userUnit})]})]}),(0,a.jsx)("div",{className:"button-centered-container",style:{marginTop:"1rem"},children:(0,a.jsx)(go,{disabled:this.disabledValue||!this.state.needsSave,type:this.state.needsSave?"primary":"dull",onClick:this.onSave,children:"Save changes"})})]})))()})}),(0,a.jsx)(Rn,{visible:this.state.visibleErrorPopup,loading:!1,error:this.state.error,singleButton:!0,statePropertyName:"visibleErrorPopup",setChoice:this.setState.bind(this)})]})}}const Ga=za;function qa(e,t,i){const o=i.xMouse-t.xMouse,n=i.yMouse-t.yMouse,s=Tt(o,n),a=Math.sqrt(Math.pow(o/this.meter,2)+Math.pow(n/this.meter,2));let r=e;return 0===o&&0===n||(r=(0,O.A)(F()(e),a/1e3,s).geometry.coordinates),r}function Ua(e){if("setCenter"===e.name){this._map.off("moveend",this.alignFloorplanTopLeftCornerOnMap);const e=this.calcul_snap_inverse(this.floorplanLastSavedTopLeftSvgCoords?this.floorplanLastSavedTopLeftSvgCoords.x:this.boxWallCoordinates.minX,this.floorplanLastSavedTopLeftSvgCoords?this.floorplanLastSavedTopLeftSvgCoords.y:this.boxWallCoordinates.minY),t=this._map.unproject([e.screenX-this.offset.left,e.screenY-(this.offset.top+this.offset.scrollY)]),i=F()([t.lng,t.lat]),o=F()([this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]),n=(0,Va.A)(i,o),s=(0,Ea.A)(i,o),a=this._map.getCenter(),r=(0,O.A)(F()([a.lng,a.lat]),s,n).geometry.coordinates;this._map.setCenter(r);const l=(0,Na.A)({type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]},properties:{}},s,n);this.mapCornersGpsCoords=l.geometry.coordinates[0].slice(0,-1),this.mapCornerCoordsDebug&&this._map.getSource("mapCornersAfterSource").setData({type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}})}}function Ya(e){const t=Pt(e[1],e[0],this.width_viewbox/this.meter,this.height_viewbox/this.meter,this.floorplanGeneral.floorplan_bearing||0);return{topRightCorner:t[1],bottomRightCorner:t[2],bottomLeftCorner:t[3]}}function Xa(e){const t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersBeforeSource").setData(e)}const i=this.calculateGpsCoordinatesForNewSvgPoint(this.mapCornersGpsCoords[0],e,t),{topRightCorner:o,bottomRightCorner:n,bottomLeftCorner:s}=this.calculateMapCornersCoordinatesFromTopLeftPoint(i);this.mapCornersGpsCoords=[i,o,n,s];const a={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,i]]},properties:{}},r=(0,Ha.A)(a).geometry.coordinates;this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(r,{name:"setCenter"})}function Ka(e){const t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersBeforeSource").setData(e)}const i=this.calculateGpsCoordinatesForNewSvgPoint(this.mapCornersGpsCoords[0],e,t),{topRightCorner:o,bottomRightCorner:n,bottomLeftCorner:s}=this.calculateMapCornersCoordinatesFromTopLeftPoint(i),a={type:"Feature",geometry:{type:"Polygon",coordinates:[[i,o,n,s,i]]},properties:{}};if(this.mapCornersGpsCoords=a.geometry.coordinates[0].slice(0,-1),this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersAfterSource").setData(e)}console.log("Zoom before "+this._map.getZoom());const r=(0,Ha.A)(a).geometry.coordinates,l=It(r[1],this.zoomFactor/this.meter);console.log("New zoom "+l),this._map.setZoom(l),this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(r,{name:"setCenter"})}function Za(e,t){console.log(t),this._map=e,this._map.setMinZoom(0),this._map.setMaxZoom(22),this._map.on("resize",this.handleMapLayerWindowResize);const i=this.getFloorplanWallsBBoxCoords(),o={type:"Feature",geometry:{type:"Polygon",coordinates:[[...Pt(this.getFloorplanGpsLatitude(this.floorplanGeneral),this.getFloorplanGpsLongitude(this.floorplanGeneral),i.width/this.meter,i.height/this.meter),[this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]]]},properties:{}},n={pivot:[this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]},s=(0,Wa.A)(o,this.floorplanGeneral.floorplan_bearing||0,n),a=(0,Ha.A)(s).geometry.coordinates;this.coordinateFloorplanSvgZoomWithMap(a[1]);const r=It(a[1],this.zoomFactor/this.meter),l=e=>{"setZoom"===e.name?(this._map.setCenter([this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)],{name:"setCenter1"}),this._map.setBearing(this.floorplanGeneral.floorplan_bearing||0,{name:"setBearing"}),this._map.setCenter(a,{name:"setCenter2"})):this.onMapCameraOptionsSetFinishCallback(e,l)};this._map.on("moveend",l),this._map.setZoom(r,{name:"setZoom"})}function $a(e,t){console.log("Moveend event"),console.log(e.name),"setCenter2"===e.name&&(console.log("Map set bearing and center finished"),this._map.off("moveend",t),this.getCurrentMapCornersGpsCoords(),console.log(this.mapCornersGpsCoords),this.mapCornerCoordsDebug&&(this._map.addSource("mapCornersBeforeSource",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[]}}}),this._map.addLayer({id:"mapCornersBeforeLayer",type:"line",source:"mapCornersBeforeSource",layout:{},paint:{"line-color":"#000","line-width":3}}),this._map.addSource("mapCornersAfterSource",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[]}}}),this._map.addLayer({id:"outlineafter",type:"line",source:"mapCornersAfterSource",layout:{},paint:{"line-color":"#ff0000","line-width":3}})),this.alignFloorplanTopLeftCornerOnMap({name:"setCenter"}))}function Ja(){let e=this._map.unproject([0,0]);e=[e.lng,e.lat];const{topRightCorner:t,bottomRightCorner:i,bottomLeftCorner:o}=this.calculateMapCornersCoordinatesFromTopLeftPoint(e);this.mapCornersGpsCoords=[e,t,i,o]}function Qa(){this.getCurrentMapCornersGpsCoords();const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]},properties:{}},t=(0,Ha.A)(e),i=It(t.geometry.coordinates[1],this.zoomFactor/this.meter);this._map.setZoom(i),this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(t.geometry.coordinates,{name:"setCenter"})}function er(e){let t=It(e,this.zoomFactor/this.meter);if(t>22||t<0){let i,o=0,n=this.zoomFactor*this.taille_w;if(t>22){for(i="zoomout";t>22;)o++,n+=this.zoomXMove,t=It(e,n/this.taille_w/this.meter);console.log("Zoom out levels needed "+o)}else if(t<0){for(i="zoomin";t<0;)o++,n-=this.zoomXMove,t=It(e,n/this.taille_w/this.meter);console.log("Zoom in levels needed "+o)}this.zoomToSpecificLevel(i,o),this.setSvgViewBoxes()}}function tr(e){return()=>{if(this.state.mapStyleLoaded){const t=this._map&&this._map.getStyle();this._map&&t&&t.layers&&(!this.props.isStyleChangeAllowed||this.props.isStyleChangeAllowed())&&this.state.selectedMapStyle!==e&&this.mounted&&this.setState({selectedMapStyle:e,mapStyleLoaded:!1},(()=>{t.layers.forEach((e=>this._map.removeLayer(e.id))),this._map.setStyle("mapbox://styles/mapbox/"+e,{diff:!1}),this._map.once("idle",(()=>{this.props.onSwitchLayerFinishedCallback&&this.props.onSwitchLayerFinishedCallback(this._map),this.mounted&&this.setState({mapStyleLoaded:!0})}))}))}}}class ir extends o.Component{constructor(e){super(e),this.setMapContext=e=>this._map=e,this.getMapStyleLoadedStatus=()=>this.state.mapStyleLoaded,this.state={selectedMapStyle:"light-v11",mapStyleLoaded:!0},this.mounted=!1,this._map=null,this.switchLayer=tr.bind(this),this.setMapContext=this.setMapContext.bind(this),this.getMapStyleLoadedStatus=this.getMapStyleLoadedStatus.bind(this)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{className:"layer-change map-feature-icon svg-center-inside-container"}),(0,a.jsx)("div",{className:"layer-dropdown",children:(0,a.jsx)(Dn,{mapStyles:K,switchLayer:this.switchLayer,selectedMapStyle:this.state.selectedMapStyle})})]})}}const or=ir;class nr extends o.Component{constructor(e){super(),this.onSwitchLayerFinishedCallback=()=>{this.props.is3D&&this.props.onMapContextLoadedCallback(this._map,this.props.api,!1)},this.onMapZoom=()=>{this._map&&(this._zoom=this._map.getZoom())},this.isStyleChangeAllowed=()=>{if(this.showMapLayerStyleChange3DRef.current?this.showMapLayerStyleChange3DRef.current.getMapStyleLoadedStatus():this.showMapLayerStyleChange2DRef.current.getMapStyleLoadedStatus()){const e=this._map.getStyle();return e&&e.layers?this.props.is3D&&!this._map.getLayer("floorplan-3d-model")?(console.log("False. Nema floorplan3D layera"),!1):(console.log("Omogucena promjena stila"),!0):(console.log("Nema layera"),!1)}return console.log("Vanjski if. Nije loadan stil"),!1},this.state={error:null,tooltip:null},this.showMapLayerStyleChange2DRef=o.createRef(),this.showMapLayerStyleChange3DRef=o.createRef(),this._map=null,this.zoomRange=4,this._zoom=9,this.userUnit=e.mainComponentThis.isAddOnApp?e.mainComponentThis.measureSystemContext.userUnit:e.mainComponentThis.context.userUnit,this.mounted=!1,this.onMapZoom=this.onMapZoom.bind(this),this.onSwitchLayerFinishedCallback=this.onSwitchLayerFinishedCallback.bind(this),this.isStyleChangeAllowed=this.isStyleChangeAllowed.bind(this)}componentDidMount(){this.mounted=!0,!this.props.is3D&&n.render((0,a.jsx)(or,{ref:this.showMapLayerStyleChange2DRef,is3D:this.props.is3D,onMapContextLoadedCallback:this.props.onMapContextLoadedCallback,onSwitchLayerFinishedCallback:this.onSwitchLayerFinishedCallback,isStyleChangeAllowed:this.isStyleChangeAllowed}),this.props.mapStylesChangeRef.current)}componentWillUnmount(){this.mounted=!1,!this.props.is3D&&n.unmountComponentAtNode(this.props.mapStylesChangeRef.current)}render(){return(0,a.jsxs)(o.Fragment,{children:[this.props.is3D&&(0,a.jsx)(or,{ref:this.showMapLayerStyleChange3DRef,is3D:this.props.is3D,onMapContextLoadedCallback:this.props.onMapContextLoadedCallback,onSwitchLayerFinishedCallback:this.onSwitchLayerFinishedCallback,isStyleChangeAllowed:this.isStyleChangeAllowed}),(0,a.jsxs)(Bn,{center:this.props.center,zoom:[this._zoom],onZoom:this.onMapZoom,preserveDrawingBuffer:this.props.preserveDrawingBuffer,onMapLoadCallback:e=>{this._map=e,this.showMapLayerStyleChange3DRef.current?this.showMapLayerStyleChange3DRef.current.setMapContext(e):this.showMapLayerStyleChange2DRef.current.setMapContext(e),this.props.onMapContextLoadedCallback(e,this.props.api)},children:[this.props.is3D&&(0,a.jsx)(xn,{style:{marginRight:20}}),(0,a.jsx)(yn,{unitSystem:this.userUnit})]})]})}}const sr=nr;class ar extends o.Component{constructor(){var e;super(),e=this,this.setCheckedStatus=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.setState({checked:t},(()=>!!i&&i()))},this.getCheckedStatus=()=>this.state.checked,this.setDisabledStatus=e=>this.setState({disabled:e}),this.state={checked:!1,disabled:!1},this.setCheckedStatus=this.setCheckedStatus.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this),this.setDisabledStatus=this.setDisabledStatus.bind(this)}render(){const{checked:e,disabled:t}=this.state;return(0,a.jsxs)("div",{className:`show-map-switch-container left-panel-switch-option-container ${this.props.containerClasses||""}`,children:[(0,a.jsx)("label",{children:"SHOW MAP"}),(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsx)(Sn.A,{disabled:t,checked:e,title:"Show on map",onChange:()=>!t&&this.props.onChangeCallback()})})]})}}const rr=ar;var lr=i(3764);class hr extends o.Component{constructor(){super(),this.onSurfaceAreaOptionChange=e=>t=>{let i=t&&t.target?"file"===e.type?t.target.files[0]:"checkbox"===e.type?t.target.checked:t.target.value:t;"default_layout_option_prefix"===e.field&&(i=i?e.targetLayoutItem.fieldPrefix:null),this.setState({edit:this.state.edit.map((t=>t.field===e.field?{...t,value:i}:{...t,form:t.form.map((t=>({...t,value:t.field===e.field?i:t.value})))}))},(()=>{if("file"===e.type){const t=this.state.edit.find((t=>t.form.find((t=>t.field===e.field)))).form.find((t=>t.field===e.field));j(i?[t]:[],(e=>{this.setState({edit:this.state.edit.map((t=>e.find((e=>e.field===t.field))||t))},(()=>{e.find((e=>e.field===t.field))&&this.displayPreviewImage(t)}))}))}else{"image"===i&&this.displayPreviewImage(this.state.edit.find((t=>t.field===e.field)).form.find((e=>this.isImageFormItem(e))));const t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);t.additionalParams[e.field]=i,t.update(this.props.mainComponentThis),this.props.mainComponentThis.save(!1,!0),this.updateSurfaceAreaDefaultLayout()}}))},this.updateSurfaceAreaDefaultLayout=()=>{const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.selectedSurfaceAreaDefaultLayoutChange(e.additionalParams.default_layout_option_prefix)},this.isImageFormItem=e=>e.field.includes("image"),this.displayPreviewImage=e=>{if(!e.value)return;const t=e.imagePreviewRef.current;if(e.value instanceof File){const i=new FileReader;i.onload=e=>{t.style.display="inline",t.src=e.target.result},i.onerror=e=>console.log("Error while reading image file",e),i.readAsDataURL(e.value)}else t.style.display="inline",this.props.mainComponentThis.isAddOnApp&&(t.crossOrigin="anonymous"),t.src=`https://app.klet3d.com/api/glamos/klet3d/objects-download2/${e.value.objId}/${e.value.name}.${e.value.format}`},this.onUploadImageClick=e=>()=>{this.setState({uploadImageLoading:!0});const t=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId),i="thumbnail",o=o=>{const n=URL.createObjectURL(e.value),s=new Image;s.onload=()=>{const a=(0,lr.A)(),r=e.value.name.split(".").pop().toLowerCase(),l={filename:`${a}.${r}`,blob:e.value},h=new FormData;h.append("file2",l.blob,l.filename),this.props.api.post.call(this,`/klet3d/objects-upload/${o.object_id}/${i}/${l.filename}`,h,(()=>{t.additionalParams[e.field]={objId:o.object_id,name:a,format:r,imageWidth:s.naturalWidth,imageHeight:s.naturalHeight},URL.revokeObjectURL(n),"on_floor"===t.additionalParams.choiceOptionValue&&this.props.mainComponentThis.surfaceAreaAsyncPatternRef.current.addImagePathData([this.props.mainComponentThis.createSurfaceAreaPatternImagePathData(t.additionalParams[e.field])]),t.update(this.props.mainComponentThis),this.props.mainComponentThis.save(!1,!0),this.updateSurfaceAreaDefaultLayout(),this.props.mainComponentThis.saveItemRightBoxParameters(!1),this.setState({uploadImageLoading:!1,edit:this.state.edit.map((i=>({...i,form:i.form.map((o=>({...o,value:o.field===e.field?t.additionalParams[e.field]:i.value})))})))})}))},s.src=n,s.onerror=()=>{URL.revokeObjectURL(n),console.error("Error loading uploaded image")}};let n=this.props.mainComponentThis.userAddedObjects.find((e=>e.object_external_id===this.props.targetObj2DId));if(n)t.additionalParams[e.field]&&t.additionalParams[e.field].objId&&t.additionalParams[e.field].name&&t.additionalParams[e.field].format?this.props.api.get.call(this,`/klet3d/objects-delete/${n.object_id}/${i}/${t.additionalParams[e.field].name}.${t.additionalParams[e.field].format}`,(()=>o(n))):o(n);else{const e={myid:this.props.targetObj2DId,name:this.props.targetObj2DId,metadata:{}};this.props.api.post.call(this,"/klet3d/objects",e,(e=>{this.props.api.get.call(this,"/klet3d/objects?v=2",(t=>{this.props.mainComponentThis.userAddedObjects=t,o(this.props.mainComponentThis.userAddedObjects.find((t=>t.object_id===e.data[0].object_id)))}))}))}},this.state={edit:[],uploadImageLoading:!1},this.onSurfaceAreaOptionChange=this.onSurfaceAreaOptionChange.bind(this),this.updateSurfaceAreaDefaultLayout=this.updateSurfaceAreaDefaultLayout.bind(this),this.isImageFormItem=this.isImageFormItem.bind(this),this.displayPreviewImage=this.displayPreviewImage.bind(this),this.onUploadImageClick=this.onUploadImageClick.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);this.setState({edit:Ye.map((t=>({...t,value:e.additionalParams[t.field],form:t.form.map((t=>({...t,value:e.additionalParams[t.field],...this.isImageFormItem(t)?{imagePreviewRef:o.createRef()}:{}})))})))},(()=>{this.state.edit.forEach((e=>"image"===e.value&&this.displayPreviewImage(e.form.find((e=>this.isImageFormItem(e))))))}))}render(){const{edit:e,uploadImageLoading:t}=this.state,i=e.find((e=>"default_layout_option_prefix"===e.field)),n=e.filter((e=>e!==i)),s=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);return(0,a.jsxs)("div",{children:[(0,a.jsx)(na,{targetObj2DId:this.props.targetObj2DId,restoreSelectedBinderCall:this.props.restoreSelectedBinderCall,mainComponentThis:this.props.mainComponentThis}),"on_wall"!==s.additionalParams.choiceOptionValue&&(0,a.jsx)(ca,{ref:this.props.mainComponentThis.activeItemRotationsRef,targetObj2DId:this.props.targetObj2DId,itemRotationValueRef:this.props.mainComponentThis.itemRotationValue,restoreSelectedBinderCall:this.props.restoreSelectedBinderCall,mainComponentThis:this.props.mainComponentThis}),n.map((e=>{const n=e.form.find((t=>t.field.includes(e.value)));return(0,a.jsxs)(xo,{children:[(0,a.jsx)(zo,{labelText:e.label,infoText:e.infoText,explanationInfoBoxLeft:-75}),(0,a.jsx)(qo,{disabled:this.props.mainComponentThis.isAddOnApp,containerStyle:{marginBottom:"0.5rem"},infoLabel:!0,infoLabelTitle:i.label,infoText:i.infoText,explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:i.value===e.fieldPrefix,onChange:this.onSurfaceAreaOptionChange({...i,targetLayoutItem:e})}),(0,a.jsx)(an,{disabled:this.props.mainComponentThis.isAddOnApp,rightLabel:!0,item:e,radioGroupContainerStyle:{justifyContent:"space-evenly"},onChange:this.onSurfaceAreaOptionChange}),n&&(0,a.jsx)(o.Fragment,{children:"image"===e.value?(0,a.jsxs)("div",{children:[(0,a.jsx)(Qo,{disabled:this.props.mainComponentThis.isAddOnApp,placeholder:n.placeholder,item:n,type:n.type,accept:n.accept,inputMultiple:n.multiple,error:n.error,onChange:this.onSurfaceAreaOptionChange}),(0,a.jsx)("img",{ref:n.imagePreviewRef,alt:"Image preview",style:{display:"none",width:"100%",maxHeight:150,objectFit:"contain"}}),n&&n.value instanceof File&&(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsx)(wo,{buttonType:"primary",buttonText:"Upload",onClick:this.onUploadImageClick(n),loading:t,spinnerLoading:!0,spinnerColor:"#ffffff"})})]}):(0,a.jsx)(nn,{disabled:this.props.mainComponentThis.isAddOnApp,isColorInput:!0,label:n.label,labelClasses:"label-form-control-cancel",item:n,onChange:this.onSurfaceAreaOptionChange,colorPickerBoxContainer:this.props.mainComponentThis.getActiveRightBox(!0)})})]},e.field)}))]})}}const cr=hr;class dr extends o.Component{constructor(e){super(e),this.smallGridSize="metric"===e.userUnit?e.svgMeterUnits:g(e.imperialSystemSquareFeetSize,"feet","meter")*e.svgMeterUnits,this.bigGridSizeSmallGridCount=6,this.bigGridSize=this.bigGridSizeSmallGridCount*this.smallGridSize}render(){return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("pattern",{id:"smallGrid",width:this.smallGridSize,height:this.smallGridSize,patternUnits:"userSpaceOnUse",children:(0,a.jsx)("path",{d:"M 30 0 L 0 0 0 30",fill:"none",stroke:"#777",strokeWidth:"0.25"})}),(0,a.jsxs)("pattern",{id:"grid",width:this.bigGridSize,height:this.bigGridSize,patternUnits:"userSpaceOnUse",children:[(0,a.jsx)("rect",{width:this.bigGridSize,height:this.bigGridSize,fill:"url(#smallGrid)"}),(0,a.jsx)("path",{d:"M 200 10 L 200 0 L 190 0 M 0 10 L 0 0 L 10 0 M 0 190 L 0 200 L 10 200 M 190 200 L 200 200 L 200 190",fill:"none",stroke:"#999",strokeWidth:"0.8"})]})]})}}const pr=dr;class mr extends o.Component{render(){return(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"gradientRed",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#e65d5e",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#e33b3c",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientYellow",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#FDEB71",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#F8D800",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientGreen",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#c0f7d9",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#6ce8a3",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientSky",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#c4e0f4",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#87c8f7",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientOrange",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#f9ad67",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#f97f00",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientWhite",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#f0f0f0",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientGrey",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#666",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#aaa",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientBlue",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#4f72a6",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#365987",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientPurple",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#E2B0FF",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#9F44D3",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientPink",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#f6c4dd",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#f699c7",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientBlack",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#3c3b3b",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#000000",stopOpacity:1})]}),(0,a.jsxs)("linearGradient",{id:"gradientNeutral",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#dbc6a0",stopOpacity:1}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#c69d56",stopOpacity:1})]}),(0,a.jsxs)("radialGradient",{id:"uploadFloorplanCursorCircleGradient",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#CD0404"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#FF5D5D"})]}),(0,a.jsxs)("linearGradient",{id:"cameraCoverageGradient",gradientUnits:"userSpaceOnUse",x1:"0",y1:"0",x2:"0",children:[(0,a.jsx)("stop",{offset:"0%",style:{stopColor:"rgba(0, 128, 255, 1)",stopOpacity:1}}),(0,a.jsx)("stop",{offset:"50%",style:{stopColor:"rgba(0, 128, 255, 0.7)",stopOpacity:.7}}),(0,a.jsx)("stop",{offset:"100%",style:{stopColor:"rgba(0, 128, 255, 0.3)",stopOpacity:.3}})]}),(0,a.jsx)(pr,{userUnit:this.props.userUnit,svgMeterUnits:this.props.svgMeterUnits,imperialSystemSquareFeetSize:this.props.imperialSystemSquareFeetSize}),(0,a.jsx)("pattern",{id:"floorplan_image_pattern",ref:this.props.floorplanImagePattern,width:0,height:0,patternUnits:"userSpaceOnUse",children:(0,a.jsx)("image",{ref:this.props.floorplanImage,href:"#",x:0,y:0,width:0,height:0,alt:"Floorplan image",preserveAspectRatio:"none"})}),(0,a.jsx)("defs",{children:(0,a.jsx)(Ns,{ref:this.props.wallMaterialsAsyncPatternRef,imagePaths:Y.slice(2).map((e=>({name:e.title,width:e.width/this.props.floorplan3DScaleFactor,height:e.height/this.props.floorplan3DScaleFactor}))),usedImagePaths:[],fixedImageFormat:"png",publicFolderName:"wallMaterials",mainComponentThis:this.props.mainComponentThis})}),(0,a.jsxs)("defs",{children:[(0,a.jsx)(Ns,{ref:this.props.furnitureAsyncPatternRef,imagePaths:[],usedImagePaths:[],fixedImageFormat:"png",publicFolderName:"thumbnails",furniturePattern:!0,mainComponentThis:this.props.mainComponentThis}),(0,a.jsx)(Ns,{ref:this.props.surfaceAreaAsyncPatternRef,imagePaths:[],usedImagePaths:[],surfaceAreaPattern:!0,mainComponentThis:this.props.mainComponentThis})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:"window-rotation-direction-arrow-triangle",viewBox:"0 0 10 10",refX:"5",refY:"5",markerUnits:"strokeWidth",markerWidth:"4",markerHeight:"4",orient:"auto",children:(0,a.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#f00"})})}),(0,a.jsx)("defs",{id:"room-textures-container",ref:this.props.roomTextureContainerRef}),(0,a.jsx)("defs",{ref:this.props.roomTexturePreviewContainerRef})]})}}const ur=mr;class gr extends o.Component{constructor(e){super(),this.patternId=e.patternId,this.roomId=e.roomId,this.textureName=e.textureName,this.positionX=e.positionX,this.positionY=e.positionY,this.width=e.width,this.height=e.height,this.textureAspectRatio=Ge[this.textureName].width/Ge[this.textureName].height,this.floorTextureRepeatCount=e.floorTextureRepeatCount,this.floorTextureRepeatDirection=e.floorTextureRepeatDirection,this.imageSrcBasePath=e.mainComponentThis.isAddOnApp?"https://app.klet3d.com":""}render(){const e="horizontal"===this.floorTextureRepeatDirection?this.height:"vertical"===this.floorTextureRepeatDirection?this.width:this.width>this.height?this.height:this.width;let t,i;return e===this.height?(i=e/this.floorTextureRepeatCount,t=i*this.textureAspectRatio):(t=e/this.floorTextureRepeatCount,i=t/this.textureAspectRatio),(0,a.jsx)("pattern",{id:this.patternId,patternUnits:"userSpaceOnUse",width:t,height:i,x:this.positionX,y:this.positionY,children:(0,a.jsx)("image",{href:`${this.imageSrcBasePath}/textures/${this.textureName}.png`,x:"0",y:"0",width:t,height:i,preserveAspectRatio:"none"})})}}const fr=gr;class br extends o.Component{constructor(e){super(),this.disabledValue=e.mainComponentThis.isAddOnApp,this.fontSizeNumberSliderInput=o.createRef(),this.modifyFontSizeSlider=o.createRef(),this.textColorsSelectionRef=o.createRef(),this.modifyTextContent=o.createRef()}componentDidMount(){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.targetObj2DId);this.props.textItemFontSizeValueRef.current.textContent=e.value.size,this.modifyFontSizeSlider.current.value=e.value.size,this.fontSizeNumberSliderInput.current.setNumberInputInitialValues(e.value.size),this.modifyTextContent.current.value=e.value.text,this.textColorsSelectionRef.current.setSelectedItem(e.value.textColor),this.props.restoreSelectedBinderCall&&this.props.mainComponentThis.onModifyFontSizeChange(e.value.size)}render(){return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(kn,{ref:this.fontSizeNumberSliderInput,disabled:this.disabledValue,sliderInputRef:this.modifyFontSizeSlider,valueLabelText:(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(gs,{}),"Font size : ",(0,a.jsx)("span",{ref:this.props.textItemFontSizeValueRef})]}),sliderStep:.1,minValue:10,maxValue:70,onSliderValueChanged:this.props.mainComponentThis.onModifyFontSizeChange,onSliderChangeFinished:()=>{this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}}),(0,a.jsx)(Qo,{disabled:this.disabledValue,label:(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(Ms,{}),"Text content:"]}),labelStyle:{display:"flex",alignItems:"center"},inputRef:this.modifyTextContent,onChange:this.props.mainComponentThis.onModifyTextContentChange}),(0,a.jsx)(xo,{labelStyle:{display:"flex",alignItems:"center"},label:(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(ks,{}),"Text color:"]}),children:(0,a.jsx)(zs,{ref:this.textColorsSelectionRef,disabled:this.disabledValue,items:q,isColor:!0,onClickCallback:this.props.mainComponentThis.onModifyTextColorButonClick,mainComponentThis:this.props.mainComponentThis})})]})}}const wr=br;var Cr=i(6935);class xr extends o.Component{constructor(e){var t;super(e),t=this,this.onInsertFlorplanImageClose=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.props.floorplanImageTools.current.setRightBoxAsInactive(),t.resetUploadFloorplanImageTools(),i||(t.props.mainComponentThis.foncButton("select_mode"),t.props.mainComponentThis.boxInfo.current.innerHTML="Select mode")},this.resetUploadFloorplanImageTools=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({scaleButtonClicked:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1,translateButtonClicked:!1,floorplanTranslationFirstClick:!1,floorplanImageUploaded:!e&&t.state.floorplanImageUploaded})},this.onInsertFloorplanImageDeleteButtonClick=()=>{this.props.mainComponentThis.foncButton("select_mode"),this.props.mainComponentThis.boxInfo.current.innerHTML="Select mode",this.props.floorplanImageTools.current.setRightBoxAsInactive(),Ct(this.props.boxFloorplanImage.current),this.resetLayoutState(),this.props.mainComponentThis.zoom_maker("zoomreset",this.props.mainComponentThis.zoomXMove,this.props.mainComponentThis.zoomXView)},this.resetLayoutState=()=>{this.state.floorplanImageUploaded&&(rt(this.props.uploadImageFloorplanSettingsIconRef.current,this.props.mainComponentThis.othersTimeout,null,!1),console.log("Hide hide icon"),rt(this.props.uploadFloorplanImageStatusContainerRef.current,this.props.mainComponentThis.othersTimeout,null,!1),rt(this.props.uploadImageFloorplanHideRef.current,0,null,!1),rt(this.props.uploadImageFloorplanShowRef.current,0,null,!1),!this.props.boxFloorplanImage.current.classList.contains("fade-in")&&at(this.props.boxFloorplanImage.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1),this.floorplanLength.current.setValue(""),this.floorplanLength.current.setInitialValue(""),this.floorplanWidth.current.setValue(""),this.floorplanWidth.current.setInitialValue(""),this.floorplanImageInput.current.value="",rt(this.floorplanImageToolsDeleteButtonRef.current,this.props.mainComponentThis.othersTimeout,(()=>this.setState({floorplanImageUploaded:!1})),!1))},this.onUploadFloorplanImageInputChange=()=>e=>{this.uploadedFloorplanImage=e.target.files[0],this.resetUploadFloorplanImageTools(!0),at(this.explanationBox.current,this.props.mainComponentThis.othersTimeout,null,"flex",!1)},this.getFloorplanImageBoundingBox=()=>({minX:this.floorplanBoundingBoxCurrentParams.originX,maxX:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,minY:this.floorplanBoundingBoxCurrentParams.originY,maxY:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length}),this.centerAndShowWholeFloorplanImage=()=>{const e={x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width/2,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length/2};this.props.mainComponentThis.centerAndShowWholeBoxOperations(e,this.getFloorplanImageBoundingBox(),!1)},this.onExplanationConfirmedCallback=()=>{this.setState({floorplanImageUploaded:!0,preserveAspectRatio:!0},(()=>{let e=new Image,t=window.URL||window.webkitURL||window,i=t.createObjectURL(this.uploadedFloorplanImage);e.onload=()=>{this.floorplanAspectRatio=e.width/e.height,this.floorplanInitialWidth=this.floorplanImageInitialSvgWidth,this.floorplanInitialLength=this.floorplanInitialWidth/this.floorplanAspectRatio,t.revokeObjectURL(i),this.floorplanBoundingBoxCurrentParams.originX=200-this.props.mainComponentThis.offset.left,this.floorplanBoundingBoxCurrentParams.originY=24,this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength,this.drawUploadedFloorplanImage(),this.props.mainComponentThis.zoom_maker("zoomreset",this.props.mainComponentThis.zoomXMove,this.props.mainComponentThis.zoomXView),at(this.props.uploadFloorplanImageStatusContainerRef.current,this.props.mainComponentThis.othersTimeout,null,"block",!1),"none"===this.props.uploadImageFloorplanHideRef.current.style.display&&"none"===this.props.uploadImageFloorplanShowRef.current.style.display&&(at(this.props.uploadImageFloorplanHideRef.current,0,null,"inline",!1),this.props.uploadFloorplanImageStatusContainerRef.current.title="Hide floorplan image"),at(this.props.uploadImageFloorplanSettingsIconRef.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1),at(this.floorplanImageToolsDeleteButtonRef.current,this.props.mainComponentThis.othersTimeout,null,"block",!1),d()||(this.props.mainComponentThis.boxInfo.current.innerHTML="Hold <b>SHIFT</b> to drag around floorplan.")},e.src=i}))},this.drawUploadedFloorplanImage=()=>{Ct(this.props.boxFloorplanImage.current);const e=this.floorplanImageInput.current.files[0];this.props.mainComponentThis.editor.createAndShowBoxMeasures(this.floorplanBoundingBoxCurrentParams.originX,this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,this.floorplanBoundingBoxCurrentParams.originY,this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length,this.props.boxFloorplanImage,{color:"#ffcc00",strokeWidth:1}),this.props.floorplanImagePattern.current.setAttribute("x",this.floorplanBoundingBoxCurrentParams.originX),this.props.floorplanImagePattern.current.setAttribute("y",this.floorplanBoundingBoxCurrentParams.originY),this.props.floorplanImagePattern.current.setAttribute("height",this.floorplanBoundingBoxCurrentParams.length),this.props.floorplanImagePattern.current.setAttribute("width",this.floorplanBoundingBoxCurrentParams.width),this.props.floorplanImage.current.setAttribute("height",this.floorplanBoundingBoxCurrentParams.length),this.props.floorplanImage.current.setAttribute("width",this.floorplanBoundingBoxCurrentParams.width);let t=new FileReader;t.onload=e=>{this.props.floorplanImage.current.setAttribute("href",e.target.result),console.log("Atrribute setted")},t.onerror=()=>{this.props.mainComponentThis.boxInfo.current.innerHTML="Ooops. An error happened. Cannot load image."},t.readAsDataURL(e);let i=`M${this.floorplanBoundingBoxCurrentParams.originX},${this.floorplanBoundingBoxCurrentParams.originY}\n            L${this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width},${this.floorplanBoundingBoxCurrentParams.originY}\n            L${this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width},${this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length}\n            L${this.floorplanBoundingBoxCurrentParams.originX},${this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length}\n            L${this.floorplanBoundingBoxCurrentParams.originX},${this.floorplanBoundingBoxCurrentParams.originY}`;this.props.mainComponentThis.qSVG.create(this.props.boxFloorplanImage,"path",{id:"floorplan-image-path",d:i,fill:"url(#floorplan_image_pattern)","fill-opacity":1,stroke:"none"});const o=Et(this.floorplanBoundingBoxCurrentParams.width/this.props.mainComponentThis.meter,this.userUnit,"meter","feet",this.floorplanDimensionsDecimalPrecision),n=Et(this.floorplanBoundingBoxCurrentParams.length/this.props.mainComponentThis.meter,this.userUnit,"meter","feet",this.floorplanDimensionsDecimalPrecision);this.floorplanWidth.current.setValue(o),this.floorplanWidth.current.setInitialValue(o),this.floorplanLength.current.setValue(n),this.floorplanLength.current.setInitialValue(n),this.setState({originX:r(this.floorplanBoundingBoxCurrentParams.originX,this.originTranslateDecimalPrecision),originY:r(this.floorplanBoundingBoxCurrentParams.originY,this.originTranslateDecimalPrecision),width:o,length:n})},this.translateFloorplan=(e,t)=>{const i=this.wallTranslateGroup.querySelector("#originCircle").getAttribute("cx"),o=this.wallTranslateGroup.querySelector("#originCircle").getAttribute("cy"),n=(e.x-i)*t,s=(e.y-o)*t;this.floorplanBoundingBoxCurrentParams.originX=this.floorplanBoundingBoxCurrentParams.originX+n,this.floorplanBoundingBoxCurrentParams.originY=this.floorplanBoundingBoxCurrentParams.originY+s,this.drawUploadedFloorplanImage(),Ct(this.wallTranslateGroup)},this.handleMouseDownAction=e=>{const t=[{x:this.floorplanBoundingBoxCurrentParams.originX,y:this.floorplanBoundingBoxCurrentParams.originY},{x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,y:this.floorplanBoundingBoxCurrentParams.originY},{x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length},{x:this.floorplanBoundingBoxCurrentParams.originX,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length}];if("floorplan_image_translation"===this.props.mainComponentThis.mode)if(this.state.floorplanTranslationFirstClick)if(this.state.floorplanTranslationIsOutsideClick)if(kt(e,t))this.translateFloorplan(e,-1),this.setState({floorplanTranslationFirstClick:!1,floorplanTranslationIsOutsideClick:!1});else{const t=this.wallTranslateGroup.querySelector("#originCircle");t.setAttribute("cx",e.x),t.setAttribute("cy",e.y)}else this.translateFloorplan(e,1),this.setState({floorplanTranslationFirstClick:!1});else{this.wallTranslateGroup?Ct(this.wallTranslateGroup):this.wallTranslateGroup=this.props.mainComponentThis.qSVG.create("none","g",{class:"floorplan-image-translate-group"});const i=this.props.mainComponentThis.qSVG.create("none","circle",{id:"originCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallTranslateGroup.appendChild(i),this.props.boxFloorplanImage.current.appendChild(this.wallTranslateGroup),this.setState({floorplanTranslationFirstClick:!0,floorplanTranslationIsOutsideClick:!kt(e,t)})}else if(kt(e,t))if(this.state.floorplanScalingFirstClick){const t=this.props.mainComponentThis.qSVG.create("none","circle",{id:"endCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallLineGroup.appendChild(t),this.props.mainComponentThis.boxInfo.current.innerHTML="Insert selected line length in "+("metric"===this.userUnit?"meters(m)":"feet(ft)"),this.setState({floorplanScalingFirstClick:!1,showWallLengthInput:!0},(()=>{this.selectedWallLengthInput.current.setValue(""),this.selectedWallLengthInput.current.setInitialValue("")}))}else{this.wallLineGroup?Ct(this.wallLineGroup):this.wallLineGroup=this.props.mainComponentThis.qSVG.create("none","g",{class:"floorplan-image-scaling-group"});const t=this.props.mainComponentThis.qSVG.create("none","line",{x1:e.x,y1:e.y,x2:e.x,y2:e.y,"stroke-width":this.lineThick,stroke:"#4b4b5a"});this.wallLineGroup.appendChild(t);const i=this.props.mainComponentThis.qSVG.create("none","circle",{id:"startCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallLineGroup.appendChild(i),this.props.boxFloorplanImage.current.appendChild(this.wallLineGroup),this.setState({floorplanScalingFirstClick:!0,showWallLengthInput:!1})}},this.onWallLengthConfirmClick=()=>{const e=Ht(parseFloat(this.selectedWallLengthInput.current.getValue()),this.userUnit)*this.props.mainComponentThis.meter;let t=this.wallLineGroup.querySelector("#startCircle"),i=this.wallLineGroup.querySelector("#endCircle");const o=Bt({x:t.getAttribute("cx"),y:t.getAttribute("cy")},{x:i.getAttribute("cx"),y:i.getAttribute("cy")}),n=r(e/o*this.state.scalingFactor,this.scaleFactorDecimalPrecision);this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth*n,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength*n,this.drawUploadedFloorplanImage(),this.setState({showWallLengthInput:!1,scalingFactor:n})},this.onScaleButtonClick=()=>{this.state.scaleButtonClicked?(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.props.mainComponentThis.mode="upload_floorplan_image_mode"):(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove(),this.props.mainComponentThis.mode="floorplan_image_scaling"),this.setState({scaleButtonClicked:!this.state.scaleButtonClicked,floorplanScalingFirstClick:!1,translateButtonClicked:!1,floorplanTranslationFirstClick:!1,showWallLengthInput:!this.state.scaleButtonClicked&&this.state.showWallLengthInput})},this.onTranslateButtonClick=()=>{this.state.translateButtonClicked?(this.props.mainComponentThis.mode="upload_floorplan_image_mode",this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove()):(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.props.mainComponentThis.mode="floorplan_image_translation"),this.setState({translateButtonClicked:!this.state.translateButtonClicked,floorplanTranslationFirstClick:!1,scaleButtonClicked:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1})},this.handleAspectRatioButtonClick=()=>{this.setState({preserveAspectRatio:!this.state.preserveAspectRatio})},this.onFloorplanInputWidthChanged=()=>{const e=this.floorplanWidth.current.getValue();e!==this.state.width&&(this.floorplanBoundingBoxCurrentParams.width=Ht(parseFloat(e),this.userUnit)*this.props.mainComponentThis.meter,this.state.preserveAspectRatio&&(this.floorplanBoundingBoxCurrentParams.length=this.floorplanBoundingBoxCurrentParams.width/this.floorplanAspectRatio),this.drawUploadedFloorplanImage())},this.onFloorplanInputLengthChanged=()=>{const e=this.floorplanLength.current.getValue();e!==this.state.length&&(this.floorplanBoundingBoxCurrentParams.length=Ht(parseFloat(e),this.userUnit)*this.props.mainComponentThis.meter,this.state.preserveAspectRatio&&(this.floorplanBoundingBoxCurrentParams.width=this.floorplanAspectRatio*this.floorplanBoundingBoxCurrentParams.length),this.drawUploadedFloorplanImage())},this.onScaleFactorInputChange=e=>{this.state.scalingFactor!==e&&(this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth*e,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength*e,this.drawUploadedFloorplanImage(),this.setState({scalingFactor:e,floorplanScalingFirstClick:!1,showWallLengthInput:!1}))},this.onFloorplanOriginXInputChange=e=>{e!==this.state.originX&&(this.floorplanBoundingBoxCurrentParams.originX=e,this.drawUploadedFloorplanImage(),this.setState({originX:e}))},this.onFloorplanOriginYInputChange=e=>{this.state.originY!==e&&(this.floorplanBoundingBoxCurrentParams.originY=e,this.drawUploadedFloorplanImage(),this.setState({originY:e}))},this.state={floorplanImageUploaded:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1,floorplanTranslationFirstClick:!1,floorplanTranslationIsOutsideClick:!1,scaleButtonClicked:!1,translateButtonClicked:!1,preserveAspectRatio:!0,scalingFactor:1,originX:0,originY:0,width:0,length:0},this.userUnit=e.mainComponentThis.isAddOnApp?e.mainComponentThis.measureSystemContext.userUnit:e.mainComponentThis.context.userUnit,this.floorplanDimensionsInputStep=(this.userUnit,.1),this.floorplanDimensionsDecimalPrecision=-Math.log10(this.floorplanDimensionsInputStep),this.lineLengthInputStep="metric"===this.userUnit?.01:.1,this.lineLengthDecimalPrecision=-Math.log10(this.lineLengthInputStep),this.scaleFactorInputStep=.01,this.scaleFactorDecimalPrecision=-Math.log10(this.scaleFactorInputStep),this.originTranslateInputStep=1,this.originTranslateDecimalPrecision=-Math.log10(this.originTranslateInputStep),this.wallTranslateGroup=null,this.wallLineGroup=null,this.circleRadius=e.mainComponentThis.meter/6,this.lineThick=e.mainComponentThis.meter/8,this.floorplanAspectRatio=0,this.uploadedImagePixelToSvgUnitRatio=1,this.floorplanImageInitialSvgWidth=20*e.mainComponentThis.meter,this.floorplanBoundingBoxCurrentParams={originX:0,originY:0,width:0,length:0},this.floorplanInitialWidth=null,this.floorplanInitialLength=null,this.uploadedFloorplanImage=null,this.floorplanLength=o.createRef(),this.floorplanWidth=o.createRef(),this.floorplanImageInput=o.createRef(),this.floorplanImageToolsDeleteButtonRef=o.createRef(),this.selectedWallLengthInput=o.createRef(),this.scaleFactorInput=o.createRef(),this.explanationBox=o.createRef(),this.onInsertFloorplanImageDeleteButtonClick=this.onInsertFloorplanImageDeleteButtonClick.bind(this),this.onInsertFlorplanImageClose=this.onInsertFlorplanImageClose.bind(this),this.resetUploadFloorplanImageTools=this.resetUploadFloorplanImageTools.bind(this),this.handleMouseDownAction=this.handleMouseDownAction.bind(this),this.translateFloorplan=this.translateFloorplan.bind(this),this.onWallLengthConfirmClick=this.onWallLengthConfirmClick.bind(this),this.drawUploadedFloorplanImage=this.drawUploadedFloorplanImage.bind(this),this.onScaleButtonClick=this.onScaleButtonClick.bind(this),this.onTranslateButtonClick=this.onTranslateButtonClick.bind(this),this.onUploadFloorplanImageInputChange=this.onUploadFloorplanImageInputChange.bind(this),this.onExplanationConfirmedCallback=this.onExplanationConfirmedCallback.bind(this),this.handleAspectRatioButtonClick=this.handleAspectRatioButtonClick.bind(this),this.onFloorplanInputWidthChanged=this.onFloorplanInputWidthChanged.bind(this),this.onFloorplanInputLengthChanged=this.onFloorplanInputLengthChanged.bind(this),this.onScaleFactorInputChange=this.onScaleFactorInputChange.bind(this),this.onFloorplanOriginXInputChange=this.onFloorplanOriginXInputChange.bind(this),this.onFloorplanOriginYInputChange=this.onFloorplanOriginYInputChange.bind(this),this.getFloorplanImageBoundingBox=this.getFloorplanImageBoundingBox.bind(this),this.centerAndShowWholeFloorplanImage=this.centerAndShowWholeFloorplanImage.bind(this),this.resetLayoutState=this.resetLayoutState.bind(this)}render(){return console.log(this.state),(0,a.jsxs)(Oa,{ref:this.props.floorplanImageTools,containerStyle:{width:250,right:-250},onCloseRightBox:this.onInsertFlorplanImageClose,mainComponentThis:this.props.mainComponentThis,children:[(0,a.jsxs)("div",{ref:this.explanationBox,className:"upload-floorplan-image-explanation-box hidden",children:[(0,a.jsxs)("h3",{children:["Floorplan dimensions are set to ",(0,a.jsx)("b",{children:"fixed values"}),"."," "]}),(0,a.jsxs)("h3",{children:["You can change them to the actual values either by ",(0,a.jsx)("b",{children:"direct input"})," or using our ",(0,a.jsx)("b",{children:"Click&Scale"})," ","feature."]})," ",(0,a.jsxs)("h3",{children:["For floorplan translation on drawing area use ",(0,a.jsx)("b",{children:"Click&Translate"}),"."]}),(0,a.jsx)("h3",{children:(0,a.jsx)("b",{children:"NOTE: 1 grid square equals "+("metric"===this.userUnit?"1 meter":`${this.props.mainComponentThis.imperialSystemSquareFeetSize} feet`)})}),(0,a.jsx)(go,{type:"primary",onClick:()=>rt(this.explanationBox.current,this.props.mainComponentThis.othersTimeout,this.onExplanationConfirmedCallback,!1),children:"Got it"})]}),(0,a.jsx)(Qo,{label:"Upload floorplan image from your local device",labelStyle:{display:"block",fontSize:"1.17em",margin:"1em 0",fontWeight:"bold"},inputRef:this.floorplanImageInput,type:"file",accept:"image/png, image/jpeg",onChange:this.onUploadFloorplanImageInputChange}),this.state.floorplanImageUploaded?(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{ref:this.floorplanImageToolsDeleteButtonRef,className:"button-centered-container hidden form-group",children:(0,a.jsx)(go,{type:"delete",onClick:this.onInsertFloorplanImageDeleteButtonClick,children:"Delete uploaded image"})}),(0,a.jsx)(xo,{label:`Floorplan width(${"metric"===this.userUnit?"m":"ft"})`,children:(0,a.jsx)(Bo,{ref:this.floorplanWidth,placeholder:"Floorplan width",inputStep:this.floorplanDimensionsInputStep,inputMin:this.floorplanDimensionsInputStep,inputMax:1/0,inputStyle:{textAlign:"left"},callOnlyOnBlur:!0,hideNumberArrows:!0,onInputValueChanged:this.onFloorplanInputWidthChanged,defaultValue:"",checkInputValueChangeBeforeCall:!0})}),(0,a.jsxs)("div",{className:"preserve-aspect-ratio-container",children:[(0,a.jsx)("div",{className:"svg-action-icon-container button-with-icon svg-center-inside-container",onClick:this.handleAspectRatioButtonClick,title:this.state.preserveAspectRatio?"Preserve aspect ratio":"No aspect ratio",children:this.state.preserveAspectRatio?(0,a.jsx)(bs,{}):(0,a.jsx)(Cs,{})}),(0,a.jsx)("label",{className:"label form-control",children:"Floorplan aspect ratio"})]}),(0,a.jsx)(xo,{label:`Floorplan length(${"metric"===this.userUnit?"m":"ft"})`,children:(0,a.jsx)(Bo,{ref:this.floorplanLength,placeholder:"Floorplan length",inputStep:this.floorplanDimensionsInputStep,inputMin:this.floorplanDimensionsInputStep,inputMax:1/0,inputStyle:{textAlign:"left"},callOnlyOnBlur:!0,hideNumberArrows:!0,onInputValueChanged:this.onFloorplanInputLengthChanged,defaultValue:"",checkInputValueChangeBeforeCall:!0})}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsxs)(go,{type:this.state.scaleButtonClicked?"primary":"dull",className:"button-with-icon",onClick:this.onScaleButtonClick,children:[(0,a.jsx)(ms,{style:{fill:this.state.scaleButtonClicked?"#ffffff":"#4b4b5a"}}),"Click&Scale"]})}),this.state.scaleButtonClicked&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsxs)("div",{className:"upload-floorplan-info-container",children:[(0,a.jsx)("div",{className:"popup-icon-container",children:(0,a.jsx)(io.A,{})}),(0,a.jsx)("p",{children:this.state.showWallLengthInput?(0,a.jsx)("span",{children:(0,a.jsx)("b",{children:"Insert selected line length in "+("metric"===this.userUnit?"meters(m)":"feet(ft)")})}):(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{children:"Select 2 points"})," on floorplan image for which you know the exact length"]})}),(0,a.jsx)("p",{children:"Click button to exit scaling mode"}),this.state.showWallLengthInput&&(0,a.jsxs)(xo,{containerStyle:{marginTop:"0.5rem"},children:[(0,a.jsx)(Bo,{ref:this.selectedWallLengthInput,placeholder:`Insert line length(${"metric"===this.userUnit?"m":"ft"})`,inputStyle:{marginBottom:"0.5rem",border:"1px solid #19ab7f"},inputStep:this.lineLengthInputStep,inputMin:this.lineLengthInputStep,inputMax:1/0,defaultValue:"",checkInputValueChangeBeforeCall:!0}),(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsx)(go,{type:"primary",onClick:this.onWallLengthConfirmClick,children:"Confirm"})})]}),(0,a.jsxs)("div",{className:"line-divider-container",children:[(0,a.jsx)("hr",{}),(0,a.jsx)("b",{children:"OR"}),(0,a.jsx)("hr",{})]}),(0,a.jsx)("p",{children:"Insert scale factor value directly"})]}),(0,a.jsx)(xo,{containerStyle:{marginBottom:0},label:"Scale factor",children:(0,a.jsx)(Ro,{ref:this.scaleFactorInput,placeholder:"Scale factor",inputStep:this.scaleFactorInputStep,inputMin:this.scaleFactorInputStep,inputMax:1/0,usePropsValue:!0,value:this.state.scalingFactor,onInputValueChanged:this.onScaleFactorInputChange})})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsxs)(go,{type:this.state.translateButtonClicked?"primary":"dull",className:"button-with-icon",onClick:this.onTranslateButtonClick,children:[(0,a.jsx)(Cr.A,{style:{width:20,height:20,fill:this.state.translateButtonClicked?"#ffffff":"#4b4b5a"}}),"Click&Translate"]})}),this.state.translateButtonClicked&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsxs)("div",{className:"upload-floorplan-info-container",children:[(0,a.jsx)("div",{className:"popup-icon-container",children:(0,a.jsx)(io.A,{})}),(0,a.jsx)("p",{children:this.state.floorplanTranslationFirstClick?(0,a.jsx)("span",{children:this.state.floorplanTranslationIsOutsideClick?(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{children:"Select floorplan point"})," which you want to translate to the origin point"]}):(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{children:"Select location"})," to which you want to translate the selected floorplan point"]})}):(0,a.jsxs)("span",{children:[(0,a.jsx)("b",{children:"Select origin point"})," of translation"]})}),(0,a.jsx)("p",{children:"Click button to exit translation mode"}),(0,a.jsxs)("div",{className:"line-divider-container",children:[(0,a.jsx)("hr",{}),(0,a.jsx)("b",{children:"OR"}),(0,a.jsx)("hr",{})]}),(0,a.jsx)("p",{children:"Insert offset values directly"})]}),(0,a.jsx)(xo,{label:"Horizontal offset",children:(0,a.jsx)(Ro,{placeholder:"Horizontal offset",inputStep:this.originTranslateInputStep,inputMin:-1/0,inputMax:1/0,usePropsValue:!0,value:this.state.originX,onInputValueChanged:this.onFloorplanOriginXInputChange})}),(0,a.jsx)(xo,{label:"Vertical offset",containerStyle:{marginBottom:0},children:(0,a.jsx)(Ro,{placeholder:"Vertical offset",inputStep:this.originTranslateInputStep,inputMin:-1/0,inputMax:1/0,usePropsValue:!0,value:this.state.originY,onInputValueChanged:this.onFloorplanOriginYInputChange})})]})]})]}):null]})}}const _r=xr;class yr extends o.Component{constructor(e){super(),this.setSelectWallAlwaysHideStatus=(e,t)=>{this.wallNotHiddenWidthValue=t,this.setState({alwaysHide:e.alwaysHide||!1})},this.resetWallAlwaysHideStatus=()=>{this.setState({alwaysHide:!1})},this.onWallAlwaysHideChange=e=>{const t=e.target.checked,i=this.props.mainComponentThis.getSelectedWall2D();let o;t?(this.wallNotHiddenWidthValue=parseFloat(this.props.mainComponentThis.wallWidthNumberSliderInput.current.inputNumberComponentRef.current.getValue()),o=this.props.mainComponentThis.wallThicknessMinValue):o=this.wallNotHiddenWidthValue,this.props.mainComponentThis.onWallWidthInputChange(o),this.props.mainComponentThis.wallWidth.current.value=o,this.props.mainComponentThis.wallWidthNumberSliderInput.current.inputNumberComponentRef.current.setValue(o),i.alwaysHide=t,this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0),this.setState({alwaysHide:t})},this.state={alwaysHide:!1},this.wallNotHiddenWidthValue=null,this.disabledValue=e.mainComponentThis.isAddOnApp,this.setSelectWallAlwaysHideStatus=this.setSelectWallAlwaysHideStatus.bind(this),this.resetWallAlwaysHideStatus=this.resetWallAlwaysHideStatus.bind(this),this.onWallAlwaysHideChange=this.onWallAlwaysHideChange.bind(this)}render(){return(0,a.jsx)(xo,{children:(0,a.jsx)(qo,{disabled:this.disabledValue,infoLabel:!0,infoLabelTitle:"Always hide",infoText:"Check this box to hide wall in 3D view.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:this.state.alwaysHide,onChange:this.onWallAlwaysHideChange})})}}const Sr=yr;class vr extends o.Component{constructor(e){super(),this.setSelectedCustomWallHeightData=e=>{const t=this.props.mainComponentThis.convertSvgToValueUnits(e.wallHeight,"centimeter","inch",this.props.mainComponentThis.wallHeightDecimalPrecision);this.wallCustomHeightRef.current.setValue(t),this.wallCustomHeightRef.current.setInitialValue(t)},this.resetCustomWallHeightData=()=>{this.wallCustomHeightRef.current.setValue(""),this.wallCustomHeightRef.current.setInitialValue("")},this.onWallCustomHeightInputChange=()=>{const e=this.props.mainComponentThis.convertValueToSvgUnits(parseFloat(this.wallCustomHeightRef.current.getValue()));this.props.mainComponentThis.getSelectedWall2D().wallHeight=e,this.props.mainComponentThis.save(!1,!0)},this.userUnit=e.mainComponentThis.isAddOnApp?e.mainComponentThis.measureSystemContext.userUnit:e.mainComponentThis.context.userUnit,this.disabledValue=e.mainComponentThis.isAddOnApp,this.wallCustomHeightInitialValue=null,this.wallCustomHeightRef=o.createRef(),this.setSelectedCustomWallHeightData=this.setSelectedCustomWallHeightData.bind(this),this.resetCustomWallHeightData=this.resetCustomWallHeightData.bind(this),this.onWallCustomHeightInputChange=this.onWallCustomHeightInputChange.bind(this)}render(){return(0,a.jsx)(xo,{label:`Wall height(${"metric"===this.userUnit?"cm":"in"})`,children:(0,a.jsx)(Bo,{ref:this.wallCustomHeightRef,disabled:this.disabledValue,title:"Set custom wall height",inputStep:Math.pow(10,-this.props.mainComponentThis.wallHeightDecimalPrecision),inputMin:1,inputMax:this.props.mainComponentThis.wallHeightMaxValue,onInputValueChanged:this.onWallCustomHeightInputChange})})}}const Dr=vr;class Tr extends o.Component{constructor(e){super(),this.setSelectedWallMaterialData=e=>{this.setState({selectedWall:e,edit:X.map((t=>({...t,value:e[t.field]})))},(()=>{this.state.edit.forEach((e=>{this[e.dropdownRefPropertyName].current.classList.remove("show"),this[e.selectRefPropertyName].current.setValue(T.isHexColor(e.value)?e.value:"Color"),this.drawWallSideMaterialPath(e)}))}))},this.drawWallSideMaterialPath=e=>{this.removeWallSidesColorLines(e);const{interiorLineCoords:t,exteriorLineCoords:i}=wt(this.state.selectedWall,this.props.mainComponentThis.isPointOnWallDecimalPrecision),o="interiorPlaneMaterial"===e.field?t:i;2===o.length&&this.props.mainComponentThis.qSVG.create(this.props.mainComponentThis.boxBind,"line",{id:e.field,x1:o[0].x,y1:o[0].y,x2:o[1].x,y2:o[1].y,"stroke-width":2,stroke:T.isHexColor(e.value)?`url(#${e.value})`:e.value})},this.removeWallSidesColorLines=e=>{const t=this.props.mainComponentThis.boxBind.current.querySelector(`#${e.field}`);t&&t.remove()},this.resetWallMaterialData=()=>{this.state.edit.forEach((e=>this.removeWallSidesColorLines(e))),this.setState({selectedWall:null,edit:[]})},this.onWallMaterialListItemClick=e=>(t,i)=>{let o;if(i>0){const e=Y[i];o=e.title}else o=e.defaultColorValue;this.props.mainComponentThis.getSelectedWall2D()[e.field]=o,this.setState({edit:this.state.edit.map((t=>({...t,value:t.field===e.field?o:t.value})))},(()=>{this.drawWallSideMaterialPath(this.state.edit.find((t=>t.field===e.field))),this[e.selectRefPropertyName].current.setValue(i>0?o:"Color"),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}))},this.onWallSideColorChange=e=>t=>{this.setState({edit:this.state.edit.map((i=>({...i,value:i.field===e.field?t.target.value:i.value})))},(()=>{this.props.mainComponentThis.getSelectedWall2D()[e.field]=t.target.value,this.props.mainComponentThis.boxBind.current.querySelector(`#${e.field}`).setAttribute("stroke",t.target.value),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}))},this.state={selectedWall:null,edit:[]},this.disabledValue=e.mainComponentThis.isAddOnApp,X.forEach((e=>{this[e.selectRefPropertyName]=o.createRef(),this[e.dropdownRefPropertyName]=o.createRef()})),this.setSelectedWallMaterialData=this.setSelectedWallMaterialData.bind(this),this.drawWallSideMaterialPath=this.drawWallSideMaterialPath.bind(this),this.removeWallSidesColorLines=this.removeWallSidesColorLines.bind(this),this.onWallMaterialListItemClick=this.onWallMaterialListItemClick.bind(this),this.onWallSideColorChange=this.onWallSideColorChange.bind(this)}render(){return(0,a.jsx)(xo,{label:"Wall material",children:this.state.edit.map(((e,t)=>(0,a.jsxs)("div",{className:"form-group inline",children:[(0,a.jsx)("div",{className:"label-container",children:(0,a.jsx)("label",{className:"label form-control label-form-control-cancel",children:e.label})}),(0,a.jsxs)("div",{className:"input-container",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,a.jsx)(Xn,{disabled:this.disabledValue,ref:this[e.selectRefPropertyName],dropdownMenuRef:this[e.dropdownRefPropertyName],containerClasses:"wall-material-select "+(0===t?"first":""),onListItemClick:this.onWallMaterialListItemClick(e),listItems:Y.map((e=>e.title))}),!T.isHexColor(e.value)&&(0,a.jsx)(Xo,{disabled:this.disabledValue,containerStyle:{marginTop:"0.5rem",zIndex:0===t?3:1},item:e,onChange:this.onWallSideColorChange,boxContainer:this.props.mainComponentThis.wallTools.current.containerRef.current})]})]},e.field)))})}}const jr=Tr;class Ir extends o.Component{constructor(e){super(),this.setSelectedRotationOption=e=>{const t=this.state.rotationOptions.find((t=>t.rotationAxis===e.rotationAxis&&t.rotationDirection===e.rotationDirection));t&&this.handleRotationOptionChange({choices:[{value:t}]})()},this.handleRotationOptionChange=e=>()=>{console.log("handleRotationOptionChange");const t=[...this.state.rotationOptions];t.forEach((e=>e.selected=!1));const i=t.find((t=>t===e.choices[0].value));i&&(i.selected=!0,this.setState({rotationOptions:t},(()=>{this.props.mainComponentThis.setWindowObjectRotationOption(this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.windowObj2DId),i),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!1)})))};const t=e.mainComponentThis.getSelectedWallFreeItemObj2D(e.windowObj2DId);this.state={rotationOptions:e.mainComponentThis[oi(t.type)?"windowDoubleAxisRotationOptions":"windowSingleAxisRotationOptions"].map((e=>({...e,imageURI:null,selected:(t.additionalParams.rotationAxis||"start")===e.rotationAxis&&(t.additionalParams.rotationDirection||"up")===e.rotationDirection})))},this.disabledValue=e.mainComponentThis.isAddOnApp,this.setSelectedRotationOption=this.setSelectedRotationOption.bind(this),this.handleRotationOptionChange=this.handleRotationOptionChange.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.getSelectedWallFreeItemObj2D(this.props.windowObj2DId);!this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.createWindowRotationPropertiesBinder(e);let t=[...this.state.rotationOptions];for(let i=0;i<t.length;i++){const o=Gt(t[i].rotationAxis,t[i].rotationDirection,e),n=this.props.mainComponentThis.createWindowRotationSvg(e,{point1:{x:o.curvePoint1X,y:o.curvePoint1Y},point2:{x:o.curvePoint2X,y:o.curvePoint2Y},controlPoint:{x:o.controlPointX,y:o.controlPointY}},t[i].rotationDirection);n.svgGroupElement.appendChild(n.curveArrowPath);const s=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","defs"),r=document.createElementNS("http://www.w3.org/2000/svg","marker");r.setAttribute("id","window-rotation-direction-arrow-triangle"),r.setAttribute("viewBox","0 0 10 10"),r.setAttribute("refX","5"),r.setAttribute("refY","5"),r.setAttribute("markerUnits","strokeWidth"),r.setAttribute("markerWidth","4"),r.setAttribute("markerHeight","4"),r.setAttribute("orient","auto");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),l.setAttribute("fill","#f00"),r.appendChild(l),a.appendChild(r),s.appendChild(a),s.appendChild(n.svgGroupElement),document.body.appendChild(s);const{arrowHalfLength:h,translateX:c,translateY:d}=qt(e,t[i].rotationDirection);let p=(e.angle+90)*(Math.PI/180),m=[{x:-h,y:o.controlPointY/2},{x:h,y:o.controlPointY/2},{x:h,y:0},{x:-h,y:0}],u={x:0,y:0};m.forEach((e=>{e.x+=c,e.y+=d})),u.x+=c,u.y+=d,Ut(m,u,p);const g=Yt(m),f=5;s.setAttribute("viewBox",`${g.minX-f} ${g.minY-f} ${g.width+2*f} ${g.height+2*f}`),s.setAttribute("width",g.width+2*f),s.setAttribute("height",g.height+2*f),t[i].imageURI="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(s)),document.body.removeChild(document.body.lastChild)}this.setState({rotationOptions:t})}render(){const{rotationOptions:e}=this.state;return console.log(e),(0,a.jsx)(xo,{label:"Rotation options",children:(0,a.jsx)("div",{children:e.filter((e=>e.imageURI)).map(((t,i)=>(0,a.jsx)("div",{children:(0,a.jsx)(an,{disabled:this.disabledValue,choiceRowStyle:{display:"flex",alignItems:"center"},onChange:this.handleRotationOptionChange,item:{choices:[{name:null,value:t,inputSiblingElement:(0,a.jsx)("img",{style:{paddingLeft:"0.5rem"},src:t.imageURI})}],value:e.find((e=>e.selected))}})},i)))})})}}const Pr=Ir;var Or=i(7040),kr=i(5672),Fr=i(4200),Mr=i(443),Ar=i(1417),Rr=i(7072),Lr=i(9903);class Br extends o.Component{constructor(e){super(),this.userUnit=e.mainComponentThis.isAddOnApp?e.mainComponentThis.measureSystemContext.userUnit:e.mainComponentThis.context.userUnit}render(){return(0,a.jsxs)("div",{ref:this.props.mainComponentThis.rightControlsBox,className:"right-controls-box right-box-transition",children:[(0,a.jsx)("div",{className:"moveBox move-box-container",children:(0,a.jsxs)("div",{className:"pull-right move-box",children:[(0,a.jsx)("p",{style:{margin:0},children:(0,a.jsx)("button",{title:"Move up",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomtop"),children:(0,a.jsx)("div",{className:"svg-center-inside-container",children:(0,a.jsx)(Fr.A,{})})})}),(0,a.jsxs)("p",{style:{margin:0},children:[(0,a.jsx)("button",{title:"Move left",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomleft"),children:(0,a.jsx)("div",{className:"svg-center-inside-container",children:(0,a.jsx)(kr.A,{})})}),(0,a.jsx)("button",{title:"Center",className:"btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomreset"),children:(0,a.jsx)("div",{className:"svg-center-inside-container",children:(0,a.jsx)(Or.A,{style:{width:18,height:18}})})}),(0,a.jsx)("button",{title:"Move right",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomright"),children:(0,a.jsx)("div",{className:"svg-center-inside-container",children:(0,a.jsx)(Mr.A,{})})})]}),(0,a.jsx)("p",{style:{margin:0},children:(0,a.jsx)("button",{title:"Move down",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoombottom"),children:(0,a.jsx)("div",{className:"svg-center-inside-container",children:(0,a.jsx)(Ar.A,{})})})})]})}),(0,a.jsx)("div",{ref:this.props.mainComponentThis.mapStylesChangeRef,className:"map-styles-change-container"}),(0,a.jsxs)("div",{className:"zoomBox zoom-box-container",children:[(0,a.jsxs)("div",{className:"pull-right zoom-box",children:[(0,a.jsx)("button",{title:"Zoom in",className:"shadow btn btn btn-default zoom svg-center-inside-container",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomin"),style:{display:"inline-flex"},children:(0,a.jsx)(Rr.A,{})}),(0,a.jsx)("button",{title:"Zoom out",className:"shadow btn btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomout"),style:{display:"inline-flex"},children:(0,a.jsx)(Lr.A,{})})]}),(0,a.jsx)("div",{style:{clear:"both"}}),(0,a.jsx)("div",{ref:this.props.mainComponentThis.scaleVal,className:"pull-right scale-box",children:"metric"===this.userUnit?"1m":`${this.props.mainComponentThis.imperialSystemSquareFeetSize}ft`}),(0,a.jsx)("div",{style:{clear:"both"}})]})]})}}const Wr=Br;class Nr extends o.Component{constructor(){super(),this.isSunLightShadowEnabled=()=>this.state.checked,this.handleSunLightChange=()=>{this.setState({checked:!this.state.checked},(()=>{const e=this.props.floorplan3DThis.getActiveScenes().map((e=>({scene:e,intervalObject:e===this.props.floorplan3DThis.floorplan3DOnMapScene?this.props.floorplan3DThis.sunLightPositionFloorplan3DOnMapInterval:this.props.floorplan3DThis.sunLightPositionFloorplan3DViewInterval,cameraHelpers:e===this.props.floorplan3DThis.floorplan3DOnMapScene?this.props.floorplan3DThis.sunLightPositionFloorplan3DOnMapCameraHelpers:this.props.floorplan3DThis.sunLightPositionFloorplan3DViewCameraHelpers,isMapScene:e===this.props.floorplan3DThis.floorplan3DOnMapScene})));this.state.checked?e.forEach((e=>{this.props.floorplan3DThis.calculateSunPosition(this.props.floorplan3DThis.calculateCurrentDate()).altitude<=0&&this.props.floorplan3DThis.sunPositionAlertRef.current.showAlert((0,a.jsx)("span",{children:"Daylight shadows are not visible because the sun is currently below the horizon"}),"warning"),n.render((0,a.jsx)(Ca,{}),this.props.floorplan3DThis.props.mainComponentThis.loadingComponentContainer.current,(()=>{this.props.floorplan3DThis.initializeSunLightPositionIntervalCalculation(e.isMapScene,e.scene,e.cameraHelpers,!0)}))})):e.forEach((e=>{this.props.floorplan3DThis.clearSunLightPositionInterval(e.intervalObject,e.isMapScene),this.props.floorplan3DThis.deallocateSceneSunLightData(e.scene,e.cameraHelpers)}))}))},this.state={checked:!1},this.isSunLightShadowEnabled=this.isSunLightShadowEnabled.bind(this),this.handleSunLightChange=this.handleSunLightChange.bind(this)}render(){return(0,a.jsx)(o.Fragment,{children:(0,a.jsxs)("div",{className:"sun-light-controls-container left-panel-switch-option-container",children:[(0,a.jsxs)("div",{className:"info-label-container",children:[(0,a.jsx)("label",{children:"SUN LIGHT"}),(0,a.jsx)(Eo,{indoorPanelExplanationBox:this.props.floorplan3DThis.panelInfoExplanationBox,infoText:'<span>\n                <span style="font-weight: bold;">Note:</span> Enabling this feature may impact performance,\n                especially for detailed floorplans.\n              </span>'})]}),(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsx)(Sn.A,{checked:this.state.checked,title:"Simulate sun light shadows",onChange:this.handleSunLightChange})})]})})}}const Vr=Nr;function Er(e,t,i){const o=f(45),n=e.maxX-e.minX,s=e.maxY-e.minY,a=t,r=this.canvasRef.current.offsetWidth/this.canvasRef.current.offsetHeight,l=f(this.orbitControlsCamera.fov),h=gi(l,r),c=Math.max(s,a)/(2*Math.tan(l/2)),d=n/(2*Math.tan(h/2)),p=Math.max(d,c),m=new L.Pq0(i.x,0,0),u=p+i.y+s/2,g=u*Math.tan(o);return m.y=g,m.z=u,m}function Hr(){const e=this.props.mainComponentThis.getHighestFloorData(),t=(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber)+e.floorHeight)*this.scaleFactor;let i={};for(let n in this.floorplanWallsObjectsBoundingBox2DCoordinates)i[n]=this.floorplanWallsObjectsBoundingBox2DCoordinates[n]*this.scaleFactor;const o=mt(i);o&&this.centerBBoxOrbitControlsCamera(i,t,o)}function zr(e,t,i){const o=e.position.clone(),n=Bt(new L.Pq0(t.x,t.z),new L.I9Y(o.x,o.z)),s=o.clone(),a=f(i);s.x=t.x-Math.sin(a)*n,s.z=t.z+Math.cos(a)*n,e.position.copy(s)}function Gr(e){this.floorplanNavigationRef.current.resetBearingParams(),this.floorplanNavigationRef.current.setCircleNavigatorPosition(new L.I9Y(this.firstPersonControlsCamera.position.x,this.firstPersonControlsCamera.position.z).divideScalar(this.scaleFactor),e)}function qr(e,t){this.firstPersonControlsCamera.position.set(e.x,this.floorplanFloorsPanelSelection3DRef.current.calculateFirstPersonControlsCameraPositionY(),e.y);const i=f(t);this.firstPersonControlsCamera.lookAt(this.firstPersonControlsCamera.position.x+1*Math.sin(i),this.firstPersonControlsCamera.position.y,this.firstPersonControlsCamera.position.z-1*Math.cos(i)),this.setCircleNavigatorFromFirstPersonControls(t)}function Ur(){const e=dt(this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().wallData);if(e){const t=mt(e,this.scaleFactor);this.setFirstPersonControlsCameraPosition(t,270)}}function Yr(e,t){if(this.firstPersonCameraTransitionInProgress)return;this.firstPersonCameraTransitionInProgress=!0;let i=0;const o=this.orbitControlsCamera.position.clone(),n=this.orbitControlsCamera.quaternion.clone(),s=this.firstPersonControlsCamera.position.clone(),a=this.firstPersonControlsCamera.quaternion.clone(),r=new L.zD7,l=()=>{const h=r.getDelta();i+=h/e,i>=1?(i=1,this.firstPersonCameraTransitionInProgress=!1,this.floorplan3DViewCamera=this.firstPersonControlsCamera,this.currentControls=this.firstPersonControls,this.cameraControlsRef.current.setCurrentControlsType("first_person"),this.orbitControlsCamera.position.copy(o),this.orbitControlsCamera.quaternion.copy(n),this.updateWallsVisibility(),this.currentControls.setEnabledStatus(!0),t&&t()):(this.orbitControlsCamera.position.lerpVectors(o,s,i),this.orbitControlsCamera.quaternion.slerpQuaternions(n,a,i),requestAnimationFrame(l))};l()}function Xr(){this.orbitControls.setEnabledStatus(!1),!this.firstPersonCameraTransitionInProgress&&this.smoothTransitionToFirstPerson(2),this.floorplanNavigationRef.current.setActiveStatus(!0)}function Kr(){if(!this.showMapLayer3DInputRef.current.getCheckedStatus())if(this.currentControls===this.orbitControls){const e=new L.Zcv;e.setFromNormalAndCoplanarPoint(new L.Pq0(0,1,0),this.floorplanViewUserInteractionController.intersectionGround.position);const t=new L.RlV,i=this.orbitControls.camera.position.clone(),o=this.orbitControls.target.clone().sub(i).normalize();t.set(i,o);const n=new L.Pq0;t.intersectPlane(e,n)?this.setFirstPersonControlsCameraPosition(new L.I9Y(n.x,n.z),fi(this.orbitControlsCamera)):console.error("Switch controls no intersection found"),this.switchToFirstPersonControls(),this.floorplanViewButtonRef&&this.floorplanViewButtonRef.current.classList.add("disabled")}else this.firstPersonControls.setEnabledStatus(!1),this.floorplanViewButtonRef&&this.floorplanViewButtonRef.current.classList.remove("disabled"),this.firstPersonControls.disposeCircleNavigator(),this.floorplanNavigationRef.current.setActiveStatus(!1),this.floorplan3DViewCamera=this.orbitControlsCamera,this.currentControls=this.orbitControls,this.cameraControlsRef.current.setCurrentControlsType("orbit"),this.updateWallsVisibility(),this.currentControls.setEnabledStatus(!0)}function Zr(){return!this.showMapLayer3DInputRef.current.getCheckedStatus()}function $r(e){const t=e.mesh.children.find((t=>t.name===ue[e.object2D.type].cameraLensMeshName)),i=e.cameraItemProperties.cameraLensMeshLensPosLocal.clone();t.localToWorld(i),this.firstPersonControlsCamera.position.copy(i);const o=e.cameraItemProperties.cameraLensMeshCenterLocal.clone();t.localToWorld(o);const n=i.clone(),s=bi(o,n),a=i.clone();a.add(s),this.firstPersonControlsCamera.lookAt(a),this.setCircleNavigatorFromFirstPersonControls(Tt(s.x,s.z,!1))}function Jr(e){const t=this.props.mainComponentThis.groundColor,i=parseInt(t.split("#").at(-1),16),o=new L.tcD(this.floorplanEnvironmentRadius,this.environmentCircleSegmentsCount),n=new L.G_z({color:16777215});n.color.setHex(i);const s=new L.eaF(o,n);s.rotation.x=-Math.PI/2,s.receiveShadow=!0,s.translateX(this.floorplanWallsObjectsBBoxCenterVector.x),s.translateY(-this.floorplanWallsObjectsBBoxCenterVector.z),s.translateZ(-5),e.add(s)}function Qr(e,t){if("color"===this.props.mainComponentThis.skyColorType)e.background=new L.Q1f(this.props.mainComponentThis.skyColor);else{const i="\n      varying vec3 vWorldPosition;\n  \n      void main() {\n  \n        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n        vWorldPosition = worldPosition.xyz;\n  \n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  \n      }",o="uniform vec3 topColorDay;\n          uniform vec3 bottomColorDay;\n          uniform vec3 topColorNight;\n          uniform vec3 bottomColorNight;\n          uniform float sunAltitude;\n          \n          varying vec3 vWorldPosition;\n  \n          // Function to adjust exposure\n          vec3 applyExposure(vec3 color, float exposure) {\n            return 1.0 - exp(-color * exposure);\n          }\n          \n          void main() {\n            float dayNightFactor = smoothstep(0.2, 1.0, 0.5 + 0.5 * cos(sunAltitude));\n          \n            vec3 topColor = mix(topColorDay, topColorNight, dayNightFactor);\n            vec3 bottomColor = mix(bottomColorDay, bottomColorNight, dayNightFactor);\n  \n            // Adjust the intensity using exposure control\n            float exposure = 15.0;  // Adjust this value for desired brightness\n            topColor = applyExposure(topColor, exposure);\n            bottomColor = applyExposure(bottomColor, exposure);\n        \n            float h = normalize(vWorldPosition).y;\n            gl_FragColor = vec4(mix(bottomColor, topColor, h), 1.0);\n          }",n={topColorDay:{value:new L.Q1f(.6,.8,1)},bottomColorDay:{value:new L.Q1f(.8,.9,1)},topColorNight:{value:new L.Q1f(0,.05,.2)},bottomColorNight:{value:new L.Q1f(0,0,.05)},offset:{value:33},exponent:{value:.6},sunAltitude:{value:Math.max(t.altitude,0)}},s=new L.Gu$(this.floorplanEnvironmentRadius,this.environmentCircleSegmentsCount,15);this.skyMaterial=new L.BKk({uniforms:n,vertexShader:i,fragmentShader:o,side:L.hsX});const a=new L.eaF(s,this.skyMaterial);a.translateX(this.floorplanWallsObjectsBBoxCenterVector.x),a.translateZ(this.floorplanWallsObjectsBBoxCenterVector.z),e.add(a)}}function el(){const e=this.createFloorplan3DXZPlaneBBoxPoints(this.floorplanWallsObjectsBoundingBox2DCoordinates),{maxXDist:t,maxZDist:i}=this.calculateMaxXMaxZOffsetsFromCenterPoint(this.floorplanWallsObjectsBBoxCenterVector,e),o=this.props.mainComponentThis.getHighestFloorData();this.floorplanEnvironmentRadius=Math.max((this.props.mainComponentThis.getFloorStartElevation(o.floorNumber)+2*o.floorHeight)*this.scaleFactor,6*this.floorplanEnvironmentRadiusScaleFactor*Math.max(t,i))}const tl=class{constructor(e,t,i,o,n){var s=this;this.setWallPlaneShadow=e=>{e.castShadow=!0,e.receiveShadow=!0},this.drawWall=()=>{let e=new L.YJl;this.drawWallExteriorAndInteriorPlanes(e),this.variableVisiblityPlanes.push(this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight+this.wallHeight,this.floorplan3DThis.wallTopPlaneMaterial,e)),this.fixedVisibilityPlanes.push(this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight+1,this.floorplan3DThis.wallBottomPlaneMaterial,e)),this.variableVisiblityPlanes.push(this.drawStartEndWallPlanes(this.interiorLineCoords[0],this.exteriorLineCoords[0],e)),this.variableVisiblityPlanes.push(this.drawStartEndWallPlanes(this.interiorLineCoords[1],this.exteriorLineCoords[1],e)),this.floorThicknessWallPart=this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight-this.floorplan3DThis.props.mainComponentThis.roomFloorVerticalOffset,this.floorplan3DThis.roomFloorDefaultMaterial,e,{depth:this.floorplan3DThis.props.mainComponentThis.floorThickness*this.floorplan3DThis.scaleFactor,bevelEnabled:!1}),this.floorThicknessWallPart.receiveShadow=!0,this.floorThicknessWallPart.castShadow=!1,this.wall3D=e,this.floorplan3DThis.isFloorHidden(this.floorNumber)&&(this.floorThicknessWallPart.visible=!1,this.setWallPlanesObjectsVisibility(!1,!1)),this.sceneObject.add(e),this.wall2D.alwaysHide?this.setWallPlanesObjectsVisibility(!1,!1):this.updateFrontWallVisibility()},this.drawExteriorInteriorPlane=(e,t,i,o,n,s,a)=>{let r=new L.Pq0(e.x,this.wallStartHeight,e.y),l=new L.Pq0(t.x,this.wallStartHeight,t.y),h=l.clone();h.y=this.wallStartHeight+this.wallHeight;let c=r.clone();c.y=this.wallStartHeight+this.wallHeight;let d=[r,l,h,c],p=Bt({x:r.x,y:r.z},{x:l.x,y:l.z});const{transform3Dto2DMatrix:m,transform2Dto3DMatrix:u}=this.calculateWallPlaneTransformMatrices(e,t);d.forEach((e=>e.applyMatrix4(m)));let g=new L.ypk(d.map((e=>new L.I9Y(e.x,e.y))));d.forEach((e=>e.applyMatrix4(u)));for(let y=0;y<n.length;y++)if("doorWindow"===n[y].class){let e,t,o=[];if(n[y].realBbox.forEach((e=>o.push(Wt(e,i)))),o.sort(((e,t)=>t.distance-e.distance)),o=o.slice(0,2).map((e=>e.projectedPoint)),this.floorplan3DThis.props.mainComponentThis.isFloorplanItemClassMember(n[y].type,"door")){const i=n[y].additionalParams.height3D*this.floorplan3DThis.scaleFactor;let s=new L.Pq0(o[0].x,this.wallStartHeight,o[0].y),a=new L.Pq0(o[1].x,this.wallStartHeight,o[1].y),r=a.clone();r.y=this.wallStartHeight+i;let l=s.clone();l.y=this.wallStartHeight+i,e=[s,a,r,l],e.forEach((e=>e.applyMatrix4(m))),t=e.map((e=>new L.I9Y(e.x,e.y)))}else{const i=n[y].additionalParams.height3D*this.floorplan3DThis.scaleFactor,s=(n[y].additionalParams.positionY+n[y].additionalParams.height3D/2)*this.floorplan3DThis.scaleFactor;let a=new L.Pq0(o[0].x,this.wallStartHeight+s-i/2,o[0].y),r=new L.Pq0(o[1].x,this.wallStartHeight+s-i/2,o[1].y),l=r.clone();l.y=this.wallStartHeight+s+i/2;let h=a.clone();h.y=this.wallStartHeight+s+i/2,e=[a,r,l,h],e.forEach((e=>e.applyMatrix4(m))),t=e.map((e=>new L.I9Y(e.x,e.y)))}g.holes.push(new L.wAk(t))}let f,b=new L.MSw(g),w=b.getAttribute("position"),C=new L.Pq0;for(let y=0;y<w.count;y++)C.fromBufferAttribute(w,y),C.applyMatrix4(u),w.setXYZ(y,C.x,C.y,C.z);w.needsUpdate=!0,b.computeVertexNormals(),b.scale(this.floorplan3DThis.scaleFactor,1,this.floorplan3DThis.scaleFactor);const x=this.wall2D[i===this.interiorLineEquation?"interiorPlaneMaterial":"exteriorPlaneMaterial"];if("Glass"!==x&&"Unknown"!==x&&T.isHexColor(x)){let e=r.clone();e.multiplyScalar(this.floorplan3DThis.scaleFactor);const t=t=>{const i=Bt({x:e.x,y:e.z},{x:t.x,y:t.z})/(p*this.floorplan3DThis.scaleFactor),o=t.y/this.wallHeight;return new L.I9Y(i,o)};this.floorplan3DThis.calculateShapeGeometryUVMappings(b,t);const i=Y.find((e=>e.title===x));f=this.floorplan3DThis.createTextureMaterial(this.floorplan3DThis.floorplanWallMaterials.find((e=>e.name===x)).textureData,o,{width:p*this.floorplan3DThis.scaleFactor,height:this.wallHeight,scaleWidthValue:i.width,scaleHeightValue:i.height})}else if("Glass"===x)f=new L.uSd,f.side=o,f.color=new L.Q1f(1,1,1),f.transmission=1,f.roughness=0,f.ior=1.7,f.thickness=.5,f.specularIntensity=1,f.clearcoat=1;else{let e;e="Unknown"===x?"#fefbf3":x,f=this.floorplan3DThis.props.mainComponentThis.isAddOnApp||this.floorplan3DThis.props.mainComponentThis.floorplanEnvironmentShouldPreview?new L.tXL({color:e,flatShading:!0,side:o}):new L.V9B({color:e,side:o})}let _=new L.eaF(b,f);return s.planeObject=_,s.planeObject.wall3D=this,this.setWallPlaneShadow(_),a.add(_),_},this.drawTopBottomWallPlanes=(e,t,i,o,n)=>{let s,a=[new L.I9Y(e[0].x*this.floorplan3DThis.scaleFactor,e[0].y*this.floorplan3DThis.scaleFactor),new L.I9Y(e[1].x*this.floorplan3DThis.scaleFactor,e[1].y*this.floorplan3DThis.scaleFactor),new L.I9Y(e[2].x*this.floorplan3DThis.scaleFactor,e[2].y*this.floorplan3DThis.scaleFactor),new L.I9Y(e[3].x*this.floorplan3DThis.scaleFactor,e[3].y*this.floorplan3DThis.scaleFactor)],r=new L.ypk(a);s=n?new L.QCA(r,n):new L.MSw(r);let l=new L.eaF(s,i);return l.rotation.set(Math.PI/2,0,0),l.position.y=t,this.setWallPlaneShadow(l),o.add(l),l},this.drawStartEndWallPlanes=(e,t,i)=>{let o=new Float32Array([e.x,this.wallStartHeight,e.y,t.x,this.wallStartHeight,t.y,t.x,this.wallStartHeight+this.wallHeight,t.y,e.x,this.wallStartHeight+this.wallHeight,e.y]),n=new L.LoY;n.setAttribute("position",new L.THS(o,3));n.setIndex([0,1,2,0,2,3]);let s=new L.eaF(n,this.floorplan3DThis.wallStartEndPlanesMaterial);return this.setWallPlaneShadow(s),s.scale.set(this.floorplan3DThis.scaleFactor,1,this.floorplan3DThis.scaleFactor),i.add(s),s},this.drawWallObjects=()=>{this.floorplan3DThis.getPanel3DFixedItemsOptions().forEach((e=>this.wall2DObjects.filter((t=>e.isTargetObjectMode(t.type))).forEach((t=>{"onWall"!==t.family&&"inWall"!==t.family&&console.error("Wall object family error");const i=this.floorplan3DThis.createFloorplanItem(this.sceneObject,e.objects3DArray,t.type,t,this.floorNumber,!1);this.onWallObjectDrawed(i)}))))},this.removeWallObjects=()=>{[...this.inWallItemObjects,...this.onWallItemObjects].forEach((e=>{this.removeWallObject(e,e.addToWall?"inWall":"onWall"),this.floorplan3DThis.removeFloorplanItem(e)}))},this.updateFrontWallVisibility=()=>{if(!this.callUpdateFrontWallVisibility||this.hideWall||this.wall2D.alwaysHide||this.floorplan3DThis.isFloorHidden(this.floorNumber))this.hideWall?this.setWallPlanesObjectsVisibility(!1):(this.wall2D.alwaysHide||this.floorplan3DThis.isFloorHidden(this.floorNumber))&&this.setWallPlanesObjectsVisibility(!1,!1);else{const e=new L.I9Y(this.wallStart.x,this.wallStart.y).multiplyScalar(this.floorplan3DThis.scaleFactor),t=new L.I9Y(this.wallEnd.x,this.wallEnd.y).multiplyScalar(this.floorplan3DThis.scaleFactor),i=t.x-e.x,o=t.y-e.y;let n=new L.Pq0(-o,0,i);n.normalize();const s=new L.Pq0;this.sceneObject===this.floorplan3DThis.floorplan3DOnMapScene?(s.copy(this.floorplan3DThis.floorplan3DOnMapCameraPosition),this.floorplan3DThis.processSceneVec3(s)):s.copy(this.floorplan3DThis.currentControls.object.position);let a=new L.Pq0((e.x+t.x)/2,this.wallStartHeight,(e.y+t.y)/2).clone().sub(s).clone(),r=n.dot(a)<=0;this.setWallPlanesObjectsVisibility(r)}},this.drawWallExteriorAndInteriorPlanes=e=>{new Array({planeLineCoords:this.interiorLineCoords,planeLineEquation:this.interiorLineEquation,planeAttributeObject:this.interiorWallPlane},{planeLineCoords:this.exteriorLineCoords,planeLineEquation:this.exteriorLineEquation,planeAttributeObject:this.exteriorWallPlane}).forEach((t=>this.variableVisiblityPlanes.push(this.drawExteriorInteriorPlane(t.planeLineCoords[0],t.planeLineCoords[1],t.planeLineEquation,L.$EB,this.wall2DObjects.filter((e=>"inWall"===e.family)),t.planeAttributeObject,e))))},this.calculateWallPlaneTransformMatrices=(e,t)=>{const i=this.floorplan3DThis.calculateAngleBetween2DVectors(1,0,t.x-e.x,t.y-e.y);let o=new L.kn4,n=new L.kn4,s=new L.kn4,a=new L.kn4;return a.makeRotationY(-i),s.makeTranslation(-e.x,0,-e.y),o.multiplyMatrices(a,s),n=o.clone().invert(),{transform3Dto2DMatrix:o,transform2Dto3DMatrix:n}},this.setWallPlanesObjectsVisibility=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(s.wall2D.alwaysHide||s.floorplan3DThis.isFloorHidden(s.floorNumber))&&(e=!1,t=!1);let i=[...s.variableVisiblityPlanes];t||i.push(...s.fixedVisibilityPlanes);for(let n=0;n<i.length;n++)i[n].visible=e;const o=[...s.inWallItemObjects,...s.onWallItemObjects];for(let n=0;n<o.length;n++)o[n].object2D.additionalParams.hideWithWall?o[n].setVisibilityStatus(e):o[n].setVisibilityStatus(!0)},this.setExteriorInteriorPlanesOpacity=e=>{new Array(this.interiorWallPlane.planeObject,this.exteriorWallPlane.planeObject).forEach((t=>{t.material.opacity=e,t.material.transparent=100!==e,t.material.needsUpdate=!0}))},this.interiorLineCoords=[],this.exteriorLineCoords=[],this.interiorLineEquation=i.equations.up,this.exteriorLineEquation=i.equations.down,this.wallStart=i.start,this.wallEnd=i.end,this.wall2D=i,this.wall2DObjects=o,this.wall3D=null,this.inWallItemObjects=[],this.onWallItemObjects=[],this.variableVisiblityPlanes=[],this.fixedVisibilityPlanes=[],this.floorThicknessWallPart=null,this.interiorWallPlane={},this.exteriorWallPlane={},this.sceneObject=t,this.callUpdateFrontWallVisibility=!0,this.hideWall=!1,this.floorNumber=n,this.wallHeight=i.wallHeight*e.scaleFactor,this.wallStartHeight=e.props.mainComponentThis.getFloorStartElevation(n,!0),this.floorplan3DThis=e;const a=wt(i,this.floorplan3DThis.isPointOnWallDecimalPrecision);this.interiorLineCoords=a.interiorLineCoords,this.exteriorLineCoords=a.exteriorLineCoords,2===this.interiorLineCoords.length&&2===this.exteriorLineCoords.length&&this.drawWall()}onWallObjectDrawed(e){const t="inWall"===e.object2D.family?this.inWallItemObjects:this.onWallItemObjects;t.find((t=>t.object2D.id===e.object2D.id))||(t.push(e),this.hideWall||this.wall2D.alwaysHide?e.setVisibilityStatus(!1):this.updateFrontWallVisibility())}addWallObject(e,t){if(!this.wall2DObjects.find((t=>t.id===e.object2D.id))){console.log("addWallObject",e),this.wall2DObjects.push(e.object2D);("inWall"===t?this.inWallItemObjects:this.onWallItemObjects).push(e)}}removeWallObject(e,t){console.log("removeWallObject"),this.wall2DObjects=this.wall2DObjects.filter((t=>t.id!==e.object2D.id));const i="inWall"===t?this.inWallItemObjects:this.onWallItemObjects,o=i.findIndex((t=>t.object2D.id===e.object2D.id));-1!==o&&i.splice(o,1)}getWallItemObject(e,t){return("inWall"===t?this.inWallItemObjects:this.onWallItemObjects).find((t=>t.object2D.id===e.id))}redrawWallExteriorInteriorPlanes(){console.log("redrawWallExteriorInteriorPlanes"),this.variableVisiblityPlanes=this.variableVisiblityPlanes.filter((e=>e.uuid!==this.interiorWallPlane.planeObject.uuid||e.uuid!==this.exteriorWallPlane.planeObject.uuid)),new Array(this.interiorWallPlane.planeObject,this.exteriorWallPlane.planeObject).forEach((e=>{this.wall3D.remove(e),hi(e)})),this.drawWallExteriorAndInteriorPlanes(this.wall3D),100!==this.floorplan3DThis.wallsOpacityRef.current.getWallsOpacityValue()&&this.setExteriorInteriorPlanesOpacity(this.floorplan3DThis.wallsOpacityRef.current.getWallsOpacityValue()/100),this.updateFrontWallVisibility()}removeWall(){this.sceneObject.remove(this.wall3D),hi(this.wall3D),this.removeWallObjects()}};function il(e){const t=this.getPanel3DFixedItemsOptions();for(let n=0;n<this.floorplanFloors.length;n++){for(let e=0;e<this.floorplanFloors[n].wallData.length;e++){[this.floorplanFloors[n].wallData[e].interiorPlaneMaterial,this.floorplanFloors[n].wallData[e].exteriorPlaneMaterial].forEach((e=>{"Glass"!==e&&"Unknown"!==e&&T.isHexColor(e)&&!this.floorplanWallMaterials.find((t=>t.name===e))&&this.floorplanWallMaterials.push({name:e,textureData:null})}))}for(let e=0;e<this.floorplanFloors[n].roomData.length;e++)this.floorplanFloors[n].roomData[e].roomFloorType&&"pattern"!==this.floorplanFloors[n].roomData[e].roomFloorType||"none"===this.floorplanFloors[n].roomData[e].floorTexture||this.roomFloorTextures.find((t=>t.name===this.floorplanFloors[n].roomData[e].floorTexture))||this.roomFloorTextures.push({name:this.floorplanFloors[n].roomData[e].floorTexture,textureData:null});const i=this.getFloorplanFloorDrawingObjData(this.floorplanFloors[n]).filter((e=>!_e[e.type]));t.forEach((e=>{const t=i.filter((t=>e.isTargetObjectMode(t.type)));for(let i=0;i<t.length;i++)e.objects3DArray.find((e=>e.floorplanItemType===t[i].type))||e.objects3DArray.push({object2D:t[i],floorplanItemType:t[i].type,object:null,sizeVector:null})})),e&&e(this.floorplanFloors[n])}let i=[],o=[];return t.forEach((e=>{let t=[];const n=e.objects3DArray.filter((e=>null===e.object));for(let o=0;o<n.length;o++)"onWall"===n[o].object2D.family||"inWall"===n[o].object2D.family?i.push(n[o]):t.push(n[o]);o.push({panelItemsOption3D:e,panelItemsOptionFreeItemsToLoad:t})})),{wallMaterialsLoadNeeded:this.floorplanWallMaterials.find((e=>!e.textureData)),roomFloorsTexturesLoadNeeded:this.roomFloorTextures.find((e=>!e.textureData)),wallObjectsToLoad:i,panelFixedItemsOptionsToLoadData:o}}function ol(e,t,i,o){t.panelFixedItemsOptionsToLoadData.forEach((t=>{t.panelItemsOptionFreeItemsToLoad.length>0?t.panelItemsOptionFreeItemsToLoad.forEach((i=>this.loadFloorplanItemObject3D(i,t.panelItemsOption3D.loadingObjectsStatuses,!0,(()=>this.drawPanel3DOptionFloorplanFreeItems(e,t.panelItemsOption3D))))):this.drawPanel3DOptionFloorplanFreeItems(e,t.panelItemsOption3D)}));const n=this.props.mainComponentThis.isAddOnApp?"https://app.klet3d.com":"";if(t.wallMaterialsLoadNeeded&&this.floorplanWallMaterials.forEach((t=>this.loadTexture(t,this.loadingWallMaterialsStatuses,(()=>`${n}/wallMaterials/${t.name}.png`),(()=>{this.drawFloorplanFloorsWalls(e),e===this.floorplan3DViewScene&&(this.floorplanViewWalls3D=[...this.currentWalls3D]),Nt(this.loadingWallObjectsStatuses)&&this.drawFloorplanFloorsWallObjects(e)})))),t.wallObjectsToLoad.length>0&&t.wallObjectsToLoad.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingWallObjectsStatuses,!0,(()=>{Nt(this.loadingWallMaterialsStatuses)&&this.drawFloorplanFloorsWallObjects(e)})))),t.roomFloorsTexturesLoadNeeded?this.roomFloorTextures.forEach((t=>this.loadTexture(t,this.loadingRoomFloorTexturesStatuses,(()=>`${n}/textures/${t.name}.png`),(()=>this.drawFloorplanRoomFloors(e))))):this.drawFloorplanRoomFloors(e),i){let t=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1),this.fontLoader.load("https://cdn.jsdelivr.net/gh/mrdoob/three.js@master/examples/fonts/droid/droid_sans_regular.typeface.json",(i=>{this.textFont=i,this.loadingCallbacksStatuses[t]=!0,this.createFloorplanTimeMesh(e,this.calculateCurrentDate()),o&&o(),this.isInitialLoadingFinished()}))}else o&&o();t.wallMaterialsLoadNeeded||(this.drawFloorplanFloorsWalls(e),e===this.floorplan3DViewScene&&(this.floorplanViewWalls3D=[...this.currentWalls3D])),t.wallObjectsToLoad.length||this.drawFloorplanFloorsWallObjects(e),this.isInitialLoadingFinished()}function nl(e,t,i,o,n,s,a){let r=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=this.props.mainComponentThis.panelDrawingOptions2D.find((e=>e.fixedSelectedTypeValue&&e.fixedSelectedTypeValue===n));let h;h=l?l.panelOptionAdditionalOptionsData.choiceOptions.find((e=>e.value===o.additionalParams.choiceOptionValue)).itemType:this.props.mainComponentThis.getObjectItemType(n);const c=new Z[h](e,t,i,o,n,s,this,a,r);return c.initObject(),c}function sl(e){e.remove(),this.userInteractionCurrentController.itemRemoved(e)}function al(e){this.currentWalls3D=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorWalls(e,this.floorplanFloors[t].wallData,this.floorplanFloors[t].floorNumber,this.currentWalls3D)}function rl(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];for(let s=0;s<t.length;s++){let a=new tl(this,e,t[s],this.props.mainComponentThis.editor.objFromWall(t[s],this.getFloorplanFloorDrawingObjData(this.floorplanFloors.find((e=>e.floorNumber===i)))),i);a.wall3D?(o.push(a),n&&a.drawWallObjects()):a=null}100!==this.wallsOpacityRef.current.getWallsOpacityValue()&&this.changeWallMaterialOpacity(o,this.wallsOpacityRef.current.getWallsOpacityValue()),!this.wallsVisibilityOptionsRef.current.getShowWallSwitchState()&&this.wallsVisibilityOptionsRef.current.hideFloorplanWalls(o),this.wallsVisibilityOptionsRef.current.getFrontWallsSwitchState()&&this.wallsVisibilityOptionsRef.current.showFrontFloorplanWalls(o)}function ll(){for(let e=0;e<this.currentWalls3D.length;e++)this.currentWalls3D[e].drawWallObjects()}function hl(e){this.currentRoomFloors=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorRoomFloors(e,this.floorplanFloors[t],this.currentRoomFloors)}function cl(e,t,i){const o=[{name:"Room floor",translateZ:-this.props.mainComponentThis.getFloorStartElevation(t.floorNumber,!0),castShadow:!1,receiveShadow:!0,floorNumber:t.floorNumber}],n=this.props.mainComponentThis.isAddOnApp?"coordsOutsideWithOrphans":"coordsInsideWithOrphans";for(let s=0;s<t.roomData.length;s++){let a=[];for(let e=0;e<t.roomData[s][n].length;e++)a.push(new L.I9Y(t.roomData[s][n][e].x,t.roomData[s][n][e].y).multiplyScalar(this.scaleFactor));let r,l=new L.ypk(a),h=new L.MSw(l);for(let n=0;n<o.length;n++){if(o[n].material)r=o[n].material;else if(t.roomData[s].roomFloorType&&"pattern"!==t.roomData[s].roomFloorType||"none"===t.roomData[s].floorTexture)r="color"===t.roomData[s].roomFloorType?new L.tXL({side:L.$EB,color:t.roomData[s].floorColor}):this.roomFloorDefaultMaterial;else{const e=Yt(a),i={width:e.width,height:e.height,scaleWidthValue:Ge[t.roomData[s].floorTexture].width,scaleHeightValue:Ge[t.roomData[s].floorTexture].height},o=t=>{const i=(t.x-e.minX)/e.width,o=(e.maxY-t.y)/e.height;return new L.I9Y(Math.min(1,Math.max(0,i)),Math.min(1,Math.max(0,o)))};this.calculateShapeGeometryUVMappings(h,o),r=this.createTextureMaterial(this.roomFloorTextures.find((e=>e.name===t.roomData[s].floorTexture)).textureData,L.hsX,i,t.roomData[s].floorTextureRepeatCount)}const c=new L.eaF(h,r);c.rotation.set(Math.PI/2,0,0),c.translateZ(o[n].translateZ),i.push(c),c.receiveShadow=o[n].receiveShadow,c.castShadow=o[n].castShadow,c.name=o[n].name,c.floorNumber=o[n].floorNumber,"Room roof"!==o[n].name&&(c.roomID=t.roomData[s].id),c.isNoneFloorType="none"===t.roomData[s].roomFloorType,(this.isFloorHidden(t.floorNumber)||c.isNoneFloorType)&&(c.visible=!1),e.add(c);const d=new L.eaF(new L.QCA(l,{depth:this.props.mainComponentThis.floorThickness*this.scaleFactor,bevelEnabled:!1}),this.roomFloorDefaultMaterial);d.receiveShadow=!0,d.castShadow=!1,d.rotation.set(Math.PI/2,0,0),d.translateZ(o[n].translateZ+this.props.mainComponentThis.roomFloorVerticalOffset),c.thickMesh=d,(this.isFloorHidden(t.floorNumber)||c.isNoneFloorType)&&(d.visible=!1),e.add(d)}}}function dl(e,t){t.currentViewArray=[];for(let i=0;i<this.floorplanFloors.length;i++)this.drawPanel3DOptionFloorFreeItems(e,this.filterPanel3DOptionFreeItemsObjData(this.getFloorplanFloorDrawingObjData(this.floorplanFloors[i]),t),this.floorplanFloors[i].floorNumber,t.objects3DArray,t.currentViewArray)}function pl(e,t,i,o,n){for(let s=0;s<t.length;s++)n.push(this.createFloorplanItem(e,o,t[s].type,t[s],i,!1))}function ml(e){let t=[{scene:this.floorplan3DViewScene,walls3DArray:this.floorplanViewWalls3D}];this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&t.push({scene:this.floorplan3DOnMapScene,walls3DArray:this.currentWalls3D,isMapScene:!0}),t.forEach((t=>{const i=t.scene.getObjectsByProperty("isFloorplanItem",!0).filter((t=>t.itemObject.floorNumber===e.floorNumber));for(let e=0;e<i.length;e++)this.removeFloorplanItem(i[e].itemObject);const o=t.walls3DArray.filter((t=>t.floorNumber===e.floorNumber));for(let e=0;e<o.length;e++)o[e].removeWallObjects();for(let n=0;n<o.length;n++)o[n].wall2DObjects=this.props.mainComponentThis.editor.objFromWall(o[n].wall2D,e.objData),o[n].drawWallObjects();this.getPanel3DFixedItemsOptions().forEach((i=>{const o=t.isMapScene?"currentViewArray":"floorplanViewArray";i[o]=i[o].filter((t=>t.floorNumber!==e.floorNumber)),this.drawPanel3DOptionFloorFreeItems(t.scene,this.filterPanel3DOptionFreeItemsObjData(e.objData,i),e.floorNumber,i.objects3DArray,i[o])}))}))}function ul(e){this.removeFloorplanFloorItems(this.floorplan3DViewScene,e,"floorplanViewWalls3D","floorplanViewRoomFloors"),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?this.removeFloorplanFloorItems(this.floorplan3DOnMapScene,e,"currentWalls3D","currentRoomFloors",!0):this.setCurrentFromFloorplanArrays()}function gl(e,t,i,o,n){this[i]=this[i].filter((e=>e.floorNumber!==t||(e.removeWall(),!1)));let s=[t];this[o]=this[o].filter((t=>!s.includes(t.floorNumber)||(e.remove(t.thickMesh),hi(t.thickMesh),e.remove(t),hi(t),!1)));const a=n?"currentViewArray":"floorplanViewArray";this.getPanel3DFixedItemsOptions().forEach((e=>{e[a]=e[a].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1)))}))}function fl(e){this.addFloorplanFloorItems(this.floorplan3DViewScene,e,this.floorplanViewWalls3D,this.floorplanViewRoomFloors),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?this.addFloorplanFloorItems(this.floorplan3DOnMapScene,e,this.currentWalls3D,this.currentRoomFloors,!0):this.setCurrentFromFloorplanArrays()}function bl(e,t,i,o,n){this.drawFloorWalls(e,t.wallData,t.floorNumber,i,!0),this.drawFloorRoomFloors(e,t,o);const s=n?"currentViewArray":"floorplanViewArray";this.getPanel3DFixedItemsOptions().forEach((i=>this.drawPanel3DOptionFloorFreeItems(e,this.filterPanel3DOptionFreeItemsObjData(t.objData,i),t.floorNumber,i.objects3DArray,i[s])))}function wl(e){const t=this.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();return t&&t.floorNumber===e.floorNumber?this.props.mainComponentThis.OBJDATA:e.objData}const Cl=class{constructor(e){this.scene=e,this.selectedItem=null,this.rotating=!1,this.mouseover=!1,this.height=5,this.distance=20,this.color="#000000",this.hoverColor="#f1c40f",this.activeObject=null}getScene(){return this.scene}getObject(){return this.activeObject}resetSelectedItem(){this.selectedItem=null,this.activeObject&&(this.scene.remove(this.activeObject),this.activeObject=null)}itemSelected(e){this.selectedItem!=e&&(this.resetSelectedItem(),e.allowRotate&&!e.fixed&&(this.selectedItem=e,this.activeObject=this.makeObject(this.selectedItem),this.scene.add(this.activeObject)))}itemUnselected(){this.resetSelectedItem()}setRotating(e){this.rotating=e,this.setColor()}setMouseover(e){this.mouseover=e,this.setColor()}setColor(){this.activeObject&&this.activeObject.children.forEach((e=>{e.material.color.set(this.getColor())}))}getColor(){return this.mouseover||this.rotating?this.hoverColor:this.color}update(){if(this.activeObject){this.activeObject.rotation.y=this.selectedItem.rotation;const e=this.selectedItem.getItemCenter();this.activeObject.position.x=e.x,this.activeObject.position.z=e.z}}makeLineGeometry(e){const t=new L.LoY,i=this.rotateVector(e),o=new Float32Array([0,0,0,i.x,i.y,i.z]),n=new L.THS(o,3);return t.setAttribute("position",n),t}rotateVector(e){return new L.Pq0(0,0,Math.max(e.halfSize.x,e.halfSize.z)+1.4+this.distance)}makeLineMaterial(){return new L.mrM({color:this.getColor(),linewidth:3})}makeCone(e){var t=new L.Ho_(5,0,10),i=new L.V9B({color:this.getColor()}),o=new L.eaF(t,i);return o.position.copy(this.rotateVector(e)),o.rotation.x=-Math.PI/2,o}makeSphere(){var e=new L.Gu$(4,16,16),t=new L.V9B({color:this.getColor()});return new L.eaF(e,t)}makeObject(e){var t=new L.B69,i=new L.DXC(this.makeLineGeometry(e),this.makeLineMaterial(this.rotating)),o=this.makeCone(e),n=this.makeSphere(e);t.add(i),t.add(o),t.add(n),t.rotation.y=e.rotation;const s=e.getItemCenter();return t.position.x=s.x,t.position.z=s.z,t.position.y=s.y-e.halfSize.y+this.height,t}updateHUDVerticalPosition(){this.activeObject&&this.selectedItem&&(this.activeObject.position.y=this.selectedItem.getItemCenter().y-this.selectedItem.halfSize.y+this.height)}};const xl=class{constructor(e,t,i,o){var n=this;this.mouseMoveEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.enabled){e.preventDefault(),n.mouseDownItemSelected=!1,n.setSelectItemLongPressData(null),n.mouseMoved=!0,n.mouse.x=t?e.touches[0].clientX:e.clientX,n.mouse.y=t?e.touches[0].clientY:e.clientY;const i=n.floorplan3DThis.getSelectedDrawingOption();if(n.floorplan3DThis.selectedFloorplanItemType&&i&&"select"!==i.value&&!n.itemBinder){let e,t;const o=n.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();if(J.includes(n.floorplan3DThis.props.mainComponentThis.getObjectItemType(n.floorplan3DThis.selectedFloorplanItemType))&&(e=[],n.floorplan3DThis.currentWalls3D.filter((e=>e.floorNumber===o.floorNumber)).forEach((t=>{e.push(t.interiorWallPlane.planeObject),e.push(t.exteriorWallPlane.planeObject)})),n.previousItemBinder&&e.push(n.previousItemBinder.mesh),t=n.getIntersections(new L.I9Y(n.mouse.x,n.mouse.y),e,!0,!0)[0]),t||(t=n.getIntersections(new L.I9Y(n.mouse.x,n.mouse.y),n.intersectionGround,!1,!1),t&&(t=t[0])),!t)return;n.floorplan3DThis.processSceneVec3(t.point);const s=n.floorplan3DThis.props.mainComponentThis.calcul_snap_inverse(t.point.x/n.floorplan3DThis.scaleFactor,t.point.z/n.floorplan3DThis.scaleFactor);i.createBinderMethod({pageX:s.screenX,pageY:s.screenY}),n.floorplan3DThis.props.mainComponentThis.binder&&(n.previousItemBinder&&(n.previousItemBinder.object2D.cloneProperties(n.floorplan3DThis.props.mainComponentThis.binder),n.floorplan3DThis.props.mainComponentThis.binder.update(n.floorplan3DThis.props.mainComponentThis)),"inWall"!==n.floorplan3DThis.props.mainComponentThis.binder.family&&"onWall"!==n.floorplan3DThis.props.mainComponentThis.binder.family||n.floorplan3DThis.props.mainComponentThis.setWallItemObjOriginalWidth(n.floorplan3DThis.props.mainComponentThis.binder),n.createItemBinder(i.objects3DArray,n.floorplan3DThis.props.mainComponentThis.binder))}switch(n.mouseDown||(n.updateIntersections(),!n.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&n.floorplan3DThis.currentControls===n.floorplan3DThis.firstPersonControls&&n.floorplan3DThis.firstPersonControls.updateCircleNavigator(n.rotateMouseOver||n.intersectedObject,n.isTouchScreen?[]:n.getWallsIntersections(n.mouse),n.getIntersections(n.mouse,n.intersectionGround,!1,!1))),n.state){case n.states.UNSELECTED:case n.states.SELECTED:n.updateMouseover();break;case n.states.DRAGGING:case n.states.ROTATING:case n.states.ROTATING_FREE:n.clickDragged(),n.floorplan3DThis.floorplanItemCurrentHUDObject.update(),n.needsUpdate=!0}}},this.isRotating=()=>this.state==this.states.ROTATING||this.state==this.states.ROTATING_FREE,this.mouseDownEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.enabled&&(0===e.button||t))switch(e.preventDefault(),n.mouseMoved=!1,n.mouseDown=!0,n.state){case n.states.SELECTED:n.rotateMouseOver?n.switchState(n.states.ROTATING):null!=n.intersectedObject&&(n.intersectedObject!==n.selectedObject&&n.floorplan3DThis.onFloorplanItemUnselect(),n.setSelectedObject(n.intersectedObject),n.mouseDownItemSelected=!0,n.setSelectItemLongPressData(n.intersectedObject),n.intersectedObject.fixed||(n.intersectedObject.isWallItem&&n.floorplan3DThis.props.mainComponentThis.setWallItemObjOriginalWidth(n.intersectedObject.object2D),n.switchState(n.states.DRAGGING)));break;case n.states.UNSELECTED:null!=n.intersectedObject&&(n.setSelectedObject(n.intersectedObject),n.mouseDownItemSelected=!0,n.setSelectItemLongPressData(n.intersectedObject),n.intersectedObject.fixed||(n.intersectedObject.isWallItem&&n.floorplan3DThis.props.mainComponentThis.setWallItemObjOriginalWidth(n.intersectedObject.object2D),n.switchState(n.states.DRAGGING)));break;case n.states.DRAGGING:case n.states.ROTATING:break;case n.states.ROTATING_FREE:n.switchState(n.states.SELECTED)}},this.mouseUpEvent=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.enabled&&(n.setSelectItemLongPressData(null),0===e.button||t)){n.mouseDown=!1;const t=n.floorplan3DThis.getSelectedDrawingOption();if(n.itemBinder&&t&&"select"!==t.value)n.floorplan3DThis.props.mainComponentThis.handleMouseUp(n.api)(e),n.itemBinder.isWallItem?n.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&n.floorplan3DThis.createFloorplanItem(n.floorplan3DThis.floorplan3DViewScene,t.objects3DArray,n.itemBinder.objectType,n.itemBinder.object2D,n.itemBinder.floorNumber):n.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?(t.currentViewArray.push(n.itemBinder),t.floorplanViewArray.push(n.floorplan3DThis.createFloorplanItem(n.floorplan3DThis.floorplan3DViewScene,t.objects3DArray,n.itemBinder.objectType,n.itemBinder.object2D,n.itemBinder.floorNumber))):t.floorplanViewArray.push(n.itemBinder),n.switchState(n.states.UNSELECTED),n.previousItemBinder=n.itemBinder,n.itemBinder=null;else switch(n.mouseDownItemSelected&&(n.floorplan3DThis.props.mainComponentThis.isAddOnApp&&n.floorplan3DThis.selectedUserMode!==n.floorplan3DThis.editModeValue?n.selectedObject&&(await n.floorplan3DThis.getFloorplanItemChangeStateOnClick(n.selectedObject.mesh)(n.selectedObject.mesh),n.setSelectedObject(null),n.intersectedObject=null,n.updateMouseover()):n.floorplan3DThis.onFloorplanItemSelect(n.selectedObject,n.api)),n.state){case n.states.DRAGGING:if(n.selectedObject.clickReleased(),n.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&!n.selectedObject.isWallItem){const e=n.floorplan3DThis.getFloorplanViewSceneItem(n.selectedObject.object2D);e&&e.moveToPosition(n.selectedObject.getItemCenter())}n.switchState(n.states.SELECTED);break;case n.states.ROTATING:if(n.mouseMoved){if(n.selectedObject.clickReleased(),n.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()){const e=n.floorplan3DThis.getFloorplanViewSceneItem(n.selectedObject.object2D);e&&e.rotateItem(f(n.selectedObject.object2D.angle),-1)}n.switchState(n.states.SELECTED)}else n.switchState(n.states.ROTATING_FREE);break;case n.states.UNSELECTED:n.mouseMoved||n.checkWallsAndFloors();break;case n.states.SELECTED:null!=n.intersectedObject||n.mouseMoved||(n.switchState(n.states.UNSELECTED),n.checkWallsAndFloors());case n.states.ROTATING_FREE:}}},this.touchStartEvent=e=>{this.isTouchScreen=!0,this.floorplan3DThis.props.mainComponentThis.isAddOnApp&&(this.mouseMoveEvent(e,!0),this.mouseDownEvent(e,!0),this.updateMouseover())},this.touchEndEvent=e=>{this.mouseUpEvent(e,!0)},this.enabled=!0,this.scene=e,this.container=t,this.api=i,this.raycaster=new L.tBo,this.floorplan3DThis=o,this.itemBinder=null,this.previousItemBinder=null,this.mouse=new L.I9Y,this.intersectedObject=null,this.mouseoverObject=null,this.selectedObject=null,this.mouseDown=!1,this.mouseDownItemSelected=!1,this.selectedItemLongPressData={periodMs:2e3,selectionTimestamp:null,item:null,timeout:null},this.mouseMoved=!1,this.isTouchScreen=!1,this.rotateMouseOver=!1,this.states={UNSELECTED:0,SELECTED:1,DRAGGING:2,ROTATING:3,ROTATING_FREE:4,PANNING:5},this.state=this.states.UNSELECTED,this.needsUpdate=!0,this.container.addEventListener("mousemove",this.mouseMoveEvent,!1),this.container.addEventListener("mousedown",this.mouseDownEvent,!1),this.container.addEventListener("mouseup",this.mouseUpEvent,!1),this.container.addEventListener("touchstart",this.touchStartEvent,!0),this.container.addEventListener("touchend",this.touchEndEvent,!1),this.intersectionGround=new L.eaF(new L.bdM(4*this.floorplan3DThis.floorplanEnvironmentRadius,4*this.floorplan3DThis.floorplanEnvironmentRadius),new L.V9B({color:16711680})),this.intersectionGround.rotation.x=-Math.PI/2,this.intersectionGround.translateX(this.floorplan3DThis.floorplanWallsObjectsBBoxCenterVector.x),this.intersectionGround.translateY(-this.floorplan3DThis.floorplanWallsObjectsBBoxCenterVector.z),this.intersectionGround.visible=!1,this.scene.add(this.intersectionGround)}setSelectItemLongPressData(e){e?(this.selectedItemLongPressData.item=e,this.selectedItemLongPressData.selectionTimestamp=Date.now(),this.selectedItemLongPressData.timeout=setTimeout((()=>{this.selectedItemLongPressData.item&&this.selectedItemLongPressData.item.object2D.id===e.object2D.id&&(this.floorplan3DThis.selectedItemLongPressHandler&&this.floorplan3DThis.selectedItemLongPressHandler(this.selectedItemLongPressData.item),this.setSelectItemLongPressData(null),this.setSelectedObject(null),this.intersectedObject=null,this.updateMouseover(),this.mouseDownItemSelected=!1,this.floorplan3DThis.currentControls.resetState())}),this.selectedItemLongPressData.periodMs)):(this.selectedItemLongPressData.item=null,this.selectedItemLongPressData.selectionTimestamp=null,this.selectedItemLongPressData.timeout&&clearTimeout(this.selectedItemLongPressData.timeout))}removeItemBinder(){this.itemBinder&&(this.itemBinder.remove(),this.itemBinder.clickReleased(),this.itemRemoved(this.itemBinder),this.itemBinder=null,this.previousItemBinder=null,this.floorplan3DThis.props.mainComponentThis.removeBinder(),this.floorplan3DThis.props.mainComponentThis.previousFloorplanItemBinder=null)}createItemBinder(e,t){this.itemBinder=this.floorplan3DThis.createFloorplanItem(this.scene,e,this.floorplan3DThis.selectedFloorplanItemType,t,this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D().floorNumber,!1),this.itemLoaded(this.itemBinder)}setCursorStyle(e){this.container.style.cursor=e}itemLoaded(e){this.setSelectedObject(e),this.switchState(this.states.DRAGGING),this.clickPressed()}itemRemoved(e){e===this.selectedObject&&(this.selectedObject.setUnselected(),this.selectedObject.mouseOff(),this.switchState(this.states.UNSELECTED))}clickPressed(e){e=e||this.mouse;var t=this.itemIntersection(e,this.selectedObject);t&&this.selectedObject.clickPressed(t)}clickDragged(e){e=e||this.mouse;var t=this.itemIntersection(e,this.selectedObject);t&&(this.isRotating()?this.selectedObject.rotate(t):this.selectedObject.clickDragged(t,this.mouseDown))}getWallsIntersections(e){const t=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();var i=[];return(this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?this.floorplan3DThis.currentWalls3D:this.floorplan3DThis.floorplanViewWalls3D).filter((e=>e.floorNumber===t.floorNumber)).forEach((e=>{i.push(e.interiorWallPlane.planeObject),i.push(e.exteriorWallPlane.planeObject)})),this.getIntersections(e,i,!0,!1)}checkWallsAndFloors(){if(this.state==this.states.UNSELECTED&&null==this.mouseoverObject){const s=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();var e=this.getWallsIntersections(this.mouse);if(e.length>0){var t=e[0].object.wall3D;return void console.log("Wall clickedd",t)}var i=this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?this.floorplan3DThis.currentRoomFloors:this.floorplan3DThis.floorplanViewRoomFloors,o=this.getIntersections(this.mouse,i.filter((e=>e.floorNumber===s.floorNumber)),!0,!1);if(o.length>0){var n=o[0].object;return void console.log("Room clicked",n)}this.floorplan3DThis.userInteractionControlerNothingClickedReset()}}switchState(e){e!=this.state&&(this.onExit(this.state),this.onEntry(e)),this.state=e,this.floorplan3DThis.floorplanItemCurrentHUDObject.setRotating(this.isRotating())}onEntry(e){switch(e){case this.states.UNSELECTED:this.setSelectedObject(null);break;case this.states.SELECTED:this.setSceneControlsState(!0);break;case this.states.ROTATING:case this.states.ROTATING_FREE:this.intersectionGround.position.y=this.floorplan3DThis.floorplanItemCurrentHUDObject.getObject().position.y,this.setSceneControlsState(!1);break;case this.states.DRAGGING:this.setCursorStyle("move"),this.clickPressed(),this.setSceneControlsState(!this.mouseDown)}}onExit(e){switch(e){case this.states.UNSELECTED:case this.states.SELECTED:break;case this.states.DRAGGING:this.mouseoverObject?this.setCursorStyle("pointer"):this.setCursorStyle("auto");break;case this.states.ROTATING:case this.states.ROTATING_FREE:this.intersectionGround.position.y=this.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D().floorNumber,!0)}}updateIntersections(){var e=this.floorplan3DThis.floorplanItemCurrentHUDObject.getObject();if(null!=e&&((!this.floorplan3DThis.props.mainComponentThis.isAddOnApp||this.floorplan3DThis.props.mainComponentThis.isAddOnApp&&this.floorplan3DThis.selectedUserMode===this.floorplan3DThis.editModeValue)&&this.getIntersections(this.mouse,e,!0,!0).length>0))return this.rotateMouseOver=!0,this.floorplan3DThis.floorplanItemCurrentHUDObject.setMouseover(!0),void(this.intersectedObject=null);this.rotateMouseOver=!1,this.floorplan3DThis.floorplanItemCurrentHUDObject.setMouseover(!1);const t=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();this.intersectedObject=null;let i=[];const o=this.scene.getObjectsByProperty("floorplanItemBoxSelector",!0).filter((e=>e.itemObject.floorNumber===t.floorNumber));if(i=this.getIntersections(this.mouse,o,!1,!0),!i.length){const e=this.scene.getObjectsByProperty("isFloorplanItem",!0).filter((e=>e.itemObject.floorNumber===t.floorNumber));i=this.getIntersections(this.mouse,e,!0,!0)}if(i.length>0)this.intersectedObject=this.resolveIntersectedItemObject(this.getIntersectionFloorplanItemObject(i[0].object),i[0]);else if(this.floorplan3DThis.props.mainComponentThis.isAddOnApp){let e=[];this.scene.getObjectsByProperty("isUnfixedItem",!0).forEach((t=>e.push(...t.itemObject.getUnfixedItemIntersections())));const t=this.getIntersections(this.mouse,e,!0,!0);if(t.length>0){const e=(e=>{let t,i;for(let o=0;o<e.length;o++)"background_mesh"===e[o].object.type?t=e[o]:"room_mesh"===e[o].object.type&&(i=e[o]);return t&&i&&("background_mesh"===e[0].object.type||"room_mesh"===e[0].object.type)?i:e[0]})(t);this.intersectedObject=this.resolveIntersectedItemObject(this.getIntersectionUnfixedItemObject(e.object),e),this.intersectedObject&&(this.intersectedObject.raycastedObject=e.object)}}}getIntersectionFloorplanItemObject(e){if(e.isFloorplanItem||e.floorplanItemBoxSelector)return e.itemObject;let t=e.parent;for(;!t.isFloorplanItem&&!t.floorplanItemBoxSelector;)t=t.parent;return t.itemObject}getIntersectionUnfixedItemObject(e){if(e.itemObject)return e.itemObject}resolveIntersectedItemObject(e,t){const i=this.getWallsIntersections(this.mouse);if(i.length>0&&i[0].distance<t.distance)return null;let o=e;return this.floorplan3DThis.props.mainComponentThis.isAddOnApp&&this.floorplan3DThis.selectedUserMode!==this.floorplan3DThis.editModeValue&&(this.floorplan3DThis.isFloorplanItemClickable(e.mesh)||(o=null)),o}itemIntersection(e,t){var i=t.customIntersectionPlanes(),o=[];return(o=i&&i.length>0?this.getIntersections(e,i,!0,!1):this.getIntersections(e,this.intersectionGround,!1,!1)).length>0?(this.floorplan3DThis.processSceneVec3(o[0].point),o[0]):null}normalizeVector2(e){const t=this.container.getBoundingClientRect();let i=new L.I9Y;return i.x=(e.x-t.left)/t.width*2-1,i.y=-(e.y-t.top)/t.height*2+1,i}getIntersections(e,t,i,o){if(i=i||!1,o=o||!1,this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()){const t=this.normalizeVector2(e),i=this.floorplan3DThis.floorplan3DOnMapCamera.projectionMatrix.clone().invert(),o=(new L.Pq0).applyMatrix4(i),n=new L.Pq0(t.x,t.y,1).applyMatrix4(i).clone().sub(o).normalize();this.raycaster.set(o,n)}else this.raycaster.setFromCamera(this.normalizeVector2(e),this.floorplan3DThis.floorplan3DViewCamera);var n=[];if(t instanceof Array)i&&(t=t.filter((e=>e.visible&&this.scene.getObjectByProperty("uuid",e.uuid)))),n=this.raycaster.intersectObjects(t,o);else{if(i&&!t.visible)return[];n=this.raycaster.intersectObject(t,o)}return n}setSelectedObject(e){this.state===this.states.UNSELECTED&&this.switchState(this.states.SELECTED),null!=this.selectedObject&&this.selectedObject.setUnselected(),null==e||e.disabled?(this.selectedObject=null,this.floorplan3DThis.onFloorplanItemUnselect()):(this.selectedObject=e,this.selectedObject.setSelected()),this.needsUpdate=!0}updateMouseover(){null==this.intersectedObject||this.intersectedObject.disabled?null==this.mouseoverObject||this.mouseoverObject.disabled||(this.mouseoverObject.mouseOff(),this.setCursorStyle("auto"),this.setSceneControlsState(!0),this.mouseoverObject=null,this.needsUpdate=!0):null!=this.mouseoverObject?this.mouseoverObject!==this.intersectedObject?(this.mouseoverObject.mouseOff(),this.mouseoverObject=this.intersectedObject,this.mouseoverObject.mouseOver(),this.setSceneControlsState(!1),this.needsUpdate=!0):this.setSceneControlsState(!1):(this.mouseoverObject=this.intersectedObject,this.mouseoverObject.mouseOver(),this.setSceneControlsState(!1),this.setCursorStyle("pointer"),this.needsUpdate=!0)}setSceneControlsState(e){this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?e?this.floorplan3DThis._map.dragPan.enable():this.floorplan3DThis._map.dragPan.disable():(!e&&this.mouseoverObject&&this.mouseoverObject.mesh&&(new L.NRn).setFromObject(this.mouseoverObject.mesh,!0).containsPoint(this.floorplan3DThis.currentControls.camera.position)&&(e=!0),this.floorplan3DThis.currentControls.setEnabledStatus(e))}},_l=function(e,t,i,o){this.object=e,this.camera=e,this.domElement=void 0!==t?t:document,this.floorplan3DThis=o,this.enabled=!0,this.target=new L.Pq0,this.movementRestrictionPivotPoint=i,this.objectTest=e.clone(),this.targetTest=this.target.clone(),this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.touchZoomSpeed=.8,this.minDistance=0,this.maxDistance=3e4,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=40,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI/2,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.zoomToCursor=!0,this.mouse3D=new L.Pq0,this.enableDamping=!1,this.dampingFactor=.05,this.needsUpdate=!0;var n=this,s=1e-6,a=new L.I9Y,r=new L.I9Y,l=new L.I9Y,h=new L.I9Y,c=new L.I9Y,d=new L.I9Y,p=new L.I9Y,m=new L.I9Y,u=new L.I9Y,g=0,f=0,b=1,w=new L.Pq0,C=-1,x=0,_=1,y=2,S=3,v=4,D=5,T=C;function j(e,t){var i=new L.Pq0,o=new L.Pq0,s=n.domElement===document?n.domElement.body:n.domElement;if(t){const t={x:(e.touches[0].clientX+e.touches[1].clientX)/2,y:(e.touches[0].clientY+e.touches[1].clientY)/2};i.set(t.x/window.innerWidth*2-1,-t.y/window.innerHeight*2+1,.5)}else i.set(e.clientX/s.clientWidth*2-1,-e.clientY/s.clientHeight*2+1,.5);i.unproject(n.object),i.sub(n.object.position).normalize();var a=o.copy(n.target).sub(n.object.position).dot(n.object.up)/i.dot(n.object.up);n.mouse3D.copy(n.object.position).add(i.multiplyScalar(a))}function I(){return 2*Math.PI/60/60*n.autoRotateSpeed}function P(e){return Math.pow(.95,e?n.touchZoomSpeed:n.zoomSpeed)}function O(e){if(!1!==n.enabled){if(e.preventDefault(),0!==e.button||n.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn()){if(1===e.button){if(!0===n.noZoom)return;T=_,p.set(e.clientX,e.clientY)}else if(2===e.button||0===e.button&&n.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn()){if(!0===n.noPan)return;T=y,h.set(e.clientX,e.clientY)}}else{if(!0===n.noRotate)return;T=x,a.set(e.clientX,e.clientY)}n.domElement.addEventListener("mousemove",k,!1),n.domElement.addEventListener("mouseup",F,!1)}}function k(e){if(!1!==n.enabled){e.preventDefault();var t=n.domElement===document?n.domElement.body:n.domElement;if(T===x){if(!0===n.noRotate)return;r.set(e.clientX,e.clientY),l.subVectors(r,a),n.rotateLeft(2*Math.PI*l.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*l.y/t.clientHeight*n.rotateSpeed),a.copy(r)}else if(T===_){if(!0===n.noZoom)return;m.set(e.clientX,e.clientY),u.subVectors(m,p),u.y>0?n.dollyIn():n.dollyOut(),p.copy(m)}else if(T===y){if(!0===n.noPan)return;c.set(e.clientX,e.clientY),d.subVectors(c,h),n.pan(d),h.copy(c)}n.update()}}function F(){!1!==n.enabled&&(n.domElement.removeEventListener("mousemove",k,!1),n.domElement.removeEventListener("mouseup",F,!1),T=C)}function M(e){if(!1!==n.enabled&&!0!==n.noZoom){var t=0;e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),j(e),t>0?n.dollyOut():n.dollyIn(),n.update()}}function A(e){if("INPUT"!==e.target.nodeName){if(!1===n.enabled)return;if(!0===n.noKeys)return;if(!0===n.noPan)return;switch(e.keyCode){case n.keys.UP:n.pan(new L.I9Y(0,n.keyPanSpeed));break;case n.keys.BOTTOM:n.pan(new L.I9Y(0,-n.keyPanSpeed));break;case n.keys.LEFT:n.pan(new L.I9Y(n.keyPanSpeed,0));break;case n.keys.RIGHT:n.pan(new L.I9Y(-n.keyPanSpeed,0))}}}function R(e){if(!1!==n.enabled)if(1!==e.touches.length||n.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn())if(2===e.touches.length){if(!0===n.noZoom)return;T=v;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+i*i);p.set(0,o)}else if(3===e.touches.length||1===e.touches.length&&n.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn()){if(!0===n.noPan)return;T=D,h.set(e.touches[0].pageX,e.touches[0].pageY)}else T=C;else{if(!0===n.noRotate)return;T=S,a.set(e.touches[0].pageX,e.touches[0].pageY)}}function B(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=n.domElement===document?n.domElement.body:n.domElement;if(1!==e.touches.length||n.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn())if(2===e.touches.length){if(!0===n.noZoom)return;if(T!==v)return;var i=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,s=Math.sqrt(i*i+o*o);m.set(0,s),u.subVectors(m,p),j(e,!0),0!==u.y&&(u.y>0?n.dollyOut(void 0,!0):n.dollyIn(void 0,!0)),p.copy(m)}else if(3===e.touches.length||1===e.touches.length&&n.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn()){if(!0===n.noPan)return;if(T!==D)return;c.set(e.touches[0].pageX,e.touches[0].pageY),d.subVectors(c,h),n.pan(d),h.copy(c)}else T=C;else{if(!0===n.noRotate)return;if(T!==S)return;r.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(r,a),n.rotateLeft(2*Math.PI*l.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*l.y/t.clientHeight*n.rotateSpeed),a.copy(r)}n.update()}}function W(){!1!==n.enabled&&(T=C)}function N(e){e.preventDefault()}this.setEnabledStatus=function(e){n.enabled=e},this.getEnabledStatus=function(){return n.enabled},this.resetState=function(){n.onMouseUp()},this.controlsActive=function(){return T===C},this.setPan=function(e){w=e},this.panTo=function(e){var t=new L.Pq0(e.x,n.target.y,e.z),i=n.target.clone().sub(t);w.sub(i),n.update()},this.rotateLeft=function(e){void 0===e&&(e=I()),f-=e},this.rotateUp=function(e){void 0===e&&(e=I()),g-=e},this.panLeft=function(e){var t=new L.Pq0,i=this.object.matrix.elements;t.set(i[0],0,i[2]),t.normalize(),t.multiplyScalar(-e),w.add(t)},this.panUp=function(e){var t=new L.Pq0;t.setFromMatrixColumn(this.object.matrix,1),t.multiplyScalar(e),w.add(t)},this.pan=function(e){var t=n.domElement===document?n.domElement.body:n.domElement;if(void 0!==n.object.fov){var i=n.object.position.clone().sub(n.target).length();i*=Math.tan(n.object.fov/2*Math.PI/180),n.panLeft(2*e.x*i/t.clientHeight),n.panUp(2*e.y*i/t.clientHeight)}else void 0!==n.object.top?(n.panLeft(e.x*(n.object.right-n.object.left)/t.clientWidth),n.panUp(e.y*(n.object.top-n.object.bottom)/t.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.");n.update()},this.panXY=function(e,t){n.pan(new L.I9Y(e,t))},this.dollyIn=function(e,t){void 0===e&&(e=P(t)),b/=e},this.dollyOut=function(e,t){void 0===e&&(e=P(t)),b*=e},this.update=function(){this.objectTest=this.object.clone(),this.targetTest=this.target.clone();const e=this.movementRestrictionPivotPoint?this.objectTest:this.object,t=this.movementRestrictionPivotPoint?this.targetTest:this.target;var i=e.position,o=i.clone().sub(this.target),a=Math.atan2(o.x,o.z),r=Math.atan2(Math.sqrt(o.x*o.x+o.z*o.z),o.y);this.autoRotate&&this.rotateLeft(I()),this.enableDamping?(a+=f*this.dampingFactor,r+=g*this.dampingFactor):(a+=f,r+=g),r=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,r)),r=Math.max(s,Math.min(Math.PI-s,r));var l=o.length(),h=l*b;h=Math.max(this.minDistance,Math.min(this.maxDistance,h)),this.enableDamping?t.addScaledVector(w,this.dampingFactor):t.add(w),this.zoomToCursor&&t.lerp(this.mouse3D,1-h/l),o.x=h*Math.sin(r)*Math.sin(a),o.y=h*Math.cos(r),o.z=h*Math.sin(r)*Math.cos(a);const c=i.clone().copy(t).add(o).y>0;c&&(i.copy(t).add(o),e.lookAt(t),this.movementRestrictionPivotPoint&&si(e.position,this.movementRestrictionPivotPoint)<this.maxDistance&&(this.object.position.copy(e.position),this.object.rotation.copy(e.rotation),this.object.scale.copy(e.scale),this.object.projectionMatrix.copy(e.projectionMatrix),this.object.isPerspectiveCamera&&e.isPerspectiveCamera&&this.object.matrixWorldInverse.copy(e.matrixWorldInverse),this.object.isOrthographicCamera&&e.isOrthographicCamera&&(this.object.matrixWorld.copy(e.matrixWorld),this.object.matrixWorldInverse.copy(e.matrixWorldInverse)),this.object.isPerspectiveCamera&&e.isPerspectiveCamera?(this.object.fov=e.fov,this.object.near=e.near,this.object.far=e.far):this.object.isOrthographicCamera&&e.isOrthographicCamera&&(this.object.left=e.left,this.object.right=e.right,this.object.top=e.top,this.object.bottom=e.bottom,this.object.near=e.near,this.object.far=e.far),this.object.updateProjectionMatrix(),this.object.updateMatrixWorld(),this.target=t.clone(),n.domElement.dispatchEvent(new Event("cameraMoved")),this.needsUpdate=!0)),this.enableDamping?(f*=1-this.dampingFactor,g*=1-this.dampingFactor,w.multiplyScalar(1-this.dampingFactor)):(f=0,g=0,w.set(0,0,0)),b=1,c&&!this.movementRestrictionPivotPoint&&(n.domElement.dispatchEvent(new Event("cameraMoved")),this.needsUpdate=!0)},this.onMouseUp=F,this.touchend=W,this.domElement.addEventListener("contextmenu",N,!1),this.domElement.addEventListener("mousedown",O,!1),this.domElement.addEventListener("wheel",M,!1),this.domElement.addEventListener("touchstart",R,!1),this.domElement.addEventListener("touchend",W,!1),this.domElement.addEventListener("touchmove",B,!1),window.document.addEventListener("keydown",A,!1),this.dispose=function(){this.domElement.removeEventListener("contextmenu",N),this.domElement.removeEventListener("mousedown",O),this.domElement.removeEventListener("wheel",M),this.domElement.removeEventListener("touchstart",R),this.domElement.removeEventListener("touchend",W),this.domElement.removeEventListener("touchmove",B),window.document.removeEventListener("keydown",A)}},yl=-1,Sl=0,vl=3,Dl=6,Tl=1e-6;function jl(e){this.enabled&&(this.mouseMoved=!0,this.state===Sl&&(this.rotateEnd.set(e.clientX,e.clientY),this.makeRotation()))}function Il(e){this.enabled&&0===e.button&&(this.mouseMoved=!1,this.state=Sl,this.rotateStart.set(e.clientX,e.clientY))}function Pl(){this.enabled&&(this.state=yl,this.mouseMoved||this.moveToCircleNavigatorPosition())}function Ol(e){if(this.enabled)switch(e.preventDefault(),e.stopPropagation(),this.touchMoved=!0,e.touches.length){case 1:if(this.state!==vl)return;this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.makeRotation();break;case 2:if(this.state!==Dl)return;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+i*i);this.dollyEnd.set(0,o),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),0!==this.dollyDelta.y&&(this.dollyDelta.y>0?(this.shouldMoveForward=!0,this.shouldMoveBackward=!1):(this.shouldMoveForward=!1,this.shouldMoveBackward=!0));break;default:this.state=yl}}function kl(e){if(this.enabled)switch(this.touchMoved=!1,e.touches.length){case 1:this.state=vl,this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:this.state=Dl;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+i*i);this.dollyStart.set(0,o);break;default:this.state=yl}}function Fl(){this.enabled&&(this.touchMoved||this.moveToCircleNavigatorPosition(),this.shouldMoveForward=!1,this.shouldMoveBackward=!1,this.state=yl)}function Ml(e){if(this.enabled&&"INPUT"!==e.target.nodeName)switch(e.code){case"ArrowUp":case"KeyW":this.shouldMoveForward=!0;break;case"ArrowLeft":case"KeyA":this.shouldMoveLeft=!0;break;case"ArrowDown":case"KeyS":this.shouldMoveBackward=!0;break;case"ArrowRight":case"KeyD":this.shouldMoveRight=!0}}function Al(e){if(this.enabled&&"INPUT"!==e.target.nodeName)switch(e.code){case"ArrowUp":case"KeyW":this.shouldMoveForward=!1;break;case"ArrowLeft":case"KeyA":this.shouldMoveLeft=!1;break;case"ArrowDown":case"KeyS":this.shouldMoveBackward=!1;break;case"ArrowRight":case"KeyD":this.shouldMoveRight=!1}}function Rl(e){this.enabled&&(e.preventDefault(),e.deltaY<0?(this.shouldMoveForward=!0,this.shouldMoveBackward=!1):(this.shouldMoveForward=!1,this.shouldMoveBackward=!0),clearTimeout(this.isUserScrolling),this.isUserScrolling=setTimeout((()=>{this.shouldMoveForward=!1,this.shouldMoveBackward=!1}),100))}const Ll=class{constructor(e,t,i,o,n){this.camera=e,this.object=e,this.domElement=t,this.scene=i,this.movementRestrictionPivotPoint=o,this.floorplan3DThis=n,this.enabled=!0,this.maxDistance=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this._vector=new L.Pq0,this.pointerSpeed=1,this._onMouseMove=jl.bind(this),this._onMouseDown=Il.bind(this),this._onMouseUp=Pl.bind(this),this._onTouchStart=kl.bind(this),this._onTouchEnd=Fl.bind(this),this._onTouchMove=Ol.bind(this),this._onKeyDown=Ml.bind(this),this._onKeyUp=Al.bind(this),this._onMouseWheel=Rl.bind(this),this.shouldMoveForward=!1,this.shouldMoveBackward=!1,this.shouldMoveLeft=!1,this.shouldMoveRight=!1,this.clock=new L.zD7,this.movementSpeed=100,this.previousMouseMoveEventCoords=null,this.state=yl,this.rotateStart=new L.I9Y,this.rotateEnd=new L.I9Y,this.rotateDelta=new L.I9Y,this.rotateSpeed=1,this.thetaDelta=0,this.phiDelta=0,this.rotationScale=1,this.dollyStart=new L.I9Y,this.dollyEnd=new L.I9Y,this.dollyDelta=new L.I9Y,this.mouseMoved=!1,this.touchMoved=!1,this.circleNavigator=null,this.cameraPositionAnimationDurationMs=500,this.isUserScrolling=null,this.domElement.addEventListener("mousemove",this._onMouseMove),this.domElement.addEventListener("mousedown",this._onMouseDown),this.domElement.addEventListener("mouseup",this._onMouseUp),this.domElement.addEventListener("touchstart",this._onTouchStart),this.domElement.addEventListener("touchend",this._onTouchEnd),this.domElement.addEventListener("touchmove",this._onTouchMove),this.domElement.addEventListener("wheel",this._onMouseWheel),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("keyup",this._onKeyUp)}setEnabledStatus(e){this.enabled=e}getEnabledStatus(){return this.enabled}resetState(){this.state=yl}dispose(){this.domElement.removeEventListener("mousemove",this._onMouseMove),this.domElement.removeEventListener("mousedown",this._onMouseDown),this.domElement.removeEventListener("mouseup",this._onMouseUp),this.domElement.removeEventListener("touchstart",this._onTouchStart),this.domElement.removeEventListener("touchend",this._onTouchEnd),this.domElement.removeEventListener("touchmove",this._onTouchMove),this.domElement.removeEventListener("wheel",this._onMouseWheel),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp)}getObject(){return this.camera}getDirection(e){return e.set(0,0,-1).applyQuaternion(this.camera.quaternion)}createCircleNavigator(e){if(!this.circleNavigator){this.circleNavigator=new L.YJl;const t=this.floorplan3DThis.props.mainComponentThis.meter/2,i=.9*t,o=32;this.circleNavigator.add(new L.eaF(new L.tcD(i,o),new L.V9B({color:16777215,transparent:!0,opacity:.2}))),this.circleNavigator.add(new L.FCc(new L.rKP(i,t,o),new L.mrM({color:16777215}))),this.circleNavigator.children.forEach((e=>{e.isMesh=!0,e.rotation.x=-Math.PI/2})),this.moveCircleNavigatorToPosition(e),this.scene.add(this.circleNavigator)}}disposeCircleNavigator(){this.circleNavigator&&(this.circleNavigator.children.forEach((e=>{this.scene.remove(this.circleNavigator),hi(e)})),this.circleNavigator=null)}moveCircleNavigatorToPosition(e){let t=this.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D().floorNumber,!0)+1;this.floorplan3DThis.sensorHeatmapFloorOffset&&(t+=this.floorplan3DThis.sensorHeatmapFloorOffset),this.circleNavigator.children.forEach((i=>i.position.set(e.x,t,e.z)))}updateCircleNavigator(e,t,i){this.state===yl&&(e||t.length>0||!i||!i[0]?this.disposeCircleNavigator():(i=i[0],this.circleNavigator?this.moveCircleNavigatorToPosition(i.point):this.createCircleNavigator(i.point)))}isCameraPositionValid(e){return!this.movementRestrictionPivotPoint||si(e,this.movementRestrictionPivotPoint)<this.maxDistance}updateFloorplanNavigation(){const e=fi(this.camera);this.floorplan3DThis.floorplanNavigationRef.current.setCircleNavigatorPosition(new L.I9Y(this.camera.position.x,this.camera.position.z).divideScalar(this.floorplan3DThis.scaleFactor),e)}moveCameraToPositionWithAnimation(e){let t=null;const i=this.camera.position.clone(),o=n=>{console.log("updateCameraPosition"),t||(t=n);const s=n-t;if(s>=this.cameraPositionAnimationDurationMs)this.camera.position.copy(e),this.updateFloorplanNavigation(),this.domElement.dispatchEvent(new Event("cameraMoved"));else{const t=s/this.cameraPositionAnimationDurationMs;this.camera.position.lerpVectors(i,e,t),this.updateFloorplanNavigation(),requestAnimationFrame(o)}};requestAnimationFrame(o)}moveToCircleNavigatorPosition(){if(!this.circleNavigator)return;const e=this.circleNavigator.children[0].position,t=new L.Pq0(e.x,this.camera.position.y,e.z);this.isCameraPositionValid(t)&&this.moveCameraToPositionWithAnimation(t)}handleFloorplanNavigationClick(e){const t=new L.Pq0(e.x*this.floorplan3DThis.scaleFactor,this.camera.position.y,e.y*this.floorplan3DThis.scaleFactor);this.moveCameraToPositionWithAnimation(t)}isCameraPositionDistanceShiftValid(e,t){if(!this.movementRestrictionPivotPoint)return!0;e.applyQuaternion(this.camera.quaternion);const i=this.camera.position.clone().add(e.multiplyScalar(t));return this.isCameraPositionValid(i)}moveForwardBackward(e){this.isCameraPositionDistanceShiftValid(new L.Pq0(0,0,1),e)&&(this.camera.translateZ(e),this.updateFloorplanNavigation(),this.domElement.dispatchEvent(new Event("cameraMoved")))}moveLeftRight(e){this.isCameraPositionDistanceShiftValid(new L.Pq0(1,0,0),e)&&(this.camera.translateX(e),this.updateFloorplanNavigation(),this.domElement.dispatchEvent(new Event("cameraMoved")))}makeRotation(){this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.thetaDelta+=2*Math.PI*this.rotateDelta.x/this.domElement.clientWidth*this.rotateSpeed,this.phiDelta+=2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight*this.rotateSpeed,this.rotateStart.copy(this.rotateEnd);const e=new L.Pq0;this.camera.getWorldDirection(e);const t=new L.Pq0;t.copy(this.camera.position).add(e);let i=this.camera.position.clone().sub(t);var o=Math.atan2(i.x,i.z),n=Math.atan2(Math.sqrt(i.x*i.x+i.z*i.z),i.y);o+=this.thetaDelta,n+=this.phiDelta,n=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,n)),n=Math.max(Tl,Math.min(Math.PI-Tl,n));const s=i.length()*this.rotationScale;i.x=s*Math.sin(n)*Math.sin(o),i.y=s*Math.cos(n),i.z=s*Math.sin(n)*Math.cos(o),this.camera.position.copy(t).add(i),this.camera.lookAt(t),this.updateFloorplanNavigation(),this.thetaDelta=0,this.phiDelta=0,this.domElement.dispatchEvent(new Event("cameraMoved"))}animate(){if(!0===this.enabled){const e=this.clock.getDelta();this.shouldMoveForward&&this.moveForwardBackward(-e*this.movementSpeed),this.shouldMoveBackward&&this.moveForwardBackward(e*this.movementSpeed),this.shouldMoveLeft&&this.moveLeftRight(-e*this.movementSpeed),this.shouldMoveRight&&this.moveLeftRight(e*this.movementSpeed)}}};class Bl extends o.Component{constructor(e){super(),this.setActiveStatus=e=>this.setState({active:e}),this.onCloseNavigationClick=()=>this.setState({active:!1}),this.resetBearingParams=()=>{this.circleNavigatorBearingAngleDeg=0,this.fullCirclesCount=0},this.updateNavigatorShape=()=>{this.circularSectorAngleDeg=b(gi(f(this.props.floorplan3DThis.firstPersonControlsCamera.fov),this.props.floorplan3DThis.canvasRef.current.offsetWidth/this.props.floorplan3DThis.canvasRef.current.offsetHeight)),Ct(this.circleNavigatorRef.current),this.props.mainComponentThis.qSVG.create(this.circleNavigatorRef,"path",{d:Qt(0,0,this.circularSectorRadiusSvg,this.circularSectorAngleDeg)}),this.setCircleNavigatorPosition(this.circleNavigatorPosition,this.circleNavigatorBearingAngleDeg)},this.setCircleNavigatorPosition=(e,t)=>{const i=this.circleNavigatorBearingAngleDeg;i>=270&&i<360&&t>0&&t<=90?this.fullCirclesCount++:i>0&&i<=90&&t>=270&&t<360&&this.fullCirclesCount--,this.circleNavigatorBearingAngleDeg=t,this.circleNavigatorPosition=e,this.circleNavigatorRef.current.setAttribute("transform",`translate(${e.x}, ${e.y}) rotate(${t+360*this.fullCirclesCount})`)},this.setActiveFloorLegend=()=>{Ct(this.floorLegendGroupElement.current),this.navigationSvgRef.current.setAttribute("viewBox",`${this.props.mainComponentThis.boxWallCoordinates.minX} ${this.props.mainComponentThis.boxWallCoordinates.minY} ${this.props.mainComponentThis.boxWallCoordinates.width} ${this.props.mainComponentThis.boxWallCoordinates.height}`);for(let e=0;e<this.props.mainComponentThis.boxWall.current.children.length;e++)this.floorLegendGroupElement.current.appendChild(this.props.mainComponentThis.boxWall.current.children[e].cloneNode());this.floorLegendGroupElementBoundingClientRect=this.floorLegendGroupElement.current.getBoundingClientRect()},this.onNavigationSvgMouseMove=e=>{l(e.clientX,e.clientY,this.floorLegendGroupElementBoundingClientRect)?this.navigationSvgRef.current.style.cursor="pointer":this.navigationSvgRef.current.style.cursor="default"},this.onNavigationSvgClick=e=>t=>{const i=e?t.touches[0].pageX:t.clientX,o=e?t.touches[0].pageY:t.clientY;if(l(i,o,this.floorLegendGroupElementBoundingClientRect)){let e,t;e=i-this.floorLegendGroupElementBoundingClientRect.left,t=o-this.floorLegendGroupElementBoundingClientRect.top,e=e/this.floorLegendGroupElementBoundingClientRect.width*this.props.mainComponentThis.boxWallCoordinates.width,t=t/this.floorLegendGroupElementBoundingClientRect.height*this.props.mainComponentThis.boxWallCoordinates.height,e+=this.props.mainComponentThis.boxWallCoordinates.minX,t+=this.props.mainComponentThis.boxWallCoordinates.minY,this.props.floorplan3DThis.firstPersonControls.handleFloorplanNavigationClick({x:e,y:t})}},this.state={active:!1},this.circularSectorAngleDeg=0,this.circularSectorRadiusSvg=3*e.mainComponentThis.meter,this.circleNavigatorBearingAngleDeg=0,this.circleNavigatorPosition={x:0,y:0},this.fullCirclesCount=0,this.navigationSvgRef=o.createRef(),this.floorLegendGroupElement=o.createRef(),this.floorLegendGroupElementBoundingClientRect={},this.circleNavigatorRef=o.createRef(),this.setActiveStatus=this.setActiveStatus.bind(this),this.onCloseNavigationClick=this.onCloseNavigationClick.bind(this),this.setActiveFloorLegend=this.setActiveFloorLegend.bind(this),this.updateNavigatorShape=this.updateNavigatorShape.bind(this),this.setCircleNavigatorPosition=this.setCircleNavigatorPosition.bind(this),this.resetBearingParams=this.resetBearingParams.bind(this),this.onNavigationSvgMouseMove=this.onNavigationSvgMouseMove.bind(this),this.onNavigationSvgClick=this.onNavigationSvgClick.bind(this)}render(){return(0,a.jsxs)("div",{className:"floorplan-navigation-container "+(this.state.active?"active":""),children:[(0,a.jsx)("div",{className:"header-container",children:(0,a.jsx)("div",{className:"svg-center-inside-container close-icon",onClick:this.onCloseNavigationClick,children:(0,a.jsx)(to.A,{})})}),(0,a.jsxs)("svg",{ref:this.navigationSvgRef,onMouseMove:this.onNavigationSvgMouseMove,onClick:this.onNavigationSvgClick(!1),onTouchStart:this.onNavigationSvgClick(!0),children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("radialGradient",{id:"redGradient",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[(0,a.jsx)("stop",{offset:"0%",style:{stopColor:"#ffcccc",stopOpacity:1}}),(0,a.jsx)("stop",{offset:"100%",style:{stopColor:"#ff0000",stopOpacity:1}})]})}),(0,a.jsx)("g",{ref:this.floorLegendGroupElement}),(0,a.jsx)("g",{ref:this.circleNavigatorRef,className:"circle-navigator",fill:"url(#redGradient)",stroke:"#4b4b5a",strokeWidth:"4"})]})]})}}const Wl=Bl;class Nl extends o.Component{constructor(){super(),this.setFloorplanFloors3DData=(e,t)=>this.setState({floorplanFloors3D:e},(()=>t&&t())),this.setSelectedFloorplanFloor3D=(e,t)=>this.setState({selectedFloor3D:e},(()=>{this.updateFloorplanItemsInteraction(),this.updateIntersectionGroundPosition(),this.props.floorplan3DThis.centerFloorFirstPersonControlsCamera(),this.props.floorplan3DThis.floorplanNavigationRef.current.setActiveFloorLegend(),this.props.floorplan3DThis.roomCameraControlsRef.current.setRoomsDropdownListData(this.state.selectedFloor3D.roomData),t&&t()})),this.getSelectedFloorplanFloor3D=()=>this.state.selectedFloor3D,this.updateFloorplanItemsInteraction=()=>{this.props.floorplan3DThis.userInteractionCurrentController.removeItemBinder(),this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null);this.props.floorplan3DThis.getActiveScenes().forEach((e=>{const t=e.getObjectsByProperty("isFloorplanItem",!0);for(let i=0;i<t.length;i++)t[i].itemObject.disabled=t[i].itemObject.fixed=t[i].itemObject.floorNumber!==this.state.selectedFloor3D.floorNumber,t[i].itemObject.modelProperties.fixed&&(t[i].itemObject.fixed=!0)}))},this.updateIntersectionGroundPosition=()=>{let e=[this.props.floorplan3DThis.floorplanViewUserInteractionController];this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.floorplan3DOnMapScene&&e.push(this.props.floorplan3DThis.floorplanOnMapUserInteractionController);const t=this.props.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.state.selectedFloor3D.floorNumber,!0);e.forEach((e=>e.intersectionGround.position.y=t))},this.calculateFirstPersonControlsCameraPositionY=()=>this.state.selectedFloor3D?(this.props.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.state.selectedFloor3D.floorNumber)+this.state.selectedFloor3D.floorHeight/2)*this.props.floorplan3DThis.scaleFactor:0,this.onFloorplanFloor3DClick=e=>()=>{this.state.selectedFloor3D.floorNumber!==e.floorNumber&&this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.onFloorplanFloorClick(this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsData.find((t=>t.floorNumber===e.floorNumber)))()},this.handleFloorplanFloor3DChange=(e,t)=>{const i=this.state.selectedFloor3D,o=this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsData.find((e=>e.floorNumber===i.floorNumber)),n=this.props.floorplan3DThis.floorplanFloors.find((t=>t.floorNumber===e));this.setState({selectedFloor3D:n},(()=>{this.props.floorplan3DThis.updateSelectedFloor3DObject2DReferences(n),t&&(i.objData=this.props.floorplan3DThis.filterFurnitureObjData(o.objData).map((e=>{const t=this.props.floorplan3DThis.props.mainComponentThis.createObj2DClassInstanceFromObj(e);return t.update(this.props.floorplan3DThis.props.mainComponentThis),t})),this.props.floorplan3DThis.redrawFloorplanFloorItems(i)),this.updateFloorplanItemsInteraction(),this.updateIntersectionGroundPosition(),this.props.floorplan3DThis.centerFloorFirstPersonControlsCamera(),this.props.floorplan3DThis.floorplanNavigationRef.current.setActiveFloorLegend(),this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((e=>e.floorID===n.floorID))&&this.onShowFloor3DClick(n)(),this.props.floorplan3DThis.roomCameraControlsRef.current.setRoomsDropdownListData(this.state.selectedFloor3D.roomData),this.props.floorplan3DThis.floorplanFloorsSceneControlsSelectionRef&&this.props.floorplan3DThis.floorplanFloorsSceneControlsSelectionRef.current.setSelectedFloorplanFloor3D(n,null,!1)}))},this.onHideFloor3DClick=e=>()=>{this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.push(e),this.props.floorplan3DThis.setFloorplanFloorItemsVisibility(e.floorNumber,!1),this.forceUpdate()},this.onShowFloor3DClick=e=>()=>{this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D=this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.filter((t=>t.floorID!==e.floorID)),this.props.floorplan3DThis.setFloorplanFloorItemsVisibility(e.floorNumber,!0),this.forceUpdate()},this.setIsFloorSwitchingDisabled=e=>this.setState({isFloorSwitchingDisabled:e}),this.state={floorplanFloors3D:[],selectedFloor3D:null,isFloorSwitchingDisabled:!1},this.setFloorplanFloors3DData=this.setFloorplanFloors3DData.bind(this),this.setSelectedFloorplanFloor3D=this.setSelectedFloorplanFloor3D.bind(this),this.getSelectedFloorplanFloor3D=this.getSelectedFloorplanFloor3D.bind(this),this.updateFloorplanItemsInteraction=this.updateFloorplanItemsInteraction.bind(this),this.updateIntersectionGroundPosition=this.updateIntersectionGroundPosition.bind(this),this.calculateFirstPersonControlsCameraPositionY=this.calculateFirstPersonControlsCameraPositionY.bind(this),this.handleFloorplanFloor3DChange=this.handleFloorplanFloor3DChange.bind(this),this.onFloorplanFloor3DClick=this.onFloorplanFloor3DClick.bind(this),this.onHideFloor3DClick=this.onHideFloor3DClick.bind(this),this.onShowFloor3DClick=this.onShowFloor3DClick.bind(this),this.setIsFloorSwitchingDisabled=this.setIsFloorSwitchingDisabled.bind(this)}render(){const{floorplanFloors3D:e,selectedFloor3D:t,isFloorSwitchingDisabled:i}=this.state;return(0,a.jsx)("div",{children:t&&(0,a.jsx)("div",{className:"floorplan-floors-buttons-container",children:e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((e=>(0,a.jsxs)("div",{className:"panel-option-container",children:[(0,a.jsxs)("div",{className:"option-name-note-container",children:[(0,a.jsxs)("button",{title:`Floor ${e.floorNumber}`,className:`option-button btn ${t.floorNumber===e.floorNumber?"btn-active":""} ${i?"disabled":""}`,style:{margin:"5px 0"},onClick:()=>!i&&this.onFloorplanFloor3DClick(e)(),children:[(0,a.jsx)("span",{className:"label-span",children:"Floor\xa0"}),(0,a.jsx)("span",{children:e.floorNumber})]}),(0,a.jsx)("div",{className:"floor-info",children:(0,a.jsx)(Eo,{indoorPanelExplanationBox:this.props.floorplan3DThis.panelInfoExplanationBox,infoText:Kt(e)})})]}),(0,a.jsx)("button",{className:"btn btn-default action-icon-button "+(t.floorNumber===e.floorNumber?"disabled":""),children:this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))?(0,a.jsx)(ts.A,{className:"view-3d-visibility-icon",title:"Show floor",onClick:t.floorNumber!==e.floorNumber?this.onShowFloor3DClick(e):void 0}):(0,a.jsx)(es.A,{className:"view-3d-visibility-icon",title:"Hide floor",onClick:t.floorNumber!==e.floorNumber?this.onHideFloor3DClick(e):void 0})})]},e.floorNumber)))})})}}const Vl=Nl;class El extends o.Component{constructor(){super(),this.onModeOptionClick=e=>()=>this.setState({activeMode:e}),this.isPanModeOn=()=>"pan"===this.state.activeMode,this.setDisableStatus=e=>this.setState({disabled:e}),this.getActiveMode=()=>this.state.activeMode,this.state={disabled:!1,activeMode:"rotate"},this.modeOptions=[{title:"Rotation mode",icon:(0,a.jsx)(Ds,{}),value:"rotate"},{title:"Pan mode",icon:(0,a.jsx)(Ss,{}),value:"pan"}],this.onModeOptionClick=this.onModeOptionClick.bind(this),this.isPanModeOn=this.isPanModeOn.bind(this),this.setDisableStatus=this.setDisableStatus.bind(this),this.getActiveMode=this.getActiveMode.bind(this)}render(){return this.state.disabled?null:(0,a.jsx)("div",{className:"orbit-controls-rotate-pan-mode-switch-container scene-control",children:this.modeOptions.map(((e,t)=>(0,a.jsx)("div",{title:e.title,className:`mode-option ${0===t?"left":"right"} ${this.state.activeMode===e.value?"active":""}`,onClick:this.onModeOptionClick(e.value),children:e.icon},t)))})}}const Hl=El;var zl=i(6865);class Gl extends o.Component{constructor(){super(),this.getWallsOpacityValue=()=>this.state.wallsOpacity,this.onWallsOpacitySliderChange=(e,t)=>{this.setState({wallsOpacity:t})},this.onWallsOpacitySliderMouseUp=()=>{this.props.mainComponentThis.changeWallMaterialOpacity(this.props.mainComponentThis.currentWalls3D,this.state.wallsOpacity),this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.mainComponentThis.changeWallMaterialOpacity(this.props.mainComponentThis.floorplanViewWalls3D,this.state.wallsOpacity)},this.state={wallsOpacity:100,isVisible:!1},this.getWallsOpacityValue=this.getWallsOpacityValue.bind(this),this.onWallsOpacitySliderChange=this.onWallsOpacitySliderChange.bind(this),this.onWallsOpacitySliderMouseUp=this.onWallsOpacitySliderMouseUp.bind(this)}render(){return(0,a.jsx)(xo,{containerClasses:"slider-form-group",containerStyle:{textAlign:"center",marginBottom:0},label:"Walls opacity",labelStyle:{margin:0},children:(0,a.jsx)(zl.A,{getAriaLabel:()=>"Walls opacity",getAriaValueText:e=>`${e}%`,valueLabelFormat:e=>`${e}%`,value:this.state.wallsOpacity,onChange:this.onWallsOpacitySliderChange,onChangeCommitted:this.onWallsOpacitySliderMouseUp,valueLabelDisplay:"auto",min:0,max:100,step:1})})}}const ql=Gl;class Ul extends o.Component{constructor(){super(),this.getShowWallSwitchState=()=>this.state.wallsVisible,this.getFrontWallsSwitchState=()=>this.state.frontWallsVisible,this.showFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].hideWall=!1,this.state.frontWallsVisible?e[t].setWallPlanesObjectsVisibility(!0):e[t].updateFrontWallVisibility()},this.hideFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].hideWall=!0,e[t].setWallPlanesObjectsVisibility(!1)},this.onWallVisibilityChange=()=>{const e=this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus();this.state.wallsVisible?(this.hideFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.hideFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)):(this.showFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.showFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)),this.setState({wallsVisible:!this.state.wallsVisible})},this.showFrontFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].callUpdateFrontWallVisibility=!1,this.state.wallsVisible&&e[t].setWallPlanesObjectsVisibility(!0)},this.hideFrontFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].callUpdateFrontWallVisibility=!0,e[t].updateFrontWallVisibility()},this.onFrontWallVisibilityChange=()=>{const e=this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus();this.state.frontWallsVisible?(this.hideFrontFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.hideFrontFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)):(this.showFrontFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.showFrontFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)),this.setState({frontWallsVisible:!this.state.frontWallsVisible})},this.state={frontWallsVisible:!0,wallsVisible:!0},this.onWallVisibilityChange=this.onWallVisibilityChange.bind(this),this.onFrontWallVisibilityChange=this.onFrontWallVisibilityChange.bind(this),this.getShowWallSwitchState=this.getShowWallSwitchState.bind(this),this.getFrontWallsSwitchState=this.getFrontWallsSwitchState.bind(this),this.showFloorplanWalls=this.showFloorplanWalls.bind(this),this.hideFloorplanWalls=this.hideFloorplanWalls.bind(this),this.showFrontFloorplanWalls=this.showFrontFloorplanWalls.bind(this),this.hideFrontFloorplanWalls=this.hideFrontFloorplanWalls.bind(this)}render(){return(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{className:"panel-option-container",children:[(0,a.jsxs)("div",{className:"option-name-note-container",children:[(0,a.jsx)("div",{children:"SHOW WALLS"}),(0,a.jsx)("div",{children:(0,a.jsx)(Eo,{indoorPanelExplanationBox:this.props.panelInfoExplanationBox,infoText:"Show floorplan walls"})})]}),(0,a.jsx)("div",{children:(0,a.jsx)(Sn.A,{checked:this.state.wallsVisible,onChange:this.onWallVisibilityChange})})]}),(0,a.jsxs)("div",{className:"panel-option-container",children:[(0,a.jsxs)("div",{className:"option-name-note-container",children:[(0,a.jsx)("div",{children:"FRONT WALLS"}),(0,a.jsx)("div",{children:(0,a.jsx)(Eo,{indoorPanelExplanationBox:this.props.panelInfoExplanationBox,infoText:"Show or hide front walls on camera movement"})})]}),(0,a.jsx)("div",{children:(0,a.jsx)(Sn.A,{checked:this.state.frontWallsVisible,onChange:this.onFrontWallVisibilityChange})})]})]})}}const Yl=Ul;var Xl=i(6271),Kl=i(3441);function Zl(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1);let a=t.length;t.push(!1);let r=new Kl.V((e=>{const t=new L.KPJ;return t.itemError=t=>{const i=t.split("/"),o=i[i.length-1];console.log("Item error",o,e[o]),e[o]&&e[o].forEach((e=>{e.materialObject[e.materialTexturePropertyName]=null,e.materialObject.needsUpdate=!0}))},t})(this.materialToTextureMappings)),l=new Xl.L;const h=this.props.mainComponentThis.getObjectFolderName(e.floorplanItemType);let c="",d=!1;if(this.props.mainComponentThis.isAddOnApp){c="https://app.klet3d.com";const t=this.getObjectConnectorClassValue(null,e.object2D);d="_lights_"===t||"christmas_tree_lights"===t}const p=this.props.mainComponentThis.folderNameToModelsMapping[h].details[e.floorplanItemType].objId?`https://app.klet3d.com/api/glamos/klet3d/objects-download2/${this.props.mainComponentThis.folderNameToModelsMapping[h].details[e.floorplanItemType].objId}`:`${c}/models3D/objMtl/models/${h}/${e.floorplanItemType}`,m=h=>{h&&l.setMaterials(h),l.load(`${p}/${e.floorplanItemType}.obj`,(h=>{this.loadingCallbacksStatuses[s]=!0,t[a]=!0,this.setFloorplanItemShadow(h,d);const c=(new L.NRn).setFromObject(h,!0),p=new L.Pq0;c.getSize(p),e.object=h,e.sizeVector=p,r=null,l=null,n?n():Nt(t)&&o(),i&&this.isInitialLoadingFinished()}))};r.load(`${p}/${e.floorplanItemType}.mtl`,(e=>{this.loadingCallbacksStatuses[s]=!0,t[a]=!0,e.preload(),((e,t,i)=>{for(let o in e.materialsInfo){const n=e.materialsInfo[o],s=e.materials[o];let a;for(let e in s)if(s[e]&&s[e].isTexture){a=e;break}for(let e in n)if("name"!==e){const o=n[e];(/^[a-zA-Z0-9_-]+\.(jpg|jpeg|png|bmp|tga)$/i.test(o)||i&&/^blob:[a-zA-Z][a-zA-Z0-9+.-]*:\/\/[^\s/]+\/[a-f0-9-]+$/i.test(o))&&(t[o]?t[o].push({materialObject:s,materialTexturePropertyName:a}):t[o]=[{materialObject:s,materialTexturePropertyName:a}])}}})(e,this.materialToTextureMappings),s=this.loadingCallbacksStatuses.length,this.loadingCallbacksStatuses.push(!1),a=t.length,t.push(!1),m(e)}),null,(()=>{m(null)}))}function $l(e,t,i,o){let n=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1);let s=t.length;t.push(!1),this.textureLoader.load(i(e),(i=>{this.loadingCallbacksStatuses[n]=!0,t[s]=!0,e.textureData=i,Nt(t)&&o(),this.isInitialLoadingFinished()}),null,(e=>console.error("Texture loading error",e)))}function Jl(e,t){this.floorplanViewWalls3D=[...this.currentWalls3D],this.floorplanViewRoomFloors=[...this.currentRoomFloors],this.loadedTextures=[...this.roomFloorTextures],this.getPanel3DFixedItemsOptions().forEach((e=>e.floorplanViewArray=[...e.currentViewArray])),this.floorplanFloorsPanelSelection3DRef.current.setFloorplanFloors3DData(this.floorplanFloors,(()=>{const t=this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor(),i=this.floorplanFloors.find((e=>e.floorNumber===t.floorNumber));this.floorplanFloorsPanelSelection3DRef.current.setSelectedFloorplanFloor3D(i,(()=>e&&e(i)))})),n.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current),requestAnimationFrame((()=>{this.state.isPanelShowed&&(this.props.mainComponentThis.taille_w>=this.props.mainComponentThis.smallScreenPixelSize?(this.panel.current.style.transform=`translateX(${this.panelWidth}px)`,this.sceneControlToolsContainer.current.style.transform=`translateX(${this.panelWidth}px)`,this.panelControl.current.style.transform=`translateX(${this.panelWidth}px)`,t&&t()):this.onPanelControlClick())})),console.log("Active",this.shadowCastingLightsActive),console.log("Waiting",this.shadowCastingLightsWaitingList),this.isInitialFloorplanDrawingFinished=!0}function Ql(){if(!this.showMapLayer3DInputRef.current.getCheckedStatus()){console.log(JSON.stringify(this.loadingCallbacksStatuses));for(let e=0;e<this.loadingCallbacksStatuses.length;e++)if(!this.loadingCallbacksStatuses[e])return;this.onInitialFloorplanDrawingFinishedCallback()}}var eh=i(6340);function th(e,t,i,o,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;s="number"===typeof s?s:1;const a=new eh._(e,{font:this.textFont,size:i,height:n,curveSegments:5});a.computeBoundingBox();const r=a.boundingBox.max.x-a.boundingBox.min.x,l=a.boundingBox.max.y-a.boundingBox.min.y,h=[new L.V9B({color:t,transparent:s<1,opacity:s}),new L.V9B({color:t,transparent:s<1,opacity:s})],c=new L.eaF(a,h);return c.position.set(o.x-r/2,o.y,o.z+l/2),c}function ih(e,t){const i=e.getObjectByName("floorplan_time");i&&(e.remove(i),hi(i));const o=this.createTextMesh(t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0"),0,this.floorplanTimeMeshHeight,new L.Pq0(this.floorplanWallsObjectsBBoxCenterVector.x,0,this.floorplanWallsObjectsBBoxCenterVector.z+.5*this.floorplanWallsObjectsBoundingBox2DCoordinates.height*this.scaleFactor+this.floorplanTimeMeshOffsetFromBBoxSide+this.floorplanTimeMeshHeight/2),1);o.rotation.x=-Math.PI/2,o.name="floorplan_time",e.add(o)}function oh(){const e=new L.Gu$(20,32,15),t=new L.Q1f(10066329),i=new L.tXL({emissive:t});return new L.eaF(e,i)}function nh(e){const t=new L.eaF(new L.iNn(e.additionalParams.width3D*this.scaleFactor,e.additionalParams.height3D*this.scaleFactor,e.additionalParams.depth3D*this.scaleFactor),new L.tXL({color:8421504,flatShading:!0,side:L.$EB}));return this.setFloorplanItemShadow(t),t}function sh(e){const t=e.object2D,i=new L.I9Y(t.additionalParams.width3D/Math.abs(e.surfaceItemProperties.surfaceAreaMeshLocalToWorldScale.x),"on_floor"==t.additionalParams.choiceOptionValue?t.additionalParams.depth3D/Math.abs(e.surfaceItemProperties.surfaceAreaMeshLocalToWorldScale.z):t.additionalParams.height3D/Math.abs(e.surfaceItemProperties.surfaceAreaMeshLocalToWorldScale.y)).multiplyScalar(this.scaleFactor),o=new L.bdM(i.x,i.y);if("on_wall"==t.additionalParams.choiceOptionValue){let e=o.getAttribute("uv"),t=new L.I9Y;for(let i=0;i<e.count;i++)t.fromBufferAttribute(e,i),e.setXY(i,1-t.x,t.y);e.needsUpdate=!0}const n=new L.eaF(o,new L.tXL({side:L.$EB,polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:-1}));return"on_floor"==t.additionalParams.choiceOptionValue&&n.rotateX(-Math.PI/2),n.userData={isSurfacePlaneMesh:!0},n.state=null,this.setFloorplanItemShadow(n),n}function ah(e,t){const i=e.object2D.additionalParams,o=e.mesh.surfacePlane;if("image"===i[`${t}_type`])if(i[`${t}_image`]){o.material.flatShading=!1,o.material.color=new L.Q1f(16777215);const n=i[`${t}_image`],s=`https://app.klet3d.com/api/glamos/klet3d/objects-download2/${n.objId}/${n.name}.${n.format}`;o.material.map&&o.material.map.image.src===s||(o.userData.surfaceTextureLoadingPath!==s?(o.userData.surfaceTextureLoadingPath=s,o.userData.imageTargetState=o.state,this.textureLoader.load(`https://app.klet3d.com/api/glamos/klet3d/objects-download2/${n.objId}/${n.name}.${n.format}`,(t=>{o.userData.surfaceTextureLoadingPath=null,o.state===o.userData.imageTargetState&&(o.material.map=t,o.material.transparent=!0,o.material.needsUpdate=!0,e.mesh.material.visible=!1,e.mesh.material.needsUpdate=!0)}),void 0,(e=>{console.error("Error loading surface texture:",e)}))):o.userData.imageTargetState=o.state)}else e.unrenderSurfacePlane();else"color"===i[`${t}_type`]?(o.material.map=null,o.material.transparent=!1,o.material.flatShading=!0,o.material.color=new L.Q1f(i[`${t}_color`]),o.material.needsUpdate=!0,e.mesh.material.visible=!0,e.mesh.material.needsUpdate=!0):e.unrenderSurfacePlane()}function rh(e,t){const i=void 0!==t?t:e.object2D.additionalParams.default_layout_option_prefix;i?(e.renderSurfacePlane(),this.updateSurfaceAreaPlane(e,i)):e.unrenderSurfacePlane()}function lh(e,t,i,o){const n=e.clone();if(i&&i.scaleWidthValue&&i.scaleHeightValue){const{wrapSValue:e,wrapTValue:t}=this.calculateTextureWrapValues(o,i);e>1&&(n.wrapS=L.GJx),t>1&&(n.wrapT=L.GJx),n.repeat.set(e,t),n.offset.set(0,0)}return this.props.mainComponentThis.isAddOnApp||this.props.mainComponentThis.floorplanEnvironmentShouldPreview?new L.tXL({color:16777215,side:t,map:n}):new L.V9B({color:16777215,side:t,map:n})}var hh=i(7483),ch=i(9870),dh=i.n(ch);function ph(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=i.clone();if(e.parent){const o=t.clone(),n=i.clone();n.add(o);const a=o.clone();e.parent.worldToLocal(a);const r=n.clone();e.parent.worldToLocal(r);const l=bi(a,r);l.normalize(),s=l}n&&e.parent&&e.parent.worldToLocal(t);const a=new L.PTz;a.setFromAxisAngle(s,o);const r=e.position.clone().sub(t);r.applyQuaternion(a),e.position.copy(t.clone().add(r)),e.quaternion.premultiply(a)}function mh(e,t,i,o,n){const s=new L.Pq0(t,i,o),a=new L.Pq0;e.getWorldPosition(a),a.add(s),this.floorplan3DOnMapScene&&pi(e)===this.floorplan3DOnMapScene&&n&&this.processSceneVec3(a),e.position.set(a.x,a.y,a.z)}function uh(e,t){let i=[],o=[];for(let a=0;a<e.children.length;a++){let t=e.children[a];"Mesh"===t.type&&(t.material.length?i=i.concat(t.material):i.push(t.material),t.geometry.isBufferGeometry&&o.push(t.geometry))}let n=new L.LoY;n=hh.h0([...o],!0),n.computeVertexNormals(),n.computeBoundingBox(),n.normalizeNormals();const s=new L.eaF(n,i);t.add(s)}function gh(){this.updateWallsVisibility()}function fh(){for(let e=0;e<this.currentWalls3D.length;e++)this.currentWalls3D[e].updateFrontWallVisibility()}function bh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.traverse((e=>{e.isMesh&&(e.castShadow=!t,e.receiveShadow=!0)}))}function wh(e,t){const i=t/100,o=100!==t;this.wallTopPlaneMaterial.opacity=i,this.wallTopPlaneMaterial.transparent=o,this.wallTopPlaneMaterial.needsUpdate=!0,this.wallStartEndPlanesMaterial.opacity=i,this.wallStartEndPlanesMaterial.transparent=o,this.wallStartEndPlanesMaterial.needsUpdate=!0,e.forEach((e=>e.setExteriorInteriorPlanesOpacity(i)))}function Ch(){const e=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;Ot(this._map,Pt(this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral),this.floorplanWallsBoundingBox2DCoordinates.width/this.props.mainComponentThis.meter,this.floorplanWallsBoundingBox2DCoordinates.height/this.props.mainComponentThis.meter,e),e,20)}function xh(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._map=e,e.setMaxZoom(22);const o=[this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral)],n=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0,s=[Math.PI/2,0,0],a=dh().MercatorCoordinate.fromLngLat(o,0),r={translateX:a.x,translateY:a.y,translateZ:a.z,rotateX:s[0],rotateY:s[1],rotateZ:s[2],scale:a.meterInMercatorCoordinateUnits()/(this.scaleFactor*this.props.mainComponentThis.meter)},l=this,h={id:"floorplan-3d-model",type:"custom",renderingMode:"3d",onAdd:function(e,o){this.showFloorplan3DOnMapCamera=new L.ubm(45,l.canvasRef.current.offsetWidth/l.canvasRef.current.offsetHeight,1,5e4),l.floorplan3DOnMapCamera=this.showFloorplan3DOnMapCamera,l.floorplan3DOnMapCameraPosition=this.showFloorplan3DOnMapCamera.position.clone(),this.showFloorplan3DOnMapScene=new L.Z58,l.floorplan3DOnMapScene=this.showFloorplan3DOnMapScene,this.map=e,this.showFloorplan3DOnMapRenderer=new L.JeP({canvas:e.getCanvas(),context:o,antialias:!0,preserveDrawingBuffer:!0}),l.floorplan3DOnMapRenderer=this.showFloorplan3DOnMapRenderer,this.showFloorplan3DOnMapRenderer.setClearColor(16777215,1),this.showFloorplan3DOnMapRenderer.setPixelRatio(window.devicePixelRatio),this.showFloorplan3DOnMapRenderer.setSize(l.canvasRef.current.offsetWidth,l.canvasRef.current.offsetHeight),this.showFloorplan3DOnMapRenderer.autoClear=!1,this.showFloorplan3DOnMapRenderer.shadowMap.enabled=!0,this.showFloorplan3DOnMapRenderer.shadowMap.type=L.Wk7,this.showFloorplan3DOnMapRenderer.shadowMap.autoUpdate=!1,l.floorplanOnMapHUDObject=new Cl(this.showFloorplan3DOnMapScene),l.floorplanItemCurrentHUDObject=l.floorplanOnMapHUDObject,l.createAmbientLight(this.showFloorplan3DOnMapScene),l.drawFloorplan(this.showFloorplan3DOnMapScene),l.floorplanOnMapUserInteractionController=new xl(this.showFloorplan3DOnMapScene,this.map.getCanvas(),t,l),l.userInteractionCurrentController=l.floorplanOnMapUserInteractionController;const s=new L.Pq0(l.floorplanWallsBoundingBox2DCoordinates.minX,0,l.floorplanWallsBoundingBox2DCoordinates.minY).multiplyScalar(l.scaleFactor);this.showFloorplan3DOnMapScene.translateX(-s.x),this.showFloorplan3DOnMapScene.translateZ(-s.z),l.rotateAroundPoint(this.showFloorplan3DOnMapScene,new L.Pq0(0,0,0),new L.Pq0(0,1,0),-n*(Math.PI/180)),document.dispatchEvent(new CustomEvent("sceneTransformed")),l.initializeSunLightPositionIntervalCalculation(!0,l.floorplan3DOnMapScene,l.sunLightPositionFloorplan3DOnMapCameraHelpers),i&&l.focusFloorplanOnMap()},render:function(e,t){if(!l.mounted)return;const i=(new L.kn4).makeRotationAxis(new L.Pq0(1,0,0),r.rotateX),o=(new L.kn4).makeRotationAxis(new L.Pq0(0,1,0),r.rotateY),n=(new L.kn4).makeRotationAxis(new L.Pq0(0,0,1),r.rotateZ),s=(new L.kn4).fromArray(t),a=(new L.kn4).makeTranslation(r.translateX,r.translateY,r.translateZ).scale(new L.Pq0(r.scale,-r.scale,r.scale)).multiply(i).multiply(o).multiply(n);this.showFloorplan3DOnMapCamera.projectionMatrix=s.multiply(a);const h=(new L.Pq0).applyMatrix4(this.showFloorplan3DOnMapCamera.projectionMatrix.clone().invert());h.equals(l.floorplan3DOnMapCameraPosition)||(l.floorplan3DOnMapCameraPosition.copy(h),l.onCameraMoved()),this.showFloorplan3DOnMapRenderer.resetState(),this.showFloorplan3DOnMapRenderer.render(this.showFloorplan3DOnMapScene,this.showFloorplan3DOnMapCamera),l.props.mainComponentThis.isAddOnApp&&l.changedLightsShadowMaps.length>0&&l.isLightsShadowMapChangeFinished(!0),this.map.triggerRepaint()}};e.getStyle().layers.find((e=>"waterway-label"===e.id))?e.addLayer(h,"waterway-label"):e.addLayer(h)}function _h(e,t){const i=["floorplanViewWalls3D"],o=["floorplanViewRoomFloors"],n=this.getPanel3DFixedItemsOptions(),s=n.map((e=>e.floorplanViewArray));this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&(i.push("currentWalls3D"),o.push("currentRoomFloors"),s.push(...n.map((e=>e.currentViewArray)))),i.forEach((i=>this[i].forEach((i=>{i.floorNumber===e&&(i.setWallPlanesObjectsVisibility(t,!1),i.floorThicknessWallPart.visible=t,i.updateFrontWallVisibility())})))),o.forEach((i=>this[i].forEach((i=>{if(i.floorNumber===e){const e=!i.isNoneFloorType&&t;i.thickMesh.visible=e,i.visible=e}})))),s.forEach((i=>i.forEach((i=>{i.floorNumber===e&&i.setVisibilityStatus(t)}))))}function yh(e){if(this.showMapLayer3DInputRef.current.getCheckedStatus()){const t=new L.Pq0(this.floorplanWallsBoundingBox2DCoordinates.minX,0,this.floorplanWallsBoundingBox2DCoordinates.minY).multiplyScalar(this.scaleFactor),i=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;e.copy(new L.Pq0(e.x+t.x,e.y,e.z+t.z));const o=[{x:e.x,y:e.z}];Ut(o,{x:t.x,y:t.z},-f(i)),e.x=o[0].x,e.z=o[0].y}}function Sh(e){const t=new L.Pq0(this.floorplanWallsBoundingBox2DCoordinates.minX,0,this.floorplanWallsBoundingBox2DCoordinates.minY).multiplyScalar(this.scaleFactor),i=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0,o=[{x:e.x,y:e.z}];Ut(o,{x:t.x,y:t.z},f(i)),e.x=o[0].x,e.z=o[0].y,e.x-=t.x,e.z-=t.z}function vh(e){if("inWall"===e.family||"onWall"===e.family){const t="inWall"===e.family?"inWallItemObjects":"onWallItemObjects";let i;for(let o=0;o<this.floorplanViewWalls3D.length;o++)if(i=this.floorplanViewWalls3D[o][t].find((t=>t.object2D.id===e.id)),i)return i}else{const t=this.getPanel3DFixedItemsOptions().map((e=>e.floorplanViewArray));for(let i=0;i<t.length;i++)for(let o=0;o<t[i].length;o++)if(t[i][o].object2D.id===e.id)return t[i][o]}return null}function Dh(){let e=[this.floorplan3DViewScene];return this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&e.push(this.floorplan3DOnMapScene),e}function Th(e,t){const i=t||this.userInteractionCurrentController.selectedObject;if(i&&(e(i),this.showMapLayer3DInputRef.current.getCheckedStatus())){const t=this.getFloorplanViewSceneItem(i.object2D);t&&e(t)}}function jh(e,t){0!==t.rotationX.previousAngleDeg&&this.cameraItemRotationX(e,0,-t.rotationX.previousAngleDeg,t.rotationY.previousAngleDeg),0!==t.rotationY.previousAngleDeg&&this.cameraItemRotationY(e,0,-t.rotationY.previousAngleDeg),this.cameraItemRotationY(e,0,t.rotationY.newAngleDeg),this.cameraItemRotationX(e,0,t.rotationX.newAngleDeg,t.rotationY.newAngleDeg)}function Ih(e,t,i){if("surveillanceCamera"===e.object2D.type||"CCTV"===e.object2D.type){let o=[],n=new L.Pq0;if("surveillanceCamera"===e.object2D.type){o=["sweethome3d_opening_on_hinge_1_Cubo","sweethome3d_opening_on_hinge_1_Cube.002_Cube.002","sweethome3d_opening_on_hinge_1_Cube.000_Cube.000","sweethome3d_opening_on_hinge_1_Cube.003_Cube.003","sweethome3d_opening_on_hinge_1_Cilindro.001_Cilindro.001","sweethome3d_opening_on_hinge_1_Cubo_Cubo.007"].map((t=>e.mesh.children.find((e=>e.name===t))));const t=e.mesh.children.find((e=>"sweethome3d_hinge_1"===e.name)),i=(new L.NRn).setFromObject(t,!0);i.getCenter(n),n.y=i.max.y}else"CCTV"===e.object2D.type&&(o=["Sphere","Circle"].map((t=>e.mesh.children.find((e=>e.name===t)))),n=e.getItemCenter(),pi(e.mesh)===this.floorplan3DOnMapScene&&e.sceneTransformedCalled&&this.inverseProcessSceneVec3(n));const s=new L.Pq0(0,1,0);o.forEach((o=>this.rotateAroundPoint(o,n.clone(),s.clone(),ue[e.object2D.type].modelRotationYAngleSign*f(i-t),!0)))}}function Ph(e,t,i,o){if("surveillanceCamera"===e.object2D.type||"CCTV"===e.object2D.type){let n=[],s=new L.Pq0;if("surveillanceCamera"===e.object2D.type){console.log("Surveilance camera"),n=["sweethome3d_opening_on_hinge_1_Cubo","sweethome3d_opening_on_hinge_1_Cube.002_Cube.002","sweethome3d_opening_on_hinge_1_Cube.000_Cube.000","sweethome3d_opening_on_hinge_1_Cube.003_Cube.003","sweethome3d_opening_on_hinge_1_Cilindro.001_Cilindro.001","sweethome3d_opening_on_hinge_1_Cubo_Cubo.007"].map((t=>e.mesh.children.find((e=>e.name===t))));const t=e.mesh.children.find((e=>"sweethome3d_hinge_1"===e.name)),i=(new L.NRn).setFromObject(t,!0);i.getCenter(s),s.y=i.max.y}else if("CCTV"===e.object2D.type){n=[e.mesh.children.find((e=>"Sphere"===e.name))],s=e.getItemCenter(),pi(e.mesh)===this.floorplan3DOnMapScene&&e.sceneTransformedCalled&&this.inverseProcessSceneVec3(s)}const a=((e,t,i)=>{const o=e.clone();mi(t,i),o.add(t);const n=e.clone().sub(o);return n.normalize(),n})(s,new L.Pq0(100,0,0),e.mesh);e.object2D.additionalParams.mirrored&&a.negate();const r=(new L.PTz).setFromAxisAngle(new L.Pq0(0,1,0),-f(e.object2D.additionalParams.mirrored?ue[e.object2D.type].modelMirroredRotationYSign*o:o)),l=a.clone();l.applyQuaternion(r),l.normalize(),n.forEach((e=>{this.rotateAroundPoint(e,s.clone(),l.clone(),f(i-t),!0)}))}}function Oh(){this.getActiveScenes().forEach((e=>{const t=e.getObjectByName("coverage_area_mesh");t&&(t.parent.remove(t),hi(t))}))}function kh(e){if(this.userInteractionCurrentController.selectedObject){const t=[{scene:this.showMapLayer3DInputRef.current.getCheckedStatus()?this.floorplan3DOnMapScene:this.floorplan3DViewScene,cameraItem:this.userInteractionCurrentController.selectedObject}];if(this.showMapLayer3DInputRef.current.getCheckedStatus()){const i=this.getFloorplanViewSceneItem(e);i&&t.push({scene:this.floorplan3DViewScene,cameraItem:i})}t.forEach((t=>{const i=t.cameraItem.mesh.children.find((t=>t.name===ue[e.type].cameraLensMeshName));i||console.error("Coverage area 3D exception");let o=!1;const n=t.scene.getObjectByName("coverage_area_mesh");if(n?n.cameraObj2DId===e.id&&n.cameraDistanceValue===e.additionalParams.cameraDistance&&n.horizontalFOVAngleValue===e.additionalParams.cameraHorizontalFOVAngleDeg||(n.parent.remove(n),hi(n),o=!0):o=!0,!o||!i)return;const s=t.cameraItem.cameraItemProperties.cameraLensMeshLensPosLocal.clone(),a=e.additionalParams.cameraDistance*this.scaleFactor,r=f(e.additionalParams.cameraHorizontalFOVAngleDeg),l=f(this.firstPersonControlsCamera.fov),h=2*a*Math.tan(l/2),c=2*a*Math.tan(r/2),d=new L.Pq0;i.getWorldScale(d);const p=a*(1/Math.abs(d.z)),m=h*(1/Math.abs(d.y)),u=c*(1/Math.abs(d.x));let g=[new L.Pq0(-u/2,-m/2,p),new L.Pq0(u/2,-m/2,p),new L.Pq0(u/2,m/2,p),new L.Pq0(-u/2,m/2,p),new L.Pq0(0,0,p)];const b=bi(t.cameraItem.cameraItemProperties.cameraLensMeshCenterLocal,s),w=g[g.length-1].clone();t.cameraItem.mesh.localToWorld(w),i.worldToLocal(w),w.add(s);const C=bi(s,w),x=new L.PTz;x.setFromUnitVectors(C,b),g.forEach((e=>{t.cameraItem.mesh.localToWorld(e),i.worldToLocal(e),e.applyQuaternion(x),e.add(s)})),g=g.map((e=>e.toArray()));const _=new L.LoY;_.setAttribute("position",new L.THS(new Float32Array([...s.toArray(),...g[0],...g[1],...g[2],...g[3]]),3));const y=[];y.push(0,1,4),y.push(0,2,3),y.push(1,4,2),y.push(2,3,4),y.push(0,3,4),y.push(0,1,2),_.setIndex(y),_.computeVertexNormals();const S={nearPosition:{value:s},farCenterPosition:{value:new L.Pq0(g[4][0],g[4][1],g[4][2])},gradientColor:{value:new L.Q1f(33023)},opacityNear:{value:1},opacityMid:{value:.7},opacityFar:{value:.3}},v=new L.BKk({vertexShader:"\n        varying float vGradientPos; // Pass gradient position to fragment shader\n      \n        uniform vec3 nearPosition; // Near plane center position\n        uniform vec3 farCenterPosition; // Far plane center position\n      \n        void main() {\n          // Compute the view direction: near plane to far plane\n          vec3 viewDirection = normalize(farCenterPosition - nearPosition);\n      \n          // Project vertex position onto the view direction\n          vec3 vertexToNear = position - nearPosition;\n          float distanceAlongView = dot(vertexToNear, viewDirection);\n      \n          // Compute the total distance between near and far positions\n          float totalDistance = length(farCenterPosition - nearPosition);\n      \n          // Normalize gradient position to range [0.0, 1.0]\n          vGradientPos = clamp(distanceAlongView / totalDistance, 0.0, 1.0);\n      \n          // Transform vertex position\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n      varying float vGradientPos; // Gradient position passed from vertex shader\n    \n      uniform vec3 gradientColor; // Base color for the gradient\n      uniform float opacityNear;  // Opacity at near plane\n      uniform float opacityMid;   // Opacity at midpoint (50%)\n      uniform float opacityFar;   // Opacity at far plane\n    \n      void main() {\n        float opacity;\n    \n        // Piecewise linear interpolation for opacity\n        if (vGradientPos < 0.5) {\n          // Interpolate between near and midpoint\n          opacity = mix(opacityNear, opacityMid, vGradientPos / 0.5);\n        } else {\n          // Interpolate between midpoint and far plane\n          opacity = mix(opacityMid, opacityFar, (vGradientPos - 0.5) / 0.5);\n        }\n    \n        // Final color with gradient opacity\n        gl_FragColor = vec4(gradientColor, opacity);\n      }\n    ",uniforms:S,transparent:!0,side:L.$EB}),D=new L.eaF(_,v);D.cameraObj2DId=e.id,D.name="coverage_area_mesh",D.cameraDistanceValue=e.additionalParams.cameraDistance,D.horizontalFOVAngleValue=e.additionalParams.cameraHorizontalFOVAngleDeg,D.raycast=()=>{},i.add(D)}))}}function Fh(e){this.orbitControlsCamera.position.copy((new L.Pq0).fromArray(e.cameraParams.cameraPosition)),this.orbitControls.target=(new L.Pq0).fromArray(e.cameraParams.cameraTarget),this.orbitControls.update()}function Mh(e){e.surfaceItemProperties&&(e.mesh.updateWorldMatrix(!0,!0),e.mesh.surfacePlane.position.copy(e.surfaceItemProperties.surfaceAreaMeshFrontPointLocal))}function Ah(e,t,i,o){this.updateSunLightPosition(t,i,o),e?this.sunLightPositionFloorplan3DOnMapInterval=setInterval((()=>this.updateSunLightPosition(t,i)),this.updateSunLightPositionIntervalDelayMs):this.sunLightPositionFloorplan3DViewInterval=setInterval((()=>this.updateSunLightPosition(t,i)),this.updateSunLightPositionIntervalDelayMs)}function Rh(e,t){e&&(clearInterval(e),t?this.sunLightPositionFloorplan3DOnMapInterval=null:this.sunLightPositionFloorplan3DViewInterval=null)}function Lh(){this.closeActiveRightBox(),this.props.mainComponentThis.floorplanItemsSelectionBoxRef&&(this.props.mainComponentThis.floorplanItemsSelectionBoxRef.current.closeFloorplanItemsSelectionBox(),this.props.mainComponentThis.floorplanItemsSelectionBoxContainerRef.current.style.transform=`translateX(${this.props.mainComponentThis.panel.current.style.width})`),this.leftPanel3DExtendedChoicePartRef.current.close(),this.props.mainComponentThis.boxInfo.current.innerHTML="",window.removeEventListener("keydown",this.handleKeyDown3D),window.addEventListener("keydown",this.props.mainComponentThis.handleKeyDown,{capture:!0}),this.props.mainComponentThis.setShow3DStatus(!1)}function Bh(){console.log("Canvas resize");let e=this.props.mainComponentThis.floorplan3DContainerRef.current.getBoundingClientRect();new Array(this.orbitControlsCamera,this.firstPersonControlsCamera).forEach((t=>{t.aspect=e.width/e.height,t.updateProjectionMatrix()})),this.floorplan3DViewRenderer.setSize(e.width,e.height),this.floorplanNavigationRef.current.updateNavigatorShape(),this.showMapLayer3DInputRef.current.getCheckedStatus()&&(this.floorplan3DOnMapCamera.aspect=e.width/e.height,this.floorplan3DOnMapCamera.updateProjectionMatrix(),this.floorplan3DOnMapRenderer.setSize(e.width,e.height))}function Wh(){this.state.isPanelShowed?this.hidePanel():(this.panel.current.style.transform=`translateX(${this.panelWidth}px)`,this.sceneControlToolsContainer.current.style.transform=`translateX(${this.panelWidth}px)`,this.props.mainComponentThis.floorplanItemsSelectionBoxRef&&(this.props.mainComponentThis.floorplanItemsSelectionBoxContainerRef.current.style.transform=`translateX(${this.panelWidth}px)`),this.panelControl.current.style.transform=`translateX(${this.panelWidth}px)`),this.setState({isPanelShowed:!this.state.isPanelShowed})}function Nh(){const e=document.querySelectorAll(".scene-control");for(let t=0;t<e.length;t++)e[t].classList.toggle("hide-control");this.setState({showSceneControls:!this.state.showSceneControls})}function Vh(){const e=this.showMapLayer3DInputRef.current.getCheckedStatus()?this._map.getCanvas():this.canvasRef.current,t=e.toDataURL("image/png");let i=document.createElement("canvas");i.width=e.width*this.exportPngResolutionScale,i.height=e.height*this.exportPngResolutionScale;let o=i.getContext("2d");o.scale(this.exportPngResolutionScale,this.exportPngResolutionScale);let n=new Image;n.onload=()=>{o.drawImage(n,0,0);let t=new Image;t.onload=()=>{o.drawImage(t,e.width-176,e.height-50,166,40);const n=i.toDataURL("image/png"),s=document.createElement("a");s.download=`GLAMOS_3DFloorplan_${(new Date).getDate().toString().padStart(2,"0")}_${((new Date).getMonth()+1).toString().padStart(2,"0")}_${(new Date).getFullYear()}`,s.href=n,s.click()},t.src=Ke},n.src=t}function Eh(e,t,i){this.showMapLayer3DInputRef.current.getCheckedStatus()?(t&&t(),this.currentControls.setEnabledStatus(!0),this.cameraControlsRef.current.setIsMapActiveState(!1),this.currentControls===this.firstPersonControls&&this.floorplanNavigationRef.current.setActiveStatus(!0),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),di(this.floorplan3DOnMapScene,this.floorplan3DOnMapRenderer),this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers),this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1,this.onCameraMoved),this.setCurrentFromFloorplanArrays(),this.userInteractionCurrentController=this.floorplanViewUserInteractionController,this.floorplanItemCurrentHUDObject=this.floorplanViewHUDObject,n.unmountComponentAtNode(this.mapLayer3DContainerRef.current)):e.get.call(this,this.props.mainComponentThis.isAddOnApp?`/klet3d/entity/${this.props.mainComponentThis.getFloorplanID()}/${this.props.mainComponentThis.props.licenseKey}`:`/klet3d/plans?planId=${this.props.mainComponentThis.getFloorplanID()}`,(t=>{t&&t.length>0?m(this.props.mainComponentThis.getFloorplanGpsLatitude(t[0].plan_general))&&m(this.props.mainComponentThis.getFloorplanGpsLongitude(t[0].plan_general))?(this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1),this.props.mainComponentThis.onFloorplanGpsCoordsClick(e)()):(i&&i(),this.currentControls.setEnabledStatus(!1),this.cameraControlsRef.current.setIsMapActiveState(!0),this.floorplanNavigationRef.current.setActiveStatus(!1),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.mapLayer3DContainerRef.current.classList.add("active"),this.props.mainComponentThis.floorplanGeneral=t[0].plan_general,this.showMapLayer3DInputRef.current.setCheckedStatus(!0,(()=>{n.render((0,a.jsx)(sr,{api:e,is3D:!0,center:[this.props.mainComponentThis.getFloorplanGpsLongitude(t[0].plan_general),this.props.mainComponentThis.getFloorplanGpsLatitude(t[0].plan_general)],floorplanGpsCoords:[this.props.mainComponentThis.getFloorplanGpsLongitude(t[0].plan_general),this.props.mainComponentThis.getFloorplanGpsLatitude(t[0].plan_general)],onMapContextLoadedCallback:this.show3DFloorplanOnMap,preserveDrawingBuffer:!0,mainComponentThis:this.props.mainComponentThis}),this.mapLayer3DContainerRef.current)}))):(this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1),this.boxInfo.current.innerHTML="There is no floorplan with specified id")})),console.log("Active",this.shadowCastingLightsActive),console.log("Waiting",this.shadowCastingLightsWaitingList)}function Hh(){this.panel.current.style.transform="translateX(0px)",this.sceneControlToolsContainer.current.style.transform="translateX(0px)",this.panelControl.current.style.transform="translateX(0px)",this.props.mainComponentThis.floorplanItemsSelectionBoxRef&&(this.props.mainComponentThis.floorplanItemsSelectionBoxContainerRef.current.style.transform="translateX(0px)")}function zh(e,t){return this.currentControls===this.firstPersonControls&&this.currentControls.resetState(),this.floorplanItemCurrentHUDObject.itemSelected(e),this.closeActiveRightBox(),!!e.object2D&&(e.object3DProperties.detected_object_field?(this.props.mainComponentThis.openPresenceAreaToolsRightBox(e.mesh.parent.object2D,this),!0):"inWall"===e.object2D.family||"onWall"===e.object2D.family?(this.props.mainComponentThis.openWallItemToolsRightBox(t,e.object2D,this),!0):(this.props.mainComponentThis.openFreeItemToolsRightBox(t,e.object2D,this),!0))}function Gh(){this.floorplanItemCurrentHUDObject.itemUnselected(),this.closeActiveRightBox()}function qh(){this.closeActiveRightBox()}function Uh(){this.props.mainComponentThis.hideActiveRightBox(),this.props.mainComponentThis.removeSelectedBinder()}function Yh(){this.showMapLayer3DInputRef.current.getCheckedStatus()?(this._map.setPitch(0),this.focusFloorplanOnMap()):this.currentControls===this.orbitControls&&(this.floorplan3DViewCamera.position.set(this.floorplanWallsObjectsBBoxCenterVector.x,this.orbitControls.movementRestrictionPivotPoint?(this.orbitControls.maxDistance-1)/this.floorplanEnvironmentRadiusScaleFactor/2:this.floorplanEnvironmentRadius/this.floorplanEnvironmentRadiusScaleFactor/2,this.floorplanWallsObjectsBBoxCenterVector.z),this.orbitControls.target=this.floorplanWallsObjectsBBoxCenterVector.clone(),this.orbitControls.update())}function Xh(){this.showMapLayer3DInputRef.current.getCheckedStatus()?this.focusFloorplanOnMap():this.currentControls===this.firstPersonControls?(this.centerFloorFirstPersonControlsCamera(),this.updateWallsVisibility()):(this.centerFloorOrbitControlsCamera(),this.orbitControls.target=this.floorplanWallsObjectsBBoxCenterVector.clone(),this.orbitControls.update())}var Kh=i(6027),Zh=i(9659);function $h(e){this.timeIntervalBetweenFrames=50,this.floorplan3DViewRenderer=null,this.floorplan3DViewCamera=null,this.orbitControlsCamera=null,this.firstPersonControlsCamera=null,this.floorplan3DViewScene=null,this.currentControls=null,this.orbitControls=null,this.firstPersonControls=null,this.firstPersonCameraTransitionInProgress=!1,this.exportPngResolutionScale=4,this.scaleFactor=e.mainComponentThis.floorplan3DScaleFactor,this.doorHeight=180,this.windowHeight=100,this.isPointOnWallDecimalPrecision=e.mainComponentThis.isPointOnWallDecimalPrecision,this.panelWidth=220,this.floorplanWallsBoundingBox2DCoordinates=null,this.floorplanWallsBBoxCenterVector=null,this.floorplanWallsObjectsBoundingBox2DCoordinates=null,this.floorplanWallsObjectsBBoxCenterVector=null,this.wallStartEndPlanesColor=14540253,this.wallTopBottomPlanesColor=14540253,this.textureLoader=new L.Tap,this.gltfLoader=new Zh.B,this.fontLoader=new Kh.J,this.materialToTextureMappings={},this.mounted=!1,this.floorplanWallMaterials=[],this.roomFloorTextures=[],this.loadedTextures=[],this.loadingWallMaterialsStatuses=[],this.loadingRoomFloorTexturesStatuses=[],this.loadingCallbacksStatuses=[],this.loadingWallObjectsStatuses=[],this.floorplanViewWalls3D=[],this.currentWalls3D=[],this.floorplanViewRoomFloors=[],this.currentRoomFloors=[],this.textFont=null,this.floorplan3DOnMapScene=null,this.floorplan3DOnMapCameraPosition=null,this.floorplan3DOnMapCamera=null,this.floorplan3DOnMapRenderer=null,this._map=null,this.floorplanFloors=[],this.floorplanViewUserInteractionController=null,this.floorplanOnMapUserInteractionController=null,this.userInteractionCurrentController=null,this.floorplanViewHUDObject=null,this.floorplanOnMapHUDObject=null,this.floorplanItemCurrentHUDObject=null,this.floorplanEnvironmentRadius=0,this.floorplanEnvironmentRadiusScaleFactor=5,this.sunLightPositionFloorplan3DViewInterval=null,this.sunLightPositionFloorplan3DOnMapInterval=null,this.updateSunLightPositionIntervalDelayMs=6e4,this.floorplanStartDate=null,this.floorplanStartDateSetTimestamp=(new Date).getTime(),this.floorplanTimeMeshHeight=100,this.floorplanTimeMeshOffsetFromBBoxSide=3*e.mainComponentThis.meter*this.scaleFactor,this.skyMaterial=null,this.isInitialFloorplanDrawingFinished=!1,this.canvasRef=o.createRef(),this.panel=o.createRef(),this.panelControl=o.createRef(),this.sceneControlToolsContainer=o.createRef(),this.panelInfoExplanationBox=o.createRef(),this.heightFactorRef=o.createRef(),this.wallsOpacityRef=o.createRef(),this.mapLayer3DContainerRef=o.createRef(),this.showMapLayer3DInputRef=o.createRef(),this.wallsVisibilityOptionsRef=o.createRef(),this.cameraControlsRef=o.createRef(),this.roomCameraControlsRef=o.createRef(),this.floorplanFloorsPanelSelection3DRef=o.createRef(),this.floorplanNavigationRef=o.createRef(),this.orbitControlsRotatePanModeSwitchRef=o.createRef(),this.leftPanel3DExtendedChoicePartRef=o.createRef(),this.floorplan3DViewAnimate=this.floorplan3DViewAnimate.bind(this),this.onDataLoadedCallback=this.onDataLoadedCallback.bind(this),this.centerFloorOrbitControlsCamera=Hr.bind(this),this.setOrbitControlsBearingAroundTarget=zr.bind(this),this.setCircleNavigatorFromFirstPersonControls=Gr.bind(this),this.setFirstPersonControlsCameraPosition=qr.bind(this),this.centerFloorFirstPersonControlsCamera=Ur.bind(this),this.smoothTransitionToFirstPerson=Yr.bind(this),this.switchToFirstPersonControls=Xr.bind(this),this.onSwitchControlsClick=Kr.bind(this),this.isCameraPOVEnabled=Zr.bind(this),this.createFloorplanEnvironmentGround=Jr.bind(this),this.calculateFloorplanEnvironmentRadius=el.bind(this),this.drawFloorplanFloorsWalls=al.bind(this),this.drawFloorWalls=rl.bind(this),this.drawFloorplanFloorsWallObjects=ll.bind(this),this.drawFloorplanRoomFloors=hl.bind(this),this.drawFloorRoomFloors=cl.bind(this),this.drawPanel3DOptionFloorplanFreeItems=dl.bind(this),this.drawPanel3DOptionFloorFreeItems=pl.bind(this),this.redrawFloorplanFloorItems=ml.bind(this),this.getFloorplanFloorDrawingObjData=wl.bind(this),this.calculateShapeGeometryUVMappings=ec.bind(this),this.calculateAngleBetween2DVectors=tc.bind(this),this.createFloorplan3DXZPlaneBBoxPoints=ic.bind(this),this.calculateMaxXMaxZOffsetsFromCenterPoint=oc.bind(this),this.calculateCurrentDate=nc.bind(this),this.calculateTextureWrapValues=sc.bind(this),this.filterFurnitureObjData=ac.bind(this),this.filterPanel3DOptionFreeItemsObjData=rc.bind(this),this.getPanel3DFixedItemsOptions=lc.bind(this),this.removeNonWallFloorplanItemFrom3DArray=hc.bind(this),this.isFloorHidden=dc.bind(this),this.updateSelectedFloor3DObject2DReferences=pc.bind(this),this.getFloorplanDefaultView=mc.bind(this),this.determineSaveLabelName=uc.bind(this),this.loadFloorplanItemObject3D=Zl.bind(this),this.loadTexture=$l.bind(this),this.isInitialLoadingFinished=Ql.bind(this),this.createTextMesh=th.bind(this),this.createLightSourceMesh=oh.bind(this),this.createSurfaceMesh=nh.bind(this),this.createSurfacePlane=sh.bind(this),this.updateSurfaceAreaPlane=ah.bind(this),this.renderSurfaceAreaPlaneDefaultState=rh.bind(this),this.createTextureMaterial=lh.bind(this),this.rotateAroundPoint=ph.bind(this),this.translateObjectInWorld=mh.bind(this),this.createMeshFromObject=uh.bind(this),this.onCameraMoved=gh.bind(this),this.updateWallsVisibility=fh.bind(this),this.setFloorplanItemShadow=bh.bind(this),this.changeWallMaterialOpacity=wh.bind(this),this.focusFloorplanOnMap=Ch.bind(this),this.show3DFloorplanOnMap=xh.bind(this),this.processSceneVec3=yh.bind(this),this.inverseProcessSceneVec3=Sh.bind(this),this.getFloorplanViewSceneItem=vh.bind(this),this.getActiveScenes=Dh.bind(this),this.changeSelectedObjectMaterial=Th.bind(this),this.cameraItemRotation=jh.bind(this),this.cameraItemRotationY=Ih.bind(this),this.cameraItemRotationX=Ph.bind(this),this.removeCameraCoverageArea3DMesh=Oh.bind(this),this.createCameraCoverageArea3DVisualization=kh.bind(this),this.renderFloorplanCameraView=Fh.bind(this),this.setSurfacePlanePosition=Mh.bind(this),this.initializeSunLightPositionIntervalCalculation=Ah.bind(this),this.clearSunLightPositionInterval=Rh.bind(this),this.backTo2D=Lh.bind(this),this.onWindowResize=Bh.bind(this),this.onPanelControlClick=Wh.bind(this),this.handleSceneControlsVisibilityChange=Nh.bind(this),this.onExportPngClick=Vh.bind(this),this.hidePanel=Hh.bind(this),this.onFloorplanItemUnselect=Gh.bind(this),this.userInteractionControlerNothingClickedReset=qh.bind(this),this.closeActiveRightBox=Uh.bind(this),this.onBirdPerspectiveViewButtonClick=Yh.bind(this),this.onResetCameraViewButtonClick=Xh.bind(this)}function Jh(e,t,i,o){const n=this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();this.floorplanFloors=this.props.mainComponentThis.floorplanFloorsData.map((e=>e.floorNumber===n.floorNumber?{...e,floorHeight:this.props.mainComponentThis.floorHeight,objData:this.filterFurnitureObjData(this.props.mainComponentThis.OBJDATA),wallData:this.props.mainComponentThis.WALLS,roomData:this.props.mainComponentThis.ROOM.map((e=>this.props.mainComponentThis.isAddOnApp?this.calculateRoomCoordsOutsideWithOrphans(e):e)),floorNumber:this.props.mainComponentThis.floorNumber,floorNote:this.props.mainComponentThis.floorNote}:{...e,roomData:e.roomData.map((e=>this.props.mainComponentThis.isAddOnApp?this.calculateRoomCoordsOutsideWithOrphans(e):e)),objData:this.filterFurnitureObjData(e.objData).map((e=>{const t=this.props.mainComponentThis.createObj2DClassInstanceFromObj(e);return t.update(this.props.mainComponentThis),t}))})),this.floorplan3DViewScene=new L.Z58,this.floorplan3DViewRenderer=new L.JeP({antialias:!0,canvas:this.canvasRef.current,preserveDrawingBuffer:!0}),this.floorplan3DViewRenderer.setClearColor(16777215,1),this.floorplan3DViewRenderer.setPixelRatio(window.devicePixelRatio),this.floorplan3DViewRenderer.setSize(this.canvasRef.current.offsetWidth,this.canvasRef.current.offsetHeight),this.floorplan3DViewRenderer.autoClear=!1,this.floorplan3DViewRenderer.shadowMap.enabled=!0,this.floorplan3DViewRenderer.shadowMap.type=L.Wk7,this.floorplan3DViewRenderer.shadowMap.autoUpdate=!1,this.floorplanWallsBoundingBox2DCoordinates=this.props.mainComponentThis.getFloorplanWallsBBoxCoords();const s=mt(this.floorplanWallsBoundingBox2DCoordinates,this.scaleFactor);this.floorplanWallsBBoxCenterVector=new L.Pq0(s.x,0,s.y),this.floorplanWallsObjectsBoundingBox2DCoordinates=this.props.mainComponentThis.getFloorplanWallsObjectsBBoxCoords();const a=mt(this.floorplanWallsObjectsBoundingBox2DCoordinates,this.scaleFactor);this.floorplanWallsObjectsBBoxCenterVector=new L.Pq0(a.x,0,a.y),this.calculateFloorplanEnvironmentRadius(),this.orbitControlsCamera=new L.ubm(45,this.floorplan3DViewRenderer.domElement.offsetWidth/this.floorplan3DViewRenderer.domElement.offsetHeight,1,Math.max(2*this.floorplanEnvironmentRadius,5e4)),this.firstPersonControlsCamera=this.orbitControlsCamera.clone(),this.floorplanNavigationRef.current.updateNavigatorShape(),t&&this.centerFloorOrbitControlsCamera(),this.centerFloorFirstPersonControlsCamera(),this.orbitControls=new _l(this.orbitControlsCamera,this.floorplan3DViewRenderer.domElement,this.props.mainComponentThis.isAddOnApp?this.floorplanWallsObjectsBBoxCenterVector.clone():null,this),this.orbitControls.target=this.floorplanWallsObjectsBBoxCenterVector.clone(),this.orbitControls.update(),!t&&this.renderFloorplanCameraView(i?this.props.mainComponentThis.floorplanGeneral.floorplanCameraViews[o-1]:this.getFloorplanDefaultView()),this.firstPersonControls=new Ll(this.firstPersonControlsCamera,this.floorplan3DViewRenderer.domElement,this.floorplan3DViewScene,this.props.mainComponentThis.isAddOnApp?this.floorplanWallsObjectsBBoxCenterVector.clone():null,this),this.firstPersonControls.setEnabledStatus(!1),this.floorplan3DViewCamera=this.orbitControlsCamera,this.currentControls=this.orbitControls,this.floorplanViewHUDObject=new Cl(this.floorplan3DViewScene),this.floorplanItemCurrentHUDObject=this.floorplanViewHUDObject,this.createAmbientLight(this.floorplan3DViewScene),this.createFloorplanEnvironment(this.floorplan3DViewScene),L.B69.prototype.deepClone=function(e){return(new this.constructor).deepCopy(this,e)},L.B69.prototype.deepCopy=function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),e.material)if(e.material.isMaterial)this.material=e.material.clone();else{this.material=[];for(const t of e.material)this.material.push(t.clone())}if(e.geometry&&(this.geometry=e.geometry.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var o=e.children[i];this.add(o.deepClone())}return this},this.drawFloorplan(this.floorplan3DViewScene),this.floorplanViewUserInteractionController=new xl(this.floorplan3DViewScene,this.canvasRef.current,e,this),this.userInteractionCurrentController=this.floorplanViewUserInteractionController,this.floorplan3DViewAnimate(),window.addEventListener("keydown",this.handleKeyDown3D),this.floorplan3DViewRenderer.domElement.addEventListener("cameraMoved",this.onCameraMoved)}function Qh(){this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),di(this.floorplan3DViewScene,this.floorplan3DViewRenderer),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&di(this.floorplan3DOnMapScene,this.floorplan3DOnMapRenderer),this.orbitControls&&this.orbitControls.dispose(),this.firstPersonControls&&this.firstPersonControls.dispose(),window.removeEventListener("keydown",this.handleKeyDown3D),this.componentWillUnmountCustomCallback&&this.componentWillUnmountCustomCallback(),this.mounted=!1}function ec(e,t){let i,o=e.getAttribute("uv"),n=e.getAttribute("position"),s=new L.Pq0;for(let a=0;a<o.count;a++)s.fromBufferAttribute(n,a),i=t(s),o.setXY(a,i.x,i.y);o.needsUpdate=!0}function tc(e,t,i,o){return-Math.atan2(e*o-t*i,e*i+t*o)}function ic(e){let t=[new L.Pq0(e.minX,0,e.minY),new L.Pq0(e.minX+e.width,0,e.minY),new L.Pq0(e.minX,0,e.minY+e.height),new L.Pq0(e.minX+e.width,0,e.minY+e.height)];return t.forEach((e=>e.multiplyScalar(this.scaleFactor))),t}function oc(e,t){let i=-1/0,o=-1/0;for(let n=0;n<t.length-1;n++){let i=Math.abs(t[n].z-e.z);i>o&&(o=i)}for(let n=0;n<t.length-1;n++){let o=Math.abs(t[n].x-e.x);o>i&&(i=o)}return{maxXDist:i,maxZDist:o}}function nc(){return new Date(this.floorplanStartDate.getTime()+((new Date).getTime()-this.floorplanStartDateSetTimestamp))}function sc(e,t){let i,o;if(e){const n=t.width/t.height,s=t.scaleWidthValue/t.scaleHeightValue;n>1?(o=e,i=1/s*e*(t.width/t.height)):(o=s*e*(t.height/t.width),i=e)}else i=t.width/t.scaleWidthValue,o=t.height/t.scaleHeightValue;return{wrapSValue:i,wrapTValue:o}}function ac(e){return e.filter((e=>"furniture"!==e.class||this.props.mainComponentThis.furnitureDimensions[e.type]))}function rc(e,t){return e.filter((e=>"onWall"!==e.family&&"inWall"!==e.family)).filter((e=>t.isTargetObjectMode(e.type)))}function lc(){return this.panel3DOptions.filter((e=>"select"!==e.value&&!e.isUnfixed))}function hc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getPanel3DFixedItemsOptions().map((e=>e[t?"currentViewArray":"floorplanViewArray"]));let o;for(let n=0;n<i.length;n++)if(o=i[n].findIndex((t=>t.object2D.id===e.id)),-1!==o){i[n].splice(o,1);break}}function cc(){this.currentWalls3D=[...this.floorplanViewWalls3D],this.currentRoomFloors=[...this.floorplanViewRoomFloors],this.getPanel3DFixedItemsOptions().forEach((e=>e.currentViewArray=[...e.floorplanViewArray]))}function dc(e){return this.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===this.floorplanFloors.find((t=>t.floorNumber===e)).floorID))}function pc(e){e.objData=this.filterFurnitureObjData(this.props.mainComponentThis.OBJDATA);this.getActiveScenes().forEach((t=>{const i=t.getObjectsByProperty("isFloorplanItem",!0).filter((t=>t.itemObject.floorNumber===e.floorNumber));for(let o=0;o<i.length;o++)i[o].itemObject.object2D=e.objData.find((e=>e.id===i[o].itemObject.object2D.id))}))}function mc(){return this.props.mainComponentThis.floorplanGeneral.floorplanCameraViews.find((e=>e.isDefaultView))}function uc(e){this.floorplan3DSaveLabelRef&&("add_asterisk"===e?this.floorplan3DSaveLabelRef.current.innerHTML="SAVE*":"remove_asterisk"===e&&(this.floorplan3DSaveLabelRef.current.innerHTML="SAVE"))}function gc(e){const t=new L.$p8(4210752,this.props.mainComponentThis.ambientLightIntensity);e.add(t)}function fc(e){Qr.call(this,e,this.calculateSunPosition(this.floorplanStartDate))}function bc(e){const t=this.calculateControlsMaxDistance();this.orbitControls.maxDistance=t,this.firstPersonControls.maxDistance=t,this.createFloorplanEnvironmentSky(e),this.createFloorplanEnvironmentGround(e)}function wc(e,t,i){const o=Er.call(this,e,t,i),n=this.calculateControlsMaxDistance(),s=si(o,this.floorplanWallsObjectsBBoxCenterVector);if(s>=n){const e=(n-1)/s;o.y*=e,o.z*=e}this.orbitControlsCamera.position.copy(o)}function Cc(){return Math.cos(360/this.environmentCircleSegmentsCount/2*(Math.PI/180))*this.floorplanEnvironmentRadius}function xc(e,t){$r.call(this,e),this.smoothTransitionToFirstPerson(2,(()=>{t&&t()})),this.switchToFirstPersonControls()}var _c=i(8744),yc=i.n(_c),Sc=i(4866),vc=i.n(Sc);function Dc(e){const t=[e.coordsInsideWithOrphans.map((e=>({X:e.x,Y:e.y})))],i=new(yc().Paths),o=new(yc().ClipperOffset);o.AddPaths(t,yc().JoinType.jtMiter,yc().EndType.etClosedPolygon),o.Execute(i,1);let n=i[0];return n?(n=n.map((e=>({x:e.X,y:e.Y}))),vt(n[0],n[n.length-1])||n.push(n[0])):n=e.coordsInsideWithOrphans,{...e,coordsOutsideWithOrphans:n}}function Tc(e,t,i,o){const n=new L.dwI;n.set(t.x,i.x,o.x,t.y,i.y,o.y,t.z,i.z,o.z);let s=[];for(let a=0;a<e.length;a++)s.push(new L.Pq0(n.elements[0]*e[a].x+n.elements[1]*e[a].y+n.elements[2]*e[a].z,n.elements[3]*e[a].x+n.elements[4]*e[a].y+n.elements[5]*e[a].z,n.elements[6]*e[a].x+n.elements[7]*e[a].y+n.elements[8]*e[a].z));return s}function jc(){return null}function Ic(e,t){return e.filter((e=>t.isTargetObject3DMode(e.type)))}function Pc(){return this.panel3DOptions.filter((e=>e.isUnfixed))}function Oc(){cc.call(this),this.getPanel3DUnfixedItemsOptions().forEach((e=>e.currentViewArray=[...e.floorplanViewArray]))}function kc(){return Math.max(...this.floorplanFloors.map((e=>e.floorNumber)))}function Fc(e){return vc().getPosition(e,this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral))}function Mc(e,t){"add"===e?(this.props.mainComponentThis.floorplan3DContainerRef.current.addEventListener("click",t),this.props.mainComponentThis.floorplan3DContainerRef.current.addEventListener("touchstart",t)):(this.props.mainComponentThis.floorplan3DContainerRef.current.removeEventListener("click",t),this.props.mainComponentThis.floorplan3DContainerRef.current.removeEventListener("touchstart",t))}function Ac(e,t,i){return o=>{const n={x:o.touches?o.touches[0].pageX:o.clientX,y:o.touches?o.touches[0].pageY:o.clientY};l(n.x,n.y,e.current.getBoundingClientRect())||l(n.x,n.y,t.current.getBoundingClientRect())||i()}}function Rc(){this.getPanel3DUnfixedItemsOptions().forEach((e=>e.floorplanViewArray=[...e.currentViewArray])),Jl.call(this,(e=>{this.floorplanFloorsSceneControlsSelectionRef.current.setFloorplanFloors3DData(this.floorplanFloors,(()=>this.floorplanFloorsSceneControlsSelectionRef.current.setSelectedFloorplanFloor3D(e)))})),this.updateControlPanelState(),this.onObjectConnectorEntitiesDataChange3DHandler(this.props.mainComponentThis[this.props.mainComponentThis.entitiesDataArrayName])}const Lc=class{constructor(e,t,i,o,n,s,a,l,h){var c=this;this.createAndShowBoxMeasures=function(e,t,i,o,n){let s,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=t-e,l=o-i,h=(t-e)/c.mainComponentThis.meter,d=(o-i)/c.mainComponentThis.meter,p="m"+(t+40)+","+i;p+=" l60,0 m-40,10 l10,-10 l10,10 m-10,-10",p=p+" l0,"+l,p+=" m-30,0 l60,0 m-40,-10 l10,10 l10,-10",p=p+"M"+e+","+(i-40),p+=" l0,-60 m10,40 l-10,-10 l10,-10 m-10,10",p=p+" l"+r+",0",p+=" m0,30 l0,-60 m-10,40 l10,-10 l-10,-10",Ct(n.current),c.mainComponentThis.qSVG.create(n,"path",{d:p,stroke:a.color||"#555",fill:"none","stroke-width":a.strokeWidth||.5,"stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":4,"fill-rule":"nonzero"}),s=document.createElementNS("http://www.w3.org/2000/svg","text"),s.setAttributeNS(null,"x",t+70),s.setAttributeNS(null,"y",(o+i)/2+35),s.setAttributeNS(null,"fill",a.color||"#555"),s.setAttributeNS(null,"text-anchor","middle"),s.textContent=Et(d,c.userUnit,"meter","feet",2,!0,!0),s.setAttribute("transform","rotate(270 "+(t+70)+","+(o+i)/2+")"),n.current.appendChild(s),s=document.createElementNS("http://www.w3.org/2000/svg","text"),s.setAttributeNS(null,"x",(t+e)/2),s.setAttributeNS(null,"y",i-95),s.setAttributeNS(null,"fill",a.color||"#555"),s.setAttributeNS(null,"text-anchor","middle"),s.textContent=Et(h,c.userUnit,"meter","feet",2,!0,!0),n.current.appendChild(s)},this.isStartStopWallPoint=(e,t)=>{const i=r(e.x,0),o=r(e.y,0),n=r(t.start.x,0),s=r(t.start.y,0),a=r(t.end.x,0),l=r(t.end.y,0);return i===n&&o===s||i===a&&o===l},this.sliceWall=(e,t)=>{let i=new Nc(t.start,e,"normal",t.thick,t.material,t);i.equations.base=t.equations.base;let o=new Nc(e,t.end,"normal",t.thick,t.material,t);return o.equations.base=t.equations.base,[i,o]},this.onWallAddedSlicing=e=>{let t=[e],i=[],o={};if(e.equations.base){for(let e=0;e<t.length;e++){let n=!1;for(let s=0;s<this.mainComponentThis.WALLS.length-1;s++)if(o[s])console.log("Zid vec presijecen");else if(this.mainComponentThis.WALLS[s].equations.base){const a=Mt(t[e].equations.base,this.mainComponentThis.WALLS[s].equations.base,"object");if(a&&this.mainComponentThis.qSVG.btwn(a.x,t[e].start.x,t[e].end.x,"round")&&this.mainComponentThis.qSVG.btwn(a.y,t[e].start.y,t[e].end.y,"round")&&this.mainComponentThis.qSVG.btwn(a.x,this.mainComponentThis.WALLS[s].start.x,this.mainComponentThis.WALLS[s].end.x,"round")&&this.mainComponentThis.qSVG.btwn(a.y,this.mainComponentThis.WALLS[s].start.y,this.mainComponentThis.WALLS[s].end.y,"round")){if(o[s]=!0,!this.isStartStopWallPoint(a,t[e])){console.log("Sijeci zid koji se obraduje");const o=this.sliceWall(a,t[e],null);if(t.push(o[0],o[1]),this.isStartStopWallPoint(a,this.mainComponentThis.WALLS[s]))i.push(this.mainComponentThis.WALLS[s]);else{console.log("SIjeci postojeci 2"),i=i.filter((e=>e!==this.mainComponentThis.WALLS[s]));const e=this.sliceWall(a,this.mainComponentThis.WALLS[s]);i.push(e[0],e[1])}n=!0;break}if(this.isStartStopWallPoint(a,this.mainComponentThis.WALLS[s]))console.log("Ne sijeci postojeci"),i.push(this.mainComponentThis.WALLS[s]);else{console.log("Sijeci postojeci"),i=i.filter((e=>e!==this.mainComponentThis.WALLS[s]));const e=this.sliceWall(a,this.mainComponentThis.WALLS[s]);i.push(e[0],e[1])}console.log(i)}else console.log("Ne sijeku se"),i.push(this.mainComponentThis.WALLS[s])}else console.log("Nema equation"),i.push(this.mainComponentThis.WALLS[s]);!n&&i.push(t[e])}i=i.filter(((e,t,i)=>i.findIndex((t=>e===t))===t))}else i=this.mainComponentThis.WALLS;console.log("Final wals after slicing"),console.log(i),this.mainComponentThis.WALLS=i},this.removeZeroLengthWallsAndSliceExistingWalls=()=>{console.log("Walls count before filtering zero length "+this.mainComponentThis.WALLS.length);let e=this.mainComponentThis.WALLS.filter((e=>!vt(e.start,e.end)));this.mainComponentThis.WALLS=[],console.log("Walls count before slicing "+e.length);for(let t=0;t<e.length;t++)this.mainComponentThis.WALLS.push(e[t]),this.onWallAddedSlicing(e[t]);this.resolveOverlapingWalls(),console.log("Walls count befotre filtering duplicates"+this.mainComponentThis.WALLS.length),this.mainComponentThis.WALLS=this.mainComponentThis.WALLS.filter(((e,t,i)=>i.findIndex((t=>vt(e.start,t.start)&&vt(e.end,t.end)))===t)),console.log("Walls count after filtering duplicates"+this.mainComponentThis.WALLS.length)},this.boxWall=e,this.boxArea=t,this.panel=i,this.boxRoom=o,this.boxSurface=n,this.boxRib=s,this.areaValue=a,this.boxScale=l,this.mainComponentThis=h,this.userUnit=this.mainComponentThis.isAddOnApp?this.mainComponentThis.measureSystemContext.userUnit:this.mainComponentThis.context.userUnit}getWallNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];for(let o in this.mainComponentThis.WALLS)_t(this.mainComponentThis.WALLS[o],t)||(_t(this.mainComponentThis.WALLS[o].start,e)&&i.push({wall:this.mainComponentThis.WALLS[o],type:"start"}),_t(this.mainComponentThis.WALLS[o].end,e)&&i.push({wall:this.mainComponentThis.WALLS[o],type:"end"}));return 0!==i.length&&i}wallsComputing(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&Ct(o);for(let n=0;n<e.length;n++)t=e[n],null!=t.parent&&(_t(t.parent.start,t.start)||_t(t.parent.end,t.start)||(t.parent=null)),null!=t.child&&(_t(t.child.start,t.end)||_t(t.child.end,t.end)||(t.child=null));for(let n=0;n<e.length;n++){let s,a,r,l,h,c;if(t=e[n],null!=t.parent)_t(t.parent.start,t.start)&&(s=t.parent,a=s.end,r=s.start),_t(t.parent.end,t.start)&&(s=t.parent,a=s.start,r=s.end);else{let e=this.getWallNode(t.start,t);for(let o in e){let n=this.createEquationFromWall(e[o].wall),l=90;"move"===i&&(l=this.mainComponentThis.qSVG.angleBetweenEquations(n.A,this.mainComponentThis.equation2.A)),"start"===e[o].type&&null==e[o].wall.parent&&l>20&&l<160&&(t.parent=e[o].wall,e[o].wall.parent=t,s=t.parent,a=s.end,r=s.start),"end"===e[o].type&&null==e[o].wall.child&&l>20&&l<160&&(t.parent=e[o].wall,e[o].wall.child=t,s=t.parent,a=s.start,r=s.end)}}if(null!=t.child)_t(t.child.end,t.end)?(l=t.child,h=l.end,c=l.start):(l=t.child,h=l.start,c=l.end);else{let e=this.getWallNode(t.end,t);for(let o in e){let n=this.createEquationFromWall(e[o].wall),s=90;"move"===i&&(s=this.mainComponentThis.qSVG.angleBetweenEquations(n.A,this.mainComponentThis.equation2.A)),"end"===e[o].type&&null==e[o].wall.child&&s>20&&s<160&&(t.child=e[o].wall,e[o].wall.child=t,l=t.child,h=l.end,c=l.start),"start"===e[o].type&&null==e[o].wall.parent&&s>20&&s<160&&(t.child=e[o].wall,e[o].wall.parent=t,l=t.child,h=l.start,c=l.end)}}let d=Math.atan2(t.end.y-t.start.y,t.end.x-t.start.x);t.angle=d;let p,m,u,g,f=t.thick/2*Math.sin(d),b=t.thick/2*Math.cos(d),w=Lt(t.start.x+f,t.start.y-b,t.end.x+f,t.end.y-b),C=Lt(t.start.x-f,t.start.y+b,t.end.x-f,t.end.y+b),x=Lt(t.start.x,t.start.y,t.end.x,t.end.y);if(t.equations={up:w,down:C,base:x},null==t.parent)m=this.mainComponentThis.qSVG.perpendicularEquation(w,t.start.x,t.start.y),u=Mt(w,m,"object"),g=Mt(C,m,"object"),t.coords=[u,g],p="M"+u.x+","+u.y+" L"+g.x+","+g.y+" ";else{let e=this.mainComponentThis.qSVG.perpendicularEquation(w,t.start.x,t.start.y),i=Math.atan2(r.y-a.y,r.x-a.x),o=s.thick/2*Math.sin(i),n=s.thick/2*Math.cos(i),l=Lt(a.x+o,a.y-n,r.x+o,r.y-n),h=Lt(a.x-o,a.y+n,r.x-o,r.y+n);if(Math.abs(i-d)>.09){u=Mt(w,l,"object"),g=Mt(C,h,"object"),w.A===l.A&&(u={x:t.start.x+f,y:t.start.y-b},g={x:t.start.x-f,y:t.start.y+b}),this.mainComponentThis.qSVG.gap(u,{x:r.x,y:r.y})>1e3&&(u=Mt(e,w,"object"),g=Mt(e,C,"object"))}Math.abs(i-d)<=.09&&(u=Mt(e,w,"object"),g=Mt(e,C,"object")),t.coords=[u,g],p="M"+u.x+","+u.y+" L"+g.x+","+g.y+" "}if(null==t.child)m=this.mainComponentThis.qSVG.perpendicularEquation(w,t.end.x,t.end.y),u=Mt(w,m,"object"),g=Mt(C,m,"object"),t.coords.push(g,u),p=p+"L"+g.x+","+g.y+" L"+u.x+","+u.y+" Z";else{let e=this.mainComponentThis.qSVG.perpendicularEquation(w,t.end.x,t.end.y),i=Math.atan2(c.y-h.y,c.x-h.x),o=l.thick/2*Math.sin(i),n=l.thick/2*Math.cos(i),s=Lt(h.x+o,h.y-n,c.x+o,c.y-n),a=Lt(h.x-o,h.y+n,c.x-o,c.y+n);if(Math.abs(i-d)>.09){u=Mt(w,s,"object"),g=Mt(C,a,"object"),w.A===s.A&&(u={x:t.end.x+f,y:t.end.y-b},g={x:t.end.x-f,y:t.end.y+b}),this.mainComponentThis.qSVG.gap(u,{x:h.x,y:h.y})>1e3&&(u=Mt(w,e,"object"),g=Mt(C,e,"object"))}Math.abs(i-d)<=.09&&(u=Mt(w,e,"object"),g=Mt(C,e,"object")),t.coords.push(g,u),p=p+"L"+g.x+","+g.y+" L"+u.x+","+u.y+" Z"}t.graph=this.makeWall(p,t.material),o.appendChild(t.graph)}}makeWall(e){return this.mainComponentThis.qSVG.create("none","path",{d:e,stroke:"none",fill:"#666666","stroke-width":1,"stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":4,"fill-rule":"nonzero"})}visibleWall(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e||(e=this.mainComponentThis.binder.wall),e.type="normal",e.thick=e.backUp,e.backUp=!1,this.architect(this.mainComponentThis.WALLS),this.mainComponentThis.mode="select_mode",this.mainComponentThis.saveNeeded=!0,this.mainComponentThis.save(!1,!0),!0}architect(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.wallsComputing(e,!1,t?this.mainComponentThis.boxWallPreview.current:this.mainComponentThis.boxWall.current),this.mainComponentThis.Rooms=this.mainComponentThis.qSVG.polygonize(e),t||(Ct(this.boxRoom.current),Ct(this.boxSurface.current)),this.roomMaker(this.mainComponentThis.Rooms,t),!0}nearWallNode(e){let t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],s=1/0;for(let a=0;a<this.mainComponentThis.WALLS.length;a++)if(-1===n.indexOf(this.mainComponentThis.WALLS[a])){let o=this.mainComponentThis.WALLS[a].start,n=this.mainComponentThis.WALLS[a].end,r=Bt(o,e);r<s&&(t=o,s=r,i=a),r=Bt(n,e),r<s&&(t=n,s=r,i=a)}return s<=o&&{x:t.x,y:t.y,bestWall:i}}rayCastingWall(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mainComponentThis.WALLS,o=[];for(let n=0;n<i.length;n++)if(4===i[n].coords.length){let t=[];for(let e=0;e<4;e++)t.push({x:i[n].coords[e].x,y:i[n].coords[e].y});kt(e,t)&&o.push(i[n])}return 0!==o.length&&(t||1===o.length?o[0]:o)}stickOnWall(e){if(0===this.mainComponentThis.WALLS.length)return!1;let t=1/0,i={};if(0===this.mainComponentThis.WALLS.length)return!1;for(let n=0;n<this.mainComponentThis.WALLS.length;n++){let o=Lt(this.mainComponentThis.WALLS[n].coords[0].x,this.mainComponentThis.WALLS[n].coords[0].y,this.mainComponentThis.WALLS[n].coords[3].x,this.mainComponentThis.WALLS[n].coords[3].y),s=this.mainComponentThis.qSVG.nearPointOnEquation(o,e),a=Lt(this.mainComponentThis.WALLS[n].coords[1].x,this.mainComponentThis.WALLS[n].coords[1].y,this.mainComponentThis.WALLS[n].coords[2].x,this.mainComponentThis.WALLS[n].coords[2].y),r=this.mainComponentThis.qSVG.nearPointOnEquation(a,e);s.distance<t&&this.mainComponentThis.qSVG.btwn(s.x,this.mainComponentThis.WALLS[n].coords[0].x,this.mainComponentThis.WALLS[n].coords[3].x)&&this.mainComponentThis.qSVG.btwn(s.y,this.mainComponentThis.WALLS[n].coords[0].y,this.mainComponentThis.WALLS[n].coords[3].y)&&(t=s.distance,i={wall:this.mainComponentThis.WALLS[n],x:s.x,y:s.y,distance:s.distance}),r.distance<t&&this.mainComponentThis.qSVG.btwn(r.x,this.mainComponentThis.WALLS[n].coords[1].x,this.mainComponentThis.WALLS[n].coords[2].x)&&this.mainComponentThis.qSVG.btwn(r.y,this.mainComponentThis.WALLS[n].coords[1].y,this.mainComponentThis.WALLS[n].coords[2].y)&&(t=r.distance,i={wall:this.mainComponentThis.WALLS[n],x:r.x,y:r.y,distance:r.distance})}let o=this.nearVertice(e);if(o.distance<t){let e=Lt(o.number.coords[0].x,o.number.coords[0].y,o.number.coords[3].x,o.number.coords[3].y),n=this.mainComponentThis.qSVG.nearPointOnEquation(e,o),s=Lt(o.number.coords[1].x,o.number.coords[1].y,o.number.coords[2].x,o.number.coords[2].y),a=this.mainComponentThis.qSVG.nearPointOnEquation(s,o);n.distance<t&&this.mainComponentThis.qSVG.btwn(n.x,o.number.coords[0].x,o.number.coords[3].x)&&this.mainComponentThis.qSVG.btwn(n.y,o.number.coords[0].y,o.number.coords[3].y)&&(t=n.distance,i={wall:o.number,x:n.x,y:n.y,distance:n.distance}),a.distance<t&&this.mainComponentThis.qSVG.btwn(a.x,o.number.coords[1].x,o.number.coords[2].x)&&this.mainComponentThis.qSVG.btwn(a.y,o.number.coords[1].y,o.number.coords[2].y)&&(t=a.distance,i={wall:o.number,x:a.x,y:a.y,distance:a.distance})}return i}objFromWall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.OBJDATA,i=[];for(let o=0;o<t.length;o++){let n;if("inWall"===t[o].family||"onWall"===t[o].family){let s=Lt(e.start.x,e.start.y,e.end.x,e.end.y);n=this.mainComponentThis.qSVG.nearPointOnEquation(s,t[o]),n.distance<.01&&this.mainComponentThis.qSVG.btwn(t[o].x,e.start.x,e.end.x)&&this.mainComponentThis.qSVG.btwn(t[o].y,e.start.y,e.end.y)&&i.push(t[o])}}return i}createEquationFromWall(e){return Lt(e.start.x,e.start.y,e.end.x,e.end.y)}rayCastingWalls(e,t){let i=[];for(let o=0;o<t.length;o++)if(4===t[o].coords.length){let n=[];for(let e=0;e<4;e++)n.push({x:t[o].coords[e].x,y:t[o].coords[e].y});kt(e,n)&&i.push(t[o])}return 0!==i.length&&(1===i.length?i[0]:i)}inWallRib2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("In wall rib2 pozvan"),t||Ct(this.boxRib.current);let i,o=[],n=[];o.push(n),o.push(n);let s=e.angle*(180/Math.PI),a=this.objFromWall(e);o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[0],distance:0}),o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[1],distance:0});for(let r in a){let t=a[r];t.up=[this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.up,t.limit[0]),this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.up,t.limit[1])],t.down=[this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.down,t.limit[0]),this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.down,t.limit[1])],i=Bt(e.coords[0],t.up[0])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:r,side:"up",coords:t.up[0],distance:i.toFixed(2)}),i=Bt(e.coords[0],t.up[1])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:r,side:"up",coords:t.up[1],distance:i.toFixed(2)}),i=Bt(e.coords[1],t.down[0])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:r,side:"down",coords:t.down[0],distance:i.toFixed(2)}),i=Bt(e.coords[1],t.down[1])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:r,side:"down",coords:t.down[1],distance:i.toFixed(2)})}i=Bt(e.coords[0],e.coords[3])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[3],distance:i}),i=Bt(e.coords[1],e.coords[2])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[2],distance:i}),o[0].sort((function(e,t){return(e.distance-t.distance).toFixed(2)})),o[1].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let r in o)for(let e=1;e<o[r].length;e++){let t=!0,i=-5,n=Math.abs(o[r][e-1].distance-o[r][e].distance),a=s;if(t){"down"===o[r][e-1].side&&(i=10-i),(a>89||a<-89)&&(a-=180,i="down"===o[r][e-1].side?-5:10-i),this.mainComponentThis.sizeText[e]=document.createElementNS("http://www.w3.org/2000/svg","text");let t=this.mainComponentThis.qSVG.middle(o[r][e-1].coords.x,o[r][e-1].coords.y,o[r][e].coords.x,o[r][e].coords.y);this.mainComponentThis.sizeText[e].setAttributeNS(null,"x",t.x),this.mainComponentThis.sizeText[e].setAttributeNS(null,"y",t.y+i),this.mainComponentThis.sizeText[e].setAttributeNS(null,"text-anchor","middle"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-family","roboto"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"stroke","#ffffff"),this.mainComponentThis.sizeText[e].textContent=Et(n,this.userUnit),this.mainComponentThis.sizeText[e].textContent<1?(this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-size","0.8em"),this.mainComponentThis.sizeText[e].textContent=this.mainComponentThis.sizeText[e].textContent.substring(1,this.mainComponentThis.sizeText[e].textContent.length)):this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-size","15px"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"stroke-width","0.4px"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"fill","#666666"),this.mainComponentThis.sizeText[e].setAttribute("transform","rotate("+a+" "+t.x+","+t.y+")"),this.boxRib.current.appendChild(this.mainComponentThis.sizeText[e])}}}areSamePolygons(e,t){let i=this.mainComponentThis.qSVG.diffObjIntoArray(e.coordsInsideWithOrphans||e.coordsInside,t.coordsInsideWithOrphans||t.coordsInside);if(e.way.length===t.way.length||0===i){if(0===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length||0===i)return!0}else if(e.way.length===t.way.length+1){if(1===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length||2===i)return!0}else if(e.way.length===t.way.length-1&&1===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length)return!0;return!1}roomMaker(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.mainComponentThis.globalArea=0,0===e.polygons.length&&(this.mainComponentThis.ROOM=[]);for(let s=0;s<e.polygons.length;s++){let t=!1;for(let i=0;i<this.mainComponentThis.ROOM.length;i++)if(this.areSamePolygons(e.polygons[s],this.mainComponentThis.ROOM[i])){t=!0,this.mainComponentThis.ROOM[i].area=e.polygons[s].area,this.mainComponentThis.ROOM[i].realRoomArea=Vt(e.polygons[s]),this.mainComponentThis.ROOM[i].inside=e.polygons[s].inside,this.mainComponentThis.ROOM[i].insideNoDelete=e.roomsWithInsideRoomsNoDeleteIndexes[s],this.mainComponentThis.ROOM[i].coords=e.polygons[s].coords,this.mainComponentThis.ROOM[i].coordsOutside=e.polygons[s].coordsOutside,this.mainComponentThis.ROOM[i].way=e.polygons[s].way,this.mainComponentThis.ROOM[i].coordsInside=e.polygons[s].coordsInside,this.mainComponentThis.ROOM[i].coordsInsideWithOrphans=e.polygons[s].coordsInsideWithOrphans;break}t||(this.mainComponentThis.ROOM.push({id:this.mainComponentThis.roomIdCounter,coords:e.polygons[s].coords,coordsOutside:e.polygons[s].coordsOutside,coordsInside:e.polygons[s].coordsInside,coordsInsideWithOrphans:e.polygons[s].coordsInside,inside:e.polygons[s].inside,insideNoDelete:e.roomsWithInsideRoomsNoDeleteIndexes[s],way:e.polygons[s].way,area:e.polygons[s].area,realRoomArea:Vt(e.polygons[s]),surface:"",name:"",floorTexture:"none",showSurface:!1,action:"add"}),this.mainComponentThis.roomIdCounter++)}let i=[];for(let s=0;s<this.mainComponentThis.ROOM.length;s++)if(this.mainComponentThis.ROOM[s].inside.length>0&&!this.mainComponentThis.ROOM[s].insideNoDelete)i.push(s);else{let t=!1;for(let i=0;i<e.polygons.length;i++)if(this.areSamePolygons(e.polygons[i],this.mainComponentThis.ROOM[s])){t=!0;break}t||i.push(s)}i.sort((function(e,t){return t-e}));for(let s=0;s<i.length;s++)this.mainComponentThis.ROOM.splice(i[s],1);let o={};for(let s=0;s<this.mainComponentThis.ROOM.length;s++)if(!o[s])for(let e=0;e<this.mainComponentThis.ROOM.length;e++)s!==e&&this.areSamePolygons(this.mainComponentThis.ROOM[s],this.mainComponentThis.ROOM[e])&&(o[e]=!0);console.log("Duplicates to splice "+JSON.stringify(o));const n=Object.keys(o).sort(((e,t)=>t-e));for(let s=0;s<n.length;s++)this.mainComponentThis.ROOM.splice(n[s],1);if(!t){console.log("EMpty elememts"),Ct(this.boxRoom.current),Ct(this.boxSurface.current),Ct(this.boxArea.current);for(let e=0;e<this.mainComponentThis.ROOM.length;e++){"add"===this.mainComponentThis.ROOM[e].action&&(this.mainComponentThis.globalArea=this.mainComponentThis.globalArea+this.mainComponentThis.ROOM[e].realRoomArea);let t=this.mainComponentThis.ROOM[e].coords,i="M"+t[0].x+","+t[0].y;for(let e=1;e<t.length;e++)i=i+" L"+t[e].x+","+t[e].y;this.mainComponentThis.qSVG.create(this.boxRoom,"path",{"data-room-id":this.mainComponentThis.ROOM[e].id,d:i,fill:"color"===this.mainComponentThis.ROOM[e].roomFloorType?this.mainComponentThis.ROOM[e].floorColor:this.mainComponentThis.ROOM[e].roomFloorType&&"pattern"!==this.mainComponentThis.ROOM[e].roomFloorType?"none":"none"!==this.mainComponentThis.ROOM[e].floorTexture?`url(#room-texture_${this.mainComponentThis.ROOM[e].id})`:"none","fill-opacity":1,stroke:"none","fill-rule":"evenodd",class:"room"}),this.mainComponentThis.qSVG.create(this.boxSurface,"path",{d:i,fill:"none","fill-opacity":1,stroke:"none","fill-rule":"evenodd",class:"room"});let o,n=this.mainComponentThis.qSVG.polygonVisualCenter(this.mainComponentThis.ROOM[e]);""!==this.mainComponentThis.ROOM[e].name&&n&&(o={color:"#343938"},this.mainComponentThis.qSVG.textOnDiv(this.mainComponentThis.ROOM[e].name,n,o,this.mainComponentThis.boxArea.current)),""!==this.mainComponentThis.ROOM[e].name&&n&&(n.y=n.y+20),console.log("Area of room"),console.log(this.mainComponentThis.ROOM[e].realRoomArea),this.mainComponentThis.ROOM[e].realRoomArea<0&&console.log("Negative room surface"),o={color:"#343938",fontSize:"12.5px",fontWeight:"normal"},this.mainComponentThis.ROOM[e].surface&&(o.fontWeight="bold")}if(this.mainComponentThis.globalArea<=0)this.mainComponentThis.globalArea=0,this.areaValue.current.innerHTML="";else{const e=this.mainComponentThis.globalArea/(this.mainComponentThis.meter*this.mainComponentThis.meter);this.areaValue.current.innerHTML=zt(e,this.userUnit,"square meter","square foot",2,!0,!1)}"room_mode"===this.mainComponentThis.mode&&this.mainComponentThis.drawUnconnectedWallNodesHelper()}this.roomWallsClockwiseOrder(),console.log("Roomss"+this.mainComponentThis.ROOM.length),console.log(this.mainComponentThis.ROOM),this.renderRoomTextures()}createSvgRoomTextureElement(e,t){const i=Math.min(...e.coordsInsideWithOrphans.map((e=>e.x))),o=Math.min(...e.coordsInsideWithOrphans.map((e=>e.y))),n=Math.max(...e.coordsInsideWithOrphans.map((e=>e.x))),s=Math.max(...e.coordsInsideWithOrphans.map((e=>e.y))),r=n-i,l=s-o,h=Ge[e.floorTexture].height,c=l*this.mainComponentThis.floorplan3DScaleFactor/h;return(0,a.jsx)(fr,{patternId:t?"room-texture-preview":`room-texture_${e.id}`,roomId:e.id,textureName:e.floorTexture,positionX:i,positionY:o+l,width:r,height:l,floorTextureRepeatCount:e.floorTextureRepeatCount||c,floorTextureRepeatDirection:e.floorTextureRepeatCount?"automatic":"horizontal",mainComponentThis:this.mainComponentThis},[e.id,e.floorTexture,i,o,n,s,e.floorTextureRepeatCount].join("-"))}renderRoomTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mainComponentThis.ROOM;const t=this.mainComponentThis.roomTextureContainerRef.current;n.render((0,a.jsx)(a.Fragment,{children:e.map((e=>!e.floorTexture||"none"===e.floorTexture||e.roomFloorType&&"pattern"!==e.roomFloorType?null:this.createSvgRoomTextureElement(e,!1)))}),t)}renderRoomPreviewTexture(e){const t=this.mainComponentThis.roomTexturePreviewContainerRef.current;if(!e.floorTexture||"none"===e.floorTexture||e.roomFloorType&&"pattern"!==e.roomFloorType)return null;n.render(this.createSvgRoomTextureElement(e,!0),t)}roomWallsClockwiseOrder(){let e=[];for(let i=0;i<this.mainComponentThis.ROOM.length;i++){console.log("Room"),console.log(this.mainComponentThis.ROOM[i]),console.log(this.mainComponentThis.WALLS);let t={x:this.mainComponentThis.ROOM[i].coords[0].realX,y:this.mainComponentThis.ROOM[i].coords[0].realY};const o=Dt(this.mainComponentThis.ROOM[i].coords);if(console.log("Is clockwise "+o),o){let o,n;console.log("Nastavi obilazak sobe u dosadasnjem smjeru");for(let s=0;s<this.mainComponentThis.ROOM[i].coords.length-1;s++)o=s,n=o===this.mainComponentThis.ROOM[i].coords.length-2?0:o+1,console.log("Wall "+o+" -> "+n),console.log("Cwstop before "+JSON.stringify(t)),t=this.roomWallsClockwiseOrderProcessWall(this.mainComponentThis.ROOM[i],o,n,e,t),console.log("Cwstop after "+JSON.stringify(t))}else{let o,n;console.log("Obrni smjer obilaska sobe");for(let s=0;s>=0&&(o=s,0===s?(n=this.mainComponentThis.ROOM[i].coords.length-2,s=this.mainComponentThis.ROOM[i].coords.length-1):n=o-1,console.log("Wall "+o+" -> "+n),console.log("Cwstop before "+JSON.stringify(t)),t=this.roomWallsClockwiseOrderProcessWall(this.mainComponentThis.ROOM[i],o,n,e,t),console.log("Cwstop after "+JSON.stringify(t)),1!==s);s--);}}this.mainComponentThis.ORPHANWALLS=[];let t=[];for(let i=0;i<this.mainComponentThis.WALLS.length;i++)if(!e.find((e=>e===this.mainComponentThis.WALLS[i]))){const e=At(this.mainComponentThis.WALLS[i].start,this.mainComponentThis.ROOM,!1),o=At(this.mainComponentThis.WALLS[i].end,this.mainComponentThis.ROOM,!1);let n;if(this.mainComponentThis.ORPHANWALLS.push({wall:this.mainComponentThis.WALLS[i],startRoom:e,endRoom:o}),e&&!o?n=e:!e&&o&&(n=o),n){let e=t.find((e=>e.room===n));e?e.orphanWalls.push(this.mainComponentThis.ORPHANWALLS[this.mainComponentThis.ORPHANWALLS.length-1]):t.push({room:n,orphanWalls:[this.mainComponentThis.ORPHANWALLS[this.mainComponentThis.ORPHANWALLS.length-1]]})}}console.log("Orphan walls count "+this.mainComponentThis.ORPHANWALLS.length),console.log("roomsWithSingleOrphanWalls count"+t.length),console.log(t),this.interpolateRoomCoordsInsideWithOrphanWalls(t)}interpolateRoomCoordsInsideWithOrphanWalls(e){for(let n=0;n<e.length;n++){let s=[];for(let r=0;r<e[n].room.coordsInside.length-1;r++)t=r,i=e[n].room.coordsInside,o=s,t===i.length-2?vt(i[t],i[0])||o.push(Rt(i,t,0,!0)):vt(i[t],i[t+1])||o.push(Rt(i,t,t+1,!0));let a=[...e[n].room.coordsInside];for(let t=0;t<e[n].orphanWalls.length;t++){console.log("Current orphan wall");let i=[],o=[];for(let s=0;s<e[n].orphanWalls[t].wall.coords.length;s++)ut(e[n].orphanWalls[t].wall.coords[s],e[n].orphanWalls[t].wall.equations.up,this.mainComponentThis.isPointOnWallDecimalPrecision)?i.push(e[n].orphanWalls[t].wall.coords[s]):o.push(e[n].orphanWalls[t].wall.coords[s]);console.log("Room coords before "+JSON.stringify(a)),console.log("Room coords up point"+JSON.stringify(i)),console.log("Room coords down point"+JSON.stringify(o));let r=[],l={intersectedRoomCoordsInsideWalls:[],upEquationWallNode1SpliceIndex:null,upEquationWallNode2SpliceIndex:null};if(this.orphanWallLineProcessing(e[n].orphanWalls[t].wall.equations.up,i,s,e[n].room.coordsInside,a,r,l,!0),this.orphanWallLineProcessing(e[n].orphanWalls[t].wall.equations.down,o,s,e[n].room.coordsInside,a,r,l,!1),null!==l.upEquationWallNode1SpliceIndex&&null!==l.upEquationWallNode2SpliceIndex&&4===r.length){let e=null;l.intersectedRoomCoordsInsideWalls.length>1?(console.log("Orphan izmedu 2 zida"),-1!==l.upEquationWallNode2SpliceIndex?(console.log("Interpoliraj wallNode2"),e=l.upEquationWallNode2SpliceIndex):console.log("Exception, nema wallNode2 indexa")):(console.log("Orphan na rubu"),vt(r[0],l.intersectedRoomCoordsInsideWalls[0].wallNode1,0)?-1!==l.upEquationWallNode1SpliceIndex?(console.log("Interpoliraj wallNode1"),e=l.upEquationWallNode1SpliceIndex):console.log("Exception, nema wallNode1 indexa"):vt(r[3],l.intersectedRoomCoordsInsideWalls[0].wallNode2,0)?-1!==l.upEquationWallNode2SpliceIndex?(console.log("Interpoliraj wallNode2"),e=l.upEquationWallNode2SpliceIndex):console.log("Exception, nema wallNode2 indexa"):console.log("Orphan na rubu interpolation exception")),null!==e&&a.splice(e,1,r[0],r[1],r[2],r[3]),console.log("Room coords after "+JSON.stringify(a))}else console.log("Orphan walls interpolation exception "+JSON.stringify(e[n].orphanWalls[t].wall.coords));console.log(l)}e[n].room.coordsInsideWithOrphans=a}var t,i,o}orphanWallLineProcessing(e,t,i,o,n,s,a,r){let l=t[0];kt(t[1],o)||(l=t[1]);let h=t.find((e=>e!==l));const c=bt(t[0],t[1]);for(let d=0;d<i.length;d++){const t=Mt(i[d].wallEquation,e,"object");if(t){console.log("Equation intersection "+JSON.stringify(t));const e=bt(i[d].wallNode1,i[d].wallNode2);if(ft(0,t.x,t.y,c,e)){a.intersectedRoomCoordsInsideWalls.find((e=>e===i[d]))||a.intersectedRoomCoordsInsideWalls.push(i[d]),console.log("Intersection coords inside wall"),console.log(i[d]),console.log("Pomjeri tocku orphan zida "+JSON.stringify(l)),l.x=t.x,l.y=t.y,console.log("Tocka orphan zida nakom pomjeranja "+JSON.stringify(l)),r?(s.push(l,h),a.upEquationWallNode1SpliceIndex=n.findIndex((e=>vt(e,i[d].wallNode1,0))),a.upEquationWallNode2SpliceIndex=n.findIndex((e=>vt(e,i[d].wallNode2,0)))):s.push(h,l);break}}}}roomWallsClockwiseOrderProcessWall(e,t,i,o,n){const s=Rt(e.coords,t,i);console.log(s);let a=this.mainComponentThis.WALLS.find((e=>r(e.start.x,0)===r(s.wallNode1.realX,0)&&r(e.start.y,0)===r(s.wallNode1.realY,0)&&r(e.end.x,0)===r(s.wallNode2.realX,0)&&r(e.end.y,0)===r(s.wallNode2.realY,0)||r(e.start.x,0)===r(s.wallNode2.realX,0)&&r(e.start.y,0)===r(s.wallNode2.realY,0)&&r(e.end.x,0)===r(s.wallNode1.realX,0)&&r(e.end.y,0)===r(s.wallNode1.realY,0)));console.log(a);let l=n;return a?(console.log("Wall start "+JSON.stringify(a.start)+"wall end: "+JSON.stringify(a.end)),console.log(JSON.stringify(l)),console.log("Wall needs switch "+!vt(a.start,l,0)),console.log(o),console.log(!o.find((e=>e===a))),vt(a.start,l,0)?(!o.find((e=>e===a))&&o.push(a),l=a.end):o.find((e=>e===a))?l=a.start:(console.log(JSON.stringify(l)),console.log(JSON.stringify(a.start)),console.log("Obrnioo"),this.switchWallStartEnd(a),o.push(a),l=a.end)):(l={x:s.wallNode2.realX,y:s.wallNode2.realY},console.log("Nema target walla u roomWallsClockwiseOrderProcessWall"+JSON.stringify(s))),l}switchWallStartEnd(e){const t={...e.start};e.start={...e.end},e.end=t}findCorrespondingWall(e){return this.mainComponentThis.WALLS.find((t=>t.start.x===e.wallNode1.realX&&t.start.y===e.wallNode1.realY&&t.end.x===e.wallNode2.realX&&t.end.y===e.wallNode2.realY||t.start.x===e.wallNode2.realX&&t.start.y===e.wallNode2.realY&&t.end.x===e.wallNode1.realX&&t.end.y===e.wallNode1.realY))}nearVertice(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.WALLS,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,n=1/0;for(let s=0;s<i.length;s++){let o=this.mainComponentThis.qSVG.gap(e,{x:i[s].start.x,y:i[s].start.y}),a=this.mainComponentThis.qSVG.gap(e,{x:i[s].end.x,y:i[s].end.y});o<a&&o<n&&(n=o,t={number:i[s],x:i[s].start.x,y:i[s].start.y,distance:Math.sqrt(n)}),a<o&&a<n&&(n=a,t={number:i[s],x:i[s].end.x,y:i[s].end.y,distance:Math.sqrt(n)})}return n<o*o&&t}nearWall(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.WALLS,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=1/0,s={};if(0===i.length)return!1;for(let r=0;r<i.length;r++){let o=Lt(i[r].start.x,i[r].start.y,i[r].end.x,i[r].end.y);t=this.mainComponentThis.qSVG.nearPointOnEquation(o,e),t.distance<n&&this.mainComponentThis.qSVG.btwn(t.x,i[r].start.x,i[r].end.x)&&this.mainComponentThis.qSVG.btwn(t.y,i[r].start.y,i[r].end.y)&&(n=t.distance,s={wall:i[r],x:t.x,y:t.y,distance:t.distance})}let a=this.nearVertice(e,i);return a.distance<n&&(n=a.distance,s={wall:a.number,x:a.x,y:a.y,distance:a.distance}),n<=o&&s}showScaleBox(){const e=dt(this.mainComponentThis.WALLS);if(!e)return Ct(this.boxScale.current),void(this.mainComponentThis.boxWallCoordinates={minX:0,maxX:0,minY:0,maxY:0,width:0,height:0});this.createAndShowBoxMeasures(e.minX,e.maxX,e.minY,e.maxY,this.boxScale),this.mainComponentThis.setBoxWallCoordinatesValues(e)}areCollinear(e,t,i,o,n,s){return(o-t)*(n-e)===(s-t)*(i-e)}drawWallLine(e,t){this.mainComponentThis.qSVG.create(this.mainComponentThis.boxBind,"line",{x1:e.start.x,y1:e.start.y,x2:e.end.x,y2:e.end.y,"stroke-width":2,stroke:t})}resolveOverlapingWalls(){let e=[],t=[],i=[];for(let n=0;n<this.mainComponentThis.WALLS.length;n++)for(let o=n+1;o<this.mainComponentThis.WALLS.length;o++){let s=[{x:this.mainComponentThis.WALLS[n].start.x,y:this.mainComponentThis.WALLS[n].start.y,pointWall:this.mainComponentThis.WALLS[n]},{x:this.mainComponentThis.WALLS[n].end.x,y:this.mainComponentThis.WALLS[n].end.y,pointWall:this.mainComponentThis.WALLS[n]},{x:this.mainComponentThis.WALLS[o].start.x,y:this.mainComponentThis.WALLS[o].start.y,pointWall:this.mainComponentThis.WALLS[o]},{x:this.mainComponentThis.WALLS[o].end.x,y:this.mainComponentThis.WALLS[o].end.y,pointWall:this.mainComponentThis.WALLS[o]}];const[a,r]=[Math.min(s[0].x,s[1].x),Math.max(s[0].x,s[1].x)],[l,h]=[Math.min(s[2].x,s[3].x),Math.max(s[2].x,s[3].x)],[c,d]=[Math.min(s[0].y,s[1].y),Math.max(s[0].y,s[1].y)],[p,m]=[Math.min(s[2].y,s[3].y),Math.max(s[2].y,s[3].y)];if(this.areCollinear(s[0].x,s[0].y,s[1].x,s[1].y,s[2].x,s[2].y)&&this.areCollinear(s[0].x,s[0].y,s[1].x,s[1].y,s[3].x,s[3].y)&&a<=h&&l<=r&&c<=m&&p<=d){const a=bt(s[0],s[1]),r=bt(s[2],s[3]);if(gt(s[2].x,s[2].y,a)&&gt(s[3].x,s[3].y,a))console.log("Overlap contained wall found",this.mainComponentThis.WALLS[o]),t.push(o);else if(gt(s[0].x,s[0].y,r)&&gt(s[1].x,s[1].y,r))console.log("Overlap contained wall found",this.mainComponentThis.WALLS[n]),t.push(n);else{let t=!1;for(let e=0;e<s.length;e++)for(let i=e+1;i<s.length;i++)vt(s[e],s[i])&&(t=!0);if(!t){let t,a,r=-1/0;for(let e=0;e<s.length;e++)for(let i=e+1;i<s.length;i++){const o=Bt(s[e],s[i]);o>r&&(r=o,t=e,a=i)}let l=[];s.forEach(((e,i)=>{i!==t&&i!==a&&l.push(i)}));const h=s[t],c=s[a];let d,p;Bt(h,s[l[0]])<Bt(h,s[l[1]])?(d=s[l[0]],p=s[l[1]]):(d=s[l[1]],p=s[l[0]]);const m=new Nc({x:h.x,y:h.y},{x:d.x,y:d.y},"normal",h.pointWall.thick,h.pointWall.material,null,h.pointWall.wallHeight);m.interiorPlaneMaterial=h.pointWall.interiorPlaneMaterial,m.exteriorPlaneMaterial=h.pointWall.exteriorPlaneMaterial;const u=new Nc({x:d.x,y:d.y},{x:p.x,y:p.y},"normal",h.pointWall.thick,"Unknown",null,h.pointWall.wallHeight),g=new Nc({x:p.x,y:p.y},{x:c.x,y:c.y},"normal",c.pointWall.thick,c.material,null,c.pointWall.wallHeight);g.interiorPlaneMaterial=c.pointWall.interiorPlaneMaterial,g.exteriorPlaneMaterial=c.pointWall.exteriorPlaneMaterial,m.parent=h.pointWall.parent,m.child=u,u.parent=m,u.child=g,g.parent=u,g.child=c.pointWall.child,e.push(m,u,g),i.push(n),i.push(o)}}}}console.log("overlapContainedWallIndexes",t),console.log("existingWallsToSpliceIndexes",i);let o=[...t,...i];o=o.filter(((e,t,i)=>i.findIndex((t=>t===e))===t)),o.sort(((e,t)=>t-e)),o.forEach((e=>this.mainComponentThis.WALLS.splice(e,1))),console.log("overlapNewWalls",e),this.mainComponentThis.WALLS.push(...e)}};const Bc=class{constructor(e,t,i,o,n,s,a){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"normal",l=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{};if(this.family=e,this.class=t,this.type=i,this.x=o.x,this.y=o.y,this.angle=n,this.angleSign=s,this.limit=[],this.hinge=r,this.graph=d.qSVG.create("none","g",{"data-object-class":this.class,"data-object-type":this.type}),this.additionalParams=c||{},this.constructorParams=p,this.wallHeightConstruc=this.constructorParams.wallHeightConstruc||d.floorHeight,this.actionGraph=this.graph,"inWall"===this.family||"onWall"===this.family||this.additionalParams.onWallObjectBBox){const e=d.qSVG.create("none","g");this.graph.appendChild(e),this.actionGraph=e}this.scale={x:1,y:1},this.value=h,this.size=a,this.thick=l,this.width=(this.size/d.meter).toFixed(2),this.height=(this.thick/d.meter).toFixed(2);let m,u=d.carpentryCalc(e,t,i,a,l,h,c,this.constructorParams.previewFloorplan);for(let f=0;f<u.length;f++)u[f].path&&(m=d.qSVG.create("none","path",{d:u[f].path,"stroke-width":1,fill:u[f].fill,stroke:u[f].stroke,"stroke-dasharray":u[f].strokeDashArray})),u[f].text&&(m=d.qSVG.create("none","text",{x:u[f].x,y:u[f].y,"font-size":"1em",stroke:u[f].stroke,"stroke-width":u[f].strokeWidth,"font-family":"roboto","text-anchor":"middle",fill:u[f].fill}),m.textContent=u[f].text),this.actionGraph.appendChild(m);let g=this.actionGraph.getBoundingClientRect();g.x=g.x*d.zoomFactor-d.offset.left*d.zoomFactor+d.originX_viewbox,g.y=g.y*d.zoomFactor-d.offset.top*d.zoomFactor+d.originY_viewbox,g.origin={x:this.x,y:this.y},this.bbox=g,this.realBbox=[{x:-this.size/2,y:-this.thick/2},{x:this.size/2,y:-this.thick/2},{x:this.size/2,y:this.thick/2},{x:-this.size/2,y:this.thick/2}],this.params=u.params,"doorWindow"===this.class&&d.isFloorplanItemClassMember(this.type,"window")&&c&&(Object.hasOwn(this.additionalParams,"rotationDirection")&&Object.hasOwn(this.additionalParams,"rotationAxis")&&Object.hasOwn(this.additionalParams,"curvePoints")&&Object.hasOwn(this.additionalParams,"controlPointOnWall")&&Object.hasOwn(this.additionalParams,"arrowControlPoint")&&Object.hasOwn(this.additionalParams,"arrowControlPointAngleSign")||d.setWindowObjectRotationProperties(this)),"inWall"!==this.family&&"onWall"!==this.family||Object.hasOwn(this.additionalParams,"hideWithWall")||(this.additionalParams.hideWithWall=!0),Object.hasOwn(this.additionalParams,"mirrored")||xe[i]||""===d.getObjectFolderName(i)||(this.additionalParams.mirrored=!1),u.params.width?this.size=u.params.width:this.size=a,u.params.height?this.thick=u.params.height:this.thick=l,this.setObject3DDimensions(d)}update(e){this.width=(this.size/e.meter).toFixed(2),this.height=(this.thick/e.meter).toFixed(2),this.setObject3DDimensions(e);let t=e.carpentryCalc(this.family,this.class,this.type,this.size,this.thick,this.value,this.additionalParams,this.constructorParams.previewFloorplan);for(let h=0;h<t.length;h++)if(t[h].path){const e=this.actionGraph.querySelectorAll("path")[h];e.setAttribute("d",t[h].path),e.setAttribute("fill",t[h].fill),e.setAttribute("stroke",t[h].stroke),e.setAttribute("stroke-dasharray",t[h].strokeDashArray)}else if(t[h].text){let e=this.actionGraph.querySelectorAll("text");for(let i of e)i.setAttribute("font-size",t[h].fontSize),i.setAttribute("fill",t[h].fill);e[0].textContent=t[h].text}if("text"===this.class){let i=e.qSVG.create("none","text",{x:0,y:0,"font-size":t[0].fontSize,stroke:t[0].stroke,"stroke-width":t[0].strokeWidth,"font-family":"roboto","text-anchor":"middle",fill:t[0].fill});i.textContent=t[0].text,i.style.visibility="hidden",this.actionGraph.appendChild(i);const o=i.getBBox();this.size=o.width,this.thick=o.height,i.remove()}let i=1,o=1;e.isFloorplanItemClassMember(this.type,"door")?ii(this.type)&&"normal"!==this.hinge&&(i=-1):e.isFloorplanItemClassMember(this.type,"window")&&(ii(this.type)?("start"!==this.additionalParams.rotationAxis&&(i=-1),"up"!==this.additionalParams.rotationDirection&&(o=-1)):oi(this.type)&&"up"!==this.additionalParams.rotationDirection&&(o=-1));let n=this.y;this.actionGraph.setAttribute("transform","translate("+this.x+","+n+") rotate("+this.angle+",0,0) scale("+i+", "+o+")");let s=this.actionGraph.getBoundingClientRect();s.x=s.x*e.zoomFactor-e.offset.left*e.zoomFactor+e.originX_viewbox,s.y=s.y*e.zoomFactor-e.offset.top*e.zoomFactor+e.originY_viewbox,s.origin={x:this.x,y:this.y},this.bbox=s;let a=this.angle*(Math.PI/180),r=[{x:-this.size/2,y:-this.thick/2},{x:this.size/2,y:-this.thick/2},{x:this.size/2,y:this.thick/2},{x:-this.size/2,y:this.thick/2}],l={x:0,y:0};if("text"===this.class&&(r=[{x:this.bbox.x,y:this.bbox.y},{x:this.bbox.x+this.bbox.width*e.zoomFactor,y:this.bbox.y},{x:this.bbox.x+this.bbox.width*e.zoomFactor,y:this.bbox.y+this.bbox.height*e.zoomFactor},{x:this.bbox.x,y:this.bbox.y+this.bbox.height*e.zoomFactor}],l.x=this.bbox.x+this.bbox.width*e.zoomFactor/2,l.y=this.bbox.y+this.bbox.height*e.zoomFactor/2),Ut(r,l,a),"text"!==this.class)for(let h=0;h<r.length;h++)r[h].x+=this.x,r[h].y+=this.y;if(this.realBbox=r,"inWall"===this.family||"onWall"===this.family||this.additionalParams.onWallObjectBBox){let t,i;"onWall"===this.family||this.additionalParams.onWallObjectBBox?(i=this.additionalParams.onWallObjectBBox?this.obj:this,t=e.getOnWallItemDepthOffsetParams(i,90===i.params.onWallOffsetAngle?this.size/2:this.thick/2)):(i="socle"===this.class?this.obj:this,t=e.getInWallItemDepthOffsetParams(i));const{offsetX:o,offsetY:n}=ti(i,t.offsetValue,t.wall2D.angle);this.graph.setAttribute("transform",`translate(${o}, ${n})`),new Array(...this.realBbox,this.bbox.origin).forEach((e=>{e.x+=o,e.y+=n}))}return e.isFloorplanItemClassMember(this.type,"window")&&e.setWindowObjectRotationProperties(this),!0}setObject3DDimensions(e){if("lights"===this.class||"doorWindow"===this.class||"furniture"===this.class){const t=e.getFloorplanItemDetails(this.type);this.additionalParams.width3D=parseFloat(this.size),this.additionalParams.depth3D=parseFloat(this.thick),"onWall"===this.family&&90===this.params.onWallOffsetAngle&&(this.additionalParams.width3D=parseFloat(this.thick),this.additionalParams.depth3D=parseFloat(this.size));let i=this.additionalParams.height3D;if(this.additionalParams.height3D||(i="furniture"===this.class&&e.isFloorplanItemClassMember(this.type,"furniture_items","staircase")?this.wallHeightConstruc:t.dimensions.height3D*(e.meter/100)),this.additionalParams.height3D=i,!$.includes(e.getObjectItemType(this.type))){const t=te.includes(this.type);this.additionalParams.positionY=u(this.additionalParams.positionY)?t?this.wallHeightConstruc-this.additionalParams.height3D:e.isFloorplanItemClassMember(this.type,"light")||e.isFloorplanItemClassMember(this.type,"hvac","airCondition")||e.isFloorplanItemClassMember(this.type,"camera")&&!t?3*this.wallHeightConstruc/4:e.isFloorplanItemClassMember(this.type,"presence")||"free"===this.family?0:this.wallHeightConstruc/2-this.additionalParams.height3D/2:this.additionalParams.positionY}}}cloneProperties(e){e.x=this.x,e.y=this.y,e.angle=this.angle,e.angleSign=this.angleSign,e.limit=this.limit,e.hinge=this.hinge,e.additionalParams={...this.additionalParams},e.scale={...this.scale},e.value=this.value,e.size=this.size,e.thick=this.thick,e.width=this.width,e.height=this.height,e.bbox={...this.bbox},e.realBbox=this.realBbox.map((e=>({...e}))),e.params={...this.params}}};const Wc=class{constructor(e){this.rectangleDimensionsFromPoints=e=>{let t=[];for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++){let n=r(Bt(e[i],e[o]),8);t.includes(n)||t.push(n)}return t.sort(((e,t)=>t-e)),{a:t[t.length-2],b:t[t.length-1]}},this.mainComponentThis=e}create(e,t,i){let o=document.createElementNS("http://www.w3.org/2000/svg",t);for(let n in i)o.setAttribute(n,i[n]);return"none"!==e&&e.current.appendChild(o),o}angleDeg(e,t,i,o){let n=o-t,s=i-e,a=Math.atan2(n,s);return a*=180/Math.PI,a<0&&(a=360+a),a}angleBetweenLines(e,t,i,o){const n=e*i+t*o,s=e*o-t*i;return-Math.atan2(s,n)}angle(e,t,i,o,n,s){let a,r,l=parseInt(e),h=parseInt(t),c=parseInt(i),d=parseInt(o);if(n){let e=parseInt(n),t=parseInt(s),i=Math.sqrt(Math.pow(Math.abs(c-l),2)+Math.pow(Math.abs(d-h),2)),o=Math.sqrt(Math.pow(Math.abs(c-e),2)+Math.pow(Math.abs(d-t),2)),p=Math.sqrt(Math.pow(Math.abs(e-l),2)+Math.pow(Math.abs(t-h),2));a=0===i||0===o?Math.PI/2:Math.acos((Math.pow(i,2)+Math.pow(o,2)-Math.pow(p,2))/(2*i*o)),r=360*a/(2*Math.PI)}else a=l-c===0?Math.PI/2:Math.atan((h-d)/(l-c)),r=180*a/Math.PI;return{rad:a,deg:r}}getAngle(e,t){return{rad:Math.atan2(t.y-e.y,t.x-e.x),deg:180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}}middle(e,t,i,o){let n=parseInt(e),s=parseInt(t);return{x:(n+parseInt(i))/2,y:(s+parseInt(o))/2}}triangleArea(e,t,i){let o=0,n=0,s=0,a=0;return o=Bt(e,t),n=Bt(t,i),s=Bt(i,e),a=(o+n+s)/2,Math.sqrt(a*(a-o)*(a-n)*(a-s))}gap(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)}pDistance(e,t,i){let o,n,s=e.x,a=e.y,r=t.x,l=t.y,h=i.x,c=i.y,d=h-r,p=c-l,m=d*d+p*p,u=-1;0!==m&&(u=((s-r)*d+(a-l)*p)/m),u<0?(o=r,n=l):u>1?(o=h,n=c):(o=r+u*d,n=l+u*p);let g=s-o,f=a-n;return{x:o,y:n,distance:Math.sqrt(g*g+f*f)}}nearPointOnEquation(e,t){let i={},o={};return"h"===e.A?{x:t.x,y:e.B,distance:Math.abs(e.B-t.y)}:"v"===e.A?{x:e.B,y:t.y,distance:Math.abs(e.B-t.x)}:(i.x=t.x,i.y=e.A*t.x+e.B,o.x=(t.y-e.B)/e.A,o.y=t.y,this.pDistance(t,i,o))}circlePath(e,t,i){return"M "+e+" "+t+" m -"+i+", 0 a "+i+","+i+" 0 1,0 "+2*i+",0 a "+i+","+i+" 0 1,0 -"+2*i+",0"}perpendicularEquation(e,t,i){return"string"!=typeof e.A?{A:-1/e.A,B:i- -1/e.A*t}:"h"===e.A?{A:"v",B:t}:"v"===e.A?{A:"h",B:i}:void 0}angleBetweenEquations(e,t){return"h"===e&&(e=0),"h"===t&&(t=0),"v"===e&&(e=1e4),"v"===t&&(t=1e4),360*Math.atan(Math.abs((t-e)/(1+e*t)))/(2*Math.PI)}vectorXY(e,t){return{x:t.x-e.x,y:t.y-e.y}}vectorDeter(e,t){return e.x*t.y-e.y*t.x}btwn(e,t,i){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&(e=Math.round(e),t=Math.round(t),i=Math.round(i)),e>=t&&e<=i||e>=i&&e<=t}getNodeFromPath(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],o=e.getPathData(),n=[],s=0;for(let a=0;a<o.length;a++)o[a].values[0]===t.x&&o[a].values[1]===t.y&&"Z"!==o[a].type&&-1===i.indexOf(a)&&(s++,n.push(a));return 0!==s&&n}polygonIntoWalls(e,t){let i=t,o=[],n=[];for(let r=0;r<i.length;r++)n.push({x:e[i[r]].x,y:e[i[r]].y});for(let r=0;r<i.length-1;r++)for(let t=0;t<e[i[r+1]].segment.length;t++)for(let n=0;n<e[i[r]].segment.length;n++)e[i[r+1]].segment[t]===e[i[r]].segment[n]&&o.push({x1:e[i[r]].x,y1:e[i[r]].y,x2:e[i[r+1]].x,y2:e[i[r+1]].y,segment:e[i[r+1]].segment[t]});o=o.filter(((e,t,i)=>i.findIndex((t=>e.segment===t.segment))===t));let s=[],a=[];for(let r=0;r<o.length;r++){let e,t=[],i=o[r];e=r<o.length-1?o[r+1]:o[0];let l=Math.atan2(i.y2-i.y1,i.x2-i.x1),h=Math.atan2(e.y2-e.y1,e.x2-e.x1),c=this.mainComponentThis.WALLS[i.segment].thick/2*Math.sin(l),d=this.mainComponentThis.WALLS[i.segment].thick/2*Math.cos(l),p=this.mainComponentThis.WALLS[e.segment].thick/2*Math.sin(h),m=this.mainComponentThis.WALLS[e.segment].thick/2*Math.cos(h),u=Lt(i.x1+c,i.y1-d,i.x2+c,i.y2-d),g=Lt(i.x1-c,i.y1+d,i.x2-c,i.y2+d),f=Lt(e.x1+p,e.y1-m,e.x2+p,e.y2-m),b=Lt(e.x1-p,e.y1+m,e.x2-p,e.y2+m);l*=180/Math.PI,h*=180/Math.PI,u.A!==f.A?(t.push(Mt(u,f,"object")),t.push(Mt(g,b,"object"))):(t.push({x:i.x2+c,y:i.y2-d}),t.push({x:i.x2-c,y:i.y2+d}));for(let o=0;o<t.length;o++)kt(t[o],n)?s.push(t[o]):a.push(t[o])}return s.push(s[0]),a.push(a[0]),{inside:s,outside:a}}area(e){if(e.length<2)return!1;let t=0,i=e.length-1;for(let o=0;o<e.length;o++)t+=(e[i].x+e[o].x)*(e[i].y-e[o].y),i=o;return t/=2,Math.abs(t.toFixed(2))}areaRoom(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=t,n=0,s=o.length-2;for(let a=0;a<o.length-1;a++)n+=(e[o[s]].x+e[o[a]].x)*(e[o[s]].y-e[o[a]].y),s=a;return n/=2,Math.abs(n.toFixed(i))}junctionList(e){let t=[],i=[];for(let n=0;n<e.length;n++){let o=Lt(e[n].start.x,e[n].start.y,e[n].end.x,e[n].end.y);for(let s=0;s<e.length;s++)if(s!==n){let a,r=Lt(e[s].start.x,e[s].start.y,e[s].end.x,e[s].end.y);(a=Mt(o,r,"object"))&&(vt(e[n].end,e[s].start)||vt(e[n].start,e[s].end)?(vt(e[n].end,e[s].start)&&t.push({segment:n,child:s,values:[e[s].start.x,e[s].start.y],type:"natural"}),vt(e[n].start,e[s].end)&&t.push({segment:n,child:s,values:[e[n].start.x,e[n].start.y],type:"natural"})):this.btwn(a.x,e[n].start.x,e[n].end.x,"round")&&this.btwn(a.y,e[n].start.y,e[n].end.y,"round")&&this.btwn(a.x,e[s].start.x,e[s].end.x,"round")&&this.btwn(a.y,e[s].start.y,e[s].end.y,"round")&&t.push({segment:n,child:s,values:[a.x,a.y],type:"intersection"})),Math.abs(o.A)!==Math.abs(r.A)&&o.A!==r.A||o.B!==r.B||(vt(e[n].end,e[s].start)&&t.push({segment:n,child:s,values:[e[s].start.x,e[s].start.y],type:"natural"}),vt(e[n].start,e[s].end)&&t.push({segment:n,child:s,values:[e[n].start.x,e[n].start.y],type:"natural"}),vt(e[n].start,e[s].start)&&vt(e[n].end,e[s].end)||(vt(e[n].start,e[s].start)?i.push({segment:n,child:s,values:[e[n].start.x,e[n].start.y],type:"natural"}):vt(e[n].end,e[s].end)&&i.push({segment:n,child:s,values:[e[n].end.x,e[n].end.y],type:"natural"})))}}let o=i.filter((e=>!t.find((t=>vt({x:e.values[0],y:e.values[1]},{x:t.values[0],y:t.values[1]})))));for(let n=0;n<o.length;n++)t.push(o[n]);return t}vertexList(e){let t,i=[];for(let o=0;o<e.length;o++){t=!0;for(let n=0;n<i.length;n++){if(Math.round(e[o].values[0])===Math.round(i[n].x)&&Math.round(e[o].values[1])===Math.round(i[n].y)){t=!1,i[n].segment.push(e[o].segment);break}t=!0}t&&i.push({x:Math.round(e[o].values[0]),y:Math.round(e[o].values[1]),realX:e[o].values[0],realY:e[o].values[1],segment:[e[o].segment],bypass:0,type:e[o].type})}for(let o=0;o<i.length;o++){i[o].child=[],i[o].removed=[];for(let e=0;e<i[o].segment.length;e++)for(let t=0;t<i.length;t++)if(t!==o)for(let n=0;n<i[t].segment.length;n++)i[t].segment[n]===i[o].segment[e]&&i[o].child.push({id:t,angle:Math.floor(this.getAngle(i[o],i[t]).deg)})}return i}arrayCompare(e,t,i){let o=0,n=0;"pop"===i&&(o=1),"shift"===i&&(n=1);let s=e.length-o-n;for(let a=n;a<e.length-o;a++)for(let i=n;i<t.length-o;i++)e[a]===t[i]&&s--;return 0===s}vectorVertex(e,t,i){let o=this.vectorXY(e,t),n=this.vectorXY(t,i),s=Math.sqrt(o.x*o.x+o.y*o.y),a=Math.sqrt(n.x*n.x+n.y*n.y),r=(o.x*n.x+o.y*n.y)/(s*a),l=o.x*n.y-o.y*n.x;return Math.sign(l)*Math.acos(r)*(180/Math.PI)}segmentTree(e,t){let i=[e],o=[],n=t.length,s=e;return this.tree(i,s,n,t,o),o}tree(e,t,i,o,n){if(0===e.length)return;let s=[];i--;for(let a=0;a<e.length;a++){let r=!0,l=e[a],h=l.toString().split("-"),c=parseInt(h[h.length-1]);for(let e=0;e<o[c].child.length;e++)if(o[c].child[e].id===t&&i<o.length-1&&h.length>2){n.push(l+"-"+t),r=!1;break}if(r){let e=-1,n=1/0,a=0,r=0;if(1===o[c].child.length)c===t&&i===o.length-1&&s.push(l+"-"+o[c].child[0].id),c!==t&&i<o.length-1&&s.push(l+"-"+o[c].child[0].id);else{for(let s=0;s<o[c].child.length&&o[c].child.length>0;s++){if(c===t&&i===o.length-1){let t=this.vectorVertex({x:0,y:-1},o[c],o[o[c].child[s].id]);t>=a&&(r=1,a=t,e=o[c].child[s].id),-1===Math.sign(t)&&0===r&&(t<n&&Math.sign(n)>-1&&(n=t,e=o[c].child[s].id),t>n&&-1===Math.sign(n)&&(n=t,e=o[c].child[s].id))}if(c!==t&&h[h.length-2]!==o[c].child[s].id.toString()&&i<o.length-1){let t=this.vectorVertex(o[h[h.length-2]],o[c],o[o[c].child[s].id]);t<n&&0===r&&(n=t,e=o[c].child[s].id),-1===Math.sign(t)&&(r=1,t<=n&&(n=t,e=o[c].child[s].id))}}-1!==e&&s.push(l+"-"+e)}}}i>0&&this.tree(s,t,i,o,n)}polygonize(e){let t=this.junctionList(e),i=this.vertexList(t,e),o=[];for(let g=0;g<i.length;g++)for(let e=0;e<i[g].child.length;e++)o.push([g,i[g].child[e].id]);let n,s,a=[];for(let g=0;g<o.length;g++){let e=0,t=1/0;for(let o=0;o<i.length;o++)i[o].x<t&&i[o].child.length>1&&0===i[o].bypass&&(t=i[o].x,e=o),i[o].x===t&&i[o].child.length>1&&0===i[o].bypass&&i[o].y>i[e].y&&(t=i[o].x,e=o);if(n=this.segmentTree(e,i),0===n.length&&(i[e].bypass=1),n.length>0){let t=n[0].split("-"),o=this.areaRoom(i,t),l=parseInt(o);s=!0;for(let n=0;n<a.length;n++)if(this.arrayCompare(a[n].way,t,"pop")){s=!1,i[e].bypass=1;break}if(l<360&&(i[e].bypass=1),0===i[e].bypass){let o=this.polygonIntoWalls(i,t),n=this.area(o.inside),s=this.area(o.outside),h=[];for(let e=0;e<t.length;e++)h.push({x:i[t[e]].x,y:i[t[e]].y,realX:i[t[e]].realX,realY:i[t[e]].realY});o.inside.length!==o.outside.length?a.push({way:t,coords:h,coordsOutside:o.outside,coordsInside:o.inside,coordsInsideWithOrphans:o.inside,area:n,outsideArea:s,realArea:l}):a.push({way:t,coords:o.inside,coordsOutside:o.outside,coordsInside:o.inside,coordsInsideWithOrphans:o.inside,area:n,outsideArea:s,realArea:l});for(let a=0;a<i[e].child.length;a++)i[e].child[a].id===t[1]&&i[e].child.splice(a,1);for(let a=0;a<i[t[1]].child.length;a++)i[t[1]].child[a].id===e&&i[t[1]].child.splice(a,1);do{console.log("Do while loop");var r=0;for(let e=0;e<i.length;e++)if(1===i[e].child.length){r=1,i[e].child=[];for(let t=0;t<i.length;t++)for(let o=0;o<i[t].child.length;o++)i[t].child[o].id===e&&i[t].child.splice(o,1)}}while(1===r)}}}console.log(a);let l=[];for(let g=0;g<a.length;g++){let e=[],t=[];for(let i=0;i<a.length;i++)if(g!==i){let o=a[i].coordsInsideWithOrphans,n=o.length;s=!0;for(let e=0;e<n&&(s=Ft(o[e],a[g].coordsInsideWithOrphans),s);e++);s&&(e.push(i),t.push(a[i]),a[g].area=a[g].area-a[i].outsideArea)}a[g].inside=e,a[g].insidePolygonsObjects=t,e.length>0&&l.push({polygon:a[g],polygonIndex:g})}let h={};console.log("insidePolygons "+l.length),console.log(l);for(let g=0;g<l.length;g++)if(void 0===h[l[g].polygonIndex]){let e=!1,t=[];for(let i=0;i<l.length;i++)g!==i&&0===this.diffObjIntoArray(l[g].polygon.coordsInsideWithOrphans,l[i].polygon.coordsInsideWithOrphans)&&(e=!0,h[l[i].polygonIndex]=i,t.push(l[i].polygonIndex));if(e){let e;for(let i=0;i<t.length;i++)(e=l[g].polygon.inside.findIndex((e=>e===t[i])))&&(l[g].polygon.inside.splice(e,1),l[g].polygon.insidePolygonsObjects.splice(e,1))}}const c=Object.keys(h);let d=[],p=[];for(let g=0;g<c.length;g++)d.push(c[g]),p.push(h[c[g]]);p.sort(((e,t)=>t-e));for(let g=0;g<p.length;g++)console.log("Delete duplicate inside polygon index "+p[g]),l.splice(p[g],1);let m=[],u={};for(let g=0;g<l.length;g++)if(l[g].polygon.inside.length>0){let e=!1,t={};l[g].polygon.coordsInsideWithOrphans.forEach((e=>t[`${e.x}|${e.y}`]=!0));for(let i=0;i<l[g].polygon.inside.length;i++){if(0!==a[l[g].polygon.inside[i]].coordsInsideWithOrphans.filter((e=>t[`${e.x}|${e.y}`])).length){console.log("Pronadene zajednicke koordinate s inside poligonom"+g),e=!0;break}{let t=!1;for(let e=0;e<a[l[g].polygon.inside[i]].coordsInsideWithOrphans.length;e++)if(!kt(a[l[g].polygon.inside[i]].coordsInsideWithOrphans[e],l[g].polygon.coordsInsideWithOrphans)){t=!0;break}if(t){console.log("Pronadene tocke inside poligona koje nisu unutar glavnoga"+g),e=!0;break}}}e||(console.log("Nemoj brisati poligon "+g),m.push(l[g].polygon))}d.sort(((e,t)=>t-e));for(let g=0;g<d.length;g++)a.splice(d[g],1);if(d.length>0)for(let g=0;g<m.length;g++){for(let e=0;e<m[g].inside.length;e++)m[g].inside[e]=a.findIndex((t=>t===m[g].insidePolygonsObjects[e]));delete m[g].insidePolygonsObjects}for(let g=0;g<m.length;g++)u[a.findIndex((e=>e===m[g]))]=!0;return{polygons:a,vertex:i,roomsWithInsideRoomsNoDeleteIndexes:u}}diffArray(e,t){return e.concat(t).filter((i=>e.includes(i)&&t.includes(i)?void 0:i))}diffObjIntoArray(e,t){let i=0;for(let n=0;n<e.length-1;n++)for(let o=0;o<t.length-1;o++)_t(e[n],t[o])&&i++;let o=e.length-1;return o<t.length-1&&(o=t.length),o-i}polygonVisualCenter(e){let t,i,o,n,s=e.coordsInsideWithOrphans,a=e.inside,r=[];for(let u=0;u<s.length;u++){let e=s[u];(!u||e.x<t)&&(t=e.x),(!u||e.y<i)&&(i=e.y),(!u||e.x>o)&&(o=e.x),(!u||e.y>n)&&(n=e.y)}let l=o-t,h=n-i,c=Math.floor(l/10),d=Math.floor(h/10);for(let u=0;u<10;u++)for(let e=0;e<10;e++){let o=t+e*c,n=i+u*d;if(kt({x:o,y:n},s)){let e=!0;for(let t=0;t<a.length;t++)if(kt({x:o,y:n},this.mainComponentThis.ROOM[a[t]].coordsOutside)){e=!1;break}e&&r.push({x:o,y:n})}}let p,m=0;for(let u=0;u<r.length;u++){let e=1/0;for(let t=0;t<s.length-1;t++){let i=this.pDistance(r[u],s[t],s[t+1]);i.distance<e&&(e=i.distance)}e>m&&(p=u,m=e)}return r[p]}textOnDiv(e,t,i,o){if("undefined"!=typeof t){let n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttributeNS(null,"x",t.x),n.setAttributeNS(null,"y",t.y),n.setAttribute("style","fill:"+i.color+";font-weight:"+i.fontWeight+";font-size:"+i.fontSize),n.setAttributeNS(null,"text-anchor","middle"),n.textContent=e,console.log("Text ond div"),o.appendChild(n)}}mirrorPointAroundLine(e,t,i){let o,n;if("v"===i.A)o=2*i.B-e,n=t;else if("h"===i.A)o=e,n=2*i.B-t;else{const s=i.A,a=i.B,r=s*s+1;o=(e+s*(t-a))/r,n=(s*e+s*s*t/r+a)/r}return{x:o,y:n}}polygonPolygonIntersect(e,t){for(var i=0;i<e.length;i++){var o,n=e[i];if(o=i==e.length-1?e[0]:e[i+1],!vt(n,o)&&this.linePolygonIntersect(n.x,n.y,o.x,o.y,t))return!0}return!1}linePolygonIntersect(e,t,i,o,n){for(var s=0;s<n.length;s++){var a,r=n[s];if(a=s==n.length-1?n[0]:n[s+1],this.lineLineIntersect(e,t,i,o,r.x,r.y,a.x,a.y))return!0}return!1}lineLineIntersect(e,t,i,o,n,s,a,r){const l=(e,t,i)=>{var o=e.x,n=e.y,s=t.x,a=t.y,r=i.x;return(i.y-n)*(s-o)>(a-n)*(r-o)};var h={x:e,y:t},c={x:i,y:o},d={x:n,y:s},p={x:a,y:r};return l(h,d,p)!=l(c,d,p)&&l(h,c,d)!=l(h,c,p)}};const Nc=class{constructor(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Unknown",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6?arguments[6]:void 0;this.wallId=(0,lr.A)(),this.thick=o,this.start=e,this.end=t,this.type=i,this.parent=null,this.child=null,this.angle=0,this.equations={},this.coords=[],this.backUp=!1,this.material=s?s.material:n,this.interiorPlaneMaterial=s?s.interiorPlaneMaterial:"Color"===n?X[0].defaultColorValue:n,this.exteriorPlaneMaterial=s?s.exteriorPlaneMaterial:"Color"===n?X[1].defaultColorValue:n,this.wallHeight=s?s.wallHeight:a,this.startHeight=this.wallHeight,this.endHeight=this.wallHeight}};function Vc(e,t,i){const o=(new L.NRn).setFromObject(new L.eaF(e.geometry),!0),n=Math.abs(o.max.x-o.min.x),s=Math.abs(o.max.y-o.min.y),a=new L.bdM(n+10,s+10),r=new L.tXL({transparent:!0,opacity:0,side:L.hB5,color:16777215}),l=new L.eaF(a,r);return l.position.x=t.x*this.scaleFactor,l.position.z=t.y*this.scaleFactor,l.rotation.set(-Math.PI/2,0,0),l.translateZ(this.props.mainComponentThis.getFloorStartElevation(i,!0)+this.bindedObjectTextHeight/2),l.type="background_mesh",l}function Ec(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.sensorValueDecimalPrecision;const i=e[0].value,o=e[e.length-1].value,n=document.createElement("canvas"),s=r((o-i)*Math.pow(10,t),0);n.width=s,n.height=1;const a=n.getContext("2d"),l=a.createLinearGradient(0,0,s,1);let h={0:e[0].color};for(let r=1;r<e.length-1;r++)h[(e[r].value-i)/(o-i)]=e[r].color;h["1.0"]=e[e.length-1].color,console.log("sensorGradientColorStops",h);for(let r in h)l.addColorStop(r,h[r]);a.fillStyle=l,a.fillRect(0,0,s,1);return{paletteImageData:a.getImageData(0,0,s,1).data,paletteCanvasWidth:s}}function Hc(e,t,i){let o=[{value:t[`${i}_range_min_value`],color:t[`${i}_range_min_color`]}];o.push(...t[`${i}_range_intermediate_colors`]),o.push({value:t[`${i}_range_max_value`],color:t[`${i}_range_max_color`]});for(let r=0;r<o.length;r++)if(T.isNumber(o[r].value))return console.log("Invalid range color"),null;const n=o[0].value,s=o[o.length-1].value,a=Math.min(s,Math.max(n,e)),l=this.initializeSensorColorPaletteImageData(o),h=4*r((l.paletteCanvasWidth-1)*(a-n)/(s-n),0);return new L.Q1f(`rgb(${l.paletteImageData[h]}, ${l.paletteImageData[h+1]}, ${l.paletteImageData[h+2]})`)}function zc(e,t){const i=this.getSensorMeshParameters(e,t);if(!i)return null;const{connectorInstanceSavedParameters:o}=i,n={x:e.object2D.x,y:e.object2D.y},s=this.isFloorHidden(e.floorNumber);console.log("Sensor parameters",i);const a=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["background"]),r=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["text"]),l=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["sensor_type"]);let h,c;if(a.checked){let t;const o=this.floorplanFloors.find((t=>t.floorNumber===e.floorNumber)).roomData;if(t=At(n,o)){const o=this.floorplan3DViewScene.getObjectsByProperty("floorNumber",e.floorNumber);if(t=o.find((e=>e.roomID===t.id)),t){let o;if(console.log("Background parameters",a),"fixed"===a.background_coloring_type?o=new L.Q1f(a.background_fixed_color):"range"===a.background_coloring_type&&"number"===l&&i.isSensorNumberValue&&(o=this.calculateSensorRangeColoringColor(i.sensorOutputValue,a,"background")),o){const i="number"===typeof a.background_opacity?a.background_opacity:1;c=new L.eaF(t.geometry.clone(),new L.tXL({color:o,flatShading:!0,side:t.material.side,transparent:i<1,opacity:i})),c.type="room_mesh",c.rotation.set(Math.PI/2,0,0),c.translateZ(-(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)+this.bindedObjectTextHeight/2)),s&&(c.visible=!1)}}else console.log("Ne postoji soba na sceni")}else console.log("Ne postoji soba")}if(r.checked){let t;console.log("Text parameters",r),"fixed"===r.text_coloring_type?t=new L.Q1f(r.text_fixed_color):"range"===r.text_coloring_type&&"number"===l&&i.isSensorNumberValue&&"range"!==a.background_coloring_type&&(t=this.calculateSensorRangeColoringColor(i.sensorOutputValue,r,"text")),t&&(console.log("textColor",t),h=this.createTextMesh(""+i.sensorOutputValue+this.getSensorUnitOfMeasurement(e),t,r.text_font_size,new L.Pq0(n.x,0,n.y).multiplyScalar(this.scaleFactor),this.bindedObjectTextHeight,r.text_opacity),h.textColor=t,h.backgroundMesh=this.createTextBackgroundMesh(h,n,e.floorNumber),h.backgroundMesh.sensorMesh=h,s&&(h.backgroundMesh.visible=!1,h.visible=!1))}return h||c?(h?c&&(h.roomMesh=c,c.sensorMesh=h):(h=new L.eaF,h.roomMesh=c,c.sensorMesh=h),h.rotation.set(-Math.PI/2,0,0),h.translateZ(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)),h[this.props.mainComponentThis.connectorIDbinderIDPropertyName]=t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],i.sensorMeshPropertiesSetter(h),h.type="sensor",h.object2D=e.object2D,h.floorNumber=e.floorNumber,console.log("Created sensorTextMesh",h),h):null}function Gc(e,t){const i=this.getOtherMeshParameters(e,t);if(!i)return null;const{connectorInstanceSavedParameters:o}=i,n={x:e.object2D.x,y:e.object2D.y},s=new L.Q1f(this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["color"])),a=this.createTextMesh(i.otherValue,s,this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["font_size"]),new L.Pq0(n.x,0,n.y).multiplyScalar(this.scaleFactor),this.bindedObjectTextHeight,this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["opacity"]));return a.textColor=s,a.backgroundMesh=this.createTextBackgroundMesh(a,n,e.floorNumber),a.backgroundMesh.otherMesh=a,this.isFloorHidden(e.floorNumber)&&(a.visible=!1,a.backgroundMesh.visible=!1),a.rotation.set(-Math.PI/2,0,0),a.translateZ(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)),a[this.props.mainComponentThis.connectorIDbinderIDPropertyName]=t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],i.otherMeshPropertiesSetter(a),a.type="other",a.object2D=e.object2D,a.floorNumber=e.floorNumber,a}function qc(e,t){const i=this.getPresenceAreaGroupParameters(e,t);if(!i)return null;const o=new L.YJl;return o.position.copy(new L.Pq0(e.object2D.x,0,e.object2D.y).multiplyScalar(this.scaleFactor)),o.translateZ(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)),o.rotateY(-f(e.object2D.additionalParams.presenceAreaRotation+180)),e.object2D.additionalParams.detectedObjectToModelMappings.forEach(((t,n)=>{const s=Li(i.detectedObjectsPositions[n]),a=this.props.mainComponentThis.getFloorplanItemDetails(t.modelType),r=new Z[a.itemType](o,this.presenceObjects3D,{detected_object_index:n,detected_object_field:t.detectedObjectField},new Bc(Q[a.itemType],"furniture",t.modelType,{x:s?this.calculatePresenceAreaDetectedObjectCoordinateValue(i.detectedObjectsPositions[n].coordX,i.coordinatesUnit):0,y:s?this.calculatePresenceAreaDetectedObjectCoordinateValue(i.detectedObjectsPositions[n].coordY,i.coordinatesUnit):0},0,0,a.dimensions.width3D*this.props.mainComponentThis.meter/100,"normal",a.dimensions.depth3D*this.props.mainComponentThis.meter/100,null,void 0,this.props.mainComponentThis),t.modelType,e.floorNumber,this,{fixed:!0,resizable:!1});r.mesh.visible=s,r.initObject()})),o[this.props.mainComponentThis.connectorIDbinderIDPropertyName]=t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],i.presenceAreaGroupPropertiesSetter(o),o.type="presence_area_group",o.object2D=e.object2D,o.floorNumber=e.floorNumber,o}function Uc(e,t){"hidden"!==this.props.mainComponentThis.clockVisibility&&ih.call(this,e,t)}function Yc(e,t){const i=new L.HiM;return i.state="off",i.power=0,i.decay=1,i.distance=1e3,i.shadow.bias=-.01,i.shadow.mapSize.width=1028,i.shadow.mapSize.height=1028,i.shadow.camera.near=1,i.shadow.camera.far=e.y-this.props.mainComponentThis.getFloorStartElevation(t,!0)+2,i.position.set(e.x,e.y,e.z),i}function Xc(e,t,i){const o=new L.nCl;return o.state="off",o.power=0,o.decay=1,o.distance=i.spotDistance,o.shadow.bias=-5e-4,o.shadow.mapSize.width=1028,o.shadow.mapSize.height=1028,o.shadow.camera.near=1,o.shadow.camera.far=e.y-this.props.mainComponentThis.getFloorStartElevation(t,!0)+2,o.angle=f(i.spotAngle),o.penumbra=1,o.position.set(e.x,e.y,e.z),o}function Kc(e){const t=e.screenPartProperties,i=this.calculateScreenPartDimenions(e),o=this.getScreenPartLocalDepth(e.mesh,t),n=new L.iNn(i.width,i.height,o);let s={color:{value:new L.Q1f},direction:{value:new L.Pq0(0,0,1)},boxDepth:{value:o},intensity:{value:2}};s.maxGlowDistance={value:1.5*o};const a=new L.BKk({uniforms:s,vertexShader:"\n        varying vec3 vPosition;\n        void main() {\n            vPosition = position;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform vec3 color;\n        uniform vec3 direction;\n        uniform float intensity;\n        uniform float maxGlowDistance;\n        uniform float boxDepth;\n\n        varying vec3 vPosition;\n\n        void main() {\n        vec3 vertexToFarPlane = vPosition;\n\n        //ZANIMA NAS UDALJENOST U ODNOSU NA STRAZNJU RAVNINU -> KOORDINATA STRAZNJE RAVNINE JE -boxDepth/2 A PREDNJE boxDepth/2\n        vertexToFarPlane.z += boxDepth / 2.0;\n        \n        float projection = dot(vertexToFarPlane, normalize(direction)); \n        \n        float normalizedGlow = clamp(projection / maxGlowDistance, 0.0, 1.0);\n        \n        float glowFactor = normalizedGlow;\n        //INVERTIRANJE AKO ZELIMO DA NAJVECI GLOW IMA STRAZNJA STRANA BOXA\n        glowFactor = 1.0 - normalizedGlow;\n\n        vec3 finalGlow = color * glowFactor * intensity;\n        \n        gl_FragColor = vec4(finalGlow, 1.0);\n        }\n        ",side:L.$EB,blending:L.EZo,transparent:!0}),r=new L.eaF(n,a);return r.userData={basicLightScreenPart:!0},r.state="off",r}function Zc(e){const t=e.screenPartProperties,i=this.calculateScreenPartDimenions(e),o=this.getScreenPartLocalDepth(e.mesh,t),n=i.width,s=i.height,a=t.screen_3d_glow_spread,r=n*a,l=s*a,h=new L.LoY,c=[-n/2,-s/2,-o/2,n/2,-s/2,-o/2,n/2,s/2,-o/2,-n/2,s/2,-o/2,-r/2,-l/2,o/2,r/2,-l/2,o/2,r/2,l/2,o/2,-r/2,l/2,o/2];h.setAttribute("position",new L.qtW(c,3)),h.setIndex([0,1,2,0,2,3,0,4,7,0,7,3,1,5,6,1,6,2,0,4,5,0,5,1,3,7,6,3,6,2]),h.computeVertexNormals();let d={color:{value:new L.Q1f},direction:{value:new L.Pq0(0,0,1)},boxDepth:{value:o},glowFalloff:{value:.005},projectionScaleFactor:{value:e.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor*t.screen_3d_glow_factor},intensity:{value:2}};const p=new L.BKk({uniforms:d,vertexShader:"\n        varying vec3 vPosition;\n        void main() {\n            vPosition = position;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n    ",fragmentShader:"\n        uniform vec3 color;\n        uniform vec3 direction;\n        uniform float intensity;\n        uniform float boxDepth;\n        uniform float glowFalloff;\n        uniform float projectionScaleFactor;\n\n        varying vec3 vPosition;\n\n        void main() {\n          vec3 vertexToFarPlane = vPosition;\n\n          //ZANIMA NAS UDALJENOST U ODNOSU NA STRAZNJU RAVNINU -> Z KOORDINATA STRAZNJE RAVNINE JE -boxDepth/2 A PREDNJE boxDepth/2\n          vertexToFarPlane.z += boxDepth / 2.0;\n\n          float projection = dot(vertexToFarPlane, normalize(direction)); \n\n          //TRANSFORMIRAMO UDALJENOST U WORLD KOORDINATNI SUSTAV JER glowFalloff DEFINIRAMO PREMA WORLD DIMENZIJAMA\n          projection = projection / projectionScaleFactor;\n\n          //MODELIRANJE DISPERZIJE SVJETLA PREKO INVERSE-SQUARE LAW\n          float normalizedGlow = 1.0 / (1.0 + glowFalloff * projection * projection);\n\n          float glowFactor = normalizedGlow;\n\n          vec3 finalGlow = color * glowFactor * intensity;\n\n          gl_FragColor = vec4(finalGlow, normalizedGlow);\n        }\n      ",side:L.$EB,blending:L.EZo,transparent:!0}),m=new L.eaF(h,p);return m.userData={glow3DLightScreenPart:!0,screenProperties:t},m.state="off",m}function $c(e){const t=e.screenPartProperties,i=this.calculateScreenPartDimenions(e),o=this.getScreenPartLocalDepth(e.mesh,t),n=new L.eaF(new L.iNn(i.width,i.height,o),new L.tXL({flatShading:!0,side:L.$EB}));return n.userData={nonLightScreenPart:!0},n.state="off",n}const Jc=new L.Pq0,Qc=new L.i7d;class ed extends L.DXC{constructor(e,t){const i=new L.LoY,o=new L.mrM({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],s=[],a={};function r(e,t){l(e),l(t)}function l(e){n.push(0,0,0),s.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}r("n1","n2"),r("n2","n4"),r("n4","n3"),r("n3","n1"),r("f1","f2"),r("f2","f4"),r("f4","f3"),r("f3","f1"),r("n1","f1"),r("n2","f2"),r("n3","f3"),r("n4","f4"),r("p","n1"),r("p","n2"),r("p","n3"),r("p","n4"),r("u1","u2"),r("u2","u3"),r("u3","u1"),r("c","t"),r("p","c"),r("cn1","cn2"),r("cn3","cn4"),r("cf1","cf2"),r("cf3","cf4"),i.setAttribute("position",new L.qtW(n,3)),i.setAttribute("color",new L.qtW(s,3)),super(i,o),this.isDisposed=!1,this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.onGeometryCoordinatesSetCallback=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new L.Q1f(16755200),c=new L.Q1f(16711680),d=new L.Q1f(43775),p=new L.Q1f(16777215),m=new L.Q1f(3355443);this.setColors(h,c,d,p,m)}setColors(e,t,i,o,n){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,i.r,i.g,i.b),s.setXYZ(33,i.r,i.g,i.b),s.setXYZ(34,i.r,i.g,i.b),s.setXYZ(35,i.r,i.g,i.b),s.setXYZ(36,i.r,i.g,i.b),s.setXYZ(37,i.r,i.g,i.b),s.setXYZ(38,o.r,o.g,o.b),s.setXYZ(39,o.r,o.g,o.b),s.setXYZ(40,n.r,n.g,n.b),s.setXYZ(41,n.r,n.g,n.b),s.setXYZ(42,n.r,n.g,n.b,!0),s.setXYZ(43,n.r,n.g,n.b,!0),s.setXYZ(44,n.r,n.g,n.b,!0),s.setXYZ(45,n.r,n.g,n.b,!0),s.setXYZ(46,n.r,n.g,n.b),s.setXYZ(47,n.r,n.g,n.b),s.setXYZ(48,n.r,n.g,n.b),s.setXYZ(49,n.r,n.g,n.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Qc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),td("c",t,e,Qc,0,0,-1),td("t",t,e,Qc,0,0,1),td("n1",t,e,Qc,-1,-1,-1),td("n2",t,e,Qc,1,-1,-1),td("n3",t,e,Qc,-1,1,-1),td("n4",t,e,Qc,1,1,-1),td("f1",t,e,Qc,-1,-1,1),td("f2",t,e,Qc,1,-1,1),td("f3",t,e,Qc,-1,1,1),td("f4",t,e,Qc,1,1,1),td("u1",t,e,Qc,.7,1.1,-1),td("u2",t,e,Qc,-.7,1.1,-1),td("u3",t,e,Qc,0,2,-1),td("cf1",t,e,Qc,-1,0,1),td("cf2",t,e,Qc,1,0,1),td("cf3",t,e,Qc,0,-1,1),td("cf4",t,e,Qc,0,1,1);let i=[{propertyName:"cn2",index:43},{propertyName:"cn3",index:44}];if(td("cn1",t,e,Qc,-1,0,-1),td("cn2",t,e,Qc,1,0,-1),i[0].beforeCoords=new L.Pq0(e.getAttribute("position").getX(i[0].index),e.getAttribute("position").getY(i[0].index),e.getAttribute("position").getZ(i[0].index)),td("cn3",t,e,Qc,0,-1,-1),i[1].beforeCoords=new L.Pq0(e.getAttribute("position").getX(i[1].index),e.getAttribute("position").getY(i[1].index),e.getAttribute("position").getZ(i[1].index)),td("cn4",t,e,Qc,0,1,-1),e.getAttribute("position").needsUpdate=!0,this.onGeometryCoordinatesSetCallback){const t=setInterval((()=>{if(console.log("Set interval call"),this.isDisposed)clearInterval(t);else{const o=e.getAttribute("position");if(i.forEach((e=>{const t=new L.Pq0(o.getX(e.index),o.getY(e.index),o.getZ(e.index));t.applyMatrix4(this.matrix),e.newCoords=t})),console.log("targetIndexes",i),0===i.filter((e=>e.beforeCoords.x===e.newCoords.x&&e.beforeCoords.y===e.newCoords.y&&e.beforeCoords.z===e.newCoords.z)).length){clearInterval(t);let e={};for(let t=0;t<i.length;t++)e[i[t].propertyName]=i[t].newCoords;this.onGeometryCoordinatesSetCallback(e)}}}),1)}}dispose(){this.isDisposed=!0,this.geometry.dispose(),this.material.dispose()}}function td(e,t,i,o,n,s,a){Jc.set(n,s,a).unproject(o);const r=t[e];if(void 0!==r){const e=i.getAttribute("position");for(let t=0,i=r.length;t<i;t++)e.setXYZ(r[t],Jc.x,Jc.y,Jc.z)}}const id=ed;function od(e,t,i){console.log("updateSunLightPosition call"),console.log("objectConnectorsArray",this.objectConnectorsArray);const o=this.calculateCurrentDate();this.textFont&&this.createFloorplanTimeMesh(e,o);const s=this.calculateSunPosition(o);if(this.skyMaterial&&(this.skyMaterial.uniforms.sunAltitude.value=Math.max(s.altitude,0),this.skyMaterial.needsUpdate=!0),!this.sunLightControlsRef.current||!this.sunLightControlsRef.current.isSunLightShadowEnabled())return;const a=new L.Pq0(this.floorplanWallsObjectsBBoxCenterVector.x,0,this.floorplanWallsObjectsBBoxCenterVector.z),r=this.floorplanEnvironmentRadius;if(s.altitude<=0)this.deallocateSceneSunLightData(e,t),this.textFont&&this.createFloorplanTimeMesh(e,o),i&&n.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current);else{const o=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;s.azimuth=(s.azimuth+Math.PI-o*(Math.PI/180))%(2*Math.PI);const n=Math.sin(s.altitude)*r,l=Math.cos(s.altitude)*r,h=l*Math.cos(Math.PI/2-s.azimuth),c=-l*Math.sin(Math.PI/2-s.azimuth),d=new L.Gu$(200,32,15),p=new L.V9B({color:16711680}),m=new L.V9B({color:16711680});new L.eaF(d,p).position.set(h+this.floorplanWallsObjectsBBoxCenterVector.x,0,c+this.floorplanWallsObjectsBBoxCenterVector.z);new L.eaF(d,m).position.set(h+this.floorplanWallsObjectsBBoxCenterVector.x,n,c+this.floorplanWallsObjectsBBoxCenterVector.z),t.offscreenShadowCamera||(t.offscreenShadowCamera=new L.qUd);const u=new L.Pq0(a.x,a.y,a.z),g=new L.Pq0(h+this.floorplanWallsObjectsBBoxCenterVector.x,n,c+this.floorplanWallsObjectsBBoxCenterVector.z),f=g.clone();t.offscreenShadowCamera.position.set(f.x,f.y,f.z),t.offscreenShadowCamera.lookAt(u),t.offscreenShadowCamera.updateProjectionMatrix(),t.offscreenShadowCamera.updateMatrixWorld();let b=this.createFloorplan3DXZPlaneBBoxPoints(this.floorplanWallsObjectsBoundingBox2DCoordinates);const w=this.getMaxFloorNumber();for(let e=0;e<4;e++)b.push(b[e].clone().add(new L.Pq0(0,this.props.mainComponentThis.getFloorStartElevation(w,!0)+this.floorplanFloors.find((e=>e.floorNumber===w)).floorHeight*this.scaleFactor,0)));b.push(a);const C=g.clone().sub(a);let x=[];for(let e=0;e<b.length;e++){const t=b[e].clone().projectOnPlane(C.clone().normalize());x.push(t);new L.eaF(new L.Gu$(40,32,15),new L.V9B({color:16711935})).position.set(t.x,t.y,t.z)}t.auxiliaryCameraHelper&&t.auxiliaryCameraHelper.dispose(),t.auxiliaryCameraHelper=new id(t.offscreenShadowCamera,this.onSunLightPositionCoordinateSystemTransformReady(g,C,b,x,e,t,a,i))}}function nd(e,t,i,o,s,a,r,l){return h=>{h.cn2=h.cn2.clone().sub(e),h.cn3=h.cn3.clone().sub(e);const c=new L.Pq0(h.cn2.x,h.cn2.y,h.cn2.z).normalize(),d=t.clone().normalize(),p=new L.Pq0(h.cn3.x,h.cn3.y,h.cn3.z).normalize(),m=this.changeCoordinateSystemBasisForPoints(i,c,d,p),u=this.changeCoordinateSystemBasisForPoints(o,c,d,p),g=this.changeCoordinateSystemBasisForPoints([e],c,d,p)[0],{maxXDist:f,maxZDist:b}=this.calculateMaxXMaxZOffsetsFromCenterPoint(u[u.length-1],u),w=f,C=b;console.log("leftRight",w),console.log("topBottom",C);const x=-w,_=w,y=C,S=-C,v=Math.abs(Math.min(...m.map((e=>Math.abs(g.y-e.y))))),D=Math.abs(Math.max(...m.map((e=>Math.abs(g.y-e.y)))));console.log("near",v),console.log("far",D);const T=new L.ZyN(16777215,.9);T.castShadow=!0,T.shadow.bias=-.002,T.shadow.mapSize.width=2048,T.shadow.mapSize.height=2048,T.target.position.set(r.x,r.y,r.z),T.position.set(e.x,e.y,e.z),T.shadow.camera.left=x,T.shadow.camera.right=_,T.shadow.camera.top=y,T.shadow.camera.bottom=S,T.shadow.camera.near=v,T.shadow.camera.far=D,T.name="sun_light";const j=s.getObjectByName("sun_light");s.add(T),s.add(T.target),this.updateShadowMap(s),j&&(console.log("Sun light removed"),s.remove(j),hi(j)),a.mainCameraHelper&&(a.mainCameraHelper.dispose(),s.remove(a.mainCameraHelper)),a.mainCameraHelper=new id(T.shadow.camera),l&&n.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current),this.textFont&&this.createFloorplanTimeMesh(s,this.calculateCurrentDate())}}function sd(e,t){[e.getObjectByName("sun_light")].forEach((t=>{t&&(e.remove(t.target),hi(t.target),e.remove(t),hi(t))})),t.mainCameraHelper&&(t.mainCameraHelper.dispose(),e.remove(t.mainCameraHelper),t.mainCameraHelper=null),t.auxiliaryCameraHelper&&(t.auxiliaryCameraHelper.dispose(),t.auxiliaryCameraHelper=null),t.offscreenShadowCamera&&hi(t.offscreenShadowCamera)}function ad(){this.userInteractionCurrentController.removeItemBinder(),this.userInteractionCurrentController.setSelectedObject(null),Eh.call(this,Ii,(()=>{this.sensorsHeatmapSceneControlRef.current.setIsMapActiveState(!1),this.shadowCastingLightsActive=this.shadowCastingLightsActive.filter((e=>!e.isMapScene)),this.shadowCastingLightsWaitingList=this.shadowCastingLightsWaitingList.filter((e=>!e.isMapScene));const e=this.maxShadowCastingLightsCount-this.shadowCastingLightsActive.length;if(e>0){var t=[];for(let i=this.shadowCastingLightsWaitingList.length-1;i>=0&&i>this.shadowCastingLightsWaitingList.length-1-e;i--)t.push(i);t.forEach((e=>this.turnWaitingLightOn(e)))}}),(()=>{this.sensorsHeatmapSceneControlRef.current.setIsMapActiveState(!0),this.shadowCastingLightsActive=this.shadowCastingLightsActive.filter((e=>(e.isMapScene||(this.setLightStateParameters(e.lightMeshObject,!1,!1),this.addShadowCastLightToList(e,this.shadowCastingLightsWaitingList)),!1)))}))}function rd(e,t){if(!zh.call(this,e,t)){let t;e.raycastedObject&&(e.raycastedObject.sensorMesh&&"_sensors_"===this.getObjectConnectorClassValue(null,e.raycastedObject.sensorMesh.object2D)?t=e.raycastedObject.sensorMesh:e.raycastedObject.otherMesh&&"_others_"===this.getObjectConnectorClassValue(null,e.raycastedObject.otherMesh.object2D)&&(t=e.raycastedObject.otherMesh)),t&&this.props.mainComponentThis.openSensorOtherToolsRightBox(t.object2D,this)}}function ld(e){"Escape"===e.key&&this.userInteractionCurrentController.setSelectedObject(null)}function hd(){this.userInteractionCurrentController.selectedObject&&(this.removeCameraCoverageArea3DMesh(),this.floorplanItemCurrentHUDObject.itemUnselected(),this.setCameraPOVView(this.userInteractionCurrentController.selectedObject,(()=>{const e=this.props.mainComponentThis.bindingRightBoxComponentRef&&this.props.mainComponentThis.bindingRightBoxComponentRef.current.activeParameters.current;e&&e.browserModPopupComponentRef.current&&e.browserModPopupComponentRef.current.onConfigureEntityClick()})))}const cd=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.floorplan3DThis=e,this.bindedObjects=t||[],this.connectorIDPropertyName=e.props.mainComponentThis.connectorIDbinderIDPropertyName,this.class=e.getObjectConnectorClassValue(i)||"no_connector_class",this.bindWithFixed2DObjects=e.getIsFixed2DObjectsValue(i),this.additionalParameters=e.getObjectConnectorAdditionalParameters(i),e.setObjectsConnectorInstanceCustomProperties(this,i)}create(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.bindWithFixed2DObjects){const e=[...this.bindedObjects];this.bindedObjects=[];for(let i=0;i<e.length;i++)this.addBindedObject(e[i],t)}}update(e){for(const[t,i]of Object.entries(e))this[t]=i;if(this.bindedObjects)if(this.bindWithFixed2DObjects)this.floorplan3DThis.controlPanelRef.current.updateFixedBindedObjects(this.bindedObjects,e);else if(this.additionalParameters.customBindedObjectUpdateMethodName)this.bindedObjects.forEach((t=>{this.floorplan3DThis[this.additionalParameters.customBindedObjectUpdateMethodName](t,e)}));else{const t=this.bindedObjects.map((e=>this.floorplan3DThis.getObjectsConnectorUnfixedBindedObjectParameters(e)));for(let e=0;e<this.bindedObjects.length;e++)this.removeBindedObject(this.bindedObjects[e],!1);this.bindedObjects=[];for(let e=0;e<t.length;e++)this.addBindedObject(t[e]);this.floorplan3DThis.controlPanelRef.current.updateUnfixedBindedObjects(e)}else this.create(e)}removeBindedObject(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.bindedObjects.findIndex((t=>t.object2D.id===e.object2D.id));if(-1!==i){t&&this.bindedObjects.splice(i,1);let o=[this.floorplan3DThis.floorplan3DViewScene];this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene&&o.push(this.floorplan3DThis.floorplan3DOnMapScene),this.bindWithFixed2DObjects?o.forEach((t=>{const i=t.getObjectsByProperty(this.connectorIDPropertyName,this[this.connectorIDPropertyName]);console.log("Remove binded object Target object",i);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){console.log("Remove target object"),i[o][this.connectorIDPropertyName]=null;const e=this.floorplan3DThis.removeBindedFixedObjectCallback(i[o]);i[o].changeStateMethod(i[o],e);break}})):(this.additionalParameters.connectorPanel3DOptions.forEach((t=>{new Array("floorplanViewArray","currentViewArray").forEach((i=>{t[i]=t[i].filter((t=>!(t.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName]&&t.mesh.object2D.id===e.object2D.id)))}))})),o.forEach((t=>{const i=t.getObjectsByProperty(this.connectorIDPropertyName,this[this.connectorIDPropertyName]);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){this.floorplan3DThis.removeUnfixedItem(i[o],!1);break}})))}if(null===e[this.connectorIDPropertyName]){const t=e.itemObject;t&&t.removeAllAnimations&&(console.log("ObjectsConnector removeAllAnimations call"),t.removeAllAnimations())}}addBindedObject(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.bindedObjects.push(e),this.bindWithFixed2DObjects){let t=[this.floorplan3DThis.floorplan3DViewScene];this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene&&t.push(this.floorplan3DThis.floorplan3DOnMapScene),t.forEach((t=>{const i=t.getObjectsByProperty("type",e.type);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){i[o][this.connectorIDPropertyName]=this[this.connectorIDPropertyName];const e=this.floorplan3DThis.addBindedFixedObjectCallback(i[o],this);i[o].changeStateMethod(i[o],e);break}})),this.floorplan3DThis.userInteractionCurrentController.selectedObject&&this.floorplan3DThis.userInteractionCurrentController.selectedObject.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName]&&this.floorplan3DThis.updateRightBoxBindingComponent(this.floorplan3DThis.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id)))))}else{if("_sensors_"===this.class){const t=this.floorplan3DThis.createSensorMesh(e,this);if(!t)return void this.bindedObjects.splice(this.bindedObjects.length-1,1);this.bindedObjects[this.bindedObjects.length-1]=t}if("_others_"===this.class){const t=this.floorplan3DThis.createOtherMesh(e,this);if(!t)return void this.bindedObjects.splice(this.bindedObjects.length-1,1);this.bindedObjects[this.bindedObjects.length-1]=t}if("_presence_area_"===this.class){const t=this.floorplan3DThis.createPresenceAreaGroup(e,this);if(!t)return void this.bindedObjects.splice(this.bindedObjects.length-1,1);this.bindedObjects[this.bindedObjects.length-1]=t}if(t){const e=this.floorplan3DThis.createUnfixedItem(this.floorplan3DThis.floorplan3DViewScene,this.bindedObjects[this.bindedObjects.length-1]);if(this.additionalParameters.connectorPanel3DOptions.forEach((t=>t.floorplanViewArray.push(e))),this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene){const e=this.floorplan3DThis.cloneUnfixedBindedObject3D(this.bindedObjects[this.bindedObjects.length-1]),t=this.floorplan3DThis.createUnfixedItem(this.floorplan3DThis.floorplan3DOnMapScene,e);this.additionalParameters.connectorPanel3DOptions.forEach((e=>e.currentViewArray.push(t)))}else this.additionalParameters.connectorPanel3DOptions.forEach((t=>t.currentViewArray.push(e)))}}}remove(){console.log("ObjectsConnector remove");const e=this.floorplan3DThis.userInteractionCurrentController.selectedObject&&this.floorplan3DThis.userInteractionCurrentController.selectedObject.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName];for(let t=0;t<this.bindedObjects.length;t++)this.removeBindedObject(this.bindedObjects[t],!1);this.bindedObjects=[],e&&(this.bindWithFixed2DObjects?this.floorplan3DThis.updateRightBoxBindingComponent(null):this.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null))}};function dd(e){const t=this.getPanel3DFixedItemsOptions(),i=this.panel3DOptions.find((e=>"generic_presence_area"===e.binderObjType)),o=t.find((e=>"presence"===e.itemsClass)),n=il.call(this,(e=>{this.filterPanel3DOptionUnfixedItemsObjData(e.objData,i).forEach((e=>{e.additionalParams.detectedObjectToModelMappings.forEach((t=>{i.objects3DArray.find((e=>e.floorplanItemType===t.modelType))||i.objects3DArray.push({object2D:e,floorplanItemType:t.modelType,object:null,sizeVector:null})}))}))}));new Array(i,o).forEach((e=>e.objects3DArray.forEach((e=>{this.presenceObjects3D.find((t=>t.floorplanItemType===e.floorplanItemType))||this.presenceObjects3D.push(e)}))));const s=this.presenceObjects3D.filter((e=>null===e.object)),a=e=>e.objects3DArray.filter((e=>null===e.object&&s.find((t=>t.floorplanItemType===e.floorplanItemType)))),r=a(o).filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family||(n.wallObjectsToLoad.push(e),!1))),l=a(i);if(s.length>0){let t=!1,n=!1;s.forEach((s=>this.loadFloorplanItemObject3D(s,this.loadingPresenceObjectsStatuses,!0,null,(()=>{r.find((e=>null===e.object))||t||(t=!0,this.drawPanel3DOptionFloorplanFreeItems(e,o)),l.find((e=>null===e.object))||n||(n=!0,this.drawPanel3DOptionFloorplanUnfixedItems(e,i))}))))}else this.drawPanel3DOptionFloorplanFreeItems(e,o),this.drawPanel3DOptionFloorplanUnfixedItems(e,i);let h=[],c=[];this.getPanel3DUnfixedItemsOptions().filter((e=>e!==i)).forEach((e=>{e.isFontLoadRequired?h.push(e):c.push(e)})),c.forEach((t=>this.drawPanel3DOptionFloorplanUnfixedItems(e,t))),n.panelFixedItemsOptionsToLoadData=n.panelFixedItemsOptionsToLoadData.filter((e=>e.panelItemsOption3D.itemsClass!==o.itemsClass)),this.drawAddsPlanes(e),ol.call(this,e,n,!this.textFont,(()=>h.forEach((t=>this.drawPanel3DOptionFloorplanUnfixedItems(e,t)))))}function pd(e,t,i,o,n){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this.panel3DOptions.find((e=>e.objects3DArray===t)).object3DProperties;const r=this.getObjectConnectorClassValue(null,o);"christmas_tree_lights"===r&&(a={type:"christmas_tree"});const l=nl.call(this,e,t,a,o,i,n,{fixed:!0,resizable:!1},s);if(l.mesh.object2D=o,l.mesh.floorNumber=n,r){const e=this.props.mainComponentThis.getObjectConnectorClassParamsForObject2D(o);l.mesh.changeStateMethod=this[e.changeStateMethodName],e.changeStateOnClickMethod&&(l.mesh.changeStateOnClick=e.changeStateOnClickMethod),e.longPressCustomHandler&&(l.mesh.longPressCustomHandler=e.longPressCustomHandler),l.mesh[e.meshStateParams.meshStatePropertyName]=e.meshStateParams["on"===this.getObjectConnectorDefaultStateValue(l.mesh)?"meshOnStatePropertyValue":"meshOffStatePropertyValue"],"door_window"===r&&this.setDoorWindowMeshToDefaultState(l)}else l.mesh.changeStateMethod=()=>{};return this.setFloorplanItemMeshProperties(l.mesh,o),l}function md(e){this.objectConnectorBindedObjectsOnItemRemoveCheck(e.mesh),sl.call(this,e)}function ud(e,t){t.currentViewArray=[];for(let i=0;i<this.floorplanFloors.length;i++)this.drawPanel3DOptionFloorUnfixedItems(e,this.filterPanel3DOptionUnfixedItemsObjData(this.getFloorplanFloorDrawingObjData(this.floorplanFloors[i]),t),this.floorplanFloors[i].floorNumber,t.currentViewArray)}function gd(e,t,i,o){for(let n=0;n<t.length;n++){let s=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.objID.find((e=>e.id===t[n].id))));if(s){if(this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(s[this.props.mainComponentThis.connectorIDbinderIDPropertyName])){let a=this.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===s[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));if(a){let s=a.bindedObjects.find((e=>e.object2D.id===t[n].id));if(s){const i=e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,a[this.props.mainComponentThis.connectorIDbinderIDPropertyName]);let r=!1;for(let e=0;e<i.length;e++)if(i[e].object2D.id===t[n].id){r=!0;break}if(!r){const t=this.cloneUnfixedBindedObject3D(s),i=this.createUnfixedItem(e,t);o.push(i)}}else{const s=a.bindedObjects.length;if(a.addBindedObject(this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:t[n],floorNumber:i}),!1),a.bindedObjects[s]){const t=this.createUnfixedItem(e,a.bindedObjects[s]);o.push(t)}}}else{const a=new cd(this,[this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:t[n],floorNumber:i})],this.getObjectConnectorParamsData(s[this.props.mainComponentThis.connectorIDbinderIDPropertyName],t[n]));if(this.objectConnectorsArray.push(a),a.create(this.getObjectConnectorParamsData(s[this.props.mainComponentThis.connectorIDbinderIDPropertyName],t[n]),!1),a.bindedObjects[0]){const t=this.createUnfixedItem(e,a.bindedObjects[0]);o.push(t)}}}}}}function fd(e){let t=[],i=[];this.props.mainComponentThis.klet3DGeneral&&this.props.mainComponentThis.klet3DGeneral.klet3d_note&&this.props.mainComponentThis.klet3DGeneral.klet3d_note.ad&&this.props.mainComponentThis.klet3DGeneral.klet3d_note.display_ad&&!this.props.mainComponentThis.klet3DGeneral.klet3d_note.global&&i.push(...this.props.mainComponentThis.klet3DGeneral.klet3d_note.display),this.props.mainComponentThis.klet3DDetails.ad&&i.push(...this.props.mainComponentThis.klet3DDetails.ad.display.filter((e=>!e.req_ack))),i.filter((e=>"default"===e.position.type)).forEach((e=>{t.find((t=>t.positionKey===e.key))||t.push({positionKey:e.key||"bottom",addData:e})}));const o=3*this.props.mainComponentThis.meter*this.scaleFactor;t.forEach((t=>{const i=t.addData.url.startsWith("https")?t.addData.url:`https://app.klet3d.com/klet3d_images/${t.addData.url}`;this.textureLoader.load(i,(i=>{const n=i.image.width/i.image.height;let s=new L.I9Y(400,0);s.y=s.x/n,t.addData.size&&(s.x=t.addData.size.width,t.addData.size.ratio_original?s.y=s.x/n:s.y=t.addData.size.height),s.multiplyScalar(this.props.mainComponentThis.meter*this.scaleFactor/100);const a=new L.eaF(new L.bdM(s.x,s.y),new L.V9B({map:i,side:L.$EB}));if(a.rotation.x=-Math.PI/2,a.position.set(this.floorplanWallsObjectsBBoxCenterVector.x,0,this.floorplanWallsObjectsBBoxCenterVector.z),"left"===t.positionKey||"right"===t.positionKey){const e="left"===t.positionKey?-1:1;a.translateX(e*(o+.5*this.floorplanWallsObjectsBoundingBox2DCoordinates.width*this.scaleFactor+s.x/2))}else{const e="bottom"===t.positionKey?-1:1;let i=o+.5*this.floorplanWallsObjectsBoundingBox2DCoordinates.height*this.scaleFactor+s.y/2;"bottom"===t.positionKey&&"hidden"!==this.props.mainComponentThis.clockVisibility&&(i+=this.floorplanTimeMeshOffsetFromBBoxSide+this.floorplanTimeMeshHeight),a.translateY(e*i)}a.userData.planePosition=t.positionKey,e.add(a)}),null,(e=>console.error(`Error while loading application defined ${t.positionKey} fixed plane source`,e)))}))}function bd(e){ul.call(this,e),this.updateControlPanelState()}function wd(e,t,i,o,n){gl.call(this,e,t,i,o,n);const s=n?"currentViewArray":"floorplanViewArray";this.getPanel3DUnfixedItemsOptions().forEach((e=>{e[s]=e[s].filter((e=>{const i=e.mesh;return i.floorNumber!==t||(this.removeUnfixedItem(i,!0),!1)}))}))}function Cd(e){fl.call(this,e),this.updateControlPanelState()}function xd(e,t,i,o,n){bl.call(this,e,t,i,o,n);const s=n?"currentViewArray":"floorplanViewArray";this.getPanel3DUnfixedItemsOptions().forEach((i=>this.drawPanel3DOptionFloorUnfixedItems(e,this.filterPanel3DOptionUnfixedItemsObjData(t.objData,i),t.floorNumber,i[s])))}function _d(e,t,i,o){const n=t.clone();e.parent.worldToLocal(n);const s=e.position.clone().sub(n);s.applyAxisAngle(i.normalize(),o),e.position.copy(s).add(n),e.rotateOnAxis(i.normalize(),o)}function yd(){let e=[this.floorplan3DViewScene];this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&e.push(this.floorplan3DOnMapScene),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()?this.objectConnectorsArray.forEach((t=>{e.forEach((e=>{e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).forEach((e=>e.changeStateMethod&&e.changeStateMethod(e,this.getObjectConnectorParamsData(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName],e.object2D))))}))})):this.objectConnectorsArray.forEach((t=>{e.forEach((e=>{e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).forEach((e=>e.itemObject.resetHighlightColor&&e.itemObject.resetHighlightColor()))}))}))}function Sd(e,t){if(this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const i=e.itemObject;i.setHighlightColor&&(t?i.highlightOnColor():i.highlightOffColor())}}function vd(e,t){_h.call(this,e,t);const i=this.getPanel3DUnfixedItemsOptions(),o=i.map((e=>e.floorplanViewArray));this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&o.push(...i.map((e=>e.currentViewArray))),o.forEach((i=>i.forEach((i=>{const o=i.mesh;o.floorNumber===e&&(o.visible=t,o.roomMesh&&(o.roomMesh.visible=t),o.backgroundMesh&&(o.backgroundMesh.visible=t))})))),this.sensorHeatmapPlanesData.filter((t=>t.floorNumber===e)).forEach((e=>{e.planeMesh.visible=t,e.valueTextMeshes&&e.valueTextMeshes.forEach((e=>e.visible=t))}))}function Dd(e,t,i){const o=new L.mrM({color:i||16711935}),n=(new L.LoY).setFromPoints(e),s=new L.N1A(n,o);t.add(s)}function Td(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new L.Pq0(0,0,0);console.log(i),this.drawLine([new L.Pq0(0,0,0).add(i),new L.Pq0(1,0,0).multiplyScalar(t).add(i)],e,16711680),this.drawLine([new L.Pq0(0,0,0).add(i),new L.Pq0(0,1,0).multiplyScalar(t).add(i)],e,65280),this.drawLine([new L.Pq0(0,0,0).add(i),new L.Pq0(0,0,1).multiplyScalar(t).add(i)],e,255)}function jd(e){this.addShadowCastLightToList({lightMeshObject:this.shadowCastingLightsWaitingList[e].lightMeshObject,isMapScene:this.shadowCastingLightsWaitingList[e].isMapScene},this.shadowCastingLightsActive),this.setLightStateParameters(this.shadowCastingLightsWaitingList[e].lightMeshObject,!0,!1),this.shadowCastingLightsWaitingList.splice(e,1)}function Id(e,t,i){const o=e.itemObject,s=this.getMeshObjectConnectorProperties(e);o.renderLight(s.variant,"spot"===s.variant?{spotAngle:s.spot_angle,spotDistance:s.spot_distance}:null);const r=e.light,l=t;r.color=s.color;const h=pi(r);if(r.state!==(l?"on":"off")){const e=()=>{r.castShadow=l,r.state=l?"on":"off",r.power=l?s.power:0,this.updateShadowMap(h)};i?e():0===this.changedLightsShadowMaps.length?(this.changeLightShadowMapsLoadingSet=null,this.changedLightsShadowMaps.push({lightObject:r,isMapLight:h===this.floorplan3DOnMapScene,onLoadingRenderedCallback:e}),n.render((0,a.jsx)(Ca,{}),this.props.mainComponentThis.loadingComponentContainer.current,(()=>{setTimeout((()=>{this.changeLightShadowMapsLoadingSet=!0,this.changedLightsShadowMaps.forEach((e=>{e.onLoadingRenderedCallback&&(e.onLoadingRenderedCallback(),delete e.onLoadingRenderedCallback)}))}),100)}))):null===this.changeLightShadowMapsLoadingSet?this.changedLightsShadowMaps.push({lightObject:r,isMapLight:h===this.floorplan3DOnMapScene,onLoadingRenderedCallback:e}):(this.changedLightsShadowMaps.push({lightObject:r,isMapLight:h===this.floorplan3DOnMapScene}),e())}else r.power=l?s.power:0}function Pd(e,t){!t.find((t=>t.lightMeshObject===e.lightMeshObject))&&t.push(e)}function Od(e){for(let t=this.changedLightsShadowMaps.length-1;t>=0;t--)this.changedLightsShadowMaps[t].isMapLight===e&&!Object.hasOwn(this.changedLightsShadowMaps[t],"onLoadingRenderedCallback")&&("off"===this.changedLightsShadowMaps[t].lightObject.state&&!1===this.changedLightsShadowMaps[t].lightObject.castShadow||"on"===this.changedLightsShadowMaps[t].lightObject.state&&!0===this.changedLightsShadowMaps[t].lightObject.castShadow)&&this.changedLightsShadowMaps.splice(t,1);0===this.changedLightsShadowMaps.length&&(n.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current),this.changeLightShadowMapsLoadingSet=!1)}function kd(e){return{width:e.screenItemProperties.screenPartDimensions.localWidth*(1-(Ue[e.objectType].offsetLeft+Ue[e.objectType].offsetRight)),height:e.screenItemProperties.screenPartDimensions.localHeight*(1-(Ue[e.objectType].offsetTop+Ue[e.objectType].offsetBottom))}}function Fd(e){if(!e.screenItemProperties)return;e.mesh.updateWorldMatrix(!0,!0);const t=Ue[e.objectType].useCenterPoint?e.screenItemProperties.screenPartCenterPointLocal.clone():e.screenItemProperties.screenPartCenterEdgePointLocal.clone();t.y+=Ue[e.objectType].offsetBottom/2*e.screenItemProperties.screenPartDimensions.localHeight,t.y-=Ue[e.objectType].offsetTop/2*e.screenItemProperties.screenPartDimensions.localHeight;let i=Ue[e.objectType].offsetLeft,o=Ue[e.objectType].offsetRight;e.object2D.additionalParams.mirrored&&(i=Ue[e.objectType].offsetRight,o=Ue[e.objectType].offsetLeft),t.x+=xi(e.mesh,"lefttoright")*(i/2)*e.screenItemProperties.screenPartDimensions.localWidth,t.x+=xi(e.mesh,"righttoleft")*(o/2)*e.screenItemProperties.screenPartDimensions.localWidth,0!==Ue[e.objectType].rotationXDeg&&e.mesh.screenPart.rotation.set(f(Ue[e.objectType].rotationXDeg),0,0),e.mesh.screenPart.position.set(t.x,t.y,t.z);let n=Ue[e.objectType].offsetDepth*e.screenItemProperties.screenPartDimensions.localDepth+Ue[e.objectType].offsetDepthWorld*e.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor;n+=this.getScreenPartLocalDepth(e.mesh,e.screenPartProperties)/2,e.mesh.screenPart.translateOnAxis(new L.Pq0(0,0,_i(e.object2D,"forward")),n)}function Md(e,t){const i=t.screen_is_light?t.screen_3d_glow_effect?this.screen3DGlowLightPartDepth:this.screenBasicLightPartDepth:this.screenMeshPartDepth;return t.screen_3d_glow_effect?i*e.itemObject.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor*t.screen_3d_glow_factor:i*e.itemObject.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor*Ue[e.itemObject.objectType].screenPartDepthScaleFactor}function Ad(e){this[e===this.floorplan3DOnMapScene?"floorplan3DOnMapRenderer":"floorplan3DViewRenderer"].shadowMap.needsUpdate=!0}function Rd(){this.props.mainComponentThis.objectConnectorAvailableClasses.forEach((e=>this.controlPanelRef.current.setObjectConnectorClassPanelItems(e)))}const Ld=class extends B{constructor(e,t,i,o){super(),this.scene=e,this.floorplan3DThis=i,this.fixed=o.fixed||!1,this.resizable=o.resizable||!1,this.mesh=t,this.mesh.isUnfixedItem=!0,this.mesh.itemObject=this,this.raycastedObject=null,this.unfixedItemConnectorClass=i.getObjectConnectorClassValue(null,this.mesh.object2D)}initObject(){this.scene.add(this.mesh),"_sensors_"===this.unfixedItemConnectorClass?(this.mesh.backgroundMesh&&(this.mesh.backgroundMesh.itemObject=this,this.scene.add(this.mesh.backgroundMesh)),this.mesh.roomMesh&&(this.mesh.roomMesh.itemObject=this,this.scene.add(this.mesh.roomMesh))):"_others_"===this.unfixedItemConnectorClass&&this.mesh.backgroundMesh&&(this.mesh.backgroundMesh.itemObject=this,this.scene.add(this.mesh.backgroundMesh))}remove(){if("_sensors_"===this.unfixedItemConnectorClass)this.mesh.backgroundMesh&&(this.scene.remove(this.mesh.backgroundMesh),hi(this.mesh.backgroundMesh)),this.mesh.roomMesh&&(this.scene.remove(this.mesh.roomMesh),hi(this.mesh.roomMesh));else if("_others_"===this.unfixedItemConnectorClass)this.mesh.backgroundMesh&&(this.scene.remove(this.mesh.backgroundMesh),hi(this.mesh.backgroundMesh));else if("_presence_area_"===this.unfixedItemConnectorClass)for(let e=this.mesh.children.length-1;e>=0;e--){const t=this.mesh.children[e];this.mesh.remove(t),hi(t)}this.scene.remove(this.mesh),hi(this.mesh)}getUnfixedItemIntersections(){let e=[];return"_others_"===this.unfixedItemConnectorClass?e.push(this.mesh.backgroundMesh):"_sensors_"===this.unfixedItemConnectorClass?(this.mesh.backgroundMesh&&e.push(this.mesh.backgroundMesh),this.mesh.roomMesh&&e.push(this.mesh.roomMesh)):"_presence_area_"===this.unfixedItemConnectorClass?this.mesh.children.forEach((t=>e.push(t))):e.push(this.mesh),e}};const Bd=class{constructor(){this.name="DefaultAnimationName",this.clock=new L.zD7,this.running=!1}start(){throw new Error("Method start of class that implements interface Animation must be implemented")}stop(){throw new Error("Method stop of class that implements interface Animation must be implemented")}animate(){throw new Error("Method animate of class that implements interface Animation must be implemented")}remove(){throw new Error("Method remove of class that implements interface Animation must be implemented")}setIsVisible(){}};const Wd=class extends Bd{get on(){return this.running}constructor(e){super(),this.name="FanRotationAnimation",this.maxRPM=150,this.direction="forward",this.percentage=.6,this.floorItem=e}setDirection(e){"forward"!==e&&"reverse"!==e||(this.direction=e)}setPercentage(e){this.percentage=Math.max(0,Math.min(1,e))}increaseSpeed(e){this.setPercentage(this.percentage+e)}decreaseSpeed(e){this.setPercentage(this.percentage-e)}turnOn(){this.clock=new L.zD7,this.start()}turnOff(){this.stop()}toggle(){this.on?this.turnOff():this.turnOn()}animate(){const e=this.clock.getDelta(),t=2*Math.PI*(this.maxRPM*this.percentage)/60*e;"reverse"===this.direction?this.floorItem.mesh.rotation.y-=t:this.floorItem.mesh.rotation.y+=t,this.on&&requestAnimationFrame((()=>this.animate()))}start(){this.running=!0,this.animate()}stop(){this.running=!1}remove(){this.stop()}};const Nd=class extends Bd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;super(),this.name="CoverScaleAnimation",this.startHeightOrWidthSvg=null,this.targetHeightOrWidthSvg=null,this.startTime=null,this.speed=200,this.wallItem=e,this.floorplan3DThis=this.wallItem.floorplan3DThis,this.running=!1,this.closingDirection=t,this.targetPosition=i,this.currentPosition=i,this.previousPosition=i,this.closedOffsetInSvg=o,this.openOffsetInSvg=n,this.refreshPosition()}setClosedOffset(e){const t=this.getOriginalHeightOrWidth(),i=Math.max(Math.min(e,t),0);i!==this.closedOffsetInSvg&&(this.closedOffsetInSvg=i,this.refreshPosition())}setOpenOffset(e){const t=this.getOriginalHeightOrWidth(),i=Math.max(Math.min(e,t),0);i!==this.openOffsetInSvg&&(this.openOffsetInSvg=i,this.refreshPosition())}setSpeed(e){this.speed=Math.max(e,5)}setClosingDirection(e){["top","left","right"].includes(e)&&e!==this.closingDirection&&(this.resizeByWidthHeightDepth(this.wallItem.object2D.additionalParams.width3D,this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D),this.closingDirection=e,this.refreshPosition())}setPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=Math.max(0,Math.min(1,e));(o!==this.targetPosition||i)&&(this.targetPosition=o,0!==t?this.start(t):this.resizeByHeightOrWidth(this.getHeightOrWidthFromPosition(o)))}refreshPosition(){this.setPosition(this.targetPosition,0,!0)}getOriginalHeightOrWidth(){return"top"===this.closingDirection?this.wallItem.object2D.additionalParams.height3D*this.floorplan3DThis.scaleFactor:this.wallItem.object2D.additionalParams.width3D*this.floorplan3DThis.scaleFactor}getOpenHeightOrWidth(){return this.getOriginalHeightOrWidth()-this.openOffsetInSvg}getHeightOrWidthRange(){return this.getOriginalHeightOrWidth()-this.openOffsetInSvg-this.closedOffsetInSvg}getClosedHeightOrWidth(){return this.getOpenHeightOrWidth()-this.getHeightOrWidthRange()}resizeByHeightOrWidth(e){this.resizeByWidthHeightDepth("top"===this.closingDirection?this.wallItem.object2D.additionalParams.width3D:e/this.floorplan3DThis.scaleFactor,"top"===this.closingDirection?e/this.floorplan3DThis.scaleFactor:this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D)}resizeToOriginalSize(){this.resizeByWidthHeightDepth(this.wallItem.object2D.additionalParams.width3D,this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D)}resizeByWidthHeightDepth(e,t,i){this.wallItem.resizeByReferencePoint(e,t,i,(()=>"top"===this.closingDirection?this.wallItem.getMeshPoint({x:0,y:1,z:0}):"left"===this.closingDirection?this.wallItem.getMeshPoint({x:1,y:0,z:0}):"right"===this.closingDirection?this.wallItem.getMeshPoint({x:-1,y:0,z:0}):this.wallItem.getMeshCenter()))}getCurrentHeightOrWidth(){const e=this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg;return this.openOffsetInSvg+e*(1-this.currentPosition)}getTargetHeightOrWidth(){return(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)*(1-this.targetPosition)+this.openOffsetInSvg}getPositionFromHeightOrWidth(e){return 1-(e-this.openOffsetInSvg)/(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)}getHeightOrWidthFromPosition(e){return(1-e)*(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)+this.openOffsetInSvg}animate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.speed;this.startData||(this.startData={time:e,heightOrWidth:this.getCurrentHeightOrWidth()});const i=(e-this.startData.time)/1e3,o=Math.abs(this.getTargetHeightOrWidth()-this.startData.heightOrWidth),n=0===t?0:o/t,s=0===n?1:Math.min(i/n,1);this.currentPosition=s*this.targetPosition+(1-s)*this.previousPosition;const a=L.cj9.lerp(this.startData.heightOrWidth,this.getTargetHeightOrWidth(),s);this.resizeByHeightOrWidth(a),s<1?(this.running?requestAnimationFrame((e=>this.animate(e,t))):this.resizeByHeightOrWidth(this.getTargetHeightOrWidth()),this.floorplan3DThis.updateShadowMap(this.wallItem.scene)):this.stop()}start(e){this.running?this.stop():(this.running=!0,this.startData=null,requestAnimationFrame((t=>this.animate(t,e))))}stop(){this.previousPosition=this.currentPosition,this.startData=null,this.running=!1,this.floorplan3DThis.updateShadowMap(this.wallItem.scene)}remove(){this.stop(),this.resizeToOriginalSize()}};const Vd=class extends Bd{constructor(e,t,i){super(),this.name="AirConditionAnimation",this.airConditionItem=e,this.airConditionMode="neutral",this.airFlowColor="#696969",this.scene=t,this.floorplan3DThis=i,this.airFlowGroup=null,this.airFlowGroupWidth=1.6*this.airConditionItem.halfSize.x,this.airFlowGroupHeight=2*this.airConditionItem.halfSize.y*.2,this.airFlowGroupDepth=4*this.airConditionItem.halfSize.z,this.pointsPerCurve=50,this.curveCount=5,this.curveZInstancesCount=2,this.curveLength=this.airFlowGroupDepth/(this.curveZInstancesCount+1),this.curveSpacing=this.curveZInstancesCount>1?(this.airFlowGroupDepth-this.curveZInstancesCount*this.curveLength)/(this.curveZInstancesCount+1):0,this.curveHeight=this.airFlowGroupHeight,this.airFlowSpeed=.2,this.curveThickness=1,this.curveInitialZPosition=this.airFlowGroupDepth-this.curveLength}updateAnimationProperties(e){this.airConditionMode=e.mode,this.airFlowColor="heating"===this.airConditionMode||"drying"===this.airConditionMode?"#ff4500":"cooling"===this.airConditionMode?"#00bfff":"#696969",this.airFlowGroup&&this.airFlowGroup.children.forEach((e=>{e.material.color.set(this.airFlowColor),e.material.needsUpdate=!0}))}getAirConditionModelBottomFrontCenterPointCoordinates(){const e=this.airConditionItem.getItemCenter(),t=new L.Pq0(0,-this.airConditionItem.halfSize.y,this.airConditionItem.halfSize.z),i=this.airConditionItem.mesh.localToWorld(t.clone()).sub(this.airConditionItem.mesh.position),o=e.clone().add(i);return this.scene===this.floorplan3DThis.floorplan3DOnMapScene&&this.airConditionItem.sceneTransformedCalled&&this.floorplan3DThis.processSceneVec3(o),o}createAirflowGroup(){this.airFlowGroup=new L.YJl;for(let t=0;t<this.curveCount;t++)for(let e=0;e<this.curveZInstancesCount;e++)this.createAirflowCurve(t,e);const e=this.getAirConditionModelBottomFrontCenterPointCoordinates();this.airFlowGroup.rotateY(this.airConditionItem.rotation),this.airFlowGroup.position.set(e.x-this.airFlowGroupDepth*Math.sin(this.airConditionItem.rotation),e.y,e.z-this.airFlowGroupDepth*Math.cos(this.airConditionItem.rotation)),this.scene.add(this.airFlowGroup)}createAirflowCurve(e,t){const i=e/(this.curveCount-1)*this.airFlowGroupWidth-this.airFlowGroupWidth/2,o=[];for(let l=0;l<=this.pointsPerCurve;l++){const e=l/this.pointsPerCurve*this.curveLength,t=Math.sin(e*Math.PI*2/this.curveLength)*this.curveHeight*.5;o.push(new L.Pq0(i,t,e))}const n=new L.B6O(o),s=new L.j6(n,this.pointsPerCurve,this.curveThickness,8,!1),a=new L.V9B({opacity:1,transparent:!0});a.color.set(this.airFlowColor),a.needsUpdate=!0;const r=new L.eaF(s,a);return r.position.z=this.curveInitialZPosition-(t+1)*this.curveSpacing-t*this.curveLength,r.airFlowAnimationCallCount=0,this.airFlowGroup.add(r),{curve:n,curveMesh:r}}removeAirFlowGroup(){if(this.airFlowGroup){const e=[...this.airFlowGroup.children];for(let t=e.length-1;t>=0;t--)this.airFlowGroup.remove(e[t]),hi(e[t]);this.scene.remove(this.airFlowGroup),this.airFlowGroup=null}}start(){this.airFlowGroup||this.createAirflowGroup(),this.running=!0,this.animate()}stop(){this.running=!1,this.airFlowGroup&&this.removeAirFlowGroup()}animate(){this.running&&(this.airFlowGroup.children.forEach((e=>{e.airFlowAnimationCallCount++,e.position.z-=this.airFlowSpeed;const t=e.position.z/this.curveInitialZPosition;e.material.opacity=Math.min(Math.max(t,0),1),e.material.needsUpdate=!0;const i=e.geometry.getAttribute("position");for(let o=0;o<i.count;o++){const t=i.getZ(o)-e.airFlowAnimationCallCount*this.airFlowSpeed,n=Math.sin(t*Math.PI*2/this.curveLength)*this.curveHeight*.5;i.setY(o,n)}i.needsUpdate=!0,e.position.z<this.curveSpacing-this.curveLength&&(e.position.z=this.curveInitialZPosition,e.airFlowAnimationCallCount=0)})),requestAnimationFrame((()=>this.animate())))}remove(){this.stop()}setIsVisible(e){this.airFlowGroup&&(this.airFlowGroup.visible=e)}};const Ed=class extends Bd{constructor(e,t,i,o){super(),this.getRadiusForHeight=e=>this.christmasTreeMeshHeightToRadiusMap[Math.floor(e)]||0,this.name="ChristmasTreeLightsAnimation",this.christmasTreeItem=e,this.scene=t,this.camera=i,this.floorplan3DThis=o,this.lightsCount=50,this.lightSpiralRotationsCount=5,this.lightsAnimationIntervalMs=500,this.availableLightColors=[16711680,65280,255,16776960,16777215,65535,16711935,16753920,8388736],this.usePointLights=!1,this.lightsAnimationIntervalObject=null,this.christmasTreeMesh=e.mesh,this.christmasTreeMeshHeight=2*e.halfSize.y,this.christmasTreeMeshCenter=e.getItemCenter(),this.lightsStartHeightOffset=Wi[e.objectType].startFactor*this.christmasTreeMeshHeight,this.lightsEndHeightOffset=Wi[e.objectType].endFactor*this.christmasTreeMeshHeight,this.christmasTreeBottomYCoordinate=e.itemStartHeight,this.heightToradiusMapStep=1,this.christmasTreeMeshHeightToRadiusMap=e.heightToRadiusMap||this.calculateHeightToRadiusMap(e),this.christmasTreeLightObjects=[]}calculateHeightToRadiusMap(e){const t={};return this.christmasTreeMesh.updateMatrixWorld(!0),this.christmasTreeMesh.traverse((e=>{if(e.isMesh&&e.geometry){const i=((e,t)=>{const i=[],o=e.getAttribute("position");for(let n=0;n<o.count;n++){const e=new L.Pq0;e.fromBufferAttribute(o,n),e.applyMatrix4(t),i.push(e)}return i})(e.geometry,e.matrixWorld);this.scene===this.floorplan3DThis.floorplan3DOnMapScene&&this.christmasTreeItem.sceneTransformedCalled&&i.forEach((e=>this.floorplan3DThis.processSceneVec3(e))),i.forEach((e=>{const i=e.y-this.christmasTreeBottomYCoordinate;if(i<this.lightsStartHeightOffset||i>this.lightsEndHeightOffset)return;const o=Math.floor(i/this.heightToradiusMapStep)*this.heightToradiusMapStep,n=Math.sqrt(Math.pow(e.x-this.christmasTreeMeshCenter.x,2)+Math.pow(e.z-this.christmasTreeMeshCenter.z,2));n>(t[o]||-1/0)&&(t[o]=n)}))}})),e.heightToRadiusMap=t,t}createChristmasTreeLights(){for(let e=0;e<this.lightsCount;e++){const t=e/(this.lightsCount-1),i=this.lightsStartHeightOffset+t*(this.lightsEndHeightOffset-this.lightsStartHeightOffset),o=this.getRadiusForHeight(i);if(o>0){const e=t*this.lightSpiralRotationsCount*2*Math.PI,n=o*Math.cos(e),s=o*Math.sin(e),a=i;this.christmasTreeLightObjects.push(this.createLightObject(new L.Pq0(n+this.christmasTreeMeshCenter.x,a,s+this.christmasTreeMeshCenter.z)))}}}createLightObject(e){let t;const i=this.getLightColor();return this.usePointLights?(t=new L.HiM(i,1,Wi[this.christmasTreeItem.objectType].lightDistanceMeters*this.floorplan3DThis.props.mainComponentThis.meter*this.floorplan3DThis.scaleFactor,.5),t.position.copy(e),t.needsUpdate=!0,this.scene.add(t)):(t={},t.centerMesh=new L.eaF(new L.Gu$(.95,16,16),new L.BKk({uniforms:{color:{value:new L.Q1f(i)},intensity:{value:1},time:{value:0}},vertexShader:"\n            varying vec3 vNormal;\n            varying vec3 vPosition;\n    \n            void main() {\n                vNormal = normal;\n                vPosition = position;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform vec3 color;\n            uniform float intensity;\n            uniform float time;\n            \n            varying vec3 vNormal;\n            varying vec3 vPosition;\n    \n            void main() {\n                // Calculate distance from the camera to create a gradient effect\n                float dist = length(vPosition);\n                \n                // Create a glowing effect with an intensity based on the distance\n                float glow = intensity / (dist * dist + 1.0);\n    \n                // Add a pulsating effect (flicker) based on time\n                float flicker = sin(time * 10.0) * 0.1 + 1.0;\n    \n                // Apply glow and color with the pulsating flicker\n                gl_FragColor = vec4(color * glow * flicker, 1.0);\n            }\n          ",emissive:new L.Q1f(i),side:L.$EB,transparent:!0,depthWrite:!1})),t.centerMesh.position.copy(e),t.centerMesh.needsUpdate=!0,this.scene.add(t.centerMesh),t.glowMesh=new L.eaF(new L.Gu$(1,16,16),new L.BKk({uniforms:{c:{type:"f",value:1},p:{type:"f",value:1.4},glowColor:{type:"c",value:new L.Q1f(i)},viewVector:{type:"v3",value:this.camera.position}},vertexShader:"\n            uniform vec3 viewVector;\n            uniform float c;\n            uniform float p;\n            varying float intensity;\n            void main() \n            {\n                vec3 vNormal = normalize( normalMatrix * normal );\n              vec3 vNormel = normalize( normalMatrix * viewVector );\n              intensity = pow( c - dot(vNormal, vNormel), p );\n              \n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n          ",fragmentShader:" \n            uniform vec3 glowColor;\n            varying float intensity;\n            void main() \n            {\n              vec3 glow = glowColor * intensity;\n                gl_FragColor = vec4( glow, 1.0 );\n            }\n          ",side:L.hB5,blending:L.EZo,transparent:!0})),t.glowMesh.position.copy(e),t.glowMesh.needsUpdate=!0,this.scene.add(t.glowMesh)),t}getLightColor(){return this.availableLightColors[Math.floor(Math.random()*(this.availableLightColors.length-1))]}turnChristmasLightsOn(){this.christmasTreeLightObjects.length||this.createChristmasTreeLights(),this.start()}turnChristmasLightsOff(){this.stop()}animate(){this.christmasTreeLightObjects.forEach((e=>{const t=this.getLightColor();this.usePointLights?e.color.setHex(t):(e.centerMesh.material.uniforms.color.value.set(t),e.centerMesh.material.uniforms.time.value+=.05,e.centerMesh.material.needsUpdate=!0,e.glowMesh.material.uniforms.viewVector.value=(new L.Pq0).subVectors(this.camera.position,e.glowMesh.position),e.glowMesh.material.uniforms.glowColor.value.setHex(t),e.glowMesh.material.needsUpdate=!0)}))}start(){this.running=!0,this.lightsAnimationIntervalObject=setInterval((()=>this.animate()),this.lightsAnimationIntervalMs)}stop(){this.running=!1;for(let e=0;e<this.christmasTreeLightObjects.length;e++)this.usePointLights?(this.scene.remove(this.christmasTreeLightObjects[e]),hi(this.christmasTreeLightObjects[e])):new Array(this.christmasTreeLightObjects[e].glowMesh,this.christmasTreeLightObjects[e].centerMesh).forEach((e=>{this.scene.remove(e),hi(e)}));this.christmasTreeLightObjects=[],clearInterval(this.lightsAnimationIntervalObject)}remove(){this.stop()}setIsVisible(e){this.christmasTreeLightObjects.forEach((t=>{this.usePointLights?t.visible=e:t.centerMesh.visible=t.glowMesh.visible=e}))}};function Hd(e){let t=[];for(let i=0;i<this.objectConnectorsArray.length;i++){let o=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.objectConnectorsArray[i][this.props.mainComponentThis.connectorEntityInstancePropertyName][this.props.mainComponentThis.connectorIDbinderIDPropertyName]));o?JSON.stringify(this.objectConnectorsArray[i][this.props.mainComponentThis.connectorEntityInstancePropertyName])!==JSON.stringify(o)&&this.objectConnectorsArray[i].update(this.getObjectConnectorParamsData(null,this.objectConnectorsArray[i].bindedObjects[0].object2D,{...o})):t.push(i)}t.sort(((e,t)=>t-e));for(let i=0;i<t.length;i++)this.objectConnectorsArray[t[i]].remove(),this.objectConnectorsArray.splice(t[i],1);if(this.isInitialFloorplanDrawingFinished){for(let t=0;t<e.length;t++){const i=this.props.mainComponentThis.klet3DLastSavedData.find((i=>i[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[t][this.props.mainComponentThis.connectorIDbinderIDPropertyName]));i&&!this.objectConnectorsArray.find((i=>i[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[t][this.props.mainComponentThis.connectorIDbinderIDPropertyName]))&&this.addObjectConnectorObject(i)}this.onObjectConnectorsDataChange&&this.onObjectConnectorsDataChange()}console.log("objectConnectorsArray",this.objectConnectorsArray)}function zd(){const e=this.sensorsHeatmapSceneControlRef.current.getActiveSensorHeatmap();if(e){const t=[this.drawedSensorHeatmapData,this.getSensorHeatmapFloorsDistribution(e)].map((e=>e.map((e=>({floorNumber:e.floorObject.floorNumber,sensorsData:e.sensorsData})))));JSON.stringify(t[0])!==JSON.stringify(t[1])&&this.renderSensorHeatmap(e,this.floorplan3DViewScene)}this.sensorsHeatmapSceneControlRef.current.setDropdownListData()}function Gd(e){let t=[];const i=this.getObjectConnectorParamsData(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName],this.props.mainComponentThis.getObject2DById(e.objID[0].id));if(this.getIsFixed2DObjectsValue(i))for(let n=0;n<this.floorplan3DViewScene.children.length;n++)this.floorplan3DViewScene.children[n].object2D&&e.objID.find((e=>e.id===this.floorplan3DViewScene.children[n].object2D.id))&&t.push(this.floorplan3DViewScene.children[n]);else{for(let i=0;i<e.objID.length;i++){let o;for(let n=0;n<this.floorplanFloors.length;n++)if(o=this.floorplanFloors[n].objData.find((t=>t.id===e.objID[i].id)),o){t.push({obj2D:o,floorNumber:this.floorplanFloors[n].floorNumber});break}}t=t.map((e=>this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:e.obj2D,floorNumber:e.floorNumber})))}const o=new cd(this,[],i);this.objectConnectorsArray.push(o);for(let n=0;n<t.length;n++)console.log("create ObjectsConnector addBindedObject"),o.addBindedObject(t[n])}function qd(e){const t=this.getObjectConnectorClassValue(e),i=this.props.mainComponentThis.objectConnectorAvailableClasses.find((e=>e.connectorClass===t));if(i&&!i.isFixed){let e={connectorPanel3DOptions:i.connectorPanel3DOptions};return"_presence_area_"===t&&(e.customBindedObjectUpdateMethodName="handlePresenceAreaBindedObjectUpdate"),e}return{}}function Ud(e){return e?{object2D:e.object2D,floorNumber:e.floorNumber}:{}}function Yd(e){if(this.isFloorplanItemMeshBinded(e)){let t=this.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(t.bindedObjects=t.bindedObjects.filter((t=>t.object2D.id!==e.object2D.id)))}}function Xd(e){const t=this.getObjectConnectorClassValue(e);return!t||this.props.mainComponentThis.objectConnectorAvailableClasses.find((e=>e.connectorClass===t)).isFixed}function Kd(e){this.props.mainComponentThis.bindingRightBoxComponentRef.current&&this.props.mainComponentThis.bindingRightBoxComponentRef.current.updateKlet3DBinderState(e)}function Zd(e,t){const i=e.status,o=this.getMeshObjectConnectorState(e,t),n=o?"open":"closed";i!==n&&(e.status=n,this.updateDoorWindowMeshState(e)),this.handleFixedItemsChangeStateMethodHighlight(e,o)}function $d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.shadowCastingLightsWaitingList=this.shadowCastingLightsWaitingList.filter((e=>this.getMeshObjectConnectorState(e.lightMeshObject,t)));const i=this.getMeshObjectConnectorState(e,t),o=pi(e)===this.floorplan3DOnMapScene,n=this.shadowCastingLightsActive.findIndex((t=>t.lightMeshObject===e));if(this.shadowCastingLightsActive.length<this.maxShadowCastingLightsCount){let s;i?-1===n?this.showMapLayer3DInputRef.current.getCheckedStatus()&&o||!this.showMapLayer3DInputRef.current.getCheckedStatus()&&!o?(s=!0,this.addShadowCastLightToList({lightMeshObject:e,isMapScene:o},this.shadowCastingLightsActive)):(s=!1,this.addShadowCastLightToList({lightMeshObject:e,isMapScene:o},this.shadowCastingLightsWaitingList)):s=!0:(s=!1,-1!==n&&this.shadowCastingLightsActive.splice(n,1)),this.setLightStateParameters(e,s,t.isInitialRenderCall)}else if(i){let i;this.showMapLayer3DInputRef.current.getCheckedStatus()&&o||!this.showMapLayer3DInputRef.current.getCheckedStatus()&&!o?-1===n?(this.addShadowCastLightToList({lightMeshObject:e,isMapScene:o},this.shadowCastingLightsWaitingList),i=!1):i=!0:(this.addShadowCastLightToList({lightMeshObject:e,isMapScene:o},this.shadowCastingLightsWaitingList),i=!1),this.setLightStateParameters(e,i,t.isInitialRenderCall)}else if(this.setLightStateParameters(e,!1,t.isInitialRenderCall),-1!==n&&(this.showMapLayer3DInputRef.current.getCheckedStatus()&&o||!this.showMapLayer3DInputRef.current.getCheckedStatus()&&!o)){let e=this.shadowCastingLightsWaitingList.findIndex((e=>e.isMapScene===this.shadowCastingLightsActive[n].isMapScene));this.shadowCastingLightsActive.splice(n,1),-1!==e&&this.turnWaitingLightOn(e)}let s=[];s=this.showMapLayer3DInputRef.current.getCheckedStatus()?this.shadowCastingLightsWaitingList.filter((e=>e.isMapScene)):this.shadowCastingLightsWaitingList.filter((e=>!e.isMapScene)),s.length>0?this.maxShadowCastingLightsAlert.current.showAlert((0,a.jsxs)("span",{children:["To ensure optimal performance, add-on currently allows a maximum of ",(0,a.jsx)("b",{children:this.maxShadowCastingLightsCount})," ","lights to be turned on simultaneously"]}),"warning"):this.maxShadowCastingLightsAlert.current.hideAlert(),this.handleFixedItemsChangeStateMethodHighlight(e,i),console.log("Active",this.shadowCastingLightsActive),console.log("Waiting",this.shadowCastingLightsWaitingList)}function Jd(e,t){const{itemObject:i}=e;let o=i.getAnimation("FanRotationAnimation");o||(o=new Wd(i),i.addAnimation(o));const n=e.state,s=this.getMeshObjectConnectorState(e,t);n!==s&&(e.state=s,"on"===s?o.turnOn():o.turnOff());const a=this.getMeshObjectConnectorProperties(e,t);o.setPercentage(a.percentage/100),o.setDirection(a.direction),this.handleFixedItemsChangeStateMethodHighlight(e,"on"===s)}function Qd(e,t){const{itemObject:i}=e;let o=i.getAnimation("CoverScaleAnimation");o||(o=new Nd(i),i.addAnimation(o));const n=this.getMeshObjectConnectorProperties(e,t);o.setOpenOffset(n.open_offset*this.scaleFactor),o.setClosedOffset(n.closed_offset*this.scaleFactor),o.setClosingDirection(n.closing_direction),o.setPosition(n.currentPosition/100),this.handleFixedItemsChangeStateMethodHighlight(e,0!==n.currentPosition)}function ep(e,t){const i=e.itemObject,o=e.state,n=this.getMeshObjectConnectorState(e,t);o!==n&&(e.state=n);const s=this.getMeshObjectConnectorProperties(e,t);"on"===n?i.setMaterialOpacity(s.detected_opacity):i.setMaterialOpacity(s.undetected_opacity),this.updateShadowMap(i.scene)}function tp(e,t){const i=e.itemObject;let o;this.props.mainComponentThis.isFloorplanItemClassMember(i.objectType,"hvac","airCondition")&&(o=i.getAnimation("AirConditionAnimation"),o||(o=new Vd(i,pi(e),this),i.addAnimation(o)));const n=e.state,s=this.getMeshObjectConnectorState(e,t),a=this.getMeshObjectConnectorProperties(e,t);o&&o.updateAnimationProperties(a),n!==s&&(e.state=s,"on"===s?o&&o.start():o&&o.stop()),this.handleFixedItemsChangeStateMethodHighlight(e,"on"===s)}function ip(e,t){const i=e.itemObject;let o=i.getAnimation("ChristmasTreeLightsAnimation");if(!o){const t=pi(e);o=new Ed(i,t,t===this.floorplan3DViewScene?this.floorplan3DViewCamera:this.floorplan3DOnMapCamera,this),i.addAnimation(o)}const n=e.state,s=this.getMeshObjectConnectorState(e,t);n!==s&&(e.state=s,"on"===s?o.turnChristmasLightsOn():o.turnChristmasLightsOff()),this.handleFixedItemsChangeStateMethodHighlight(e,"on"===s)}function op(e,t){const i=e.state,o=this.getMeshObjectConnectorState(e,t);i!==o&&(e.state=o),this.handleFixedItemsChangeStateMethodHighlight(e,"on"===o)}function np(e,t){let i={};this.props.mainComponentThis.getScreenParametersFormItems(Yi,e.object2D).forEach((e=>{T.isHexColor(e.value)||(e.value=new L.Q1f(e.value)),i[e.field]=e.value,e.form&&e.form.forEach((e=>{T.isHexColor(e.value)||(e.value=new L.Q1f(e.value)),i[e.field]=e.value}))}));const o=this.getMeshObjectConnectorState(e,t),n=Yi.find((e=>e.field===`screen_${"on"===o?"on":"off"}_color`)).fieldPrefix;return{...i,screen_is_light:i[`${n}_is_light`],screen_3d_glow_effect:i[`${n}_3d_glow_effect`],screen_3d_glow_factor:i[`${n}_3d_glow_factor`],screen_3d_glow_spread:i[`${n}_3d_glow_spread`]}}function sp(e,t){const i=e.itemObject,o=this.getMeshObjectConnectorProperties(e,t);i.renderScreenPart(o);const n=e.screenPart,s=n.state,a=this.getMeshObjectConnectorState(e,t);if(null===a)return void i.unrenderScreenPart();s!==a&&(n.state=a);const r="on"===a?o.screen_on_color:o.screen_off_color;o.screen_is_light?(n.material.uniforms.color.value.set(new L.Q1f(r)),n.material.needsUpdate=!0):n.material.color=r,this.handleFixedItemsChangeStateMethodHighlight(e,"on"===a)}function ap(e,t){const i=this.getPresenceAreaDetectedObjectsData(e.object2D,t);this.getActiveScenes().map((t=>t.children.find((t=>"presence_area_group"===t.type&&t.object2D.id===e.object2D.id)))).filter((e=>!!e)).forEach((e=>{e.children.forEach((e=>{const t=e.itemObject,o=i.detectedObjectsPositions.find((e=>e.detected_object_field===t.object3DProperties.detected_object_field));o&&Li(o)?(t.setItemPosition(new L.Pq0(-this.calculatePresenceAreaDetectedObjectCoordinateValue(o.coordX,i.coordinatesUnit,this.scaleFactor),t.itemStartHeight,this.calculatePresenceAreaDetectedObjectCoordinateValue(o.coordY,i.coordinatesUnit,this.scaleFactor))),e.visible=!0):e.visible=!1})),this.updateShadowMap(pi(e))}))}function rp(e,t){const i=e.itemObject;i.renderSurfacePlane();const o=e.surfacePlane,n=o.state,s=this.getMeshObjectConnectorState(e,t);n!==s&&(o.state=s),null===s?this.renderSurfaceAreaPlaneDefaultState(i):this.updateSurfaceAreaPlane(i,"on"===s?"layout_on":"layout_off"),this.handleFixedItemsChangeStateMethodHighlight(e,"on"===s)}function lp(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return g(e,t,"meter")*this.props.mainComponentThis.meter*i}function hp(e){const t=this.getObjectConnectorClassValue(null,e.object2D),i=e.clone("_presence_area_"!==t);return i.type=e.type,i.object2D=e.object2D,i.floorNumber=e.floorNumber,e.changeStateMethod&&(i.changeStateMethod=e.changeStateMethod),e.changeStateOnClick&&(i.changeStateOnClick=e.changeStateOnClick),"_sensors_"===t?(e.backgroundMesh&&(i.backgroundMesh=e.backgroundMesh.clone(),i.backgroundMesh.type=e.backgroundMesh.type,i.backgroundMesh.sensorMesh=i),e.roomMesh&&(i.roomMesh=e.roomMesh.clone(),i.roomMesh.type=e.roomMesh.type,i.roomMesh.sensorMesh=i)):"_others_"===t?e.backgroundMesh&&(i.backgroundMesh=e.backgroundMesh.clone(),i.backgroundMesh.type=e.backgroundMesh.type,i.backgroundMesh.otherMesh=i):"_presence_area_"===t&&e.children.forEach((e=>{const t=e.itemObject,o=new(Z[this.props.mainComponentThis.getObjectItemType(t.objectType)])(i,this.presenceObjects3D,{...t.object3DProperties},t.object2D,t.objectType,t.floorNumber,this,{fixed:t.fixed,resizable:t.resizable});o.mesh.visible=e.visible,o.initObject()})),this.cloneUnfixedBindedObject3DCustomCallback(e,i),i}function cp(e,t){const i=new Ld(e,t,this,{fixed:!0,resizable:!1});return i.initObject(),i}function dp(e,t){t&&this.objectConnectorBindedObjectsOnItemRemoveCheck(e);e.itemObject.remove()}function pp(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[this.props.mainComponentThis.connectorIDbinderIDPropertyName])),o=this.props.mainComponentThis.getKlet3DBinderParamsDefaultValues(e.object2D);for(let n in o)t[n]=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,[n]),T.isHexColor(t[n])||(t[n]=new L.Q1f(t[n]));return t}function mp(e){return this.props.mainComponentThis.getObjectConnectorClassParamsForObject2D(e.object2D).defaultStateValue}function up(e,t){const i=this.props.mainComponentThis.getObjectConnectorClassParamsForObject2D(e.object2D);return i.getMeshStateValueMethod(e,t,i.meshStateParams)}function gp(e,t){return this.props.mainComponentThis.getObjectConnectorClassParamsForObject2D(e.object2D).getPropertiesMethod(e,t)}function fp(e,t){const i=t||e.connectorBindedObjectObj2D,o=this.props.mainComponentThis.getObjectConnectorClassParamsForObject2D(i);return o&&o.connectorClass}function bp(e){return this.isFloorplanItemMeshBinded(e)&&this.getFloorplanItemChangeStateOnClick(e)}function wp(e){return e.changeStateOnClick?e.changeStateOnClick:this.isFloorplanItemMeshBinded(e)&&this.props.mainComponentThis.getKlet3DDataParamValue(this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id)))),e.object2D,["toggle_on_click_status"])?this.fixedObjectConnectorChangeStateOnClickDefaultMethod:null}function Cp(e,t){const i=this.getSensorHeatmapFloorsDistribution(e);let o=[];for(let n=this.sensorHeatmapPlanesData.length-1;n>=0;n--){const e=i.find((e=>e.floorObject.floorNumber===this.sensorHeatmapPlanesData[n].floorNumber));if(e){let t=!1;for(let i=0;i<this.sensorHeatmapPlanesData[n].sensorsData.length;i++)if(e.sensorsData.find((e=>e.id===this.sensorHeatmapPlanesData[n].sensorsData[i].id))){t=!0;break}t||o.push(n)}else o.push(n)}o.forEach((e=>this.removeSensorHeatmapPlane(this.sensorHeatmapPlanesData[e],t))),i.forEach((i=>this.renderSensorFloorHeatmap(e,i,t))),this.drawedSensorHeatmapData=i}function xp(e,t,i){const o=this.sensorHeatmapPlanesData.filter((e=>e.floorNumber===t.floorObject.floorNumber&&null!==e.roomID)),n=this.sensorHeatmapPlanesData.find((e=>e.floorNumber===t.floorObject.floorNumber&&null===e.roomID)),s=!this.isFloorHidden(t.floorObject.floorNumber);if(e.isRoomLevel){n&&this.removeSensorHeatmapPlane(n,i);const a=t.roomLevelDistribution;for(let e=o.length-1;e>=0;e--)a.find((t=>t.roomID===o[e].roomID))||this.removeSensorHeatmapPlane(o[e],i);o.forEach((o=>{const n=a.find((e=>e.roomID===o.roomID));this.createSensorHeatmapPlane(e,t,this.getRoomsMappingRenderTargetData(t.floorObject,[n.roomData],o.roomID),o,i,o.roomID)})),a.forEach((n=>{o.find((e=>e.roomID===n.roomID))||this.createSensorHeatmapPlane(e,t,this.getRoomsMappingRenderTargetData(t.floorObject,[n.roomData],n.roomID),null,i,n.roomID,s,n.verticalOffset)}))}else{for(let e=o.length-1;e>=0;e--)this.removeSensorHeatmapPlane(o[e],i);this.createSensorHeatmapPlane(e,t,this.getRoomsMappingRenderTargetData(t.floorObject,t.floorObject.roomData,null),n,i,null,s,0)}console.log("Sensor heatmap planes",this.sensorHeatmapPlanesData),console.log("Render targets",this.floorplanRoomsMappingRenderTargets)}function _p(e,t){e.valueTextMeshes&&(e.valueTextMeshes.forEach((e=>{t.remove(e),hi(e)})),e.valueTextMeshes=null)}function yp(e,t,i){const o=this.createTextMesh(e.value.toString()+this.getSensorUnitOfMeasurement({object2D:e}),0,20,new L.Pq0(e.x,0,e.z),2,1);return o.rotation.set(-Math.PI/2,0,0),o.translateZ(t),i.add(o),o}function Sp(e,t,i,o,n,s,a){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;const l=this.props.mainComponentThis.getFloorStartElevation(t.floorObject.floorNumber,!0)+this.sensorHeatmapFloorOffset+r,h=e.isRoomLevel?t.roomLevelDistribution.find((e=>e.roomID===s)).sensorsData:t.sensorsData;if(o)o.planeMesh.material=this.createSensorHeatmapPlaneMaterial(i,i.renderTargetBBox,h,e),o.planeMesh.material.needsUpdate=!0,e.showSensorValue?(this.removeSensorHeatmapValueTextMeshes(o,n),o.valueTextMeshes=[],h.forEach((e=>{const t=this.createSensorHeatmapValueTextMesh(e,l,n);t.visible=o.planeMesh.visible,o.valueTextMeshes.push(t)}))):this.removeSensorHeatmapValueTextMeshes(o,n);else{const o=i.renderTargetBBox.width,r=i.renderTargetBBox.height,c=new L.eaF(new L.bdM(o,r),this.createSensorHeatmapPlaneMaterial(i,i.renderTargetBBox,h,e));c.rotateX(-Math.PI/2),c.position.set(i.renderTargetBBox.minX+o/2,l,i.renderTargetBBox.minY+r/2),c.visible=a,n.add(c);let d=null;e.showSensorValue&&(d=[],h.forEach((e=>{const t=this.createSensorHeatmapValueTextMesh(e,l,n);t.visible=a,d.push(t)}))),this.sensorHeatmapPlanesData.push({roomID:s,planeMesh:c,valueTextMeshes:d,floorNumber:t.floorObject.floorNumber,sensorsData:h})}}function vp(e,t){const i=this.sensorHeatmapPlanesData.findIndex((t=>t===e));-1!==i&&(t.remove(this.sensorHeatmapPlanesData[i].planeMesh),hi(this.sensorHeatmapPlanesData[i].planeMesh),this.removeSensorHeatmapValueTextMeshes(this.sensorHeatmapPlanesData[i],t),this.sensorHeatmapPlanesData.splice(i,1))}function Dp(e){for(let t=this.sensorHeatmapPlanesData.length-1;t>=0;t--)this.removeSensorHeatmapPlane(this.sensorHeatmapPlanesData[t],e);this.drawedSensorHeatmapData=[]}function Tp(e,t,i){let o=this.floorplanRoomsMappingRenderTargets.find((t=>t.roomID===i&&t.floorNumber===e.floorNumber));return o||(o=this.createRoomsMappingRenderTarget(e,null===i?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=dt(e.wallData);for(let o in i)i[o]=r(i[o],0)*t;return i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i}(e,this.scaleFactor):pt(t[0].coordsOutsideWithOrphans,this.scaleFactor),t,i)),o}function jp(e,t,i,o){const n=i.length,s=Math.max(...i.map((e=>e.coordsOutsideWithOrphans.length))),a=L.paN;let r;switch(a){case L.GWd:r=4;break;case L.paN:r=2;break;default:r=4}const l=new Float32Array(n*s*r),h=new Float32Array(n);for(let _=0;_<i.length;_++){h[_]=i[_].coordsOutsideWithOrphans.length;for(let e=0;e<i[_].coordsOutsideWithOrphans.length;e++)l[_*s*r+e*r]=i[_].coordsOutsideWithOrphans[e].x*this.scaleFactor,l[_*s*r+e*r+1]=i[_].coordsOutsideWithOrphans[e].y*this.scaleFactor}const c=t.width,d=t.height,p=`\n      precision highp float;\n      precision mediump int;\n      uniform sampler2D polygonTexture;\n      uniform sampler2D polygonSizes;\n      uniform int MAX_VERTICES; // Max number of vertices per polygon\n      vec2 polygonVertices[${s}];\n      uniform int NUM_POLYGONS; // Number of polygons\n      uniform float translatePosX;\n      uniform float translatePosY;\n      in vec4 v_p;\n      vec2 getVertex(int polygonIndex, int vertexIndex) {\n        int index = polygonIndex * MAX_VERTICES + vertexIndex;\n        // Sample from the texture\n        vec4 texel = texture(polygonTexture, vec2(float(index) / float(NUM_POLYGONS * MAX_VERTICES), 0.0));\n        return vec2(texel.r, texel.g); //*RG FORMAT\n      }\n      int getPolygonSize(int polygonIndex) {\n        float step = 1.0 / float(NUM_POLYGONS);\n        float halfStep = step / 2.0;\n        vec4 texel = texture(polygonSizes,vec2(float(polygonIndex) * step + halfStep, 0.0));\n        return int(texel.r);\n      }\n      bool isPointInPolygon(vec2 point, int polygonIndex) {\n        //*TRANSFORMIRAMO KOORDINATE IZ LOKALNOG SUSTAVA RAVNINE U KOORDINATNI SUSTAV SCENE ZA POTREBE PROVJERE JE LI TOCKA UNUTAR POLIGONA\n        //*KOORDINATE LOKALNOG SUSTAVA SE ODNOSE NA SREDISTE RAVNINE\n        //*X OS -> TOP LEFT TOCKA CE IMATI LOKALNU KOORDINATU -planeWidth/2 -> U KOORDINATNOM SUSTAVU SCENE TO TREBA BITI minX VRIJEDNOST \u0160TO SE POSTI\u017dE DODAVANJEM translatePosX\n        point.x += translatePosX;\n        //*Z OS(Y OS ZA POTREBE PROVJERE) -> TOP LEFT TOCKA \u0106E IMATI LOKALNU KOORDINATU planeHeight/2 -> U SUSTAVU SCENE TO TREBA BITI minY VRIJEDNOST -> ZATO ODUZIMAMO OD trsnalatePosY\n        point.y = translatePosY - point.y;\n        bool inside = false;\n        //*BUDUCI DA JE ZA SVAKI POLIGON ALOCIRAMO MAX_VERTICES TOCAKA ZA POLIGONE KOJI IMAJU MANJI BROJ CVOROVA OD MAX_VERTICES \u0106E DIJELOVI VISKA IMATI DEFAULT VRIJEDNOSTI 0 TE CE BIT TRETIRANI KAO TOCKE POLIGONA SA (0,0) KOORIDNATAMA STO JE NEISPRAVNO I DOVODI DO GRESAKA KOD RAYCASTING ISPITIVANJA\n        //*STOGA TREBA NA NEKI NACIN RAZLUCITI KOJE TOCKE PREDSTAVLJAJU TOCKE POLIGONA A KOJE PADDING\n        //*STOGA ZA SVAKI POLIGON PAMTIMO BROJ NJEGOVIH CVOROVA I ITERIRAMO KROZ PETLJU DO TOG BROJA\n        int polygonSize = getPolygonSize(polygonIndex);\n        //*UCITAJ PODATKE ZA SVE VERTEXE POLIGONA KAKO BI MINIMIZIRALI BROJ getVertex POZIVA I TEXTURE LOOKUP-A\n        for (int i = 0; i < polygonSize; i++) {\n          polygonVertices[i] = getVertex(polygonIndex, i);\n        }\n        for (int i = 0, j = polygonSize - 1; i < polygonSize; j = i++) {\n          vec2 vertexI = polygonVertices[i];\n          vec2 vertexJ = polygonVertices[j];\n          bool intersect = (vertexI.y > point.y) != (vertexJ.y > point.y) &&\n            (point.x < ((vertexJ.x - vertexI.x) * (point.y - vertexI.y)) / (vertexJ.y - vertexI.y) + vertexI.x);\n          if (intersect) {\n            inside = !inside;\n          }\n        }\n        return inside;\n      }\n      void main() {\n        vec2 pos = vec2(v_p.x, v_p.y);\n        bool isInside = false;\n        int i = 0;\n        while (i < NUM_POLYGONS) {\n          isInside = isInside || isPointInPolygon(pos, i);\n          i++;\n        }\n        gl_FragColor = isInside ? vec4(1.0, 0.0, 0.0, 0.0) : vec4(0.0, 0.0, 0.0, 0.0);\n      }\n  `,m=new L.GYF(l,l.length/r,1,a,L.RQf);m.needsUpdate=!0;const u=new L.GYF(h,n,1,L.VT0,L.RQf);u.needsUpdate=!0;const g={polygonTexture:{value:m},polygonSizes:{value:u},NUM_POLYGONS:{value:n},MAX_VERTICES:{value:s},translatePosX:{value:t.minX+c/2},translatePosY:{value:d/2+t.minY}},f=new L.BKk({uniforms:g,vertexShader:"\n    precision highp float;\n    precision mediump int;\n    out vec4 v_p;\n    void main(void) {\n      v_p = vec4( position, 1.0 );\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:p,side:L.$EB}),b=new L.eaF(new L.bdM(c,d),f),w=new L.nWS(c,d,{format:L.VT0,type:L.OUM}),C=new L.Z58;C.add(b);const x=new L.qUd(-c/2,c/2,d/2,-d/2,.1,10);return x.position.set(0,0,1),x.lookAt(new L.Pq0(0,0,0)),this.floorplan3DViewRenderer.setRenderTarget(w),this.floorplan3DViewRenderer.clear(),this.floorplan3DViewRenderer.render(C,x),this.floorplan3DViewRenderer.setRenderTarget(null),di(C),hi(x),this.floorplanRoomsMappingRenderTargets.push({floorNumber:e.floorNumber,roomID:o,renderTargetBBox:t,renderTarget:w}),this.floorplanRoomsMappingRenderTargets[this.floorplanRoomsMappingRenderTargets.length-1]}function Ip(e,t,i,o){const n=t.width,s=t.height;console.log("Sensor heatmap data",o);const a=parseFloat(o.colorData.find((e=>"critical_min_value"===e.field)).value),r=parseFloat(o.colorData.find((e=>"critical_max_value"===e.field)).value),l=Pi(o.colorData.find((e=>"critical_min_color"===e.field)).value),h=Pi(o.colorData.find((e=>"critical_max_color"===e.field)).value),c=this.calculateSensorColoringIntermediateValues(o.colorData),d=c.length,p=c.flatMap((e=>[e.hue/360,e.form[0].value])),m=new Float32Array(p),u=new L.GYF(m,d,1,L.paN,L.RQf);u.needsUpdate=!0;let g=[];i.forEach((e=>{const i=new L.Pq0(e.x,0,e.z);i.x-=t.minX,i.x-=n/2,i.z-=t.minY,i.z=s/2-i.z,g.push({pos:i,value:e.value})}));const f=g.flatMap((e=>[e.pos.x,e.pos.z,e.pos.y,e.value])),b=new Float32Array(f),w=f.length/4,C=new L.GYF(b,w,1,L.GWd,L.RQf);C.magFilter=L.hxR,C.needsUpdate=!0;const x=n/2,_=s/2,y=n,S=s,v={uDataTexture:{value:C},uDataTextureSize:{value:w},opacityTexture:{value:e.renderTarget.texture},opacityTextureWidth:{value:y},opacityTextureHeight:{value:S},opacityTextureOffsetX:{value:x},opacityTextureOffsetY:{value:_},isoLineInterval:{value:1},isoLineOpacity:{value:.1},minValue:{value:a},maxValue:{value:r},minValueHue:{value:l/360},maxValueHue:{value:h/360},hueLookupTexture:{value:u},hueLookupTextureWidth:{value:d}};return console.log("Unfiorms",v),new L.BKk({uniforms:v,vertexShader:"\n    precision highp float;\n    precision mediump int;\n    out vec4 v_p;\n    out vec2 vUv;\n    void main(void) {\n      v_p = vec4( position, 1.0 );\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:"\n    precision highp float;\n    precision mediump int;\n    uniform sampler2D uDataTexture;\n    uniform sampler2D opacityTexture;\n    uniform float opacityTextureWidth;\n    uniform float opacityTextureHeight;\n    uniform float opacityTextureOffsetX;\n    uniform float opacityTextureOffsetY;\n    uniform sampler2D hueLookupTexture;\n    uniform float hueLookupTextureWidth;\n    uniform uint uDataTextureSize;\n    uniform float minValue; // critical low value\n    uniform float maxValue; // critical high value\n    uniform float isoLineInterval; // isoline interval, > 0.0\n    uniform float isoLineOpacity; // isoline opacity, 0.0 - 1.0\n    uniform float minValueHue; // hue for critical low value, 0.0 - 1.0\n    uniform float maxValueHue; // hue for critical high value, 0.0 - 1.0\n    in vec4 v_p;\n    in vec2 vUv;\n    float getWeight(float dist) {\n      return 1.0 / pow(dist, 2.0);\n    }\n    float isoline(float val, float lg, float ref, float pas, float thickness) {\n      float v = abs(mod(val - ref + pas  *.5, pas) - pas*  .5) / lg - .1 * thickness;\n      return smoothstep(.2, .8, v);\n    }\n    float interpolateHue(float v, float hue1, float hue2, float value1, float value2) {\n      float t = (v - value1) / (value2 - value1);\n      return mix(hue1, hue2, smoothstep(0.0, 1.0, t));\n    }\n    float getHue(float v) {\n      if (v <= minValue) {\n        return minValueHue;\n      }\n      if (v >= maxValue) {\n        return maxValueHue;\n      }\n      //*PRETRAZIVANJE U INTERMEDIATE COLORS\n      if(hueLookupTextureWidth == 0.0) {\n        return minValueHue; //*minValue=maxValue I minValueHue=maxValueHue\n      }\n      vec4 firstIntermediateColorTexel = texture2D(hueLookupTexture, vec2(0.0, 0.0));\n      vec4 lastIntermediateColorTexel = texture2D(hueLookupTexture, vec2(1.0, 0.0));\n      if(v < firstIntermediateColorTexel.g) {\n      //*INTERPOLATE IZMEDU minValue/minValueHue I firstIntermediateColorTexel\n        return interpolateHue(v, minValueHue, firstIntermediateColorTexel.r, minValue, firstIntermediateColorTexel.g);\n      }\n      if(v > lastIntermediateColorTexel.g) {\n        //*INTERPOLATE IZMEDU lastIntermediateColorTexel maxValue/maxValueHue\n        return interpolateHue(v, lastIntermediateColorTexel.r, maxValueHue, lastIntermediateColorTexel.g, maxValue);\n      }\n      for (float i = 1.0; i < hueLookupTextureWidth; i++) {\n        vec4 previousTexel = texture2D(hueLookupTexture, vec2((i - 1.0) / hueLookupTextureWidth, 0.0));\n        vec4 currentTexel = texture2D(hueLookupTexture, vec2(i / hueLookupTextureWidth, 0.0));\n        if (v >= previousTexel.g && v <= currentTexel.g) {\n          return interpolateHue(v, previousTexel.r, currentTexel.r, previousTexel.g, currentTexel.g);\n        }\n      }\n    }\n    vec3 hsv2rgb(vec3 c) {\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n    vec4 getPoint(uint index) {\n      float step = 1.0 / float(uDataTextureSize);\n      float halfStep = step / 2.0;\n      vec4 texel = texture(uDataTexture, vec2(float(index) * step + halfStep, 0.5));\n      return texel;\n    }\n    float getOpacityValue(vec2 pos) {\n      //POTREBNO FLIPPAT Y OS(OpenGL)\n      vec2 uv = vec2((pos.x + opacityTextureOffsetX) / opacityTextureWidth,(1.0 - (0.0 -pos.y + opacityTextureOffsetY) / opacityTextureHeight));\n      vec4 texel = texture(opacityTexture, uv);\n      return texel.r;\n    }\n    void main() {\n      vec2 pos = vec2(v_p.x, v_p.y);\n      float value = 0.0;\n      float sum = 0.0;\n      for (uint i = 0u; i < uDataTextureSize; i++) {\n        vec4 texel = getPoint(i);\n        vec2 p = texel.xy;\n        float dist = length(pos - p);\n        float weight = getWeight(dist);\n        // accumulate value\n        value += texel.w * weight;\n        sum += weight;\n      }\n      value /= sum;\n      // output value as hue\n      float hue = getHue(value);\n      vec3 color = hsv2rgb(vec3(hue, 1.0, 1.0));\n      // generate isolines\n      if (isoLineInterval > 0.0) {\n        float lg = length(vec2(dFdx(value), dFdy(value)));\n        float k2 = isoline(value, lg, .025, isoLineInterval, .0);\n        color *= 1. - isoLineOpacity + (k2*  isoLineOpacity);\n      }\n      float isInside = getOpacityValue(pos);\n      gl_FragColor = vec4(color.rgb, isInside);\n    }\n  ",side:L.hB5,transparent:!0})}function Pp(){let e=[];const t=this.objectConnectorsArray.filter((e=>"_sensors_"===e.class));for(let i=0;i<t.length;i++){let o,n=!1;for(let e=0;e<t[i].bindedObjects.length;e++)if(o=this.getSensorMeshParameters(t[i].bindedObjects[e],t[i]),o.isSensorNumberValue){n=!0;break}n&&e.push(t[i])}return e}function Op(){const e=this.getAvailableBindedNumberSensors();let t=[];for(let i=0;i<e.length;i++){const o=this.getSensorUnitOfMeasurement(e[i].bindedObjects[0]);!t.find((e=>e.measurementUnit===o))&&t.push({measurementUnit:o})}return t}function kp(e){let t,i=[];for(let o=0;o<e.length;o++)for(let n=0;n<e[o].bindedObjects.length;n++){const s=this.getSensorMeshParameters(e[o].bindedObjects[n],e[o]);s.isSensorNumberValue&&((t=i.find((t=>t.floorObject.floorNumber===e[o].bindedObjects[n].floorNumber)))?t.sensorsData.push({id:e[o].bindedObjects[n].object2D.id,x:e[o].bindedObjects[n].object2D.x*this.scaleFactor,z:e[o].bindedObjects[n].object2D.y*this.scaleFactor,value:s.sensorOutputValue}):i.push({floorObject:this.floorplanFloors.find((t=>t.floorNumber===e[o].bindedObjects[n].floorNumber)),sensorsData:[{id:e[o].bindedObjects[n].object2D.id,x:e[o].bindedObjects[n].object2D.x*this.scaleFactor,z:e[o].bindedObjects[n].object2D.y*this.scaleFactor,value:s.sensorOutputValue}],roomLevelDistribution:[]}))}return i.forEach((e=>{let t,i,o=[];const n=this.floorplanFloors.find((t=>t.floorNumber===e.floorObject.floorNumber)).roomData;for(let s=0;s<e.sensorsData.length;s++)t=At({x:e.sensorsData[s].x/this.scaleFactor,y:e.sensorsData[s].z/this.scaleFactor},n),t&&(t=e.floorObject.roomData.find((e=>e.id===t.id)),i=o.find((e=>e.roomID===t.id)),console.log("targetSensorRaycastedRoom",t),i?i.sensorsData.push(e.sensorsData[s]):o.push({roomID:t.id,roomBBox:pt(t.coordsOutsideWithOrphans,this.scaleFactor),roomData:t,sensorsData:[e.sensorsData[s]],verticalOffset:0}));o.sort(((e,t)=>t.roomData.realRoomArea-e.roomData.realRoomArea));for(let s=1;s<o.length;s++){const e=[],t=[];for(let i=0;i<o.length;i++)i<s&&(Ai(o[s].roomData.coordsOutsideWithOrphans,o[i].roomBBox,1/this.scaleFactor)?e.push(o[i]):this.props.mainComponentThis.qSVG.polygonPolygonIntersect(Mi(o[i].roomBBox,1/this.scaleFactor),o[s].roomData.coordsOutsideWithOrphans)&&t.push(o[i]));if(e.length>0&&(o[s].verticalOffset=Math.max(...e.map((e=>e.verticalOffset)))+1),t.length>0){const e=Math.max(...t.map((e=>e.verticalOffset)))+1;e>o[s].verticalOffset&&(o[s].verticalOffset=e)}}e.roomLevelDistribution=o})),console.log("targetSensorUnitFloorDistribution",i),i}function Fp(e){return e.isUnitHeatmap?this.getSensorUnitFloorsRoomsDistribution(e):this.getSensorHeatmapFloorsRoomsDistribution(e)}function Mp(e){const t=this.objectConnectorsArray.filter((t=>"_sensors_"===t.class&&this.getSensorUnitOfMeasurement(t.bindedObjects[0])===e.heatmapName));return this.createSensorConnectorsFloorRoomsDistribution(t)}function Ap(e){let t,i=[];for(let o=0;o<e.heatmapSensorsItem.value.length;o++)t=this.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e.heatmapSensorsItem.value[o].sensorConnectorId)),t&&i.push(t);return this.createSensorConnectorsFloorRoomsDistribution(i)}function Rp(e){const t=parseFloat(e.find((e=>"critical_min_value"===e.field)).value),i=parseFloat(e.find((e=>"critical_max_value"===e.field)).value),o=Pi(e.find((e=>"critical_min_color"===e.field)).value),n=Pi(e.find((e=>"critical_max_color"===e.field)).value),s=Math.abs(ki(o,n)),a=1/s;let r=[];for(let l=1;l<s;l++){const e=Fi(o,n,l*a);r.push({hue:e,interpolationFactor:l*a,form:[{field:`range_intermediate_color_value_${l}`,value:t+l*a*(i-t),validate:e=>T.isEmpty(e)||T.isNumber(e)},{field:`range_intermediate_color_color_${l}`,value:Oi(e,1,1),validate:e=>T.isEmpty(e)||T.isHexColor(e)}]})}return r}const Lp=["sixDoorFrenchStyle","accordionFoldDoors","glassDoorsOpened","patioDoorOpened","japanesedoor","elevator","sliderPocketDoor"],Bp=(e,t)=>{if(!ii(e.type))return null;if(!e.additionalParams.mirrored)return tt[e.type];switch(e.type){case"double_door_2":case"double_door":return 1;case"double_plain_door_with_little_part":case"double_door_with_little_part":return.5;case"patioGlassDoorUnit":return 0;case"patioDoorOpened":return t?1.2:.1;default:return tt[e.type]}},Wp={window_2x1_medium_with_large_pane:.1},Np={frenchWindow85x200:{direction:"forward",factor:.2},window85x123:{direction:"forward",factor:.2},window85x163:{direction:"forward",factor:.2},doubleOutwardOpeningWindow:{direction:"backward",factor:.3},doubleWindow126x123:{direction:"forward",factor:.2},doubleWindow126x163:{direction:"forward",factor:.2},doubleFrenchWindow126x200:{direction:"forward",factor:.2},window_2x4:{direction:"forward",factor:.2},window_2x6:{direction:"forward",factor:.2},window_4x5:{direction:"forward",factor:.2},window_3x1:{direction:"forward",factor:.2},window_4x1:{direction:"forward",factor:.2},window_2x1_medium_with_large_pane:{direction:"forward",factor:.2},door_window_thick_double_2x4:{direction:"forward",factor:.2},door_window_thick_double:{direction:"forward",factor:.1},door_window_thick:{direction:"forward",factor:.1},window_double_frame_sill:{direction:"forward",factor:.1},window_2x3_arched:{direction:"forward",factor:.2},window_2x3_regular:{direction:"forward",factor:.2},window_2x3:{direction:"forward",factor:.2},window_2x4_arched:{direction:"forward",factor:.2},window_4x3_arched:{direction:"forward",factor:.2},window_4x3:{direction:"forward",factor:.2},"garage-door2":{direction:"forward",factor:.2},glassDoorsOpened:{direction:"backward",factor:.45},patioDoorOpened:{direction:"forward",factor:.46}},Vp=e=>{let t=!1;return it[e.object2D.type]&&(t=!0),t};function Ep(e,t,i){return{rotationAngleSign:t,rotationPivotPoint:Ci(e.itemObject,"horizontal",t,i,this.scaleFactor)}}function Hp(e,t,i,o){const n=e.itemObject,s=n.object2D;let a,r,l;if(o)r=Ci(n,"horizontal",t,i,this.scaleFactor),l=s.additionalParams.rotationDirection;else{a=Bt(s.limit[0],s.additionalParams.controlPointOnWall)>Bt(s.limit[1],s.additionalParams.controlPointOnWall)?s.limit[0]:s.limit[1],t="start"===s.additionalParams.rotationAxis?-1:1;let e=0;i&&(e-=t*i*n.halfSize.x);const o=f(s.angle),h=Wp[n.object2D.type]||0;r=new L.Pq0(a.x*this.scaleFactor+e*Math.cos(o),n.getItemCenterPositionY(this.scaleFactor)+h*n.halfSize.y*this.scaleFactor,a.y*this.scaleFactor+e*Math.sin(o)),n.depthDirectionOffsetTranslation(r,1,this.scaleFactor),l=s.additionalParams.rotationDirection}return{rotationAngleSign:zp(t,l),rotationPivotPoint:r}}const zp=(e,t)=>"up"===t?e:-1*e,Gp=e=>1===_i(e.object2D,"forward")?1===xi(e,"lefttoright")?1:-1:1===xi(e,"lefttoright")?-1:1;function qp(e,t){const i=e.itemObject;if(Np[i.object2D.type]){const o=Np[i.object2D.type].factor*e.itemObject.halfSize.z*2,n=new L.Pq0;e.getWorldScale(n);const s=o/Math.abs(n.z),a=pi(e)===this.floorplan3DOnMapScene&&e.itemObject.sceneTransformedCalled,r=t.clone();a&&this.inverseProcessSceneVec3(r);const l=r.clone();e.worldToLocal(l),l.z+=_i(i.object2D,Np[i.object2D.type].direction)*s;const h=l.clone();e.localToWorld(h);const c=h.clone();return a&&this.processSceneVec3(c),c}return t}function Up(e,t){const i=t.clone();return pi(e)===this.floorplan3DOnMapScene&&e.itemObject.sceneTransformedCalled&&this.inverseProcessSceneVec3(i),i}function Yp(e){let t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.props.mainComponentThis.isFloorplanItemClassMember(e.object2D.type,"door")?(t="reverse"===e.object2D.hinge?1:-1,i=Ep.call(this,e,t,Bp(e.object2D,s),this)):(i=Hp.call(this,e,null,Bp(e.object2D,s),null,this),t=i.rotationAngleSign);const a=qp.call(this,e,i.rotationPivotPoint);let r,l="open"===e.status?-t*o:t*o,h=[];st[e.object2D.type]&&0!==st[e.object2D.type].length?(r=this.rotateChildAroundWorldPoint,st[e.object2D.type].forEach((t=>h.push(e.getObjectByName(t)))),l*=Gp(e)):(r=this.rotateAroundPoint,h.push(e));let c=0;nm.call(this,e,e.status,(t=>{const i=0*(1-t)+t*l;h.forEach((t=>r(t,Up.call(this,e,a),new L.Pq0(0,1,0),i-c,!0))),c=i}),n)}function Xp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI/2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;const n=e.status,s=new Array("part1","part2").map((o=>{let n="part1"===o?1:-1;const s=be.includes(e.object2D.type)?-1:1;return Math.sign(e.scale.x)!==s&&(n*=-1),{rotationAngleRad:"part1"===o?t:i,movableParts:st[e.object2D.type][o].map((t=>e.getObjectByName(t))),rotationParameters:this.props.mainComponentThis.isFloorplanItemClassMember(e.object2D.type,"door")?Ep.call(this,e,n,ot[e.object2D.type][o],this):Hp.call(this,e,n,ot[e.object2D.type][o],{part:o},this)}}));s.forEach(((t,i)=>{const a=qp.call(this,e,t.rotationParameters.rotationPivotPoint);let r="open"===e.status?-t.rotationParameters.rotationAngleSign*t.rotationAngleRad:t.rotationParameters.rotationAngleSign*t.rotationAngleRad;r*=Gp(e);let l=0;nm.call(this,e,n,(i=>{const o=0*(1-i)+i*r;t.movableParts.forEach((t=>this.rotateChildAroundWorldPoint(t,Up.call(this,e,a),new L.Pq0(0,1,0),o-l))),l=o}),o,i===s.length-1)}))}function Kp(e){const t=e.itemObject.getItemCenter();let i,o=[];if(st[e.object2D.type]&&0!==st[e.object2D.type].length?(i=this.rotateChildAroundWorldPoint,st[e.object2D.type].forEach((t=>o.push(e.getObjectByName(t))))):(i=this.rotateAroundPoint,o.push(e)),Object.hasOwn(e,"currentRotationAngle")||(e.currentRotationAngle=0),"closed"===e.status){const n=e.currentRotationAngle-0<2*Math.PI-e.currentRotationAngle?0:2*Math.PI;o.forEach((o=>i(o,Up.call(this,e,t),new L.Pq0(0,1,0),n-e.currentRotationAngle,!0))),e.currentRotationAngle=0}else{const n=0,s=2*Math.PI,a=()=>nm.call(this,e,e.status,(r=>{if("open"!==e.status)return!0;{const l=(1-r)*n+r*s;o.forEach((o=>i(o,Up.call(this,e,t),new L.Pq0(0,1,0),l-e.currentRotationAngle,!0))),e.currentRotationAngle=l,1===r&&a()}}),8e3);a()}}function Zp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=nt[e.object2D.type][t];let o;"horizontal"===i.direction?(o=xi(e,i.horizontalOpeningDirection),e.object2D.additionalParams.mirrored&&(o*=-1)):o="bottomtotop"===i.verticalOpeningDirection?1:-1,"closed"===e.status&&(o*=-1);const n=Array.isArray(st[e.object2D.type])?st[e.object2D.type].map((t=>e.getObjectByName(t))):[];let s=[],a=[];return i.translateOnly?a=n:(s=i.doorPartChildName.map((t=>e.getObjectByName(t))),a=n.filter((e=>!i.doorPartChildName.includes(e.name)))),{directionSign:o,translateAndScaleParts:s,translateOnlyParts:a}}const $p=(e,t,i,o)=>{const n="horizontal"===t?new L.Pq0(i,0,0):new L.Pq0(0,i,0);if("horizontal"===t){const t=(new L.O9p).setFromQuaternion(e.quaternion,"YXZ");n.applyAxisAngle(new L.Pq0(0,1,0),-t.y)}e.translateOnAxis(n,o)},Jp=(e,t,i,o,n,s,a)=>{const r=n.startSizeValue+n.sizeChangeSign*i;let l=new L.Pq0(1,1,1);"horizontal"===s?l.x=r/n.originalSizeVectorLocal.x:l.y=r/n.originalSizeVectorLocal.y;const h=e.itemObject.getMeshCenter(t);e.worldToLocal(h),t.scale.set(l.x,l.y,l.z);const c=e.itemObject.getMeshCenter(t);e.worldToLocal(c),t.translateOnAxis("horizontal"===s?new L.Pq0(Math.sign(h.x-c.x),0,0):new L.Pq0(0,Math.sign(h.y-c.y),0),"horizontal"===s?Math.abs(h.x-c.x):Math.abs(h.y-c.y)),$p(t,s,a,(i-o)/2)},Qp=2e3;function em(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp;const i=e.itemObject,o=e.status,n=nt[e.object2D.type];n.forEach(((s,a)=>{const r=Zp.call(this,e,a);if(s.translateOnly)if(1===s.doorPartChildName.length){const l=i.doorWindowOpeningsParameters.find((e=>e.childName===s.doorPartChildName[0])).originToDestinationDistanceLocal;let h=0;nm.call(this,e,o,(e=>{const t=e*l;r.translateOnlyParts.forEach((e=>$p(e,s.direction,r.directionSign,t-h))),h=t}),t,a===n.length-1)}else{const l=s.doorPartChildName.map((t=>({partMesh:e.getObjectByName(t),translationDistanceLocal:i.doorWindowOpeningsParameters.find((e=>e.childName===t)).originToDestinationDistanceLocal,previousTranslationOffset:0})));nm.call(this,e,o,(e=>{l.forEach((t=>{const i=e*t.translationDistanceLocal;i-t.previousTranslationOffset>0&&$p(t.partMesh,s.direction,r.directionSign,i-t.previousTranslationOffset),t.previousTranslationOffset=i}))}),t,a===n.length-1)}else{const l=Math.max(...i.doorWindowOpeningsParameters.map((e=>e.originToDestinationDistanceLocal))),h=i.doorWindowOpeningsParameters.map((t=>{let i,o;return"open"===e.status?(i=t.closedSizeLocal,o=Math.sign(t.openSizeLocal-t.closedSizeLocal)):(i=t.openSizeLocal,o=Math.sign(t.closedSizeLocal-t.openSizeLocal)),{partName:t.childName,startSizeValue:i,sizeChangeSign:o,distanceLocal:t.originToDestinationDistanceLocal,originalSizeVectorLocal:t.doorPartOriginalSizeVectorLocal,previousTranslationOffset:0}}));let c=0;nm.call(this,e,o,(t=>{const i=t*l;r.translateOnlyParts.forEach((e=>$p(e,s.direction,r.directionSign,i-c))),r.translateAndScaleParts.forEach((i=>{const o=h.find((e=>e.partName===i.name)),n=t*o.distanceLocal;Jp(e,i,n,o.previousTranslationOffset,o,s.direction,r.directionSign),o.previousTranslationOffset=n})),c=i}),t,a===n.length-1)}}))}function tm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp;const i=e.itemObject,o=e.status,n=nt[e.object2D.type];n.forEach(((s,a)=>{const r=Zp.call(this,e,a),{translateAndScaleParts:l,translateOnlyParts:h}=r,c=t/l.length;let d=[];for(let t=0;t<i.doorWindowOpeningsParameters.length;t++){let o,n,s=i.doorWindowOpeningsParameters[t].originToDestinationDistanceLocal;if(t>0)for(let e=0;e<t;e++)s-=d[e].distanceLocal;"open"===e.status?(o=i.doorWindowOpeningsParameters[t].closedSizeLocal,n=-1):(o=i.doorWindowOpeningsParameters[t].closedSizeLocal-s,n=1),d.push({partName:i.doorWindowOpeningsParameters[t].childName,startSizeValue:o,sizeChangeSign:n,distanceLocal:s,originalSizeVectorLocal:i.doorWindowOpeningsParameters[t].doorPartOriginalSizeVectorLocal})}let p=0,m=0,u=d[0].distanceLocal;const g=t=>{const i=t*u;l.forEach(((t,o)=>{o===p?Jp(e,t,i,m,d.find((e=>e.partName===t.name)),s.direction,r.directionSign):o>p&&$p(t,s.direction,r.directionSign,i-m)})),h.forEach((e=>$p(e,s.direction,r.directionSign,i-m))),m=i,1===t&&p<l.length-1&&(p++,m=0,u=d[p].distanceLocal,nm.call(this,e,o,g,c,a===n.length-1&&p===l.length-1))};nm.call(this,e,o,g,c,!1)}))}function im(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp;const i=e.itemObject,o=e.status,n=nt[e.object2D.type];n.forEach(((s,a)=>{const r=Zp.call(this,e,a),l=st[e.object2D.type][s.horizontalOpeningDirection].slideAndRotate.map((t=>e.getObjectByName(t))),h=[...l,...st[e.object2D.type][s.horizontalOpeningDirection].slideOnly.map((t=>e.getObjectByName(t)))];let c=st[e.object2D.type][s.horizontalOpeningDirection].rotationAngleRad;i.object2D.additionalParams.mirrored&&(c*=-1),"closed"===e.status&&(c*=-1),"lefttoright"!==s.horizontalOpeningDirection&&(c*=-1),c*=Gp(e);const d=i.doorWindowOpeningsParameters.find((e=>e.childName===s.doorPartChildName[0])),p=d.originToDestinationDistanceLocal,m=d.originPointLocal.clone();m.x+="closed"===e.status?0:p*r.directionSign*-1;let u=0,g=0;nm.call(this,e,o,(t=>{const i=t*p,o=0*(1-t)+t*c,n=m.clone();n.x+=r.directionSign*u;const a=n.clone();e.localToWorld(a),l.forEach((e=>{this.rotateChildAroundWorldPoint(e,a,new L.Pq0(0,1,0),o-g)})),h.forEach((e=>$p(e,s.direction,r.directionSign,i-u))),u=i,g=o}),t,a===n.length-1)}))}function om(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qp;const i=e.itemObject,o=i.doorWindowOpeningsParameters[0],n=st[e.object2D.type],s=n.movableDoors.parts.map((t=>e.getObjectByName(t))),a=n.cornerRotationDoors.parts.map((t=>e.getObjectByName(t)));let r=-n.movableDoors.rotationAngleRad,l=n.cornerRotationDoors.rotationAngleRad;i.object2D.additionalParams.mirrored&&(r*=-1,l*=-1),"closed"===e.status&&(r*=-1,l*=-1);const h=Gp(e);r*=h,l*=h;let c,d,p=0,m=0;"closed"===e.status?(c=o.movableDoors.clone(),d=0):(d=-l,c=Ri(o.cornerRotationDoors,o.movableDoors,d)),nm.call(this,e,e.status,(t=>{const i=0*(1-t)+t*l,n=o.cornerRotationDoors.clone();e.localToWorld(n),a.forEach((e=>this.rotateChildAroundWorldPoint(e,n,new L.Pq0(0,1,0),i-m)));const h=0*(1-t)+t*r,u=Ri(o.cornerRotationDoors,o.movableDoors,d+i),g=u.clone();e.localToWorld(g);const f=(new L.Pq0).subVectors(u,c);s.forEach((e=>{e.position.add(f),this.rotateChildAroundWorldPoint(e,g,new L.Pq0(0,1,0),h-p)})),c=u,p=h,m=i}),t)}function nm(e,t,i,o){let n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const s=!it[e.object2D.type],a=pi(e);if(0===o)i(1),s&&this.updateShadowMap(a);else{let r=null;e.isAnimationInProgress=!0;const l=()=>{e.isAnimationInProgress=!1,n&&!Vp(e)&&e.status!==t&&this.updateDoorWindowMeshState(e)},h=e=>{r||(r=e);const t=e-r,n=Math.min(t/o,1);i(n)?l():t<o?requestAnimationFrame(h):l(),s&&this.updateShadowMap(a)};requestAnimationFrame(h)}}function sm(e){if(et.includes(e.object2D.type))return;let t;var i;null!==Bp(e.object2D)?t=Yp:oi(e.object2D.type)?t=Xp:it[e.object2D.type]?t=Kp:null!==(i=e.object2D,Object.hasOwn(nt,i.type)&&"garageDoor"!==i.type&&"sixDoorFrenchStyle"!==i.type&&"accordionFoldDoors"!==i.type?nt[i.type]:null)?t=em:"garageDoor"===e.object2D.type?t=tm:"sixDoorFrenchStyle"===e.object2D.type?t=im:"accordionFoldDoors"===e.object2D.type&&(t=om),t||(t=Yp);!Vp(e)&&e.isAnimationInProgress||t.call(this,e)}function am(e){if(Lp.includes(e.objectType))switch(e.objectType){case"patioDoorOpened":Yp.call(this,e.mesh,f(e.object2D.additionalParams.mirrored?50:-50),0,!0);break;case"glassDoorsOpened":Xp.call(this,e.mesh,f(125),f(128),0);break;case"sliderPocketDoor":case"elevator":case"japanesedoor":em.call(this,e.mesh,0);break;case"sixDoorFrenchStyle":im.call(this,e.mesh,0);break;case"accordionFoldDoors":om.call(this,e.mesh,0)}}class rm extends o.Component{constructor(){super(),this.setObjectConnectorClassPanelItems=e=>{this.panelItems=this.panelItems.filter((t=>t.connectorClass!==e.connectorClass));let t="floorplanViewArray",i=this.props.floorplan3DThis.floorplanViewWalls3D;this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&(t="currentViewArray",i=this.props.floorplan3DThis.currentWalls3D);const o=(e.isFixed?[...i.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((t=>e.isBindingObjectType(t.object2D.type))),...e.connectorPanel3DOptions.flatMap((i=>{let o=i[t];return e.bindingObjectsModels?o.filter((t=>e.isBindingObjectType(t.object2D.type))):o}))]:e.connectorPanel3DOptions.flatMap((e=>e[t]))).filter((e=>this.props.floorplan3DThis.isFloorplanItemMeshBinded(e.mesh)));if(console.log("targetBindedObjects",o),e.isFixed)for(let n=0;n<o.length;n++){this.panelItems.push({connectorClass:e.connectorClass,object3D:o[n].mesh,object2D:o[n].mesh.object2D,isFixed:!0,...this.props.floorplan3DThis.getPanelItemProperties(o[n].mesh,!0)});let t=this.props.floorplan3DThis.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===o[n].mesh[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t?!t.bindedObjects.find((e=>e.object2D.id===o[n].mesh.object2D.id))&&t.addBindedObject(o[n].mesh):this.props.floorplan3DThis.objectConnectorsArray.push(new cd(this.props.floorplan3DThis,[o[n].mesh],this.props.floorplan3DThis.getObjectConnectorParamsData(o[n].mesh[this.props.mainComponentThis.connectorIDbinderIDPropertyName],o[n].mesh.object2D)))}else for(let n=0;n<o.length;n++)this.panelItems.push({connectorClass:e.connectorClass,object3D:o[n].mesh,object2D:o[n].mesh.object2D,isFixed:!1,...this.props.floorplan3DThis.getPanelItemProperties(o[n].mesh,!1)});this.forceUpdate()},this.updateFixedBindedObjects=(e,t)=>{const i=this.props.floorplan3DThis.getObjectConnectorParamsDataIDValue(t);this.panelItems.filter((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===i)).forEach((e=>e.value=this.props.floorplan3DThis.getObjectPanelItemValue(e.object3D,!0,t)));let o=[{targetObjects:this.props.floorplan3DThis.floorplan3DViewScene.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,i)}];this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.floorplan3DOnMapScene&&o.push({targetObjects:this.props.floorplan3DThis.floorplan3DOnMapScene.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,i)});for(let n=0;n<e.length;n++)o.forEach((i=>{const o=i.targetObjects.find((t=>t.object2D.id===e[n].object2D.id));o&&o.changeStateMethod(o,t)}));this.forceUpdate()},this.updateUnfixedBindedObjects=e=>{const t=this.props.floorplan3DThis.getObjectConnectorParamsDataIDValue(e);this.panelItems.filter((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t)).forEach((t=>{t.value=this.props.floorplan3DThis.getObjectPanelItemValue(t.object3D,!1,e,t.isNumberValue),this.forceUpdate()}))},this.panelItems=[],this.setObjectConnectorClassPanelItems=this.setObjectConnectorClassPanelItems.bind(this),this.updateFixedBindedObjects=this.updateFixedBindedObjects.bind(this),this.updateUnfixedBindedObjects=this.updateUnfixedBindedObjects.bind(this)}render(){let e=[],t=[];this.panelItems.filter((e=>e.isFixed)).forEach((i=>{if("_cover_"===i.connectorClass)e.push(i);else{let e=t.find((e=>e.connectorClass===i.connectorClass));e?e.panelItems.push(i):t.push({connectorClass:i.connectorClass,panelItems:[i]})}}));this.panelItems.filter((e=>"_sensors_"===e.connectorClass)),this.panelItems.filter((e=>"_others_"===e.connectorClass)),this.panelItems.filter((e=>"_presence_area_"===e.connectorClass));return null}}const lm=rm;class hm extends o.Component{render(){return(0,a.jsx)("svg",{viewBox:"0 0 512 512",children:(0,a.jsx)("g",{children:(0,a.jsx)("g",{children:(0,a.jsx)("path",{d:"M497.972,113.851l-92.47-92.47c-9.06-9.061-21.107-14.051-33.921-14.051c-12.813,0-24.861,4.99-33.922,14.051\r l-276.1,276.099l21.069,21.069l-25.993,25.993c-6.052,6.051-9.385,14.099-9.385,22.658c0,8.558,3.333,16.605,9.385,22.657\r l1.198,1.198L0,448.885l85.151,55.786l43.149-43.15l1.197,1.198c6.052,6.052,14.098,9.385,22.657,9.385\r c8.559,0,16.605-3.333,22.657-9.385l25.993-25.992l21.068,21.068l276.101-276.099\r C516.676,162.989,516.676,132.554,497.972,113.851z M81.139,465.757l-33.283-21.804l31.439-31.439l27.545,27.545L81.139,465.757z\r M153.351,441.255c-0.658,0.658-1.734,0.658-2.392,0l-1.197-1.198l-70.468-70.467l-1.198-1.198\r c-0.329-0.329-0.495-0.731-0.495-1.196c0-0.465,0.167-0.867,0.495-1.197l25.992-25.992l75.253,75.254L153.351,441.255z\r M221.873,414.87L104.482,297.479l36.67-36.67l117.391,117.391L221.873,414.87z M476.511,160.233L280.005,356.738L162.614,239.347\r L359.12,42.843c3.329-3.329,7.754-5.162,12.46-5.162s9.131,1.833,12.459,5.161l92.47,92.47\r C483.381,142.183,483.381,153.362,476.511,160.233z"})})})})}}const cm=hm;class dm extends o.Component{render(){return(0,a.jsx)("svg",{viewBox:"0 0 512 512",children:(0,a.jsx)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,a.jsx)("path",{d:"M0 2560 l0 -2560 2560 0 2560 0 0 2560 0 2560 -2560 0 -2560 0 0\r\n-2560z m960 1930 l0 -330 -330 0 -330 0 0 330 0 330 330 0 330 0 0 -330z m970\r\n0 l0 -330 -335 0 -335 0 0 330 0 330 335 0 335 0 0 -330z m960 0 l0 -330 -330\r\n0 -330 0 0 330 0 330 330 0 330 0 0 -330z m970 205 c0 -111 -2 -126 -17 -132\r\n-172 -58 -329 -206 -379 -355 l-16 -48 -129 0 -129 0 0 330 0 330 335 0 335 0\r\n0 -125z m960 -205 l0 -330 -130 0 c-103 0 -130 3 -130 14 0 7 -16 46 -36 86\r\n-54 107 -155 209 -256 260 -44 22 -87 40 -94 40 -11 0 -14 26 -14 130 l0 130\r\n330 0 330 0 0 -330z m-700 -231 c182 -82 219 -334 68 -463 -146 -125 -378 -64\r\n-445 117 -17 46 -16 136 3 189 21 62 74 121 136 152 67 34 170 36 238 5z\r\nm-3160 -526 l0 -128 -91 -43 c-119 -56 -217 -151 -272 -263 -20 -41 -37 -83\r\n-37 -92 0 -15 -15 -17 -130 -17 l-130 0 0 335 0 335 330 0 330 0 0 -127z m968\r\n-210 l2 -333 -130 0 c-104 0 -130 3 -130 14 0 7 -18 50 -40 94 -66 131 -181\r\n236 -312 284 l-58 21 0 122 c0 67 3 125 7 128 4 4 153 6 332 5 l326 -3 3 -332z\r\nm962 2 l0 -335 -330 0 -330 0 0 335 0 335 330 0 330 0 0 -335z m566 298 c42\r\n-103 74 -153 144 -223 70 -70 120 -102 223 -144 l37 -15 0 -125 0 -126 -335 0\r\n-335 0 0 328 c0 181 3 332 7 335 3 4 60 7 125 7 l119 0 15 -37z m1364 -298 l0\r\n-335 -330 0 -330 0 0 129 0 129 49 17 c149 49 295 205 354 378 6 15 21 17 132\r\n17 l125 0 0 -335z m-3584 -233 c58 -30 103 -78 132 -141 21 -45 24 -64 20\r\n-126 -10 -155 -124 -261 -278 -259 -77 2 -125 20 -182 72 -59 53 -88 121 -88\r\n205 0 128 64 217 189 264 51 19 156 11 207 -15z m-676 -415 c0 -27 69 -155\r\n113 -209 51 -61 154 -135 232 -166 l50 -20 3 -126 3 -126 -331 0 -330 0 0 330\r\n0 330 130 0 c99 0 130 -3 130 -13z m1370 -317 l0 -330 -335 0 -336 0 3 126 3\r\n126 51 18 c143 50 288 195 340 341 l18 49 128 0 128 0 0 -330z m960 0 l0 -330\r\n-330 0 -330 0 0 330 0 330 330 0 330 0 0 -330z m970 0 l0 -330 -335 0 -335 0\r\n0 330 0 330 335 0 335 0 0 -330z m960 0 l0 -330 -330 0 -330 0 0 330 0 330\r\n330 0 330 0 0 -330z m-3860 -965 l0 -335 -330 0 -330 0 0 335 0 335 330 0 330\r\n0 0 -335z m970 0 l0 -335 -332 2 -333 3 -3 320 c-1 176 0 325 3 332 3 10 78\r\n13 335 13 l330 0 0 -335z m960 206 l0 -129 -49 -17 c-119 -39 -258 -165 -316\r\n-287 -18 -37 -35 -76 -38 -88 -5 -19 -13 -20 -131 -20 l-126 0 0 335 0 335\r\n330 0 330 0 0 -129z m965 -206 l0 -330 -127 -3 -126 -3 -17 50 c-40 120 -168\r\n261 -296 325 -39 20 -78 36 -85 36 -11 0 -14 27 -14 130 l0 130 333 -2 332 -3\r\n0 -330z m965 0 l0 -335 -330 0 -330 0 0 335 0 335 330 0 330 0 0 -335z m-1665\r\n-229 c60 -27 107 -72 138 -130 17 -32 22 -58 22 -121 0 -70 -4 -87 -29 -133\r\n-53 -96 -132 -141 -246 -141 -81 -1 -150 29 -202 87 -53 59 -71 105 -71 187\r\n-1 99 35 166 125 234 61 46 185 54 263 17z m-2195 -736 l0 -330 -330 0 -330 0\r\n0 330 0 330 330 0 330 0 0 -330z m970 0 l0 -330 -335 0 -335 0 0 330 0 330\r\n335 0 335 0 0 -330z m569 284 c18 -61 100 -183 154 -229 57 -49 143 -100 195\r\n-117 l42 -13 0 -127 0 -128 -330 0 -330 0 0 330 0 330 128 0 128 0 13 -46z\r\nm1351 -284 l0 -330 -330 0 -331 0 3 126 3 125 57 23 c134 55 259 176 320 313\r\nl33 73 123 0 122 0 0 -330z m970 0 l0 -330 -330 0 -330 0 0 330 0 330 330 0\r\n330 0 0 -330z"})})})}}const pm=dm;class mm extends o.Component{render(){return(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",color:"currentColor",children:[(0,a.jsx)("circle",{cx:"9",cy:"6",r:"2"}),(0,a.jsx)("path",{d:"M4 6H7"}),(0,a.jsx)("path",{d:"M11 6H20"}),(0,a.jsx)("circle",{cx:"9",cy:"18",r:"2"}),(0,a.jsx)("path",{d:"M4 18H7"}),(0,a.jsx)("path",{d:"M11 18H20"}),(0,a.jsx)("circle",{cx:"15",cy:"12",r:"2"}),(0,a.jsx)("path",{d:"M4 12H13"}),(0,a.jsx)("path",{d:"M17 12L20 12"})]})}}const um=mm;class gm extends o.Component{render(){return(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",color:"currentColor",children:[(0,a.jsx)("circle",{cx:"9",cy:"6",r:"2"}),(0,a.jsx)("path",{d:"M4 6H7"}),(0,a.jsx)("path",{d:"M11 6H20"}),(0,a.jsx)("circle",{cx:"9",cy:"18",r:"2"}),(0,a.jsx)("path",{d:"M4 18H7"}),(0,a.jsx)("path",{d:"M11 18H20"}),(0,a.jsx)("circle",{cx:"15",cy:"12",r:"2"}),(0,a.jsx)("path",{d:"M4 12H13"}),(0,a.jsx)("path",{d:"M17 12L20 12"}),(0,a.jsx)("line",{x1:"4",y1:"20",x2:"19",y2:"3",stroke:"currentColor",strokeWidth:"2"})]})}}const fm=gm;class bm extends o.Component{constructor(e){super(),this.onModeChangeClick=(e,t)=>()=>{e.value!==this.state.selectedMode&&(this.state.selectedMode===this.props.floorplan3DThis.editModeValue&&this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null),this.props.floorplan3DThis.selectedUserMode=e.value,this.setState({selectedMode:e.value},(()=>{this.modeSelectorRef.current.style.left=1===t?"50%":`${this.modeControlContainerPaddingLeftRight}px`,this.props.floorplan3DThis.alertRef.current.showAlert(`Switched to ${e.label} Mode.`,"success")})))},this.state={selectedMode:e.floorplan3DThis.defaultUserMode},this.modeControlContainerPaddingLeftRight=2,this.modeOptionInfoExplanationBox=o.createRef(),this.modeSelectorRef=o.createRef(),this.onModeChangeClick=this.onModeChangeClick.bind(this)}render(){return(0,a.jsxs)("div",{className:"mode-control-container",children:[Ni.map(((e,t)=>(0,a.jsxs)("div",{title:e.title,className:"mode-option "+(this.state.selectedMode===e.value?"active":""),onClick:this.onModeChangeClick(e,t),children:[(0,a.jsx)("div",{className:"label",children:(0,a.jsx)("span",{children:e.label})}),(0,a.jsx)(Eo,{infoText:e.infoText,infoContainerStyles:{marginLeft:2},indoorPanelExplanationBox:this.modeOptionInfoExplanationBox})]},e.label))),(0,a.jsx)("div",{ref:this.modeSelectorRef,className:"mode-selector"}),(0,a.jsx)("div",{ref:this.modeOptionInfoExplanationBox,className:"mode-option-info-explanation-box"})]})}}const wm=bm;class Cm extends o.Component{constructor(){var e;super(),e=this,this.setCheckedStatus=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.setState({checked:t},(()=>!!i&&i()))},this.getCheckedStatus=()=>this.state.checked,this.setDisabledStatus=e=>this.setState({disabled:e}),this.handleBindedObjectsHiglightChange=()=>{this.setState({checked:!this.state.checked},(()=>this.props.onChangeCallback()))},this.state={checked:!1,disabled:!1},this.setCheckedStatus=this.setCheckedStatus.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this),this.setDisabledStatus=this.setDisabledStatus.bind(this),this.handleBindedObjectsHiglightChange=this.handleBindedObjectsHiglightChange.bind(this)}render(){return(0,a.jsx)("button",{title:"Highlight binded objects",className:`btn btn-default panel-icon-button-container ${this.state.disabled?"disabled":""} ${this.state.checked?"active":""}`,onClick:()=>!this.state.disabled&&this.handleBindedObjectsHiglightChange(),children:(0,a.jsx)(cm,{})})}}const xm=Cm;var _m=i(4614);class ym extends o.Component{constructor(){super(),this.handleHighlightClickableChange=()=>{this.state.higlightEnabled||this.setState({higlightEnabled:!0},(()=>{this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.setDisabledStatus(!0);const e=this.props.floorplan3DThis.getActiveScenes().map((e=>({scene:e,floorplanClickableMeshes:e.getObjectsByProperty("isFloorplanItem",!0).filter((e=>this.props.floorplan3DThis.isFloorplanItemClickable(e)))})));e.forEach((e=>e.floorplanClickableMeshes.forEach((e=>e.itemObject.setHighlightColor&&e.itemObject.highlightClickableColor())))),setTimeout((()=>{e.forEach((e=>e.floorplanClickableMeshes.forEach((e=>e.itemObject.resetHighlightColor&&e.itemObject.resetHighlightColor())))),this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.setDisabledStatus(!1),this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.highlightBindedObjects(),this.setState({higlightEnabled:!1})}),this.highlightIntervalMs)}))},this.handleShowOnlyClickableChange=()=>{this.props.floorplan3DThis.getActiveScenes().forEach((e=>{e.getObjectsByProperty("isFloorplanItem",!0).forEach((e=>{this.props.floorplan3DThis.isFloorplanItemClickable(e)||(e.visible=this.state.showOnlyClickable)}))})),this.setState({showOnlyClickable:!this.state.showOnlyClickable})},this.isShowOnlyClickableObjectsActive=()=>this.state.showOnlyClickable,this.state={higlightEnabled:!1,showOnlyClickable:!1},this.highlightIntervalMs=3e3,this.handleHighlightClickableChange=this.handleHighlightClickableChange.bind(this),this.handleShowOnlyClickableChange=this.handleShowOnlyClickableChange.bind(this),this.isShowOnlyClickableObjectsActive=this.isShowOnlyClickableObjectsActive.bind(this)}render(){return(0,a.jsxs)("div",{className:"clickable-objects-scene-control-container",children:[(0,a.jsx)("button",{title:"Clickable objects",className:"btn btn-default panel-icon-button-container "+(this.state.higlightEnabled?"active":""),children:(0,a.jsx)(_m.A,{})}),(0,a.jsxs)("div",{className:"clickable-objects-dropdown toggle-on-hover",children:[(0,a.jsx)("div",{className:"dropdown-button-container",children:(0,a.jsx)("button",{className:"btn btn-default",onClick:this.handleHighlightClickableChange,children:"Highlight"})}),(0,a.jsx)("div",{className:"dropdown-button-container",children:(0,a.jsx)("button",{className:"btn btn-default "+(this.state.showOnlyClickable?"active-button":""),onClick:this.handleShowOnlyClickableChange,children:"Show only"})})]})]})}}const Sm=ym;class vm extends o.Component{constructor(){super(),this.setIsMapActiveState=e=>{this.setState({isMapActive:e})},this.setIsFloorplanViewModeActive=e=>this.setState({isFloorplanViewModeActive:e}),this.setCurrentControlsType=e=>{this.props.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.setDisableStatus("orbit"!==e),this.setState({currentControlsType:e})},this.state={isMapActive:!1,currentControlsType:"orbit",isFloorplanViewModeActive:!1},this.setIsMapActiveState=this.setIsMapActiveState.bind(this),this.setIsFloorplanViewModeActive=this.setIsFloorplanViewModeActive.bind(this),this.setCurrentControlsType=this.setCurrentControlsType.bind(this)}render(){const{currentControlsType:e,isMapActive:t,isFloorplanViewModeActive:i}=this.state,n=t||i,s=!t&&"orbit"!==e||i;return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("button",{title:"orbit"===e?"First person view":"Dollhouse view",className:"btn btn-default panel-icon-button-container "+(n?"disabled":""),onClick:()=>!n&&this.props.floorplan3DThis.onSwitchControlsClick(),children:"orbit"===e?(0,a.jsx)(hs,{}):(0,a.jsx)(_s,{})}),(0,a.jsx)("button",{title:"View floorplan",className:"btn btn-default panel-icon-button-container "+(s?"disabled":""),onClick:()=>!s&&this.props.floorplan3DThis.onBirdPerspectiveViewButtonClick(),children:(0,a.jsx)(rs,{})}),(0,a.jsx)("button",{title:"Reset view",className:"btn btn-default panel-icon-button-container",onClick:()=>this.props.floorplan3DThis.onResetCameraViewButtonClick(),children:(0,a.jsx)(Rs,{})})]})}}const Dm=vm;class Tm extends o.Component{constructor(){super(),this.onRoomButtonClick=e=>()=>{const t=pt(e.coordsInsideWithOrphans,this.props.floorplan3DThis.scaleFactor),i=new L.I9Y(e.visualCenterCoords.x,e.visualCenterCoords.y).multiplyScalar(this.props.floorplan3DThis.scaleFactor);if(this.props.floorplan3DThis.currentControls===this.props.floorplan3DThis.firstPersonControls||this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus())if(this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()){const e=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0,i=((e,t,i,o,n,s,a,r)=>{const l=(i-e)/a,h=(o-t)/a;let c;if(0===l&&0===h)return[s,n];if(0===l)c=h<0?0:180;else if(0===h)c=l>0?90:-90;else{const e=180*Math.atan(Math.abs(h)/Math.abs(l))/Math.PI;c=l>0?h<0?90-e:90+e:h<0?-90+e:-90-e}console.log("positionBearingDeg "+c);const d=Math.sqrt(Math.pow(l,2)+Math.pow(h,2));return(0,O.A)(F()([s,n]),d/1e3,jt(r+c)).geometry.coordinates})(this.props.floorplan3DThis.floorplanWallsBoundingBox2DCoordinates.minX,this.props.floorplan3DThis.floorplanWallsBoundingBox2DCoordinates.minY,t.minX/this.props.floorplan3DThis.scaleFactor,t.minY/this.props.floorplan3DThis.scaleFactor,this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.meter,e);Ot(this.props.floorplan3DThis._map,Pt(i[1],i[0],(t.maxX-t.minX)/(this.props.floorplan3DThis.scaleFactor*this.props.mainComponentThis.meter),(t.maxY-t.minY)/(this.props.floorplan3DThis.scaleFactor*this.props.mainComponentThis.meter),e),e,20)}else this.props.floorplan3DThis.setFirstPersonControlsCameraPosition(i,fi(this.props.floorplan3DThis.firstPersonControlsCamera));else if(this.props.floorplan3DThis.currentControls===this.props.floorplan3DThis.orbitControls){const e=this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D(),o=fi(this.props.floorplan3DThis.orbitControlsCamera);this.props.floorplan3DThis.centerBBoxOrbitControlsCamera(t,e.floorHeight*this.props.floorplan3DThis.scaleFactor,i);const n=this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0);this.props.floorplan3DThis.orbitControlsCamera.position.y+=n,this.props.floorplan3DThis.orbitControls.target=new L.Pq0(i.x,n,i.y),this.props.floorplan3DThis.setOrbitControlsBearingAroundTarget(this.props.floorplan3DThis.orbitControlsCamera,this.props.floorplan3DThis.orbitControls.target,o),this.props.floorplan3DThis.orbitControls.update()}},this.setRoomsDropdownListData=e=>this.setState({roomsList:e.map((e=>({...e,visualCenterCoords:this.props.mainComponentThis.qSVG.polygonVisualCenter(e)}))).filter((e=>e.visualCenterCoords))}),this.state={roomsList:[]},this.roomsIconButtonRef=o.createRef(),this.roomsListDropdown=o.createRef(),this.onRoomButtonClick=this.onRoomButtonClick.bind(this),this.setRoomsDropdownListData=this.setRoomsDropdownListData.bind(this)}componentDidMount(){((e,t)=>{t.current.classList.add("dropdown-overflow"),e.current.addEventListener("click",(()=>{t.current.classList.contains("active")?(t.current.classList.remove("active"),t.current.classList.remove("button-active")):(t.current.classList.add("button-active"),t.current.classList.add("active"))})),e.current.addEventListener("mouseenter",(()=>{t.current.classList.add("button-active"),t.current.classList.add("active")})),e.current.addEventListener("mouseleave",(()=>{t.current.classList.remove("active"),setTimeout((()=>{t.current.classList.contains("active")||t.current.classList.remove("button-active")}),500)}));const i=document.createElement("div");i.classList.add("hover-overlay"),i.addEventListener("mouseenter",(()=>{t.current.classList.contains("button-active")&&t.current.classList.add("active")})),e.current.insertAdjacentElement("afterend",i),t.current.addEventListener("mouseenter",(()=>{t.current.classList.contains("button-active")&&t.current.classList.add("active")})),t.current.addEventListener("mouseleave",(()=>{t.current.classList.remove("active"),t.current.classList.remove("button-active")}))})(this.roomsIconButtonRef,this.roomsListDropdown)}render(){const{roomsList:e}=this.state;return(0,a.jsxs)("div",{className:"rooms-camera-scene-control-container",children:[(0,a.jsx)("button",{ref:this.roomsIconButtonRef,title:"Go to room",className:"btn btn-default panel-icon-button-container rooms-action-button",children:(0,a.jsx)(os.A,{})}),(0,a.jsx)("div",{ref:this.roomsListDropdown,className:"rooms-list-dropdown",children:e.length?e.map(((e,t)=>(0,a.jsx)("div",{className:"dropdown-button-container",children:(0,a.jsx)("button",{className:"btn btn-default",onClick:this.onRoomButtonClick(e),children:e.name||`Room ${t}`})},t))):(0,a.jsx)("div",{style:{textAlign:"center"},children:"No rooms"})})]})}}const jm=Tm;class Im extends o.Component{constructor(e){super(),this.setIsMapActiveState=e=>{this.setState({isMapActive:e})},this.onActiveSensorHeatmapChange=e=>()=>{const t=this.state.activeSensorHeatmap&&this.state.activeSensorHeatmap.heatmapName===e.heatmapName?null:e;t?this.props.floorplan3DThis.renderSensorHeatmap(e,this.props.floorplan3DThis.floorplan3DViewScene):this.props.floorplan3DThis.removeSensorHeatmap(this.props.floorplan3DThis.floorplan3DViewScene),this.setState({activeSensorHeatmap:t})},this.getActiveSensorHeatmap=()=>this.state.activeSensorHeatmap,this.setDropdownListData=e=>{const t=this.props.floorplan3DThis.getAvailableSensorUnitsData(),i=this.props.mainComponentThis.sensorHeatmapLastSavedData.filter((e=>!e.isUnitHeatmap||t.find((t=>t.measurementUnit===e.heatmapName))));let o=this.state.activeSensorHeatmap;o&&(o=i.find((e=>o.isUnitHeatmap?e.isUnitHeatmap&&e.heatmapName===o.heatmapName:e.heatmapName===o.heatmapName)),o||this.props.floorplan3DThis.removeSensorHeatmap(this.props.floorplan3DThis.floorplan3DViewScene)),this.setState({sensorsHeatmapData:i.filter((e=>e.heatmapSensorsItem.value.filter((e=>this.props.floorplan3DThis.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e.sensorConnectorId)))).length>0)),activeSensorHeatmap:o},(()=>e&&e()))},this.onSensorsHeatmapIconClick=()=>{this.sensorHeatmapDropdownRef.current.classList.toggle("active"),this.sensorHeatmapDropdownRef.current.classList.contains("active")?this.props.floorplan3DThis.sceneControlDropdownEventListenersHandler("add",this.sensorsHeatmapDropdownOutsideClickCheckHandler):this.props.floorplan3DThis.sceneControlDropdownEventListenersHandler("remove",this.sensorsHeatmapDropdownOutsideClickCheckHandler)},this.state={isMapActive:!1,sensorsHeatmapData:[],activeSensorHeatmap:null},this.sensorHeatmapIconButtonRef=o.createRef(),this.sensorHeatmapDropdownRef=o.createRef(),this.setIsMapActiveState=this.setIsMapActiveState.bind(this),this.onActiveSensorHeatmapChange=this.onActiveSensorHeatmapChange.bind(this),this.getActiveSensorHeatmap=this.getActiveSensorHeatmap.bind(this),this.setDropdownListData=this.setDropdownListData.bind(this),this.onSensorsHeatmapIconClick=this.onSensorsHeatmapIconClick.bind(this),this.sensorsHeatmapDropdownOutsideClickCheckHandler=e.floorplan3DThis.createSceneControlDropdownOutsideClickCheck(this.sensorHeatmapDropdownRef,this.sensorHeatmapIconButtonRef,this.onSensorsHeatmapIconClick)}render(){const{sensorsHeatmapData:e,activeSensorHeatmap:t}=this.state;return(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsxs)("div",{className:"sensors-heatmap-scene-control-container",style:{display:e.length?"block":"none"},children:[(0,a.jsx)("button",{ref:this.sensorHeatmapIconButtonRef,title:"Draw sensors heatmap",className:`btn btn-default panel-icon-button-container sensors-heatmap-button ${t?"active":""} ${this.state.isMapActive?"disabled":""}`,onClick:()=>!this.state.isMapActive&&this.onSensorsHeatmapIconClick(),children:(0,a.jsx)(pm,{})}),(0,a.jsx)("div",{ref:this.sensorHeatmapDropdownRef,className:"sensors-heatmap-dropdown toggle-on-click",children:e.length?e.map(((e,i)=>(0,a.jsxs)("div",{className:"heatmap-switch-container",children:[(0,a.jsx)("div",{className:"label-container",children:e.heatmapName}),(0,a.jsx)("div",{children:(0,a.jsx)(Sn.A,{checked:!!t&&e.heatmapName===t.heatmapName,onChange:this.onActiveSensorHeatmapChange(e)})})]},i))):(0,a.jsx)("div",{style:{textAlign:"center"},children:"No heatmaps"})})]})})}}const Pm=Im;class Om extends o.Component{constructor(){var e;super(),e=this,this.setFloorplanFloors3DData=(e,t)=>this.setState({floorplanFloors3D:e},(()=>t&&t())),this.setSelectedFloorplanFloor3D=function(t,i){let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.setState({selectedFloor3D:t},(()=>{o&&e.updateFloorplanFloorsVisibility(t.floorNumber),i&&i()}))},this.updateFloorplanFloorsVisibility=e=>{const t=this.state.floorplanFloors3D.filter((t=>t.floorNumber>e)),i=this.state.floorplanFloors3D.filter((t=>t.floorNumber<=e));t.forEach((e=>!this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))&&this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onHideFloor3DClick(e)())),i.forEach((e=>this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))&&this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onShowFloor3DClick(e)()))},this.onFloorplanFloor3DClick=e=>()=>{this.state.selectedFloor3D.floorNumber!==e.floorNumber&&(this.updateFloorplanFloorsVisibility(e.floorNumber),this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onFloorplanFloor3DClick(e)(),this.setState({selectedFloor3D:e}))},this.setIsFloorSwitchingDisabled=e=>this.setState({isFloorSwitchingDisabled:e}),this.state={floorplanFloors3D:[],selectedFloor3D:null,isFloorSwitchingDisabled:!1},this.setFloorplanFloors3DData=this.setFloorplanFloors3DData.bind(this),this.setSelectedFloorplanFloor3D=this.setSelectedFloorplanFloor3D.bind(this),this.onFloorplanFloor3DClick=this.onFloorplanFloor3DClick.bind(this),this.updateFloorplanFloorsVisibility=this.updateFloorplanFloorsVisibility.bind(this),this.setIsFloorSwitchingDisabled=this.setIsFloorSwitchingDisabled.bind(this)}render(){const{floorplanFloors3D:e,selectedFloor3D:t,isFloorSwitchingDisabled:i}=this.state;return(0,a.jsx)("div",{className:"scene-control-tools-container floors-selection scene-control",children:t&&e.length>1&&e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((e=>(0,a.jsx)("button",{title:`Floor ${e.floorNumber}`,className:`btn btn-default panel-icon-button-container ${t.floorNumber===e.floorNumber?"active":""}  ${i?"disabled":""}`,onClick:()=>!i&&this.onFloorplanFloor3DClick(e)(),children:(0,a.jsx)("div",{className:"floor-number-container",children:e.floorNumber})},e.floorNumber)))})}}const km=Om;var Fm=i(5998);class Mm extends o.Component{render(){return(0,a.jsxs)("div",{className:"palette-color-container",children:[(0,a.jsxs)("div",{className:"content-container",children:[(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem",justifyContent:"space-between"},label:this.props.valueFormItem.label,value:this.props.valueFormItem.value,labelClasses:"label-form-control-cancel",item:this.props.valueFormItem,error:this.props.valueFormItem.error,onChange:this.props.onChange}),(0,a.jsx)(nn,{containerStyle:{margin:0,justifyContent:"space-between"},colorPickerBoxContainer:this.props.getColoringBox(),isColorInput:!0,label:this.props.colorFormItem.label,labelClasses:"label-form-control-cancel",item:this.props.colorFormItem,error:this.props.colorFormItem.error,onChange:this.props.onChange})]}),this.props.isRemovable&&(0,a.jsx)("div",{className:"options-container",children:this.props.isRemovable&&(0,a.jsx)("div",{title:"Delete color",className:"action-icon-container svg-center-inside-container",onClick:this.props.onDeletePaletteColorClick,children:(0,a.jsx)(Zs.A,{})})})]})}}const Am=Mm;class Rm extends o.Component{constructor(e){super(),this.onAddIntermediateColorClick=()=>{this.props.addIntermediateColor(this.props.colorPaletteFormItem,this.intermediateColorsCount),this.intermediateColorsCount++},this.getMinMaxColorPaletteData=()=>({minValue:this.props.colorPaletteFormItem.find((e=>e.field.includes("min_value"))),minColor:this.props.colorPaletteFormItem.find((e=>e.field.includes("min_color"))),maxValue:this.props.colorPaletteFormItem.find((e=>e.field.includes("max_value"))),maxColor:this.props.colorPaletteFormItem.find((e=>e.field.includes("max_color")))}),this.paletteColorsValidation=()=>{const{minValue:e,minColor:t,maxValue:i,maxColor:o}=this.getMinMaxColorPaletteData(),n=[e,t,i,o];let s=!0;for(let h=0;h<n.length;h++)n[h].error="",n[h].validate(n[h].value)&&(n[h].error=n[h].validate(n[h].value),s=!1);const a=this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value;if(a.forEach((e=>{e.form[0].error="",e.form[1].error=""})),!s)return s;console.log(e),console.log(i);const r=parseFloat(e.value),l=parseFloat(i.value);if(r>=l)return s=!1,e.error="Min value must be less than max",s;for(let h=0;h<a.length;h++)if(a[h].form[1].validate(a[h].form[1].value)&&(a[h].form[1].error=a[h].form[1].validate(a[h].form[1].value),s=!1),a[h].form[0].validate(a[h].form[0].value))a[h].form[0].error=a[h].form[0].validate(a[h].form[0].value),s=!1;else{const e=parseFloat(a[h].form[0].value);if(e>r&&e<l){const t=a[h-1],i=a[h+1];t&&e<=parseFloat(t.form[0].value)?(a[h].form[0].error="Value must be greater than predecessor value",console.log("Invalid 3"),s=!1):i&&e>=parseFloat(i.form[0].value)&&(a[h].form[0].error="Value must be less than successor value",console.log("Invalid 4"),s=!1)}else a[h].form[0].error="Value must be between min and max",console.log("Invalid 2"),s=!1}return s},this.updateColorPalette=()=>{if(console.log("updateColorPalette",this.paletteColorsIsValid),this.colorPaletteCanvas&&this.colorPaletteCanvas.current){const e=30,t=this.formContainerRef.current.offsetHeight;if(this.paletteColorsIsValid){this.colorPaletteCanvas.current.width=e,this.colorPaletteCanvas.current.height=t,this.paletteContainerRef.current.style.height=t+"px";const i=document.createElement("canvas");i.width=e,i.height=t;const o=i.getContext("2d"),n=o.createLinearGradient(e/2,this.props.reverseColorOrder?t:0,e/2,this.props.reverseColorOrder?0:t),s=this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value,{minValue:a,minColor:r,maxValue:l,maxColor:h}=this.getMinMaxColorPaletteData();let c={0:r.value};s.forEach((e=>{console.log((e.form[0].value-a.value)/(l.value-a.value)),c[(e.form[0].value-a.value)/(l.value-a.value)]=e.form[1].value})),c["1.0"]=h.value;for(const e in c)n.addColorStop(e,c[e]);console.log("canvasLinearGradientColorStops",c),o.fillStyle=n,o.fillRect(0,0,e,t);const d=this.colorPaletteCanvas.current.getContext("2d");d.fillStyle=n,d.fillRect(0,0,e,t)}else{this.colorPaletteCanvas.current.getContext("2d").clearRect(0,0,e,t)}}},this.intermediateColorsCount=e.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value.length,this.paletteColorsIsValid=!1,this.colorPaletteCanvas=o.createRef(),this.formContainerRef=o.createRef(),this.paletteContainerRef=o.createRef(),this.onAddIntermediateColorClick=this.onAddIntermediateColorClick.bind(this),this.getMinMaxColorPaletteData=this.getMinMaxColorPaletteData.bind(this),this.paletteColorsValidation=this.paletteColorsValidation.bind(this),this.updateColorPalette=this.updateColorPalette.bind(this)}componentDidMount(){this.updateColorPalette()}componentDidUpdate(){this.updateColorPalette()}render(){console.log("colorPaletteFormItem",this.props.colorPaletteFormItem);const{minValue:e,minColor:t,maxValue:i,maxColor:n}=this.getMinMaxColorPaletteData();let s=this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value;return!this.props.disableIntermediateColorsChange&&this.props.reverseColorOrder&&(s=[...s].reverse()),this.paletteColorsIsValid=this.paletteColorsValidation(),this.props.setIsPaletteValidValue&&this.props.setIsPaletteValidValue(this.paletteColorsIsValid),(0,a.jsxs)("div",{className:"color-palette-maker-container",style:this.props.containerStyle||{},children:[(0,a.jsxs)("div",{ref:this.formContainerRef,className:"form-container",children:[(0,a.jsx)(Am,{valueFormItem:this.props.reverseColorOrder?i:e,colorFormItem:this.props.reverseColorOrder?n:t,getColoringBox:this.props.getColoringBox,onChange:this.props.onChange}),!this.props.disableIntermediateColorsChange&&(0,a.jsxs)(o.Fragment,{children:[s.map(((e,t)=>(0,a.jsx)(Am,{valueFormItem:e.form[0],colorFormItem:e.form[1],getColoringBox:this.props.getColoringBox,onChange:this.props.onChange,isRemovable:!0,onDeletePaletteColorClick:()=>this.props.removeIntermediateColor(this.props.colorPaletteFormItem,e.counter),moveDown:!0,moveUp:!0},t))),(0,a.jsxs)("div",{className:"line-divider-container",children:[(0,a.jsx)("hr",{}),(0,a.jsx)("div",{className:"svg-center-inside-container",title:"Add color",onClick:this.onAddIntermediateColorClick,children:(0,a.jsx)(Fm.A,{})}),(0,a.jsx)("hr",{})]})]}),(0,a.jsx)(Am,{valueFormItem:this.props.reverseColorOrder?e:i,colorFormItem:this.props.reverseColorOrder?t:n,getColoringBox:this.props.getColoringBox,onChange:this.props.onChange})]}),(0,a.jsx)("div",{ref:this.paletteContainerRef,className:"palette-container",children:(0,a.jsx)("canvas",{ref:this.colorPaletteCanvas})})]})}}const Lm=Rm;var Bm=i(7730);class Wm extends o.Component{constructor(){super(),this.customSensorHeatmapsTableHeaderLabels=[{label:"Name"},{label:"Heatmap Sensors"},{label:"Room",infoText:"Toggle this switch to display the heatmap on a room level. When off, the heatmap is shown for the entire floor."},{label:"Value",infoText:"Toggle this switch to display sensor values on heatmap."}]}render(){const{activeSensorHeatmapProperties:e,viewOnly:t,enableEditDelete:i}=this.props;return(0,a.jsxs)("table",{className:"table",style:{tableLayout:"fixed"},children:[(0,a.jsxs)("colgroup",{children:[(0,a.jsx)("col",{style:{width:211}}),(0,a.jsx)("col",{style:{width:211}}),(0,a.jsx)("col",{style:{width:73}}),(0,a.jsx)("col",{style:{width:73}}),(0,a.jsx)("col",{style:{width:36}}),(0,a.jsx)("col",{style:{width:36}})]}),(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[this.customSensorHeatmapsTableHeaderLabels.map(((e,t)=>(0,a.jsx)("th",{children:e.infoText?(0,a.jsxs)("div",{className:"info-label-th",children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)(Eo,{infoText:e.infoText,explanationInfoBoxStyles:{top:20,left:0===t?0:-70,width:140,zIndex:1}})]}):e.label},t))),i&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("th",{children:(0,a.jsx)("div",{className:"hidden-header-part",children:(0,a.jsx)(Bm.A,{})})}),(0,a.jsx)("th",{children:(0,a.jsx)("div",{className:"hidden-header-part",children:(0,a.jsx)(Zs.A,{})})})]})]})}),(0,a.jsx)("tbody",{children:this.props.sensorHeatmapsRowsData.map(((o,n)=>(0,a.jsxs)("tr",{className:"sensor-heatmap-row",children:[(0,a.jsx)("td",{children:t?o.heatmapName:(0,a.jsx)(Qo,{placeholder:"e.g. Floor1 Temperature",item:o,value:o.heatmapName,onChange:this.props.onCustomSensorHeatmapNameChange,formGroupStyle:{marginBottom:0},type:"text",error:e.heatmapNameError})}),(0,a.jsx)("td",{children:(0,a.jsxs)(xo,{containerStyle:{marginBottom:0},children:[(0,a.jsx)(Mo,{fullWidth:!0,viewOnlySelect:t,item:{...o.heatmapSensorsItem,value:o.heatmapSensorsItem.value.map((e=>this.props.availableHeatmapSensors.find((t=>t.value===e.sensorConnectorId)))).filter((e=>!!e)),options:this.props.availableHeatmapSensors},handleChange:e&&e.heatmapId===o.heatmapId?this.props.onCustomSensorHeatmapSensorChange(o):null},(new Date).getTime()),e&&e.heatmapId===o.heatmapId&&e.heatmapSensorsError&&(0,a.jsx)("div",{className:"form-control feedback",children:e.heatmapSensorsError})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{style:{pointerEvents:t?"none":"auto"},children:(0,a.jsx)(Sn.A,{checked:o.isRoomLevel,onChange:()=>!t&&e&&e.heatmapId===o.heatmapId&&this.props.handleSensorHeatmapRoomLevelChange(o)()})})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{style:{pointerEvents:t?"none":"auto"},children:(0,a.jsx)(Sn.A,{checked:o.showSensorValue,onChange:()=>!t&&e&&e.heatmapId===o.heatmapId&&this.props.handleSensorHeatmapShowValueChange(o)()})})}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("td",{children:(0,a.jsx)(Bm.A,{className:"green-icon",onClick:this.props.onEditCustomHeatmapClick(o)})}),(0,a.jsx)("td",{children:(0,a.jsx)(Zs.A,{className:"red-icon",onClick:this.props.onDeleteCustomHeatmapClick(o)})})]})]},n)))})]})}}const Nm=Wm;class Vm extends o.Component{constructor(e){super(),this.handleSensorHeatmapRoomLevelChange=e=>()=>{this.setState({activeSensorHeatmapData:{...e,isRoomLevel:!e.isRoomLevel}})},this.handleSensorHeatmapShowValueChange=e=>()=>{this.setState({activeSensorHeatmapData:{...e,showSensorValue:!e.showSensorValue}})},this.onCustomSensorHeatmapSensorChange=e=>()=>t=>{console.log("Event",t.target.value),this.setState({activeSensorHeatmapData:{...e,heatmapSensorsItem:{...e.heatmapSensorsItem,value:t.target.value.map((e=>({sensorConnectorId:e.value,bindedObjectIds:[]})))}}})},this.onCustomSensorHeatmapNameChange=e=>t=>{this.setState({activeSensorHeatmapData:{...e,heatmapName:t.target.value}})},this.handleSensorColorPaletteItemChange=e=>t=>i=>{const o=t.field.includes("_value")?parseFloat(i.target.value):i.target.value,n={...e,colorData:e.colorData.map((e=>({...e,value:e.field===t.field?o:e.value})))};this.props.setSensorColoringIntermediateValues(n),this.setState({activeSensorHeatmapData:n})},this.handleSensorColorPaletteDirectionChange=e=>()=>{const t={...e,colorData:e.colorData.map((t=>({...t,value:(()=>{switch(t.field){case"critical_min_color":return e.colorData.find((e=>"critical_max_color"===e.field)).value;case"critical_max_color":return e.colorData.find((e=>"critical_min_color"===e.field)).value;default:return t.value}})()})))};this.props.setSensorColoringIntermediateValues(t),this.setState({activeSensorHeatmapData:t})},this.closePopup=()=>rt(this.props.containerRef.current,200,(()=>{n.unmountComponentAtNode(this.props.containerRef.current)}),!1),this.onConfirmClick=()=>{if(!this.isSensorHeatmapColorPaletteValid)return;let e=this.state.activeSensorHeatmapProperties,t=!1;const i=T.isEmpty(this.state.activeSensorHeatmapData.heatmapName);i?(e.heatmapNameError=i,t=!0):Object.hasOwn(e,"heatmapNameError")&&delete e.heatmapNameError,this.state.activeSensorHeatmapData.heatmapSensorsItem.value.length?Object.hasOwn(e,"heatmapSensorsError")&&delete e.heatmapSensorsError:(e.heatmapSensorsError="Entry can not be empty.",t=!0),t?this.setState({activeSensorHeatmapProperties:e}):(this.props.updateSensorsHeatmapData(this.state.activeSensorHeatmapData),this.closePopup())},this.state={activeSensorHeatmapData:{...e.targetSensorHeatmapData,colorData:e.targetSensorHeatmapData.colorData.map((e=>({...e,value:Array.isArray(e.value)?e.value.map((e=>({...e,form:e.form.map((e=>({...e})))}))):e.value}))),heatmapSensorsItem:{...e.targetSensorHeatmapData.heatmapSensorsItem,value:e.targetSensorHeatmapData.heatmapSensorsItem.value.map((e=>({...e})))}},activeSensorHeatmapProperties:{heatmapId:e.targetSensorHeatmapData.heatmapId},colorPickerBoxReady:!1},this.colorPaletteContainerRef=o.createRef(),this.colorPaletteMakerRef=o.createRef(),this.isSensorHeatmapColorPaletteValid=!0,this.handleSensorHeatmapRoomLevelChange=this.handleSensorHeatmapRoomLevelChange.bind(this),this.handleSensorHeatmapShowValueChange=this.handleSensorHeatmapShowValueChange.bind(this),this.onCustomSensorHeatmapSensorChange=this.onCustomSensorHeatmapSensorChange.bind(this),this.onCustomSensorHeatmapNameChange=this.onCustomSensorHeatmapNameChange.bind(this),this.handleSensorColorPaletteItemChange=this.handleSensorColorPaletteItemChange.bind(this),this.handleSensorColorPaletteDirectionChange=this.handleSensorColorPaletteDirectionChange.bind(this),this.closePopup=this.closePopup.bind(this),this.onConfirmClick=this.onConfirmClick.bind(this)}componentDidMount(){this.setState({colorPickerBoxReady:!0})}render(){const{activeSensorHeatmapData:e,activeSensorHeatmapProperties:t,colorPickerBoxReady:i}=this.state;return(0,a.jsx)(Gn,{className:"sensors-heatmap-edit-add-modal",onCloseModalClick:this.closePopup,children:(0,a.jsxs)("section",{className:"layout__section",children:[(0,a.jsx)("div",{className:"sensors-heatmap-settings-edit-add-popup-content-container",children:(0,a.jsxs)(Po.A,{theme:Io,children:[(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("div",{className:"sensor-heatmaps-table-container table-responsive",children:[(0,a.jsx)("div",{className:"title-row",children:(0,a.jsx)("h2",{children:"add"===this.props.actionType?"Add heatmap":"Edit heatmap"})}),(0,a.jsx)(Nm,{sensorHeatmapsRowsData:[e],availableHeatmapSensors:this.props.availableHeatmapSensors,activeSensorHeatmapProperties:t,onCustomSensorHeatmapNameChange:this.onCustomSensorHeatmapNameChange,onCustomSensorHeatmapSensorChange:this.onCustomSensorHeatmapSensorChange,handleSensorHeatmapRoomLevelChange:this.handleSensorHeatmapRoomLevelChange,handleSensorHeatmapShowValueChange:this.handleSensorHeatmapShowValueChange})]})}),(0,a.jsx)("div",{className:"divider",style:{visibility:i?"visible":"hidden"}}),(0,a.jsx)("div",{ref:this.colorPaletteContainerRef,className:"sensor-heatmap-color-palette-container",children:i&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{className:"color-palette-direction-container",children:(0,a.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",title:"Toggle color palette direction",onClick:this.handleSensorColorPaletteDirectionChange(e),children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"arrowGradient",x1:"50%",y1:"100%",x2:"50%",y2:"0%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:e.colorData.find((e=>"critical_min_color"===e.field)).value}),(0,a.jsx)(a.Fragment,{children:e.colorData.find((e=>"intermediate_colors"===e.field)).value.map(((e,t)=>(0,a.jsx)("stop",{offset:100*e.interpolationFactor+"%",stopColor:e.form[1].value},t)))}),(0,a.jsx)("stop",{offset:"100%",stopColor:e.colorData.find((e=>"critical_max_color"===e.field)).value})]})}),(0,a.jsx)("path",{className:"arrow-path",d:"M 50 0 L 30 30 L 40 30 L 40 100 L 60 100 L 60 30 L 70 30 Z",fill:"url(#arrowGradient)"})]})}),(0,a.jsx)(Lm,{ref:this.colorPaletteMakerRef,disableIntermediateColorsChange:!0,reverseColorOrder:!0,colorPaletteFormItem:e.colorData,onChange:this.handleSensorColorPaletteItemChange(e),getColoringBox:()=>this.colorPaletteContainerRef.current,setIsPaletteValidValue:e=>this.isSensorHeatmapColorPaletteValid=e})]})})]})}),(0,a.jsxs)("div",{className:"footer-track button-centered-container",children:[(0,a.jsx)(go,{type:"primary",onClick:this.onConfirmClick,children:"Confirm"}),(0,a.jsx)(go,{type:"border-danger",onClick:this.closePopup,children:"Cancel"})]})]})})}}const Em=Vm;class Hm extends o.Component{constructor(e){super(),this.onSensorsHeatmapSettingsCloseClick=()=>{rt(this.props.containerRef.current,200,(()=>{n.unmountComponentAtNode(this.props.containerRef.current)}),!1)},this.openSensorsHeatmapEditAddNewPopup=(e,t)=>at(this.props.mainComponentThis.sensorsHeatmapEditAddNewPopupContainerRef.current,200,(()=>{n.render((0,a.jsx)(Em,{containerRef:this.props.mainComponentThis.sensorsHeatmapEditAddNewPopupContainerRef,targetSensorHeatmapData:e,availableHeatmapSensors:this.availableHeatmapSensors,actionType:t,updateSensorsHeatmapData:this.applySensorHeatmapDataChanges,setSensorColoringIntermediateValues:this.setSensorColoringIntermediateValues,floorplan3DThis:this.props.floorplan3DThis,mainComponentThis:this.props.mainComponentThis}),this.props.mainComponentThis.sensorsHeatmapEditAddNewPopupContainerRef.current)}),"block",!1),this.onAddCustomHeatmapClick=()=>{const e=this.createSensorHeatmapDataObject({});this.setSensorColoringIntermediateValues(e),this.openSensorsHeatmapEditAddNewPopup(e,"add")},this.onEditCustomHeatmapClick=e=>()=>{this.openSensorsHeatmapEditAddNewPopup(e,"edit")},this.onDeleteCustomHeatmapClick=e=>()=>{const t=this.state.sensorsHeatmapData.filter((t=>t!==e));this.setState({sensorsHeatmapData:t,needsSave:this.calculateNeedsSaveCustom(t)})},this.setSensorColoringIntermediateValues=e=>{e.colorData.find((e=>"intermediate_colors"===e.field)).value=this.props.floorplan3DThis.calculateSensorColoringIntermediateValues(e.colorData)},this.createSensorHeatmapDataObject=e=>{const t=this.props.mainComponentThis.sensorHeatmapLastSavedData.find((t=>e.isUnitHeatmap?t.isUnitHeatmap&&t.heatmapId===e.heatmapId:t.heatmapId===e.heatmapId));return{heatmapId:t?t.heatmapId:(0,lr.A)(),heatmapName:e.heatmapName||"",isRoomLevel:!t||t.isRoomLevel,showSensorValue:!!t&&t.showSensorValue,isUnitHeatmap:t?t.isUnitHeatmap:e.isUnitHeatmap,heatmapSensorsItem:t?t.heatmapSensorsItem:{value:[]},colorData:eo.map((e=>({...e,value:t&&"intermediate_colors"!==e.field?t.colorData.find((t=>t.field===e.field)).value:e.defaultValue})))}},this.onSaveSensorsHeatmapDataClick=()=>{this.setState({saveLoading:!0});const e={...this.props.mainComponentThis.klet3DGeneral,sensorHeatmapData:this.prepareSensorHeatmapsDataForSave(this.state.sensorsHeatmapData)},t=()=>{this.props.mainComponentThis.klet3DGeneral=e,this.props.mainComponentThis.sensorHeatmapLastSavedData=e.sensorHeatmapData,this.props.floorplan3DThis.sensorsHeatmapSceneControlRef.current.setDropdownListData((()=>{const e=this.props.floorplan3DThis.sensorsHeatmapSceneControlRef.current.getActiveSensorHeatmap();e&&this.props.floorplan3DThis.renderSensorHeatmap(e,this.props.floorplan3DThis.floorplan3DViewScene)})),this.setState({saveLoading:!1,needsSave:!1})};this.props.callAPIForSave?Ii.post.call(this,`/klet3d/entity/${this.props.mainComponentThis.props.floorplanID}/${this.props.mainComponentThis.props.licenseKey}`,{entitygeneral:e},(()=>{t()})):t()},this.applySensorHeatmapDataChanges=e=>{const t=[...this.state.sensorsHeatmapData],i=t.findIndex((t=>t.heatmapId===e.heatmapId));-1!==i?t[i]=e:t.push(e),this.setState({sensorsHeatmapData:t,needsSave:this.calculateNeedsSaveCustom(t)})},this.prepareSensorHeatmapsDataForSave=e=>e.map((e=>(e.heatmapSensorsItem.value.sort(((e,t)=>e.sensorConnectorId.localeCompare(t.sensorConnectorId))),{...e,colorData:e.colorData.filter((e=>"intermediate_colors"!==e.field)).map((e=>{let{validate:t,error:i,...o}=e;return o}))}))),this.calculateNeedsSaveCustom=e=>this.props.mainComponentThis.sensorHeatmapLastSavedData.length>0?P(this.prepareSensorHeatmapsDataForSave(e),this.prepareSensorHeatmapsDataForSave(this.props.mainComponentThis.sensorHeatmapLastSavedData)):e.length>0,this.state={sensorsHeatmapData:[],needsSave:!1,saveLoading:!1},this.availableHeatmapSensors=e.floorplan3DThis.getAvailableBindedNumberSensors().map((t=>({name:e.mainComponentThis.getObjectConnectorKlet3DBinderName(t[e.mainComponentThis.connectorIDbinderIDPropertyName]),value:t[e.mainComponentThis.connectorIDbinderIDPropertyName]}))),this.customSensorHeatmapsTableHeaderLabels=[{label:"Name"},{label:"Heatmap Sensors"},{label:"Room",infoText:"Toggle this switch to display the heatmap on a room level. When off, the heatmap is shown for the entire floor."},{label:"Value",infoText:"Toggle this switch to display sensor values on heatmap."}],this.onSensorsHeatmapSettingsCloseClick=this.onSensorsHeatmapSettingsCloseClick.bind(this),this.openSensorsHeatmapEditAddNewPopup=this.openSensorsHeatmapEditAddNewPopup.bind(this),this.onAddCustomHeatmapClick=this.onAddCustomHeatmapClick.bind(this),this.onEditCustomHeatmapClick=this.onEditCustomHeatmapClick.bind(this),this.onDeleteCustomHeatmapClick=this.onDeleteCustomHeatmapClick.bind(this),this.setSensorColoringIntermediateValues=this.setSensorColoringIntermediateValues.bind(this),this.createSensorHeatmapDataObject=this.createSensorHeatmapDataObject.bind(this),this.onSaveSensorsHeatmapDataClick=this.onSaveSensorsHeatmapDataClick.bind(this),this.applySensorHeatmapDataChanges=this.applySensorHeatmapDataChanges.bind(this),this.prepareSensorHeatmapsDataForSave=this.prepareSensorHeatmapsDataForSave.bind(this),this.calculateNeedsSaveCustom=this.calculateNeedsSaveCustom.bind(this)}componentDidMount(){const e=[...this.props.mainComponentThis.sensorHeatmapLastSavedData.filter((e=>!e.isUnitHeatmap))].map((e=>this.createSensorHeatmapDataObject(e)));e.forEach((e=>this.setSensorColoringIntermediateValues(e))),this.setState({sensorsHeatmapData:e})}render(){const{sensorsHeatmapData:e,needsSave:t,saveLoading:i}=this.state,o=e.filter((e=>!e.isUnitHeatmap));console.log("sensorsHeatmapData",e);const n=!this.availableHeatmapSensors.length&&!e.length;return(0,a.jsx)(Gn,{className:"sensors-heatmap-settings-modal",onCloseModalClick:this.onSensorsHeatmapSettingsCloseClick,children:(0,a.jsxs)("section",{className:"layout__section",children:[(0,a.jsx)("div",{className:"sensors-heatmap-settings-popup-content-container "+(n?"no-sensor-measures-data":""),children:n?(0,a.jsx)("p",{children:"No sensor data for heatmap generation have been detected. Please ensure that your sensors are properly connected and bound to at least one object in the drawing."}):(0,a.jsx)(Po.A,{theme:Io,children:(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("div",{className:"sensor-heatmaps-table-container table-responsive",children:[(0,a.jsx)("div",{className:"title-row",children:(0,a.jsx)("h2",{children:"Heatmaps"})}),(0,a.jsx)(Nm,{sensorHeatmapsRowsData:o,availableHeatmapSensors:this.availableHeatmapSensors,enableEditDelete:!0,viewOnly:!0,onEditCustomHeatmapClick:this.onEditCustomHeatmapClick,onDeleteCustomHeatmapClick:this.onDeleteCustomHeatmapClick}),(0,a.jsx)("div",{className:"add-heatmap-button-container",children:(0,a.jsx)(go,{type:"border-primary",onClick:this.onAddCustomHeatmapClick,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(Fm.A,{}),(0,a.jsx)("span",{children:"Add heatmap"})]})})})]})})})}),!n&&(0,a.jsx)("div",{className:"footer-track button-centered-container",children:(0,a.jsx)(wo,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:" Save changes",loading:i,spinnerLoading:!0,onClick:this.onSaveSensorsHeatmapDataClick})})]})})}}const zm=Hm;class Gm extends o.Component{constructor(){super(),this.onShowHeatmapSettingsClick=()=>{at(this.props.mainComponentThis.sensorsHeatmapSettingsPopupContainerRef.current,200,(()=>{n.render((0,a.jsx)(zm,{containerRef:this.props.mainComponentThis.sensorsHeatmapSettingsPopupContainerRef,callAPIForSave:!0,floorplan3DThis:this.props.floorplan3DThis,mainComponentThis:this.props.mainComponentThis,setResponseError:this.props.setResponseError}),this.props.mainComponentThis.sensorsHeatmapSettingsPopupContainerRef.current)}),"block",!1)},this.onShowHeatmapSettingsClick=this.onShowHeatmapSettingsClick.bind(this)}render(){return(0,a.jsxs)("div",{children:[(0,a.jsx)("li",{onClick:this.onShowHeatmapSettingsClick,children:(0,a.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Sensors heatmap settings",children:[(0,a.jsx)(is.A,{}),(0,a.jsx)("p",{children:"HEATMAP SETTINGS"})]})}),(0,a.jsx)("br",{})]})}}const qm=Gm;class Um extends o.Component{constructor(e){super(),this.initialize3DViewController=()=>{this.props.mainComponentThis.addOnDrawingControlerInstance&&this.props.mainComponentThis.addOnDrawingControlerInstance.initializeController("3D",{floorplan3DThis:this})},this.floorplan3DViewAnimate=()=>{this.mounted&&(setTimeout((()=>{requestAnimationFrame(this.floorplan3DViewAnimate)}),this.timeIntervalBetweenFrames),!this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.currentControls.getEnabledStatus()&&this.currentControls===this.firstPersonControls&&this.currentControls.animate(),this.floorplan3DViewRenderer.clear(),this.floorplan3DViewRenderer.render(this.floorplan3DViewScene,this.floorplan3DViewCamera),this.changedLightsShadowMaps.length>0&&this.isLightsShadowMapChangeFinished(!1))},this.onDataLoadedCallback=()=>{this.floorplanStartDate=vi(this.floorplanTimeZone),this.floorplanStartDateSetTimestamp=(new Date).getTime();const e=(()=>{const e=window.location.hash.match(/^#viewIndex=(\d+)$/);return e?parseInt(e[1],10):null})(),t=null!==e&&e>1&&this.props.mainComponentThis.floorplanGeneral.floorplanCameraViews&&this.props.mainComponentThis.floorplanGeneral.floorplanCameraViews[e-1],i=!(!this.props.mainComponentThis.floorplanGeneral.floorplanCameraViews||"default_view"===this.getFloorplanDefaultView().id),o=!t&&!i;Jh.call(this,Ii,o,t,e),this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers)},this.state={isPanelShowed:!1,showSceneControls:!0},$h.call(this,e),this.sunLightPositionFloorplan3DViewCameraHelpers={auxiliaryCameraHelper:null,mainCameraHelper:null,offscreenShadowCamera:null,type:"floorplan3DView"},this.sunLightPositionFloorplan3DOnMapCameraHelpers={auxiliaryCameraHelper:null,mainCameraHelper:null,offscreenShadowCamera:null,type:"floorplan3DOnMap"},this.floorplanTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,this.bindedObjectTextHeight=2,this.sensorValueDecimalPrecision=1,this.environmentCircleSegmentsCount=32,this.editModeValue=Ni.find((e=>"Edit"===e.label)).value,this.defaultUserMode=Ni.find((e=>"Control"===e.label)).value,this.selectedUserMode=this.defaultUserMode,this.shadowCastingLightsActive=[],this.shadowCastingLightsWaitingList=[],this.maxShadowCastingLightsCount=15,this.changedLightsShadowMaps=[],this.changeLightShadowMapsLoadingSet=!1,this.componentWillUnmountCustomCallback=null,this.objectConnectorsArray=[],this.sensorHeatmapFloorOffset=2.5,this.sensorHeatmapPlanesData=[],this.drawedSensorHeatmapData=[],this.floorplanRoomsMappingRenderTargets=[],this.screenBasicLightPartDepth=1,this.screen3DGlowLightPartDepth=50,this.screenMeshPartDepth=.5,this.loadingPresenceObjectsStatuses=[],this.presenceObjects3D=[],this.wallStartEndPlanesMaterial=new L.tXL({color:this.wallStartEndPlanesColor,side:L.$EB}),this.wallBottomPlaneMaterial=new L.tXL({color:this.wallTopBottomPlanesColor,side:L.hsX}),this.wallTopPlaneMaterial=new L.tXL({color:this.wallTopBottomPlanesColor,side:L.$EB}),this.roomFloorDefaultMaterial=new L.tXL({side:L.$EB,color:15658734}),this.panel3DOptions=[],e.mainComponentThis.panelDrawingOptions2D.filter((e=>!e.view3DDisable)).forEach((e=>{let t={...e};t.value=e.itemsClass||e.object3DProperties.type,t.objects3DArray=[],t.currentViewArray=[],t.floorplanViewArray=[],t.loadingObjectsStatuses=[],t.isTargetObject3DMode=t.isTargetObjectMode,this.panel3DOptions.push(t)})),e.mainComponentThis.panelDrawingOptions2D.filter((e=>!e.itemsClass&&e.binderObjType)).forEach((e=>{let t={...e};t.objects3DArray=[],t.currentViewArray=[],t.floorplanViewArray=[],t.isTargetObject3DMode=t=>t===e.binderObjType,t.isUnfixed=!0,t.isFontLoadRequired="generic_presence_area"!==e.binderObjType,this.panel3DOptions.push(t)})),e.mainComponentThis.objectConnectorAvailableClasses.forEach((e=>{if(e.bindingObjectsItemsClasses?e.connectorPanel3DOptions=this.panel3DOptions.filter((t=>e.bindingObjectsItemsClasses.includes(t.itemsClass))):e.bindingObjectsModels?e.connectorPanel3DOptions=this.panel3DOptions.filter((t=>{for(let i=0;i<e.bindingObjectsModels.length;i++)if(t.isTargetObject3DMode(e.bindingObjectsModels[i]))return!0;return!1})):e.connectorPanel3DOptions=[],e.meshStateParams={meshStatePropertyName:"state",meshOnStatePropertyValue:"on",meshOffStatePropertyValue:"off",returnBoolean:!1,meshUnBindedStateValue:"off"},e.getMeshStateMethodCustomParams)for(let t in e.getMeshStateMethodCustomParams)e.meshStateParams[t]=e.getMeshStateMethodCustomParams[t]})),this.controlPanelRef=o.createRef(),this.bindedObjectsHighlightInputRef=o.createRef(),this.clickableObjectsSceneControlRef=o.createRef(),this.sensorsHeatmapSceneControlRef=o.createRef(),this.sensorsHeatmapRef=o.createRef(),this.floorplanFloorsSceneControlsSelectionRef=o.createRef(),this.glamosLogoImgRef=o.createRef(),this.alertRef=o.createRef(),this.maxShadowCastingLightsAlert=o.createRef(),this.sunLightControlsRef=o.createRef(),this.sunPositionAlertRef=o.createRef(),this.initialize3DViewController=this.initialize3DViewController.bind(this),this.createAmbientLight=gc.bind(this),this.createFloorplanEnvironmentSky=fc.bind(this),this.createFloorplanEnvironment=bc.bind(this),this.centerBBoxOrbitControlsCamera=wc.bind(this),this.calculateControlsMaxDistance=Cc.bind(this),this.setCameraPOVView=xc.bind(this),this.calculateRoomCoordsOutsideWithOrphans=Dc.bind(this),this.changeCoordinateSystemBasisForPoints=Tc.bind(this),this.getSelectedDrawingOption=jc.bind(this),this.filterPanel3DOptionUnfixedItemsObjData=Ic.bind(this),this.getPanel3DUnfixedItemsOptions=Pc.bind(this),this.setCurrentFromFloorplanArrays=Oc.bind(this),this.getMaxFloorNumber=kc.bind(this),this.calculateSunPosition=Fc.bind(this),this.sceneControlDropdownEventListenersHandler=Mc.bind(this),this.createSceneControlDropdownOutsideClickCheck=Ac.bind(this),this.onInitialFloorplanDrawingFinishedCallback=Rc.bind(this),this.createTextBackgroundMesh=Vc.bind(this),this.initializeSensorColorPaletteImageData=Ec.bind(this),this.calculateSensorRangeColoringColor=Hc.bind(this),this.createSensorMesh=zc.bind(this),this.createOtherMesh=Gc.bind(this),this.createPresenceAreaGroup=qc.bind(this),this.createFloorplanTimeMesh=Uc.bind(this),this.createPointLight=Yc.bind(this),this.createSpotLight=Xc.bind(this),this.createScreenPartBasicLight=Kc.bind(this),this.createScreenPart3DGlowLight=Zc.bind(this),this.createScreenPartMesh=$c.bind(this),this.updateSunLightPosition=od.bind(this),this.onSunLightPositionCoordinateSystemTransformReady=nd.bind(this),this.deallocateSceneSunLightData=sd.bind(this),this.onShowOnMapLayer3DClick=ad.bind(this),this.onFloorplanItemSelect=rd.bind(this),this.handleKeyDown3D=ld.bind(this),this.selectedCameraItemPOVView=hd.bind(this),this.drawFloorplan=dd.bind(this),this.createFloorplanItem=pd.bind(this),this.removeFloorplanItem=md.bind(this),this.drawPanel3DOptionFloorplanUnfixedItems=ud.bind(this),this.drawPanel3DOptionFloorUnfixedItems=gd.bind(this),this.drawAddsPlanes=fd.bind(this),this.removeFloorplanFloor=bd.bind(this),this.removeFloorplanFloorItems=wd.bind(this),this.addFloorplanFloor=Cd.bind(this),this.addFloorplanFloorItems=xd.bind(this),this.rotateChildAroundWorldPoint=_d.bind(this),this.highlightBindedObjects=yd.bind(this),this.handleFixedItemsChangeStateMethodHighlight=Sd.bind(this),this.setFloorplanFloorItemsVisibility=vd.bind(this),this.drawLine=Dd.bind(this),this.drawGlobalCoordinateSystem=Td.bind(this),this.turnWaitingLightOn=jd.bind(this),this.setLightStateParameters=Id.bind(this),this.addShadowCastLightToList=Pd.bind(this),this.isLightsShadowMapChangeFinished=Od.bind(this),this.calculateScreenPartDimenions=kd.bind(this),this.setScreenPartMeshPosition=Fd.bind(this),this.getScreenPartLocalDepth=Md.bind(this),this.updateShadowMap=Ad.bind(this),this.updateControlPanelState=Rd.bind(this),this.onObjectConnectorEntitiesDataChange3DHandlerBasic=Hd.bind(this),this.onObjectConnectorsDataChange=zd.bind(this),this.addObjectConnectorObject=Gd.bind(this),this.getObjectConnectorAdditionalParameters=qd.bind(this),this.getObjectsConnectorUnfixedBindedObjectParameters=Ud.bind(this),this.objectConnectorBindedObjectsOnItemRemoveCheck=Yd.bind(this),this.getIsFixed2DObjectsValue=Xd.bind(this),this.updateRightBoxBindingComponent=Kd.bind(this),this.handleLightUpdate=$d.bind(this),this.handleDoorWindowUpdate=Zd.bind(this),this.handleFanUpdate=Jd.bind(this),this.handleCoverUpdate=Qd.bind(this),this.handlePresenceBinaryDetectionUpdate=ep.bind(this),this.handleHVACUpdate=tp.bind(this),this.handleChristmasTreeUpdate=ip.bind(this),this.handleCameraUpdate=op.bind(this),this.getScreenProperties=np.bind(this),this.handleScreenUpdate=sp.bind(this),this.handlePresenceAreaBindedObjectUpdate=ap.bind(this),this.handleSurfaceAreaUpdate=rp.bind(this),this.calculatePresenceAreaDetectedObjectCoordinateValue=lp.bind(this),this.cloneUnfixedBindedObject3D=hp.bind(this),this.createUnfixedItem=cp.bind(this),this.removeUnfixedItem=dp.bind(this),this.getObjectConnectorPropertiesDefaultMethod=pp.bind(this),this.getObjectConnectorDefaultStateValue=mp.bind(this),this.getMeshObjectConnectorState=up.bind(this),this.getMeshObjectConnectorProperties=gp.bind(this),this.getObjectConnectorClassValue=fp.bind(this),this.isFloorplanItemClickable=bp.bind(this),this.getFloorplanItemChangeStateOnClick=wp.bind(this),this.renderSensorHeatmap=Cp.bind(this),this.renderSensorFloorHeatmap=xp.bind(this),this.removeSensorHeatmapValueTextMeshes=_p.bind(this),this.createSensorHeatmapValueTextMesh=yp.bind(this),this.createSensorHeatmapPlane=Sp.bind(this),this.removeSensorHeatmapPlane=vp.bind(this),this.removeSensorHeatmap=Dp.bind(this),this.getRoomsMappingRenderTargetData=Tp.bind(this),this.createRoomsMappingRenderTarget=jp.bind(this),this.createSensorHeatmapPlaneMaterial=Ip.bind(this),this.getAvailableBindedNumberSensors=Pp.bind(this),this.getAvailableSensorUnitsData=Op.bind(this),this.createSensorConnectorsFloorRoomsDistribution=kp.bind(this),this.getSensorHeatmapFloorsDistribution=Fp.bind(this),this.getSensorUnitFloorsRoomsDistribution=Mp.bind(this),this.getSensorHeatmapFloorsRoomsDistribution=Ap.bind(this),this.calculateSensorColoringIntermediateValues=Rp.bind(this),this.updateDoorWindowMeshState=sm.bind(this),this.setDoorWindowMeshToDefaultState=am.bind(this)}componentDidMount(){this.mounted=!0,this.initialize3DViewController()}componentWillUnmount(){this.props.mainComponentThis.addOnDrawingControlerInstance&&(this.props.mainComponentThis.addOnDrawingControlerInstance.view3DController=null),Qh.call(this)}render(){return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{className:"glamos-bottom-left-logo",style:{right:10,left:"auto"},children:(0,a.jsx)("img",{ref:this.glamosLogoImgRef,alt:"Glamos logo",src:Ba})}),(0,a.jsx)("canvas",{className:"full-height",ref:this.canvasRef}),(0,a.jsx)("div",{ref:this.mapLayer3DContainerRef,className:"map-layer-container floorplan3d"}),(0,a.jsxs)(Po.A,{theme:Io,children:[(0,a.jsx)("div",{ref:this.panelInfoExplanationBox,className:"panel-info-explanation-box",style:{width:"auto",maxWidth:200}}),(0,a.jsxs)("div",{ref:this.sceneControlToolsContainer,className:"scene-control-tools-container panel-transition scene-control",children:[(0,a.jsx)(Dm,{ref:this.cameraControlsRef,floorplan3DThis:this}),(0,a.jsx)(xm,{ref:this.bindedObjectsHighlightInputRef,onChangeCallback:this.highlightBindedObjects}),(0,a.jsx)(Sm,{ref:this.clickableObjectsSceneControlRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis}),(0,a.jsx)(jm,{ref:this.roomCameraControlsRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis}),(0,a.jsx)(Pm,{ref:this.sensorsHeatmapSceneControlRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis})]}),(0,a.jsx)(km,{ref:this.floorplanFloorsSceneControlsSelectionRef,floorplan3DThis:this}),(0,a.jsx)(mo,{ref:this.maxShadowCastingLightsAlert}),(0,a.jsx)(mo,{ref:this.alertRef,delay:5e3}),(0,a.jsx)(mo,{ref:this.sunPositionAlertRef,delay:5e3}),(0,a.jsx)(ba,{ref:this.leftPanel3DExtendedChoicePartRef,mainComponentThis:this.props.mainComponentThis}),(0,a.jsxs)(ga,{panelRef:this.panel,panelWidth:this.panelWidth,children:[(0,a.jsx)("li",{className:"back-to-2d-container panel-action-button",children:(0,a.jsx)(go,{type:"blue",onClick:this.backTo2D,children:"Back to 2D"})}),(0,a.jsx)(Vl,{ref:this.floorplanFloorsPanelSelection3DRef,floorplan3DThis:this}),(0,a.jsx)("br",{}),(0,a.jsx)(wm,{floorplan3DThis:this}),(0,a.jsx)("br",{}),(0,a.jsx)(Yl,{ref:this.wallsVisibilityOptionsRef,panelInfoExplanationBox:this.panelInfoExplanationBox,mainComponentThis:this}),(0,a.jsx)(ql,{ref:this.wallsOpacityRef,mainComponentThis:this}),(0,a.jsx)("br",{}),(0,a.jsx)(qm,{ref:this.sensorsHeatmapRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis,setResponseError:this.props.setResponseError}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Export as PNG",onClick:this.onExportPngClick,children:[(0,a.jsx)($n.A,{}),(0,a.jsx)("p",{children:"EXPORT PNG"})]})}),(0,a.jsx)("br",{}),(0,a.jsx)("li",{children:(0,a.jsx)(Bs,{checked:this.state.showSceneControls,floorplan3DThis:this})}),(0,a.jsx)("li",{children:(0,a.jsx)(rr,{ref:this.showMapLayer3DInputRef,onChangeCallback:this.onShowOnMapLayer3DClick})}),(0,a.jsx)("li",{children:(0,a.jsx)(Vr,{ref:this.sunLightControlsRef,floorplan3DThis:this})}),"HomeAssistant"===this.props.mainComponentThis.props.addOnIntegrationType&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),(0,a.jsx)($o,{label:"Add-on URL",value:this.props.mainComponentThis.props.customProps.isContainerApp?`${window.location.protocol}//${window.location.hostname}:${window.location.port}`:`${window.location.pathname}${window.location.search}`,containerStyle:{marginBottom:"1rem"}})]}),(0,a.jsx)(lm,{ref:this.controlPanelRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis})]}),(0,a.jsxs)("div",{ref:this.panelControl,className:"panel-control-container panel-transition",children:[(0,a.jsx)("div",{title:this.state.showSceneControls?"Hide controls":"Show controls",className:"svg-center-inside-container",onClick:this.handleSceneControlsVisibilityChange,children:this.state.showSceneControls?(0,a.jsx)(fm,{}):(0,a.jsx)(um,{})}),(0,a.jsx)("div",{title:this.state.isPanelShowed?"Hide settings":"Open settings",className:"svg-center-inside-container",onClick:this.onPanelControlClick,children:this.state.isPanelShowed?(0,a.jsx)(ma.A,{className:"panel-transition"}):(0,a.jsx)(is.A,{style:{padding:2,boxSizing:"border-box"}})})]}),(0,a.jsx)(Wl,{ref:this.floorplanNavigationRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis}),(0,a.jsx)(Hl,{ref:this.orbitControlsRotatePanModeSwitchRef})]})]})}}const Ym=Um;function Xm(){return this.props.floorplanID}function Km(){this.binder.update(this),this.boxBind.current.appendChild(this.binder.graph)}function Zm(e){return m(e.gps_latitude)?this.homeAssistantConfigObject?this.homeAssistantConfigObject.latitude:null:e.gps_latitude}function $m(e){return m(e.gps_longitude)?this.homeAssistantConfigObject?this.homeAssistantConfigObject.longitude:null:e.gps_longitude}function Jm(){let e=[];for(let t=0;t<this.floorplanFloorsData.length;t++)e.push(...this.floorplanFloorsData[t].objData);return e}function Qm(e){return this.getFloorplanObj2Ds().find((t=>t.id===e))}function eu(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("floorplan_image_scaling"===this.mode||"floorplan_image_translation"===this.mode){if(this.snap=this.calcul_snap(e,this.grid_snap),this.cursor("pointer"),this.binder?t&&(this.binder.setAttribute("cx",this.snap.x),this.binder.setAttribute("cy",this.snap.y)):(this.binder=this.qSVG.create("none","circle",{cx:this.snap.x,cy:this.snap.y,r:this.meter/6,fill:"url('#uploadFloorplanCursorCircleGradient')"}),this.boxBind.current.appendChild(this.binder)),t&&"floorplan_image_scaling"===this.mode){let e;if((e=this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group"))&&!this.boxFloorplanImage.current.querySelector("#endCircle")){let t=e.querySelector("line");t.setAttribute("x2",this.snap.x),t.setAttribute("y2",this.snap.y)}}}else"upload_floorplan_image_mode"===this.mode&&this.removeBinder()}function tu(e){if("room_mode"===this.mode){let t;this.snap=this.calcul_snap(e,this.grid_snap),(t=At(this.snap,this.ROOM))?(this.cursor("pointer"),(!this.selectedBinder||this.selectedBinder&&parseInt(this.selectedBinder.id)!==this.ROOM.indexOf(t))&&(this.removeBinder(),this.binder=this.createRoomBinderPath(t))):this.removeBinder()}}function iu(e){if("select_mode"===this.mode&&"off"===this.drag){this.snap=this.calcul_snap(e,"off");let t,i,o=!1,n=[];for(let e=0;e<this.OBJDATA.length;e++){let t=this.OBJDATA[e].realBbox;kt(this.snap,t)&&n.push(this.OBJDATA[e])}if(n.length>0&&(o=n[0],n.length>1)){let e,t=Bt(this.snap,{x:n[0].x,y:n[0].y});for(let i=1;i<n.length;i++)e=Bt(this.snap,{x:n[i].x,y:n[i].y}),e<t&&(t=e,o=n[i])}if(!1!==o){if(this.binder&&"segment"===this.binder.type&&(this.removeBinder(),this.cursor("default")),!this.selectedBinder||!this.selectedBinder.obj||this.selectedBinder.obj.id!==o.id)if(o.params.bindBox){if(!this.binder||!this.binder.obj||this.binder.obj.id!==o.id){if(this.binder&&this.binder.obj&&this.binder.obj.id!==o.id&&this.removeBinder(),!o.params.construcLength)return;this.binder=new Bc("free","boundingBox","",o,o.angle,0,o.size,"normal",o.thick,o.realBbox,{onWallObjectBBox:"onWall"===o.family},this),this.binder.obj=o,this.binder.update(this),this.binder.type="boundingBox",this.binder.oldX=this.binder.x,this.binder.oldY=this.binder.y,this.boxBind.current.appendChild(this.binder.graph),o.params.move?this.cursor("move"):this.cursor("pointer")}}else if(this.binder&&this.binder.obj&&this.binder.obj.id===o.id)this.binder.actionGraph&&(console.log("Wall item binder",e.target),console.log(this.binder),e.target===this.binder.actionGraph.firstChild?(this.cursor("move"),this.binder.actionGraph.firstChild.setAttribute("class","circle_css_2"),this.binder.type="obj",this.binder.obj=o):(this.cursor("default"),this.binder.actionGraph.firstChild.setAttribute("class","circle_css"),this.binder.type=!1));else{if(this.binder&&this.binder.obj&&this.binder.obj.id!==o.id&&this.removeBinder(),!o.params.construcLength)return;let e;if(e=this.editor.rayCastingWall(o)){e.length>1&&(e=e[0]),this.inWallRib(e);let t=o.thick,i=o.size;this.binder=new Bc("inWall","socle","",o,o.angle,0,i,"normal",t,null,void 0,this),this.binder.obj=o,this.binder.update(this),this.binder.type="obj",this.binder.oldXY={x:o.x,y:o.y},this.boxBind.current.appendChild(this.binder.graph)}}}else this.binder&&(this.removeBinder(),this.cursor("default"),this.rib());if(t=this.editor.nearWallNode(this.snap,this.selectModeNearWallNodeRange)){if(!this.binder||"segment"===this.binder.type)if(this.selectedBinder)if(this.selectedBinder.obj){let e=[];for(let n=this.WALLS.length-1;n>-1;n--)(_t(this.WALLS[n].start,t)||_t(this.WALLS[n].end,t))&&e.push(this.WALLS[n]);let i=!1;console.log(e);const o=this.getSelectedWallFreeItemObj2D(this.selectedBinder.obj.id);for(let t=0;t<e.length;t++)if(-1!==this.editor.objFromWall(e[t]).indexOf(o)){i=!0;break}i||(console.log("Create node binder"),this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node")}else this.selectedBinder.wall&&(!this.selectedBinder.wall||_t(this.selectedBinder.wall.start,t)||_t(this.selectedBinder.wall.end,t))||(this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node");else this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node";this.cursor("move")}else this.binder&&"node"===this.binder.type&&(this.removeBinder(),this.cursor("default"),this.rib());if(i=this.editor.rayCastingWalls(this.snap,this.WALLS)){if((!this.selectedBinder||!this.selectedBinder.obj||this.selectedBinder.obj&&!Array.isArray(i)&&-1===this.editor.objFromWall(i).indexOf(this.getSelectedWallFreeItemObj2D(this.selectedBinder.obj.id))||0===(this.selectedBinder.obj&&Array.isArray(i)&&i.filter((e=>-1!==this.editor.objFromWall(e).indexOf(this.getSelectedWallFreeItemObj2D(this.selectedBinder.obj.id))))).length)&&(!this.selectedBinder||!this.selectedBinder.wall||this.selectedBinder.wall&&this.getSelectedWall2D()!==i)&&(i.length>1&&(i=i[i.length-1]),i&&!this.binder)){this.editor.objFromWall(i).length>0&&this.editor.inWallRib2(i),this.binder={},this.binder.wall=i,this.inWallRib(this.binder.wall);let e=this.qSVG.create("none","line",{x1:this.binder.wall.start.x,y1:this.binder.wall.start.y,x2:this.binder.wall.end.x,y2:this.binder.wall.end.y,"stroke-width":this.wallSize,stroke:"#19ab7f"}),t=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.start.x,cy:this.binder.wall.start.y,r:this.wallBinderBallsRadius}),o=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.end.x,cy:this.binder.wall.end.y,r:this.wallBinderBallsRadius});this.binder.graph=this.qSVG.create("none","g"),this.binder.graph.append(e),this.binder.graph.append(t),this.binder.graph.append(o),this.boxBind.current.appendChild(this.binder.graph),this.binder.type="segment",this.cursor("pointer")}}else if(i=this.editor.nearWall(this.snap,this.WALLS,this.nearWallBinderRadius)){if((!this.selectedBinder||!this.selectedBinder.obj||this.selectedBinder.obj&&-1===this.editor.objFromWall(i.wall).indexOf(this.getSelectedWallFreeItemObj2D(this.selectedBinder.obj.id)))&&(!this.selectedBinder||!this.selectedBinder.wall||this.selectedBinder.wall&&this.getSelectedWall2D()!==i.wall)&&i&&!this.binder){console.log("Wall objects"),console.log(this.editor.objFromWall(i.wall)),this.selectedBinder&&this.editor.objFromWall(i.wall).length,i=i.wall,this.editor.objFromWall(i).length>0&&this.editor.inWallRib2(i),this.binder={},this.binder.wall=i,this.inWallRib(this.binder.wall);let e=this.qSVG.create("none","line",{x1:this.binder.wall.start.x,y1:this.binder.wall.start.y,x2:this.binder.wall.end.x,y2:this.binder.wall.end.y,"stroke-width":this.wallSize,stroke:"#19ab7f"}),t=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.start.x,cy:this.binder.wall.start.y,r:this.wallBinderBallsRadius}),o=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.end.x,cy:this.binder.wall.end.y,r:this.wallBinderBallsRadius});this.binder.graph=this.qSVG.create("none","g"),this.binder.graph.append(e),this.binder.graph.append(t),this.binder.graph.append(o),this.boxBind.current.appendChild(this.binder.graph),this.binder.type="segment",this.cursor("pointer")}}else this.binder&&"segment"===this.binder.type&&(this.removeBinder(),this.cursor("default"),this.rib())}}function ou(e,t,i){let o;if(o=this.editor.nearWall(this.snap,t)){let t=o.wall;this.binder?e&&this.inWallonWallObjectForceJoinToWall(t,o,this.snap,this.binder):(this.binder=i(t,o),this.setWallItemObjOriginalWidth(this.binder),this.binder.angle=this.inWallonWallObjectBinderAngleCalculation(t,this.snap,this.binder),$t(this.binder,t),this.checkPreviousFloorplanItemBinderLogic())}else this.removeBinder(),this.previousFloorplanItemBinder=null}function nu(e){return null===e||e===this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber?this.WALLS:this.floorplanFloorsData.find((t=>t.floorNumber===e)).wallData}function su(e,t,i,o,n,s,a,r,l){if(this.snap=this.calcul_snap(e,this.grid_snap),this.binder){if(t){if("floorFree"===this.binder.family&&!this.floorFreeObjectPositionValidation(this.snap,this.getBinderCreationFloorWalls(i),this.binder.size/2,this.binder.thick/2,this.binder.angle))return;this.binder.x=this.snap.x,this.binder.y=this.snap.y,this.binder.update(this)}}else this.binder=new Bc(o,this.getObjectClass(n),n,{x:this.snap.x,y:this.snap.y},0,0,s,"normal",a,r,l,this),this.binder.update(this),this.boxBind.current.appendChild(this.binder.graph);this.cursor("pointer")}function au(e){console.log("Angle",e.angle),console.log("Angle sign",e.angleSign),this.removeWindowRotationAxisDirectionBinder();const t=this.createWindowRotationSvg(e,e.additionalParams.curvePoints,e.additionalParams.rotationDirection);this.windowRotationAxisDirectionGraph=t.svgGroupElement,this.boxBind.current.appendChild(this.windowRotationAxisDirectionGraph),this.windowRotationAxisDirectionGraph.appendChild(t.curveArrowPath)}function ru(e){const t=e.additionalParams.cameraDistance;this.removeCameraCoverageAreaBinder(),this.cameraCoverageAreaGraph=this.qSVG.create("none","g",{transform:`translate(${e.bbox.origin.x},${e.bbox.origin.y}) rotate(${e.angle+ue[e.type].coverage2DAreaOffsetAngleDeg+e.additionalParams.cameraRotationAngleYDeg},0,0) scale(1,1)`});const i=0,o=0,n=t/Math.cos(f(e.additionalParams.cameraHorizontalFOVAngleDeg/2)),s=Jt(i,o,n,-e.additionalParams.cameraHorizontalFOVAngleDeg/2),a=Jt(i,o,n,e.additionalParams.cameraHorizontalFOVAngleDeg/2),r=["M",i,o,"L",s.x,s.y,"L",a.x,a.y,"Z"].join(" ");this.cameraCoverageAreaGraph.appendChild(this.qSVG.create("none","path",{d:r,fill:"url(#cameraCoverageGradient)",stroke:"#333"})),document.getElementById("cameraCoverageGradient").setAttribute("y2",-t),this.boxBind.current.appendChild(this.cameraCoverageAreaGraph)}function lu(e){this.removePresenceAreaBinder();const t=e.additionalParams.presenceAreaRotation;this.presenceAreaGraph=this.qSVG.create("none","g",{transform:`translate(${e.x},${e.y}) rotate(${t},0,0) scale(1,1)`});const i=e.additionalParams.presenceAreaWidth,o=["M",-i/2,-e.additionalParams.presenceAreaHeight,"H",i/2,"V",0,"H",-i/2,"Z"].join(" ");this.presenceAreaGraph.appendChild(this.qSVG.create("none","path",{d:o,fill:"rgba(0, 128, 255, 0.7)",opacity:.7,stroke:"#333"})),this.boxBind.current.appendChild(this.presenceAreaGraph)}function hu(){"block"===this.layerList.current.style.display?(this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode"):(this.hideSubItems(),this.razButton(),console.log("Show layer list"),at(this.layerList.current,this.othersTimeout,(()=>this.layersListOptionsRef.current.onLayersListDropdownOpenActions()),"block",!1),this.layersListArrowRef.current.classList.add("down"),this.layerMode.current.classList.add("btn-success"),this.foncButton("layer_mode"),this.boxInfo.current.innerHTML="",this.modeOption=void 0),this.drawingModeSwitchRestoreActions()}function cu(){rt(this.layerList.current,this.othersTimeout,null,!1),this.layersListArrowRef.current.classList.remove("down")}function du(){"room_mode"!==this.mode&&(this.cursor("pointer"),d()?this.boxInfo.current.innerHTML="Touch room which you want to configure":this.boxInfo.current.innerHTML="Configure rooms",this.drawingModeSwitchRestoreActions(),this.boxUnconnectedWallNodes&&this.drawUnconnectedWallNodesHelper(),this.foncButton("room_mode"))}function pu(){"select_mode"!==this.mode&&(this.boxInfo.current.innerHTML="Select mode",this.drawingModeSwitchRestoreActions(),this.foncButton("select_mode"))}function mu(){"none"!==this.uploadImageFloorplanShowRef.current.style.display?at(this.boxFloorplanImage.current,this.othersTimeout,(()=>{at(this.uploadImageFloorplanHideRef.current,0,null,"inline",!1),rt(this.uploadImageFloorplanShowRef.current,0,null,!1),this.uploadFloorplanImageStatusContainerRef.current.title="Hide floorplan image"}),"inline",!1):(console.log("Sakrij floorplan image"),rt(this.boxFloorplanImage.current,this.othersTimeout,(()=>{at(this.uploadImageFloorplanShowRef.current,0,null,"inline",!1),rt(this.uploadImageFloorplanHideRef.current,0,null,!1),this.uploadFloorplanImageStatusContainerRef.current.title="Show floorplan image"}),!1))}function uu(){("upload_floorplan_image_mode"!==this.mode||"upload_floorplan_image_mode"===this.mode&&!this.getActiveRightBox())&&(this.drawingModeSwitchRestoreActions(),this.hideSubItems(),this.floorplanImageTools.current.setRightBoxAsActive(),this.foncButton("upload_floorplan_image_mode"),this.cursor("default"),this.boxInfo.current.innerHTML="Upload floorplan image")}function gu(){"layer_mode"===this.mode&&"block"===this.layerList.current.style.display?this.exitLayerMode():(this.hideActiveRightBox(),this.removeSelectedBinder(),this.leftPanel2DExtendedChoicePartRef.current.close(),"upload_floorplan_image_mode"!==this.mode&&"floorplan_image_scaling"!==this.mode&&"floorplan_image_translation"!==this.mode||(this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove()))}function fu(){this.lineMode&&this.lineMode.current.classList.contains("btn-success")&&rt(this.wallOptionsContainer.current,this.othersTimeout,null,!1),new Array(this.selectMode,this.lineMode,this.roomMode,this.uploadFloorplanImageMode,this.layerMode).filter((e=>!!e)).forEach((e=>{e.current.classList.remove("btn-success"),e.current.classList.add("btn-default")})),this.panelDrawingOptions2D.filter((e=>e.panelButton2DRef&&e.panelButton2DRef.current)).forEach((e=>{e.panelButton2DRef.current.classList.remove("btn-success"),e.panelButton2DRef.current.classList.add("btn-default"),e.mainComponentSelectedItemPropertyName&&!e.isFixedSelectedTypeValue&&(this[e.mainComponentSelectedItemPropertyName]=null)})),this.floorplanItemsSelectionBoxRef&&this.floorplanItemsSelectionBoxRef.current.closeFloorplanItemsSelectionBox()}function bu(e,t){if("dont_save"!==t&&this.save(!1,!1),console.log("Option: "+t),"layer_mode"!==e){let i;switch("upload_floorplan_image_mode"!==e&&this.hideSubItems(),this.razButton(),e){case"select_mode":i=this.selectMode;break;case"line_mode":i=this.lineMode,at(this.wallOptionsContainer.current,this.othersTimeout,null,"flex",!1);break;case"room_mode":i=this.roomMode;break;case"upload_floorplan_image_mode":i=this.uploadFloorplanImageMode;break;default:{const o=this.panelDrawingOptions2D.find((t=>t.drawingMode===e));o&&!o.view2DDisable&&(i=o.panelButton2DRef,o.panelOptionAdditionalOptionsData&&this.leftPanel2DExtendedChoicePartRef.current.setAndShowChoiceOptions(o.panelOptionAdditionalOptionsData,o.panelButton2DRef),"open_selection_box"===t&&o.mainComponentSelectedItemPropertyName&&!o.fixedSelectedTypeValue&&this.floorplanItemsSelectionBoxRef.current.openFloorplanItemsSelectionBox(this.getFloorplanItemSelectionData(o.itemsClass),o.mainComponentSelectedItemPropertyName,this[o.mainComponentSelectedItemPropertyName]))}}i&&i.current&&(i.current.classList.remove("bnt-default"),i.current.classList.add("btn-success"))}console.log("New mode "+e),this.mode=e,this.modeOption=t,this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null)}const wu=(e,t,i)=>{if(i){const i=`GLAMOS_'Floorplan_${(new Date).getDate().toString().padStart(2,"0")}_${((new Date).getMonth()+1).toString().padStart(2,"0")}_${(new Date).getFullYear()}`;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob){const t=e.msToBlob();navigator.msSaveOrOpenBlob(t,i)}else{((e,t)=>{let i=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),o=document.createElement("a");o.setAttribute("download",t),o.setAttribute("href",e),o.setAttribute("target","_blank"),o.dispatchEvent(i)})(e.toDataURL("image/png"),i)}t(!0)}else t(e.toDataURL("image/png"))};function Cu(e,t,i,o,n,s,a,r,l){return new Promise(((h,c)=>{const d=r?0:60;if(i.drawImage(e,0,0),o.revokeObjectURL(n),a){let e=new Image;e.onload=()=>{i.drawImage(e,(l.width+2*d)/2-83,l.height+2*d-50,166,40),wu(t,h,s)},e.onerror=e=>{this.boxInfo.current.innerHTML="Ooops. An error happened during exporting to png.",c(e)},e.src=Ke}else wu(t,h,s)}))}function xu(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new Promise(((a,l)=>{const h=(n,s)=>new Promise(((a,l)=>{n.style.width="",n.style.height="";const h=i?0:60;n.setAttribute("viewBox",s.minX-h+" "+(s.minY-h)+" "+(s.width+2*h)+" "+(s.height+2*h)),n.setAttribute("width",s.width+2*h),n.setAttribute("height",s.height+2*h),o||(n.style.backgroundColor="#ffffff"),xt(n,n);let c=document.createElement("canvas");this.exportPngResolutionScale=4;const d=1e4;(s.width+2*h)*this.exportPngResolutionScale>d&&(this.exportPngResolutionScale=r(d/(s.width+2*h),2)),(s.height+2*h)*this.exportPngResolutionScale>d&&(this.exportPngResolutionScale=r(d/(s.height+2*h),2)),c.width=(s.width+2*h)*this.exportPngResolutionScale,c.height=(s.height+2*h)*this.exportPngResolutionScale,console.log("Canvas element"),console.log(c);let p=c.getContext("2d");p.scale(this.exportPngResolutionScale,this.exportPngResolutionScale);let m=(new XMLSerializer).serializeToString(n),u=window.URL||window.webkitURL||window,g=new Image,f=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),b=u.createObjectURL(f);g.onload=()=>{a(this.exportFloorplanPngOnLoadCallback(g,c,p,u,b,e,t,i,s))},g.onerror=e=>{this.boxInfo.current.innerHTML="Ooops. An error happened during exporting to png.",l(e)},g.src=b}));let c,d;if(s)c=s.svgElement,d=s.bboxCoords,h(c,d).then((e=>a(e))).catch((e=>l(e)));else{let e=n?this.previewSvgElementRef.current:this.linRef.current;if(c=e.cloneNode(!0),d=n?n.bboxCoords:this.getFloorplanWallsObjectsBBoxCoords(this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber),n)h(c,d).then((e=>a(e))).catch((e=>l(e)));else{this.exportPngShowGrid?c.querySelector(".boxGrid").style.opacity=1:c.querySelector(".boxGrid").remove(),this.exportPngShowMeasures?c.querySelector("#boxRib").style.display="inline":c.querySelector("#boxRib").remove(),c.querySelector("#boxScale").remove(),c.querySelector("#boxBind").remove(),c.querySelector("#boxUnconnectedWallNodes")&&c.querySelector("#boxUnconnectedWallNodes").remove(),c.querySelector("#boxFloorDrawingHelper").remove();const e=c.querySelector("#boxRoom"),t=c.querySelector("#room-textures-container"),i=e.querySelectorAll("path");let o=[];for(let n=0;n<i.length;n++){const e=i[n].getAttribute("fill");if(e&&e.startsWith("url(#room-texture_")){const i=e.split("#")[1].slice(0,-1),n=t.querySelector(`#${i}`),s=n&&n.querySelector("image");if(s){const e=s.getAttribute("href");let t=e.split("/");t=t[t.length-1].split(".")[0];const i=o.find((e=>e.imageName===t));i?i.imagePatternElements.push(s):o.push({imageName:t,imageHref:e,imagePatternElements:[s],dataURL:null})}}}o.length>0?o.forEach((e=>{const t=new Image;t.onload=()=>{const i=document.createElement("canvas");i.width=Ge[e.imageName].width,i.height=Ge[e.imageName].height;i.getContext("2d").drawImage(t,0,0,Ge[e.imageName].width,Ge[e.imageName].height),e.dataURL=i.toDataURL("image/png"),e.imagePatternElements.forEach((t=>{t.setAttribute("href",e.dataURL)})),o.find((e=>null===e.dataURL))||h(c,d).then((e=>a(e))).catch((e=>l(e)))},t.onerror=e=>console.log("Room pattern image loading error",e),this.isAddOnApp&&(t.crossOrigin="anonymous"),t.src=e.imageHref})):h(c,d).then((e=>a(e))).catch((e=>l(e)))}}}))}function _u(){this.HISTORY=[],this.HISTORY.index=0,window.localStorage.removeItem("history"),this.undoButton&&this.undoButton.current.classList.add("disabled"),this.redoButton&&this.redoButton.current.classList.add("disabled")}function yu(e,t){if("save"===e){if(this.saveNeeded){let e=this.boxPlanName.current.innerHTML;console.log("Box plan name"+e),""!==e&&"Draft(not saved)"!==e?this.determineBoxPlanNameValue("add_asterisk"):""!==e&&"*"===e[e.length-1]||(this.boxPlanName.current.innerHTML="Draft(not saved)",this.floorplan3DComponent.current&&this.floorplan3DComponent.current.determineSaveLabelName("add_asterisk"))}}else if("set_name"===e)this.boxPlanName.current.innerHTML=t;else if("remove_asterisk"===e){let e=this.boxPlanName.current.innerHTML;"Draft(not saved)"===e&&this.HISTORY.index<=1?this.boxPlanName.current.innerHTML="":"*"===e[e.length-1]&&(this.boxPlanName.current.innerHTML=e.slice(0,e.length-1),this.saveNeeded=!1),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.determineSaveLabelName("remove_asterisk")}else if("add_asterisk"===e){let e=this.boxPlanName.current.innerHTML;""===e?this.boxPlanName.current.innerHTML="Draft(not saved)":"Draft(not saved)"!==e&&"*"!==e[e.length-1]&&(this.boxPlanName.current.innerHTML=e+"*",this.saveNeeded=!0),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.determineSaveLabelName("add_asterisk")}}function Su(e,t){((e,t)=>{for(let i in e)null!=e[i].child&&(e[i].child=e.indexOf(e[i].child)),null!=e[i].parent&&(e[i].parent=e.indexOf(e[i].parent));for(let i=0;i<t.length;i++)t[i].up&&delete t[i].up,t[i].down&&delete t[i].down})(this.WALLS,this.OBJDATA),console.log("OBJ DATA"),console.log(this.OBJDATA);let i={floorHeight:this.floorHeight,groundColor:this.groundColor,clockVisibility:this.clockVisibility,skyColorType:this.skyColorType,skyColor:this.skyColor,ambientLightIntensity:this.ambientLightIntensity,objData:this.OBJDATA,wallData:this.WALLS,roomData:this.ROOM,floorNumber:this.floorNumber,floorNote:this.floorNote,showRib:this.showRib,showGrid:this.showGrid,backgroundColor:this.backgroundColor};const o=JSON.stringify(Xt(i));let n=[this.HISTORY[this.HISTORY.index-1],this.lastSavedObject];for(let s=0;s<n.length;s++)n[s]&&(n[s]=JSON.parse(n[s]),n[s]=Xt(n[s]),n[s]=JSON.stringify(n[s]));this.saveNeeded=!!n[1]&&o!==n[1],this.determineBoxPlanNameValue(this.saveNeeded?"save":"remove_asterisk");return o!==n[0]?(t&&(this.boxInfo.current.innerHTML=""),e&&window.localStorage.removeItem("history"),this.HISTORY.index<this.HISTORY.length&&(this.HISTORY.splice(this.HISTORY.index,this.HISTORY.length-this.HISTORY.index),this.redoButton&&this.redoButton.current.classList.add("disabled")),c(i)||(console.log("Resetiraj history"),this.resetHistory()),this.HISTORY.push(JSON.stringify(i)),console.log("History IN SAVE:"),console.log(this.HISTORY),window.localStorage.setItem("history",JSON.stringify(this.HISTORY)),this.HISTORY.index++,this.HISTORY.index>1&&this.undoButton&&this.undoButton.current.classList.remove("disabled"),this.lastSavedObject||(this.lastSavedObject=this.HISTORY[this.HISTORY.length-1]),this.setWallsChildParentValues(this.WALLS),!0):(this.setWallsChildParentValues(this.WALLS),console.log("Ne spremaj duplicirani HISTORY"),!1)}function vu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.HISTORY.index,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=[];if(i)n=i;else{if(0===this.HISTORY.length&&!t)return!1;n=JSON.parse(window.localStorage.getItem("history")),n=JSON.parse(n[e])}this.WALLS=n.wallData,console.log(this.WALLS),this.setWallsChildParentValues(this.WALLS),this.ROOM=n.roomData,o||this.ROOM.length>0&&(this.roomIdCounter=Math.max(...this.ROOM.map((e=>e.id)))+1),this.editor.architect(this.WALLS),console.log("OBJ DATA IN LOAD"),console.log(this.OBJDATA);for(let s in this.OBJDATA)this.OBJDATA[s].graph.remove();this.OBJDATA=[];for(let s in n.objData){let e=n.objData[s];if("text"===e.class||this.panelDrawingOptions2D.find((t=>t.binderObjType===e.type))||this.panelDrawingOptions2D.find((t=>t.isTargetObjectMode(e.type)))){e.hinge||(e.hinge="normal");let t=this.createObj2DClassInstanceFromObj(e);if(this.OBJDATA.push(t),"onWall"===e.family||"inWall"===e.family){const i={x:t.x,y:t.y};let o;if(Object.hasOwn(e.additionalParams,"hideWithWall")||(o=this.editor.nearWall(i,this.WALLS),o?(this.inWallonWallObjectBinderJoinToWall(o.wall,o,i,t),console.log("Join wall obj without wall",o,t)):console.error("Wall obj without assigned wall")),0===e.limit.length)if(o=this.editor.rayCastingWall(i,!0,this.WALLS),o)t.limit=yt(o.equations.base,t.size,i),console.log("Set obj limit",t);else if(o=this.editor.nearWall(i,this.WALLS),o)this.inWallonWallObjectBinderJoinToWall(o.wall,o,i,t),console.log("Join obj to wall",t);else{if(!t.params.bindBox){console.log("Delete socle object without limit"),this.OBJDATA.pop();continue}console.log("Keep bind box object without limits")}}this.boxCarpentry.current.appendChild(this.OBJDATA[this.OBJDATA.length-1].graph),t.update(this),console.log("End object"),console.log(t)}else console.log("Obj filtered",e.type)}this.editor.showScaleBox(),this.rib()}function Du(e,t){this.floorplanFloorsPanelBoxRef.current.setSelectedFloorplanFloor(e,(()=>{this.resetHistory(),this.lastSavedObject=null,this.setFloorParametersValues(e),this.load(0,!1,e),this.save(!0,!1),this.lastSavedObject=this.HISTORY[this.HISTORY.length-1],!this.loadFloorplanDisableFloorCentering&&this.centerAndShowWholeFloor(!1),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this._map&&this.onMapContextLoadedCallback2D(this._map),Ct(this.boxFloorDrawingHelper.current),this.floorDrawingHelperOptionsRef.current.getCheckedStatus()&&this.drawUnderlyingFloorDrawingHelper(e),t&&t()}))}function Tu(){if(this.isFloorplanNoWalls()){const e=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();for(let t=0;t<this.floorplanFloorsData.length;t++){if((this.floorplanFloorsData[t].floorNumber===e.floorNumber?this.OBJDATA:this.floorplanFloorsData[t].objData).length>0)return!1}return!0}return!1}function ju(){const e=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();for(let t=0;t<this.floorplanFloorsData.length;t++){if((this.floorplanFloorsData[t].floorNumber===e.floorNumber?this.WALLS:this.floorplanFloorsData[t].wallData).filter((e=>!vt(e.start,e.end))).length>0)return!1}return!0}function Iu(e){let t=e.coordsInsideWithOrphans,i="M"+t[0].x+","+t[0].y;for(let o=1;o<t.length-1;o++)i=i+" L"+t[o].x+","+t[o].y;if(i+="Z",e.inside.length>0)for(let o=0;o<e.inside.length;o++){i=i+" M"+this.Rooms.polygons[e.inside[o]].coords[this.Rooms.polygons[e.inside[o]].coords.length-1].x+","+this.Rooms.polygons[e.inside[o]].coords[this.Rooms.polygons[e.inside[o]].coords.length-1].y;for(let t=this.Rooms.polygons[e.inside[o]].coords.length-2;t>-1;t--)i=i+" L"+this.Rooms.polygons[e.inside[o]].coords[t].x+","+this.Rooms.polygons[e.inside[o]].coords[t].y}return i}function Pu(e){let t=this.createRoomPath(e),i=this.qSVG.create(this.boxBind,"path",{id:"roomSelected",d:t,fill:"#c9c14c","fill-opacity":.5,stroke:"#c9c14c","fill-rule":"evenodd","stroke-width":3});return i.type="room",i.realRoomArea=e.realRoomArea,i.id=e.id,i}function Ou(){this.selectedBinder&&(this.selectedBinder.graph?this.selectedBinder.graph.remove():this.selectedBinder.remove(),this.selectedBinder.obj&&(this.isFloorplanItemClassMember(this.selectedBinder.obj.type,"window")?this.removeWindowRotationAxisDirectionBinder():this.isFloorplanItemClassMember(this.selectedBinder.obj.type,"camera")?this.removeCameraCoverageAreaBinder():"presence_area"===this.selectedBinder.obj.class&&this.removePresenceAreaBinder()),this.selectedBinder=null)}function ku(){this.binder&&(this.binder.graph?this.binder.graph.remove():this.binder.remove(),this.binder=null)}function Fu(){this.windowRotationAxisDirectionGraph&&(this.windowRotationAxisDirectionGraph.remove(),this.windowRotationAxisDirectionGraph=null)}function Mu(){this.cameraCoverageAreaGraph&&(this.cameraCoverageAreaGraph.remove(),this.cameraCoverageAreaGraph=null)}function Au(){this.presenceAreaGraph&&(this.presenceAreaGraph.remove(),this.presenceAreaGraph=null)}function Ru(){console.log("Hide all size"),Ct(this.boxBind.current),this.sizeText=[],this.showAllSizeStatus=0}function Lu(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log("In wall rib pozvan"),t||Ct(this.boxRib.current);let i,o=[];o.push([]),o.push([]);let n,s=e.angle*(180/Math.PI),a=this.editor.objFromWall(e);o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[0],distance:0}),o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[1],distance:0});for(let r in a)n=a[r],n.up=[this.qSVG.nearPointOnEquation(e.equations.up,n.limit[0]),this.qSVG.nearPointOnEquation(e.equations.up,n.limit[1])],n.down=[this.qSVG.nearPointOnEquation(e.equations.down,n.limit[0]),this.qSVG.nearPointOnEquation(e.equations.down,n.limit[1])],i=Bt(e.coords[0],n.up[0])/this.meter,o[0].push({wall:n,crossObj:r,side:"up",coords:n.up[0],distance:i.toFixed(2)}),i=Bt(e.coords[0],n.up[1])/this.meter,o[0].push({wall:n,crossObj:r,side:"up",coords:n.up[1],distance:i.toFixed(2)}),i=Bt(e.coords[1],n.down[0])/this.meter,o[1].push({wall:n,crossObj:r,side:"down",coords:n.down[0],distance:i.toFixed(2)}),i=Bt(e.coords[1],n.down[1])/this.meter,o[1].push({wall:n,crossObj:r,side:"down",coords:n.down[1],distance:i.toFixed(2)});i=Bt(e.coords[0],e.coords[3])/this.meter,o[0].push({wall:n,crossObj:!1,side:"up",coords:e.coords[3],distance:i}),i=Bt(e.coords[1],e.coords[2])/this.meter,o[1].push({wall:n,crossObj:!1,side:"down",coords:e.coords[2],distance:i}),o[0].sort((function(e,t){return(e.distance-t.distance).toFixed(2)})),o[1].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let r in o)for(let e=1;e<o[r].length;e++){let t=!0,i=-5,n=Math.abs(o[r][e-1].distance-o[r][e].distance),a=s;if(t){"down"===o[r][e-1].side&&(i=10-i),(a>89||a<-89)&&(a-=180,i="down"===o[r][e-1].side?-5:10-i),this.sizeText[e]=document.createElementNS("http://www.w3.org/2000/svg","text");let t=this.qSVG.middle(o[r][e-1].coords.x,o[r][e-1].coords.y,o[r][e].coords.x,o[r][e].coords.y);this.sizeText[e].setAttributeNS(null,"x",t.x),this.sizeText[e].setAttributeNS(null,"y",t.y+i),this.sizeText[e].setAttributeNS(null,"text-anchor","middle"),this.sizeText[e].setAttributeNS(null,"font-family","system-ui"),this.sizeText[e].setAttributeNS(null,"pointer-events","none"),this.sizeText[e].setAttributeNS(null,"stroke","#ffffff"),this.sizeText[e].textContent=Et(n,this.isAddOnApp?this.measureSystemContext.userUnit:this.context.userUnit),this.sizeText[e].textContent<1?(this.sizeText[e].setAttributeNS(null,"font-size","0.8em"),this.sizeText[e].textContent=this.sizeText[e].textContent.substring(1,this.sizeText[e].textContent.length)):this.sizeText[e].setAttributeNS(null,"font-size","15px"),this.sizeText[e].setAttributeNS(null,"stroke-width","0.27px"),this.sizeText[e].setAttributeNS(null,"fill","#666666"),this.sizeText[e].setAttribute("transform","rotate("+a+" "+t.x+","+t.y+")"),this.boxRib.current.appendChild(this.sizeText[e])}}}function Bu(){let e,t,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=[];n.push([]),n.push([]);for(let s in this.WALLS)if(this.WALLS[s].equations.base){n[0].push([]),n[0][s].push({wallIndex:s,crossEdge:s,side:"up",coords:this.WALLS[s].coords[0],distance:0}),n[1].push([]),n[1][s].push({wallIndex:s,crossEdge:s,side:"down",coords:this.WALLS[s].coords[1],distance:0});for(let o in this.WALLS)s!==o&&this.WALLS[o].equations.base&&(i=Mt(this.WALLS[s].equations.base,this.WALLS[o].equations.base,"object"),this.qSVG.btwn(i.x,this.WALLS[s].start.x,this.WALLS[s].end.x,"round")&&this.qSVG.btwn(i.y,this.WALLS[s].start.y,this.WALLS[s].end.y,"round")&&(e=Mt(this.WALLS[s].equations.up,this.WALLS[o].equations.up,"object"),this.qSVG.btwn(e.x,this.WALLS[s].coords[0].x,this.WALLS[s].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[s].coords[0].y,this.WALLS[s].coords[3].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[0].x,this.WALLS[o].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[0].y,this.WALLS[o].coords[3].y,"round")&&(t=Bt(this.WALLS[s].coords[0],e)/this.meter,n[0][s].push({wallIndex:s,crossEdge:o,side:"up",coords:e,distance:t.toFixed(2)})),e=Mt(this.WALLS[s].equations.up,this.WALLS[o].equations.down,"object"),this.qSVG.btwn(e.x,this.WALLS[s].coords[0].x,this.WALLS[s].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[s].coords[0].y,this.WALLS[s].coords[3].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[1].x,this.WALLS[o].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[1].y,this.WALLS[o].coords[2].y,"round")&&(t=Bt(this.WALLS[s].coords[0],e)/this.meter,n[0][s].push({wallIndex:s,crossEdge:o,side:"up",coords:e,distance:t.toFixed(2)})),e=Mt(this.WALLS[s].equations.down,this.WALLS[o].equations.up,"object"),this.qSVG.btwn(e.x,this.WALLS[s].coords[1].x,this.WALLS[s].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[s].coords[1].y,this.WALLS[s].coords[2].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[0].x,this.WALLS[o].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[0].y,this.WALLS[o].coords[3].y,"round")&&(t=Bt(this.WALLS[s].coords[1],e)/this.meter,n[1][s].push({wallIndex:s,crossEdge:o,side:"down",coords:e,distance:t.toFixed(2)})),e=Mt(this.WALLS[s].equations.down,this.WALLS[o].equations.down,"object"),this.qSVG.btwn(e.x,this.WALLS[s].coords[1].x,this.WALLS[s].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[s].coords[1].y,this.WALLS[s].coords[2].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[1].x,this.WALLS[o].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[1].y,this.WALLS[o].coords[2].y,"round")&&(t=Bt(this.WALLS[s].coords[1],e)/this.meter,n[1][s].push({wallIndex:s,crossEdge:o,side:"down",coords:e,distance:t.toFixed(2)}))));t=Bt(this.WALLS[s].coords[0],this.WALLS[s].coords[3])/this.meter,n[0][s].push({wallIndex:s,crossEdge:s,side:"up",coords:this.WALLS[s].coords[3],distance:t.toFixed(2)}),t=Bt(this.WALLS[s].coords[1],this.WALLS[s].coords[2])/this.meter,n[1][s].push({wallIndex:s,crossEdge:s,side:"down",coords:this.WALLS[s].coords[2],distance:t.toFixed(2)})}for(let s in n[0])n[0][s].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let s in n[1])n[1][s].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));this.sizeText=[],5===o&&Ct(this.boxRib.current);for(let s in n)for(let e in n[s])for(let t=1;t<n[s][e].length;t++)if(n[s][e][t-1].wallIndex===n[s][e][t].wallIndex){let i=!0,a=Math.abs(n[s][e][t-1].distance-n[s][e][t].distance);if(a<.15&&(i=!1),i&&n[s][e][t-1].crossEdge===n[s][e][t].crossEdge&&n[s][e][t].crossEdge!==n[s][e][t].wallIndex&&(i=!1),i&&n[s][e].length>2&&1===t){let o=[];for(let i=0;i<4;i++)o.push({x:this.WALLS[n[s][e][t].crossEdge].coords[i].x,y:this.WALLS[n[s][e][t].crossEdge].coords[i].y});kt(n[s][e][0].coords,o)&&(i=!1)}if(i&&n[s][e].length>2&&t===n[s][e].length-1){let o=[];for(let i=0;i<4;i++)o.push({x:this.WALLS[n[s][e][t-1].crossEdge].coords[i].x,y:this.WALLS[n[s][e][t-1].crossEdge].coords[i].y});kt(n[s][e][n[s][e].length-1].coords,o)&&(i=!1)}if(i){let i=this.WALLS[n[s][e][t].wallIndex].angle*(180/Math.PI),r=-o;"down"===n[s][e][t-1].side&&(r=10-r),(i>90||i<-89)&&(i-=180,r="down"===n[s][e][t-1].side?-o:10-r),this.sizeText[t]=document.createElementNS("http://www.w3.org/2000/svg","text");let l=this.qSVG.middle(n[s][e][t-1].coords.x,n[s][e][t-1].coords.y,n[s][e][t].coords.x,n[s][e][t].coords.y);this.sizeText[t].setAttributeNS(null,"x",l.x),this.sizeText[t].setAttributeNS(null,"y",l.y+r),this.sizeText[t].setAttributeNS(null,"text-anchor","middle"),this.sizeText[t].setAttributeNS(null,"font-family","roboto"),this.sizeText[t].setAttributeNS(null,"stroke","#ffffff"),this.sizeText[t].textContent=Et(a,this.isAddOnApp?this.measureSystemContext.userUnit:this.context.userUnit),this.sizeText[t].textContent<1?(this.sizeText[t].setAttributeNS(null,"font-size","0.73em"),this.sizeText[t].textContent=this.sizeText[t].textContent.substring(1,this.sizeText[t].textContent.length)):this.sizeText[t].setAttributeNS(null,"font-size","0.9em"),this.sizeText[t].setAttributeNS(null,"stroke-width","0.2px"),this.sizeText[t].setAttributeNS(null,"fill","#555555"),this.sizeText[t].setAttribute("transform","rotate("+i+" "+l.x+","+l.y+")"),this.boxRib.current.appendChild(this.sizeText[t])}}}function Wu(){this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null)}function Nu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],o={},n={};o.distance=t,this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null),this.lineIntersectionP=this.qSVG.create(this.boxBind,"path",{d:"",stroke:"transparent","stroke-width":.5,"stroke-opacity":"1",fill:"none"});for(let s=0;s<this.WALLS.length;s++)if(-1===i.indexOf(this.WALLS[s])){let t,i=this.WALLS[s].start.x,a=this.WALLS[s].start.y,r=this.WALLS[s].end.x,l=this.WALLS[s].end.y;0===Math.abs(l-a)?(n.C="v",n.D=i,n.E="h",n.F=a,n.G="v",n.H=r,n.I="h",n.J=l):0===Math.abs(r-i)?(n.C="h",n.D=a,n.E="v",n.F=i,n.G="h",n.H=l,n.I="v",n.J=r):(n.C=(i-r)/(l-a),n.D=a-i*n.C,n.E=(l-a)/(r-i),n.F=a-i*n.E,n.G=(i-r)/(l-a),n.H=l-r*n.C,n.I=(l-a)/(r-i),n.J=l-r*n.E),n.A=n.C,n.B=n.D,t=this.qSVG.nearPointOnEquation(n,e),t.distance<o.distance&&(o.distance=t.distance,o.node=s,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=1),n.A=n.E,n.B=n.F,t=this.qSVG.nearPointOnEquation(n,e),t.distance<o.distance&&(o.distance=t.distance,o.node=s,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=1),n.A=n.G,n.B=n.H,t=this.qSVG.nearPointOnEquation(n,e),t.distance<o.distance&&(o.distance=t.distance,o.node=s,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=2),n.A=n.I,n.B=n.J,t=this.qSVG.nearPointOnEquation(n,e),t.distance<o.distance&&(o.distance=t.distance,o.node=s,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=2)}return o.distance<t&&(2===o.way?(this.lineIntersectionP.setAttribute("d","M"+o.x1+","+o.y1+" L"+o.x2+","+o.y2+" L"+o.x+","+o.y),this.lineIntersectionP.setAttribute("stroke","#d7ac57")):(this.lineIntersectionP.setAttribute("d","M"+o.x2+","+o.y2+" L"+o.x1+","+o.y1+" L"+o.x+","+o.y),this.lineIntersectionP.setAttribute("stroke","#d7ac57")),{x:o.x,y:o.y,wall:this.WALLS[o.node],distance:o.distance})}function Vu(){let e=null!==this.selectedBinder.realRoomArea?this.selectedBinder.realRoomArea/(this.meter*this.meter):null;this.selectedBinder.setAttribute("fill","none"),this.selectedBinder.setAttribute("stroke","#ddf00a"),this.selectedBinder.setAttribute("stroke-width",7);const t=this.isAddOnApp?this.measureSystemContext.userUnit:this.context.userUnit;document.getElementsByClassName("size")[0].innerHTML=null!==e?zt(e,t,"square meter","square foot",this.roomSurfaceDecimalPrecision,!0,!0):"Cannot be determined";const i=this.ROOM.find((e=>e.id===parseInt(this.selectedBinder.id)));if(console.log("targetRoom"),console.log(i),this.selectedRoomId=i.id,i.surface){const e=zt(i.surface,t,"square meter","square foot",this.roomSurfaceDecimalPrecision);this.roomSurface.current.setValue(e),this.roomSurface.current.setInitialValue(e)}else this.roomSurface.current.setValue(""),this.roomSurface.current.setInitialValue("");let o=i.name;this.roomName.current.value=o,""!==i.name?this.roomNameSelectRef.current.setValue(o):this.roomNameSelectRef.current.setValue("None"),this.roomFloorParametersRef.current.setFloorParametersForRoom(i)}function Eu(e){const t=this.isAddOnApp?this.measureSystemContext.userUnit:this.context.userUnit,i=Et(e.thick/this.meter,t,"meter","metric"===t?"centimeter":"inch",this.wallWidthDecimalPrecision,!1,!1,!0),o=Et(Bt(e.start,e.end)/this.meter,t,"meter","feet",this.wallLengthDecimalPrecision);this.wallWidth.current.value=i,this.wallWidthValue.current.textContent=i,this.wallWidthNumberSliderInput.current.setNumberInputInitialValues(i),this.wallLengthValue.current.textContent=o,this.wallLength.current.setValue(o),this.wallLength.current.setInitialValue(o),this.wallMaterialRef.current.setSelectedWallMaterialData(e),this.wallAlwaysHideRef.current.setSelectWallAlwaysHideStatus(e,i),this.wallCustomHeightRef.current.setSelectedCustomWallHeightData(e)}function Hu(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("text"===t.class)n.render((0,a.jsx)(ca,{ref:this.activeItemRotationsRef,targetObj2DId:t.id,itemRotationValueRef:this.itemRotationValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemRotationsRef.current),n.render((0,a.jsx)(wr,{targetObj2DId:t.id,textItemFontSizeValueRef:this.textItemFontSizeValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemTextToolsRef.current),n.unmountComponentAtNode(this.freeItemDimensionsRef.current),n.unmountComponentAtNode(this.freeItemPositionsRef.current),n.unmountComponentAtNode(this.freeItemMirroredRef.current),n.unmountComponentAtNode(this.freeCameraCoverageOptionsContainerRef.current),n.unmountComponentAtNode(this.freeItemTypesSelectionBoxRef.current),n.unmountComponentAtNode(this.freeItemChangeTypeRef.current),n.unmountComponentAtNode(this.freeItemMaterialsRef.current);else{if(xe[t.type])n.unmountComponentAtNode(this.freeItemDimensionsRef.current),n.unmountComponentAtNode(this.freeItemPositionsRef.current),n.unmountComponentAtNode(this.freeItemRotationsRef.current),n.unmountComponentAtNode(this.freeItemMirroredRef.current),n.unmountComponentAtNode(this.freeItemMaterialsRef.current);else if(n.render((0,a.jsx)(ca,{ref:this.activeItemRotationsRef,targetObj2DId:t.id,itemRotationValueRef:this.itemRotationValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemRotationsRef.current),n.render((0,a.jsx)(na,{targetObj2DId:t.id,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemDimensionsRef.current),$.includes(this.getObjectItemType(t.type))?n.unmountComponentAtNode(this.freeItemPositionsRef.current):n.render((0,a.jsx)(la,{ref:this.activeItemPositionsRef,targetObj2DId:t.id,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemPositionsRef.current),this.floorplan3DComponent.current){const e=this.floorplan3DComponent.current.userInteractionCurrentController.selectedObject;this.freeItemMaterialsRef.current&&n.render((0,a.jsx)(La,{ref:this.freeItemMaterialsComponentRef,selectedItem:e,mainComponentThis:this,colorPickerBoxContainer:this.freeItemMaterialsRef.current,targetObj2DId:t.id},(new Date).getTime()),this.freeItemMaterialsRef.current)}else n.unmountComponentAtNode(this.freeItemMaterialsRef.current);""!==this.getObjectFolderName(t.type)?(n.render((0,a.jsx)(aa,{targetObj2DId:t.id,mainComponentThis:this},(new Date).getTime()),this.freeItemMirroredRef.current),n.render((0,a.jsx)(Ta,{targetObj2DId:t.id,selectedItemFolderName:this.getObjectFolderName(t.type),mainComponentThis:this},(new Date).getTime()),this.freeItemTypesSelectionBoxRef.current)):(n.unmountComponentAtNode(this.freeItemMirroredRef.current),n.unmountComponentAtNode(this.freeItemTypesSelectionBoxRef.current)),n.render((0,a.jsx)(ia,{api:e,targetObj2DId:t.id,setResponseError:this.setState.bind(this),mainComponentThis:this},(new Date).getTime()),this.freeItemChangeTypeRef.current),this.isFloorplanItemClassMember(t.type,"camera")?n.render((0,a.jsx)(Es,{ref:this.cameraCoverageOptionsActiveRef,cameraObj2DId:t.id,mainComponentThis:this},(new Date).getTime()),this.freeCameraCoverageOptionsContainerRef.current):n.unmountComponentAtNode(this.freeCameraCoverageOptionsContainerRef.current),"surface_area"===t.class?n.render((0,a.jsx)(cr,{api:e,targetObj2DId:t.id,setResponseError:this.setState.bind(this),restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeSurfaceAreaOptionsContainerRef.current):n.unmountComponentAtNode(this.freeSurfaceAreaOptionsContainerRef.current),n.unmountComponentAtNode(this.freeItemTextToolsRef.current)}}function zu(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xe[t.type])n.unmountComponentAtNode(this.wallItemDimensionsRef.current),n.unmountComponentAtNode(this.wallItemPositionsRef.current),n.unmountComponentAtNode(this.wallItemMirroredRef.current),n.unmountComponentAtNode(this.wallItemMaterialsRef.current);else if(n.render((0,a.jsx)(na,{targetObj2DId:t.id,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.wallItemDimensionsRef.current),$.includes(this.getObjectItemType(t.type))?n.unmountComponentAtNode(this.wallItemPositionsRef.current):n.render((0,a.jsx)(la,{ref:this.activeItemPositionsRef,targetObj2DId:t.id,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.wallItemPositionsRef.current),this.floorplan3DComponent.current){const e=this.floorplan3DComponent.current.userInteractionCurrentController.selectedObject;this.wallItemMaterialsRef.current&&n.render((0,a.jsx)(La,{ref:this.wallItemMaterialsComponentRef,selectedItem:e,mainComponentThis:this,colorPickerBoxContainer:this.wallItemMaterialsRef.current,targetObj2DId:t.id},(new Date).getTime()),this.wallItemMaterialsRef.current)}else n.unmountComponentAtNode(this.wallItemMaterialsRef.current);""!==this.getObjectFolderName(t.type)?(n.render((0,a.jsx)(aa,{targetObj2DId:t.id,mainComponentThis:this},(new Date).getTime()),this.wallItemMirroredRef.current),n.render((0,a.jsx)(Ta,{targetObj2DId:t.id,selectedItemFolderName:this.getObjectFolderName(t.type),mainComponentThis:this},(new Date).getTime()),this.wallItemTypesSelectionBoxRef.current)):(n.unmountComponentAtNode(this.wallItemMirroredRef.current),n.unmountComponentAtNode(this.wallItemTypesSelectionBoxRef.current)),n.render((0,a.jsx)(ia,{api:e,targetObj2DId:t.id,setResponseError:this.setState.bind(this),mainComponentThis:this},(new Date).getTime()),this.wallItemChangeTypeRef.current),this.isFloorplanItemClassMember(t.type,"window")&&ni(t.type)?n.render((0,a.jsx)(Pr,{ref:this.windowRotationOptionsRef,mainComponentThis:this,windowObj2DId:t.id},(new Date).getTime()),this.windowRotationOptionsContainerRef.current):n.unmountComponentAtNode(this.windowRotationOptionsContainerRef.current),this.isFloorplanItemClassMember(t.type,"camera")?n.render((0,a.jsx)(Es,{ref:this.cameraCoverageOptionsActiveRef,cameraObj2DId:t.id,mainComponentThis:this},(new Date).getTime()),this.wallCameraCoverageOptionsContainerRef.current):n.unmountComponentAtNode(this.wallCameraCoverageOptionsContainerRef.current),"surface_area"===t.class?n.render((0,a.jsx)(cr,{api:e,targetObj2DId:t.id,setResponseError:this.setState.bind(this),restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.wallSurfaceAreaOptionsContainerRef.current):n.unmountComponentAtNode(this.wallSurfaceAreaOptionsContainerRef.current),this.wallItemHideWithWallRef.current.setSelectedObjectData(t)}function Gu(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.render((0,a.jsx)(Ia,{ref:this.presenceAreaOptionsRef,presenceAreaObj2DId:e.id,restoreSelectedBinderCall:t,mainComponentThis:this},(new Date).getTime()),this.presenceAreaOptionsContainerRef.current)}function qu(e,t){e&&(window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("keydown",this.handleKeyDown,{capture:!0})),t&&(window.addEventListener("resize",this.handleWindowResize),window.addEventListener("keydown",this.handleKeyDown,{capture:!0}))}function Uu(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isFloorplanNoWalls())this.setShow3DStatus(!1,(()=>{!e&&n.unmountComponentAtNode(this.loadingComponentContainer.current),at(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout)}));else{this.hideActiveRightBox(),this.floorplanItemsSelectionBoxRef&&this.floorplanItemsSelectionBoxRef.current.closeFloorplanItemsSelectionBox();const t=()=>{window.removeEventListener("keydown",this.handleKeyDown,{capture:!0}),!0!==this.state.show3D?this.setShow3DStatus(!0,(()=>this.floorplan3DComponent.current.onDataLoadedCallback())):this.floorplan3DComponent.current.onDataLoadedCallback(),this.foncButton("select_mode"),this.boxInfo.current.innerHTML=""};e?n.render((0,a.jsx)(Ca,{}),this.loadingComponentContainer.current,(()=>t())):t()}}function Yu(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.panel.current.querySelectorAll(".panel-icon-button-container");if(e===this.smallScreenMinimizedPanelSize){this.undoRedoContainer&&this.undoRedoContainer.current.classList.add("minimized");const e=this.panel.current.querySelectorAll(".panel-action-button > button");for(let t of e)t.classList.add("small-screen-minimized"),t.classList.add("floorplan")}else{this.undoRedoContainer&&this.undoRedoContainer.current.classList.remove("minimized");const e=this.panel.current.querySelectorAll(".panel-action-button > button");for(let t of e)t.classList.remove("small-screen-minimized"),t.classList.remove("floorplan")}this.panel.current.classList.add("panel-small-screen-minimized");const o=this.panelControl.current.querySelector(".panel-control-arrow-container");o.title="Show panel",this.boxPlanName.current.style.paddingLeft=`${e+30}px`,this.boxInfo.current.style.left=`${e+30}px`,this.panel.current.style.width=`${e}px`,this.floorplanItemsSelectionBoxContainerRef&&(this.floorplanItemsSelectionBoxContainerRef.current.style.width=`${e}px`,this.floorplanItemsSelectionBoxContainerRef.current.style.transform=`translateX(${e}px)`,this.floorplanItemsSelectionBoxContainerRef.current.classList.add("minimized")),t&&(this.panelControl.current.style.transform=`translateX(${e}px)`),o.children[0].style.transform="rotate(180deg)",this.panel.current.addEventListener("transitionend",(()=>{this.panel.current.classList.add("panel-centered");for(let e of i)e.classList.add("panel-icon-button-no-text"),e.classList.remove("fully");this.layersListArrowRef.current.classList.add("hidden");const t=this.panel.current.querySelectorAll(".checked-input-container");for(let e of t)e.classList.add("checked-input-container-no-label");const o=document.querySelectorAll(".left-panel-switch-option-container.panel2D");for(let e of o)e.classList.add("hide-label");const n=document.querySelectorAll(".panel-2d-switch-container");for(let e of n)e.classList.add("hide-label");const s=document.querySelector(".color-picker-input-container");s&&s.classList.add("panel2d-minimized"),this.wallOptionsContainer&&(this.wallOptionsContainer.current.classList.add("panel-minimized"),this.wallOptionsContainer.current.classList.remove("small-screen-maximized")),this.uploadImageFloorplanSettingsIconRef.current.classList.add("hide"),e===this.smallScreenMinimizedPanelSize?this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="wrap":this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="nowrap",e===this.smallScreenMinimizedPanelSize?this.uploadFloorplanImageStatusContainerRef.current.classList.add("small-screen-minimized"):this.uploadFloorplanImageStatusContainerRef.current.classList.remove("small-screen-minimized"),this.floorplanFloorsPanelBoxContainerRef.current.classList.add("hide-labels")}),{once:!0}),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.hidePanel()}function Xu(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.panel.current.querySelectorAll(".panel-icon-button-container");this.isSmallScreen()&&this.hideRightBox(),this.panel.current.classList.remove("panel-small-screen-minimized");const o=this.panel.current.querySelectorAll(".panel-action-button > button");for(let s of o)s.classList.remove("small-screen-minimized"),s.classList.remove("floorplan");const n=this.panelControl.current.querySelector(".panel-control-arrow-container");n.title="Hide panel",this.boxPlanName.current.style.paddingLeft=`${e+10}px`,this.boxInfo.current.style.left=`${e+30}px`,this.panel.current.style.width=`${e}px`,this.panel.current.classList.remove("panel-centered"),this.floorplanItemsSelectionBoxContainerRef&&(this.floorplanItemsSelectionBoxContainerRef.current.style.width=`${e}px`,this.floorplanItemsSelectionBoxContainerRef.current.style.transform=`translateX(${e}px)`,this.floorplanItemsSelectionBoxContainerRef.current.classList.remove("minimized")),t&&(this.panelControl.current.style.transform=`translateX(${e}px)`),n.children[0].style.transform="rotate(0deg)",this.panel.current.addEventListener("transitionend",(()=>{for(let e of i)e.classList.remove("panel-icon-button-no-text"),e.classList.add("fully");this.undoRedoContainer&&this.undoRedoContainer.current.classList.remove("minimized"),this.layersListArrowRef.current.classList.remove("hidden");const t=this.panel.current.querySelectorAll(".checked-input-container");for(let e of t)e.classList.remove("checked-input-container-no-label");const o=document.querySelectorAll(".left-panel-switch-option-container.panel2D");for(let e of o)e.classList.remove("hide-label");const n=document.querySelectorAll(".panel-2d-switch-container");for(let e of n)e.classList.remove("hide-label");const s=document.querySelector(".color-picker-input-container");s&&s.classList.remove("panel2d-minimized"),this.wallOptionsContainer&&(this.wallOptionsContainer.current.classList.remove("panel-minimized"),e===this.smallScreenMaximizedPanelSize?this.wallOptionsContainer.current.classList.add("small-screen-maximized"):this.wallOptionsContainer.current.classList.remove("small-screen-maximized")),e!==this.smallScreenMaximizedPanelSize&&this.uploadImageFloorplanSettingsIconRef.current.classList.remove("hide"),this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="nowrap",this.uploadFloorplanImageStatusContainerRef.current.classList.remove("small-screen-minimized"),this.floorplanFloorsPanelBoxContainerRef.current.classList.remove("hide-labels")}),{once:!0})}function Ku(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isPanelMaximized()){const t=this.isSmallScreen()?this.smallScreenMinimizedPanelSize:this.bigScreenMinimizedPanelSize;this.minimizePanel(t,e)}else{const t=this.isSmallScreen()?this.smallScreenMaximizedPanelSize:this.bigScreenMaximizedPanelSize;this.maximizePanel(t,e)}}function Zu(e){this.resetSelectedObjectMaterial(),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.removeCameraCoverageArea3DMesh(),this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",e.current.setRightBoxAsInactive()}function $u(){this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.wallItemToolsRef.current.setRightBoxAsInactive(),this.rib(),this.resetSelectedObjectMaterial(),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.removeCameraCoverageArea3DMesh()}function Ju(){this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.wallTools.current.setRightBoxAsInactive(),this.wallMaterialRef.current.resetWallMaterialData(),this.wallAlwaysHideRef.current.resetWallAlwaysHideStatus(),this.wallCustomHeightRef.current.resetCustomWallHeightData()}function Qu(){this.floorParameters.current.setRightBoxAsInactive()}function eg(){let e=this.linRef.current.getBoundingClientRect();if(this.taille_h!==e.height||this.taille_w!==e.width){console.log("Window resize"),this.taille_w=e.width,this.taille_h=e.height,this.offset={left:e.left,top:e.top,scrollY:window.scrollY},this.determineMaxZoomInLevel(),this.showHideLeftRightBoxes(),this.handleRightControlsBoxResize(),this.width_viewbox=this.taille_w,this.height_viewbox=this.taille_h,this.ratio_viewbox=this.height_viewbox/this.width_viewbox,this.zoomFactor=1,this.zoom=this.defaultZoomLevel,this.centerAndShowFloorplanAndUploadedFloorplanImage(!0);const t=this.zoom-this.defaultZoomLevel;this.zoomToSpecificLevel(t>0?"zoomin":"zoomout",Math.abs(t)),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes(),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onWindowResize()}}function tg(e,t,i,o,n){("Enter"===e.key||"INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName)&&(console.log("Key down"),e.repeat?n&&n():e.altKey||e.ctrlKey||e.metaKey||e.shiftKey?!e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||o&&o():(console.log("Single key"),"ArrowLeft"===e.key?this.onZoomButonClick("zoomleft"):"ArrowUp"===e.key?this.onZoomButonClick("zoomtop"):"ArrowRight"===e.key?this.onZoomButonClick("zoomright"):"ArrowDown"===e.key?this.onZoomButonClick("zoombottom"):"+"===e.key?this.onZoomButonClick("zoomin"):"-"===e.key?this.onZoomButonClick("zoomout"):"Escape"===e.key?(this.action=0,"select_mode"!==this.mode&&t&&t(),console.log("Escape pressed"),this.hideActiveRightBox(),this.removeSelectedBinder()):"Delete"===e.key?this.handleActiveRightBoxDeleteKeyPress():i&&i()))}function ig(e){return()=>{this.removeSelectedBinder(),this.showMapLayer2DInputRef.current.getCheckedStatus()?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1,(()=>this.layersListOptionsRef.current.updateBackgroundColor(this.backgroundColor))),n.unmountComponentAtNode(this.mapLayer2DContainerRef.current)):this.isFloorplanNoWalls()?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),at(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout)):e.get.call(this,this.isAddOnApp?`/klet3d/entity/${this.getFloorplanID()}/${this.props.licenseKey}`:`/klet3d/plans?planId=${this.getFloorplanID()}`,(t=>{t&&t.length>0?m(this.getFloorplanGpsLatitude(t[0].plan_general))&&m(this.getFloorplanGpsLongitude(t[0].plan_general))?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),this.onFloorplanGpsCoordsClick(e)()):(this.floorplanGeneral=t[0].plan_general,this.layersListOptionsRef.current.updateBackgroundColor(null,!0),this.showMapLayer2DInputRef.current.setCheckedStatus(!0),n.render((0,a.jsx)(sr,{ref:this.showMapLayer2D3DRef,api:e,is3D:!1,center:[16.8557,44.0462],floorplanGpsCoords:[this.getFloorplanGpsLongitude(t[0].plan_general),this.getFloorplanGpsLatitude(t[0].plan_general)],onMapContextLoadedCallback:this.onMapContextLoadedCallback2D,preserveDrawingBuffer:!1,mapStylesChangeRef:this.mapStylesChangeRef,mainComponentThis:this}),this.mapLayer2DContainerRef.current)):(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),this.boxInfo.current.innerHTML="There is no floorplan with specified id")}))}}function og(){this.roomTools.current.setRightBoxAsInactive(),this.roomNameDropdownMenu.current.classList.remove("show"),this.boxUnconnectedWallNodes&&Ct(this.boxUnconnectedWallNodes.current),this.boxInfo.current.innerHTML="Select mode",this.foncButton("select_mode")}function ng(e){this.zoom_maker(e,!this.showMapLayer2D3DRef.current||"zoomin"!==e&&"zoomout"!==e?this.zoomXMove:this.zoomXMoveOnMapScaleFactor*this.zoomXMove,this.zoomXView)}function sg(e){return()=>{this.isFloorplanNoWalls()?at(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout):at(this.showFloorplanOnMapContainerRef.current,200,(()=>{n.render((0,a.jsx)(Ga,{api:e,floorplanID:this.getFloorplanID(),containerRef:this.showFloorplanOnMapContainerRef,setResponseError:this.setState.bind(this),mainComponentThis:this}),this.showFloorplanOnMapContainerRef.current)}),"block",!1)}}function ag(){const e=this.isAddOnApp?this.measureSystemContext.userUnit:this.context.userUnit;this.floorHeight=Ht(parseFloat(this.floorHeightInputRef.current.getValue()),e,"metric"===e?"centimeter":"inch","meter",!0)*this.meter}function rg(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.render((0,a.jsx)(Ca,{}),this.loadingComponentContainer.current,(()=>{this.resetHistory(),this.floorplanFloorsPanelBoxRef.current.setSelectedFloorplanFloor(e,(()=>{this.loadFloorplanFloor(e,(()=>{this.floorplan3DComponent.current&&this.floorplan3DComponent.current.floorplanFloorsPanelSelection3DRef.current.handleFloorplanFloor3DChange(e.floorNumber,t),n.unmountComponentAtNode(this.loadingComponentContainer.current)}))}))}))}function lg(e,t){const i=this.roomFloorParametersRef.current.roomFloorTexturesRepeatComponentRef.current.getValue(),o=this.ROOM.find((e=>e.id===this.selectedRoomId));o&&(this.editor.renderRoomPreviewTexture({...o,...t&&{floorTexture:t},...i>=0&&{floorTextureRepeatCount:i}}),this.updateSelectedRoomFill(t,i),o.floorTexture=t,this.save(!1,!0))}function hg(e){const t=this.roomFloorParametersRef.current.roomFloorTypesSelectionRef.current.getSelectedItem(),i=this.ROOM.find((e=>e.id===this.selectedRoomId));i&&(this.editor.renderRoomPreviewTexture({...i,...t&&{floorTexture:t},...e>=0&&{floorTextureRepeatCount:e}}),this.updateSelectedRoomFill(t,e),i.floorTextureRepeatCount=e,this.save(!1,!0))}function cg(e){const t=this.ROOM.find((e=>e.id===this.selectedRoomId));t&&(this.updateSelectedRoomFill(e,null),t.floorColor=e,this.save(!1,!0))}function dg(){this.ROOM.find((e=>e.id===this.selectedRoomId))&&(this.updateSelectedRoomFill("none",null),this.save(!1,!0))}function pg(){this.ROOM.find((e=>e.id===this.selectedRoomId))&&(this.updateSelectedRoomFill("none",null),this.save(!1,!0))}function mg(e,t,i,o){const n=this.panel.current.style.width.slice(0,-2);console.log("Panel width "+n);let s,a=(n-this.offset.left)*t+i,r=e.minX-a,l=24*t+o,h=e.minY-l,c=this.taille_h*t+o-e.maxY,d=this.isSmallScreen()?null:this.getActiveRightBox();return s=d?(this.taille_w-this.offset.left-d.getRightBoxWidth())*t+i:(this.taille_w-this.offset.left)*t+i,{minX:r,maxX:s-e.maxX,minY:h,maxY:c}}function ug(e,t,i){return t.width_viewbox_clone=t.width_viewbox_clone-i*this.zoomXMove,t.zoomFactor_clone=t.width_viewbox_clone/this.taille_w,t.originX_viewbox_clone=t.originX_viewbox_clone+i*this.zoomXMove/2,t.originY_viewbox_clone=t.originY_viewbox_clone+i*(this.zoomXMove/2)*this.ratio_viewbox,this.getBoxDimensionsForCurrentZoom(e,t.zoomFactor_clone,t.originX_viewbox_clone,t.originY_viewbox_clone)}function gg(e,t,i,o,n){let s=!0;do{if(console.log("Do while "+i+" "+n+" "+JSON.stringify(t)+" params "+JSON.stringify(o)),-1===n){if(this.isOverMaxZoomOut(o.width_viewbox_clone,this.zoomXMove))break;s=t[i]<0}else{if(this.isOverMaxZoomIn(o.width_viewbox_clone,this.zoomXMove))break;let a={...o};s=(t=this.boxZoomSimulationSetZoomParameters(e,a,n))[i]>0}s&&(o.zoomLevelsNeeded=o.zoomLevelsNeeded+1*n,t=this.boxZoomSimulationSetZoomParameters(e,o,n))}while(s)}function fg(e,t,i){const o=this.showWholeBoxZoomOperations(e,t,i);this.width_viewbox=o.width_viewbox,this.height_viewbox=o.height_viewbox,this.originX_viewbox=o.originX_viewbox,this.originY_viewbox=o.originY_viewbox,this.zoomFactor=o.zoomFactor,this.zoom=o.zoom}function bg(e,t,i){this.originX_viewbox=e.x-this.width_viewbox/2,this.originY_viewbox=e.y-this.height_viewbox/2;const o=this.getBoxDimensionsForCurrentZoom(t,this.zoomFactor,this.originX_viewbox,this.originY_viewbox);if(o.minX<0){const e=this.panel.current.style.width.slice(0,-2);e-this.offset.left>this.taille_w/2&&(console.log("Upao u zastitu left panela"),this.originX_viewbox+=Math.floor(o.minX),o.minX=t.minX-((e-this.offset.left)*this.zoomFactor+this.originX_viewbox))}o.minY<0&&24>this.taille_w/2*this.ratio_viewbox&&(console.log("Upao u zastitu gornjeg dijela"),this.originY_viewbox+=Math.floor(o.minY),o.minY=t.minY-(24*this.zoomFactor+this.originY_viewbox)),this.showWholeBoxZoom(t,o,i)}function wg(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.getFloorplanWallsObjectsBBoxCoords(null!==t?t:this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber),o=mt(i);o&&this.centerAndShowWholeBoxOperations(o,i,e)}function Cg(e,t,i){let o={width_viewbox_clone:this.width_viewbox,originX_viewbox_clone:this.originX_viewbox,originY_viewbox_clone:this.originY_viewbox,zoomFactor_clone:this.zoomFactor,zoomLevelsNeeded:0};console.log("Box rib dimensions"),console.log(t);let n=[],s="zoomout",a=-1;for(let d in t)console.log(d),t[d]<0&&n.push({value:t[d],propertyName:d,isVertical:"minY"===d||"maxY"===d});if(console.log("Negative dimension"),console.log(JSON.stringify(n)),0===n.length){for(let e in t)n.push({value:t[e],propertyName:e,isVertical:"minY"===e||"maxY"===e});s="zoomin",a=1}let r=null,l=n.filter((e=>!e.isVertical));if(l.length>0){r=l[0];for(let e=1;e<l.length;e++)l[e].value<r.value&&(r=l[e])}let h=null,c=n.filter((e=>e.isVertical));if(c.length>0){h=c[0];for(let e=1;e<c.length;e++)c[e].value<h.value&&(h=c[e])}if(r&&!h)console.log("Samo horizontalni"),this.boxZoomSimulation(e,t,r.propertyName,o,a),!i&&this.zoomToSpecificLevel(s,Math.abs(o.zoomLevelsNeeded));else if(!r&&h)console.log("Samo vertikalni"),this.boxZoomSimulation(e,t,h.propertyName,o,a),!i&&this.zoomToSpecificLevel(s,Math.abs(o.zoomLevelsNeeded));else{console.log("Oba");let n=r.propertyName,l=h.propertyName;r.value>h.value&&(n=h.propertyName,l=r.propertyName),this.boxZoomSimulation(e,t,n,o,a),(t=this.getBoxDimensionsForCurrentZoom(e,o.zoomFactor_clone,o.originX_viewbox_clone,o.originY_viewbox_clone))[l]>0||(console.log("Zoom druge dimenzije"),"zoomin"===s&&(a=-1),this.boxZoomSimulation(e,t,l,o,a)),!i&&this.zoomToSpecificLevel(s,Math.abs(o.zoomLevelsNeeded))}return!i&&this.setSvgViewBoxes(),console.log("Levels needed "+o.zoomLevelsNeeded),{originX_viewbox:i?this.originX_viewbox:o.originX_viewbox_clone,originY_viewbox:i?this.originY_viewbox:o.originY_viewbox_clone,width_viewbox:i?this.width_viewbox:o.width_viewbox_clone,height_viewbox:i?this.height_viewbox:o.width_viewbox_clone*this.ratio_viewbox,zoomFactor:i?this.zoomFactor:o.zoomFactor_clone,zoom:this.zoom+o.zoomLevelsNeeded}}function xg(e,t){let i,o=t;if(console.log("Initial zoom level change "+t+"zzoom type "+e),"zoomout"===e){if(this.isOverMaxZoomOut(this.width_viewbox,t*this.zoomXMove))for(o--;this.isOverMaxZoomOut(this.width_viewbox,o*this.zoomXMove);)o--;i=o*this.zoomXMove,this.setZoomParameters("zoomout",i,!1)}else{if(this.isOverMaxZoomIn(this.width_viewbox,t*this.zoomXMove))for(o--;this.isOverMaxZoomIn(this.width_viewbox,o*this.zoomXMove);)o--;console.log("Zoom level change "+t),i=o*this.zoomXMove,this.setZoomParameters("zoomin",i,!1)}}function _g(e,t){let i;if("zoomin"===e){if(this.isOverMaxZoomIn(this.width_viewbox,t))return!1;this.width_viewbox-=t,i=this.taille_w/this.width_viewbox,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox+t/2,this.originY_viewbox=this.originY_viewbox+t/2*this.ratio_viewbox}else if("zoomout"===e){if(this.isOverMaxZoomOut(this.width_viewbox,t))return!1;this.width_viewbox+=t,i=this.taille_w/this.width_viewbox,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox-t/2,this.originY_viewbox=this.originY_viewbox-t/2*this.ratio_viewbox}return this.setScaleValueWidth(i),this.zoomFactor=this.width_viewbox/this.taille_w,!0}function yg(e,t,i){if(this.showMapLayer2DInputRef.current.getCheckedStatus())var o=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if("zoomout"===e||"zoomin"===e){if(!this.setZoomParameters(e,t,!0))return}else"zoomreset"===e?(this.showHideLeftRightBoxes(),this.centerAndShowFloorplanAndUploadedFloorplanImage(!1)):"zoomright"===e?this.originX_viewbox+=i:"zoomleft"===e?this.originX_viewbox-=i:"zoomtop"===e?this.originY_viewbox-=i:"zoombottom"===e?this.originY_viewbox+=i:"zoomdrag"===e&&(this.originX_viewbox-=t,this.originY_viewbox-=i);this.showMapLayer2DInputRef.current.getCheckedStatus()&&("zoomreset"===e||"zoomout"===e||"zoomin"===e?this.handleMapZoomChange(o):this.handleMapDrag(o)),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),"zoomreset"!==e&&this.setSvgViewBoxes()}function Sg(e){if(this.boxFloorplanImage.current.childNodes.length>0){const t=St([this.uploadFloorplanImageToolsRef.current.getFloorplanImageBoundingBox(),this.getFloorplanWallsObjectsBBoxCoords(this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber)||{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}]);this.centerAndShowWholeBoxOperations(t[0],t[1],e)}else this.centerAndShowWholeFloor(e)}function vg(e,t){const i=this.taille_w-e+t>(this.maxZoomInLevel-this.defaultZoomLevel)*this.zoomXMove;if(this.showMapLayer2DInputRef.current.getCheckedStatus()&&!i){const i=It(this._map.getCenter().lat,(e-t)/this.taille_w/this.meter);return console.log("New map layer zoom "+i),i>22}return i}function Dg(e,t){const i=e-this.taille_w+t>Math.abs(this.maxZoomOutLevel-this.defaultZoomLevel)*this.zoomXMove;if(this.showMapLayer2DInputRef.current.getCheckedStatus()&&!i){const i=It(this._map.getCenter().lat,(e+t)/this.taille_w/this.meter);return console.log("New map layer zoom "+i),i<0}return i}function Tg(){if(this.taille_w-(this.maxZoomInLevelDefaultValue-this.defaultZoomLevel)*this.zoomXMove<0){let e=this.maxZoomInLevelDefaultValue-1;for(;this.taille_w-(e-this.defaultZoomLevel)*this.zoomXMove<0;)e--;this.maxZoomInLevel=e}else if(this.taille_w-(this.maxZoomInLevelDefaultValue-this.defaultZoomLevel)*this.zoomXMove>0){let e=this.maxZoomInLevelDefaultValue;for(;this.taille_w-(e+1-this.defaultZoomLevel)*this.zoomXMove>0;)e++;this.maxZoomInLevel=e}else this.maxZoomInLevel=this.maxZoomInLevelDefaultValue}function jg(e){const t=this.isAddOnApp?this.measureSystemContext.userUnit:this.context.userUnit,i=this.meter*e;let o="metric"===t?i:g(this.imperialSystemSquareFeetSize,"feet","meter")*i;this.scaleVal.current.style.width=o+"px"}let Ig=!1;function Pg(e){if("layer_mode"!==this.mode&&!Ig&&e.shiftKey&&(this.snap=this.calcul_snap(e,this.grid_snap),this.pox=this.snap.xMouse,this.poy=this.snap.yMouse),Ig=e.shiftKey,this.roomModeBinderCreation(e),this.uploadFloorplanImageBinderCreation(e,!0),this.panelDrawingOptions2D.filter((e=>e.createBinderMethod)).forEach((t=>t.createBinderMethod(e,!0))),this.selectModeObj2DWallNodeWallSegmentBinderCreation(e),"line_mode"===this.mode&&(this.lineModeNearWallHleperBinderCreation(e),1===this.action)){this.snap=this.calcul_snap(e,this.grid_snap),this.x=this.snap.x,this.y=this.snap.y;let t=Bt(this.snap,{x:this.wallStartX,y:this.wallStartY})/this.meter,i=document.getElementById("line_construc");if(!i){let e;(e=this.editor.nearWallNode(this.snap,this.nearWallNodeRange))?(this.pox=e.x,this.poy=e.y,this.wallStartX=e.x,this.wallStartY=e.y):this.cursor("crosshair")}if(t>=this.minWallSizeMeter)if(i){if(document.getElementById("linetemp")&&document.getElementById("linetemp").setAttribute("x2",this.x),document.getElementById("linetemp")&&document.getElementById("linetemp").setAttribute("y2",this.y),e.altKey)this.wallEndConstruc=!1;else{let e,t;(e=this.intersection(this.snap,10))&&(this.x=e.x,this.y=e.y),(this.wallEndConstruc=this.editor.nearWall(this.snap,this.WALLS,this.nearWallConstrucRadius))?(this.x=this.wallEndConstruc.x,this.y=this.wallEndConstruc.y):this.cursor("crosshair"),(t=this.editor.nearWallNode(this.snap,this.nearWallNodeRange))?(this.binder||(this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.wallBinderPulsingBallRadius})),document.getElementById("line_construc")&&document.getElementById("line_construc").setAttribute("x2",t.x),document.getElementById("line_construc")&&document.getElementById("line_construc").setAttribute("y2",t.y),this.x=t.x,this.y=t.y,this.wallEndConstruc=!0,this.intersectionOff()):(this.removeBinder(),!1===this.wallEndConstruc&&this.cursor("crosshair"));let i=this.qSVG.angle(this.pox,this.poy,this.x,this.y),o=Math.abs(i.deg),n=i.deg/o,s=this.poy-n*this.pox,a=(this.y-s)/n;if(!this.binder){let e=!1;o<15&&Math.abs(this.poy-this.y)<25&&(this.y=this.poy,e=!0),o>75&&Math.abs(this.pox-this.x)<25&&(this.x=this.pox,e=!0),o<55&&o>35&&Math.abs(a-this.x)<20&&(this.x=a,e=!0),e?document.getElementById("line_construc")&&document.getElementById("line_construc").setAttribute("stroke-opacity",1):document.getElementById("line_construc")&&document.getElementById("line_construc").setAttribute("stroke-opacity",.7)}}console.log("Wall construct x:"+this.x+"y "+this.y),document.getElementById("line_construc")&&document.getElementById("line_construc").setAttribute("x2",this.x),document.getElementById("line_construc")&&document.getElementById("line_construc").setAttribute("y2",this.y);let t=this.qSVG.middle(this.wallStartX,this.wallStartY,this.x,this.y),i=this.qSVG.angle(this.wallStartX,this.wallStartY,this.x,this.y),o=Bt({x:this.wallStartX,y:this.wallStartY},{x:this.x,y:this.y})/this.meter;console.log("Value text "+o),this.lengthTemp||(this.lengthTemp=document.createElementNS("http://www.w3.org/2000/svg","text"),this.lengthTemp.setAttributeNS(null,"x",t.x),this.lengthTemp.setAttributeNS(null,"y",t.y-15),this.lengthTemp.setAttributeNS(null,"text-anchor","middle"),this.lengthTemp.setAttributeNS(null,"stroke","none"),this.lengthTemp.setAttributeNS(null,"stroke-width","0.6px"),this.lengthTemp.setAttributeNS(null,"fill","#777777"),this.lengthTemp.textContent=Et(o,this.context.userUnit,"meter","feet",2,!0,!0),this.boxBind.current.appendChild(this.lengthTemp)),this.lengthTemp&&o>.1&&(this.lengthTemp.setAttributeNS(null,"x",t.x),this.lengthTemp.setAttributeNS(null,"y",t.y-15),this.lengthTemp.setAttribute("transform","rotate("+i.deg+" "+t.x+","+t.y+")"),this.lengthTemp.textContent=Et(o,this.context.userUnit,"meter","feet",2,!0,!0)),this.lengthTemp&&o<.1&&(this.lengthTemp.textContent="")}else{let e=this.wallSize,t=this.selectedWallMaterial,i="";for(let o=0;o<this.WALLS.length;o++)if(this.WALLS[o].start.x===this.pox&&this.WALLS[o].start.y===this.poy||this.WALLS[o].end.x===this.pox&&this.WALLS[o].end.y===this.poy){e=this.WALLS[o].thick,t=this.WALLS[o].material,i=this.WALLS[o].wallId;break}this.qSVG.create(this.boxBind,"line",{id:"line_construc",x1:this.wallStartX,y1:this.wallStartY,x2:this.x,y2:this.y,"stroke-width":e,"stroke-linecap":"butt","stroke-opacity":.7,stroke:"#9fb2e2","data-wall-material":t,"data-previous-wall-id":i}),this.qSVG.create(this.boxBind,"line",{id:"linetemp",x1:this.pox,y1:this.poy,x2:this.x,y2:this.y,stroke:"transparent","stroke-width":.5,"stroke-opacity":"0.9"})}else console.log("Wall length condition remove"),console.log("Grid: "+this.grid),document.getElementById("linetemp")&&document.getElementById("linetemp").remove(),document.getElementById("line_construc")&&document.getElementById("line_construc").remove(),this.lengthTemp&&(this.lengthTemp.remove(),this.lengthTemp=null)}if("bind_mode"===this.mode){if(this.preventBindModeMouseMove)return;if(console.log("BIND MODE"),this.snap=this.calcul_snap(e,this.grid_snap),"node"===this.binder.type){console.log("Node binder wall details"),console.log(this.binder);let e=this.snap,t=!1,i=null;for(let o in this.wallListRun){let n=0;if(_t(this.wallListRun[o].end,this.binder.data)&&(Math.abs(this.wallListRun[o].start.x-this.snap.x)<20&&(e.x=this.wallListRun[o].start.x,t="H",n++),Math.abs(this.wallListRun[o].start.y-this.snap.y)<20&&(e.y=this.wallListRun[o].start.y,t="V",n++)),_t(this.wallListRun[o].start,this.binder.data)&&(Math.abs(this.wallListRun[o].end.x-this.snap.x)<20&&(e.x=this.wallListRun[o].end.x,t="H",n++),Math.abs(this.wallListRun[o].end.y-this.snap.y)<20&&(e.y=this.wallListRun[o].end.y,t="V",n++)),2===n){i=o;break}}if(i)console.log("Start i end tocka zida iste -> OSTAVI ZID I NE RADI NISTA");else{let i;if(i=this.editor.nearWallNode(this.snap,15,this.wallListRun))e.x=i.x,e.y=i.y,document.getElementById("circlebinder").classList.add("circleGum"),document.getElementById("circlebinder").setAttribute("cx",e.x),document.getElementById("circlebinder").setAttribute("cy",e.y);else{let i;!1!==t&&("H"===t?this.snap.x=e.x:this.snap.y=e.y),(i=this.intersection(this.snap,10,this.wallListRun))?(e.x=i.x,e.y=i.y,this.snap.x=i.x,this.snap.y=i.y,!1!==t&&("H"===t?this.snap.x=e.x:this.snap.y=e.y)):(console.log("iscrtaj move kursor"),this.cursor("move")),document.getElementById("circlebinder").classList.add("circle_css"),document.getElementById("circlebinder").setAttribute("cx",e.x),document.getElementById("circlebinder").setAttribute("cy",e.y)}for(let t in this.wallListRun)_t(this.wallListRun[t].start,this.binder.data)&&(this.wallListRun[t].start.x=e.x,this.wallListRun[t].start.y=e.y),_t(this.wallListRun[t].end,this.binder.data)&&(this.wallListRun[t].end.x=e.x,this.wallListRun[t].end.y=e.y);this.binder.data=e,this.editor.wallsComputing(this.WALLS,!1,this.boxWall.current);let o=[];for(let e in this.wallListObj){let t=this.wallListObj[e].wall,i=this.wallListObj[e].obj,n=this.qSVG.angleDeg(t.start.x,t.start.y,t.end.x,t.end.y),s=yt(t.equations.base,2*this.wallListObj[e].distance,this.wallListObj[e].from),a=0;this.qSVG.btwn(s[1].x,t.start.x,t.end.x)&&this.qSVG.btwn(s[1].y,t.start.y,t.end.y)&&(a=1),i.x=s[a].x,i.y=s[a].y,i.angle=n,1===i.angleSign&&(i.angle=n+180);let r=yt(t.equations.base,i.size,i);this.qSVG.btwn(r[0].x,t.start.x,t.end.x)&&this.qSVG.btwn(r[0].y,t.start.y,t.end.y)&&this.qSVG.btwn(r[1].x,t.start.x,t.end.x)&&this.qSVG.btwn(r[1].y,t.start.y,t.end.y)?(i.limit=r,i.update(this)):(console.log("Nedovoljna sirina zida -> makni objekt sa zida"),console.log(i),i.graph.remove(),this.OBJDATA.splice(this.OBJDATA.indexOf(i),1),o.push(this.wallListObj[e]))}for(let e=0;e<o.length;e++)this.wallListObj.splice(this.wallListObj.indexOf(o[e]),1);console.log("Empy elem 973"),Ct(this.boxRoom.current),Ct(this.boxSurface.current),this.Rooms=this.qSVG.polygonize(this.WALLS),this.editor.roomMaker(this.Rooms)}}if("bind_mode"===this.mode&&"segment"===this.binder.type&&1===this.action){this.rib(),"v"===this.equation2.A?this.equation2.B=this.snap.x:"h"===this.equation2.A?this.equation2.B=this.snap.y:this.equation2.B=this.snap.y-this.snap.x*this.equation2.A;let e=Mt(this.equation1,this.equation2,"obj"),t=Mt(this.equation2,this.equation3,"obj");if(null!=this.binder.wall.parent&&(_t(this.binder.wall.parent.end,this.binder.wall.start)?this.binder.wall.parent.end=e:_t(this.binder.wall.parent.start,this.binder.wall.start)?this.binder.wall.parent.start=e:this.binder.wall.parent.end=e),null!=this.binder.wall.child&&(_t(this.binder.wall.child.start,this.binder.wall.end)?this.binder.wall.child.start=t:_t(this.binder.wall.child.end,this.binder.wall.end)?this.binder.wall.child.end=t:this.binder.wall.child.start=t),this.binder.wall.start=e,this.binder.wall.end=t,this.binder.graph.children[0].setAttribute("x1",e.x),this.binder.graph.children[0].setAttribute("x2",t.x),this.binder.graph.children[0].setAttribute("y1",e.y),this.binder.graph.children[0].setAttribute("y2",t.y),this.binder.graph.children[1].setAttribute("cx",e.x),this.binder.graph.children[1].setAttribute("cy",e.y),this.binder.graph.children[2].setAttribute("cx",t.x),this.binder.graph.children[2].setAttribute("cy",t.y),void 0!==this.equation1.follow)if(kt(e,this.equation1.backUp.coords))this.equation1.follow.end=this.equation1.backUp.end,this.equation1.follow.start=this.equation1.backUp.start;else{this.qSVG.gap(this.equation1.backUp.start,e)>this.qSVG.gap(this.equation1.backUp.end,e)?this.equation1.follow.end=e:this.equation1.follow.start=e}if(void 0!==this.equation3.follow)if(kt(t,this.equation3.backUp.coords))this.equation3.follow.end=this.equation3.backUp.end,this.equation3.follow.start=this.equation3.backUp.start;else{this.qSVG.gap(this.equation3.backUp.start,t)>this.qSVG.gap(this.equation3.backUp.end,t)?this.equation3.follow.end=t:this.equation3.follow.start=t}let i=[];for(let n=0;n<this.equationFollowers.length;n++){let e=Mt(this.equationFollowers[n].eq,this.equation2,"obj");if(this.qSVG.btwn(e.x,this.binder.wall.start.x,this.binder.wall.end.x,"round")&&this.qSVG.btwn(e.y,this.binder.wall.start.y,this.binder.wall.end.y,"round")){let t=Bt(this.equationFollowers[n].wall.start,this.equationFollowers[n].wall.end);"start"===this.equationFollowers[n].type&&(this.equationFollowers[n].wall.start=e,t<5&&null==this.equationFollowers[n].wall.child&&(this.WALLS.splice(this.WALLS.indexOf(this.equationFollowers[n].wall),1),i.push(this.equationFollowers[n]))),"end"===this.equationFollowers[n].type&&(this.equationFollowers[n].wall.end=e,t<5&&null==this.equationFollowers[n].wall.parent&&(this.WALLS.splice(this.WALLS.indexOf(this.equationFollowers[n].wall),1),i.push(this.equationFollowers[n])))}}for(let n=0;n<i.length;n++)this.equationFollowers.splice(this.equationFollowers.indexOf(i[n]),1);this.editor.wallsComputing(this.WALLS,"move",this.boxWall.current),this.Rooms=this.qSVG.polygonize(this.WALLS);for(let n=0;n<this.equationsObj.length;n++){let e=this.equationsObj[n].obj,t=Mt(this.equationsObj[n].eq,this.equation2);e.x=t[0],e.y=t[1];let i=yt(this.equation2,e.size,e);this.qSVG.btwn(i[0].x,this.binder.wall.start.x,this.binder.wall.end.x)&&this.qSVG.btwn(i[0].y,this.binder.wall.start.y,this.binder.wall.end.y)&&this.qSVG.btwn(i[1].x,this.binder.wall.start.x,this.binder.wall.end.x)&&this.qSVG.btwn(i[1].y,this.binder.wall.start.y,this.binder.wall.end.y)&&(e.limit=i,e.update(this))}for(let n in this.WALLS){let e=this.editor.objFromWall(this.WALLS[n]);for(let t in e){let i=e[t],o=this.editor.createEquationFromWall(this.WALLS[n]),s=yt(o,i.size,i);if(!this.qSVG.btwn(s[0].x,this.WALLS[n].start.x,this.WALLS[n].end.x)||!this.qSVG.btwn(s[0].y,this.WALLS[n].start.y,this.WALLS[n].end.y)||!this.qSVG.btwn(s[1].x,this.WALLS[n].start.x,this.WALLS[n].end.x)||!this.qSVG.btwn(s[1].y,this.WALLS[n].start.y,this.WALLS[n].end.y)){i.graph.remove();let e=this.OBJDATA.indexOf(i);this.OBJDATA.splice(e,1)}}}this.equationsObj=[];let o=this.editor.objFromWall(this.binder.wall);for(let n=0;n<o.length;n++){let e=o[n];this.equationsObj.push({obj:e,wall:this.binder.wall,eq:this.qSVG.perpendicularEquation(this.equation2,e.x,e.y)})}console.log("Empty elem 1231"),Ct(this.boxRoom.current),Ct(this.boxSurface.current),this.editor.roomMaker(this.Rooms),this.cursor("pointer")}if("bind_mode"===this.mode&&"boundingBox"===this.binder.type&&1===this.action&&this.binder.obj.params.move&&"inWall"!==this.binder.obj.family&&"onWall"!==this.binder.obj.family){console.log("BOUNDING BOX");const e=this.getSelectedWallFreeItemObj2D(this.binder.obj.id);if("floorFree"===e.family&&!this.floorFreeObjectPositionValidation(this.snap,this.WALLS,e.size/2,e.thick/2,e.angle))return;this.binder.x=this.snap.x,this.binder.y=this.snap.y,e.x=this.snap.x,e.y=this.snap.y,e.update(this),this.binder.update(this)}if(this.binder.obj&&("inWall"===this.binder.obj.family||"onWall"===this.binder.obj.family)&&1===this.action){let e;if(e=this.editor.nearWall(this.snap)){this.inWallRib(e.wall);let t=this.getSelectedWallFreeItemObj2D(this.binder.obj.id),i=e.wall;if(null===this.wallItemObjOriginalWidth&&this.setWallItemObjOriginalWidth(t),!this.inWallonWallObjectForceJoinToWall(i,e,this.snap,this.binder))return;t.angleSign=this.binder.angleSign,t.angle=this.binder.angle,t.x=this.binder.x,t.y=this.binder.y,t.limit=this.binder.limit,"onWall"===t.family&&(t.additionalParams.onWallAngle=this.binder.additionalParams.onWallAngle,t.additionalParams.onWallThick=this.binder.additionalParams.onWallThick),t.update(this)}}"bind_mode"===this.mode&&"obj"!==this.binder.type&&"segment"!==this.binder.type&&this.rib()}!e.touches&&("select_mode"===this.mode&&"on"===this.drag||"layer_mode"!==this.mode&&e.shiftKey||this.lineModeDraggOn)&&(this.snap=this.calcul_snap(e,this.grid_snap),this.cursor("move"),this.distX=(this.snap.xMouse-this.pox)*this.zoomFactor,this.distY=(this.snap.yMouse-this.poy)*this.zoomFactor,this.pox=this.snap.xMouse-this.distX,this.poy=this.snap.yMouse-this.distY,this.zoom_maker("zoomdrag",this.distX,this.distY))}function Og(e){return t=>{if(console.log("Mouse up mode"+this.mode),this.showRib&&at(this.boxScale.current,0,null,"inline",!1),this.drag="off",this.cursor("default"),"select_mode"===this.mode&&this.binder&&(this.removeBinder(),this.save(!1,!0)),"text_mode"===this.mode)0===this.action&&(this.action=1,this.textLayerModalContent.current.textContent=15,at(this.textToLayerModal.current,this.modalTimeout));else{const e=this.panelDrawingOptions2D.find((e=>e.drawingMode===this.mode));e&&this.handleObj2DMouseUp(e.onAddText)}if("room_mode"===this.mode){if(!this.binder)return!1;this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.binderType="room",this.binder=null,this.setRoomToolsValues(),console.log("Room mode"),this.roomTools.current.setRightBoxAsActive(!1),this.cursor("default"),this.save(!1,!1)}if("line_mode"===this.mode&&0===t.button){document.getElementById("linetemp")&&document.getElementById("linetemp").remove(),this.intersectionOff();let e=Bt({x:this.x,y:this.y},{x:this.wallStartX,y:this.wallStartY})/this.meter;if(console.log("Size wall: "+e),!document.getElementById("line_construc")&&this.wallDrawingStartClick)this.wallDrawingStartClick=!1;else if(document.getElementById("line_construc")&&e>=this.minWallSizeMeter){const t=document.getElementById("line_construc").getAttribute("data-previous-wall-id");let i=new Nc({x:this.wallStartX,y:this.wallStartY},{x:this.x,y:this.y},"normal",document.getElementById("line_construc").getAttribute("stroke-width"),document.getElementById("line_construc").getAttribute("data-wall-material"),t?this.WALLS.find((e=>e.wallId===t)):null,t?null:this.floorHeight);i.equations.base=this.editor.createEquationFromWall(i),this.WALLS.push(i),this.editor.onWallAddedSlicing(i),this.editor.resolveOverlapingWalls(),this.editor.architect(this.WALLS),this.multipleWallDrawing.current.checked&&!this.wallEndConstruc?(this.action=1,this.cursor("crosshair")):this.action=0,this.boxInfo.current.innerHTML=`<p>Wall added</p><p>Length: ${Et(e,this.context.userUnit,"meter","feet",2,!0,!0)}</p>`,document.getElementById("line_construc")&&document.getElementById("line_construc").remove(),this.lengthTemp&&this.lengthTemp.remove(),this.lengthTemp=null,this.construc=0,this.wallEndConstruc&&(this.action=0),this.wallEndConstruc=!1,this.pox=this.x,this.poy=this.y,this.wallStartX=this.pox,this.wallStartY=this.poy,this.saveNeeded=!0,this.save(!1,!1)}else console.log("Nemoj kreirat zid"),this.action=0,this.construc=0,this.boxInfo.current.innerHTML="Select mode",this.foncButton("select_mode"),this.removeBinder(),this.snap=this.calcul_snap(t,this.grid_snap),this.pox=this.snap.x,this.poy=this.snap.y}if("bind_mode"===this.mode){this.action=0,this.construc=0;let t=!0;if(this.binder){if(this.foncButton("select_mode","dont_save"),"node"===this.binder.type&&(console.log("Mouse up bind mode NODE"),this.editor.removeZeroLengthWallsAndSliceExistingWalls(),this.editor.architect(this.WALLS)),"segment"===this.binder.type){let e=!1;if(this.binder.wall.start===this.binder.before&&(e=!0),e){this.boxInfo.current.innerHTML="Modify the wall",t=!1,console.log("mainComponentThis.binder wall:"),console.log(this.binder),this.wallTools.current.setRightBoxAsActive(),this.setWallToolsValues(this.binder.wall),this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.binderType="wall",this.binder=null;for(let e=0;e<this.selectedBinder.graph.children.length;e++)this.selectedBinder.graph.children[e].setAttribute("stroke","#0cacf2"),this.selectedBinder.graph.children[e].setAttribute("fill","#0cacf2"),this.selectedBinder.graph.children[e].style.stroke="#0cacf2",this.selectedBinder.graph.children[e].style.fill="#0cacf2"}else console.log("Mouse up bind mode pomican cijeli zid"),this.editor.removeZeroLengthWallsAndSliceExistingWalls(),this.editor.architect(this.WALLS);this.equation1=null,this.equation2=null,this.equation3=null}else if("obj"===this.binder.type&&"inWall"===this.binder.family){if(Math.abs(this.binder.oldXY.x-this.binder.x)+Math.abs(this.binder.oldXY.y-this.binder.y)<1){const i=this.getSelectedWallFreeItemObj2D(this.binder.obj.id);this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(i,"onRightBoxOpenMessage"),t=!1,this.openWallItemToolsRightBox(e,i),this.cursor("default"),this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.graph.querySelector(".circle_css_2")&&this.selectedBinder.graph.querySelector(".circle_css_2").classList.remove("circle_css_2"),this.selectedBinder.binderType="wallItem",this.binder=null;for(let e=0;e<this.selectedBinder.graph.children.length;e++)this.selectedBinder.graph.children[e].setAttribute("stroke","#0cacf2"),this.selectedBinder.graph.children[e].setAttribute("fill","#0cacf2"),this.selectedBinder.graph.children[e].style.stroke="#0cacf2",this.selectedBinder.graph.children[e].style.fill="#0cacf2"}else this.mode="select_mode",this.action=0,this.removeBinder();this.wallItemObjOriginalWidth=null}else if("boundingBox"===this.binder.type){let i=Math.abs(this.binder.oldX-this.binder.x)+Math.abs(this.binder.oldY-this.binder.y),o=this.binder.obj&&this.getSelectedWallFreeItemObj2D(this.binder.obj.id);if(console.log("target object: "),console.log(o),i<1||!o)if(o.params.move){let i="";"inWall"===o.family||"onWall"===o.family?(i="wallItem",this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(o,"onRightBoxOpenMessage"),this.openWallItemToolsRightBox(e,o)):"homeAssistant"===o.class||"sensors"===o.class?(this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(o,"onRightBoxOpenMessage"),this.openSensorOtherToolsRightBox(o)):"presence_area"===o.class?(i="presenceArea",this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(o,"onRightBoxOpenMessage"),this.openPresenceAreaToolsRightBox(o)):(i="freeItem",this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(o,"onRightBoxOpenMessage"),this.openFreeItemToolsRightBox(e,o)),this.cursor("default"),t=!1,this.removeSelectedBinder(),this.selectedBinder=this.binder,this.binder=null,this.selectedBinder.binderType=i}else this.mode="select_mode",this.action=0,this.removeBinder();else this.binder.additionalParams.onWallObjectBBox&&(this.wallItemObjOriginalWidth=null)}"bind_mode"===this.mode&&this.binder&&(console.log("Makni mainComponentThis.binder"),this.removeBinder())}this.saveNeeded=!0,this.save(!1,t)}"edit_room_mode"!==this.mode&&(this.editor.showScaleBox(),this.rib())}}function kg(e){if("floorplan_image_scaling"!==this.mode&&"floorplan_image_translation"!==this.mode||(this.snap=this.calcul_snap(e,this.grid_snap),this.uploadFloorplanImageToolsRef.current.handleMouseDownAction(this.snap)),"line_mode"===this.mode)if(0===e.button){if(0===this.action){let t;this.wallDrawingStartClick=!0,this.snap=this.calcul_snap(e,this.grid_snap),this.pox=this.snap.x,this.poy=this.snap.y,(t=this.editor.nearWall(this.snap,this.WALLS,this.nearWallConstrucRadius))&&(this.pox=t.x,this.poy=t.y),this.wallStartX=this.pox,this.wallStartY=this.poy}else this.wallDrawingStartClick=!1,this.construc=1;this.action=1}else 2===e.button&&(this.lineModeDraggOn=!0,this.snap=this.calcul_snap(e,this.grid_snap),this.pox=this.snap.xMouse,this.poy=this.snap.yMouse);if("edit_door_mode"===this.mode&&(this.action=1,this.cursor("pointer")),"select_mode"===this.mode)if(console.log("Inside select mode"),console.log(this.binder),!this.binder||"segment"!==this.binder.type&&"node"!==this.binder.type&&"obj"!==this.binder.type&&"boundingBox"!==this.binder.type)this.action=0,this.drag="on",this.snap=this.calcul_snap(e,this.grid_snap),this.pox=this.snap.xMouse,this.poy=this.snap.yMouse,this.selectModeRightClickDraggOn=2===e.button;else{if(console.log("Set bind mode"),this.mode="bind_mode","obj"===this.binder.type&&(this.action=1),"boundingBox"===this.binder.type&&(this.action=1),"node"===this.binder.type){rt(this.boxScale.current,0,null,!1);let e=this.binder.data;this.pox=e.x,this.poy=e.y;let t,i={x:this.pox,y:this.poy};this.wallListObj=[],this.wallListRun=[];for(let o=this.WALLS.length-1;o>-1;o--)if(_t(this.WALLS[o].start,i)||_t(this.WALLS[o].end,i)){this.wallListRun.push(this.WALLS[o]);break}null!=this.wallListRun[0].child&&(_t(this.wallListRun[0].child.start,i)||_t(this.wallListRun[0].child.end,i))&&this.wallListRun.push(this.wallListRun[0].child),null!=this.wallListRun[0].parent&&(_t(this.wallListRun[0].parent.start,i)||_t(this.wallListRun[0].parent.end,i))&&this.wallListRun.push(this.wallListRun[0].parent);for(let o in this.wallListRun)if(_t(this.wallListRun[o].start,i)||_t(this.wallListRun[o].end,i)){let e=this.wallListRun[o].start;_t(this.wallListRun[o].start,i)&&(e=this.wallListRun[o].end),t=this.editor.objFromWall(this.wallListRun[o]);let n=this.wallListRun[o];for(let i=0;i<t.length;i++){let o=t[i],s=Bt(o,e);this.wallListObj.push({wall:n,from:e,distance:s,obj:o,indexObj:i})}}this.magnetic=0,this.action=1}if("segment"===this.binder.type){rt(this.boxScale.current,0,null,!1);let e=this.binder.wall;if(this.binder.before=this.binder.wall.start,this.equation2=this.editor.createEquationFromWall(e),null!=e.parent){this.equation1=this.editor.createEquationFromWall(e.parent);let t=this.qSVG.angleBetweenEquations(this.equation1.A,this.equation2.A);if(t<20||t>160){let t=!0;for(let i in this.WALLS)if(kt(e.start,this.WALLS[i].coords)&&!_t(this.WALLS[i],e.parent)&&!_t(this.WALLS[i],e)){null!=e.parent.parent&&_t(e,e.parent.parent)&&(e.parent.parent=null),null!=e.parent.child&&_t(e,e.parent.child)&&(e.parent.child=null),e.parent=null,t=!1;break}if(t){let t;_t(e.parent.end,e.start,"1")?(t=new Nc(e.parent.end,e.start,"normal",e.thick,e.material,e),console.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e.parent,t.child=e,e.parent.child=t,e.parent=t,this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y)):_t(e.parent.start,e.start,"2")&&(t=new Nc(e.parent.start,e.start,"normal",e.thick,e.material,e),console.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e.parent,t.child=e,e.parent.parent=t,e.parent=t,this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y))}}}if(null==e.parent){let t=!1;for(let i in this.WALLS)if(kt(e.start,this.WALLS[i].coords)&&!_t(this.WALLS[i].coords,e.coords)){let e=this.qSVG.angleBetweenEquations(this.WALLS[i].equations.base.A,this.equation2.A);if(e<20||e>160)break;this.equation1=this.editor.createEquationFromWall(this.WALLS[i]),this.equation1.follow=this.WALLS[i],this.equation1.backUp={coords:this.WALLS[i].coords,start:this.WALLS[i].start,end:this.WALLS[i].end,child:this.WALLS[i].child,parent:this.WALLS[i].parent},t=!0;break}t||(this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y))}if(null!=e.child){this.equation3=this.editor.createEquationFromWall(e.child);let t=this.qSVG.angleBetweenEquations(this.equation3.A,this.equation2.A);if(t<20||t>160){let t=!0;for(let i in this.WALLS)if(kt(e.end,this.WALLS[i].coords)&&!_t(this.WALLS[i],e.child)&&!_t(this.WALLS[i],e)){null!=e.child.parent&&_t(e,e.child.parent)&&(e.child.parent=null),null!=e.child.child&&_t(e,e.child.child)&&(e.child.child=null),e.child=null,t=!1;break}if(t)if(_t(e.child.start,e.end)){let t=new Nc(e.end,e.child.start,"new",e.thick,e.material,e);console.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e,t.child=e.child,e.child.parent=t,e.child=t,this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y)}else if(_t(e.child.end,e.end)){let t=new Nc(e.end,e.child.end,"normal",e.thick,e.material,e);console.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e,t.child=e.child,e.child.child=t,e.child=t,this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y)}}}if(null==e.child){let t=!1;for(let i in this.WALLS)if(kt(e.end,this.WALLS[i].coords)&&!_t(this.WALLS[i].coords,e.coords,"4")){let e=this.qSVG.angleBetweenEquations(this.WALLS[i].equations.base.A,this.equation2.A);if(e<20||e>160)break;this.equation3=this.editor.createEquationFromWall(this.WALLS[i]),this.equation3.follow=this.WALLS[i],this.equation3.backUp={coords:this.WALLS[i].coords,start:this.WALLS[i].start,end:this.WALLS[i].end,child:this.WALLS[i].child,parent:this.WALLS[i].parent},t=!0;break}t||(this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y))}this.equationFollowers=[];for(let i in this.WALLS)null==this.WALLS[i].child&&kt(this.WALLS[i].end,e.coords)&&!_t(e,this.WALLS[i])&&this.equationFollowers.push({wall:this.WALLS[i],eq:this.editor.createEquationFromWall(this.WALLS[i]),type:"end"}),null==this.WALLS[i].parent&&kt(this.WALLS[i].start,e.coords)&&!_t(e,this.WALLS[i])&&this.equationFollowers.push({wall:this.WALLS[i],eq:this.editor.createEquationFromWall(this.WALLS[i]),type:"start"});this.equationsObj=[];let t=this.editor.objFromWall(e);for(let i=0;i<t.length;i++){let o=t[i];this.equationsObj.push({obj:o,wall:e,eq:this.qSVG.perpendicularEquation(this.equation2,o.x,o.y)})}this.action=1}}}function Fg(e){h(e,(e=>{const{xMouse:t,yMouse:i}=this.calcul_snap(e);if(this.showMapLayer2DInputRef.current.getCheckedStatus())var o=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.setZoomParameters(e.deltaY<0?"zoomin":"zoomout",this.zoomXMove,!0)){const{xMouse:n,yMouse:s}=this.calcul_snap(e);this.originX_viewbox=this.originX_viewbox-(n-t),this.originY_viewbox=this.originY_viewbox-(s-i),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this.handleMapZoomChange(o),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes()}}),100)()}function Mg(e){if(1===e.touches.length)this.touchStartPageCoordinates={pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY},this.roomModeBinderCreation(e),this.uploadFloorplanImageBinderCreation(e),this.panelDrawingOptions2D.filter((e=>e.createBinderMethod)).forEach((t=>t.createBinderMethod(e))),this.selectModeObj2DWallNodeWallSegmentBinderCreation(e),"line_mode"===this.mode&&this.lineModeNearWallHleperBinderCreation(e),this.handleMouseDown(e);else if(2===e.touches.length){this.drag="off",this.touchZoomTouches=[],this.touchZoomTouches.push({identifier:e.touches[0].identifier,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY}),this.touchZoomTouches.push({identifier:e.touches[1].identifier,pageX:e.touches[1].pageX,pageY:e.touches[1].pageY}),this.zoomTouchFocusPoint={pageX:(e.touches[0].pageX+e.touches[1].pageX)/2,pageY:(e.touches[0].pageY+e.touches[1].pageY)/2};const t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;this.touchZoomDollyStartDistance=Math.sqrt(t*t+i*i)}}function Ag(e){if(e.touches[0].pageX!==this.touchStartPageCoordinates.pageX||e.touches[0].pageY!==this.touchStartPageCoordinates.pageY)if(1===e.touches.length&&"on"===this.drag)console.log("Drag"),this.snap=this.calcul_snap(e,this.grid_snap),this.distX=(this.snap.xMouse-this.pox)*this.zoomFactor,this.distY=(this.snap.yMouse-this.poy)*this.zoomFactor,this.pox=this.snap.xMouse-this.distX,this.poy=this.snap.yMouse-this.distY,this.zoom_maker("zoomdrag",this.distX,this.distY);else if(2===e.touches.length){console.log("Zoom 2 fingers"),this.binder&&(this.removeBinder(),this.previousFloorplanItemBinder=null,this.mode="select_mode");const i=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;this.touchZoomDollyEndDistance=Math.sqrt(i*i+o*o);const n=this.touchZoomDollyEndDistance-this.touchZoomDollyStartDistance;if(console.log("Distance "+n),0!==n){const{xMouse:e,yMouse:i}=this.calcul_snap(this.zoomTouchFocusPoint);if(this.showMapLayer2DInputRef.current.getCheckedStatus())var t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});const o=n>0?.95*this.zoomFactor:this.zoomFactor/.95,s=1/o,a=o*this.taille_w;if(n>0){if(this.isOverMaxZoomIn(a,0))return}else if(this.isOverMaxZoomOut(a,0))return;const r=a-this.width_viewbox;console.log("Zoom out Width viewbox delta "+r),this.width_viewbox+=r,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox-r/2,this.originY_viewbox=this.originY_viewbox-r/2*this.ratio_viewbox,this.zoomFactor=this.width_viewbox/this.taille_w;const{xMouse:l,yMouse:h}=this.calcul_snap(this.zoomTouchFocusPoint);this.originX_viewbox=this.originX_viewbox-(l-e),this.originY_viewbox=this.originY_viewbox-(h-i),this.setScaleValueWidth(s),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this.handleMapZoomChange(t),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes(),this.touchZoomDollyStartDistance=this.touchZoomDollyEndDistance}}else this.handleMouseMove(e)}function Rg(e){return t=>{this.drag="off",this.handleMouseUp(e)(t)}}function Lg(e){(this.lineModeDraggOn||this.selectModeRightClickDraggOn)&&e.preventDefault(),this.lineModeDraggOn=!1,this.selectModeRightClickDraggOn=!1}function Bg(e,t){const i=this.isAddOnApp?this.measureSystemContext.userUnit:t.userUnit;this.mounted=!1,this.useGenerateHMWebWorkers="undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas,this.WALLS=[],this.ORPHANWALLS=[],this.OBJDATA=[],this.ROOM=[],this.HISTORY=[],this.userAddedObjects=[],this.furnitureDimensions={...He},this.roomIdCounter=0,this.drag="off",this.action=0,this.magnetic=0,this.construc=0,this.wallDrawingStartClick=!1,this.nearWallNodeRange=10,this.selectModeNearWallNodeRange=1,this.Rcircle=4,this.wallBinderBallsRadius=4,this.wallBinderPulsingBallRadius=5,this.nearWallBinderRadius=6,this.nearWallConstrucRadius=12,this.wallThicknessMinValue="metric"===i?3:1,this.wallThicknessMaxValue="metric"===i?50:20,this.wallWidthInputStep=.1,this.wallWidthDecimalPrecision=-Math.log10(this.wallWidthInputStep),this.wallLengthInputStep="metric"===i?.01:.1,this.wallLengthDecimalPrecision=-Math.log10(this.wallLengthInputStep),this.itemDimensionsInputStep="metric"===i?1:.1,this.itemDimensionsDecimalPrecision=-Math.log10(this.itemDimensionsInputStep),this.roomSurfaceInputStep=.1,this.roomSurfaceDecimalPrecision=-Math.log10(this.roomSurfaceInputStep),this.isPointOnWallDecimalPrecision=8,this.mode="select_mode",this.modeOption=void 0,this.selectModeRightClickDraggOn=!1,this.taille_w=null,this.taille_h=null,this.offset=null,this.grid=20,this.showRib=null,this.showGrid=null,this.backgroundColor=null,this.floorplan3DScaleFactor=3,this.imperialSystemSquareFeetSize=3,this.wallThicknessDefaultValue="metric"===i?16:6,this.wallHeightDefaultValue="metric"===i?2.6*this.meter:Ht(120,i,"inch","meter",!0)*this.meter,this.wallHeightDecimalPrecision=0,this.wallHeightMaxValue="metric"===i?5e3:2e3,this.groundColorDefaultValue="#8b4513",this.groundColor=null,this.clockVisibilityDefaultValue="visible",this.clockVisibility=null,this.skyColorDefaultType="dynamic",this.skyColorType=null,this.skyColorDefaultValue="#000000",this.skyColor=null,this.ambientLightIntensityDefaultValue=2,this.ambientLightIntensity=null,this.floorHeight=null,this.floorThickness=.05*this.meter,this.roomFloorVerticalOffset=3,this.floorNumber=null,this.floorNote="",this.wallSize=Ht(this.wallThicknessDefaultValue,i,"metric"===i?"centimeter":"inch","meter",!0)*this.meter,this.grid_snap="off",this.colorWall="#666",this.pox=0,this.poy=0,this.touchZoomDollyStartDistance=null,this.touchZoomDollyEndDistance=null,this.touchStartPageCoordinates=null,this.touchZoomTouches=[],this.zoomTouchFocusPoint=null,this.wallStartX=0,this.wallStartY=0,this.smallScreenPixelSize=600,this.smallScreenMinimizedPanelSize=50,this.smallScreenMaximizedPanelSize=150,this.bigScreenMinimizedPanelSize=100,this.bigScreenMaximizedPanelSize=200,this.width_viewbox=null,this.height_viewbox=null,this.ratio_viewbox=null,this.originX_viewbox=0,this.originY_viewbox=0,this.defaultZoomLevel=9,this.zoom=this.defaultZoomLevel,this.zoomXMove=200,this.zoomXMoveOnMapScaleFactor=20,this.zoomXView=50,this.maxZoomOutLevel=-1/0,this.maxZoomInLevelDefaultValue=15,this.maxZoomInLevel=this.maxZoomInLevelDefaultValue,this.zoomFactor=1,this.globalArea=null,this.snap=null,this.lineIntersectionP=null,this.sizeText=[],this.showAllSizeStatus=0,this.editor=null,this.qSVG=null,this.binder=null,this.selectedBinder=null,this.windowRotationAxisDirectionGraph=null,this.windowSingleAxisRotationOptions=[{rotationAxis:"start",rotationDirection:"up"},{rotationAxis:"end",rotationDirection:"up"},{rotationAxis:"start",rotationDirection:"down"},{rotationAxis:"end",rotationDirection:"down"}],this.windowDoubleAxisRotationOptions=[{rotationAxis:"start",rotationDirection:"up"},{rotationAxis:"start",rotationDirection:"down"}],this.cameraCoverageAreaGraph=null,this.presenceAreaGraph=null,this.presenceAreaDetectionObjectsDefaultLimit=3,this.selectedRoomId=null,this.equation1=null,this.equation2=null,this.equation3=null,this.Rooms=null,this.wallEndConstruc=!1,this.lengthTemp=null,this.wallListRun=[],this.wallListObj=[],this.equationFollowers=[],this.equationsObj=[],this.x=void 0,this.y=void 0,this.distX=null,this.distY=null,this.multiChecked=!0,this.decimalPrecision=12,this.boxWallCoordinates=null,this.exportPngShowGrid=!1,this.exportPngShowMeasures=!1,this.lastSavedObject=null,this.exportPngResolutionScale=4,this.selectedWallMaterial="Unknown",this.modalTimeout=500,this.othersTimeout=200,this.floorplanGeneral={},this.floorplanFloorsData=[],this.hiddenFloorplanFloors3D=[],this.floorplanLastSavedTopLeftSvgCoords=null,this.testLocationNumberDefaultSizes={radius:this.meter/2,fontSize:15},this._map=null,this.mapCornersGpsCoords=[],this.mapCornerCoordsDebug=!1,this.wallItemObjOriginalWidth=null,this.preventFloorParametersOpening=!1,this.activeRightBoxComponent=null,this.linRef=o.createRef(),this.mapLayer2DContainerRef=o.createRef(),this.floorplan3DContainerRef=o.createRef(),this.showFloorplanOnMapContainerRef=o.createRef(),this.floorplan3DComponent=o.createRef(),this.boxPlanName=o.createRef(),this.boxFloorplanImage=o.createRef(),this.boxFloorDrawingHelper=o.createRef(),this.boxSurface=o.createRef(),this.boxRoom=o.createRef(),this.boxWall=o.createRef(),this.boxArea=o.createRef(),this.boxText=o.createRef(),this.boxDebug=o.createRef(),this.boxCarpentry=o.createRef(),this.boxGridRef=o.createRef(),this.boxScale=o.createRef(),this.boxRib=o.createRef(),this.boxBind=o.createRef(),this.wallMaterialsAsyncPatternRef=o.createRef(),this.furnitureAsyncPatternRef=o.createRef(),this.surfaceAreaAsyncPatternRef=o.createRef(),this.uploadFloorplanPanelButtonContainer=o.createRef(),this.roomTextureContainerRef=o.createRef(),this.roomTexturePreviewContainerRef=o.createRef(),this.boxInfo=o.createRef(),this.wallWidthValue=o.createRef(),this.wallLengthValue=o.createRef(),this.freeItemToolsRef=o.createRef(),this.freeItemTitleRef=o.createRef(),this.freeItemDimensionsRef=o.createRef(),this.freeItemPositionsRef=o.createRef(),this.freeItemRotationsRef=o.createRef(),this.freeCameraCoverageOptionsContainerRef=o.createRef(),this.freeSurfaceAreaOptionsContainerRef=o.createRef(),this.freeItemMaterialsRef=o.createRef(),this.freeItemChangeTypeRef=o.createRef(),this.freeItemMaterialsComponentRef=o.createRef(),this.freeItemTextToolsRef=o.createRef(),this.freeItemTypesSelectionBoxRef=o.createRef(),this.cameraCoverageOptionsActiveRef=o.createRef(),this.sensorOtherToolsRef=o.createRef(),this.sensorOtherToolsTitleRef=o.createRef(),this.presenceAreaToolsRef=o.createRef(),this.presenceAreaToolsTitle=o.createRef(),this.presenceAreaOptionsRef=o.createRef(),this.presenceAreaOptionsContainerRef=o.createRef(),this.textItemFontSizeValue=o.createRef(),this.itemRotationValue=o.createRef(),this.labelBox=o.createRef(),this.textLayerModalContent=o.createRef(),this.showFloorplanNoWallsErrorModal=o.createRef(),this.selectedFloorNoWallsErrorModal=o.createRef(),this.panel=o.createRef(),this.showMapLayer2DInputRef=o.createRef(),this.roomTools=o.createRef(),this.wallTools=o.createRef(),this.floorParameters=o.createRef(),this.roomName=o.createRef(),this.wallItemToolsRef=o.createRef(),this.wallItemToolsTitle=o.createRef(),this.wallItemDimensionsRef=o.createRef(),this.wallItemMirroredRef=o.createRef(),this.wallItemPositionsRef=o.createRef(),this.wallItemMaterialsRef=o.createRef(),this.wallItemMaterialsComponentRef=o.createRef(),this.activeItemRotationsRef=o.createRef(),this.activeItemPositionsRef=o.createRef(),this.roomNameSelectRef=o.createRef(),this.wallMaterialRef=o.createRef(),this.wallAlwaysHideRef=o.createRef(),this.wallCustomHeightRef=o.createRef(),this.scaleVal=o.createRef(),this.selectMode=o.createRef(),this.uploadFloorplanImageMode=o.createRef(),this.roomMode=o.createRef(),this.layerMode=o.createRef(),this.layerList=o.createRef(),this.floorplanImageTools=o.createRef(),this.floorplanImagePattern=o.createRef(),this.floorplanImage=o.createRef(),this.areaValue=o.createRef(),this.roomSurface=o.createRef(),this.doorHinge=o.createRef(),this.wallLength=o.createRef(),this.wallWidth=o.createRef(),this.rightControlsBox=o.createRef(),this.panelControl=o.createRef(),this.roomNameDropdownMenu=o.createRef(),this.loadingComponentContainer=o.createRef(),this.uploadImageFloorplanSettingsIconRef=o.createRef(),this.uploadFloorplanImageStatusContainerRef=o.createRef(),this.uploadImageFloorplanHideRef=o.createRef(),this.uploadImageFloorplanShowRef=o.createRef(),this.uploadFloorplanImageErrorModal=o.createRef(),this.uploadFloorplanImageErrorMessageRef=o.createRef(),this.wallWidthNumberSliderInput=o.createRef(),this.floorHeightInputRef=o.createRef(),this.uploadFloorplanImageToolsRef=o.createRef(),this.layersListArrowRef=o.createRef(),this.mapStylesChangeRef=o.createRef(),this.showMapLayer2D3DRef=o.createRef(),this.windowRotationOptionsContainerRef=o.createRef(),this.windowRotationOptionsRef=o.createRef(),this.wallCameraCoverageOptionsContainerRef=o.createRef(),this.wallSurfaceAreaOptionsContainerRef=o.createRef(),this.wallItemChangeTypeRef=o.createRef(),this.wallItemTypesSelectionBoxRef=o.createRef(),this.roomFloorTexturesComponentContainerRef=o.createRef(),this.roomFloorTexturesRepeatComponentContainerRef=o.createRef(),this.wallItemHideWithWallRef=o.createRef(),this.freeItemMirroredRef=o.createRef(),this.floorplanFloorsPanelBoxContainerRef=o.createRef(),this.floorplanFloorsPanelBoxRef=o.createRef(),this.panelFloorNoteExplanationBox=o.createRef(),this.floorNoteInputRef=o.createRef(),this.floorNumberInputRef=o.createRef(),this.floorDrawingHelperOptionsRef=o.createRef(),this.roomFloorParametersRef=o.createRef(),this.panelInfoExplanationBox=o.createRef(),this.layersListOptionsRef=o.createRef(),this.leftPanel2DExtendedChoicePartRef=o.createRef(),this.createRoomPath=Iu.bind(this),this.createRoomBinderPath=Pu.bind(this),this.removeSelectedBinder=Ou.bind(this),this.removeBinder=ku.bind(this),this.removeWindowRotationAxisDirectionBinder=Fu.bind(this),this.removeCameraCoverageAreaBinder=Mu.bind(this),this.removePresenceAreaBinder=Au.bind(this),this.uploadFloorplanImageBinderCreation=eu.bind(this),this.roomModeBinderCreation=tu.bind(this),this.selectModeObj2DWallNodeWallSegmentBinderCreation=iu.bind(this),this.inWallonWallObjectBinderCreation=ou.bind(this),this.getBinderCreationFloorWalls=nu.bind(this),this.freeObjectBinderCreation=su.bind(this),this.createWindowRotationPropertiesBinder=au.bind(this),this.createCameraCoverageArea2DVisualization=ru.bind(this),this.createPresenceArea2DVisualization=lu.bind(this),this.onLayerModeClick=hu.bind(this),this.exitLayerMode=cu.bind(this),this.onRoomModeClick=du.bind(this),this.onSelectModeClick=pu.bind(this),this.onUploadedFloorplanImageStatusChangeClick=mu.bind(this),this.onUploadFloorplanImageClick=uu.bind(this),this.hideSubItems=gu.bind(this),this.razButton=fu.bind(this),this.foncButton=bu.bind(this),this.exportFloorplanPngOnLoadCallback=Cu.bind(this),this.downloadSvg=xu.bind(this),this.resetHistory=_u.bind(this),this.determineBoxPlanNameValue=yu.bind(this),this.save=Su.bind(this),this.load=vu.bind(this),this.loadFloorplanFloor=Du.bind(this),this.isFloorplanEmpty=Tu.bind(this),this.isFloorplanNoWalls=ju.bind(this),this.calculateGpsCoordinatesForNewSvgPoint=qa.bind(this),this.handleMapDrag=Xa.bind(this),this.handleMapZoomChange=Ka.bind(this),this.onMapContextLoadedCallback2D=Za.bind(this),this.calculateMapCornersCoordinatesFromTopLeftPoint=Ya.bind(this),this.onMapCameraOptionsSetFinishCallback=$a.bind(this),this.alignFloorplanTopLeftCornerOnMap=Ua.bind(this),this.getCurrentMapCornersGpsCoords=Ja.bind(this),this.handleMapLayerWindowResize=Qa.bind(this),this.coordinateFloorplanSvgZoomWithMap=er.bind(this),this.hideAllSize=Ru.bind(this),this.inWallRib=Lu.bind(this),this.rib=Bu.bind(this),this.intersectionOff=Wu.bind(this),this.intersection=Nu.bind(this),this.setRoomToolsValues=Vu.bind(this),this.setWallToolsValues=Eu.bind(this),this.setFreeItemToolsValue=Hu.bind(this),this.setWallItemToolsValue=zu.bind(this),this.setPresenceAreaToolsValue=Gu.bind(this),this.resizeAndKeyDownEventListenersControl=qu.bind(this),this.onShow3DClick=Uu.bind(this),this.minimizePanel=Yu.bind(this),this.maximizePanel=Xu.bind(this),this.onPanelControlClick=Ku.bind(this),this.onWallToolsCloseClick=Ju.bind(this),this.onFloorParametersCloseClick=Qu.bind(this),this.handleWindowResize=eg.bind(this),this.onShowOnMapLayer2DClick=ig.bind(this),this.onRoomToolsCloseClick=og.bind(this),this.onZoomButonClick=ng.bind(this),this.onFloorplanGpsCoordsClick=sg.bind(this),this.onRoomFloorTextureChange=lg.bind(this),this.onRoomFloorTextureRepeatChange=hg.bind(this),this.onRoomFloorColorChange=cg.bind(this),this.onRoomFloorDefaultType=dg.bind(this),this.onRoomFloorNoneType=pg.bind(this),this.getBoxDimensionsForCurrentZoom=mg.bind(this),this.boxZoomSimulationSetZoomParameters=ug.bind(this),this.boxZoomSimulation=gg.bind(this),this.zoom_maker=yg.bind(this),this.setZoomParameters=_g.bind(this),this.centerAndShowWholeFloor=wg.bind(this),this.centerAndShowWholeBoxOperations=bg.bind(this),this.showWholeBoxZoomOperations=Cg.bind(this),this.zoomToSpecificLevel=xg.bind(this),this.showWholeBoxZoom=fg.bind(this),this.centerAndShowFloorplanAndUploadedFloorplanImage=Sg.bind(this),this.isOverMaxZoomIn=vg.bind(this),this.isOverMaxZoomOut=Dg.bind(this),this.determineMaxZoomInLevel=Tg.bind(this),this.setScaleValueWidth=jg.bind(this),this.handleMouseMove=Pg.bind(this),this.handleMouseUp=Og.bind(this),this.handleMouseDown=kg.bind(this),this.handleMouseWheel=Fg.bind(this),this.handleTouchStart=Mg.bind(this),this.handleTouchMove=Ag.bind(this),this.handleTouchEnd=Rg.bind(this),this.handleContextMenu=Lg.bind(this),this.calcul_snap=Vg.bind(this),this.calcul_snap_inverse=Eg.bind(this),this.cursor=Hg.bind(this),this.getActiveRightBox=zg.bind(this),this.hideActiveRightBox=Gg.bind(this),this.translateRightBox=qg.bind(this),this.openFloorParametersRightBox=Ug.bind(this),this.carpentryCalc=Yg.bind(this),this.hideRightBox=Xg.bind(this),this.showHideLeftRightBoxes=Kg.bind(this),this.handleRightControlsBoxResize=Zg.bind(this),this.handleActiveRightBoxDeleteKeyPress=$g.bind(this),this.isPanelMaximized=Jg.bind(this),this.isSmallScreen=Qg.bind(this),this.getFloorplanName=ef.bind(this),this.setSvgViewBoxes=tf.bind(this),this.setWindowObjectRotationOption=of.bind(this),this.createWindowRotationSvg=nf.bind(this),this.setWindowObjectRotationProperties=sf.bind(this),this.inWallonWallObjectBinderAngleCalculation=af.bind(this),this.inWallonWallObjectBinderJoinToWall=rf.bind(this),this.setInWallOnWallObjectWidthToWallWidth=lf.bind(this),this.inWallonWallObjectForceJoinToWall=hf.bind(this),this.setWallItemObjOriginalWidth=cf.bind(this),this.floorFreeObjectPositionValidation=df.bind(this),this.openWallItemToolsRightBox=pf.bind(this),this.openFreeItemToolsRightBox=mf.bind(this),this.openSensorOtherToolsRightBox=uf.bind(this),this.openPresenceAreaToolsRightBox=gf.bind(this),this.determineObj2DInfoTexts=ff.bind(this),this.convertValueToSvgUnits=bf.bind(this),this.convertSvgToValueUnits=wf.bind(this),this.updateSelectedRoomFill=Cf.bind(this),this.handleObj2DMouseUp=xf.bind(this),this.setFloorHeightInputValue=_f.bind(this),this.getFloorplanGroundColorClockVisibilityValue=yf.bind(this),this.setFloorplanGroundColorClockVisibilityValues=Sf.bind(this),this.getSkyColorTypeColorValue=vf.bind(this),this.setSkyColorTypeColorValue=Df.bind(this),this.setAmbientLightIntensityValue=Tf.bind(this),this.setFloorplanEnvironmentSettings=jf.bind(this),this.setBoxWallCoordinatesValues=If.bind(this),this.resetSelectedObjectMaterial=Pf.bind(this),this.getObjectClass=Of.bind(this),this.createFurniturePatternImagePathData=kf.bind(this),this.getFurniturePatternImagePaths=Ff.bind(this),this.createSurfaceAreaPatternImagePathData=Mf.bind(this),this.getObjectFolderName=Af.bind(this),this.getObjectItemType=Rf.bind(this),this.createUserAddedObjectModelsDetailsDimensionsData=Lf.bind(this),this.drawingModeSwitchRestoreActions=Bf.bind(this),this.getLowestFloorData=Wf.bind(this),this.getHighestFloorData=Nf.bind(this),this.getFloorStartElevation=Vf.bind(this),this.setFloorParametersValues=Ef.bind(this),this.createObj2DClassInstanceFromObj=Hf.bind(this),this.getFloorplanWallsBBoxCoords=zf.bind(this),this.getFloorplanObjectsBBoxCoords=Gf.bind(this),this.getFloorplanWallsObjectsBBoxCoords=qf.bind(this),this.setWallsChildParentValues=Uf.bind(this),this.drawUnderlyingFloorDrawingHelper=Yf.bind(this),this.getObj2DFloorNumber=Xf.bind(this),this.setDoorObject2DHinge=Kf.bind(this),this.getPresenceAreaParametersDefaultValues=Zf.bind(this),this.getWallItemObj2DTargetWall2D=$f.bind(this),this.getOnWallItemDepthOffsetParams=Jf.bind(this),this.getInWallItemDepthOffsetParams=Qf.bind(this),this.isFloorplanItemClassMember=eb.bind(this),this.getFloorplanItemDetails=tb.bind(this),this.getItemsClassSubClassFolderName=ib.bind(this),this.getObjOnWallOffsetAngleValue=ob.bind(this),this.getItemsClassWithSubClassesDrawingOption2DProperties=nb.bind(this),this.getSelectedWall2D=sb.bind(this),this.getSelectedRoom2D=ab.bind(this),this.getSelectedWallFreeItemObj2D=rb.bind(this),this.saveItemRightBoxParameters=lb.bind(this),this.setShow3DStatus=this.setShow3DStatus.bind(this),this.onFloorplanDataLoadCallback=this.onFloorplanDataLoadCallback.bind(this),this.folderNameToModelsMapping={};for(const[o,n]of Object.entries(Ee))this.folderNameToModelsMapping[o]={...n,models:[...n.models],details:{...n.details},isTargetObject:function(e){return this.models.includes(e)}}}function Wg(e,t){console.log("Floorplan response data"),console.log(e),console.log("ucitavaj"),this.floorplanFloorsData=e[0].plan_object,this.floorplanFloorsData.forEach((e=>{Object.hasOwn(e,"floorID")||(e.floorID=(0,lr.A)()),Object.hasOwn(e,"floorHeight")||(e.floorHeight=e.wallHeight),e.wallData.forEach((t=>{Object.hasOwn(t,"wallHeight")?Object.hasOwn(t,"startHeight")&&Object.hasOwn(t,"endHeight")||(t.startHeight=t.endHeight=t.wallHeight):t.wallHeight=t.startHeight=t.endHeight=e.floorHeight}))})),this.floorplanFloorsPanelBoxRef.current.setFloorplanFloorsData(this.floorplanFloorsData,(()=>{this.setFloorplanEnvironmentSettings(e[0].plan_object,e[0].plan_general),this.determineBoxPlanNameValue("set_name",e[0].plan_name),this.loadFloorplanFloor(this.getLowestFloorData()),this.floorplanGeneral=e[0].plan_general;const i=this.getFloorplanWallsBBoxCoords();this.floorplanLastSavedTopLeftSvgCoords={x:i.minX,y:i.minY},t&&t(e)}))}function Ng(e){this.mounted=!0,this.qSVG=new Wc(this),this.editor=new Lc(this.boxWall,this.boxArea,this.panel,this.boxRoom,this.boxSurface,this.boxRib,this.areaValue,this.boxScale,this),this.linRef.current.addEventListener("wheel",(e=>{e.preventDefault(),this.handleMouseWheel(e)}),{passive:!1}),this.linRef.current.addEventListener("touchstart",(e=>{e.preventDefault(),this.handleTouchStart(e)}),{passive:!1}),this.linRef.current.addEventListener("touchmove",(e=>{e.preventDefault(),this.handleTouchMove(e)}),{passive:!1}),this.linRef.current.addEventListener("touchend",(t=>{t.preventDefault(),this.handleTouchEnd(e)(t)}),{passive:!1}),this.resizeAndKeyDownEventListenersControl(!1,!0);let t=this.linRef.current.getBoundingClientRect();this.taille_w=t.width,this.taille_h=t.height,this.offset={left:t.left,top:t.top,scrollY:window.scrollY},this.determineMaxZoomInLevel(),this.width_viewbox=this.taille_w,this.height_viewbox=this.taille_h,this.ratio_viewbox=this.height_viewbox/this.width_viewbox,this.setSvgViewBoxes();const i=()=>requestAnimationFrame((()=>{this.panel.current.style.transform="translateX(200px)",this.panelControl.current.style.transform=`translateX(${this.panel.current.style.width})`,this.floorplanItemsSelectionBoxContainerRef&&(this.floorplanItemsSelectionBoxContainerRef.current.style.transform=`translateX(${this.panel.current.style.width})`),this.state.show3D&&this.panel.current.addEventListener("transitionend",(()=>{this.rightControlsBox.current.style.transform="translateX(-150px)"}),{once:!0})}));this.isSmallScreen()?(this.onPanelControlClick(!1),i()):i()}function Vg(e,t){let i,o;if(e.touches){let t=e.changedTouches;i=t[0].pageX,o=t[0].pageY}else i=e.pageX,o=e.pageY;let n,s,a=(i-this.offset.left)*this.zoomFactor+this.originX_viewbox,r=(o-this.offset.scrollY-this.offset.top)*this.zoomFactor+this.originY_viewbox;return"on"===t&&(n=Math.round(a/this.grid)*this.grid,s=Math.round(r/this.grid)*this.grid),"off"===t&&(n=a,s=r),{x:n,y:s,xMouse:a,yMouse:r}}function Eg(e,t){return{screenX:(e-this.originX_viewbox)/this.zoomFactor+this.offset.left,screenY:(t-this.originY_viewbox)/this.zoomFactor+this.offset.scrollY+this.offset.top}}function Hg(e){this.linRef.current.style.cursor=e}function zg(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.activeRightBoxComponent?this.activeRightBoxComponent.containerRef.current:this.activeRightBoxComponent}function Gg(){let e=this.getActiveRightBox();e&&(e!==this.floorplanImageTools.current?e.containerRef.current.querySelector(".close-rightBox").click():this.uploadFloorplanImageToolsRef.current.onInsertFlorplanImageClose(null,!0))}function qg(e,t,i){i?e.classList.add("active"):e.classList.remove("active"),this.isSmallScreen()&&this.isPanelMaximized()&&this.onPanelControlClick(),this.isSmallScreen()?this.rightControlsBox.current.style.transform="translateX(-150px)":this.rightControlsBox.current.style.transform=`translateX(${i?t-150:-150}px)`,e.style.transform=`translateX(${t}px)`}function Ug(){this.preventFloorParametersOpening||this.floorParameters.current.setRightBoxAsActive()}function Yg(e,t,i,o,n,s,a){let r=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=[];if(l.params={},l.params.bindBox=!1,l.params.move=!1,l.params.resize=!1,l.params.rotate=!1,"onWall"===e&&(l.params.onWallOffsetAngle=this.getObjOnWallOffsetAngleValue(i)),"socle"===t&&l.push({path:"M "+-o/2+","+-n/2+" L "+-o/2+","+n/2+" L "+o/2+","+n/2+" L "+o/2+","+-n/2+" Z",fill:"#19ab7f",stroke:"#19ab7f",strokeDashArray:""}),"lights"===t){l.params.bindBox=!0,l.params.move=!0;const e=-o/2,t=.5*-n,s=o/2,a=.5*n;"onWall"===Q[this.getFloorplanItemDetails(i).itemType]?l.push({path:`M${o/2} ${-n/2} L${o/2} ${n/2} M${e} ${t} L${s} ${a} M${e} ${a} L${s} ${t}`,fill:"none",stroke:"#333",strokeDashArray:""}):l.push({path:`M${e} ${t} L${s} ${a} M${e} ${a} L${s} ${t}`,fill:"none",stroke:"#333",strokeDashArray:""}),l.params.width=o,l.params.height=n}if("furniture"===t)if(l.params.bindBox=!0,l.params.move=!0,l.params.resize=!0,l.params.rotate=!0,this.isFloorplanItemClassMember(i,"furniture_items","staircase")){l.push({path:"M "+-o/2+","+-n/2+" L "+-o/2+","+n/2+" L "+o/2+","+n/2+" L "+o/2+","+-n/2+" Z",fill:"#fff",stroke:"#333",strokeDashArray:""});const e=n/s;for(var h=1;h<s+1;h++)l.push({path:"M "+-o/2+","+(-n/2+h*e)+" L "+o/2+","+(-n/2+h*e),fill:"none",stroke:"#333",strokeDashArray:"none"})}else{const e=r?this.furniturePreviewAsyncPatternRef.current:this.furnitureAsyncPatternRef.current;!e.isPatternLoaded(i)&&e.loadPattern(i),l.push({path:"M "+-o/2+","+-n/2+" L "+-o/2+","+n/2+" L "+o/2+","+n/2+" L "+o/2+","+-n/2+" Z",fill:`url(#${i})`,strokeDashArray:""})}if("homeAssistant"===t&&"other_entity"===i&&(l.params.bindBox=!0,l.params.move=!0,l.params.resize=!1,l.params.rotate=!1,l.push({path:this.qSVG.circlePath(0,0,o),fill:"#fff",stroke:"#333",strokeDashArray:""})),"sensors"===t&&"sensor"===i&&(l.params.bindBox=!0,l.params.move=!0,l.params.resize=!1,l.params.rotate=!1,l.push({path:"M "+-o/2+",0 L "+-o/4+","+-o*Math.sqrt(3)/4+" L "+o/4+","+-o*Math.sqrt(3)/4+" L "+o/2+",0 L "+o/4+","+o*Math.sqrt(3)/4+" L "+-o/4+","+o*Math.sqrt(3)/4+" Z",fill:"#fff",stroke:"#333",strokeDashArray:""})),"doorWindow"===t&&(l.push({path:"M "+-o/2+","+-n/2+"L "+-o/2+","+n/2+"L "+o/2+","+n/2+"L "+o/2+","+-n/2+" Z",fill:"#ccc",stroke:"none",strokeDashArray:""}),ii(i)?l.push({path:"M "+-o/2+","+-n/2+" L "+-o/2+","+(-o-n/2)+"  A"+o+","+o+" 0 0,1 "+o/2+","+-n/2,fill:"none",stroke:this.colorWall,strokeDashArray:""}):oi(i)&&(l.push({path:"M "+-o/2+","+-n/2+" L "+-o/2+","+(-o/2-n/2)+" A"+o/2+","+o/2+" 0 0,1 0,"+-n/2,fill:"none",stroke:this.colorWall,strokeDashArray:""}),l.push({path:"M "+o/2+","+-n/2+" L "+o/2+","+(-o/2-n/2)+" A"+o/2+","+o/2+" 0 0,0 0,"+-n/2,fill:"none",stroke:this.colorWall,strokeDashArray:""})),l.params.resize=!0),"measure"===t&&(l.params.bindBox=!0,l.push({path:"M-"+o/2+",0 l10,-10 l0,8 l"+(o-20)+",0 l0,-8 l10,10 l-10,10 l0,-8 l-"+(o-20)+",0 l0,8 Z",fill:"#729eeb",stroke:"none",strokeDashArray:""})),"boundingBox"===t&&l.push({path:"M"+(-o/2-10)+","+(-n/2-10)+" L"+(o/2+10)+","+(-n/2-10)+" L"+(o/2+10)+","+(n/2+10)+" L"+(-o/2-10)+","+(n/2+10)+" Z",fill:"none",stroke:"#aaa",strokeDashArray:""}),"text"===t&&(l.params.bindBox=!0,l.params.move=!0,l.params.rotate=!0,l.push({text:s.text,x:"0",y:"0",fill:s.textColor,stroke:s.textColor,fontSize:s.size+"px",strokeWidth:"0px"})),"presence_area"===t){l.params.bindBox=!0,l.params.move=!0,l.params.resize=!1,l.params.rotate=!1;const e=-n/2;l.push({path:`M ${-o/2} ${-n/2+e} H ${o/2} V ${n/2+e} H ${-o/2} Z`,strokeDashArray:5.5,stroke:"#000",fill:"none"});const t=.1*o;l.push({path:`M ${-o/4} ${-n/4+e} m-${t},0 a${t},${t} 0 1,0 ${2*t},0 a${t},${t} 0 1,0 -${2*t},0`,fill:"#000"}),l.push({path:`M ${o/4} ${-n/8+e} m-${t},0 a${t},${t} 0 1,0 ${2*t},0 a${t},${t} 0 1,0 -${2*t},0`,fill:"#000"}),l.push({path:`M 0 ${n/4+e} m-${t},0 a${t},${t} 0 1,0 ${2*t},0 a${t},${t} 0 1,0 -${2*t},0`,fill:"#000"})}if("surface_area"===t)if(l.params.bindBox=!0,l.params.move=!0,l.params.resize=!0,"on_floor"===a.choiceOptionValue){l.params.rotate=!0;let e="none";const t=a.default_layout_option_prefix;if(t)if("image"===a[`${t}_type`]&&a[`${t}_image`]){const i=a[`${t}_image`].name;this.surfaceAreaAsyncPatternRef.current.getImagePathData(i)?!this.surfaceAreaAsyncPatternRef.current.isPatternLoaded(i)&&this.surfaceAreaAsyncPatternRef.current.loadPattern(i):(this.surfaceAreaAsyncPatternRef.current.addImagePathData([this.createSurfaceAreaPatternImagePathData(a[`${t}_image`])]),this.surfaceAreaAsyncPatternRef.current.loadPattern(i)),e=`url(#${i})`}else"color"===a[`${t}_type`]&&(e=a[`${t}_color`]);l.push({path:"M "+-o/2+","+-n/2+" L "+-o/2+","+n/2+" L "+o/2+","+n/2+" L "+o/2+","+-n/2+" Z",fill:e,stroke:"none"===e?"#cccccc":"none",strokeDashArray:""})}else"on_wall"===a.choiceOptionValue&&l.push({path:"M "+-o/2+","+-n/2+"L "+-o/2+","+n/2+"L "+o/2+","+n/2+"L "+o/2+","+-n/2+" Z",fill:"#808080",stroke:"none",strokeDashArray:""});return l.params.construcLength=l.length,l}function Xg(){this.getActiveRightBox()&&(this.hideActiveRightBox(),this.removeSelectedBinder())}function Kg(){this.isSmallScreen()?(this.hideRightBox(),this.minimizePanel(this.smallScreenMinimizedPanelSize)):this.panel.current.style.width===`${this.smallScreenMinimizedPanelSize}px`?this.minimizePanel(this.bigScreenMinimizedPanelSize):this.panel.current.style.width===`${this.smallScreenMaximizedPanelSize}px`&&this.maximizePanel(this.bigScreenMaximizedPanelSize)}function Zg(){if(this.isSmallScreen())this.rightControlsBox.current.style.transform="translateX(-150px)";else{const t=this.getActiveRightBox();this.rightControlsBox.current.style.transform=`translateX(${t?(e=t.containerRef.current.style.transform,-parseFloat(e.replace(/[^\d.]/g,""))-150):-150}px)`}var e}function $g(){console.log("delete pressed");let e=this.getActiveRightBox();if(e){let t=e.containerRef.current.querySelector(".button--type-delete");console.log("Delete button"),console.log(t),t&&t.click()}}function Jg(){return this.panel.current.style.width===`${this.smallScreenMaximizedPanelSize}px`||this.panel.current.style.width===`${this.bigScreenMaximizedPanelSize}px`}function Qg(){return this.taille_w<this.smallScreenPixelSize}function ef(){let e=this.boxPlanName.current.innerHTML;return""===e||"Draft(not saved)"===e?null:"*"===e[e.length-1]?e.slice(0,e.length-1):e}function tf(){this.linRef.current.setAttribute("viewBox",this.originX_viewbox+" "+this.originY_viewbox+" "+this.width_viewbox+" "+this.height_viewbox),this.previewSvgElementRef&&this.previewSvgElementRef.current.setAttribute("viewBox",this.originX_viewbox+" "+this.originY_viewbox+" "+this.width_viewbox+" "+this.height_viewbox)}function of(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.additionalParams.rotationAxis=t.rotationAxis,e.additionalParams.rotationDirection=t.rotationDirection,this.setWindowObjectRotationProperties(e),e.update(this),this.floorplan3DComponent.current?this.floorplan3DComponent.current.onSelectedWindowItemRotationOptionChange():i&&this.createWindowRotationPropertiesBinder(e)}function nf(e,t,i){const{translateX:o,translateY:n}=qt(e,i),s=this.qSVG.create("none","path",{d:"M"+t.point2.x+" "+t.point2.y+" Q "+t.controlPoint.x+" "+t.controlPoint.y+" "+t.point1.x+" "+t.point1.y,"stroke-width":2,stroke:"#f00",fill:"transparent","marker-end":"url(#window-rotation-direction-arrow-triangle)"});return{svgGroupElement:this.qSVG.create("none","g",{transform:`translate(${o}, ${n}) rotate(${e.angle+90},0,0) scale(${"up"===i?1:-1}, 1)`}),curveArrowPath:s}}function sf(e){if(!ni(e.type))return;const t=e.additionalParams.rotationDirection||"up";let i=e.additionalParams.rotationAxis||"start";oi(e.type)&&!this.windowDoubleAxisRotationOptions.find((e=>e.rotationAxis===i&&e.rotationDirection===t))&&(i=this.windowDoubleAxisRotationOptions.find((e=>e.rotationDirection===t)).rotationAxis);const o=Gt(i,t,e);e.additionalParams.rotationDirection=t,e.additionalParams.rotationAxis=i,e.additionalParams.curvePoints={point1:{x:o.curvePoint1X,y:o.curvePoint1Y},point2:{x:o.curvePoint2X,y:o.curvePoint2Y},controlPoint:{x:o.controlPointX,y:o.controlPointY}},e.additionalParams.controlPointOnWall={x:o.transformedControlPointOnWallCoordinates.x,y:o.transformedControlPointOnWallCoordinates.y},e.additionalParams.arrowControlPoint={x:o.transformedArrowControlPointCoordinates.x,y:o.transformedArrowControlPointCoordinates.y};const n=this.editor.rayCastingWall({x:e.x,y:e.y},!0);if(n){const t=e.angleSign;this.inWallonWallObjectBinderAngleCalculation(n,e.additionalParams.arrowControlPoint,e),e.additionalParams.arrowControlPointAngleSign=e.angleSign,e.angleSign=t}}function af(e,t,i){let o=this.qSVG.angleDeg(e.start.x,e.start.y,e.end.x,e.end.y),n=this.qSVG.vectorXY({x:e.start.x,y:e.start.y},{x:e.end.x,y:e.end.y}),s=this.qSVG.vectorXY({x:e.end.x,y:e.end.y},t),a=this.qSVG.vectorDeter(n,s);return i.angleSign=0,1===Math.sign(a)&&(i.angleSign=1,o+=180),o}function rf(e,t,i,o){let n=yt(e.equations.base,o[Zt(o)],t);return!!(this.qSVG.btwn(n[0].x,e.start.x,e.end.x)&&this.qSVG.btwn(n[0].y,e.start.y,e.end.y)&&this.qSVG.btwn(n[1].x,e.start.x,e.end.x)&&this.qSVG.btwn(n[1].y,e.start.y,e.end.y))&&(o.x=t.x,o.y=t.y,o.angle=this.inWallonWallObjectBinderAngleCalculation(e,i,o),o.limit=n,$t(o,e),o.update(this),!0)}function lf(e,t,i){const o=Bt(e.start,e.end),n=Zt(i);if(i[n]>o){const s={x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2};i.x=s.x,i.y=s.y,i.angle=this.inWallonWallObjectBinderAngleCalculation(e,t,i),i.limit=[{x:e.start.x,y:e.start.y},{x:e.end.x,y:e.end.y}],$t(i,e),i[n]=o,i.update(this)}}function hf(e,t,i,o){const n=o.obj,s=Zt(o),a=Bt(e.start,e.end),r=o[s];if(r>a)return this.setInWallOnWallObjectWidthToWallWidth(e,i,o),n&&(n[s]=o[s]),!0;if(this.wallItemObjOriginalWidth<a){const a=o[s];return o[s]=this.wallItemObjOriginalWidth,this.inWallonWallObjectBinderJoinToWall(e,t,i,o)?(n&&(n[s]=this.wallItemObjOriginalWidth),!0):(o[s]=a,this.inWallonWallObjectBinderJoinToWall(e,t,i,o))}return r===a?(o.angle=this.inWallonWallObjectBinderAngleCalculation(e,i,o),$t(o,e),o.update(this),!1):this.inWallonWallObjectBinderJoinToWall(e,t,i,o)}function cf(e){this.wallItemObjOriginalWidth=e[Zt(e)]}function df(e,t,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const s=[{x:e.x-i,y:e.y-o},{x:e.x-i,y:e.y+o},{x:e.x+i,y:e.y+o},{x:e.x+i,y:e.y-o}];Ut(s,e,f(n));for(let a=0;a<t.length;a++)if(this.qSVG.polygonPolygonIntersect(s,t[a].coords))return!1;return!0}function pf(e,t,i){const{titleText:o,deleteText:n}=this.determineObj2DInfoTexts(t,"rightBoxTextContents");this.wallItemToolsTitle.current.innerHTML=o,this.wallItemToolsDeleteButtonText&&(this.wallItemToolsDeleteButtonText.current.innerHTML=n),this.isFloorplanItemClassMember(t.type,"door")&&ii(t.type)?at(this.doorHinge.current,0):rt(this.doorHinge.current,0),this.wallItemToolsRef.current.setRightBoxAsActive(),this.setWallItemToolsValue(e,t),this.wallItemToolsCustomSetter&&this.wallItemToolsCustomSetter(t,i)}function mf(e,t,i){"text"===t.class?at(this.freeItemTextToolsRef.current,0):rt(this.freeItemTextToolsRef.current,0);const{titleText:o,deleteText:n}=this.determineObj2DInfoTexts(t,"rightBoxTextContents");this.freeItemTitleRef.current.innerHTML=o,this.freeItemDeleteButtonText&&(this.freeItemDeleteButtonText.current.innerHTML=n),this.freeItemToolsRef.current.setRightBoxAsActive(),this.setFreeItemToolsValue(e,t),"text"!==t.class&&this.freeItemToolsCustomSetter&&this.freeItemToolsCustomSetter(t,i)}function uf(e,t){const{titleText:i,deleteText:o}=this.determineObj2DInfoTexts(e,"rightBoxTextContents");this.sensorOtherToolsTitleRef.current.innerHTML=i,this.sensorOtherToolsDeleteRef&&(this.sensorOtherToolsDeleteRef.current.innerHTML=o),this.sensorOtherToolsRef.current.setRightBoxAsActive(),this.sensorOtherItemToolsCustomSetter&&this.sensorOtherItemToolsCustomSetter(e,t)}function gf(e,t){const{titleText:i,deleteText:o}=this.determineObj2DInfoTexts(e,"rightBoxTextContents");this.presenceAreaToolsTitle.current.innerHTML=i,this.presenceAreaToolsDelete&&(this.presenceAreaToolsDelete.current.innerHTML=o),this.presenceAreaToolsRef.current.setRightBoxAsActive(),this.setPresenceAreaToolsValue(e),this.presenceAreaItemToolsCustomSetter&&this.presenceAreaItemToolsCustomSetter(e,t)}function ff(e,t){let i="",o="",n={titleText:"",deleteText:""};if("text"===e.class)i="Text deleted",o="Modify text",n={titleText:"Modify text",deleteText:"Delete text"};else{const t=this.panelDrawingOptions2D.find((t=>t.binderObjType===e.type||t.isTargetObjectMode(e.type)));t?(i=t.deleteMessage,o=t.rightBoxOpenMessage,n=t.rightBoxTexts):console.error("Invalid determineObj2DInfoTexts")}switch(t){case"onDeleteMessage":return i;case"onRightBoxOpenMessage":return o;case"rightBoxTextContents":return n}}function bf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centimeter",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inch";const o=this.isAddOnApp?this.measureSystemContext.userUnit:this.context.userUnit;return Ht(parseFloat(e),o,"metric"===o?t:i,"meter",!0)*this.meter}function wf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centimeter",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inch",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.itemDimensionsDecimalPrecision;const n=this.isAddOnApp?this.measureSystemContext.userUnit:this.context.userUnit;return Et(e/this.meter,n,"meter","metric"===n?t:i,o,!1,!1,!0)}function Cf(e,t){const i=this.boxRoom.current.querySelector(`[data-room-id="${this.selectedRoomId}"]`),o=!T.isHexColor(e);i&&i.setAttribute("fill",o?e:"none"!==e?`url(#room-texture_${this.selectedRoomId})`:"none"),this.editor.renderRoomTextures(this.ROOM.map((i=>({...i,...i.id===this.selectedRoomId&&{...e&&{floorTexture:e},...t>=0&&{floorTextureRepeatCount:t}}}))))}function xf(e){if(!this.binder)return this.foncButton("select_mode"),!1;this.binder.id=(0,lr.A)(),this.OBJDATA.push(this.binder),this.binder.graph.remove(),this.boxCarpentry.current.appendChild(this.OBJDATA[this.OBJDATA.length-1].graph),this.binder=null,this.boxInfo.current.innerHTML=e,this.saveNeeded=!0,this.save(!1,!1)}function _f(e){const t=this.convertSvgToValueUnits(e,"centimeter","inch",this.wallHeightDecimalPrecision);this.floorHeightInputRef.current.setValue(t),this.floorHeightInputRef.current.setInitialValue(t),this.onFloorHeightInputChange(!1)}function yf(e,t,i){const o="groundColor"===i?this.groundColorDefaultValue:this.clockVisibilityDefaultValue;return t&&e?Object.hasOwn(t,i)?t[i]:Object.hasOwn(e[0],i)?e[0][i]:o:o}function Sf(e,t){this.groundColor=this.getFloorplanGroundColorClockVisibilityValue(e,t,"groundColor"),this.clockVisibility=this.getFloorplanGroundColorClockVisibilityValue(e,t,"clockVisibility")}function vf(e,t,i){const o="skyColor"===i?this.skyColorDefaultValue:this.skyColorDefaultType;return t&&e&&Object.hasOwn(t,i)?t[i]:o}function Df(e,t){this.skyColorType=this.getSkyColorTypeColorValue(e,t,"skyColorType"),this.skyColor=this.getSkyColorTypeColorValue(e,t,"skyColor")}function Tf(e){this.ambientLightIntensity=e&&Object.hasOwn(e,"ambientLightIntensity")?e.ambientLightIntensity:this.ambientLightIntensityDefaultValue}function jf(e,t){let i=[],o=[];this.setFloorplanGroundColorClockVisibilityValues(e,t),this.setSkyColorTypeColorValue(e,t),this.setAmbientLightIntensityValue(t),this.floorplanEnvironmentParametersRef&&this.floorplanEnvironmentParametersRef.current.setEnvironmentParametersValues(),this.layersListOptionsRef.current.setLayersListOptions(t);for(let n=0;n<e.length;n++)for(let t=0;t<e[n].objData.length;t++){const s=Q[this.getObjectItemType(e[n].objData[t].type)];if(s&&e[n].objData[t].family!==s&&(console.log("Object family change",e[n].objData[t].type,e[n].objData[t].family,s),e[n].objData[t].family=s),"furniture"!==e[n].objData[t].class||this.isFloorplanItemClassMember(e[n].objData[t].type,"furniture_items","staircase")||i.find((i=>i.name===e[n].objData[t].type))||!this.furnitureDimensions[e[n].objData[t].type]||i.push(e[n].objData[t].type),"text"===e[n].objData[t].class&&"text_txt"!==e[n].objData[t].type&&(e[n].objData[t].value.textColor=e[n].objData[t].type,e[n].objData[t].type="text_txt"),"surface_area"===e[n].objData[t].class&&"on_floor"===e[n].objData[t].additionalParams.choiceOptionValue){const i=e[n].objData[t].additionalParams.default_layout_option_prefix;i&&"image"===e[n].objData[t].additionalParams[`${i}_type`]&&e[n].objData[t].additionalParams[`${i}_image`]&&o.push(this.createSurfaceAreaPatternImagePathData(e[n].objData[t].additionalParams[`${i}_image`]))}}this.furnitureAsyncPatternRef.current.addImagePathData(this.getFurniturePatternImagePaths()),i.forEach((e=>this.furnitureAsyncPatternRef.current.loadPattern(e))),this.surfaceAreaAsyncPatternRef.current.addImagePathData(o),o.forEach((e=>this.surfaceAreaAsyncPatternRef.current.loadPattern(e.name))),this.wallMaterialsAsyncPatternRef.current.onFloorplanDrawedCallback()}function If(e){e?(this.boxWallCoordinates={},ht(e,this.boxWallCoordinates)):this.boxWallCoordinates={minX:0,maxX:0,minY:0,maxY:0,width:0,height:0}}function Pf(){this.freeItemMaterialsComponentRef.current&&this.freeItemMaterialsComponentRef.current.reset(),this.wallItemMaterialsComponentRef.current&&this.wallItemMaterialsComponentRef.current.reset()}function Of(e){return"other_entity"===e?"homeAssistant":"sensor"===e?"sensors":"generic_surface_area"===e?"surface_area":"generic_presence_area"===e?"presence_area":this.isFloorplanItemClassMember(e,"light")?"lights":this.isFloorplanItemClassMember(e,"door")||this.isFloorplanItemClassMember(e,"window")?"doorWindow":"furniture"}function kf(e){return{name:e,folder:this.getObjectFolderName(e),width:r(this.furnitureDimensions[e].width,0),height:r(this.furnitureDimensions[e].height,0),mirrorImage:fe.includes(e),objId:this.folderNameToModelsMapping[this.getObjectFolderName(e)].details[e].objId}}function Ff(){return Object.values(this.folderNameToModelsMapping).filter((e=>"furniture"===this.getObjectClass(e.models[0]))).flatMap((e=>e.models)).filter((e=>this.furnitureDimensions[e])).map((e=>this.createFurniturePatternImagePathData(e)))}function Mf(e){return{name:e.name,width:r(e.imageWidth,0),height:r(e.imageHeight,0),objId:e.objId,format:e.format}}function Af(e){for(const[t,i]of Object.entries(this.folderNameToModelsMapping))if(i.models.includes(e))return t;return""}function Rf(e){for(const t of Object.values(this.folderNameToModelsMapping))if(t.models.includes(e))return t.details[e].itemType;return""}function Lf(e){if((e=>!!e.object_metadata.details)(e))if(""!==this.getObjectFolderName(e.object_external_id))this.folderNameToModelsMapping[this.getObjectFolderName(e.object_external_id)].details[e.object_external_id].itemType=e.object_metadata.details.itemType;else{let t;e.object_metadata.objCategory?t=e.object_metadata.objCategory:"lights"===e.object_metadata.objClass&&(t="light");const i=ye(e.object_metadata.details.dimensions.width3D,e.object_metadata.details.dimensions.depth3D,e.object_metadata.details.dimensions.height3D,e.object_metadata.details.author,e.object_name,e.object_metadata.details.itemType);i.objId=e.object_id;let o=t;if(!this.folderNameToModelsMapping[o]){const e=this.panelDrawingOptions2D.find((e=>e.itemsClass===t));e&&e.itemsSubClasses&&(o=this.getItemsClassSubClassFolderName(e.itemsSubClasses[0]),console.log("objectFolderName changed from "+t+" to "+o))}if(!this.folderNameToModelsMapping[o])return;this.folderNameToModelsMapping[o].models.push(e.object_external_id),this.folderNameToModelsMapping[o].details[e.object_external_id]=i,"furniture"===e.object_metadata.objClass&&(this.furnitureDimensions[e.object_external_id]={width:r(e.object_metadata.thumbnailTopWidth,0),height:r(e.object_metadata.thumbnailTopHeight,0)})}}function Bf(){this.removeBinder(),this.removeSelectedBinder(),this.boxUnconnectedWallNodes&&Ct(this.boxUnconnectedWallNodes.current),this.previousFloorplanItemBinder=null}function Wf(){let e=this.floorplanFloorsData[0];for(let t=1;t<this.floorplanFloorsData.length;t++)this.floorplanFloorsData[t].floorNumber<e.floorNumber&&(e=this.floorplanFloorsData[t]);return e}function Nf(){let e=this.floorplanFloorsData[0];for(let t=1;t<this.floorplanFloorsData.length;t++)this.floorplanFloorsData[t].floorNumber>e.floorNumber&&(e=this.floorplanFloorsData[t]);return e}function Vf(e,t){let i=this.floorThickness+this.roomFloorVerticalOffset;for(let o=0;o<e;o++){const e=this.floorplanFloorsData.find((e=>e.floorNumber===o));i+=e?e.floorHeight:this.wallHeightDefaultValue,i+=this.floorThickness+this.roomFloorVerticalOffset}return t?i*this.floorplan3DScaleFactor:i}function Ef(e){this.floorHeight=e&&e.floorHeight||this.wallHeightDefaultValue,this.setFloorHeightInputValue(this.floorHeight),this.floorNote=e.floorNote,this.floorNoteInputRef.current.setFloorNoteValue(e.floorNote),this.floorNumber=e.floorNumber,this.floorNumberInputRef.current.setFloorNumber(e.floorNumber)}function Hf(e){const t=new Bc(e.family,e.class,e.type,{x:e.x,y:e.y},e.angle,e.angleSign,e.size,e.hinge,e.thick,e.value,{...e.additionalParams},this);return t.id=e.id,t.limit=e.limit,t}function zf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];null!==e?t=e===this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber?this.WALLS:this.floorplanFloorsData.find((t=>t.floorNumber===e)).wallData:this.floorplanFloorsData.forEach((e=>t.push(...e.wallData)));let i=dt(t);return i?ht(i):(i={},i.minX=i.minY=i.maxX=i.maxY=i.width=i.height=0),i}function Gf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];if(null!==e?t=e===this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber?this.OBJDATA:this.floorplanFloorsData.find((t=>t.floorNumber===e)).objData:this.floorplanFloorsData.forEach((e=>t.push(...e.objData.filter((e=>""!==this.getObjectFolderName(e.type)))))),t.length>0){let e=ct(t);return ht(e),e}return null}function qf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];const i=this.getFloorplanWallsBBoxCoords(e);0!==i.width&&0!==i.height&&t.push(i);const o=this.getFloorplanObjectsBBoxCoords(e);if(o&&t.push(o),t.length>0){const e=St(t);return{...e[1],width:e[1].maxX-e[1].minX,height:e[1].maxY-e[1].minY}}return null}function Uf(e){for(let t in e)null!=e[t].child&&(e[t].child=e[e[t].child]),null!=e[t].parent&&(e[t].parent=e[e[t].parent])}function Yf(e){Ct(this.boxFloorDrawingHelper.current);const t=this.floorplanFloorsData.filter((t=>t.floorNumber<e.floorNumber));if(t.length>0){t.sort(((e,t)=>t.floorNumber-e.floorNumber)),this.setWallsChildParentValues(t[0].wallData),this.editor.wallsComputing(t[0].wallData,!1,this.boxFloorDrawingHelper.current),t[0].roomData.forEach((e=>this.qSVG.create(this.boxFloorDrawingHelper,"path",{class:"room-path",d:this.createRoomPath(e),"fill-rule":"evenodd","stroke-width":0})));const e=dt(t[0].wallData);if(e){const t=mt(e);this.qSVG.create(this.boxFloorDrawingHelper,"text",{x:t.x,y:t.y,"font-size":"1em",stroke:"#555","text-anchor":"middle"})}}}function Xf(e){const t=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();if(!t)return this.getLowestFloorData().floorNumber;for(let i=0;i<this.floorplanFloorsData.length;i++){if((t.floorNumber===this.floorplanFloorsData[i].floorNumber?this.OBJDATA:this.floorplanFloorsData[i].objData).find((t=>t.id===e.id)))return this.floorplanFloorsData[i].floorNumber}}function Kf(e,t){e.hinge=t,e.update(this),this.save(!1,!0)}function Zf(e){return{presenceAreaWidth:3*this.meter,presenceAreaHeight:3*this.meter,presenceAreaRotation:0,detectedObjectToModelMappings:new Array(e||this.presenceAreaDetectionObjectsDefaultLimit).fill(null).map(((e,t)=>({detectedObjectName:`Detected object ${t+1}`,detectedObjectField:`detected_object_${t}`,modelType:this.folderNameToModelsMapping[this.getItemsClassSubClassFolderName("presence")].models[0]})))}}function $f(e){const t=this.getObj2DFloorNumber(e),i=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();return this.editor.nearWall({x:e.x,y:e.y},i&&void 0!==t&&t!==i.floorNumber?this.floorplanFloorsData.find((e=>e.floorNumber===t)).wallData:this.WALLS).wall}function Jf(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{offsetValue:((i=i||this.getWallItemObj2DTargetWall2D(e)).thick/2+t)*o,wall2D:i}}function Qf(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=e.additionalParams.depth3D,n=(t=t||this.getWallItemObj2DTargetWall2D(e)).thick;let s;if(Ce[e.type])s=0;else if(n>o)s=(n/2-o/2)*i;else{s=-(o/2-n/2)*i*(we[e.type]?-1:1)}return{offsetValue:s,wall2D:t}}function eb(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=this.panelDrawingOptions2D.find((e=>e.itemsClass===t));if(!o)return console.error("isFloorplanItemClassMember: targetItemClass not found"),!1;if(i&&!o.itemsSubClasses)return console.error("isFloorplanItemClassMember: targetItemClass doesnt have sub classes"),!1;if(i){const t=this.getItemsClassSubClassFolderName(i);return this.folderNameToModelsMapping[t]?this.folderNameToModelsMapping[t].isTargetObject(e):(console.error("isFloorplanItemClassMember: targetItemSubClass not found"),!1)}return o.isTargetObjectMode(e)}function tb(e){const t=Object.values(this.folderNameToModelsMapping).find((t=>t.isTargetObject(e)));return t&&t.details[e]}function ib(e){const t=this.panelDrawingOptions2D.find((t=>t.itemsClass===e));return t&&t.itemsSubClasses&&console.error("Items class with subclass folder name requested"),e}function ob(e){return this.isFloorplanItemClassMember(e,"light")?90:0}function nb(e){return{itemsSubClasses:Object.entries(this.folderNameToModelsMapping).filter((t=>{let[,i]=t;return i[e]})).map((e=>{let[t]=e;return t})),isTargetObjectMode:t=>{for(const i of Object.values(this.folderNameToModelsMapping))if(i[e]&&i.isTargetObject(t))return!0;return!1}}}function sb(){return this.WALLS.find((e=>e.wallId===this.selectedBinder.wall.wallId))}function ab(){return this.ROOM.find((e=>e.id===this.selectedRoomId))}function rb(e){return this.OBJDATA.find((t=>t.id===e))}function lb(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.saveNeeded&&(this.floorplan3DComponent.current?this.floorplan3DComponent.current.onSaveFloorplan3D((()=>e&&this.floorplan3DComponent.current.onFloorplanItemUnselect())):this.onSaveFloorplan((()=>e&&this.hideActiveRightBox())))}function hb(e){this.resetKlet3DBinderParams(),Zu.call(this,e)}function cb(){this.resetKlet3DBinderParams(),$u.call(this)}function db(e){tg.call(this,e,(()=>{console.log("On escape binder"),console.log(this.binder),this.removeBinder(),this.cursor("default"),this.boxInfo.current.innerHTML="Select mode",this.foncButton("select_mode")}))}function pb(e){const t=this.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.id))));return t?this.getObjectConnectorKlet3DBinderData(t[this.connectorIDbinderIDPropertyName]):null}function mb(e){return this.objectConnectorAvailableClasses.find((t=>t.isBindingObjectType(e.type)))}function ub(e){return this.getObjectConnectorClassParamsForObject2D(e).getBindingParametersDefaultValues(e)}function gb(e){return this.getObjectConnectorClassParamsForObject2D(e).bindingObjectLevelParameters}function fb(){if(this.bindingRightBoxComponentRef.current){const e=this.bindingRightBoxComponentRef.current.activeParameters.current;e&&e.resetValues&&e.resetValues()}}function bb(e,t){let i=!1,o=!1;for(let n=0;n<this.objectConnectorAvailableClasses.length;n++){const s=this.objectConnectorAvailableClasses[n].isBindingObjectType(e),a=this.objectConnectorAvailableClasses[n].isBindingObjectType(t);if(s&&a)return!0;s&&(i=!0),a&&(o=!0)}return!i&&!o}const wb=(e,t)=>{let i=e;for(let o=0;o<t.length&&void 0!==i;o++)i=i[t[o]];return i},Cb=e=>1===e.length&&"toggle_on_click_status"===e[0];function xb(e,t){return!!Cb(t)||wb(this.getKlet3DBinderObjectLevelParams(e),t)}function _b(e,t,i,o,n,s){const a=void 0!==n?n:o?o.selectInput?o.value.value:o.value:void 0,r=e.objID.find((e=>e.id===t.id));let l;l=this.isObjectLevelParam(t,i)&&r?r:e.params;for(let h=0;h<i.length;h++){const e=i[h];h===i.length-1?s?(Array.isArray(l[e])||(l[e]=[]),l[e].push(a)):l[e]=a:(void 0===l[e]&&(l[e]={}),l=l[e])}}function yb(e,t,i){const o=!Cb(i)&&wb(this.getKlet3DBinderParamsDefaultValues(t),i);if(e){const n=wb(e.params,i),s=e.objID.find((e=>e.id===t.id)),a=s?wb(s,i):void 0;return this.isObjectLevelParam(t,i)&&s?p(a)?p(n)?o:n:a:p(n)?s&&!p(a)?a:o:n}return o}function Sb(e,t){const i=this.klet3DLastSavedData.find((e=>e.objID.find((e=>e.id===t.id)))),o=[{previousField:"screen_is_light"},{previousField:"screen_3d_glow_effect"},{previousField:"screen_3d_glow_factor"},{previousField:"screen_3d_glow_spread"}];return o.forEach((e=>e.previousValue=this.getKlet3DDataParamValue(i,t,[e.previousField]))),e.map((e=>({...e,value:this.getKlet3DDataParamValue(i,t,[e.field]),...e.form?{form:e.form.map((e=>{const n=this.isObjectLevelParam(t,[e.field])?i.objID.find((e=>e.id===t.id)):i.params;let s;return s=Object.hasOwn(n,e.field)?this.getKlet3DDataParamValue(i,t,[e.field]):o.find((t=>e.field.includes(t.previousField.replace(/^screen/,"")))).previousValue,{...e,value:s}}))}:{}})))}class vb extends o.Component{constructor(){super(),this.onConfigureEntityClick=async()=>{this.props.mainComponentThis.hasBrowserModIntegration&&await this.props.mainComponentThis.openBrowserModMoreInfoPopupForEntity(this.props.targetKlet3DBinder.entity_id)},this.onConfigureEntityClick=this.onConfigureEntityClick.bind(this)}render(){return"HomeAssistant"===this.props.mainComponentThis.props.addOnIntegrationType?(0,a.jsxs)(xo,{children:[(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsx)(go,{disabled:!this.props.mainComponentThis.hasBrowserModIntegration,type:this.props.mainComponentThis.hasBrowserModIntegration?"light-blue":"dull",onClick:this.onConfigureEntityClick,children:"More info"})}),!this.props.mainComponentThis.hasBrowserModIntegration&&(0,a.jsxs)("div",{className:"form-control feedback center-spike browser-mod-feedback",children:["Install"," ",(0,a.jsx)("a",{target:"_blank",href:"https://github.com/thomasloven/hass-browser_mod",rel:"noreferrer",children:"Browser Mod"})," ","integration in order to use this feature"]})]}):null}}const Db=vb;class Tb extends o.Component{render(){return(0,a.jsx)(xo,{children:(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:this.props.toggleOnClickItem.label,infoText:this.props.toggleOnClickItem.infoText,explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:this.props.toggleOnClickItem.value,onChange:this.props.onChangeHandler(this.props.toggleOnClickItem)})})}}const jb=Tb;class Ib extends o.Component{constructor(e){var t;super(),t=this,this.simpleOnChangeHandler=e=>t=>{const i="checkbox"===e.type?!e.value:t&&t.target?t.target.value:t,o=this.state.edit.map((t=>({...t,value:t.field===e.field?i:t.value,...t.form?{form:t.form.map((t=>({...t,value:t.field===e.field?i:t.value})))}:{}})));this.setState({edit:o,needsSave:this.calculateNeedsSaveCustom(o,this.state.originalData)})},this.simpleOnLiveChangeHandler=e=>t=>{const i="checkbox"===e.type?!e.value:t&&t.target?t.target.value:t;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field],null,e.selectInput?i.value:i),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),this.simpleOnChangeHandler(e)("checkbox"===e.type?{target:{value:i}}:t)},this.simpleOnSaveHandler=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(j([...t.state.edit.map((e=>e)),...t.state.edit.filter((e=>e.form)).flatMap((e=>e.form))],(e=>{t.setState({edit:t.state.edit.map((t=>({...e.find((e=>e.field===t.field)),...t.form?{form:t.form.map((t=>e.find((e=>e.field===t.field))))}:{}})))})}))){let o=[...t.props.mainComponentThis.klet3DLastSavedData],n=o.find((e=>e[t.props.mainComponentThis.connectorIDbinderIDPropertyName]===t.props.klet3DBinder[t.props.mainComponentThis.connectorIDbinderIDPropertyName]));n&&(i?i(n):t.state.edit.forEach((e=>{let i=[e];e.form&&e.form.forEach((e=>i.push(e))),i.forEach((e=>t.props.mainComponentThis.setKlet3DDataParamValue(n,t.props.targetObject2D,[e.field],e)))})),t.callSaveAPI(n,o,e))}},this.update3DViewState=()=>{const e=this.props.mainComponentThis.floorplan3DComponent.current.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));e&&e.update(this.props.mainComponentThis.floorplan3DComponent.current.getObjectConnectorParamsData(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName],e.bindedObjects[0].object2D))},this.simpleResetValues=e=>{this.state.needsSave&&(console.log("original data",this.state.originalData,this.props.klet3DBinder),this.state.originalData.forEach((t=>{let i,o=[];(i=e.find((e=>e.field===t.field)))&&(o.push(t),t.form&&t.form.forEach((e=>{i.form.find((t=>t.field===e.field))&&o.push(e)}))),o.forEach((e=>this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field],e)))})),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState())},this.callSaveAPI=(e,t,i)=>{let o={entitydata:t};this.setState({loading:!0},(()=>{const n=()=>{this.props.mainComponentThis.klet3DLastSavedData=t,this.props.updateKlet3DBinderState(e),i&&i(),this.setState({loading:!1,originalData:this.state.edit,needsSave:!1})};this.props.callAPIForSave?Ii.post.call(this,`/klet3d/entity/${this.props.mainComponentThis.props.floorplanID}/${this.props.mainComponentThis.props.licenseKey}`,o,(e=>{console.log("Klet post API response"),console.log(e),n()})):n()}))},this.onSaveClick=()=>{this.simpleOnSaveHandler(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null,this.klet3DDataCustomSetterMethod)},this.resetValues=()=>{this.props.liveChangeEnabled&&this.simpleResetValues(this.parametersFormItems)},this.calculateNeedsSaveCustom=(e,t)=>{for(let i=0;i<t.length;i++){if(e[i].value!==t[i].value)return!0;if(e[i].form)for(let o=0;o<e[i].form.length;o++)if(e[i].form[o].value!==t[i].form[o].value)return!0}return!1},this.getEditFormItems=()=>this.props.toggleOnClickEnabled?this.state.edit.filter((e=>"toggle_on_click_status"!==e.field)):this.state.edit,this.simpleParametersInitialSetter=(e,t)=>{const i=e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);return e.selectInput?e.options.find((e=>e.value===t)):t},o=e.map((e=>({...e,value:i(e),...e.form?{form:e.form.map((e=>({...e,value:i(e)})))}:{}})));this.setState({edit:o,originalData:o},(()=>t&&t()))},this.renderCommonFooterUI=(e,t)=>{const{needsSave:i,loading:n,edit:s}=this.state,r=s.find((e=>"toggle_on_click_status"===e.field));return(0,a.jsxs)(o.Fragment,{children:[this.props.toggleOnClickEnabled&&r&&(0,a.jsx)(jb,{toggleOnClickItem:r,onChangeHandler:this.simpleOnChangeHandler}),e&&(0,a.jsx)(Db,{ref:this.browserModPopupComponentRef,targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),t&&(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsx)(wo,{disabled:!i,buttonType:i?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:n,spinnerLoading:!0,onClick:this.onSaveClick})})]})},this.state={edit:[],originalData:[],needsSave:!1,loading:!1},this.browserModPopupComponentRef=o.createRef(),this.parametersFormItems=[...e.parametersItems],e.toggleOnClickEnabled&&this.parametersFormItems.push(...Qi),this.simpleOnChangeHandler=this.simpleOnChangeHandler.bind(this),this.simpleOnLiveChangeHandler=this.simpleOnLiveChangeHandler.bind(this),this.update3DViewState=this.update3DViewState.bind(this),this.callSaveAPI=this.callSaveAPI.bind(this),this.simpleOnSaveHandler=this.simpleOnSaveHandler.bind(this),this.simpleResetValues=this.simpleResetValues.bind(this),this.simpleParametersInitialSetter=this.simpleParametersInitialSetter.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.renderCommonFooterUI=this.renderCommonFooterUI.bind(this),this.resetValues=this.resetValues.bind(this),this.calculateNeedsSaveCustom=this.calculateNeedsSaveCustom.bind(this),this.getEditFormItems=this.getEditFormItems.bind(this)}componentDidMount(){this.simpleParametersInitialSetter(this.parametersFormItems,this.componentDidMountCallback)}componentWillUnmount(){this.props.liveChangeEnabled&&this.resetValues()}}const Pb=Ib;var Ob=i(7103),kb=i.n(Ob);class Fb extends Pb{render(){const e=this.getEditFormItems();return 0===e.length?null:(0,a.jsxs)(xo,{children:[(0,a.jsx)(zo,{labelText:"States",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),e.map((e=>(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field))),this.renderCommonFooterUI(!0,!0)]})}}Fb.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const Mb=Fb;class Ab extends Pb{constructor(e){super(e),this.spotDistanceSliderToSvg=e=>e*this.SPOT_DISTANCE_STEP,this.spotDistanceSvgToSlider=e=>e/this.SPOT_DISTANCE_STEP,this.onSpotLightDistanceValueChange=e=>t=>{const i=this.spotDistanceSliderToSvg(t);this.simpleOnLiveChangeHandler(e)(i),this.setState({edit:this.state.edit.map((i=>({...i,value:i.field===e.field?t:i.value})))})},this.klet3DDataCustomSetterMethod=e=>{this.state.edit.forEach((t=>{"spot_distance"===t.field?this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],null,this.spotDistanceSliderToSvg(t.value)):this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],t)}))},this.resetValues=()=>{this.state.needsSave&&(console.log("original data",this.state.originalData,this.props.klet3DBinder),this.state.originalData.forEach((e=>{if(this.props.parametersItems.find((t=>t.field===e.field))){const t=e.selectInput?e.value.value:e.value;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field],null,"spot_distance"===e.field?this.spotDistanceSliderToSvg(t):t)}})),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState())},this.spotLightDistanceSlider=o.createRef(),this.spotLightDistanceSliderInput=o.createRef(),this.spotDistanceSliderToSvg=this.spotDistanceSliderToSvg.bind(this),this.spotDistanceSvgToSlider=this.spotDistanceSvgToSlider.bind(this),this.onSpotLightDistanceValueChange=this.onSpotLightDistanceValueChange.bind(this),this.klet3DDataCustomSetterMethod=this.klet3DDataCustomSetterMethod.bind(this),this.resetValues=this.resetValues.bind(this)}componentDidMount(){const e=this.props.parametersItems.map((e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);if(e.selectInput)return{...e,value:e.options.find((e=>e.value===t))||e.options[0]};return"spot_distance"===e.field?(this.SPOT_DISTANCE_STEP=this.props.mainComponentThis.SPOT_DISTANCE_MAX/e.max,{...e,value:this.spotDistanceSvgToSlider(t)}):{...e,value:t}}));this.setState({edit:e,originalData:e})}render(){const e=this.getEditFormItems(),t=e.filter((e=>"switched_on_state"===e.field||"switched_off_state"===e.field)),i=e.find((e=>"power_sync"===e.field)),o=e.find((e=>"power"===e.field)),n=e.find((e=>"color_sync"===e.field)),s=e.find((e=>"color"===e.field)),l=e.find((e=>"variant"===e.field)),h=e.find((e=>"spot_angle"===e.field)),c=e.find((e=>"spot_distance"===e.field));return 0===e.length?null:(console.log(s.value),(0,a.jsxs)(xo,{containerClasses:"light-parameters-container",children:[(0,a.jsx)(zo,{labelText:"States",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","light values which correspond to given states"]})}),t.map(((e,i)=>(0,a.jsx)(nn,{containerStyle:{marginBottom:i===t.length-1?"1rem":"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field))),(0,a.jsxs)(xo,{label:o.label,children:[(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:i.label,infoText:"If checked, power will be automatically set from HomeAssistant. If unchecked, power will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:i.value||i.defaultValue,onChange:this.simpleOnLiveChangeHandler(i)}),!i.value&&(0,a.jsx)(Ro,{placeholder:o.placeholder,inputStep:o.step,inputMin:o.min,inputMax:o.max,usePropsValue:!0,value:o.value,onInputValueChanged:this.simpleOnLiveChangeHandler(o)})]}),(0,a.jsxs)(xo,{label:s.label,children:[(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:n.label,infoText:"If checked, color will be automatically set from HomeAssistant. If unchecked, color will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:n.value||n.defaultValue,onChange:this.simpleOnLiveChangeHandler(n)}),!n.value&&(0,a.jsx)(Xo,{item:s,onChange:this.simpleOnLiveChangeHandler,boxContainer:this.props.mainComponentThis.getActiveRightBox(!0)})]}),(0,a.jsx)(Qo,{selectInput:!0,fullWidth:!0,label:l.label,item:l,onChange:this.simpleOnLiveChangeHandler}),l.value&&"spot"===l.value.value&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(xo,{label:h.label,children:(0,a.jsx)(Ro,{placeholder:h.placeholder,inputStep:h.step,inputMin:h.min,inputMax:h.max,usePropsValue:!0,value:h.value,onInputValueChanged:this.simpleOnLiveChangeHandler(h)})}),(0,a.jsx)(xo,{children:(0,a.jsx)(kn,{ref:this.spotLightDistanceSliderInput,sliderInputRef:this.spotLightDistanceSlider,valueLabelText:(0,a.jsxs)("div",{style:{display:"flex"},children:["Distance:\xa0",r(c.value,Math.log(c.step))]}),defaultValue:r(c.value,Math.log(c.step)),minValue:c.min,maxValue:c.max,sliderStep:c.step,onSliderValueChanged:this.onSpotLightDistanceValueChange(c)})})]}),this.renderCommonFooterUI(!0,!0)]}))}}Ab.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const Rb=Ab;class Lb extends Pb{constructor(e){super(e),this.setPercentageNumberSliderInputValues=e=>{this.fanPercentageNumberSliderInput.current&&(this.fanPercentageSlider.current.value=e,this.fanPercentageNumberSliderInput.current.inputNumberComponentRef.current.setValue(e))},this.componentDidMountCallback=()=>this.setPercentageNumberSliderInputValues(this.state.edit.find((e=>"percentage"===e.field)).value),this.fanPercentageNumberSliderInput=o.createRef(),this.fanPercentageSlider=o.createRef(),this.setPercentageNumberSliderInputValues=this.setPercentageNumberSliderInputValues.bind(this),this.componentDidMountCallback=this.componentDidMountCallback.bind(this)}render(){const e=this.getEditFormItems(),t=e.find((e=>"direction"===e.field)),i=e.find((e=>"direction_sync"===e.field)),o=e.find((e=>"percentage"===e.field)),n=e.find((e=>"percentage_sync"===e.field)),s=e.filter((e=>"switched_on_state"===e.field||"switched_off_state"===e.field));return 0===e.length?null:(0,a.jsxs)(xo,{containerClasses:"fan-parameters-container",children:[(0,a.jsxs)(xo,{label:t.label,children:[(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:i.label,infoText:"If checked, direction will be automatically set from HomeAssistant. If unchecked, direction will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:i.value||i.defaultValue,onChange:this.simpleOnLiveChangeHandler(i)}),!i.value&&t&&(0,a.jsx)(Qo,{selectInput:!0,fullWidth:!0,item:t,onChange:this.simpleOnLiveChangeHandler})]}),(0,a.jsxs)(xo,{label:(0,a.jsxs)("div",{style:{display:"flex"},children:["Fan percentage:\xa0",n.value?"Synced":`${o.value} %`]}),children:[(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:n.label,infoText:"If checked, percentage will be automatically set from HomeAssistant. If unchecked, percentage will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:n.value||n.defaultValue,onChange:this.simpleOnLiveChangeHandler(n)}),!n.value&&(0,a.jsx)(kn,{ref:this.fanPercentageNumberSliderInput,sliderInputRef:this.fanPercentageSlider,valueLabelText:"",defaultValue:o.value,sliderStep:o.step,minValue:o.min,maxValue:o.max,onSliderValueChanged:e=>{this.setPercentageNumberSliderInputValues(e),this.simpleOnLiveChangeHandler(o)(e)}})]}),(0,a.jsx)(zo,{labelText:"States",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","fan values which correspond to given states"]})}),s.map(((e,t)=>(0,a.jsx)(nn,{containerStyle:{marginBottom:t===s.length-1?"1rem":"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field))),this.renderCommonFooterUI(!0,!0)]})}}Lb.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const Bb=Lb;class Wb extends Pb{constructor(e){super(e),this.onCoverParameterValueChange=e=>t=>{if("closing_direction"===e.field){const i=t&&t.target?t.target.value:t;this.setState({edit:this.state.edit.map((e=>({...e,error:"open_offset"===e.field||"closed_offset"===e.field?this.offsetValuesErrorCheck(this.state.edit.find((e=>"open_offset"===e.field)).value,this.state.edit.find((e=>"closed_offset"===e.field)).value,i.value,e.field):e.error})))},(()=>this.simpleOnChangeHandler(e)(t)))}else this.simpleOnChangeHandler(e)(t)},this.klet3DDataCustomSetterMethod=e=>{this.state.edit.forEach((t=>{"open_offset"===t.field||"closed_offset"===t.field?this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],null,this.props.mainComponentThis.convertValueToSvgUnits(t.value)):this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],t)}))},this.onOpenClosedOffsetChangeHandler=e=>t=>{const i="open_offset"===e.field?t&&t.target?t.target.value:t:this.state.edit.find((e=>"open_offset"===e.field)).value,o="closed_offset"===e.field?t&&t.target?t.target.value:t:this.state.edit.find((e=>"closed_offset"===e.field)).value,n=this.state.edit.map((t=>({...t,value:t.field===e.field?"open_offset"===e.field?i:o:t.value,error:"open_offset"===t.field||"closed_offset"===t.field?this.offsetValuesErrorCheck(i,o,this.state.edit.find((e=>"closing_direction"===e.field)).value.value,t.field):t.error})));this.setState({edit:n,needsSave:I(n,this.state.originalData)})},this.offsetValuesErrorCheck=(e,t,i,o)=>{const n=this.props.mainComponentThis.convertValueToSvgUnits(e),s=this.props.mainComponentThis.convertValueToSvgUnits(t),a="top"===i?this.props.targetObject2D.additionalParams.height3D:this.props.targetObject2D.additionalParams.width3D;if(("open_offset"===o?n:s)<0)return"Number is too low";return!!(n+s>a)&&"Number is too high"},this.onCoverParameterValueChange=this.onCoverParameterValueChange.bind(this),this.klet3DDataCustomSetterMethod=this.klet3DDataCustomSetterMethod.bind(this),this.onOpenClosedOffsetChangeHandler=this.onOpenClosedOffsetChangeHandler.bind(this),this.offsetValuesErrorCheck=this.offsetValuesErrorCheck.bind(this)}componentDidMount(){const e=this.props.parametersItems.map((e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);return{...e,value:e.selectInput?e.options.find((e=>e.value===t)):"open_offset"===e.field||"closed_offset"===e.field?this.props.mainComponentThis.convertSvgToValueUnits(t):t,step:"open_offset"===e.field||"closed_offset"===e.field?this.props.mainComponentThis.itemDimensionsInputStep:null}}));this.setState({edit:e,originalData:e})}render(){const e=this.getEditFormItems(),t=e.find((e=>"closing_direction"===e.field)),i=e.filter((e=>"open_offset"===e.field||"closed_offset"===e.field)).map((e=>{const t="open_offset"===e.field,i=this.state.edit.find((e=>"closing_direction"===e.field)).value.value;let o=e.label;return t?"top"===i?o="Top":"left"===i?o="Left":"right"===i&&(o="Right"):"top"===i?o="Bottom":"left"===i?o="Right":"right"===i&&(o="Left"),{...e,label:o}})).sort((e=>"Top"===e.label?-1:"Bottom"===e.label?1:"Left"===e.label?-1:"Right"===e.label?1:0));return 0!==e.length&&t?(0,a.jsxs)(xo,{containerClasses:"cover-parameters-container",children:[(0,a.jsx)(Qo,{selectInput:!0,fullWidth:!0,label:(0,a.jsx)(zo,{labelText:t.label,infoText:(0,a.jsxs)("span",{children:["Specify in which direction the cover closes",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Top"})," - cover closes from bottom to top",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Left"})," - cover closes from right to left",(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"Right"})," - cover closes from left to right"]})}),item:t,onChange:this.onCoverParameterValueChange}),(0,a.jsx)(zo,{labelText:"Offsets",infoText:(0,a.jsxs)("span",{children:["Specify the ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"offsets"})," for the cover in the open and closed position",(0,a.jsx)("br",{}),"If value is different from 0, the 3D model will not open/close completely"]})}),i.map(((e,t)=>{const i="metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"cm":"in",o=`${e.label} (${i}):`;return(0,a.jsx)(nn,{containerStyle:{marginBottom:1===t?"1rem":"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:o}):o,step:e.step,item:e,value:e.value,error:e.error,onChange:this.onOpenClosedOffsetChangeHandler,labelClasses:"label-form-control-cancel",isNumberInput:!0,controledNumberInput:!0,usePropsValue:!0},e.field)})),this.renderCommonFooterUI(!0,!0)]}):null}}Wb.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const Nb=Wb;class Vb extends Pb{constructor(e){super(e),this.setOpacityNumberSliderInputValues=(e,t)=>{e.sliderInputRef.current.value=t,e.valueRef.current.textContent=t,e.numberSliderInputPairRef.current.inputNumberComponentRef.current.setValue(t)},this.setOpacityNumberSliderInputValues=this.setOpacityNumberSliderInputValues.bind(this)}componentDidMount(){const e=this.props.parametersItems.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]),..."detected_opacity"===e.field||"undetected_opacity"===e.field?{numberSliderInputPairRef:o.createRef(),sliderInputRef:o.createRef(),valueRef:o.createRef()}:{}})));this.setState({edit:e,originalData:e},(()=>{this.state.edit.filter((e=>"detected_opacity"===e.field||"undetected_opacity"===e.field)).forEach((e=>this.setOpacityNumberSliderInputValues(e,e.value)))}))}render(){const e=this.getEditFormItems(),t=e.filter((e=>"detected_state"===e.field||"undetected_state"===e.field)),i=e.filter((e=>"detected_opacity"===e.field||"undetected_opacity"===e.field));return 0===e.length?null:(0,a.jsxs)(xo,{children:[(0,a.jsx)(zo,{labelText:"States",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),t.map((e=>(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field))),i.map((e=>(0,a.jsx)(kn,{ref:e.numberSliderInputPairRef,sliderInputRef:e.sliderInputRef,valueLabelText:(0,a.jsxs)("div",{style:{display:"flex"},children:[`${e.label}:`,"\xa0",(0,a.jsx)("span",{ref:e.valueRef})," %"]}),sliderStep:e.step,minValue:e.min,maxValue:e.max,onSliderValueChanged:t=>{this.setOpacityNumberSliderInputValues(e,t),this.simpleOnChangeHandler(e)(t)}},e.field))),this.renderCommonFooterUI(!0,!0)]})}}Vb.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const Eb=Vb;class Hb extends Pb{render(){const e=this.getEditFormItems();return 0===e.length?null:(0,a.jsxs)(xo,{children:[(0,a.jsx)(zo,{labelText:"States",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),e.map((e=>(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field))),this.renderCommonFooterUI(!0,!0)]})}}Hb.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const zb=Hb;class Gb extends Pb{componentDidMount(){"HomeAssistant"===this.props.mainComponentThis.props.addOnIntegrationType&&"climate"===this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).domain||this.simpleParametersInitialSetter(this.props.parametersItems)}render(){const e=this.getEditFormItems();return 0===e.length?null:(0,a.jsxs)(xo,{children:[(0,a.jsx)(zo,{labelText:"States",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),e.map((e=>(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field))),this.renderCommonFooterUI(!0,!0)]})}}Gb.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const qb=Gb;class Ub extends Pb{render(){return(0,a.jsx)(xo,{children:this.renderCommonFooterUI(!0,!1)})}}Ub.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const Yb=Ub;class Xb extends Pb{componentDidMount(){let e=this.props.parametersItems;if("HomeAssistant"===this.props.mainComponentThis.props.addOnIntegrationType){const t=this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).domain;"media_player"!==t&&"remote"!==t||(e=e.filter((e=>"screen_switched_on_state"===e.field||"screen_switched_off_state"===e.field)))}const t=this.props.mainComponentThis.getScreenParametersFormItems(e,this.props.targetObject2D);this.setState({edit:t,originalData:t})}render(){const e=this.getEditFormItems();if(0===e.length)return null;const t=e.filter((e=>"screen_switched_on_state"===e.field||"screen_switched_off_state"===e.field)),i=e.filter((e=>"screen_on_color"===e.field||"screen_off_color"===e.field));return(0,a.jsxs)(xo,{children:[(0,a.jsxs)(xo,{children:[t.length>0&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(zo,{labelText:"States",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","values which correspond to given states"]})}),t.map(((e,i)=>(0,a.jsx)(nn,{containerStyle:{marginBottom:i===t.length-1?"1rem":"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field)))]}),(0,a.jsx)(zo,{labelText:"Colors",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","colors which correspond to given states"]})}),i.map((e=>{const t=e.form.find((t=>t.field===`${e.fieldPrefix}_is_light`)),i=e.form.find((t=>t.field===`${e.fieldPrefix}_3d_glow_effect`)),n=e.form.filter((t=>t.field===`${e.fieldPrefix}_3d_glow_factor`||t.field===`${e.fieldPrefix}_3d_glow_spread`));return(0,a.jsxs)(xo,{children:[(0,a.jsx)(nn,{isColorInput:!0,label:e.isLongText?e.label:(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}),labelClasses:"label-form-control-cancel",item:e,onChange:this.simpleOnLiveChangeHandler,colorPickerBoxContainer:this.props.mainComponentThis.getActiveRightBox(!0)}),(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:t.label,infoText:t.infoText,explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:t.value||t.defaultValue,onChange:this.simpleOnLiveChangeHandler(t)}),t.value&&(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:i.label,infoText:i.infoText,explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:i.value||i.defaultValue,onChange:this.simpleOnLiveChangeHandler(i)}),i.value&&(0,a.jsx)(co,{children:n.map(((e,t)=>(0,a.jsx)(nn,{isNumberInput:!0,controledNumberInput:!0,labelClasses:"label-form-control-cancel",containerStyle:{marginBottom:t<n.length-1?"0.5rem":0},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,placeholder:e.placeholder,item:e,usePropsValue:!0,onChange:this.simpleOnLiveChangeHandler},`${i.value}+${e.field}`)))})]})]},e.field)}))]}),this.renderCommonFooterUI(!0,!0)]})}}Xb.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const Kb=Xb;class Zb extends o.Component{componentDidUpdate(){this.props.disableRangeChoice&&"range"===this.props.coloringOptionFormItem.value&&this.props.onChange(this.props.coloringOptionFormItem)("")}render(){return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(an,{formGroupContainerStyle:{marginBottom:"0.5rem"},rightLabel:!0,item:{...this.props.coloringOptionFormItem,choices:[this.props.coloringOptionFormItem.choices[0]]},onChange:this.props.onChange}),this.props.coloringOptionFormItem.choices[0].value===this.props.coloringOptionFormItem.value&&(0,a.jsx)(Xo,{item:this.props.coloringOptionFormItem.choices[0].form[0],onChange:this.props.onChange,boxContainer:this.props.mainComponentThis.getActiveRightBox(!0),containerStyle:{marginBottom:"0.5rem"}}),(0,a.jsx)(an,{formGroupContainerStyle:{marginBottom:"0.5rem"},disabled:this.props.disableRangeChoice,rightLabel:!0,item:{...this.props.coloringOptionFormItem,choices:[this.props.coloringOptionFormItem.choices[1]]},onChange:this.props.onChange}),this.props.coloringOptionFormItem.choices[1].value===this.props.coloringOptionFormItem.value&&(0,a.jsx)(Lm,{ref:this.props.colorPaletteMakerRef,containerStyle:{marginBottom:"0.5rem"},colorPaletteFormItem:this.props.coloringOptionFormItem.choices[1].form,onChange:this.props.onChange,addIntermediateColor:this.props.addIntermediateColor,removeIntermediateColor:this.props.removeIntermediateColor,getColoringBox:()=>this.props.mainComponentThis.getActiveRightBox(!0)}),(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:this.props.opacityItem.isNumberInput,controledNumberInput:!!this.props.opacityItem.isNumberInput||null,label:this.props.opacityItem.keepTextWidth?(0,a.jsx)(dn,{longText:this.props.opacityItem.longText,shortText:this.props.opacityItem.label}):this.props.opacityItem.label,value:this.props.opacityItem.value,labelClasses:"label-form-control-cancel",item:this.props.opacityItem,error:this.props.opacityItem.error,onChange:this.props.onChange})]})}}const $b=Zb;class Jb extends Pb{constructor(e){super(e),this.cloneEditData=(e,t)=>e.map((e=>e.form?{...e,form:e.form.map((e=>e.formChoices?{...e,choices:e.choices.map((e=>({...e,form:e.form.map((e=>Array.isArray(e.value)?{...e,value:e.value.map((e=>e.form?{...e,form:e.form.map((e=>({...e,...t?{error:void 0}:{}})))}:{...e,...t?{error:void 0}:{}}))}:{...e,...t?{error:void 0}:{}}))})))}:{...e,...t?{error:void 0}:{}}))}:{...e,...t?{error:void 0}:{}})),this.calculateNeedsSaveCustom=e=>P(this.cloneEditData(e,!0),this.state.originalData),this.addIntermediateColor=(e,t)=>{e.find((e=>e.field.includes("intermediate_colors"))).value.push(Ki(t)),this.setState({needsSave:this.calculateNeedsSaveCustom(this.state.edit)})},this.removeIntermediateColor=(e,t)=>{e.find((e=>e.field.includes("intermediate_colors"))).value.splice(e.find((e=>e.field.includes("intermediate_colors"))).value.findIndex((e=>e.counter===t)),1),this.setState({needsSave:this.calculateNeedsSaveCustom(this.state.edit)})},this.onSaveClick=()=>{let e=!1;if(this.setState({edit:this.state.edit.map((t=>{const i=t.validate&&t.validate(t.value);return i&&(e=!0),t.form?{...t,error:i,form:t.form.map((i=>{const o=i.validate&&i.validate(i.value);return o&&(e=!0),i.formChoices?{...i,error:o,choices:i.choices.map((o=>{if("range"===o.value){if("range"===i.value){const i="background"===t.field?this.sensorBackgroundOptionColorPaletteRef:this.sensorTextColorPaletteRef;e=i.current&&!i.current.paletteColorsValidation()}return{...o}}return{...o,form:o.form.map((t=>{const i=t.validate&&t.validate(t.value);return i&&(e=!0),{...t,error:i}}))}}))}:{...i,error:o}}))}:{...t,error:i}}))}),console.log("On save isInvalid",e),!e){let e=[...this.props.mainComponentThis.klet3DLastSavedData],t=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(this.state.edit.forEach((e=>{e.form?(this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,"checked"],e),e.form.forEach((i=>{this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,void 0===i.value?null:i.value),i.formChoices&&i.choices.forEach((i=>{i.form.forEach((i=>{Array.isArray(i.value)?(this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,[]),i.value.forEach((o=>{this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,{value:o.form.find((e=>e.field.includes("intermediate_color_value"))).value,color:o.form.find((e=>e.field.includes("intermediate_color_color"))).value},!0)}))):this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],i)}))}))}))):this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field],e)})),console.log("targetKlet3DData",t),this.callSaveAPI(t,e,this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null))}},this.onSensorParameterChange=e=>t=>{const i=t&&t.target?t.target.value:t;console.log("On sensor parameter change",e,i);const o=this.state.edit.map((t=>t.field===e.field?(console.log("Target find"),{...t,value:i}):t.form?{...t,form:t.form.map((t=>t.field===e.field?(console.log("Target find"),{...t,value:i}):t.formChoices?{...t,choices:t.choices.map((t=>({...t,form:t.form.map((t=>t.field===e.field?(console.log("Target find"),{...t,value:i}):Array.isArray(t.value)?{...t,value:t.value.map((t=>t.form?{...t,form:t.form.map((t=>({...t,value:t.field===e.field?i:t.value})))}:{...t}))}:{...t}))})))}:{...t}))}:{...t}));this.setState({edit:o,needsSave:this.calculateNeedsSaveCustom(o)})},this.onSensorCheckboxParameterChange=e=>()=>{const t=this.state.edit.map((t=>t.field===e.field?{...t,value:!t.value,form:t.form.map((e=>({...e,value:e.field.includes("_coloring_type")&&t.value?"":e.value})))}:{...t}));this.setState({edit:t,needsSave:this.calculateNeedsSaveCustom(t)})},this.onAddSensorToHeatmapClick=()=>this.props.mainComponentThis.floorplan3DComponent.current.sensorsHeatmapRef.current.onShowHeatmapSettingsClick(),this.sensorBackgroundOptionColorPaletteRef=o.createRef(),this.sensorTextColorPaletteRef=o.createRef(),this.onSaveClick=this.onSaveClick.bind(this),this.onSensorParameterChange=this.onSensorParameterChange.bind(this),this.onSensorCheckboxParameterChange=this.onSensorCheckboxParameterChange.bind(this),this.addIntermediateColor=this.addIntermediateColor.bind(this),this.removeIntermediateColor=this.removeIntermediateColor.bind(this),this.cloneEditData=this.cloneEditData.bind(this),this.calculateNeedsSaveCustom=this.calculateNeedsSaveCustom.bind(this),this.onAddSensorToHeatmapClick=this.onAddSensorToHeatmapClick.bind(this)}componentDidMount(){const e=this.props.parametersItems.map((e=>e.form?{...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,"checked"]),form:e.form.map((t=>t.formChoices?{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]),choices:t.choices.map((t=>({...t,form:t.form.map((t=>Array.isArray(this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]))?{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]).map(((e,t)=>Ki(t,e.value,e.color)))}:{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field])}))})))}:{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field])}))}:{...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])}));this.setState({edit:e,originalData:this.cloneEditData(e)})}render(){const e=this.getEditFormItems(),t=e.find((e=>"sensor_type"===e.field)),i=e.find((e=>"background"===e.field)),n=e.find((e=>"text"===e.field));return 0===e.length?null:(0,a.jsxs)("div",{className:"sensor-parameters-container",children:[(0,a.jsx)(xo,{children:(0,a.jsx)(an,{rightLabel:!0,label:t.label,onChange:this.onSensorParameterChange,item:t,radioGroupContainerStyle:{justifyContent:"space-evenly"}})}),(0,a.jsxs)(xo,{label:"Coloring",labelStyle:{marginBottom:0},children:[(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:i.label,infoText:i.infoText,explanationInfoBoxStyles:i.explanationInfoBoxStyles,checked:i.value,onChange:this.onSensorCheckboxParameterChange(i)}),!0===i.value&&(0,a.jsx)($b,{colorPaletteMakerRef:this.sensorBackgroundOptionColorPaletteRef,disableRangeChoice:"number"!==t.value,coloringOptionItem:i,coloringOptionFormItem:i.form[0],opacityItem:i.form.find((e=>"background_opacity"===e.field)),addIntermediateColor:this.addIntermediateColor,removeIntermediateColor:this.removeIntermediateColor,onChange:this.onSensorParameterChange,mainComponentThis:this.props.mainComponentThis}),(0,a.jsx)(qo,{infoLabel:!0,infoLabelTitle:n.label,infoText:n.infoText,explanationInfoBoxStyles:n.explanationInfoBoxStyles,checked:n.value,onChange:this.onSensorCheckboxParameterChange(n)}),!0===n.value?(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)($b,{colorPaletteMakerRef:this.sensorTextColorPaletteRef,disableRangeChoice:"number"!==t.value||"range"===i.form[0].value,coloringOptionItem:n,coloringOptionFormItem:n.form[0],opacityItem:n.form.find((e=>"text_opacity"===e.field)),addIntermediateColor:this.addIntermediateColor,removeIntermediateColor:this.removeIntermediateColor,onChange:this.onSensorParameterChange,mainComponentThis:this.props.mainComponentThis}),n.form.slice(-1).map((e=>(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:e.isNumberInput,controledNumberInput:!!e.isNumberInput||null,label:e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.onSensorParameterChange},e.field)))]}):null]}),this.props.mainComponentThis.floorplan3DComponent.current&&(0,a.jsx)(xo,{children:(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsx)(go,{type:"blue",onClick:this.onAddSensorToHeatmapClick,children:"Add to heatmap"})})}),this.renderCommonFooterUI(!0,!0)]})}}Jb.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const Qb=Jb;class ew extends Pb{render(){const e=this.getEditFormItems();return 0===e.length?null:(0,a.jsxs)(xo,{children:[(0,a.jsx)(zo,{labelText:"Text",infoText:(0,a.jsxs)("span",{children:["Define text preferences to display"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","value"]})}),e.map((e=>(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:e.isNumberInput,controledNumberInput:!!e.isNumberInput||null,isColorInput:e.isColorInput,colorPickerBoxContainer:e.isColorInput&&this.props.mainComponentThis.getActiveRightBox(!0),label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field))),this.renderCommonFooterUI(!0,!0)]})}}ew.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const tw=ew;class iw extends o.Component{render(){return null}}const ow=iw;class nw extends Pb{render(){const e=this.getEditFormItems();return 0===e.length?null:(0,a.jsxs)(xo,{children:[(0,a.jsx)(zo,{labelText:"States",infoText:(0,a.jsxs)("span",{children:["Specify"," ",(0,a.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),e.map((e=>(0,a.jsx)(nn,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,a.jsx)(dn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandler},e.field))),this.renderCommonFooterUI(!0,!0)]})}}nw.propTypes={targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const sw=nw;var aw=i(3750);const rw=class{constructor(e,t,i,o){if(this.binderIDPropertyName=o.connectorIDbinderIDPropertyName,this[this.binderIDPropertyName]=e[this.binderIDPropertyName],this.objID=t,this.params={},i&&(n=i,0!==Object.keys(n).length))this.params=i;else if(this.objID.length>0){let e=o.getObject2DById(this.objID[0].id);if(e)if(o.getObjectConnectorClassParamsForObject2D(e)){const t=o.getKlet3DBinderParamsDefaultValues(e);t&&(this.params=t)}else this.params={toggle_on_click_status:!1}}var n}},lw=["air_quality","alarm_control_panel","binary_sensor","button","calendar","climate","cover","date","datetime","device_tracker","event","fan","humidifier","image","lawn_mower","light","lock","number","scene","select","sensor","siren","stt","switch","sun","text","time","todo","tts","update","vacuum","valve","wake_word","water_heater","weather","zone"];var hw=i(1024),cw=i(6370),dw=i(1380);var pw=i(9252);class mw extends o.Component{constructor(e){super(),this.closePopup=()=>{this.props.floorplan3DThis&&this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null),rt(this.props.containerRef.current,200,(()=>{n.unmountComponentAtNode(this.props.containerRef.current)}),!1)},this.handleBinderCheckboxClick=e=>{const t=this.state.selectedBinder&&this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]?null:e;let i=!1;i=this.state.initialBinder?!t||t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]!==this.state.initialBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]:!!t,this.setState({selectedBinder:t,needsSave:i})},this.handlePageChange=(e,t)=>{this.setState({currentPage:t})},this.updateSelectedBinderData=e=>{const t=this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]);if(t){const i=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));i?i.objID.push({id:this.props.obj2D.id}):e.push(new rw(t,[{id:this.props.obj2D.id}],null,this.props.mainComponentThis))}},this.onSaveChangesClick=()=>{this.setState({loading:!0});let e=this.props.mainComponentThis.klet3DLastSavedData.map((e=>({...e})));if(this.state.initialBinder){const t=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.state.initialBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(t.objID=t.objID.filter((e=>e.id!==this.props.obj2D.id))),this.state.selectedBinder&&this.updateSelectedBinderData(e),e=e.filter((e=>e.objID.length>0))}else{if(!this.state.selectedBinder)return void this.closePopup();this.updateSelectedBinderData(e)}const t=()=>{if(this.props.mainComponentThis.klet3DLastSavedData=e,this.props.floorplan3DThis){for(let o=0;o<e.length;o++)if(this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(e[o][this.props.mainComponentThis.connectorIDbinderIDPropertyName])){const t=this.props.floorplan3DThis.getObjectConnectorParamsData(e[o][this.props.mainComponentThis.connectorIDbinderIDPropertyName],this.props.mainComponentThis.getObject2DById(e[o].objID[0].id)),i=this.props.floorplan3DThis.getIsFixed2DObjectsValue(t);let n=this.props.floorplan3DThis.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[o][this.props.mainComponentThis.connectorIDbinderIDPropertyName]));if(n){let t=[];for(let i=0;i<n.bindedObjects.length;i++)e[o].objID.find((e=>e.id===n.bindedObjects[i].object2D.id))||t.push(i);t.sort(((e,t)=>t-e));for(let e=0;e<t.length;e++)console.log("removeBindedObject"),n.removeBindedObject(n.bindedObjects[t[e]]);for(let s=0;s<e[o].objID.length;s++)if(!n.bindedObjects.find((t=>t.object2D.id===e[o].objID[s].id)))if(i){let t;for(let i=0;i<this.props.floorplan3DThis.floorplan3DViewScene.children.length;i++)if(this.props.floorplan3DThis.floorplan3DViewScene.children[i].object2D&&this.props.floorplan3DThis.floorplan3DViewScene.children[i].object2D.id===e[o].objID[s].id){t=this.props.floorplan3DThis.floorplan3DViewScene.children[i];break}console.log("addBindedObject fixed"),t&&n.addBindedObject(t)}else{let t,i={};for(let n=0;n<this.props.floorplan3DThis.floorplanFloors.length;n++)if(t=this.props.floorplan3DThis.floorplanFloors[n].objData.find((t=>t.id===e[o].objID[s].id)),t){i={object2D:t,floorNumber:this.props.floorplan3DThis.floorplanFloors[n].floorNumber};break}console.log("addBindedObject unfixed"),n.addBindedObject(this.props.floorplan3DThis.getObjectsConnectorUnfixedBindedObjectParameters(i),!0)}}else this.props.floorplan3DThis.addObjectConnectorObject(e[o])}let t=[];for(let o=0;o<this.props.floorplan3DThis.objectConnectorsArray.length;o++)e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.floorplan3DThis.objectConnectorsArray[o][this.props.mainComponentThis.connectorIDbinderIDPropertyName]))||t.push(o);t.sort(((e,t)=>t-e));for(let e=0;e<t.length;e++)console.log("Remove ObjectsConnector object",this.props.floorplan3DThis.objectConnectorsArray[t[e]]),this.props.floorplan3DThis.objectConnectorsArray[t[e]].remove(),this.props.floorplan3DThis.objectConnectorsArray.splice(t[e],1);this.props.floorplan3DThis.updateControlPanelState();const i=this.props.mainComponentThis.getObjectConnectorClassParamsForObject2D(this.props.obj2D);i&&"_sensors_"===i.connectorClass&&this.props.floorplan3DThis.sensorsHeatmapSceneControlRef.current.setDropdownListData()}this.props.updateKlet3DBinderState&&this.props.updateKlet3DBinderState(e.find((e=>e.objID.find((e=>e.id===this.props.obj2D.id))))),this.closePopup()};this.props.callAPIForSave?Ii.post.call(this,`/klet3d/entity/${this.props.mainComponentThis.props.floorplanID}/${this.props.mainComponentThis.props.licenseKey}`,{entitydata:e},(e=>{console.log("Klet post API response"),console.log(e),t()})):t()},this.handleSearchChange=e=>{if(e){const t=this.props.availableBinders.filter((t=>this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).toLowerCase().includes(e.toLowerCase())||this.props.customSearchMethod&&this.props.customSearchMethod(t,e)));this.setState({searchFilteredData:t,currentPage:1,searchFilterText:e})}else this.setState({searchFilteredData:this.props.availableBinders,currentPage:1,searchFilterText:e})},this.state={initialBinder:null,selectedBinder:null,currentPage:1,rowsPerPage:10,searchFilteredData:e.availableBinders,needsSave:!1,loading:!1},this.mounted=!1,this.closePopup=this.closePopup.bind(this),this.updateSelectedBinderData=this.updateSelectedBinderData.bind(this),this.onSaveChangesClick=this.onSaveChangesClick.bind(this),this.handleBinderCheckboxClick=this.handleBinderCheckboxClick.bind(this),this.handlePageChange=this.handlePageChange.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}componentDidMount(){if(this.mounted=!0,this.props.klet3DBinder){const e=this.props.availableBinders.findIndex((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));if(e>0){let t=this.props.availableBinders[0];this.props.availableBinders[0]=this.props.availableBinders[e],this.props.availableBinders[e]=t}}this.setState({initialBinder:this.props.klet3DBinder,selectedBinder:this.props.klet3DBinder,searchFilteredData:this.props.availableBinders})}componentWillUnmount(){this.mounted=!1}render(){const{selectedBinder:e,currentPage:t,rowsPerPage:i,searchFilteredData:o,searchFilterText:n,needsSave:s,loading:r}=this.state,{pageFirstRowIndex:l,pageLastRowIndex:h}=((e,t,i)=>{const o=(e-1)*t;return{pageFirstRowIndex:o,pageLastRowIndex:o+t>i?i:o+t}})(t,i,this.props.availableBinders.length),c=o.slice(l,h);return(0,a.jsx)(Gn,{onCloseModalClick:this.closePopup,children:(0,a.jsxs)("section",{className:"layout__section objects-binding-popup-content-container",style:{height:"auto",maxHeight:"85vh"},children:[(0,a.jsxs)("div",{className:"table-responsive form-group",children:[(0,a.jsxs)("div",{className:"search-row-container",children:[(0,a.jsx)("h2",{children:this.props.tableTitle}),(0,a.jsxs)("div",{className:"search-entities-container",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"hidden-placeholder",children:"Search entities"}),(0,a.jsx)("input",{placeholder:"Search entities",className:"form-control input",value:n,onChange:e=>this.handleSearchChange(e.target.value)})]}),(0,a.jsx)("div",{className:"search-icon-container",children:(0,a.jsx)(rn.A,{})})]})]}),(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"#"}),(0,a.jsx)("th",{}),(0,a.jsx)("th",{children:"ID"}),(0,a.jsx)("th",{children:"Name"}),this.props.hasDomain&&(0,a.jsx)("th",{children:"Domain"}),this.props.hasDates&&(0,a.jsx)("th",{children:"Last change"}),this.props.hasDates&&(0,a.jsx)("th",{children:"Last update"})]})}),(0,a.jsx)("tbody",{children:c.length>0?c.map(((t,i)=>{const o=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));let n=0;return o&&(n=o.objID.filter((e=>e.id!==this.props.obj2D.id)).length),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:l+i+1}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"entity-binding-option-choice-container",children:[(0,a.jsx)(qo,{checked:!!e&&e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],onChange:()=>this.handleBinderCheckboxClick(t)}),n>0&&(0,a.jsx)(Eo,{explanationInfoBoxStyles:{textAlign:"left"},infoText:(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{style:{fontWeight:"bold"},children:"NOTE:"})," This entity is binded with"," ",(0,a.jsx)("span",{children:n})," more floorplan\xa0",(0,a.jsx)("span",{children:1===n?"object":"objects"})]})})]})}),(0,a.jsx)("td",{children:this.props.binderIDLayoutMethod(t)}),(0,a.jsx)("td",{children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(t[this.props.mainComponentThis.connectorIDbinderIDPropertyName])}),this.props.hasDomain&&(0,a.jsx)("td",{children:t.domain}),this.props.hasDates&&(0,a.jsx)("td",{children:Si(new Date(t.last_changed))}),this.props.hasDates&&(0,a.jsx)("td",{children:Si(new Date(t.last_updated))})]},t[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,children:"No entities found"})})})]}),(0,a.jsx)(pw.A,{className:"table-pagination",count:Math.ceil(o.length/i),page:t,onChange:this.handlePageChange})]}),(0,a.jsx)("div",{className:"button-centered-container",children:(0,a.jsx)(wo,{disabled:!s,buttonType:s?"primary":"dull",spinnerColor:"#ffffff",buttonText:" Save changes",loading:r,spinnerLoading:!0,onClick:this.onSaveChangesClick})})]})})}}const uw=mw;class gw extends Pb{render(){return(0,a.jsx)(xo,{children:this.renderCommonFooterUI(!0,!0)})}}gw.propTypes={preventCommonFooterUIRendering:kb().bool,targetObject2D:kb().object,klet3DBinder:kb().object,updateKlet3DBinderState:kb().func,callAPIForSave:kb().bool,setResponseError:kb().func,mainComponentThis:kb().object};const fw=gw;class bw extends o.Component{constructor(e){super(),this.updateKlet3DBinderState=e=>{this.setState({klet3DBinder:e})},this.state={klet3DBinder:e.klet3DBinder},this.updateKlet3DBinderState=this.updateKlet3DBinderState.bind(this),this.activeParameters=o.createRef()}render(){const{klet3DBinder:e}=this.state,t=e&&this.props.mainComponentThis.getObjectConnectorClassParamsForObject2D(this.props.selectedObj);return(0,a.jsxs)(o.Fragment,{children:[this.props.renderDivider&&(0,a.jsx)("h3",{children:(0,a.jsx)("hr",{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:this.props.title}),(0,a.jsxs)("div",{className:"objects-binding-right-box-content-container",children:[(0,a.jsx)(Qo,{disabled:!0,label:"Entity",formGroupStyle:{marginBottom:"0.5rem"},inputStyle:{textAlign:"center"},value:e?this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]):"-"}),(0,a.jsx)(go,{type:"light-blue",onClick:()=>this.props.mainComponentThis.openBindingPopup(this.props.selectedObj,e,this.props.floorplan3DThis,this.updateKlet3DBinderState),children:e?"Change entity":"Add entity"})]}),e?t?t.renderBindingParametersComponent({targetObject2D:this.props.selectedObj,klet3DBinder:e,parametersItems:t.parametersItems,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,liveChangeEnabled:t.isParametersLiveChangeEnabled,toggleOnClickEnabled:t.toggleOnClickEnabled,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis},this.activeParameters):(0,a.jsx)(fw,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,parametersItems:[],updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,liveChangeEnabled:!1,toggleOnClickEnabled:!0,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}):null]})]})}}const ww=bw;function Cw(e){{let t=!1;e[0].entitygeneral||(e[0].entitygeneral={},t=!0),e[0].entitygeneral.version&&e[0].entitygeneral.version===this.HAAddonCurrentVersion||(e[0].entitygeneral.version=this.HAAddonCurrentVersion,console.log("Update version",e[0].entitygeneral),t=!0),function(e,t){const i=e.split(".").map(Number),o=t.split(".").map(Number);for(let n=0;n<Math.max(i.length,o.length);n++){const e=i[n]||0,t=o[n]||0;if(e>t)return!0;if(e<t)return!1}return!1}(e[0].klet3d_version,e[0].entitygeneral.version)&&this.applicationInfoRef.current.showApplicationInfoTrack(),this.props.customProps.isContainerApp&&(e[0].entitygeneral.isContainerApp=this.props.customProps.isContainerApp,console.log("Container app"),t=!0),t?Ii.post.call(this,`/klet3d/entity/${this.props.floorplanID}/${this.props.licenseKey}`,{entitygeneral:e[0].entitygeneral},(t=>{console.log("Klet post API response"),console.log(t),this.onFloorplanDataLoadCallback(e)})):this.onFloorplanDataLoadCallback(e)}}function xw(e,t){let i=[];if(e[t])for(const[o,n]of Object.entries(e[t]))i.push({name:o,serviceDataProperties:Object.entries(n.fields).map((e=>{let[t,i]=e;return{name:t,isRequired:i.required||!1}}))});return i}function _w(){this.onShow3DClick(!1),this.unsubscribeConfig=(0,hw.JW)(this.homeAssistantConnection,this.onConfigChangeCallback),this.unsubscribeServices=(0,cw.k)(this.homeAssistantConnection,this.onServicesChangeCallback)}async function yw(e){const t=!1;if(Object.keys(e).length!==this.homeAssistantEntities.length){t;try{const i=await(0,dw.Z1)(this.homeAssistantConnection);t,this.hasBrowserModIntegration=!!i.browser_mod,this.homeAssistantEntities=[];for(const[t,n]of Object.entries(e)){const e=t.split(".")[0];this.homeAssistantEntities.push({entity_id:t,domain:e,...n,services:this.getServicesForEntity(i,e)})}let o={entity_id:"climate.climate_test_entity_id",domain:"climate",state:this.onEntitiesChangeCallCounter>1?"cool":"heat",attributes:{min_temp:8,max_temp:30,current_temperature:26,target_temperature:20,friendly_name:"Climate test"},last_changed:"2023-12-15T09:30:46.251751+00:00",last_updated:"2023-12-15T09:30:46.251751+00:00"};this.homeAssistantEntities.push(o,{...o,entity_id:"climate.climate_test_entity_id2"})}catch(i){console.log("Get services socket error",i)}}else for(const[o,n]of Object.entries(e)){let e=this.homeAssistantEntities.find((e=>e.entity_id===o));if(e)for(const[t,i]of Object.entries(n))e[t]=i}this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onObjectConnectorEntitiesDataChange3DHandler(this.homeAssistantEntities),0===this.onEntitiesChangeCallCounter&&this.onEntitiesLoadedCallback(),this.onEntitiesChangeCallCounter++}function Sw(e){for(let t=0;t<this.homeAssistantEntities.length;t++){const i=this.homeAssistantEntities[t].domain;this.homeAssistantEntities[t].services=this.getServicesForEntity(e,i)}console.log("New services",e)}function vw(e){console.log("New config",e),this.homeAssistantConfigObject&&(_t(this.homeAssistantConfigObject,e)||(console.log("HA config change"),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onHAConfigChange(e))),this.homeAssistantConfigObject=e}async function Dw(e,t,i,o){try{const n=await(0,dw.cb)(this.homeAssistantConnection,e,t,{entity_id:i,...o},{entity_id:i});return console.log("Call service result",n),n.context}catch(n){return console.log("Call service error",n),null}}function Tw(e,t,i,o){const s=this.getBindedObjectKlet3DBinderData(e)?this.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.id)))):null;n.render((0,a.jsx)(ww,{ref:this.bindingRightBoxComponentRef,mainComponentThis:this,floorplan3DThis:t,klet3DBinder:s,title:"Home Assistant",selectedObj:e,renderDivider:o,callAPIForSave:!0,setResponseError:this.setState.bind(this)},(new Date).getTime()),i.current)}function jw(e,t,i,o){const s=this.getObjectConnectorClassParamsForObject2D(e)?this.availableEntitiesDomainNamesToObject2DMapping(e):this.availableEntitiesDomainNames;let r=this.homeAssistantEntities.filter((e=>s.includes(e.domain)));const l=this.getFloorplanObj2Ds();r=r.filter((t=>{const i=this.klet3DLastSavedData.find((e=>e.entity_id===t.entity_id));if(i){let t;for(let e=0;e<i.objID.length&&(t=l.find((t=>t.id===i.objID[e].id)),!t);e++);return!!t&&this.isSameBindedObjectType(t.type,e.type)}return!0})),at(this.bindingPopupRightBoxContainerRef.current,200,(()=>{n.render((0,a.jsx)(uw,{updateKlet3DBinderState:o,containerRef:this.bindingPopupRightBoxContainerRef,klet3DBinder:t,obj2D:e,availableBinders:r,customSearchMethod:(e,t)=>e.entity_id.split(".")[1].toLowerCase().includes(t.toLowerCase()),binderIDLayoutMethod:e=>e.entity_id.split(".")[1],tableTitle:"Available Home Assistant entities",hasDomain:!0,hasDates:!0,callAPIForSave:!0,floorplan3DThis:i,setResponseError:this.setState.bind(this),mainComponentThis:this}),this.bindingPopupRightBoxContainerRef.current)}),"block",!1)}function Iw(){this.unsubscribeEntities&&this.unsubscribeEntities(),this.unsubscribeServices&&this.unsubscribeServices(),this.unsubscribeConfig&&this.unsubscribeConfig(),this.homeAssistantConnection&&this.homeAssistantConnection.close()}function Pw(e,t){this.renderBindingRightBox(e,t,this.bindingFreeItemContainerRef,!0)}function Ow(e,t){this.renderBindingRightBox(e,t,this.bindingWallItemContainerRef,!0)}function kw(e,t){this.availableEntitiesDomainNamesToObject2DMapping(e).length>0?this.renderBindingRightBox(e,t,this.sensorOtherToolsContainerRef,!1):n.unmountComponentAtNode(this.sensorOtherToolsContainerRef.current)}function Fw(e,t){this.availableEntitiesDomainNamesToObject2DMapping(e).length>0?this.renderBindingRightBox(e,t,this.presenceAreaToolsContainerRef,!1):n.unmountComponentAtNode(this.presenceAreaToolsContainerRef.current)}function Mw(e){const t=this.getObjectConnectorKlet3DBinderData(e);return t?(i=t).attributes&&i.attributes.friendly_name||i.entity_id.split(".")[1]:"";var i}function Aw(e){return this.homeAssistantEntities.find((t=>t.entity_id===e))}function Rw(e){const t=this.getObjectConnectorClassParamsForObject2D(e);return t?t.homeAssistantBindingEntitiesDomains:[]}async function Lw(e){try{let t={entity:e};{const e=localStorage.getItem("browser_mod-browser-id");e&&(t.browser_id=e)}await this.callHomeAssistantService("browser_mod","more_info",e,t)}catch(t){console.error("Failed to open popup",t)}}const Bw=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mainComponentThis=e,this.controlerParams=t,this.mainComponentThis.HAAddonCurrentVersion=this.mainComponentThis.props.addOnVersion,this.mainComponentThis.homeAssistantConnection=null,this.mainComponentThis.homeAssistantEntities=[],this.mainComponentThis.homeAssistantConfigObject=this.mainComponentThis.props.customProps.userConfig,this.mainComponentThis.onEntitiesChangeCallCounter=0,this.mainComponentThis.unsubscribeEntities=null,this.mainComponentThis.unsubscribeServices=null,this.mainComponentThis.unsubscribeConfig=null,this.mainComponentThis.homeAssistantConnection=this.mainComponentThis.props.customProps.connection,this.mainComponentThis.entitiesDataArrayName="homeAssistantEntities",this.mainComponentThis.connectorEntityInstancePropertyName="entity",this.mainComponentThis.connectorIDbinderIDPropertyName="entity_id",this.mainComponentThis.supportedEntitiesDomainNames=this.mainComponentThis.objectConnectorAvailableClasses.reduce(((e,t)=>(e.push(...t.homeAssistantBindingEntitiesDomains),e)),[]).filter(((e,t,i)=>i.findIndex((t=>e===t))===t)),this.mainComponentThis.availableEntitiesDomainNames=[...lw,...this.mainComponentThis.supportedEntitiesDomainNames].filter(((e,t,i)=>i.findIndex((t=>e===t))===t)),this.hasBrowserModIntegration=!1,this.mainComponentThis.onFloorplanDataLoadCustomAPICalls=Cw.bind(this.mainComponentThis),this.mainComponentThis.getServicesForEntity=xw.bind(this.mainComponentThis),this.mainComponentThis.onEntitiesLoadedCallback=_w.bind(this.mainComponentThis),this.mainComponentThis.onEntitiesChangeCallback=yw.bind(this.mainComponentThis),this.mainComponentThis.onServicesChangeCallback=Sw.bind(this.mainComponentThis),this.mainComponentThis.onConfigChangeCallback=vw.bind(this.mainComponentThis),this.mainComponentThis.callHomeAssistantService=Dw.bind(this.mainComponentThis),this.mainComponentThis.renderBindingRightBox=Tw.bind(this.mainComponentThis),this.mainComponentThis.openBindingPopup=jw.bind(this.mainComponentThis),this.mainComponentThis.freeItemToolsCustomSetter=Pw.bind(this.mainComponentThis),this.mainComponentThis.wallItemToolsCustomSetter=Ow.bind(this.mainComponentThis),this.mainComponentThis.sensorOtherItemToolsCustomSetter=kw.bind(this.mainComponentThis),this.mainComponentThis.presenceAreaItemToolsCustomSetter=Fw.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderName=Mw.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderData=Aw.bind(this.mainComponentThis),this.mainComponentThis.availableEntitiesDomainNamesToObject2DMapping=Rw.bind(this.mainComponentThis),this.mainComponentThis.openBrowserModMoreInfoPopupForEntity=Lw.bind(this.mainComponentThis),this.mainComponentThis.componentWillUnmountCustomCallback=Iw.bind(this.mainComponentThis),this.onFloorplanDataLoadControllerCallback=this.onFloorplanDataLoadControllerCallback.bind(this.mainComponentThis)}onFloorplanDataLoadControllerCallback(e){if(this.homeAssistantConnection){this.klet3DGeneral=e[0].entitygeneral||{},this.sensorHeatmapLastSavedData=this.klet3DGeneral&&Object.hasOwn(this.klet3DGeneral,"sensorHeatmapData")?this.klet3DGeneral.sensorHeatmapData:[],this.klet3DDetails=e[0].klet3d_details||{};let t=e[0].entitydata||[];const i=this.getFloorplanObj2Ds();this.klet3DLastSavedData=t.filter((e=>(e.objID=e.objID.map((e=>e.id?e:{id:e})),e.objID=e.objID.filter((e=>i.find((t=>t.id===e.id)))),e.objID.length>0))).map((e=>new rw(e,e.objID,e.params,this))),this.objectConnectorAvailableClasses.find((e=>"_others_"===e.connectorClass)).homeAssistantBindingEntitiesDomains=this.availableEntitiesDomainNames,this.unsubscribeEntities=(0,aw.o)(this.homeAssistantConnection,this.onEntitiesChangeCallback)}}};function Ww(e){const t=JSON.parse(JSON.stringify(this.HAConfigObject));if(this.HAConfigObject=e,this.floorplanTimeZone=this.HAConfigObject.time_zone,e.time_zone!==t.time_zone&&(console.log("HA time zone change"),this.floorplanStartDate=vi(e.time_zone),this.floorplanStartDateSetTimestamp=(new Date).getTime(),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?(this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),this.initializeSunLightPositionIntervalCalculation(!0,this.floorplan3DOnMapScene,this.sunLightPositionFloorplan3DOnMapCameraHelpers),this.textFont&&this.createFloorplanTimeMesh(this.floorplan3DViewScene,this.floorplanStartDate)):(this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers))),!_t(t.unit_system,e.unit_system)){console.log("HA unit system change");for(let e=0;e<this.objectConnectorsArray.length;e++)"_sensors_"!==this.objectConnectorsArray[e].class&&"_others_"!==this.objectConnectorsArray[e].class||this.objectConnectorsArray[e].update(this.getObjectConnectorParamsData(null,this.objectConnectorsArray[e].bindedObjects[0].object2D,this.objectConnectorsArray[e].entity))}}function Nw(e,t,i){const o=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id));if(!o)return"";{const n=this.getObjectConnectorClassValue(this.getObjectConnectorParamsData(e.entity_id,i.object2D)),s=e.entity_id.split(".")[0];if("door_window"===n)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"open_state":"closed_state"]);if("_lights_"===n)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"switched_on_state":"switched_off_state"]);if("_fan_"===n)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"switched_on_state":"switched_off_state"]);if("_cover_"===n){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return t?t.attributes.current_position||0:null}if("presence_binary"===n)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"detected_state":"undetected_state"]);if("_hvac_"===n)return"climate"===s?"off"===t?["off"]:["heat","cool","heat_cool","auto","dry","fan_only"]:[this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"hvac_switched_on_state":"hvac_switched_off_state"])];if("christmas_tree_lights"===n)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"christmas_light_switched_on_state":"christmas_light_switched_off_state"]);if("_camera_"===n)return"off"===t?["idle"]:["recording","streaming"];if("_screen_"!==n)return"_surface_area_"===n?this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"active_layout_state":"inactive_layout_state"]):"";if("off"===t)switch(s){case"media_player":case"remote":return["off","unavailable","unknown"];default:return[this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["screen_switched_off_state"])]}else switch(s){case"media_player":return["on","idle","playing","paused","standby","buffering"];case"remote":return["on"];default:return[this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["screen_switched_on_state"])]}}}function Vw(e,t){const i=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(t);if(i&&(e.entity=i,e.entity_id=i.entity_id),this.isFloorplanItemMeshBinded(e)){let i={};"_lights_"===this.getObjectConnectorClassValue(null,t)&&(i.isInitialRenderCall=!0),e.changeStateMethod(e,{...this.getObjectConnectorParamsData(null,t,e.entity),...i})}this.clickableObjectsSceneControlRef.current.isShowOnlyClickableObjectsActive()&&!this.isFloorplanItemClickable(e)&&(e.visible=!1)}function Ew(e){return!!e.entity}function Hw(e,t,i){const o=i.meshStatePropertyName||"state",n=i.meshOnStatePropertyValue||"on",s=i.returnBoolean||!1,a=this.getObjectConnectorDefaultStateValue(e),r=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);let l;if(r){const i=this.getObjectConnectorClassValue(t),s="_lights_"===i?e.light:e,h="_hvac_"===i?this.getHVACEntityStateValue(r):r.state,c=this.getHAEntityUserSpecificedStateValue(r,"on",e),d=this.getHAEntityUserSpecificedStateValue(r,"off",e),p=Array.isArray(c)?c.includes(h):h===c,m=Array.isArray(d)?d.includes(h):h===d;l=s[o]===n?m?"off":p?"on":a:p?"on":m?"off":a}else l=Object.hasOwn(i,"meshUnBindedStateValue")?i.meshUnBindedStateValue:a;return s?"on"===l:l}async function zw(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"toggle",e.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle state. Please check your connection and try again.","error")}}}function Gw(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),o=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id)),n=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["power"]);if(this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["power_sync"])&&o&&o.attributes.brightness&&o.attributes.brightness<=255&&o.attributes.brightness>=1){const e=o.attributes.brightness;t.power=e/255*20}else t.power=n;const s=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["color"]);if(this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["color_sync"])&&o&&o.attributes.rgb_color){const e=o.attributes.rgb_color;t.color=new L.Q1f(`rgb(${e[0]}, ${e[1]}, ${e[2]})`)}else t.color=new L.Q1f(s);return t.variant=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["variant"]),t.spot_angle=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["spot_angle"]),t.spot_distance=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["spot_distance"]),t}function qw(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),o=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id)),n=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["direction"]);this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["direction_sync"])&&o&&o.attributes.direction?t.direction=o.attributes.direction:t.direction=n;const s=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["percentage"]);return this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["percentage_sync"])&&o&&o.attributes.percentage?t.percentage=o.attributes.percentage:t.percentage=s,t}function Uw(e){let t=this.getObjectConnectorPropertiesDefaultMethod(e);const i=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return t.currentPosition=i&&void 0!==i.attributes.current_position?i.attributes.current_position:0,t}function Yw(e){let t=this.getObjectConnectorPropertiesDefaultMethod(e);for(let i in t)i.includes("opacity")&&(t[i]/=100);return t}function Xw(e,t){let i={};const o=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===t.entity.entity_id));if(i.mode="neutral",o){const e=this.getHVACEntityStateValue(o);if("heat"===e)i.mode="heating";else if("cool"===e)i.mode="cooling";else if("dry"===e)i.mode="drying";else if(("heat_cool"===e||"auto"===e)&&Object.hasOwn(o.attributes,"current_temperature")&&Object.hasOwn(o.attributes,"target_temperature")){const e=parseFloat(o.attributes.current_temperature),t=parseFloat(o.attributes.target_temperature);e>t?i.mode="cooling":e<t&&(i.mode="heating")}}return i}async function Kw(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"set_cover_position"===e.name))){let i=0;0===t.attributes.current_position&&(i=100);await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"set_cover_position",e.entity_id,{position:i})||this.alertRef.current.showAlert("Error while trying to toggle cover. Please check your connection and try again.","error")}}}async function Zw(e){this.floorplan3DViewScene.getObjectByName("coverage_area_mesh")?this.removeCameraCoverageArea3DMesh():this.createCameraCoverageArea3DVisualization(e.object2D)}async function $w(e){const t=e.entity_id.split(".")[0];"binary_sensor"!==t&&"sensor"!==t&&this.fixedObjectConnectorChangeStateOnClickDefaultMethod(e)}function Jw(e,t){this.setCameraPOVView(e,(()=>{this.props.mainComponentThis.openBrowserModMoreInfoPopupForEntity(t.entity_id)}))}function Qw(e,t){t.entity=e.entity,t.entity_id=e.entity_id}function eC(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return t&&t.attributes.unit_of_measurement||""}function tC(e,t){e.entity={...t.entity},e.entity_id=e.entity.entity_id,e.domain=e.entity_id.split(".")[0]}function iC(e){const t={...e.entity};if(e.entity=null,this.props.mainComponentThis.getObjectConnectorClassParamsForObject2D(e.object2D)){const i=this.getHAEntityUserSpecificedStateValue(t,this.getObjectConnectorDefaultStateValue(e),e);return this.getObjectConnectorParamsData(null,e.object2D,{...t,state:""!==i?Array.isArray(i)?i[0]:i:void 0})}return{}}function oC(e,t){return e.entity=t.entity,this.getObjectConnectorParamsData(null,e.object2D,t.entity)}function nC(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.entity_id===t.entity.entity_id));if(!i)return null;let o={};return o.isSensorNumberValue=this.getIsSensorNumberValue(t.entity.entity_id,e.object2D),o.sensorOutputValue=o.isSensorNumberValue?r(parseFloat(t.entity.state),this.sensorValueDecimalPrecision):t.entity.state,o.connectorInstanceSavedParameters=i,o.sensorMeshPropertiesSetter=e=>{e.name=t.entity.entity_id,e.entity=t.entity},o}function sC(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e)),o=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===i.entity_id));return"number"===this.props.mainComponentThis.getKlet3DDataParamValue(i,t,["sensor_type"])&&!T.isNumber(o.state)}function aC(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.entity_id===t.entity_id));if(!i)return null;let o={};return o.otherValue=t.entity.state,o.connectorInstanceSavedParameters=i,o.otherMeshPropertiesSetter=e=>{e.name=t.entity.entity_id,e.entity=t.entity},o}function rC(e,t){if(!this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.entity_id===t.entity_id)))return null;let i={...this.getPresenceAreaDetectedObjectsData(e.object2D,{entity:t.entity})};return i.presenceAreaGroupPropertiesSetter=e=>{e.name=t.entity.entity_id,e.entity=t.entity},i}function lC(e,t){const i=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===t.entity.entity_id));return{detectedObjectsPositions:e.additionalParams.detectedObjectToModelMappings.map(((e,t)=>({detected_object_field:e.detectedObjectField,coordX:i&&Object.hasOwn(i.attributes,`target${t+1}_x`)?i.attributes[`target${t+1}_x`]:null,coordY:i&&Object.hasOwn(i.attributes,`target${t+1}_y`)?i.attributes[`target${t+1}_y`]:null}))),coordinatesUnit:"mm"}}function hC(e,t){return{entity:{...(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(e)},connectorBindedObjectObj2D:t}}function cC(e){return e.entity.entity_id}function dC(e,t){if(t)return{value:this.getObjectPanelItemValue(e,!0,this.getObjectConnectorParamsData(e.entity.entity_id,e.object2D)),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.entity.entity_id),entity_id:e.entity.entity_id,entity:e.entity};{const t=this.getIsSensorNumberValue(e.entity_id,e.object2D);return{value:this.getObjectPanelItemValue(e,!1,this.getObjectConnectorParamsData(e.entity.entity_id,e.object2D),t),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.entity.entity_id),isNumberValue:t,entity_id:e.entity.entity_id,entity:e.entity}}}function pC(e,t,i,o){const n=this.getObjectConnectorClassValue(i);if(t){if("_cover_"===n)return this.getHAEntityUserSpecificedStateValue(i.entity,null,e);{const t="_hvac_"===n?this.getHVACEntityStateValue(i.entity):i.entity.state,o=this.getHAEntityUserSpecificedStateValue(i.entity,"on",e);return Array.isArray(o)?o.includes(t):t===o}}return"_presence_area_"===n?this.getPresenceAreaDetectedObjectsData(e.object2D,i):o?r(i.entity.state,this.sensorValueDecimalPrecision):i.entity.state}function mC(e){if(this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D)){const t=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id))));e.mesh.longPressCustomHandler?e.mesh.longPressCustomHandler(e,t):this.props.mainComponentThis.openBrowserModMoreInfoPopupForEntity(t.entity_id)}}function uC(e){return e.state}const gC=class{constructor(e,t){console.log("HomeAssistant3DViewController constructor",t),this.mainComponentThis=e,this.controlerParams=t,this.floorplan3DThis=this.controlerParams.floorplan3DThis,this.floorplan3DThis.HAConfigObject={},this.floorplan3DThis.onHAConfigChange=Ww.bind(this.floorplan3DThis),this.floorplan3DThis.onObjectConnectorEntitiesDataChange3DHandler=this.floorplan3DThis.onObjectConnectorEntitiesDataChange3DHandlerBasic,this.floorplan3DThis.getHAEntityUserSpecificedStateValue=Nw.bind(this.floorplan3DThis),this.floorplan3DThis.setFloorplanItemMeshProperties=Vw.bind(this.floorplan3DThis),this.floorplan3DThis.isFloorplanItemMeshBinded=Ew.bind(this.floorplan3DThis),this.floorplan3DThis.getFixedObjectConnectorMeshState=Hw.bind(this.floorplan3DThis),this.floorplan3DThis.fixedObjectConnectorChangeStateOnClickDefaultMethod=zw.bind(this.floorplan3DThis),this.floorplan3DThis.getLightProperties=Gw.bind(this.floorplan3DThis),this.floorplan3DThis.getFanProperties=qw.bind(this.floorplan3DThis),this.floorplan3DThis.getCoverProperties=Uw.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceBinaryProperties=Yw.bind(this.floorplan3DThis),this.floorplan3DThis.getHVACProperties=Xw.bind(this.floorplan3DThis),this.floorplan3DThis.toggleCoverStateAction=Kw.bind(this.floorplan3DThis),this.floorplan3DThis.onCameraClickActions=Zw.bind(this.floorplan3DThis),this.floorplan3DThis.toggleScreenStateAction=$w.bind(this.floorplan3DThis),this.floorplan3DThis.onCameraLongPress=Jw.bind(this.floorplan3DThis),this.floorplan3DThis.cloneUnfixedBindedObject3DCustomCallback=Qw.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorUnitOfMeasurement=eC.bind(this.floorplan3DThis),this.floorplan3DThis.setObjectsConnectorInstanceCustomProperties=tC.bind(this.floorplan3DThis),this.floorplan3DThis.removeBindedFixedObjectCallback=iC.bind(this.floorplan3DThis),this.floorplan3DThis.addBindedFixedObjectCallback=oC.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorMeshParameters=nC.bind(this.floorplan3DThis),this.floorplan3DThis.getIsSensorNumberValue=sC.bind(this.floorplan3DThis),this.floorplan3DThis.getOtherMeshParameters=aC.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceAreaGroupParameters=rC.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceAreaDetectedObjectsData=lC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsData=hC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsDataIDValue=cC.bind(this.floorplan3DThis),this.floorplan3DThis.getPanelItemProperties=dC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectPanelItemValue=pC.bind(this.floorplan3DThis),this.floorplan3DThis.selectedItemLongPressHandler=mC.bind(this.floorplan3DThis),this.floorplan3DThis.getHVACEntityStateValue=uC.bind(this.floorplan3DThis)}};function fC(e){if("data_msg"===e.data.type){if(e.origin!==this.props.customProps.integratorDomain)return;console.log("Sender domain",e.origin),console.log("Message event"),console.log(e),console.log(e.data),console.log("Forwarded data"),console.log(e.data.data);const t=JSON.parse(e.data.data).availableEntities;if(Object.keys(t).length!==this.webIntegrationEntities.length){console.log("Entities count changed"),this.webIntegrationEntities=[];for(let e=0;e<t.length;e++)this.webIntegrationEntities.push({...t[e]})}else for(let e=0;e<t.length;e++){let i=this.webIntegrationEntities.find((i=>i.web_id===t[e].web_id));if(i)for(const[o,n]of Object.entries(t[e]))i[o]=n}this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onObjectConnectorEntitiesDataChange3DHandler(this.webIntegrationEntities),0===this.onWebIntegrationDataChangeCallCounter&&this.onWebIntegrationDataLoadedCallback(),this.onWebIntegrationDataChangeCallCounter++}}function bC(){this.onShow3DClick(!1)}function wC(e,t,i,o){if("sensors"!==e.class)return;const s=this.getBindedObjectKlet3DBinderData(e)?this.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.id)))):null;n.render((0,a.jsx)(ww,{ref:this.bindingRightBoxComponentRef,mainComponentThis:this,floorplan3DThis:t,klet3DBinder:s,title:"Sensors binding",selectedObj:e,renderDivider:o,callAPIForSave:!0,setResponseError:this.setState.bind(this)},(new Date).getTime()),i.current)}function CC(e,t,i,o){let s=[...this.webIntegrationEntities];const r=this.getFloorplanObj2Ds();s=s.filter((t=>{const i=this.klet3DLastSavedData.find((e=>e.web_id===t.web_id));if(i){let t;for(let e=0;e<i.objID.length&&(t=r.find((t=>t.id===i.objID[e].id)),!t);e++);return!!t&&this.isSameBindedObjectType(t.type,e.type)}return!0})),at(this.bindingPopupRightBoxContainerRef.current,200,(()=>{n.render((0,a.jsx)(uw,{updateKlet3DBinderState:o,containerRef:this.bindingPopupRightBoxContainerRef,klet3DBinder:t,obj2D:e,availableBinders:s,binderIDLayoutMethod:e=>e.web_id,tableTitle:"Available sensors",hasDomain:!1,hasDates:!1,callAPIForSave:!0,floorplan3DThis:i,setResponseError:this.setState.bind(this),mainComponentThis:this}),this.bindingPopupRightBoxContainerRef.current)}),"block",!1)}function xC(){}function _C(){}function yC(e,t){this.renderBindingRightBox(e,t,this.sensorOtherToolsContainerRef,!1)}function SC(){}function vC(e){return this.getObjectConnectorKlet3DBinderData(e).name||""}function DC(e){return this.webIntegrationEntities.find((t=>t.web_id===e))}function TC(){window.removeEventListener("message",this.onWebIntegrationDataChangeCallback)}const jC=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mainComponentThis=e,this.controlerParams=t,this.mainComponentThis.onWebIntegrationDataChangeCallCounter=0,this.mainComponentThis.webIntegrationEntities=[],this.mainComponentThis.entitiesDataArrayName="webIntegrationEntities",this.mainComponentThis.connectorEntityInstancePropertyName="webEntity",this.mainComponentThis.connectorIDbinderIDPropertyName="web_id",this.mainComponentThis.onWebIntegrationDataChangeCallback=fC.bind(this.mainComponentThis),this.mainComponentThis.onWebIntegrationDataLoadedCallback=bC.bind(this.mainComponentThis),this.mainComponentThis.renderBindingRightBox=wC.bind(this.mainComponentThis),this.mainComponentThis.openBindingPopup=CC.bind(this.mainComponentThis),this.mainComponentThis.freeItemToolsCustomSetter=xC.bind(this.mainComponentThis),this.mainComponentThis.wallItemToolsCustomSetter=_C.bind(this.mainComponentThis),this.mainComponentThis.sensorOtherItemToolsCustomSetter=yC.bind(this.mainComponentThis),this.mainComponentThis.presenceAreaItemToolsCustomSetter=SC.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderName=vC.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderData=DC.bind(this.mainComponentThis),this.mainComponentThis.componentWillUnmountCustomCallback=TC.bind(this.mainComponentThis),this.onFloorplanDataLoadControllerCallback=this.onFloorplanDataLoadControllerCallback.bind(this.mainComponentThis)}onFloorplanDataLoadControllerCallback(e){this.klet3DGeneral=e[0].entitygeneral||{},this.sensorHeatmapLastSavedData=this.klet3DGeneral&&Object.hasOwn(this.klet3DGeneral,"sensorHeatmapData")?this.klet3DGeneral.sensorHeatmapData:[],this.klet3DDetails=e[0].klet3d_details||{};let t=e[0].entitydata||[];const i=this.getFloorplanObj2Ds();this.klet3DLastSavedData=t.filter((e=>(e.objID=e.objID.map((e=>e.id?e:{id:e})),e.objID=e.objID.filter((e=>i.find((t=>t.id===e.id)))),e.objID.length>0))).map((e=>new rw(e,e.objID,e.params,this))),window.addEventListener("message",this.onWebIntegrationDataChangeCallback),window.parent.postMessage({type:"success_msg",message:"Handshake success"},this.props.customProps.integratorDomain)}};function IC(e,t){let i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.objID.find((e=>e.id===t.id))));if(i){const t=this.props.mainComponentThis.webIntegrationEntities.find((e=>e.web_id===i.web_id));t&&(e.webEntity=t,e.web_id=t.web_id)}if(this.isFloorplanItemMeshBinded(e)){let i={};"_lights_"===this.getObjectConnectorClassValue(null,t)&&(i.isInitialRenderCall=!0),e.changeStateMethod(e,{...this.getObjectConnectorParamsData(null,t,e.webEntity),...i})}this.clickableObjectsSceneControlRef.current.isShowOnlyClickableObjectsActive()&&!this.isFloorplanItemClickable(e)&&(e.visible=!1)}function PC(e){return!!e.webEntity}function OC(e,t,i){const o=i.returnBoolean||!1,n=this.getObjectConnectorDefaultStateValue(e);let s;return s=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D)?n:Object.hasOwn(i,"meshUnBindedStateValue")?i.meshUnBindedStateValue:n,o?"on"===s:s}async function kC(){}function FC(e){let t=this.getObjectConnectorPropertiesDefaultMethod(e);return t.currentPosition=0,t}function MC(e){let t=this.getObjectConnectorPropertiesDefaultMethod(e);for(let i in t)i.includes("opacity")&&(t[i]/=100);return t}function AC(e,t){console.log(e,t,t.webEntity);let i={mode:"neutral"};return i}async function RC(e){this.floorplan3DViewScene.getObjectByName("coverage_area_mesh")?this.removeCameraCoverageArea3DMesh():this.createCameraCoverageArea3DVisualization(e.object2D)}function LC(e,t){t.webEntity=e.webEntity,t.web_id=e.web_id}function BC(e){const t=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id))));if(!t)return"";const i=this.props.mainComponentThis.webIntegrationEntities.find((e=>e.web_id===t.web_id));return i&&i.attributes.unit||""}function WC(e,t){e.webEntity={...t.webEntity},e.web_id=e.webEntity.web_id}function NC(e){const t={...e.webEntity};e.webEntity=null;return this.getObjectConnectorParamsData(null,e.object2D,{...t,state:""})}function VC(e,t){return e.webEntity=t.webEntity,this.getObjectConnectorParamsData(null,e.object2D,t.webEntity)}function EC(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.web_id===t.webEntity.web_id));if(!i)return null;let o={};return o.isSensorNumberValue=this.getIsSensorNumberValue(t.webEntity.web_id,e.object2D),o.sensorOutputValue=o.isSensorNumberValue?r(parseFloat(t.webEntity.state),this.sensorValueDecimalPrecision):t.webEntity.state,o.connectorInstanceSavedParameters=i,o.sensorMeshPropertiesSetter=e=>{e.name=t.webEntity.web_id,e.webEntity=t.webEntity},o}function HC(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e)),o=this.props.mainComponentThis.webIntegrationEntities.find((e=>e.web_id===i.web_id));return console.log("getIsSensorNumberValue object2D",t),"number"===i.params.sensor_type&&!T.isNumber(o.state)}function zC(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.web_id===t.web_id));if(!i)return null;let o={};return o.otherValue=t.webEntity.state,o.connectorInstanceSavedParameters=i,o.otherMeshPropertiesSetter=e=>{e.name=t.webEntity.web_id,e.webEntity=t.webEntity},o}function GC(e,t){if(!this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.web_id===t.webEntity.web_id)))return null;let i={...this.getPresenceAreaDetectedObjectsData(e.object2D,{webEntity:t.webEntity})};return i.presenceAreaGroupPropertiesSetter=e=>{e.name=t.webEntity.web_id,e.webEntity=t.webEntity},i}function qC(e,t){const i=this.props.mainComponentThis.webIntegrationEntities.find((e=>e.web_id===t.webEntity.web_id));return{detectedObjectsPositions:e.additionalParams.detectedObjectToModelMappings.map(((e,t)=>({detected_object_field:e.detectedObjectField,coordX:i&&Object.hasOwn(i.attributes,`target${t}_x`)?i.attributes[`target${t}_x`]:null,coordY:i&&Object.hasOwn(i.attributes,`target${t}_y`)?i.attributes[`target${t}_y`]:null}))),coordinatesUnit:"mm"}}function UC(e,t){return{webEntity:{...(arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)||this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(e)},connectorBindedObjectObj2D:t}}function YC(e){return e.webEntity.web_id}function XC(e,t){if(t)return{value:this.getObjectPanelItemValue(e,!0,this.getObjectConnectorParamsData(e.webEntity.web_id,e.object2D)),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.webEntity.web_id),web_id:e.webEntity.web_id,webEntity:e.webEntity};{const t=this.getIsSensorNumberValue(e.web_id,e.object2D);return{value:this.getObjectPanelItemValue(e,!1,this.getObjectConnectorParamsData(e.webEntity.web_id,e.object2D),t),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.webEntity.web_id),isNumberValue:t,web_id:e.webEntity.web_id,webEntity:e.webEntity}}}function KC(e,t,i,o){const n=this.getObjectConnectorClassValue(i);return t?"_cover_"===n&&0:o?r(i.webEntity.state,this.sensorValueDecimalPrecision):i.webEntity.state}const ZC=class{constructor(e,t){this.mainComponentThis=e,this.controlerParams=t,this.floorplan3DThis=this.controlerParams.floorplan3DThis,this.floorplan3DThis.onObjectConnectorEntitiesDataChange3DHandler=this.floorplan3DThis.onObjectConnectorEntitiesDataChange3DHandlerBasic,this.floorplan3DThis.setFloorplanItemMeshProperties=IC.bind(this.floorplan3DThis),this.floorplan3DThis.isFloorplanItemMeshBinded=PC.bind(this.floorplan3DThis),this.floorplan3DThis.getFixedObjectConnectorMeshState=OC.bind(this.floorplan3DThis),this.floorplan3DThis.fixedObjectConnectorChangeStateOnClickDefaultMethod=kC.bind(this.floorplan3DThis),this.floorplan3DThis.getCoverProperties=FC.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceBinaryProperties=MC.bind(this.floorplan3DThis),this.floorplan3DThis.getHVACProperties=AC.bind(this.floorplan3DThis),this.floorplan3DThis.onCameraClickActions=RC.bind(this.floorplan3DThis),this.floorplan3DThis.cloneUnfixedBindedObject3DCustomCallback=LC.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorUnitOfMeasurement=BC.bind(this.floorplan3DThis),this.floorplan3DThis.setObjectsConnectorInstanceCustomProperties=WC.bind(this.floorplan3DThis),this.floorplan3DThis.removeBindedFixedObjectCallback=NC.bind(this.floorplan3DThis),this.floorplan3DThis.addBindedFixedObjectCallback=VC.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorMeshParameters=EC.bind(this.floorplan3DThis),this.floorplan3DThis.getIsSensorNumberValue=HC.bind(this.floorplan3DThis),this.floorplan3DThis.getOtherMeshParameters=zC.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceAreaGroupParameters=GC.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceAreaDetectedObjectsData=qC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsData=UC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsDataIDValue=YC.bind(this.floorplan3DThis),this.floorplan3DThis.getPanelItemProperties=XC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectPanelItemValue=KC.bind(this.floorplan3DThis)}};const $C=class{constructor(e,t){this.mainComponentThis=e,this.addOnIntegrationType=t,this.view2DController=null,this.view3DController=null,this.target2DViewControllerClass=null,this.target3DViewControllerClass=null,"HomeAssistant"===this.addOnIntegrationType?(this.target2DViewControllerClass=Bw,this.target3DViewControllerClass=gC):"WebIntegration"===this.addOnIntegrationType&&(this.target2DViewControllerClass=jC,this.target3DViewControllerClass=ZC)}initializeController(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("2D"===e)this.view2DController=new this.target2DViewControllerClass(this.mainComponentThis,t);else{this.view3DController=new this.target3DViewControllerClass(this.mainComponentThis,t);const e=t.floorplan3DThis;e.props.mainComponentThis.objectConnectorAvailableClasses.forEach((t=>{const i=(i,o,n)=>{!t[i]||t[i]&&!e[t[i]]?t[o]=n:t[o]=e[t[i]]};i("getMeshStateValueMethodName","getMeshStateValueMethod",e.getFixedObjectConnectorMeshState),i("getPropertiesMethodName","getPropertiesMethod",e.getObjectConnectorPropertiesDefaultMethod),t.changeStateOnClickEnabled&&i("changeStateOnClickCustomMethodName","changeStateOnClickMethod",e.fixedObjectConnectorChangeStateOnClickDefaultMethod),t.longPressCustomHandlerName&&e[t.longPressCustomHandlerName]&&(t.longPressCustomHandler=e[t.longPressCustomHandlerName])}))}}};class JC extends o.Component{constructor(e){var t;super(e),t=this,this.setShow3DStatus=(e,t)=>this.setState({show3D:e},(()=>t&&t())),this.onFloorplanDataLoadCallback=e=>{Wg.call(this,e,(e=>{this.addOnDrawingControlerInstance.view2DController.onFloorplanDataLoadControllerCallback(e)}))},this.state={responseError:null,customResponseError:null,show3D:!0},this.isAddOnApp=!0,this.measureSystemContext={userUnit:e.userUnit},this.meter=30,Bg.call(this,e),this.preventBindModeMouseMove=!0,this.addOnDrawingControlerInstance=null,this.klet3DLastSavedData=[],this.sensorHeatmapLastSavedData=[],this.klet3DGeneral={},this.klet3DDetails={},this.SPOT_DISTANCE_MAX=1e3,this.mainContainerRef=o.createRef(),this.sensorOtherToolsContainerRef=o.createRef(),this.presenceAreaToolsContainerRef=o.createRef(),this.bindingWallItemContainerRef=o.createRef(),this.bindingPopupRightBoxContainerRef=o.createRef(),this.sensorsHeatmapSettingsPopupContainerRef=o.createRef(),this.sensorsHeatmapEditAddNewPopupContainerRef=o.createRef(),this.bindingFreeItemContainerRef=o.createRef(),this.bindingRightBoxComponentRef=o.createRef(),this.applicationInfoRef=o.createRef(),this.getFloorplanID=Xm.bind(this),this.checkPreviousFloorplanItemBinderLogic=Km.bind(this),this.getFloorplanGpsLatitude=Zm.bind(this),this.getFloorplanGpsLongitude=$m.bind(this),this.getFloorplanObj2Ds=Jm.bind(this),this.getObject2DById=Qm.bind(this),this.onFreeItemToolsCloseClick=hb.bind(this),this.onWallItemToolsCloseClick=cb.bind(this),this.handleKeyDown=db.bind(this),this.getBindedObjectKlet3DBinderData=pb.bind(this),this.getObjectConnectorClassParamsForObject2D=mb.bind(this),this.getKlet3DBinderParamsDefaultValues=ub.bind(this),this.getKlet3DBinderObjectLevelParams=gb.bind(this),this.resetKlet3DBinderParams=fb.bind(this),this.isSameBindedObjectType=bb.bind(this),this.isObjectLevelParam=xb.bind(this),this.setKlet3DDataParamValue=_b.bind(this),this.getKlet3DDataParamValue=yb.bind(this),this.getScreenParametersFormItems=Sb.bind(this),this.onFloorHeightInputChange=ag.bind(this),this.handleFloorplanFloorClick=rg.bind(this),this.componentWillUnmountCustomCallback=null,this.panelDrawingOptions2D=[{itemsClass:"furniture_items",...this.getItemsClassWithSubClassesDrawingOption2DProperties("isFurnitureCategory"),deleteMessage:"Furniture deleted",rightBoxOpenMessage:"Modify furniture",rightBoxTexts:{titleText:"Modify furniture",deleteText:"Delete furniture"},object3DProperties:{type:"furniture"}},{itemsClass:"door",deleteMessage:"Door deleted",rightBoxOpenMessage:"Modify door",rightBoxTexts:{titleText:"Modify door",deleteText:"Delete door"},object3DProperties:{type:"door"}},{itemsClass:"window",deleteMessage:"Window deleted",rightBoxOpenMessage:"Modify window",rightBoxTexts:{titleText:"Modify window",deleteText:"Delete window"},object3DProperties:{type:"window"}},{itemsClass:"light",deleteMessage:"Light deleted",rightBoxOpenMessage:"Modify light",rightBoxTexts:{titleText:"Modify light",deleteText:"Delete light"},object3DProperties:{type:"light"}},{itemsClass:"fan",deleteMessage:"Fan deleted",rightBoxOpenMessage:"Modify fan",rightBoxTexts:{titleText:"Modify fan",deleteText:"Delete fan"},object3DProperties:{type:"fan"}},{itemsClass:"cover",deleteMessage:"Cover deleted",rightBoxOpenMessage:"Modify cover",rightBoxTexts:{titleText:"Modify cover",deleteText:"Delete cover"},object3DProperties:{type:"cover"}},{itemsClass:"presence",deleteMessage:"Presence point deleted",rightBoxOpenMessage:"Modify presence point",rightBoxTexts:{titleText:"Modify presence",deleteText:"Delete presence"},object3DProperties:{type:"presence"}},{isTargetObjectMode:e=>"generic_presence_area"===e,binderObjType:"generic_presence_area",deleteMessage:"Presence area deleted",rightBoxOpenMessage:"Modify presence area",rightBoxTexts:{titleText:"Modify presence",deleteText:"Delete presence"},view3DDisable:!0},{itemsClass:"hvac",...this.getItemsClassWithSubClassesDrawingOption2DProperties("isHVACCategory"),deleteMessage:"HVAC deleted",rightBoxOpenMessage:"Modify HVAC",rightBoxTexts:{titleText:"Modify HVAC",deleteText:"Delete HVAC"},object3DProperties:{type:"hvac"}},{itemsClass:"camera",deleteMessage:"Camera deleted",rightBoxOpenMessage:"Modify camera",rightBoxTexts:{titleText:"Modify camera",deleteText:"Delete camera"},object3DProperties:{type:"camera"}},{itemsClass:"screen",deleteMessage:"Screen deleted",rightBoxOpenMessage:"Modify screen",rightBoxTexts:{titleText:"Modify screen",deleteText:"Delete screen"},object3DProperties:{type:"screen"}},{panelOptionAdditionalOptionsData:{choiceOptions:[{label:"ON FLOOR",value:"on_floor",itemType:5},{label:"ON WALL",value:"on_wall",itemType:7}],onChoiceOptionClickCallback:null,mainComponentThisSelectedChoiceOptionPropertyName:"selectedSurfaceChoiceOption"},fixedSelectedTypeValue:"generic_surface_area",isTargetObjectMode:e=>"generic_surface_area"===e,deleteMessage:"Surface deleted",rightBoxOpenMessage:"Modify surface",rightBoxTexts:{titleText:"Modify surface",deleteText:"Delete surface"},object3DProperties:{type:"surface",name:"surfaceMesh"}},{isTargetObjectMode:()=>!1,binderObjType:"sensor",deleteMessage:"Sensor deleted",rightBoxOpenMessage:"Modify sensor",rightBoxTexts:{titleText:"Modify sensor",deleteText:"Delete sensor"},view3DDisable:!0},{isTargetObjectMode:()=>!1,binderObjType:"other_entity",deleteMessage:"Entity deleted",rightBoxOpenMessage:"Modify entity",rightBoxTexts:{titleText:"Modify entity",deleteText:"Delete entity"},view3DDisable:!0}],this.panelDrawingOptions2D.forEach((e=>{e.itemsClass&&!e.isTargetObjectMode&&(e.isTargetObjectMode=function(){return t.folderNameToModelsMapping[t.getItemsClassSubClassFolderName(e.itemsClass)].isTargetObject(...arguments)})})),this.objectConnectorAvailableClasses=[{connectorClass:"door_window",bindingObjectsItemsClasses:["door","window"],renderBindingParametersComponent:w(Mb),parametersItems:Vi,getBindingParametersDefaultValues:()=>({open_state:"on",closed_state:"off"}),getMeshStateMethodCustomParams:{meshStatePropertyName:"status",meshOnStatePropertyValue:"open",meshOffStatePropertyValue:"closed",returnBoolean:!0},changeStateMethodName:"handleDoorWindowUpdate",toggleOnClickEnabled:!0,homeAssistantBindingEntitiesDomains:["input_boolean","binary_sensor"]},{connectorClass:"_lights_",bindingObjectsItemsClasses:["light"],renderBindingParametersComponent:w(Rb),parametersItems:Ei,isParametersLiveChangeEnabled:!0,getBindingParametersDefaultValues:()=>({switched_on_state:"on",switched_off_state:"off",power_sync:!1,power:10,color_sync:!1,color:"#ffffff",variant:"point",spot_angle:45,spot_distance:this.SPOT_DISTANCE_MAX}),bindingObjectLevelParameters:{variant:!0,spot_angle:!0,spot_distance:!0},getMeshStateMethodCustomParams:{returnBoolean:!0},changeStateMethodName:"handleLightUpdate",changeStateOnClickEnabled:!0,getPropertiesMethodName:"getLightProperties",homeAssistantBindingEntitiesDomains:["light","switch"]},{connectorClass:"_fan_",bindingObjectsItemsClasses:["fan"],renderBindingParametersComponent:w(Bb),parametersItems:Hi,isParametersLiveChangeEnabled:!0,getBindingParametersDefaultValues:()=>({switched_on_state:"on",switched_off_state:"off",percentage_sync:!1,percentage:50,direction_sync:!1,direction:"forward"}),bindingObjectLevelParameters:{percentage_sync:!0,percentage:!0,direction_sync:!0,direction:!0},changeStateMethodName:"handleFanUpdate",changeStateOnClickEnabled:!0,getPropertiesMethodName:"getFanProperties",homeAssistantBindingEntitiesDomains:["fan"]},{connectorClass:"_cover_",bindingObjectsItemsClasses:["cover"],renderBindingParametersComponent:w(Nb),parametersItems:zi,getBindingParametersDefaultValues:()=>({closing_direction:"top",open_offset:this.convertValueToSvgUnits("metric"===this.measureSystemContext.userUnit?10:5),closed_offset:0}),bindingObjectLevelParameters:{closing_direction:!0,open_offset:!0,closed_offset:!0},changeStateMethodName:"handleCoverUpdate",changeStateOnClickEnabled:!0,changeStateOnClickCustomMethodName:"toggleCoverStateAction",getPropertiesMethodName:"getCoverProperties",homeAssistantBindingEntitiesDomains:["cover"]},{connectorClass:"presence_binary",bindingObjectsItemsClasses:["presence"],renderBindingParametersComponent:w(Eb),parametersItems:Gi,getBindingParametersDefaultValues:()=>({detected_state:"on",undetected_state:"off",detected_opacity:100,undetected_opacity:0}),bindingObjectLevelParameters:{detected_opacity:!0,undetected_opacity:!0},changeStateMethodName:"handlePresenceBinaryDetectionUpdate",getPropertiesMethodName:"getPresenceBinaryProperties",homeAssistantBindingEntitiesDomains:["binary_sensor"]},{connectorClass:"_hvac_",bindingObjectsItemsClasses:["hvac"],renderBindingParametersComponent:w(qb),parametersItems:qi,getBindingParametersDefaultValues:()=>({hvac_switched_on_state:"on",hvac_switched_off_state:"off"}),changeStateMethodName:"handleHVACUpdate",changeStateOnClickEnabled:!0,getPropertiesMethodName:"getHVACProperties",homeAssistantBindingEntitiesDomains:["climate","switch"]},{connectorClass:"christmas_tree_lights",bindingObjectsModels:Bi,renderBindingParametersComponent:w(zb),parametersItems:Ui,getBindingParametersDefaultValues:()=>({christmas_light_switched_on_state:"on",christmas_light_switched_off_state:"off"}),changeStateMethodName:"handleChristmasTreeUpdate",changeStateOnClickEnabled:!0,homeAssistantBindingEntitiesDomains:["light","switch","input_boolean"]},{connectorClass:"_camera_",bindingObjectsItemsClasses:["camera"],renderBindingParametersComponent:w(Yb),parametersItems:[],changeStateMethodName:"handleCameraUpdate",changeStateOnClickEnabled:!0,changeStateOnClickCustomMethodName:"onCameraClickActions",longPressCustomHandlerName:"onCameraLongPress",homeAssistantBindingEntitiesDomains:["camera"]},{connectorClass:"_screen_",bindingObjectsItemsClasses:["screen"],renderBindingParametersComponent:w(Kb),parametersItems:Yi,isParametersLiveChangeEnabled:!0,getBindingParametersDefaultValues:e=>{const t=[{fieldPart:"_is_light",value:!1},{fieldPart:"_3d_glow_effect",value:!1},{fieldPart:"_3d_glow_factor",value:Ue[e.type].screenPartDepthScaleFactor},{fieldPart:"_3d_glow_spread",value:1.2}];return{screen_switched_on_state:"on",screen_switched_off_state:"off",screen_on_color:"#32CD32",screen_off_color:"#8B0000",screen_is_light:t.find((e=>"_is_light"===e.fieldPart)).value,screen_3d_glow_effect:t.find((e=>"_3d_glow_effect"===e.fieldPart)).value,screen_3d_glow_factor:t.find((e=>"_3d_glow_factor"===e.fieldPart)).value,screen_3d_glow_spread:t.find((e=>"_3d_glow_spread"===e.fieldPart)).value,...Object.fromEntries(Yi.filter((e=>e.fieldPrefix)).flatMap((e=>e.form)).map((e=>[e.field,t.find((t=>e.field.includes(t.fieldPart))).value])))}},bindingObjectLevelParameters:{screen_on_color:!0,screen_off_color:!0,screen_is_light:!0,screen_3d_glow_effect:!0,screen_3d_glow_factor:!0,screen_3d_glow_spread:!0,...Object.fromEntries(Yi.filter((e=>e.fieldPrefix)).flatMap((e=>e.form)).map((e=>[e.field,!0])))},getMeshStateMethodCustomParams:{meshUnBindedStateValue:null},changeStateMethodName:"handleScreenUpdate",changeStateOnClickEnabled:!0,changeStateOnClickCustomMethodName:"toggleScreenStateAction",getPropertiesMethodName:"getScreenProperties",homeAssistantBindingEntitiesDomains:["light","switch","input_boolean","binary_sensor","sensor","media_player","remote"]},{connectorClass:"_surface_area_",bindingObjectsModels:["generic_surface_area"],renderBindingParametersComponent:w(sw),parametersItems:Ji,getBindingParametersDefaultValues:()=>({active_layout_state:"on",inactive_layout_state:"off"}),getMeshStateMethodCustomParams:{meshUnBindedStateValue:null},changeStateMethodName:"handleSurfaceAreaUpdate",toggleOnClickEnabled:!0,homeAssistantBindingEntitiesDomains:["input_boolean","binary_sensor","sensor"]},{connectorClass:"_sensors_",bindingObjectsModels:["sensor"],renderBindingParametersComponent:w(Qb),parametersItems:Zi,getBindingParametersDefaultValues:()=>({sensor_type:"number",background:{background_coloring_type:null,background_fixed_color:"#ffffff",background_range_min_value:"",background_range_min_color:"#0000ff",background_range_max_value:"",background_range_max_color:"#ff0000",background_range_intermediate_colors:[],background_opacity:1,checked:!1},text:{text_coloring_type:"fixed",text_fixed_color:"#000000",text_range_min_value:"",text_range_min_color:"#0000ff",text_range_max_value:"",text_range_max_color:"#ff0000",text_range_intermediate_colors:[],text_opacity:1,text_font_size:20,checked:!0}}),bindingObjectLevelParameters:{background:{background_coloring_type:!0,background_fixed_color:!0,background_range_min_value:!0,background_range_min_color:!0,background_range_max_value:!0,background_range_max_color:!0,background_range_intermediate_colors:!0,background_opacity:!0,checked:!0},text:{text_coloring_type:!0,text_fixed_color:!0,text_range_min_value:!0,text_range_min_color:!0,text_range_max_value:!0,text_range_max_color:!0,text_range_intermediate_colors:!0,text_opacity:!0,text_font_size:!0,checked:!0}},homeAssistantBindingEntitiesDomains:["sensor"],isFixed:!1},{connectorClass:"_others_",bindingObjectsModels:["other_entity"],renderBindingParametersComponent:w(tw),parametersItems:$i,getBindingParametersDefaultValues:()=>({color:"#000000",opacity:1,font_size:20}),bindingObjectLevelParameters:{color:!0,opacity:!0,font_size:!0},homeAssistantBindingEntitiesDomains:[],isFixed:!1},{connectorClass:"_presence_area_",bindingObjectsModels:["generic_presence_area"],renderBindingParametersComponent:w(ow),parametersItems:[],homeAssistantBindingEntitiesDomains:["sensor"],isFixed:!1}],this.objectConnectorAvailableClasses.forEach((e=>{e.bindingObjectsItemsClasses?e.isBindingObjectType=t=>{for(let i=0;i<e.bindingObjectsItemsClasses.length;i++)if(this.panelDrawingOptions2D.find((t=>t.itemsClass===e.bindingObjectsItemsClasses[i])).isTargetObjectMode(t))return!0;return!1}:e.bindingObjectsModels?e.isBindingObjectType=t=>e.bindingObjectsModels.includes(t):e.isBindingObjectType=()=>!1,Object.hasOwn(e,"isFixed")||(e.isFixed=!0,e.defaultStateValue="presence_binary"===e.connectorClass?"on":"off"),e.getBindingParametersDefaultValues||(e.getBindingParametersDefaultValues=()=>({})),e.bindingObjectLevelParameters||(e.bindingObjectLevelParameters={})}))}componentDidMount(){Ng.call(this,Ii),this.addOnDrawingControlerInstance=new $C(this,this.props.addOnIntegrationType),this.addOnDrawingControlerInstance.initializeController("2D"),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.initialize3DViewController(),n.render((0,a.jsx)(Ca,{}),this.loadingComponentContainer.current,(()=>{Ii.get.call(this,`/klet3d/objects2/${this.props.floorplanID}`,(e=>{this.userAddedObjects=e,this.userAddedObjects.forEach((e=>this.createUserAddedObjectModelsDetailsDimensionsData(e))),Ii.get.call(this,`/klet3d/entity/${this.props.floorplanID}/${this.props.licenseKey}`,(e=>{console.log("Floorplan response data"),console.log(e);let t=null;if(0===e.length?t=(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("span",{children:"There is no data for specified floorplan."})," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:"Check floorplanID from add-on configuration and try again."})]}):e[0]&&"expired"===e[0].status&&(t=(0,a.jsx)("span",{children:e[0].info})),t)return this.setState({customResponseError:t}),void n.unmountComponentAtNode(this.loadingComponentContainer.current);this.onFloorplanDataLoadCustomAPICalls?this.onFloorplanDataLoadCustomAPICalls(e):this.onFloorplanDataLoadCallback(e)}))}))}))}componentWillUnmount(){console.log("Component will unmount"),this.componentWillUnmountCustomCallback&&this.componentWillUnmountCustomCallback(),this.mounted=!1}render(){const{responseError:e,customResponseError:t}=this.state;return console.log("Context",this.measureSystemContext),(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{ref:this.loadingComponentContainer}),(0,a.jsx)(no,{ref:this.applicationInfoRef}),(0,a.jsx)(En,{responseError:e,customResponseError:t,children:(0,a.jsx)(bn,{indoorMapping:!0,responseError:e,children:(0,a.jsxs)("div",{ref:this.mainContainerRef,className:"main-container full-height",style:{overflow:"hidden"},children:[(0,a.jsxs)("div",{className:"svg-canvases-container full-height",children:[(0,a.jsx)("div",{ref:this.mapLayer2DContainerRef,className:"map-layer-container"}),(0,a.jsxs)("svg",{ref:this.linRef,viewBox:"0 0 1100 700",preserveAspectRatio:"xMidYMin slice",xmlns:"http://www.w3.org/2000/svg",className:"lin full-height",onClick:e=>e.preventDefault(),onMouseUp:this.handleMouseUp(Ii),onMouseDown:this.handleMouseDown,onMouseMove:e=>{h(e,(e=>{this.handleMouseMove(e)}),30)()},onContextMenu:this.handleContextMenu,children:[(0,a.jsx)(ur,{floorplanImagePattern:this.floorplanImagePattern,floorplanImage:this.floorplanImage,userUnit:this.measureSystemContext.userUnit,svgMeterUnits:this.meter,floorplan3DScaleFactor:this.floorplan3DScaleFactor,imperialSystemSquareFeetSize:this.imperialSystemSquareFeetSize,wallMaterialsAsyncPatternRef:this.wallMaterialsAsyncPatternRef,furnitureAsyncPatternRef:this.furnitureAsyncPatternRef,surfaceAreaAsyncPatternRef:this.surfaceAreaAsyncPatternRef,roomTextureContainerRef:this.roomTextureContainerRef,roomTexturePreviewContainerRef:this.roomTexturePreviewContainerRef,mainComponentThis:this}),(0,a.jsx)("g",{ref:this.boxGridRef,className:"svgGrid box-grid boxGrid fade-in",children:(0,a.jsx)("rect",{width:2e4,height:2e4,x:-3500,y:-2e3,fill:"url(#grid)"})}),(0,a.jsx)("g",{id:"boxFloorDrawingHelper",ref:this.boxFloorDrawingHelper,className:"box-floor-drawing-helper fade-in"}),(0,a.jsx)("g",{id:"boxFloorplan",ref:this.boxFloorplanImage,className:"box-floorplan fade-in"}),(0,a.jsx)("g",{id:"boxSurface",ref:this.boxSurface}),(0,a.jsx)("g",{id:"boxRoom",ref:this.boxRoom}),(0,a.jsx)("g",{id:"boxWall",ref:this.boxWall}),(0,a.jsx)("g",{id:"boxCarpentry",ref:this.boxCarpentry}),(0,a.jsx)("g",{id:"boxBind",ref:this.boxBind}),(0,a.jsx)("g",{id:"boxArea",ref:this.boxArea}),(0,a.jsx)("g",{id:"boxRib",ref:this.boxRib,className:"box-rib fade-in"}),(0,a.jsx)("g",{id:"boxScale",ref:this.boxScale,className:"box-scale fade-in"}),(0,a.jsx)("g",{id:"boxText",ref:this.boxText}),(0,a.jsx)("g",{id:"boxDebug",ref:this.boxDebug})]})]}),this.state.show3D&&(0,a.jsx)("div",{ref:this.floorplan3DContainerRef,className:"floorplan3D-container full-height hidden fade-in",style:{display:"block"},children:(0,a.jsx)(Ym,{ref:this.floorplan3DComponent,setResponseError:this.setState.bind(this),mainComponentThis:this})}),(0,a.jsx)("div",{ref:this.showFloorplanOnMapContainerRef,className:"indoor-modal show-floorplan-on-map-container"}),(0,a.jsx)("div",{ref:this.areaValue,className:"areaValue hidden"}),(0,a.jsx)("div",{ref:this.bindingPopupRightBoxContainerRef,className:"indoor-modal door-window-ha-entities-binding-popup-container"}),(0,a.jsx)("div",{ref:this.sensorsHeatmapSettingsPopupContainerRef,className:"indoor-modal sensors-heatmap-settings-popup-container"}),(0,a.jsx)("div",{ref:this.sensorsHeatmapEditAddNewPopupContainerRef,className:"indoor-modal sensors-heatmap-settings-edit-add-popup-container"}),(0,a.jsxs)("div",{ref:this.drawingAreaPopup,className:"drawing-area-popup",children:[(0,a.jsx)("div",{className:"popup-tip"}),(0,a.jsx)("div",{className:"popup-content",children:(0,a.jsxs)("div",{className:"popup-content-container",children:[(0,a.jsx)("div",{className:"close-tooltip",children:(0,a.jsx)("div",{onClick:this.onDrawingAreaPopupCloseClick,children:(0,a.jsx)(to.A,{})})}),(0,a.jsx)("div",{ref:this.popupContentRef,className:"content-mounting-container"})]})})]}),(0,a.jsxs)(Oa,{ref:this.wallTools,onCloseRightBox:this.onWallToolsCloseClick,mainComponentThis:this,children:[(0,a.jsx)("h3",{children:"Modify the wall"}),(0,a.jsx)(kn,{disabled:!0,ref:this.wallWidthNumberSliderInput,sliderInputRef:this.wallWidth,valueLabelText:(0,a.jsxs)(o.Fragment,{children:["Width [",(0,a.jsx)("span",{children:`${this.wallThicknessMinValue}-${this.wallThicknessMaxValue}`}),"] :"," ",(0,a.jsx)("span",{ref:this.wallWidthValue})," ",(0,a.jsx)("span",{children:""+("metric"===this.measureSystemContext.userUnit?"cm":"in")})]}),sliderStep:this.wallWidthInputStep,minValue:this.wallThicknessMinValue,maxValue:this.wallThicknessMaxValue}),(0,a.jsx)(xo,{label:(0,a.jsxs)(o.Fragment,{children:["Length: ",(0,a.jsx)("span",{ref:this.wallLengthValue})," ",(0,a.jsx)("span",{children:""+("metric"===this.measureSystemContext.userUnit?"m":"ft")})]}),children:(0,a.jsx)(Bo,{disabled:!0,ref:this.wallLength,inputStep:this.wallLengthInputStep,inputMin:this.wallLengthInputStep,inputMax:1/0,checkInputValueChangeBeforeCall:!0})}),(0,a.jsx)(jr,{ref:this.wallMaterialRef,mainComponentThis:this}),(0,a.jsx)(Sr,{ref:this.wallAlwaysHideRef,mainComponentThis:this}),(0,a.jsx)(Dr,{ref:this.wallCustomHeightRef,mainComponentThis:this}),(0,a.jsx)(ao,{mainComponentThis:this})]}),(0,a.jsxs)(Oa,{ref:this.wallItemToolsRef,onCloseRightBox:this.onWallItemToolsCloseClick,mainComponentThis:this,children:[(0,a.jsx)("h3",{ref:this.wallItemToolsTitle}),(0,a.jsx)("div",{ref:this.doorHinge,children:(0,a.jsx)("div",{className:"button-centered-container form-group",children:(0,a.jsx)(go,{disabled:!0,type:"dull",onClick:this.onChangeDoorHingeClick,children:"REVERSE SWING"})})}),(0,a.jsx)("div",{ref:this.windowRotationOptionsContainerRef}),(0,a.jsx)("div",{ref:this.wallItemDimensionsRef}),(0,a.jsx)("div",{ref:this.wallItemMirroredRef}),(0,a.jsx)("div",{ref:this.wallItemPositionsRef}),(0,a.jsx)("div",{ref:this.wallCameraCoverageOptionsContainerRef}),(0,a.jsx)("div",{ref:this.wallItemMaterialsRef}),(0,a.jsx)(ea,{ref:this.wallItemHideWithWallRef,mainComponentThis:this}),(0,a.jsx)("div",{ref:this.wallItemChangeTypeRef}),(0,a.jsx)("div",{ref:this.wallItemTypesSelectionBoxRef}),(0,a.jsx)("div",{ref:this.wallSurfaceAreaOptionsContainerRef}),(0,a.jsx)(ao,{mainComponentThis:this}),(0,a.jsx)("div",{ref:this.bindingWallItemContainerRef})]}),(0,a.jsxs)(Oa,{ref:this.freeItemToolsRef,onCloseRightBox:()=>this.onFreeItemToolsCloseClick(this.freeItemToolsRef),mainComponentThis:this,children:[(0,a.jsx)("h3",{ref:this.freeItemTitleRef}),(0,a.jsx)("div",{ref:this.freeItemDimensionsRef}),(0,a.jsx)("div",{ref:this.freeItemMirroredRef}),(0,a.jsx)("div",{ref:this.freeItemPositionsRef}),(0,a.jsx)("div",{ref:this.freeItemRotationsRef}),(0,a.jsx)("div",{ref:this.freeCameraCoverageOptionsContainerRef}),(0,a.jsx)("div",{ref:this.freeItemMaterialsRef}),(0,a.jsx)("div",{ref:this.freeItemChangeTypeRef}),(0,a.jsx)("div",{ref:this.freeItemTypesSelectionBoxRef}),(0,a.jsx)("div",{ref:this.freeItemTextToolsRef}),(0,a.jsx)("div",{ref:this.freeSurfaceAreaOptionsContainerRef}),(0,a.jsx)(ao,{mainComponentThis:this}),(0,a.jsx)("div",{ref:this.bindingFreeItemContainerRef})]}),(0,a.jsxs)(Oa,{ref:this.sensorOtherToolsRef,onCloseRightBox:()=>this.onFreeItemToolsCloseClick(this.sensorOtherToolsRef),mainComponentThis:this,children:[(0,a.jsx)("h3",{ref:this.sensorOtherToolsTitleRef}),(0,a.jsx)("div",{ref:this.sensorOtherToolsContainerRef})]}),(0,a.jsxs)(Oa,{ref:this.presenceAreaToolsRef,containerClasses:"presence-area-right-box-container",onCloseRightBox:()=>this.onFreeItemToolsCloseClick(this.presenceAreaToolsRef),mainComponentThis:this,children:[(0,a.jsx)("h3",{ref:this.presenceAreaToolsTitle}),(0,a.jsx)("div",{ref:this.presenceAreaOptionsContainerRef,className:"presence-area-options-container"}),(0,a.jsx)("div",{ref:this.presenceAreaToolsContainerRef})]}),(0,a.jsx)(_r,{ref:this.uploadFloorplanImageToolsRef,mainComponentThis:this,floorplanImageTools:this.floorplanImageTools,uploadImageFloorplanSettingsIconRef:this.uploadImageFloorplanSettingsIconRef,uploadFloorplanImageStatusContainerRef:this.uploadFloorplanImageStatusContainerRef,uploadImageFloorplanHideRef:this.uploadImageFloorplanHideRef,uploadImageFloorplanShowRef:this.uploadImageFloorplanShowRef,boxFloorplanImage:this.boxFloorplanImage,uploadFloorplanImageErrorMessageRef:this.uploadFloorplanImageErrorMessageRef,uploadFloorplanImageErrorModal:this.uploadFloorplanImageErrorModal,floorplanImagePattern:this.floorplanImagePattern,floorplanImage:this.floorplanImage}),(0,a.jsxs)(Oa,{ref:this.roomTools,containerClasses:"flex",onCloseRightBox:this.onRoomToolsCloseClick,mainComponentThis:this,children:[(0,a.jsx)(xo,{label:(0,a.jsxs)(o.Fragment,{children:["Estimated surface: ",(0,a.jsx)("span",{className:"size"})]})}),(0,a.jsx)(xo,{label:`If you have the actual area, you can write it(${"metric"===this.measureSystemContext.userUnit?"m\xb2":"ft\xb2"})`,children:(0,a.jsx)(Bo,{disabled:!0,ref:this.roomSurface,placeholder:"Real surface",inputStep:this.roomSurfaceInputStep,inputMin:this.roomSurfaceInputStep,inputMax:1/0,checkInputValueChangeBeforeCall:!0})}),(0,a.jsx)(Qo,{disabled:!0,label:"Type room name",inputRef:this.roomName,placeholder:"e.g. Bedroom"}),(0,a.jsx)(xo,{label:"or select it:",children:(0,a.jsx)(Xn,{disabled:!0,ref:this.roomNameSelectRef,dropdownMenuRef:this.roomNameDropdownMenu,listItems:U})}),(0,a.jsx)(Aa,{ref:this.roomFloorParametersRef,mainComponentThis:this}),(0,a.jsx)(ao,{mainComponentThis:this})]}),(0,a.jsxs)(Oa,{ref:this.floorParameters,containerClasses:"floor-parameters-container",onCloseRightBox:this.onFloorParametersCloseClick,mainComponentThis:this,children:[(0,a.jsx)(Ys,{ref:this.floorNoteInputRef,mainComponentThis:this}),(0,a.jsx)(Ks,{ref:this.floorNumberInputRef,mainComponentThis:this}),(0,a.jsx)(ao,{mainComponentThis:this}),(0,a.jsx)(qs,{ref:this.floorDrawingHelperOptionsRef,mainComponentThis:this})]}),(0,a.jsx)("div",{ref:this.panelInfoExplanationBox,className:"panel-info-explanation-box"}),(0,a.jsx)("div",{ref:this.panelFloorNoteExplanationBox,className:"panel-info-explanation-box",style:{width:"auto",maxWidth:200}}),(0,a.jsx)(ba,{ref:this.leftPanel2DExtendedChoicePartRef,mainComponentThis:this}),(0,a.jsxs)(ga,{panelRef:this.panel,panelControlRef:this.panelControl,onPanelControlClick:this.onPanelControlClick,children:[(0,a.jsx)("div",{className:"button-centered-container panel-action-button",children:(0,a.jsx)(go,{type:"blue",className:"show3d-button panel-transition",onClick:this.onShow3DClick,children:"View 3D"})}),(0,a.jsx)(Js,{ref:this.floorplanFloorsPanelBoxRef,containerRef:this.floorplanFloorsPanelBoxContainerRef,mainComponentThis:this}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Export as PNG",onClick:()=>{0===this.WALLS.length?at(this.selectedFloorNoWallsErrorModal.current,this.modalTimeout):this.downloadSvg(!0,!0,!1,!1).catch((e=>console.log("Export png error",e)))},children:[(0,a.jsx)($n.A,{}),(0,a.jsx)("p",{children:"EXPORT PNG"})]})}),(0,a.jsx)("br",{}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Edit floorplan GPS location",onClick:this.onFloorplanGpsCoordsClick(Ii),children:[(0,a.jsx)(ds,{}),(0,a.jsx)("p",{children:"GPS COORDS"})]})}),(0,a.jsx)("li",{children:(0,a.jsx)(rr,{ref:this.showMapLayer2DInputRef,containerClasses:"panel2D",onChangeCallback:this.onShowOnMapLayer2DClick(Ii)})}),(0,a.jsx)("br",{}),(0,a.jsx)(xo,{label:`Floor height(${"metric"===this.measureSystemContext.userUnit?"cm":"in"})`,containerStyle:{marginBottom:0},children:(0,a.jsx)(Bo,{disabled:!0,ref:this.floorHeightInputRef,title:"Set floor height",inputStep:Math.pow(10,-this.wallHeightDecimalPrecision),inputMin:1,inputMax:this.wallHeightMaxValue,onInputValueChanged:this.onFloorHeightInputChange})}),(0,a.jsx)("br",{}),(0,a.jsxs)("li",{ref:this.uploadFloorplanPanelButtonContainer,className:"upload-floorplan-panel-button-container",children:[(0,a.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Upload floorplan image",ref:this.uploadFloorplanImageMode,onClick:this.onUploadFloorplanImageClick,style:{position:"relative"},children:[(0,a.jsx)(ss,{}),(0,a.jsx)(is.A,{className:"settings-icon hidden",ref:this.uploadImageFloorplanSettingsIconRef}),(0,a.jsx)("p",{children:"IMAGE"})]}),(0,a.jsxs)("button",{ref:this.uploadFloorplanImageStatusContainerRef,onClick:this.onUploadedFloorplanImageStatusChangeClick,className:"btn btn-default show-hide-uploaded-floorplan-image-container hidden",children:[(0,a.jsx)(es.A,{ref:this.uploadImageFloorplanShowRef,style:{display:"none"}}),(0,a.jsx)(ts.A,{ref:this.uploadImageFloorplanHideRef,style:{display:"none"}})]})]}),(0,a.jsx)("br",{}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{title:"Select mode",className:"btn btn-success fully panel-icon-button-container",ref:this.selectMode,onClick:this.onSelectModeClick,children:[(0,a.jsx)(Ps,{}),(0,a.jsx)("p",{children:"SELECT"})]})}),(0,a.jsx)("br",{}),(0,a.jsx)("li",{children:(0,a.jsxs)("button",{title:"Select room",className:"btn btn-default fully panel-icon-button-container",ref:this.roomMode,onClick:this.onRoomModeClick,children:[(0,a.jsx)(os.A,{style:{fill:"none"}}),(0,a.jsx)("p",{children:"ROOM"})]})}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("li",{children:(0,a.jsxs)("button",{title:"Show layers",className:"btn btn-default fully panel-icon-button-container",style:{position:"relative"},ref:this.layerMode,onClick:this.onLayerModeClick,children:[(0,a.jsx)(Jn.A,{style:{fill:"none"}}),(0,a.jsx)("p",{children:"LAYERS"}),(0,a.jsx)(Qn.A,{ref:this.layersListArrowRef,className:"layers-list-arrow"})]})}),(0,a.jsx)(pa,{ref:this.layersListOptionsRef,layersListRef:this.layerList,showHideTransitionDurationMs:this.othersTimeout,mainComponentThis:this})]}),"HomeAssistant"===this.props.addOnIntegrationType&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),(0,a.jsx)($o,{label:"Add-on URL",value:this.props.customProps.isContainerApp?`${window.location.protocol}//${window.location.hostname}:${window.location.port}`:`${window.location.pathname}${window.location.search}`,containerStyle:{marginBottom:"1rem"}})]})]}),(0,a.jsx)(No,{modalRef:this.selectedFloorNoWallsErrorModal,modalBody:(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"indoor-paragraph-centered",children:"Floor must contain at least one wall in order to use this feature"})}),(0,a.jsx)("div",{className:"indoor-modal-row center",children:(0,a.jsx)(go,{type:"primary",onClick:()=>rt(this.selectedFloorNoWallsErrorModal.current,this.modalTimeout),children:"OK"})})]}),modalFooter:null}),(0,a.jsx)(No,{modalRef:this.showFloorplanNoWallsErrorModal,modalBody:(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"indoor-paragraph-centered",children:"Floorplan must contain at least one wall in order to use this feature"})}),(0,a.jsx)("div",{className:"indoor-modal-row center",children:(0,a.jsx)(go,{type:"primary",onClick:()=>rt(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout),children:"OK"})})]}),modalFooter:null}),(0,a.jsx)("div",{ref:this.boxInfo,className:"boxInfo box-info panel-transition"}),(0,a.jsx)("div",{ref:this.boxPlanName,className:"box-plan-name panel-transition"}),(0,a.jsx)(Wr,{mainComponentThis:this})]})})})]})}}const QC=JC;var ex=i(1816),tx=i(4317),ix=i(9944);class ox extends o.Component{constructor(){super(),this.authenticateToHomeAssistant=async()=>{try{return await(0,ex.xI)({hassUrl:this.homeAssistantURL,redirectUrl:void 0,loadTokens:async()=>window._env_.token?(0,ex.W9)(this.homeAssistantURL,window._env_.token).data:void 0,saveTokens:e=>{0}})}catch(e){return console.log("Auth error",e),console.log(e===tx.Fx),console.log(e===tx.F$),console.log(e===tx.tx),null}},this.connectToHomeAssistant=async()=>{if(console.log("Home assistant forwarded variables",window._env_),window._env_)if(this.floorplanID=window._env_.floorplanID,this.licenseKey=window._env_.licenseKey,Object.hasOwn(window._env_,"homeAssistantURL")?(this.homeAssistantURL=window._env_.homeAssistantURL,this.isContainerApp=!0):(this.homeAssistantURL=window.location.origin,this.isContainerApp=!1),this.floorplanID&&this.licenseKey&&this.homeAssistantURL){let t,i;if(console.log("Auth token storage",t),t=await this.authenticateToHomeAssistant(),!t)return void this.setState({loading:!1,error:"Home Assistant authentication failed"});console.log("Auth token parsed",t),console.log(JSON.stringify(t));try{i=await(0,ix.tq)({auth:t})}catch(e){console.log("Create connection error",e),console.log(e===tx.bM),console.log(e===tx.Fx);let t=(0,a.jsx)("span",{children:"Connection to Home Assistant failed."});return e===tx.Fx?(t=(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("span",{children:"Connection authentication failed."})," ",(0,a.jsx)("br",{}),(0,a.jsx)("span",{children:"Check if access token from add-on configuration has expired."})]}),localStorage.removeItem("glamos_token")):e===tx.bM&&(t=(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("span",{children:"Connection to your Home Assistant instance failed."}),(0,a.jsx)("br",{})," ",(0,a.jsx)("span",{children:"Please try again."})]})),void this.setState({loading:!1,error:t})}this.homeAssistantUserConfig=await(0,dw.zj)(i),console.log("HA config",this.homeAssistantUserConfig),this.homeAssistantConnection=i,this.customProps={connection:this.homeAssistantConnection,userConfig:this.homeAssistantUserConfig,isContainerApp:this.isContainerApp},this.userUnit="km"===this.homeAssistantUserConfig.unit_system.length?"metric":"imperial",this.setState({loading:!1})}else{let e;e=this.floorplanID?this.licenseKey?"Home Assistant URL":"License key":"Floorplan ID",e+=" parameter is required.",this.setState({loading:!1,error:(0,a.jsx)(o.Fragment,{children:(0,a.jsx)("span",{style:{display:"inline-block"},children:e})})})}else this.setState({loading:!1,error:(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)("span",{style:{display:"inline-block"},children:"Can't read configuration variables."}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{style:{marginTop:"1em",display:"inline-block"},children:"Please restart add-on."})]})})},this.authenticateWebIntegrator=e=>{if(console.log("Sender domain",e.origin),console.log("Message event"),console.log(e),console.log(e.data),"handshake_msg"===e.data.type){clearTimeout(this.webIntegrationTimeout),!0?(this.customProps.integratorDomain=e.origin,this.setState({loading:!1})):this.setState({loading:!1,error:"Invalid credentials"})}},this.connectToWebIntegrator=()=>{const e=window.location.search.substring(1).split("&");for(let t=0;t<e.length;t++){const[i,o]=e[t].split("=");"floorplanID"===i?this.floorplanID=o:"licenseKey"===i?this.licenseKey=o:"clientID"===i&&(this.customProps.integratorClientID=o)}this.floorplanID&&this.licenseKey&&this.customProps.integratorClientID?(console.log("FloorplanID",this.floorplanID,"License key",this.licenseKey),window.addEventListener("message",this.authenticateWebIntegrator,{once:!0}),window.parent.postMessage({type:"iframeReady",message:"Iframe is ready to receive data"},"*"),this.webIntegrationTimeout=setTimeout((()=>{this.setState({loading:!1,error:"Connection timed out. Please ensure the host application is running and try again."})}),this.webIntegrationWaitForHandshakeMsgTimeMs)):this.setState({loading:!1,error:"Floorplan ID and license must be specified"})},this.state={loading:!0,error:null},this.homeAssistantConnection=null,this.homeAssistantUserConfig={},this.webIntegrationTimeout=null,this.webIntegrationWaitForHandshakeMsgTimeMs=1e4,this.floorplanID="",this.licenseKey="",this.homeAssistantURL="",this.isContainerApp=!1,this.userUnit="metric",this.customProps={},this.authenticateToHomeAssistant=this.authenticateToHomeAssistant.bind(this),this.connectToHomeAssistant=this.connectToHomeAssistant.bind(this),this.authenticateWebIntegrator=this.authenticateWebIntegrator.bind(this),this.connectToWebIntegrator=this.connectToWebIntegrator.bind(this)}componentDidMount(){"HomeAssistant"===this.props.addOnIntegrationType?this.connectToHomeAssistant():"WebIntegration"===this.props.addOnIntegrationType&&this.connectToWebIntegrator()}render(){const{loading:e,error:t}=this.state;return e?(0,a.jsx)(Zn,{screenCenter:!0}):t?(0,a.jsx)(Nn,{message:t}):(0,a.jsx)(QC,{customProps:this.customProps,userUnit:this.userUnit,floorplanID:this.floorplanID,licenseKey:this.licenseKey,addOnIntegrationType:this.props.addOnIntegrationType,addOnVersion:this.props.addOnVersion})}}const nx=ox;class sx extends o.Component{constructor(){super(),this.addOnIntegrationType="HomeAssistant",this.addOnIntegrationType="HomeAssistant",this.addOnVersion="0.0.0","HomeAssistant"===this.addOnIntegrationType&&(this.addOnVersion="1.1.1")}render(){return(0,a.jsx)(lo,{addOnVersion:this.addOnVersion,children:(0,a.jsx)(gn,{CustomHeader:null,children:(0,a.jsxs)("div",{className:"page-container",children:[(0,a.jsx)("div",{className:"page-content-container",children:(0,a.jsx)(nx,{addOnVersion:this.addOnVersion,addOnIntegrationType:this.addOnIntegrationType})}),(0,a.jsx)("div",{className:"footer",children:(0,a.jsxs)("div",{children:["Powered by",(0,a.jsx)("img",{srcSet:`\n                    ${Ze} 1x,\n                    ${$e} 2x\n                `,alt:""})]})})]})})})}}const ax=sx;console.log=function(){},console.warn=function(){},console.error=function(){},n.render((0,a.jsx)(ax,{}),document.getElementById("root"))}},e=>{e.O(0,[163],(()=>{return t=9250,e(e.s=t);var t}));e.O()}]);