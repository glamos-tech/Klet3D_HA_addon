/*! For license information please see main.3257e5b6.js.LICENSE.txt */
"use strict";(this.webpackChunkintegration=this.webpackChunkintegration||[]).push([[179],{6806:(e,t,i)=>{var o=i(537),s=i(336);const n=document.URL+"static/media/logo-text@2x.23f596ec.png",a=document.URL+"static/media/logo-text.23f596ec.png",r={default:n,retina:a};var l=i(683);class h extends o.Component{render(){return(0,l.jsxs)("header",{className:"layout__header",children:[this.props.title&&(0,l.jsx)("h1",{className:"layout__title",children:this.props.title}),this.props.controls&&(0,l.jsx)("div",{className:"layout__controls",children:this.props.controls})]})}}const c=h;var d=i(6226),p=i.n(d);const m=document.URL+"static/media/http-error.cf84c924.png";var u=i(1317);const g=p().default.create({headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}}),f=(e,t,i)=>{let o,s={headers:{}};return t?(o="https://app.klet3d.com/api",o+="/glamos",o+=e):o=e,i&&(s.headers["Cache-Control"]="no-store"),{headers:s,apiURI:encodeURI(o)}};function b(e){u.log("HTTP error"),u.log(e),u.log(this.mounted);const t=x(this.mounted,w(e));this.props.setResponseError?this.props.setResponseError({responseError:t}):this.setState({responseError:t}),this.loadingComponentContainer&&this.loadingComponentContainer.current&&s.unmountComponentAtNode(this.loadingComponentContainer.current),this.props.loadingComponentContainer&&s.unmountComponentAtNode(this.props.loadingComponentContainer),this.props.mainComponentThis&&this.props.mainComponentThis.loadingComponentContainer&&this.props.mainComponentThis.loadingComponentContainer.current&&s.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current)}const w=e=>String(e).includes("403")?"403":String(e).includes("401")?"401":String(e).includes("400")?"400":String(e).includes("404")?"404":String(e).includes("500")?"500":String(e).includes("501")?"501":String(e).includes("502")?"502":String(e).includes("Error: Network Error")?"Network Error":e,C={get:function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=f(e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0);return g.get(o.apiURI,{...i,...o.headers}).then((e=>{t(e.data)})).catch(b.bind(this))},post:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=f(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return g.post(s.apiURI,t,{...o,...s.headers}).then((e=>{i(e)})).catch(b.bind(this))},put:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=f(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return g.put(o.apiURI,t,{...o,...s.headers}).then((e=>{i(e)})).catch(b.bind(this))},patch:function(e,t,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=f(e,!(arguments.length>3&&void 0!==arguments[3])||arguments[3],arguments.length>4?arguments[4]:void 0);return g.patch(s.apiURI,t,{...o,...s.headers}).then((e=>{i(e)})).catch(b.bind(this))},delete:function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=f(e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0);return g.delete(o.apiURI,{...i,...o.headers}).then((e=>{t(e)})).catch(b.bind(this))}},x=(e,t)=>t&&e&&("403"===t||"401"===t)?(u.log("Invalid token"),t):!(!t||!e||"400"!==t&&"404"!==t&&"500"!==t&&"501"!==t&&"502"!==t&&"Network Error"!==t)&&t,y=e=>!(!e||"Network Error"!==e&&"400"!==e&&"404"!==e&&"500"!==e&&"501"!==e&&"502"!==e),S=e=>"no_servers"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Please create server and then add gateways (hotspots) to that server here."}),(0,l.jsx)("p",{children:"Add gateways for area you want to test/track"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{children:"You will find your API key for integration of your devices in account."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["For support contact: ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Find instructions at"," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_gateways"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Please add gateways (hotspots) to your server in gateways."}),(0,l.jsx)("p",{children:"Add gateways for area you want to test/track"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{children:"You will find your API key for integration of your devices in account."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["For support contact: ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Find instructions at"," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_devices"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Please first add your device here"}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{children:"You will find your API key for integration of your devices inaccount."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["For support contact: ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Find instructions at"," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"no_online_devices"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Looks like you didn't activate any device. In order to see device data you must activate licence for it."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Please go to devices page and activate licence."," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/blog/new-chapter-glamos/",rel:"noreferrer",children:"More details"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["For support contact: ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["Find instructions at"," ",(0,l.jsx)("a",{target:"_blank",href:"https://glamos.eu/manual",rel:"noreferrer",children:"https://glamos.eu/manual"})]})]}):"Network Error"===e?(0,l.jsxs)("div",{className:"error-container",children:[(0,l.jsx)("p",{children:"Error getting data (network error)"}),(0,l.jsx)("p",{children:"Check your internet connnection and try again."}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsxs)("p",{children:["If that doesn't work, please contact support at ",(0,l.jsx)("a",{href:"mailto: slaven@glamos.eu",children:"slaven@glamos.eu"})]})]}):"400"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 400 Bad request"})})]}):"404"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 404 Not Found"})})]}):"500"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 500 Internal Server Error"})})]}):"501"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 501 Not Implemented"})})]}):"502"===e?(0,l.jsxs)("div",{className:"http-error error-container",children:[(0,l.jsx)("img",{alt:"HTTP error",src:m}),(0,l.jsx)("p",{children:"Ooops, looks like an error happened."}),(0,l.jsx)("p",{children:(0,l.jsx)("b",{children:"HTTP 502 Bad Gateway"})})]}):null,_="eagrar_storage";let D={};D={...(()=>{const e=localStorage.getItem(_);return e?JSON.parse(e):{}})()};var v=i(1614);const T=(e,t)=>{const i=Number(Math.round(e+"e"+t)+"e-"+t);return isNaN(i)?0:i},j=(e,t,i)=>{let o,s;return()=>{let n=+new Date;o&&n<o+i?(clearTimeout(s),s=setTimeout((function(){o=n,t(e)}),i)):(o=n,t(e))}},O=e=>(()=>{let e,t=0;for(e in window.localStorage)t+=2*((window.localStorage[e].length||0)+(e.length||0));return t})()+(e=>{let t=new ArrayBuffer(2*e.length),i=new Uint16Array(t);for(let o=0,s=e.length;o<s;o++)i[o]=e.charCodeAt(o);return i})(JSON.stringify(e)).byteLength<5138022.4,I=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,P=e=>!e&&0!==e&&!1!==e,k=e=>!e&&0!==e,F=e=>!e&&0!==e,M=(e,t,i)=>(0,v.ZP)(e,t).to(i),A=(e,t,i)=>e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height,R=e=>e*(Math.PI/180),L=e=>e*(180/Math.PI),B=e=>{e=e.replace("#","");const t=parseInt(e.substring(0,2),16)/255,i=parseInt(e.substring(2,4),16)/255,o=parseInt(e.substring(4,6),16)/255,s=Math.max(t,i,o),n=s-Math.min(t,i,o);let a=0;return 0===n?a=0:s===t?a=(i-o)/n%6:s===i?a=(o-t)/n+2:s===o&&(a=(t-i)/n+4),a=Math.round(60*a),a<0&&(a+=360),a},W=(e,t,i)=>{e%=360,t=Math.max(0,Math.min(1,t));let o=(i=Math.max(0,Math.min(1,i)))*t,s=o*(1-Math.abs(e/60%2-1)),n=i-o,a=0,r=0,l=0;e>=0&&e<60?(a=o,r=s,l=0):e>=60&&e<120?(a=s,r=o,l=0):e>=120&&e<180?(a=0,r=o,l=s):e>=180&&e<240?(a=0,r=s,l=o):e>=240&&e<300?(a=s,r=0,l=o):e>=300&&e<360&&(a=o,r=0,l=s),a=Math.round(255*(a+n)),r=Math.round(255*(r+n)),l=Math.round(255*(l+n));const h=e=>e.toString(16).padStart(2,"0");return"#".concat(h(a)).concat(h(r)).concat(h(l)).toUpperCase()},V=(e,t)=>{let i=((t%=360)-(e%=360))%360;i<0&&(i+=360);let o=(e-t)%360;return o<0&&(o+=360),i>o?i:-o},N=(e,t,i)=>{let o=(e%=360)+i*V(e,t%=360);return o<0&&(o+=360),o%360},E=e=>e.getDate().toString().padStart(2,"0")+"."+(e.getMonth()+1).toString().padStart(2,"0")+"."+e.getFullYear()+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0"),H=e=>{const t={timeZone:e,hour12:!1,weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},i=Intl.DateTimeFormat("en-US",t).formatToParts(new Date),o=i.find((e=>"year"===e.type)).value,s=new Date("".concat(i.find((e=>"month"===e.type)).value," 1, 2000")).getMonth(),n=i.find((e=>"day"===e.type)).value,a=i.find((e=>"hour"===e.type)).value,r=i.find((e=>"minute"===e.type)).value,l=i.find((e=>"second"===e.type)).value;return new Date(o,s,n,a,r,l)};var z=i(1317);function G(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;C.get.call(this,"/location",(t=>{z.log("Ipapify response:"),z.log(t),this.mounted&&t?t.latitude&&t.longitude?(z.log("Postavi lat long u prvom"),this.setState({[e]:[t.longitude,t.latitude]},(()=>!!i&&i()))):t.geoplugin_latitude&&t.geoplugin_longitude?(z.log("postavi lat long u drugom"),this.setState({[e]:[t.geoplugin_longitude,t.geoplugin_latitude]},(()=>!!i&&i()))):i&&i():i&&i()}),!0,!0)}var U=i(1317);const q={isEmpty:function(){return!String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ").replace(/ /g,"").length&&"Entry can not be empty."},isNumber:function(){return!!isNaN(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Entry can be just a number."},isEmail:function(){return!/\S+@\S+\.\S+/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Invalid e-mail format."},isGpsCoordinate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return q.isEmpty(e)?"Entry can not be empty.":q.isNumber(e)?"Entry can be just a number.":"gps_lat"===t?!(Number(e)>=-90&&Number(e)<=90)&&"Latitude out of bounds([-90, 90]).":!(Number(e)>=-180&&Number(e)<=180)&&"Longitude out of bounds([-180, 180])."},isValidGpsCoordinates:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";U.log("Ptimljen koordinate: "+e);const t=e.replace(/\s+/g,"").split(",");return t&&2===t.length?q.isGpsCoordinate(t[0],"gps_lat")||q.isGpsCoordinate(t[1],"gps_long"):"Invalid GPS coordinates. Please follow specified format."},deviceEUI:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length>0&&(16!==e.length&&"DevEUI must be 16 characters long")},isLicenseNumber:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!1;if("string"===typeof e)if(19!==e.length)t=!0;else{const i=e.split("-");if(U.log("License parts"),U.log(i),4!==i.length)t=!0;else for(let e=0;e<i.length;e++)if(4!==i[e].length){t=!0;break}}else t=!0;return!!t&&"Invalid license format"},isHexColor:function(){return!/^#?([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&"Invalid hex color format"}},K=(e,t)=>{for(let i=0;i<t.length;i++)if(e[i].value!==t[i].value)return!0;return!1},Y=(e,t)=>JSON.stringify(e)!==JSON.stringify(t);var X=i(6773),Z=i(3044),J=i.n(Z);const Q=[...[{field:"gps_lat",label:"Floorplan latitude",placeholder:"e.g. 43.5079",validate:e=>q.isEmpty(e)||q.isGpsCoordinate(e,"gps_lat"),isGpsCoord:!0},{field:"gps_long",label:"Floorplan longitude",placeholder:"e.g. 16.43699",validate:e=>q.isEmpty(e)||q.isGpsCoordinate(e,"gps_long"),isGpsCoord:!0}],{field:"bearing_angle",label:"Floorplan bearing(\xb0)",placeholder:"e.g. 45\xb0",validate:e=>q.isEmpty(e)||q.isNumber(e),defaultValue:0}],$={options:[{name:"Default",value:"default",infoText:(0,l.jsx)("span",{children:"Set the room floor to its default appearance."})},{name:"Pattern",value:"pattern",infoText:(0,l.jsx)("span",{children:"Use a texture pattern and scale it to fill the room floor."})},{name:"Color",value:"color",infoText:(0,l.jsx)("span",{children:"Fill the room floor with a chosen color."})},{name:"None",value:"none",infoText:(0,l.jsx)("span",{children:"Hide the room floor in 3D view."})}]},ee=[{name:"Light",value:"light-v8"},{name:"Satellite",value:"satellite-v9"},{name:"Outdoors",value:"outdoors-v9"},{name:"3D Terrain",value:"TERRAIN"},{name:"3D Buildings",value:"BUILDINGS"},{name:"Dark",value:"dark-v10"}];var te=i(8569);const ie=["sixDoorFrenchStyle","accordionFoldDoors","glassDoorsOpened","patioDoorOpened","japanesedoor","elevator","sliderPocketDoor"],oe={craftsmanDoorClosed:["HandleBack_7","Door_1","DoorFrame_2","HandleFront_6"],frontDoor:["sweethome3d_opening_on_hinge_1_doorOutside","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_door"],door:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle"],double_door:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass"],double_plain_door_with_little_part:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle"],"exterior-door-05":["sweethome3d_opening_on_hinge_1_Exterior_door_5_PAINT_gloss_black","sweethome3d_opening_on_hinge_1_Exterior_door_5_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_5_METAL_aluminum","sweethome3d_window_pane_on_hinge_1_Exterior_door_5_GLASS"],"exterior-door-07":["sweethome3d_window_pane_on_hinge_1_front_door_GLASS","sweethome3d_opening_on_hinge_1_front_door_gloss_white","sweethome3d_opening_on_hinge_1_front_door_METAL_aluminum"],frontDoor2:["sweethome3d_opening_on_hinge_1_Leaf_Side_B_front_6","sweethome3d_opening_on_hinge_1_Handles_Tuergriff_wall_1_18_wall"],frontDoorDark:["Extruded_Object_3","Extruded_Object_1_1","Extruded_Object_1","PolyMesh_7-mirror","Cylinder_2","sweethome3d_window_pane","Extruded_Object_3_1","Cylinder_2_1","PolyMesh_7"],glassDoor2:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_tieForWindow","sweethome3d_opening_on_hinge_1_handle","frame_Cube.001"],glass_door:["sweethome3d_hinge_1","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_door"],glass_door_framless:["sweethome3d_opening_on_hinge_1_door_1","sweethome3d_opening_on_hinge_1_clamps_1","sweethome3d_opening_on_hinge_1_handle_1"],puerta:["sweethome3d_opening_on_hinge_1_maneta_puerta","sweethome3d_opening_on_hinge_1_door"],revdoor:["sweethome3d_opening_on_hinge_1_doorglass","sweethome3d_opening_on_hinge_1_doorbar","sweethome3d_opening_on_hinge_1_door2","top","roundwlgls","wl_rnd"],"screen-door":["screen_door_01_screen_door_01_PAINT_gloss_white","sweethome3d_window_pane_screen_door_01_SYNTH_screen","screen_door_01_screen_door_01_PAINT_gloss_black"],double_door_2:["sweethome3d_opening_on_hinge_1_door","sweethome3d_opening_on_hinge_1_handle"],double_door_with_little_part:["sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_door"],door1:["revolvedSurface42_1_1","revolvedSurface41_2_2","revolvedSurface43_3_3","revolvedSurface44_4_4","pCube222_5_5","pCube223_6_6","extrudedSurface179_7_7","pCube224_8_8","pCube225_9_9","pCube226_10_10","pCube227_11_11","pCube228_12_12","extrudedSurface180_13_13","extrudedSurface181_14_14","extrudedSurface182_15_15","extrudedSurface183_16_16","extrudedSurface184_17_17","extrudedSurface185_18_18","extrudedSurface186_19_19","extrudedSurface189_20_20","extrudedSurface190_21_21","extrudedSurface191_22_22","extrudedSurface192_23_23","extrudedSurface193_24_24","extrudedSurface194_25_25","extrudedSurface195_26_26","extrudedSurface196_27_27","pPlane729_28_28","pPlane730_29_29","pPlane731_30_30","pPlane732_31_31","HingeTube1_36_36","HingePlate2_37_37","HingePlate3_38_38","HingeTube11_39_39","HingePlate21_40_40","HingePlate31_41_41","topnurbsCube1_44_44","rightnurbsCube11_54_54","revolvedSurface42_1_57","revolvedSurface41_2_58","revolvedSurface43_3_59","revolvedSurface44_4_60","pCube222_5_61","pCube223_6_62","extrudedSurface179_7_63","pCube224_8_64","pCube225_9_65","pCube226_10_66","pCube227_11_67","pCube228_12_68","extrudedSurface180_13_69","extrudedSurface181_14_70","extrudedSurface182_15_71","extrudedSurface183_16_72","extrudedSurface184_17_73","extrudedSurface185_18_74","extrudedSurface186_19_75","extrudedSurface189_20_76","extrudedSurface190_21_77","extrudedSurface191_22_78","extrudedSurface192_23_79","extrudedSurface193_24_80","extrudedSurface194_25_81","extrudedSurface195_26_82","extrudedSurface196_27_83","pPlane729_28_84","pPlane730_29_85","pPlane731_30_86","pPlane732_31_87","HingeTube1_36_92","HingePlate2_37_93","HingePlate3_38_94","HingeTube11_39_95","HingePlate21_40_96","HingePlate31_41_97","bottomnurbsCube1_45_101","topnurbsCube11_51_107","bottomnurbsCube11_52_108","leftnurbsCube11_53_109"],patioDoor:["knob_1","right","left","Cube_4","Cube_5_3","bottom","Cube_5","sweethome3d_window_pane","top","knob","Cube_5_1","Cube_5_2","Cube_5_4","Cube_4_1"],door_glass:["sweethome3d_opening_on_hinge_1_cap_surub","sweethome3d_opening_on_hinge_1_Clanta_L","sweethome3d_opening_on_hinge_1_Glass_0","sweethome3d_opening_on_hinge_1_cap_surub_6","sweethome3d_opening_on_hinge_1_Door_0","sweethome3d_opening_on_hinge_1_limba_2","sweethome3d_opening_on_hinge_1_miner","sweethome3d_opening_on_hinge_1_bare_orizontale_0","sweethome3d_opening_on_hinge_1_limba","sweethome3d_opening_on_hinge_1_screw","sweethome3d_opening_on_hinge_1_miner_1","sweethome3d_opening_on_hinge_1_locker_0","sweethome3d_opening_on_hinge_1_Rama_geam_0","sweethome3d_opening_on_hinge_1_Clanta_R","InnerCasing"],"exterior-door-01":["sweethome3d_opening_on_hinge_1_Lock_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_GLASS","sweethome3d_opening_on_hinge_1_Exterior_door_PAINT_gloss_red","Exterior_door_Exterior_door_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_METAL_aluminum","Exterior_doorframe_Exterior_doorframe_METAL_brass_polish"],"exterior-door-02":["sweethome3d_opening_on_hinge_1_Exterior_door_2_PAINT_gloss_white","sweethome3d_opening_on_hinge_1_Exterior_door_2_METAL_brass_polish","sweethome3d_opening_on_hinge_1_Exterior_door_2_METAL_aluminum","Door_frame_Door_frame_METAL_brass_polis"],"exterior-door-03":["sweethome3d_opening_on_hinge_1_Exterior_door_3_PAINT_gloss_white","sweethome3d_opening_on_hinge_1_Exterior_door_3_GLASS","sweethome3d_opening_on_hinge_1_Exterior_door_3_METAL_brass_polis","Door_frame_Door_frame_METAL_brass_polish"],patioGlassDoorUnit:["knob_1","Cube_5_3","knob","sweethome3d_window_pane","Cube_5_1","Cube_5_2","Cube_4_1","left","right","Cube_4","Cube_5","Cube_5_4","top","bottom"],patioDoorOpened:["Cube_4","bottom","sweethome3d_window_pane","Cube_5_1","Cube_5_2","Cube_4_1","left","right","Cube_5_3","Cube_5","knob","knob_1","Cube_5_4","top"],frenchWindow2:["sweethome3d_opening_on_hinge_1_Inside_Inner_Frame_top_74_104","sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_top_56_122","sweethome3d_opening_on_hinge_1_Window_Handle_back_83_95","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_97","sweethome3d_opening_on_hinge_1_Window_Pane_wall_1_1_1_25_153"],frenchWindow85x200:["sweethome3d_opening_on_hinge_1","sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"],window85x123:["sweethome3d_opening_on_hinge_1_handle","sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1"],window85x163:["sweethome3d_opening_on_hinge_1","sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"],smallWindow2:["sweethome3d_opening_on_hinge_1_Inside_Inner_Frame_top_77_125","sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_top_59_143","sweethome3d_opening_on_hinge_1_Window_Handle_back_86_116","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_96","sweethome3d_opening_on_hinge_1_Window_Pane_wall_1_1_1_28_174"],window_deep:["16_16.001","15_15","19_19","7_7","21_21","15_15.001","20_20","16_16","17_17","18_18"],simpleShutter:[],twoPartsShutter:[],"turn-window":["sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frameOut","sweethome3d_opening_on_hinge_1_frameIn"],window_shutter:["43_43","40_40","46_46","42_42","45_45","39_39","36_36","41_41","38_38","47_47","35_35","37_37","44_44"],"window-shutter":[],door_window_thick:["8_8","1_1","2_2"],emergencyGlassDoubleDoor:{part1:["Cube.009_chrome_Cube.009_chrome_frame","Cube.008_chrome_Cube.008_chrome_frame","Cube.003_Cube.004_chr_Cube.003_Cube.004_chr_frame","Cylinder.001_silver_s_Cylinder.001_silver_s_silver_spraypaint","sweethome3d_window_pa_sweethome3d_window_pa_Glass","Cube_Cube.001_chrome_Cube_Cube.001_chrome_frame"],part2:["Cube.004_Cube.005_chr_Cube.004_Cube.005_chr_frame","Cylinder_chrome_Cylinder_chrome_silver_spraypaint","sweethome3d_window_sweethome3d_window_Glass","Cube.002_Cube.006_chr_Cube.002_Cube.006_chr_frame","Cube.006_Cube_chrome_Cube.006_Cube_chrome_frame","Cube.007_Cube.003_chr_Cube.007_Cube.003_chr_frame"]},"garage-door2":{part1:["sweethome3d_opening_on_hinge_1_right-handle_Cube.004","sweethome3d_opening_on_hinge_1_large_hinges_Cube.009","sweethome3d_opening_on_hinge_1_right-door_Cube.008"],part2:["sweethome3d_opening_on_hinge_2_left-handle_Cube.003","sweethome3d_opening_on_hinge_2_large-hinges_Cube.007","sweethome3d_opening_on_hinge_2_left-door_Cube.001"]},glassDoorsOpened:{part1:["Cube_5_1","right","knob","Cube_5_4","Cube_4_1","top","knob_1","sweethome3d_window_pane_1","bottom","Cube_5_2","left","Cube_5_3","Cube_5","Cube_4_2"],part2:["Cube_4_5","Cube_5_5","top_1","right_1","Cube_4_4","sweethome3d_window_pane_3","Cube_5_8","Cube_5_6","knob_3","Cube_5_9","bottom_1","left_1","knob_2","Cube_5_7"]},doubleOutwardOpeningWindow:{part1:["sweethome3d_opening_on_hinge_2_handles","sweethome3d_opening_on_hinge_2_muntinOut","sweethome3d_opening_on_hinge_2_out","sweethome3d_opening_on_hinge_2_muntinIn","sweethome3d_opening_on_hinge_2_in","sweethome3d_window_pane_on_hinge_2"],part2:["sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1_handles","sweethome3d_opening_on_hinge_1_muntinIn","sweethome3d_opening_on_hinge_1_out","sweethome3d_opening_on_hinge_1_in","sweethome3d_opening_on_hinge_1_muntinOut"]},doubleWindow126x123:{part1:["sweethome3d_window_pane_on_hinge_2","sweethome3d_opening_on_hinge_2"],part2:["sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"]},doubleWindow126x163:{part1:["sweethome3d_opening_on_hinge_2","sweethome3d_window_pane_on_hinge_2"],part2:["sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"]},doubleWindow2:{part1:["sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_1_front_57_1","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_96","sweethome3d_opening_on_hinge_1_Window_Handle_top_95_110","sweethome3d_opening_on_hinge_1_Window_Pane_1_wall_1_6_6_33_172"],part2:["sweethome3d_opening_on_hinge_2_Inside_Inner_Frame_2_top_161_191","sweethome3d_opening_on_hinge_2_Outside_Inner_Frame_2_top_137_21","sweethome3d_opening_on_hinge_2_Window_Pane_2_wall_1_6_6_117_235"]},window_double_2x3_frame_sill:{part1:["8_8.006"],part2:["21_21_21_21.000","27_27.004"]},doubleFrenchWindow2:{part1:["sweethome3d_opening_on_hinge_1_Inside_Inner_Frame_1_top_77_122","sweethome3d_opening_on_hinge_1_Outside_Inner_Frame_1_top_59_140","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_32","sweethome3d_opening_on_hinge_1_Window_Handle_Button_Cylinder_10","sweethome3d_opening_on_hinge_1_Window_Pane_1_wall_1_6_6_33_166"],part2:["sweethome3d_opening_on_hinge_2_Inside_Inner_Frame_2_top_161_185","sweethome3d_opening_on_hinge_2_Outside_Inner_Frame_2_top_143_20","sweethome3d_opening_on_hinge_2_Window_Pane_2_wall_1_5_5_116_230"]},doubleFrenchWindow126x200:{part1:["sweethome3d_window_pane_on_hinge_2","sweethome3d_opening_on_hinge_2"],part2:["sweethome3d_window_pane_on_hinge_1","sweethome3d_opening_on_hinge_1","sweethome3d_opening_on_hinge_1_handle"]},window_2x4:{part1:["sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame"]},window_2x6:{part1:["sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_handle"]},window_4x5:{part1:["sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame"]},window_3x1:{part1:["sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_glass"],part2:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle"]},window_4x1:{part1:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass"]},window_2x1_medium_with_large_pane:{part1:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"],part2:["sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_handle"]},door_window_thick_double_2x4:{part1:["12_12","6_6"],part2:["10_10","11_11"]},door_window_thick_double:{part1:["12_12","6_6"],part2:["10_10","11_11"]},window_double_frame_sill:{part1:["8_8.008"],part2:["21_21.005","27_27.006"]},window_2x3_arched:{part1:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle"],part2:["sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_panes"]},window_2x3_regular:{part1:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_handle"],part2:["sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass"]},window_2x3:{part1:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_panes"],part2:["sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame"]},window_2x4_arched:{part1:["sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_panes"],part2:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_panes"]},window_4x3_arched:{part1:["sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_handle","sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_glass"],part2:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_panes","sweethome3d_opening_on_hinge_2_frame"]},window_4x3:{part1:["sweethome3d_opening_on_hinge_1_panes","sweethome3d_opening_on_hinge_1_frame","sweethome3d_opening_on_hinge_1_glass","sweethome3d_opening_on_hinge_1_handle"],part2:["sweethome3d_opening_on_hinge_2_glass","sweethome3d_opening_on_hinge_2_frame","sweethome3d_opening_on_hinge_2_panes"]},slidingDoors:["sweethome3d_opening_on_rail_1_door"],japanesedoor:["sweethome3d_opening_on_rail_2_frame","sweethome3d_opening_on_rail_2_plane"],elevator:["right-door_Cube.001"],"elevator-door":["right-door_Cube.001"],frenchDoors:["screentop","screenleft","screenright","screenbottom","Cube_1","Cube_2","Cube_2_1","Cube_1_1","sweethome3d_window_pane0","sweethome3d_window_pane2","handle2","sliderhandle","Cube_3_2","Cube_3_3","Cube_1_8","Cube_1_9","Cube_1_10","Cube_1_11"],sliderPocketDoor:["4_4_1_1","5_5_4_4","7_7_6_6"],"garage-door":["Cube"],garageDoor:["Cylinder_9","Cylinder_9_1","Cylinder_9_2","Cylinder_9_3"],garageDoor2:["PolyMesh_1","sweethome3d_window_pane"],sixDoorFrenchStyle:{lefttoright:{slideOnly:["sweethome3d_window_pane_3","Cube_5"],slideAndRotate:["sweethome3d_window_pane_2","Cube_1"],rotationAngleRad:R(56)},righttoleft:{slideOnly:["sweethome3d_window_pane","Cube_4"],slideAndRotate:["sweethome3d_window_pane_1","Cube"],rotationAngleRad:R(58)}},accordionFoldDoors:{movableDoors:{parts:["Cube_4_5","sweethome3d_window_pane2","Cube_2_4","Cube_5_1","Cube_5_2","Cube_3_2","Cube_3_3","Cube_2_3","Cube_5","Cube_4_6"],rotationPointPartName:["Cube_2_2","Cube_2_3"],rotationAngleRad:R(66)},cornerRotationDoors:{parts:["Cube_1_2","Cube_4_3","sweethome3d_window_pane1","Cube_4_1","Cube_2_2","Cube_4","Cube_4_4","Cube_3","Cube_2_5","Cube_3_1","Cube_4_2"],rotationPointPartName:["Cube_2"],rotationAngleRad:R(63)}},sliderWindow126x200:["sweethome3d_opening_on_rail_1","sweethome3d_opening_on_rail_1_handle","sweethome3d_window_pane_on_rail_1"],window_2x1_with_sliders:["sweethome3d_opening_on_rail_1_glass","sweethome3d_opening_on_rail_1_handle","sweethome3d_opening_on_rail_1_frame"],"window-08":["sweethome3d_opening_on_rail_1_window_gloss_white","sweethome3d_window_pane_on_rail_1_GLASS"],"window-01":["sweethome3d_opening_on_rail_1_window_bottom_gloss_white","sweethome3d_window_pane_on_rail_1_bottom_GLASS"],"window-08-02":["sweethome3d_opening_on_rail_1_window_bottom_gloss_white","sweethome3d_window_pane_on_rail_1_bottom_GLASS"],fancyWindow:["sweethome3d_window_pane_1","Cube_5_2","Cube_5_3","Cube_4_2","Cube_4_3"],traditionalShutter:["Cube_2","Cube_2_1","Cube_2_2","Cube_2_3","Cube_2_4","Cube_2_5","Cube_2_6","Cube_2_7","Cube_2_8","Cube_2_9","Cube_2_10","Cube_2_11","Cube_2_12","Cube_2_13","Cube_2_14","Cube_2_15","Cube_2_16","Cube_2_17","Cube_2_18","Cube_2_19","Cube_2_20","Cube_2_51","Cube_2_52","Cube_2_53","Cube_2_21","Cube_2_22","Cube_2_23","Cube_2_24","Cube_2_25","Cube_2_26","Cube_2_27","Cube_2_28","Cube_2_29","Cube_2_30","Cube_2_31","Cube_2_32","Cube_2_33","Cube_2_34","Cube_2_35","Cube_2_36","Cube_2_37","Cube_2_38","Cube_2_39","Cube_2_40","Cube_2_41","Cube_2_42","Cube_2_43","Cube_2_44","Cube_2_45","Cube_2_46","Cube_2_47","Cube_2_48","Cube_2_49","Cube_2_50"]},se=(e,t)=>{if(!fo(e.type))return null;if(!e.additionalParams.mirrored)return Xt[e.type];switch(e.type){case"double_door_2":case"double_door":return 1;case"double_plain_door_with_little_part":case"double_door_with_little_part":return.5;case"patioGlassDoorUnit":return 0;case"patioDoorOpened":return t?1.2:.1;default:return Xt[e.type]}},ne={window_2x1_medium_with_large_pane:.1},ae={frenchWindow85x200:{direction:"forward",factor:.2},window85x123:{direction:"forward",factor:.2},window85x163:{direction:"forward",factor:.2},doubleOutwardOpeningWindow:{direction:"backward",factor:.3},doubleWindow126x123:{direction:"forward",factor:.2},doubleWindow126x163:{direction:"forward",factor:.2},doubleFrenchWindow126x200:{direction:"forward",factor:.2},window_2x4:{direction:"forward",factor:.2},window_2x6:{direction:"forward",factor:.2},window_4x5:{direction:"forward",factor:.2},window_3x1:{direction:"forward",factor:.2},window_4x1:{direction:"forward",factor:.2},window_2x1_medium_with_large_pane:{direction:"forward",factor:.2},door_window_thick_double_2x4:{direction:"forward",factor:.2},door_window_thick_double:{direction:"forward",factor:.1},door_window_thick:{direction:"forward",factor:.1},window_double_frame_sill:{direction:"forward",factor:.1},window_2x3_arched:{direction:"forward",factor:.2},window_2x3_regular:{direction:"forward",factor:.2},window_2x3:{direction:"forward",factor:.2},window_2x4_arched:{direction:"forward",factor:.2},window_4x3_arched:{direction:"forward",factor:.2},window_4x3:{direction:"forward",factor:.2},"garage-door2":{direction:"forward",factor:.2},glassDoorsOpened:{direction:"backward",factor:.45},patioDoorOpened:{direction:"forward",factor:.46}},re=e=>{let t=!1;return Zt[e.object2D.type]&&(t=!0),t};function le(e,t,i){return{rotationAngleSign:t,rotationPivotPoint:Oo(e.itemObject,"horizontal",t,i,this.scaleFactor)}}function he(e,t,i,o){const s=e.itemObject,n=s.object2D;let a,r,l;if(o)r=Oo(s,"horizontal",t,i,this.scaleFactor),l=n.additionalParams.rotationDirection;else{a=Ki(n.limit[0],n.additionalParams.controlPointOnWall)>Ki(n.limit[1],n.additionalParams.controlPointOnWall)?n.limit[0]:n.limit[1],t="start"===n.additionalParams.rotationAxis?-1:1;let e=0;i&&(e-=t*i*s.halfSize.x);const o=R(n.angle),h=ne[s.object2D.type]||0;r=new te.Pa4(a.x*this.scaleFactor+e*Math.cos(o),s.getItemCenterPositionY(this.scaleFactor)+h*s.halfSize.y*this.scaleFactor,a.y*this.scaleFactor+e*Math.sin(o)),s.depthDirectionOffsetTranslation(r,1,this.scaleFactor),l=n.additionalParams.rotationDirection}return{rotationAngleSign:ce(t,l),rotationPivotPoint:r}}const ce=(e,t)=>"up"===t?e:-1*e,de=e=>1===ko(e.object2D,"forward")?1===Po(e,"lefttoright")?1:-1:1===Po(e,"lefttoright")?-1:1;function pe(e,t){const i=e.itemObject;if(ae[i.object2D.type]){const o=ae[i.object2D.type].factor*e.itemObject.halfSize.z*2,s=new te.Pa4;e.getWorldScale(s);const n=o/Math.abs(s.z),a=ao(e)===this.floorplan3DOnMapScene&&e.itemObject.sceneTransformedCalled,r=t.clone();a&&this.inverseProcessSceneVec3(r);const l=r.clone();e.worldToLocal(l),l.z+=ko(i.object2D,ae[i.object2D.type].direction)*n;const h=l.clone();e.localToWorld(h);const c=h.clone();return a&&this.processSceneVec3(c),c}return t}function me(e,t){const i=t.clone();return ao(e)===this.floorplan3DOnMapScene&&e.itemObject.sceneTransformedCalled&&this.inverseProcessSceneVec3(i),i}const ue=2e3;function ge(e){let t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/2,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.props.mainComponentThis.isDoorObject(e.object2D.type)?(t="reverse"===e.object2D.hinge?1:-1,i=le.call(this,e,t,se(e.object2D,n),this)):(i=he.call(this,e,null,se(e.object2D,n),null,this),t=i.rotationAngleSign);const a=pe.call(this,e,i.rotationPivotPoint);let r,l="open"===e.status?-t*o:t*o,h=[];oe[e.object2D.type]&&0!==oe[e.object2D.type].length?(r=this.rotateChildAroundWorldPoint,oe[e.object2D.type].forEach((t=>h.push(e.getObjectByName(t)))),l*=de(e)):(r=this.rotateAroundPoint,h.push(e));let c=0;Te.call(this,e,e.status,(t=>{const i=0*(1-t)+t*l;h.forEach((t=>r(t,me.call(this,e,a),new te.Pa4(0,1,0),i-c,!0))),c=i}),s)}function fe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI/2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ue;const s=e.status,n=new Array("part1","part2").map((o=>{let s="part1"===o?1:-1;const n=bt.includes(e.object2D.type)?-1:1;return Math.sign(e.scale.x)!==n&&(s*=-1),{rotationAngleRad:"part1"===o?t:i,movableParts:oe[e.object2D.type][o].map((t=>e.getObjectByName(t))),rotationParameters:this.props.mainComponentThis.isDoorObject(e.object2D.type)?le.call(this,e,s,Jt[e.object2D.type][o],this):he.call(this,e,s,Jt[e.object2D.type][o],{part:o},this)}}));n.forEach(((t,i)=>{const a=pe.call(this,e,t.rotationParameters.rotationPivotPoint);let r="open"===e.status?-t.rotationParameters.rotationAngleSign*t.rotationAngleRad:t.rotationParameters.rotationAngleSign*t.rotationAngleRad;r*=de(e);let l=0;Te.call(this,e,s,(i=>{const o=0*(1-i)+i*r;t.movableParts.forEach((t=>this.rotateChildAroundWorldPoint(t,me.call(this,e,a),new te.Pa4(0,1,0),o-l))),l=o}),o,i===n.length-1)}))}function be(e){const t=e.itemObject.getItemCenter();let i,o=[];if(oe[e.object2D.type]&&0!==oe[e.object2D.type].length?(i=this.rotateChildAroundWorldPoint,oe[e.object2D.type].forEach((t=>o.push(e.getObjectByName(t))))):(i=this.rotateAroundPoint,o.push(e)),Object.hasOwn(e,"currentRotationAngle")||(e.currentRotationAngle=0),"closed"===e.status){const s=e.currentRotationAngle-0<2*Math.PI-e.currentRotationAngle?0:2*Math.PI;o.forEach((o=>i(o,me.call(this,e,t),new te.Pa4(0,1,0),s-e.currentRotationAngle,!0))),e.currentRotationAngle=0}else{const s=0,n=2*Math.PI,a=()=>Te.call(this,e,e.status,(r=>{if("open"!==e.status)return!0;{const l=(1-r)*s+r*n;o.forEach((o=>i(o,me.call(this,e,t),new te.Pa4(0,1,0),l-e.currentRotationAngle,!0))),e.currentRotationAngle=l,1===r&&a()}}),8e3);a()}}function we(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=Qt[e.object2D.type][t];let o;"horizontal"===i.direction?(o=Po(e,i.horizontalOpeningDirection),e.object2D.additionalParams.mirrored&&(o*=-1)):o="bottomtotop"===i.verticalOpeningDirection?1:-1,"closed"===e.status&&(o*=-1);const s=Array.isArray(oe[e.object2D.type])?oe[e.object2D.type].map((t=>e.getObjectByName(t))):[];let n=[],a=[];return i.translateOnly?a=s:(n=i.doorPartChildName.map((t=>e.getObjectByName(t))),a=s.filter((e=>!i.doorPartChildName.includes(e.name)))),{directionSign:o,translateAndScaleParts:n,translateOnlyParts:a}}const Ce=(e,t,i,o)=>{const s="horizontal"===t?new te.Pa4(i,0,0):new te.Pa4(0,i,0);if("horizontal"===t){const t=(new te.USm).setFromQuaternion(e.quaternion,"YXZ");s.applyAxisAngle(new te.Pa4(0,1,0),-t.y)}e.translateOnAxis(s,o)},xe=(e,t,i,o,s,n,a)=>{const r=s.startSizeValue+s.sizeChangeSign*i;let l=new te.Pa4(1,1,1);"horizontal"===n?l.x=r/s.originalSizeVectorLocal.x:l.y=r/s.originalSizeVectorLocal.y;const h=e.itemObject.getMeshCenter(t);e.worldToLocal(h),t.scale.set(l.x,l.y,l.z);const c=e.itemObject.getMeshCenter(t);e.worldToLocal(c),t.translateOnAxis("horizontal"===n?new te.Pa4(Math.sign(h.x-c.x),0,0):new te.Pa4(0,Math.sign(h.y-c.y),0),"horizontal"===n?Math.abs(h.x-c.x):Math.abs(h.y-c.y)),Ce(t,n,a,(i-o)/2)},ye=2e3;function Se(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye;const i=e.itemObject,o=e.status,s=Qt[e.object2D.type];s.forEach(((n,a)=>{const r=we.call(this,e,a);if(n.translateOnly)if(1===n.doorPartChildName.length){const l=i.doorWindowOpeningsParameters.find((e=>e.childName===n.doorPartChildName[0])).originToDestinationDistanceLocal;let h=0;Te.call(this,e,o,(e=>{const t=e*l;r.translateOnlyParts.forEach((e=>Ce(e,n.direction,r.directionSign,t-h))),h=t}),t,a===s.length-1)}else{const l=n.doorPartChildName.map((t=>({partMesh:e.getObjectByName(t),translationDistanceLocal:i.doorWindowOpeningsParameters.find((e=>e.childName===t)).originToDestinationDistanceLocal,previousTranslationOffset:0})));Te.call(this,e,o,(e=>{l.forEach((t=>{const i=e*t.translationDistanceLocal;i-t.previousTranslationOffset>0&&Ce(t.partMesh,n.direction,r.directionSign,i-t.previousTranslationOffset),t.previousTranslationOffset=i}))}),t,a===s.length-1)}else{const l=Math.max(...i.doorWindowOpeningsParameters.map((e=>e.originToDestinationDistanceLocal))),h=i.doorWindowOpeningsParameters.map((t=>{let i,o;return"open"===e.status?(i=t.closedSizeLocal,o=Math.sign(t.openSizeLocal-t.closedSizeLocal)):(i=t.openSizeLocal,o=Math.sign(t.closedSizeLocal-t.openSizeLocal)),{partName:t.childName,startSizeValue:i,sizeChangeSign:o,distanceLocal:t.originToDestinationDistanceLocal,originalSizeVectorLocal:t.doorPartOriginalSizeVectorLocal,previousTranslationOffset:0}}));let c=0;Te.call(this,e,o,(t=>{const i=t*l;r.translateOnlyParts.forEach((e=>Ce(e,n.direction,r.directionSign,i-c))),r.translateAndScaleParts.forEach((i=>{const o=h.find((e=>e.partName===i.name)),s=t*o.distanceLocal;xe(e,i,s,o.previousTranslationOffset,o,n.direction,r.directionSign),o.previousTranslationOffset=s})),c=i}),t,a===s.length-1)}}))}function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye;const i=e.itemObject,o=e.status,s=Qt[e.object2D.type];s.forEach(((n,a)=>{const r=we.call(this,e,a),{translateAndScaleParts:l,translateOnlyParts:h}=r,c=t/l.length;let d=[];for(let t=0;t<i.doorWindowOpeningsParameters.length;t++){let o,s,n=i.doorWindowOpeningsParameters[t].originToDestinationDistanceLocal;if(t>0)for(let e=0;e<t;e++)n-=d[e].distanceLocal;"open"===e.status?(o=i.doorWindowOpeningsParameters[t].closedSizeLocal,s=-1):(o=i.doorWindowOpeningsParameters[t].closedSizeLocal-n,s=1),d.push({partName:i.doorWindowOpeningsParameters[t].childName,startSizeValue:o,sizeChangeSign:s,distanceLocal:n,originalSizeVectorLocal:i.doorWindowOpeningsParameters[t].doorPartOriginalSizeVectorLocal})}let p=0,m=0,u=d[0].distanceLocal;const g=t=>{const i=t*u;l.forEach(((t,o)=>{o===p?xe(e,t,i,m,d.find((e=>e.partName===t.name)),n.direction,r.directionSign):o>p&&Ce(t,n.direction,r.directionSign,i-m)})),h.forEach((e=>Ce(e,n.direction,r.directionSign,i-m))),m=i,1===t&&p<l.length-1&&(p++,m=0,u=d[p].distanceLocal,Te.call(this,e,o,g,c,a===s.length-1&&p===l.length-1))};Te.call(this,e,o,g,c,!1)}))}function De(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye;const i=e.itemObject,o=e.status,s=Qt[e.object2D.type];s.forEach(((n,a)=>{const r=we.call(this,e,a),l=oe[e.object2D.type][n.horizontalOpeningDirection].slideAndRotate.map((t=>e.getObjectByName(t))),h=[...l,...oe[e.object2D.type][n.horizontalOpeningDirection].slideOnly.map((t=>e.getObjectByName(t)))];let c=oe[e.object2D.type][n.horizontalOpeningDirection].rotationAngleRad;i.object2D.additionalParams.mirrored&&(c*=-1),"closed"===e.status&&(c*=-1),"lefttoright"!==n.horizontalOpeningDirection&&(c*=-1),c*=de(e);const d=i.doorWindowOpeningsParameters.find((e=>e.childName===n.doorPartChildName[0])),p=d.originToDestinationDistanceLocal,m=d.originPointLocal.clone();m.x+="closed"===e.status?0:p*r.directionSign*-1;let u=0,g=0;Te.call(this,e,o,(t=>{const i=t*p,o=0*(1-t)+t*c,s=m.clone();s.x+=r.directionSign*u;const a=s.clone();e.localToWorld(a),l.forEach((e=>{this.rotateChildAroundWorldPoint(e,a,new te.Pa4(0,1,0),o-g)})),h.forEach((e=>Ce(e,n.direction,r.directionSign,i-u))),u=i,g=o}),t,a===s.length-1)}))}function ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye;const i=e.itemObject,o=i.doorWindowOpeningsParameters[0],s=oe[e.object2D.type],n=s.movableDoors.parts.map((t=>e.getObjectByName(t))),a=s.cornerRotationDoors.parts.map((t=>e.getObjectByName(t)));let r=-s.movableDoors.rotationAngleRad,l=s.cornerRotationDoors.rotationAngleRad;i.object2D.additionalParams.mirrored&&(r*=-1,l*=-1),"closed"===e.status&&(r*=-1,l*=-1);const h=de(e);r*=h,l*=h;let c,d,p=0,m=0;"closed"===e.status?(c=o.movableDoors.clone(),d=0):(d=-l,c=Mo(o.cornerRotationDoors,o.movableDoors,d)),Te.call(this,e,e.status,(t=>{const i=0*(1-t)+t*l,s=o.cornerRotationDoors.clone();e.localToWorld(s),a.forEach((e=>this.rotateChildAroundWorldPoint(e,s,new te.Pa4(0,1,0),i-m)));const h=0*(1-t)+t*r,u=Mo(o.cornerRotationDoors,o.movableDoors,d+i),g=u.clone();e.localToWorld(g);const f=(new te.Pa4).subVectors(u,c);n.forEach((e=>{e.position.add(f),this.rotateChildAroundWorldPoint(e,g,new te.Pa4(0,1,0),h-p)})),c=u,p=h,m=i}),t)}function Te(e,t,i,o){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===o)i(1);else{let n=null;e.isAnimationInProgress=!0;const a=()=>{e.isAnimationInProgress=!1,s&&!re(e)&&e.status!==t&&this.updateDoorWindowMeshState(e)},r=e=>{n||(n=e);const t=e-n,s=Math.min(t/o,1);i(s)?a():t<o?requestAnimationFrame(r):a()};requestAnimationFrame(r)}}function je(e){if(Yt.includes(e.object2D.type))return;let t;var i;null!==se(e.object2D)?t=ge:bo(e.object2D.type)?t=fe:Zt[e.object2D.type]?t=be:null!==(i=e.object2D,Object.hasOwn(Qt,i.type)&&"garageDoor"!==i.type&&"sixDoorFrenchStyle"!==i.type&&"accordionFoldDoors"!==i.type?Qt[i.type]:null)?t=Se:"garageDoor"===e.object2D.type?t=_e:"sixDoorFrenchStyle"===e.object2D.type?t=De:"accordionFoldDoors"===e.object2D.type&&(t=ve),t||(t=ge);!re(e)&&e.isAnimationInProgress||t.call(this,e)}function Oe(e){if(ie.includes(e.objectType))switch(e.objectType){case"patioDoorOpened":ge.call(this,e.mesh,R(e.object2D.additionalParams.mirrored?50:-50),0,!0);break;case"glassDoorsOpened":fe.call(this,e.mesh,R(125),R(128),0);break;case"sliderPocketDoor":case"elevator":case"japanesedoor":Se.call(this,e.mesh,0);break;case"sixDoorFrenchStyle":De.call(this,e.mesh,0);break;case"accordionFoldDoors":ve.call(this,e.mesh,0)}}const Ie=class{constructor(){this.hover=!1,this.selected=!1,this.highlighted=!1,this.emissiveColor=4473924,this.defaultEmissiveColor=0}updateMeshHighlight(){const e=this.hover||this.selected;this.highlighted=e;const t=e?this.emissiveColor:this.defaultEmissiveColor;this.mesh.traverse((i=>{if(i instanceof te.Kj0){(i.material.isMaterial?[i.material]:i.material).forEach((i=>{i.emissive?i.emissive.setHex(t):i.color&&(this.mesh.textColor&&!e?i.color.setHex(this.mesh.textColor.getHex()):i.color.setHex(t))}))}}))}mouseOver(){this.hover=!0,this.updateMeshHighlight()}mouseOff(){this.hover=!1,this.updateMeshHighlight()}setSelected(){this.selected=!0,this.updateMeshHighlight()}setUnselected(){this.selected=!1,this.updateMeshHighlight()}customIntersectionPlanes(){return[]}};var Pe=i(1317);const ke=class extends Ie{constructor(e,t,i,o,s,n,a,r){let l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];super(),this.scene=e,this.errorGlow=new te.Kj0,this.error=!1,this.errorColor=16711680,this.disabled=!1,this.fixed=r.fixed||!1,this.resizable=r.resizable||!1,this.floorNumber=n,this.itemStartHeight=a.props.mainComponentThis.getFloorStartElevation(this.floorNumber,!0),this.floorplan3DThis=a,this.object3DProperties=i,this.object2D=o,this.object2DPositionTolerance=Math.pow(10,-8),this.sceneTransformedCalled=!1,this.debugMode=l,this.position_set=!0,this.boxSelectorMesh=null,this.highlightedColor=null,this.highlightEntitiesColorOn=2600544,this.highlightEntitiesColorOff=12597547,this.highlightEntitiesColorClickable=2719929,this.initializeItemMeshData(t,s),this.scene===this.floorplan3DThis.floorplan3DOnMapScene&&document.addEventListener("sceneTransformed",(e=>this.onSceneTransformed(e)),{once:!0})}initializeItemMeshData(e,t){if(this.originalMaterialColors=[],this.paintedMaterialColors=[],this.animations=[],this.customMaterialTextures=[],this.allowRotate="lightSource"!==t,this.dragOffset=new te.Pa4,this.position=new te.Pa4,this.scale=new te.Pa4,this.meshPositionOffsetFromCenter=new te.Pa4(0,0,0),this.loadedObjectPositionOffsetFromCenter=new te.Pa4(0,0,0),this.loadedObjectSizeVector=new te.Pa4,this.initialHalfSize=new te.Pa4,this.rotation=0,this.rotateLastAngle=0,this.objectType=t,this.meshScaleXSign=this.calculateMeshScaleXSign(),this.meshScaleYSign=1,this.meshScaleZSign=this.calculateMeshScaleZSign(),this.objects3DArray=e,yt[this.objectType])this.mesh=this.floorplan3DThis[yt[this.objectType].model3DCreationMethod](this.object2D);else{const{object:e}=this.objects3DArray.find((e=>e.floorplanItemType===this.objectType)),t=e.deepClone();this.mesh=t,this.loadedObjectPositionOffsetFromCenter=this.position.clone().sub(this.getMeshCenter()),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone()}this.mesh.isFloorplanItem=!0,this.mesh.itemObject=this,(new te.ZzF).setFromObject(this.mesh,!0).getSize(this.loadedObjectSizeVector),(this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)||this.floorplan3DThis.props.mainComponentThis.isFanObject(this.objectType)||this.floorplan3DThis.props.mainComponentThis.isCoverObject(this.objectType))&&(this.boxSelectorMesh=new te.Kj0(new te.DvJ(this.loadedObjectSizeVector.x,this.loadedObjectSizeVector.y,this.loadedObjectSizeVector.z),new te.vBJ({visible:!1})),this.boxSelectorMesh.floorplanItemBoxSelector=!0,this.boxSelectorMesh.itemObject=this);for(let s in this.object3DProperties)this.mesh[s]=this.object3DProperties[s];this.initialHalfSize=this.meshHalfSize(),this.halfSize=this.initialHalfSize.clone();let i=this.itemStartHeight/this.floorplan3DThis.scaleFactor;F(this.object2D.additionalParams.positionY)||(i+=this.object2D.additionalParams.positionY+this.object2D.additionalParams.height3D/2);const o=new te.Pa4(this.object2D.x,i,this.object2D.y).multiplyScalar(this.floorplan3DThis.scaleFactor);if(this.setItemPosition(o),this.debugMode){const e=new te.xo$(5,32,15),t=new te.vBJ({color:16776960}),i=new te.Kj0(e,t);i.position.set(o.x,o.y,o.z),this.scene.add(i)}this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)?this.mesh.light=new te.Tme:this.floorplan3DThis.props.mainComponentThis.isScreenObject(this.objectType)&&(this.mesh.screenPart=new te.Tme),this.mesh.traverse((e=>{if(e instanceof te.Kj0){(e.material.isMaterial?[e.material]:e.material).forEach(((t,i)=>{this.originalMaterialColors.push({meshName:e.name,materialIndex:i,color:t.color.getHex(),map:t.map})}))}})),(this.floorplan3DThis.props.mainComponentThis.isDoorObject(this.objectType)||this.floorplan3DThis.props.mainComponentThis.isWindowObject(this.objectType))&&(this.doorWindowOpeningsParameters=[])}getPartColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const o=this.originalMaterialColors.filter((e=>t===e.meshName)),s=this.paintedMaterialColors.filter((e=>t===e.meshName));let n;return"default"===e&&(n=s.length>0?s:o),"original"===e&&(n=o),"painted"===e&&(n=s||null),n?i?n[0].color:n:null}setPartColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1?arguments[1]:void 0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=!this.highlightedColor&&["default","original","painted"].includes(e),s=this.highlightedColor?this.highlightedColor:o?this.getPartColor(e,t,!1):e;this.mesh.traverse((n=>{if(n instanceof te.Kj0&&n.name===t){(n.material.isMaterial?[n.material]:n.material).forEach(((n,a)=>{const r=o?s.find((e=>e.materialIndex===a)).color:s;"original"===e||"default"===e&&!this.paintedMaterialColors.find((e=>t===e.meshName))?(n.flatShading=!1,i&&(n.map=this.originalMaterialColors.find((e=>t===e.meshName&&e.materialIndex===a)).map)):(n.flatShading=!0,i&&(n.map=null)),n.color&&(n.color.setHex(r),n.needsUpdate=!0)}))}}))}setAllPartsColor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";this.mesh.traverse((t=>{t instanceof te.Kj0&&this.originalMaterialColors.find((e=>e.meshName===t.name))&&this.setPartColor(e,t.name)}))}setCustomTexture(e,t,i){if(e instanceof te.xEZ===!1)throw new Error("Invalid texture provided");this.mesh.traverse((o=>{if(o instanceof te.Kj0&&o.name===t){(o.material.isMaterial?[o.material]:o.material).forEach(((o,s)=>{o.map=e,o.color=new te.Ilk(16777215),o.needsUpdate=!0;const n=this.customMaterialTextures.find((e=>e.meshName===t&&e.materialIndex===s));n?n.map=e:this.customMaterialTextures.push({textureName:i,meshName:t,materialIndex:s,map:e})}))}}))}setCustomTextureByName(e,t){const i="".concat("https://app.klet3d.com","/textures//").concat(e,".png"),o=this.floorplan3DThis.loadedTextures.find((t=>t.name===e));o?this.setCustomTexture(o.textureData,t,e):this.floorplan3DThis.textureLoader.load(i,(i=>{this.floorplan3DThis.loadedTextures.push({name:e,textureData:i}),this.setCustomTexture(i,t,e)}),void 0,(e=>{Pe.error("Error loading texture:",e)}))}isPartUVUnwrapped(e){return void 0!==this.mesh.getObjectByName(e).geometry.attributes.uv}removeCustomTexture(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.mesh.traverse((i=>{if(i instanceof te.Kj0&&i.name===e){(i.material.isMaterial?[i.material]:i.material).forEach(((o,s)=>{const n=this.originalMaterialColors.find((e=>e.meshName===i.name&&e.materialIndex===s));if(n&&(o.color.setHex(n.color),o.map=n.map,o.needsUpdate=!0,t)){const t=this.customMaterialTextures.findIndex((t=>t.meshName===e&&t.materialIndex===s));-1!==t&&this.customMaterialTextures.splice(t,1)}}))}}))}restoreCustomTexture(e){const t=this.customMaterialTextures.find((t=>t.meshName===e));return t?(this.setCustomTexture(t.map,e),t.textureName):(this.setPartColor("original",e),null)}setPaintedColor(e,t){this.setPartColor(e,t);const i=this.paintedMaterialColors.filter((e=>e.meshName===t));if(i.length>0)i.forEach((t=>t.color=e));else{const i=this.mesh.getObjectByName(t);if(i instanceof te.Kj0){(i.material.isMaterial?[i.material]:i.material).forEach(((i,o)=>{this.paintedMaterialColors.push({meshName:t,materialIndex:o,color:e})}))}}}removePaintedColor(e){const t=this.paintedMaterialColors.length;this.paintedMaterialColors=this.paintedMaterialColors.filter((t=>t.meshName!==e)),this.paintedMaterialColors.length!==t&&this.setPartColor("original",e)}calculateMeshScaleZSign(){let e=1;return ft.includes(this.objectType)&&(e*=-1),gt.includes(this.objectType)&&(e*=-1),e}calculateMeshScaleXSign(){let e=1;return this.floorplan3DThis.props.mainComponentThis.isDoorObject(this.objectType)&&fo(this.objectType)&&"reverse"===this.object2D.hinge&&(e=-1),!xt[this.objectType]&&this.object2D.additionalParams.mirrored&&(e*=-1),bt.includes(this.objectType)?-1*e:e}recalculateMeshScaleXSign(){this.meshScaleXSign=this.calculateMeshScaleXSign()}initObject(){if(xt[this.objectType])this.resize(this.loadedObjectSizeVector.x/this.floorplan3DThis.scaleFactor,this.loadedObjectSizeVector.y/this.floorplan3DThis.scaleFactor,this.loadedObjectSizeVector.z/this.floorplan3DThis.scaleFactor);else{this.resize(this.object2D.additionalParams.width3D,this.object2D.additionalParams.height3D,this.object2D.additionalParams.depth3D);const e=this.object2D.additionalParams.materials;e&&this.mesh.traverse((t=>{const i=e.find((e=>e.meshName===t.name));if(i)if("color"===i.type&&i.color){const e=parseInt(i.color.split("#").at(-1),16);this.setPaintedColor(e,t.name)}else"texture"===i.type&&i.textureName&&this.setCustomTextureByName(i.textureName,t.name)}))}this.rotateItem(R(this.object2D.angle),-1),this.rotateLastAngle=-R(this.object2D.angle);let e=this.getItemCenter();if(this.depthDirectionOffsetTranslation(e,1,this.floorplan3DThis.scaleFactor),this.setItemPosition(e),this.placeInRoom(),this.floorplan3DThis.isFloorHidden(this.floorNumber)&&this.setVisibilityStatus(!1),this.scene.add(this.mesh),this.boxSelectorMesh&&this.scene.add(this.boxSelectorMesh),this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)){if(this.scene.add(this.mesh.light),this.debugMode){const e=new te.xG9(this.mesh.light,20,16711680);this.scene.add(e)}}else this.floorplan3DThis.props.mainComponentThis.isScreenObject(this.objectType)&&this.getScreenChildMesh().add(this.mesh.screenPart);if(this.mesh.updateWorldMatrix(!0,!0),this.floorplan3DThis.props.mainComponentThis.isCameraObject(this.objectType)){this.floorplan3DThis.cameraItemRotation(this,uo(0,dt[this.objectType].modelRotationXOffsetDeg,0,dt[this.objectType].modelRotationYOffsetDeg)),this.cameraItemProperties={};const e=this.mesh.children.find((e=>e.name===dt[this.objectType].cameraLensMeshName)),t=new te.ZzF;t.setFromObject(e,!0);const i=Io(t,this.mesh),o=new te.Pa4;i.getCenter(o);const s=o.clone();s.z+=ko(this.object2D,"forward")*(i.max.z-o.z);const n=o.clone();this.mesh.localToWorld(n),e.worldToLocal(n),this.cameraItemProperties.cameraLensMeshCenterLocal=n.clone();const a=s.clone();this.mesh.localToWorld(a),e.worldToLocal(a),this.cameraItemProperties.cameraLensMeshLensPosLocal=a.clone(),this.floorplan3DThis.cameraItemRotation(this,uo(0,this.object2D.additionalParams.cameraRotationAngleXDeg,0,this.object2D.additionalParams.mirrored?dt[this.objectType].modelMirroredRotationYSign*this.object2D.additionalParams.cameraRotationAngleYDeg:this.object2D.additionalParams.cameraRotationAngleYDeg))}else if(this.floorplan3DThis.props.mainComponentThis.isScreenObject(this.objectType)){this.rotateItem(0,1),this.mesh.updateWorldMatrix(!0,!0),this.screenItemProperties={};const e=this.getScreenChildMesh(),t=new te.ZzF;t.setFromObject(e,!0);const i=Io(t,this.mesh),o=new te.Pa4;this.mesh.getWorldScale(o);const s=i.max.x-i.min.x,n=i.max.y-i.min.y,a=i.max.z-i.min.z;this.screenItemProperties.screenPartDimensions={localWidth:s,localHeight:n,localDepth:a,worldWidth:s*Math.abs(o.x),worldHeight:n*Math.abs(o.y),worldDepth:a*Math.abs(o.z)},-90===ut[this.objectType].rotationXDeg&&(this.screenItemProperties.screenPartDimensions.localHeight=a,this.screenItemProperties.screenPartDimensions.localDepth=n,this.screenItemProperties.screenPartDimensions.worldHeight=this.screenItemProperties.screenPartDimensions.localHeight*Math.abs(o.z),this.screenItemProperties.screenPartDimensions.worldDepth=this.screenItemProperties.screenPartDimensions.localDepth*Math.abs(o.y)),this.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor=0!==this.screenItemProperties.screenPartDimensions.localDepth?this.screenItemProperties.screenPartDimensions.localDepth/this.screenItemProperties.screenPartDimensions.worldDepth:1;const r=new te.Pa4;i.getCenter(r);const l=r.clone();l.z+=ko(this.object2D,"forward")*this.screenItemProperties.screenPartDimensions.localDepth/2,this.screenItemProperties.screenPartCenterPointLocal=r,this.screenItemProperties.screenPartCenterEdgePointLocal=l,this.rotateItem(R(this.object2D.angle),-1)}else if(this.floorplan3DThis.props.mainComponentThis.isDoorObject(this.objectType)||this.floorplan3DThis.props.mainComponentThis.isWindowObject(this.objectType))if(Qt[this.objectType]){const e=this.object2D.additionalParams.mirrored?-1:1;Qt[this.objectType].forEach((t=>{const i=Oo(this,t.direction,"horizontal"===t.direction?-1*e:-1,t.destinationPointFactor,this.floorplan3DThis.scaleFactor).clone();this.mesh.worldToLocal(i);const o=Oo(this,t.direction,1,1!==t.destinationPointFactor?1:1.1,this.floorplan3DThis.scaleFactor).clone();this.mesh.worldToLocal(o),t.doorPartChildName.forEach((s=>{const n=new te.ZzF,a=this.mesh.getObjectByName(s);n.setFromObject(a,!0);const r=Io(n,this.mesh),l=new te.Pa4;r.getSize(l);const h=new te.Pa4;r.getCenter(h);const c=h.clone();"horizontal"===t.direction?c.x+=e*(t.originPointDirectionCalculationSign*(Po(this.mesh,"lefttoright")*(r.max.x-r.min.x)))/2:c.y-=t.originPointDirectionCalculationSign*(r.max.y-r.min.y)/2;const d=Fo(c,i,o),p=Xi(d,i);let m={childName:s,originPointLocal:c,destinationPointLocal:i,originToDestinationDistanceLocal:p,doorPartOriginalSizeVectorLocal:l};if(t.translateAndScale){const e="horizontal"===t.direction?l.x:l.y;"open"===t.defaultModelState?(m.openSizeLocal=e,m.closedSizeLocal=e+p):(m.openSizeLocal=e-p,m.closedSizeLocal=e)}this.doorWindowOpeningsParameters.push(m)}))}))}else if("accordionFoldDoors"===this.objectType){const e=oe[this.objectType];let t={};for(let i in e){const o=e[i].rotationPointPartName.map((e=>this.mesh.getObjectByName(e))),s=new te.ZzF;o.forEach((e=>s.union((new te.ZzF).setFromObject(e,!0))));const n=Io(s,this.mesh),a=new te.Pa4;n.getCenter(a),t[i]=a}this.doorWindowOpeningsParameters.push(t)}this.scene.needsUpdate=!0}setItemPosition(e,t){(t=t||this.mesh)===this.mesh&&1===this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.objectType)&&(e.y=this.itemStartHeight+(this.object2D.additionalParams.positionY+this.object2D.additionalParams.height3D/2)*this.floorplan3DThis.scaleFactor);const i=e.clone().add(this.getItemMeshRotatedPositionOffsetFromCenter());if(t.position.set(i.x,i.y,i.z),t===this.mesh){if(this.position.copy(i),this.boxSelectorMesh&&this.boxSelectorMesh.position.copy(this.getMeshCenter(this.mesh)),"onWall"!==this.object2D.family&&"inWall"!==this.object2D.family){const t=e.x/this.floorplan3DThis.scaleFactor-this.object2D.x,i=e.z/this.floorplan3DThis.scaleFactor-this.object2D.y;Math.abs(t)>this.object2DPositionTolerance&&(this.object2D.x+=t),Math.abs(i)>this.object2DPositionTolerance&&(this.object2D.y+=i),this.object2D.update(this.floorplan3DThis.props.mainComponentThis)}else if(!Ge.includes(this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.objectType))){const t=this.floorplan3DThis.props.mainComponentThis.convertSvgToValueUnits((e.y-this.itemStartHeight)/this.floorplan3DThis.scaleFactor-this.object2D.additionalParams.height3D/2);this.object2D.additionalParams.positionY=this.floorplan3DThis.props.mainComponentThis.convertValueToSvgUnits(t),this.floorplan3DThis.props.mainComponentThis.activeItemPositionsRef.current&&this.floorplan3DThis.props.mainComponentThis.activeItemPositionsRef.current.setPositionYInputValues(t)}this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)&&this.mesh.light?this.mesh.light.position.set(e.x,e.y,e.z):this.floorplan3DThis.props.mainComponentThis.isScreenObject(this.objectType)&&this.mesh.screenPart&&this.floorplan3DThis.setScreenPartMeshPosition(this)}}depthDirectionOffsetTranslation(){}rotateItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i=i||this.mesh,"onWall"===this.object2D.family&&(e+=R(this.object2D.params.onWallOffsetAngle));let s=e*=t;i===this.mesh&&(s=e-this.rotation);const n=i===this.mesh?this.getItemCenter():this.getMeshCenter(i);this.floorplan3DThis.rotateAroundPoint(i,n,new te.Pa4(0,1,0),s),i===this.mesh&&(this.boxSelectorMesh&&this.floorplan3DThis.rotateAroundPoint(this.boxSelectorMesh,n,new te.Pa4(0,1,0),s,!1),this.rotation=e,this.position=n.add(this.getItemMeshRotatedPositionOffsetFromCenter())),Pe.log(o)}remove(){this.removeAllAnimations(),this.floorplan3DThis.props.mainComponentThis.isLightObject(this.objectType)?this.unrenderLight():this.floorplan3DThis.props.mainComponentThis.isScreenObject(this.objectType)&&this.unrenderScreenPart();let e=[this.mesh];this.boxSelectorMesh&&e.push(this.boxSelectorMesh),this.error&&e.push(this.errorGlow),e.forEach((e=>{this.scene.remove(e),xo(e)})),this.removed()}setVisibilityStatus(e){this.mesh.visible=this.errorGlow.visible=e,this.setAnimationsVisibility(e)}resize(e,t,i){const o=new te.Pa4(e/this.loadedObjectSizeVector.x,t/this.loadedObjectSizeVector.y,i/this.loadedObjectSizeVector.z).multiplyScalar(this.floorplan3DThis.scaleFactor);this.scale.set(this.meshScaleXSign*o.x,this.meshScaleYSign*o.y,this.meshScaleZSign*o.z),this.boxSelectorMesh&&this.boxSelectorMesh.scale.set(o.x,o.y,o.z);const s=this.getMeshCenter();this.mesh.scale.set(this.scale.x,this.scale.y,this.scale.z);const n=this.getMeshCenter(),a=s.sub(n);this.floorplan3DThis.translateObjectInWorld(this.mesh,a.x,a.y,a.z,this.sceneTransformedCalled),this.position.copy(this.mesh.position),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone().multiply(this.scale),this.halfSize=this.initialHalfSize.clone().multiply(o),this.resized(),this.mesh.needsUpdate=!0}resizeByReferencePoint(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>this.getMeshCenter(this.mesh);const s=new te.Pa4(e/this.loadedObjectSizeVector.x,t/this.loadedObjectSizeVector.y,i/this.loadedObjectSizeVector.z).multiplyScalar(this.floorplan3DThis.scaleFactor);this.scale.set(this.meshScaleXSign*s.x,this.meshScaleYSign*s.y,this.meshScaleZSign*s.z),this.boxSelectorMesh&&this.boxSelectorMesh.scale.set(s.x,s.y,s.z);const n=o();this.mesh.scale.set(this.scale.x,this.scale.y,this.scale.z),this.mesh.updateMatrixWorld(!0);const a=o(),r=(new te.Pa4).subVectors(n,a);this.mesh.position.add(r),this.mesh.updateMatrixWorld(!0),this.position.copy(this.mesh.position),this.meshPositionOffsetFromCenter=this.loadedObjectPositionOffsetFromCenter.clone().multiply(this.mesh.scale),this.halfSize=this.initialHalfSize.clone().multiply(s),this.mesh.needsUpdate=!0}rotateByEulerByReferencePoint(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>this.getMeshCenter(this.mesh);const o=(new te.Pa4).copy(i());t.setRotationFromEuler(e);const s=(new te.Pa4).copy(i()),n=(new te.Pa4).subVectors(o,s);t.position.add(n),t.updateMatrixWorld(!0),"function"===typeof this.rotated&&this.rotated(),t.needsUpdate=!0}clickPressed(e){this.dragOffset.copy(e.point).sub(this.position)}clickDragged(e,t){if(e){if(t){const t=e.point.clone().sub(this.dragOffset);this.moveToPosition(t.sub(this.getItemMeshRotatedPositionOffsetFromCenter()),e)}else this.moveToPosition(e.point,e);if(this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.isWallItem){const t=this.floorplan3DThis.getFloorplanViewSceneItem(this.object2D);if(t){const i={};i.point=e.point,i.object={};const o=this.floorplan3DThis.floorplanViewWalls3D.find((e=>e.wall2D.wallId===this.itemWall.wall3D.wall2D.wallId));i.object.wall3D=o,i.object.uuid=this.itemWall.wallPlane.planeObject.uuid===this.itemWall.wall3D.interiorWallPlane.planeObject.uuid?o.interiorWallPlane.planeObject.uuid:o.exteriorWallPlane.planeObject.uuid,t.moveToPosition(this.getItemCenter(),i)}}}}rotate(e){if(e){const t=this.getItemCenter();let i=this.floorplan3DThis.props.mainComponentThis.qSVG.angleBetweenLines(0,1,e.point.x-t.x,e.point.z-t.z);const o=Math.PI/16;for(let e=-4;e<=4;e++)if(Math.abs(i-e*(Math.PI/2))<o){i=e*(Math.PI/2);break}if(this.isValidRotation(i))this.hideError(),this.rotateItem(i),"onWall"!==this.object2D.family&&"inWall"!==this.object2D.family&&(this.object2D.angle=-T(L(i),0),this.floorplan3DThis.props.mainComponentThis.activeItemRotationsRef.current&&this.floorplan3DThis.props.mainComponentThis.activeItemRotationsRef.current.setRotationInputValues(this.object2D.angle),this.object2D.update(this.floorplan3DThis.props.mainComponentThis));else{this.error||(this.error=!0,this.errorGlow=this.createErrorGlow(this.errorColor,.8,!0),this.scene.add(this.errorGlow));const e=t.clone().add(this.getItemMeshRotatedPositionOffsetFromCenter(this.errorGlow));this.errorGlow.position.set(e.x,e.y,e.z),this.floorplan3DThis.rotateAroundPoint(this.errorGlow,t,new te.Pa4(0,1,0),i-this.rotateLastAngle)}this.rotateLastAngle=i}}moveToPosition(e){this.setItemPosition(e)}clickReleased(){this.rotateLastAngle=this.rotation,this.error&&this.hideError()}meshHalfSize(){const e=new te.ZzF;return e.setFromObject(this.mesh,!0),e.max.clone().sub(e.min).divideScalar(2)}getXZCorners(){const e=new te.ZzF;e.setFromObject(this.mesh,!0);const t=Do(e),i=so(t.map((e=>new te.FM8(e.x,e.z))));return[{x:i.minX,y:i.minY},{x:i.minX,y:i.maxY},{x:i.maxX,y:i.minY},{x:i.maxX,y:i.maxY}]}getItemMeshRotatedPositionOffsetFromCenter(e){e=e||this.mesh;const t=this.meshPositionOffsetFromCenter.clone();return _o(t,e),t}getMeshCenter(e){e=e||this.mesh;const t=new te.Pa4;return(new te.ZzF).setFromObject(e,!0).getCenter(t),this.sceneTransformedCalled&&this.floorplan3DThis.processSceneVec3(t),t}getItemCenterPositionY(){let e=this.itemStartHeight+this.halfSize.y;return Ge.includes(this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.objectType))||(e+=this.object2D.additionalParams.positionY*this.floorplan3DThis.scaleFactor),e}getMeshPoint(e,t){t=t||this.mesh,(e=e||{}).x=Math.max(-1,Math.min(1,e.x))||0,e.y=Math.max(-1,Math.min(1,e.y))||0,e.z=Math.max(-1,Math.min(1,e.z))||0;const i=t.clone();this.rotateByEulerByReferencePoint(new te.USm(0,0,0),i,(()=>this.getMeshCenter(i)));const o=(new te.ZzF).setFromObject(t,!0),s=(new te.ZzF).setFromObject(i,!0),n=new te.Pa4;s.getCenter(n);const a=new te.Pa4;s.getSize(a),n.x=s.min.x+(e.x+1)/2*a.x,n.y=s.min.y+(e.y+1)/2*a.y,n.z=s.min.z+(e.z+1)/2*a.z;const r=new te.Pa4;return o.getCenter(r),n.sub(r),n.applyQuaternion(t.quaternion),n.add(r),n}getItemCenter(){return this.position.clone().sub(this.getItemMeshRotatedPositionOffsetFromCenter())}showError(e){e=e||this.getItemCenter(),this.error||(this.error=!0,this.errorGlow=this.createErrorGlow(this.errorColor,.8,!0),this.scene.add(this.errorGlow)),this.setItemPosition(e,this.errorGlow)}hideError(){this.error&&(this.error=!1,this.scene.remove(this.errorGlow))}createErrorGlow(e,t,i){i=i||!1,t=t||.2;const o=new te.vBJ({color:e,blending:te.WMw,opacity:.2,transparent:!0,depthTest:!i}),s=this.mesh.deepClone();return s.traverse((e=>{e instanceof te.Kj0&&(e.material.isMaterial?(e.material=o,e.material.needsUpdate=!0):(e.material=e.material.map((()=>o)),e.material.needsUpdate=!0))})),s.position.copy(this.position),s.scale.copy(this.scale),s}placeInRoom(){}resized(){}removed(){}isValidPosition(){return!0}isValidRotation(){return!0}onSceneTransformed(){this.sceneTransformedCalled=!0}stopAllAnimations(){this.animations.forEach((e=>e.stop()))}removeAllAnimations(){this.stopAllAnimations(),this.animations.forEach((e=>e.remove())),this.animations=[]}addAnimation(e){return this.animations.push(e),e}getAnimation(e){return this.animations.find((t=>t.name===e))}setAnimationsVisibility(e){this.animations.forEach((t=>t.setIsVisible(e)))}setMaterialOpacity(e){this.mesh.traverse((t=>{if(t instanceof te.Kj0&&this.originalMaterialColors.find((e=>e.meshName===t.name))){(t.material.isMaterial?[t.material]:t.material).forEach((t=>{t.transparent=e<1,t.opacity=e,t.visible=0!==e,t.needsUpdate=!0}))}}))}setHighlightColor(e){this.highlightedColor=e,this.setAllPartsColor(e)}highlightOnColor(){this.setHighlightColor(this.highlightEntitiesColorOn)}highlightOffColor(){this.setHighlightColor(this.highlightEntitiesColorOff)}highlightClickableColor(){this.setHighlightColor(this.highlightEntitiesColorClickable)}resetHighlightColor(){this.highlightedColor=null,this.setAllPartsColor("default")}unrenderLight(){this.mesh.light&&(this.mesh.light instanceof te.PMe&&(this.scene.remove(this.mesh.light.target),xo(this.mesh.light.target)),this.scene.remove(this.mesh.light),xo(this.mesh.light))}renderLight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"spot",t=arguments.length>1?arguments[1]:void 0;if(!t)if("spot"===e)t={spotAngle:45,spotDistance:1e3};else t={};if("point"===e&&!(this.mesh.light instanceof te.cek)||"spot"===e&&!(this.mesh.light instanceof te.PMe)){if(this.unrenderLight(),"spot"===e){this.mesh.light=this.floorplan3DThis.createSpotLight(this.position,this.floorNumber,t);const e=this.getItemCenter();this.setItemPosition(e),this.mesh.light.target.position.set(e.x,e.y-100,e.z),this.scene.add(this.mesh.light.target)}else{this.mesh.light=this.floorplan3DThis.createPointLight(this.position,this.floorNumber);let e=this.getItemCenter();this.setItemPosition(e)}this.scene.add(this.mesh.light),this.mesh.light.needsUpdate=!0}else if("spot"===e){const e=t.spotAngle;R(e)!==this.mesh.light.angle&&(this.mesh.light.angle=R(e),this.mesh.light.needsUpdate=!0);const i=t.spotDistance;this.mesh.light&&i!==this.mesh.light.distance&&(this.mesh.light.distance=i,this.mesh.light.needsUpdate=!0)}}getScreenChildMesh(){return this.mesh.children.find((e=>e.name===ut[this.objectType].targetChildName))}unrenderScreenPart(){this.mesh.screenPart&&(this.getScreenChildMesh().remove(this.mesh.screenPart),xo(this.mesh.screenPart),this.mesh.screenPart=new te.Tme)}renderScreenPart(e){let t=!e.screen_is_light&&!this.mesh.screenPart.userData.nonLightScreenPart||e.screen_is_light&&!e.screen_3d_glow_effect&&!this.mesh.screenPart.userData.basicLightScreenPart||e.screen_is_light&&e.screen_3d_glow_effect&&!this.mesh.screenPart.userData.glow3DLightScreenPart;if(!t&&e.screen_is_light&&e.screen_3d_glow_effect&&(this.mesh.screenPart.userData.screenProperties.screen_3d_glow_factor===e.screen_3d_glow_factor&&this.mesh.screenPart.userData.screenProperties.screen_3d_glow_spread===e.screen_3d_glow_spread||(t=!0)),t){this.unrenderScreenPart(),e.screen_is_light?e.screen_3d_glow_effect?this.mesh.screenPart=this.floorplan3DThis.createScreenPart3DGlowLight(this,e):this.mesh.screenPart=this.floorplan3DThis.createScreenPartBasicLight(this):this.mesh.screenPart=this.floorplan3DThis.createScreenPartMesh(this);const t=this.getItemCenter();this.setItemPosition(t),this.getScreenChildMesh().add(this.mesh.screenPart),this.mesh.screenPart.needsUpdate=!0}}};const Fe=class extends ke{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r)}placeInRoom(){}resized(){const e=this.getItemCenter();this.setItemPosition(new te.Pa4(e.x,this.halfSize.y+this.itemStartHeight,e.z))}moveToPosition(e){if(!this.isValidPosition(e))return e.y=this.halfSize.y+this.itemStartHeight,void this.showError(e);this.hideError(),e.y=this.halfSize.y+this.itemStartHeight,this.setItemPosition(e)}isValidPosition(e){const t=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData;return!!this.floorplan3DThis.props.mainComponentThis.floorFreeObjectPositionValidation(new te.FM8(e.x,e.z).divideScalar(this.floorplan3DThis.scaleFactor),t,this.halfSize.x/this.floorplan3DThis.scaleFactor,this.halfSize.z/this.floorplan3DThis.scaleFactor,-L(this.rotation))}isValidRotation(e){const t=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData,i=this.getItemCenter();return this.floorplan3DThis.props.mainComponentThis.floorFreeObjectPositionValidation(new te.FM8(i.x,i.z).divideScalar(this.floorplan3DThis.scaleFactor),t,this.halfSize.x/this.floorplan3DThis.scaleFactor,this.halfSize.z/this.floorplan3DThis.scaleFactor,-L(e))}};const Me=class extends ke{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.allowRotate=!1,this.wallOffsetScalar=0,this.isWallItem=!0,this.itemWall=null,this.floorWallsData=this.floorplan3DThis.floorplanFloors.find((e=>e.floorNumber===this.floorNumber)).wallData,this.walls3DArray=this.scene===this.floorplan3DThis.floorplan3DOnMapScene?this.floorplan3DThis.currentWalls3D:this.floorplan3DThis.floorplanViewWalls3D}depthDirectionOffsetTranslation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=this.floorplan3DThis.props.mainComponentThis.getOnWallItemDepthOffsetParams(this.object2D,this.object2D.additionalParams.depth3D/2,null,i),s=go(this.object2D,o.offsetValue,o.wall2D.angle);e.x+=t*s.offsetX,e.z+=t*s.offsetY}createItemWall(e,t){const i=new te.FM8(t.x,t.z).divideScalar(this.floorplan3DThis.scaleFactor),o=this.walls3DArray.find((t=>t.wall2D.wallId===e.wallId));return Yi(i,o.interiorLineEquation).distance<Yi(i,o.exteriorLineEquation).distance?{wall3D:o,wallPlane:o.interiorWallPlane}:{wall3D:o,wallPlane:o.exteriorWallPlane}}closestItemWall(){const e=this.getItemCenter();let t=new te.Pa4(e.x,0,e.z).divideScalar(this.floorplan3DThis.scaleFactor);this.depthDirectionOffsetTranslation(t,-1);const i=this.floorplan3DThis.props.mainComponentThis.editor.nearWall(new te.FM8(t.x,t.z),this.floorWallsData);if(i){if(this.addToWall){const e=this.object2D.angleSign,t=this.walls3DArray.find((e=>e.wall2D.wallId===i.wall.wallId));return 1===e?{wall3D:t,wallPlane:t.exteriorWallPlane}:{wall3D:t,wallPlane:t.interiorWallPlane}}return this.createItemWall(i.wall,e)}return null}removed(){null!=this.itemWall&&(this.itemWall.wall3D.removeWallObject(this,this.addToWall?"inWall":"onWall"),this.addToWall&&this.redrawWall())}redrawWall(){this.addToWall&&this.itemWall&&this.itemWall.wall3D.redrawWallExteriorInteriorPlanes()}updateSize(){this.wallOffsetScalar=this.halfSize.z,this.sizeX=2*this.halfSize.x,this.sizeY=2*this.halfSize.y}resized(){this.updateSize();const e=this.getItemCenter();this.itemWall?(this.boundToFloor&&(e.y=this.halfSize.y),this.boundMove(e),e.y+=this.itemStartHeight,this.setItemPosition(e)):this.boundToFloor&&this.setItemPosition(new te.Pa4(e.x,this.halfSize.y+this.itemStartHeight,e.z)),this.redrawWall()}placeInRoom(){const e=this.closestItemWall();if(e){const t=this.getItemCenter();this.changeItemWall(t,t,e,!0),this.updateSize()}}moveToPosition(e,t){if(t){const i=t.object.wall3D.interiorWallPlane.planeObject.uuid===t.object.uuid?t.object.wall3D.interiorWallPlane:t.object.wall3D.exteriorWallPlane;this.changeItemWall(e,t.point,{wall3D:t.object.wall3D,wallPlane:i})}this.boundMove(e),e.y+=this.itemStartHeight,this.setItemPosition(e),this.redrawWall()}getWallOffset(e){return-1*e*this.wallOffsetScalar}changeItemWall(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=t.clone().divideScalar(this.floorplan3DThis.scaleFactor);o&&this.depthDirectionOffsetTranslation(s,-1);const n=new te.FM8(s.x,s.z),a=this.floorplan3DThis.props.mainComponentThis.editor.nearWall(n,this.floorWallsData);if(a){let s=!0;if(!o||!this.position_set){const t=ho(this.object2D),i=this.object2D[t];this.floorplan3DThis.props.mainComponentThis.inWallonWallObjectForceJoinToWall(a.wall,a,n,this.object2D)?this.rotateItem(R(this.object2D.angle),-1):s=!1,i!==this.object2D[t]&&(this.object2D.additionalParams.width3D=this.object2D[t],this.resize(this.object2D.additionalParams.width3D,this.object2D.additionalParams.height3D,this.object2D.additionalParams.depth3D)),e.x=this.object2D.x*this.floorplan3DThis.scaleFactor,e.z=this.object2D.y*this.floorplan3DThis.scaleFactor}s&&(null!=this.itemWall&&(this.addToWall?(this.itemWall.wall3D.removeWallObject(this,"inWall"),this.redrawWall()):this.itemWall.wall3D.removeWallObject(this,"onWall")),i.wall3D.wall2D.wallId===a.wall.wallId?this.itemWall=i:this.itemWall=this.createItemWall(a.wall,t),this.addToWall?(i.wall3D.addWallObject(this,"inWall"),this.redrawWall()):i.wall3D.addWallObject(this,"onWall"))}}customIntersectionPlanes(){let e=[];const t=this.walls3DArray.filter((e=>e.floorNumber===this.floorNumber));for(let i=0;i<t.length;i++)e.push(t[i].interiorWallPlane.planeObject),e.push(t[i].exteriorWallPlane.planeObject);return e}boundMove(e){const t=this.itemWall.wallPlane.planeObject.uuid===this.itemWall.wall3D.interiorWallPlane.planeObject.uuid;let i=t?this.itemWall.wall3D.interiorLineCoords:this.itemWall.wall3D.exteriorLineCoords;i=i.map((e=>new te.FM8(e.x,e.y)));const o=Ki(i[0],i[1])*this.floorplan3DThis.scaleFactor,{transform3Dto2DMatrix:s,transform2Dto3DMatrix:n}=this.itemWall.wall3D.calculateWallPlaneTransformMatrices(i[0].multiplyScalar(this.floorplan3DThis.scaleFactor),i[1].multiplyScalar(this.floorplan3DThis.scaleFactor));e.applyMatrix4(s),e.x<this.sizeX/2+0?e.x=this.sizeX/2+0:e.x>o-this.sizeX/2-0&&(e.x=o-this.sizeX/2-0),this.boundToFloor?e.y=this.halfSize.y+.01:(e.y-=this.itemStartHeight,e.y<this.sizeY/2+0?e.y=this.sizeY/2+0:e.y>this.itemWall.wall3D.wallHeight-this.sizeY/2-0&&(e.y=this.itemWall.wall3D.wallHeight-this.sizeY/2-0)),e.z=this.getWallOffset(t?1:-1),e.applyMatrix4(n)}};const Ae=class extends Me{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.addToWall=!0}depthDirectionOffsetTranslation(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=this.itemWall?this.itemWall.wall3D.wall2D:this.floorplan3DThis.props.mainComponentThis.editor.nearWall({x:this.object2D.x,y:this.object2D.y},this.floorWallsData).wall,s=go(this.object2D,this.getAdditionalInWallItemDepthOffset(o,i),o.angle);e.x+=t*s.offsetX,e.z+=t*s.offsetY}getAdditionalInWallItemDepthOffset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.floorplan3DThis.props.mainComponentThis.getInWallItemDepthOffsetParams(this.object2D,e||this.itemWall.wall3D.wall2D,t).offsetValue}getWallOffset(e){return e*(this.itemWall.wall3D.wall2D.thick*this.floorplan3DThis.scaleFactor)/2-e*this.getAdditionalInWallItemDepthOffset(this.itemWall.wall3D.wall2D,this.floorplan3DThis.scaleFactor)}changeDoorHinge(e){this.floorplan3DThis.props.mainComponentThis.isDoorObject(this.objectType)&&(this.floorplan3DThis.props.mainComponentThis.setDoorObject2DHinge(this.object2D,e),this.meshScaleXSign*=-1,this.resize(this.object2D.additionalParams.width3D,this.object2D.additionalParams.height3D,this.object2D.additionalParams.depth3D))}};const Re=class extends Ae{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.boundToFloor=!0}};const Le=class extends Fe{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.obstructFloorMoves=!1,this.mesh.receiveShadow=!0}};const Be=class extends Me{constructor(e,t,i,o,s,n,a,r){super(e,t,i,o,s,n,a,r),this.boundToFloor=!0}},We=[{gradientStartColor:"rgb(245, 88, 71)",gradientStopColor:"rgb(255, 0, 0)"},{gradientStartColor:"rgb(228, 192, 110)",gradientStopColor:"rgb(255, 176, 0)"},{gradientStartColor:"rgb(136, 204, 108)",gradientStopColor:"rgb(96, 196, 55)"},{gradientStartColor:"rgb(119, 225, 244)",gradientStopColor:"rgb(0, 217, 255)"},{gradientStartColor:"rgb(79, 114, 166)",gradientStopColor:"rgb(40, 77, 126)"},{gradientStartColor:"rgb(102, 102, 102)",gradientStopColor:"rgb(170, 170, 170)"},{gradientStartColor:"rgb(250, 250, 250)",gradientStopColor:"rgb(234, 234, 234)"},{gradientStartColor:"rgb(249, 173, 103)",gradientStopColor:"rgb(249, 127, 0)"},{gradientStartColor:"rgb(167, 132, 217)",gradientStopColor:"rgb(137, 81, 218)"},{gradientStartColor:"rgb(223, 103, 189)",gradientStopColor:"rgb(226, 42, 174)"},{gradientStartColor:"rgb(60, 59, 59)",gradientStopColor:"rgb(0, 0, 0)"},{gradientStartColor:"rgb(226, 198, 149)",gradientStopColor:"rgb(198, 157, 86)"}],Ve=["None","Lounge","Lunchroom","Kitchen","Bathroom","Bedroom","Locker","Office","Hall","Loggia","Balcony","Terrace","Corridor","Garage"],Ne=[{title:"Color",fill:"#f9f3e4"},{title:"Unknown",fill:"#666666",width:256,height:256},{id:"concrete",title:"Concrete",fill:"url(#Concrete)",width:256,height:256},{id:"brick",title:"Brick",fill:"url(#Brick)",width:256,height:256},{id:"stone",title:"Stone",fill:"url(#Stone)",width:256,height:256},{id:"knauf",title:"Knauf",fill:"url(#Knauf)",width:256,height:256},{id:"wood",title:"Wood",fill:"url(#Wood)",width:256,height:256},{id:"glass",title:"Glass",fill:"url(#Glass)",width:256,height:256},{id:"plastic",title:"Plastic",fill:"url(#Plastic)",width:256,height:256},{id:"metal",title:"Metal",fill:"url(#Metal)",width:256,height:256},{id:"granite",title:"Granite",fill:"url(#Granite)",width:256,height:256}],Ee=[{field:"interiorPlaneMaterial",label:"Side 1:",validate:e=>q.isEmpty(e)||q.isHexColor(e),defaultColorValue:Ne.find((e=>"Color"===e.title)).fill,selectRefPropertyName:"interiorPlaneMaterialSelectRef",dropdownRefPropertyName:"interiorPlaneMaterialDropdownRef"},{field:"exteriorPlaneMaterial",label:"Side 2:",validate:e=>q.isEmpty(e)||q.isHexColor(e),defaultColorValue:Ne.find((e=>"Color"===e.title)).fill,selectRefPropertyName:"exteriorPlaneMaterialSelectRef",dropdownRefPropertyName:"exteriorPlaneMaterialDropdownRef"}],He=[{name:"Light",value:"light-v8"},{name:"Satellite",value:"satellite-v9"},{name:"Dark",value:"dark-v10"}],ze={1:ke,2:Fe,3:Re,4:Ae,5:Le,6:Be,7:Me},Ge=[2,3,5,6],Ue=[3,4,6,7],qe={1:"free",2:"floorFree",3:"inWall",4:"inWall",5:"floorFree",6:"onWall",7:"onWall"},Ke=["CCTV","hangingLight","fluorescent","ceiling-lamp","lamp2","ceilingFan","minispot","lightSource"],Ye=["frenchWindow2","frenchWindow85x200","window85x123","window85x163","turn-window","smallWindow2","window_2x3_frame_sill","window_deep","fixed_window_2x2","doubleOutwardOpeningWindow","doubleWindow126x123","doubleWindow126x163","doubleWindow2","window_double_2x3_frame_sill","doubleFrenchWindow2","doubleFrenchWindow126x200","window_2x4","window_2x6","window_4x5","window_3x1","window_4x1","window_2x1_medium_with_large_pane","sliderWindow126x200","window_2x1_with_sliders","window-08","window_shop","window_stain_glass","fixedWindow85x123","glassblock","serviceHatch","fivePanesWindowWithWallPart","rectangularFivePanesWindow","pictureWindow","simpleShutter","traditionalShutter","twoPartsShutter","fancyWindow","newWindowDk","windowFrostedGlass","window_shutter","window_double_3x3","door_window_thick_double_2x4","door_window_thick_double","door_window_thick","window_double_frame_sill","window_urban_neoclassic","window2","window-01","window-08-02","window-shutter","window_2x3_arched","window_2x3_regular","window_2x3","window_2x4_arched","window_4x3_arched","window_4x3"],Xe=["door","glass_door_framless","screen-door","puerta","craftsmanDoorClosed","sliderPocketDoor","doorFrame","double_door_2","double_door","double_plain_door_with_little_part","exterior-door-05","exterior-door-07","frontDoor","frontDoor2","glass_door","double_door_with_little_part","glassDoor2","japanesedoor","garage-door","garage-door2","emergencyGlassDoubleDoor","revdoor","elevator","elevator-door","slidingDoors","frontDoorDark","garageDoor","patioGlassDoorUnit","sixDoorFrenchStyle","frenchDoors","DianaWindow","accordionFoldDoors","garageDoor2","doorGlassPanels","door1","glassDoorsOpened","patioDoorOpened","patioDoor","patioSideDoor","fancyFrontDoor","door_glass","exterior-door-01","exterior-door-02","exterior-door-03"],Ze=["hangingLight","lamp2","pendantLamp","lustreBoule","ceiling-lamp","minispot","painting_light","track-lights","spotlight","wall-spotlight","wallUplight","wall_lamp","fluorescent","fluorescent-strip","lightSource","lightSource2","floorUplight","porch-light","street_light_modern","farola1","lampeHalogene","led_striplight","wallLight","bougeoir","neon","candleOrnament","deskLamp1","deskLight","ceiling_lamp_globo_feria","lamp_paraffin_feuerhand","lamp_wall_outside","classic-lamppost","flashlight","hanging-restaurant-light","park-light","pedestal-vase-lamp","wall-lamp-artwork","desk_lamp1","desk_lamp2","little_lamp1","little_lamp3","saloon_lamp","table_lamp","living_room_lamp1","living_lamp","chandelier-lamp","candelabre","candle"],Je=["washbasin_jay_hardy","bathroom3","hand-washbasin","stone-washbasin","ergonomic-washbasin","bathroom_vanity","modernVanity","washbasin","bathroom_sink","mobilettoLavaboWenge","wash_basin_corner","washbasinWithCabinet","islandBath","bathtub_jet_system","fittedBath","bath","corner_bathtub","bacADouchePlat","mixer-tap-for-shower","shower","doccia","shower_cabin","shower-cabin-with-seat","toilet_hang_round","japanese-toilet","toiletUnit","small-urinal","bidet","towel2","com_bath3","towel3","showerCurtain","barreAppuiCoude","barreAppui","folding-grab-bar","savon","com_bath2_jabon_pijo","potBrossesADent","secheCheveux","potty","toiletBrush","bathroom-tissue","pesePersonne","basin","bathmat","clothes-basket","clothes_line","clothes_washing_machine","clothesWasher","dryer_machine","fer","plancheARepasser","comb","cosmeticsPot","showerDoor","toiletPaperDispenser","toiletsUnit","flacon","showerStall","urinal","bath_jay_hardy","bathroomRadiator","lipStick","toilets_unit_jay_hardy","radiatorAndTowels","modernToilet","meubleSalleDeBain","bidon","robinet","parfumAmbiance","rasoir","shampoo","gelDouche","boiteDeMouchoirs","derouleurWC","tube","pareDouche","bathroomFurniture","towelMedicineCabinet","bath_L","bathroom_cupboard_mirror","towel_rack","tendaDoccia","barreAppuiL","towel-rack","showerHeadAndFaucet","mobilettoSpecchioBlu","mobilettoSpecchioWenge","mobilettowenge","water","bathroom4","bathroom1","double_vanity","com_bath","com_bath2_cepillo","com_bath2_esponja","com_bath2_peineta","com_bath2_soap","com_bath3_toalla","medicoscopia_bottle","medicoscopia_bottle2","medicoscopia_box","small_lavatory","folding-wall-seat","mixer-tap-for-bath-and-shower","mixer-tap-for-bath","shower-armchair","shower-chair","turkish-toilet"],Qe=["bedFlowers","air-mattress","bed3","bed","bed1","bed140x190","bed90x190","bedWithTexture","captains-bed","juniorBed","convertible-sofa-BZ-opened","bunkBed","bunkBed90x190","loftBed140x190","cornerBunkBed90x190","litMezzanine","litMezzanine2","mezzanine-bed","crib","adjustable-hospital-bed","armoireLotus","mobileCiliegio","mobileangoloCiliegio","mobileAngoloInterno","mobileAzzurro","corner","wardrobe","wardrobe2","changing-table","chest","kommode","petiteCommode","armoire","bedsideTable","bedsideTable2","comoCiliegio","mensolaCurvaAcero","pensileAcero","clothes-rack","clothes-hanger","clothes-horse","portemanteaux2","folded_clothes","futon","hanging-clothes1","backpack","casque","hospital-table-on-wheels","hotelSafe","sleepingBag","bootieSeparated","slippersSeparated","sneakersSeparated","mocassinSeparated","womanShoesSeparated","blocks","doll","doll-house","smiley","teddyBear","train","letters","housePuzzle","rubix2","bed2","caballito","cartoon_biplane","wardrobeWithSlidingDoors","cupboard","babyRockingBed","cardGame","briefcase","handbag","woodToy","carrito-de-madera","clock","suit","chessboard","lettoCloud","toyTrain","xylophone","petitReveil","p40","daybed","captainsBed","trundleBed","litParents","clicClacOuvert","lit","meubleChevet","suits_racked","childBed","hanging-clothes2","comodinoSinistroCiliegio","lettoCiliegio","mensolaCiliegio","comodinoAzzurro","lettoAzzurro","lettoSoppalcoAzzurro","mensolaAcero","scaletta","iron_bed","wardrobe1","children_bed","kids_shelves","robe","casquette","chapeau","short-shadows","pantalon-shadows","blouson","jupe","jupe-doeskin","chaussette","montre-with-pose","montre","bague","gant-textured","dressing-table","day_bed_frame","tasDeVetements","oreiller","flipFlops"],$e=["awning_bracket","barnum","umbrella","hangingUmbrella","pergola","deckChair","hammock","cafe-chair","silla_teca","ext_table","cafe-table","rattanArmchair","rattanSofa","rattanTable","picnic_table","painted-bench","barbecue","grillNgauge","basketball_net_and_board","football-goal","big-football-goal","campingTent","campingLamp","swimming-pool","diving-board","pool_ladder","round-swimming-pool","jacuzzi","sandpit","motorbike","trampoline","child_swing","parque","bonecoDeNeve","fence","iron-railing-separated-hooks-2","gardeCorps","railing","railing_glass","privacyFence2","portillon","fence_grid","fence_picket","pedestrianRailing1","pedestrianRailing2","gate_grind","column_balustrade","column_balustrade_corner","waterFountain","fountain","greenhouse","garden-hut","dog-house","boiteALettre","feu-de-signalisation-simple","stoneLantern","outdoorLamp","window_flat_roof_skylight_bubble","porch-column-03","rainGutterPart1","rainGutterPart2","passage-pieton","croisement2et2","routeCourbe2VoiesAvecTrottoirs90Deg","route2VoiesAvecTrottoirs","voiesFerreesAiguillage","voiesFerreesCourbe20m","voiesFerreesDroit10m","birch","bush","hedgeTextured","lavender-bush","palm","pansy","tree","lombardyPoplar","pine","plantie","rock1","rock2","rock3","roses-bush","bump","wheelie_bin","flowerBox","mofx_mailbox","relaxChair","bench","childHut","childSwing","seesaw","wheelbarrow","lantern","chair_deck","poolLounge","rowboat","transat","table_footrest","fencepost1","fencepost2","borderfence-main","borderfence-small","dogHouse","blackDeckTable","gardenUmbrella","blackDeckChair","privacyFence","canapeJardin","swimmingPool","balancelle","cloture","fence_grid_gate","bordure","gate_iron","portail","etendoirLinge","flag_hinged_pole","parasol_str","traffic_light_ped","concrete-bench","park-trashcan","porch-column-01","porch-column-02","residential-trashcan","spray-bottle","concrete-sidewalk","fire-hydrant","hose-reel","ext_chair","littlebank","wood_bank","beach_chair","letters_box","rectangle-swimming-pool","garden-faucet","passage-a-niveau","rails","fleche-tout-droit","fleche-tourner-a-droite-et-direct","fleche-tourner-a-droite","stationnement-creneau","stationnement-en-bataille","stationnement-epi-45","stationnement-epi-60","stationnement-epi-75","high-hedge","hedge","acacia","bamboo","ficusTree","bluePineSnow","coconutTree","coconutTreeBended","copperBeech","cypress","japaneseMaple","poplar","peachBlossom","pineSnow","sabalPalmeto","sycamoreMaple","tasDeTerre","tasDeSable","tasDeGravillons","tasDeGravats","voiesFerreesCourbe10m","voiesFerreesCourbe40m","voiesFerreesDroit1m","routeCourbe2VoiesAvecTrottoirs26m","routeCourbe1VoieAvecTrottoirs26m","routeCourbe2VoiesAvecTrottoirs6.5m","routeCourbe1VoieAvecTrottoirs6.5m","routeCourbe1VoieAvecTrottoirs13m","routeCourbe2VoiesAvecTrottoirs13m","route1VoieAvecTrottoirs","croisement1et1","croisement1et2","pont2Voies","pont1Voie","separateurDeVoie","pilierPont1Voie","autoroute2Voies","routeCourbe1VoieAvecTrottoirs90Deg","filElectrique","poteau-en-beton","poteau-en-bois","feu-de-signalisation-avec-signalisation-au-dessus","hydrangea","blackTupelo","quakingAspen","fanPalm","sassafras","weepingWillow"],et=["lowerCabinet","lowerCornerCabinet","drawersCabinet","smallUpperCabinet","upperCabinet","sinkCabinet2","kitchenSmallLowerCabinet","kitchenLowerCabinet","kitchenIsland","kitchenDrawersCabinet","kitchenSink","kitchenUpperCabinet","kitchenSmallUpperCabinet","kitchenGlassDoorCabinet","kitchenCabinet","cabinet","cabinetWithBasin","drawers","upperCabinet2","highCabinet","meubleMicroOnde","sink","islandExtension","tableCuisine","meubleChaussures","dishwasher","fridge","fridgeFreezer","refrigerator","largeFridge","rangeHood","chest-freezer","stove1","stove","largeStove","oven","ovenFront","hood","kitchenHood","induction-cooker-2-zones","induction-cooker-4-zones","mano_cooktop","lavastoviglie","doubleOven","sgabello","tabouretBar","stool2","baby_high_chair","boiler","bouilloire","toaster","coffeeBrewer","percolateur","coffee-maker","cooker","electronicScale","autocuiseur","sandwichMaker","small-oven","spiceTower","saltShaker","grillePain","towel","poubelleInox","tray","kitchenKnife","kitchenKnifeStandSet","poele","casserole","paperTowelHolder","bouteille","bolDeRiz","plate-and-ustensils","ensemble-assiette-couteau-fourchette-cuillere-verre","kitchen-glass-jar-high","cocktailGlass","glass","coffee-mug","coffeePress","choppingBoard","baguettes","bowl","mamadeira","utensilsPot","aspirateur","broom","bucket","eponge","food-box-pasta","food-box-corn-flakes","tetrapak","container","caffe_final","butter","cupcake","birthday_cake","bowlWithFruits","bowlWithSalad","bread","apples","baguettePain","toast","steak","roasted-chicken","citrouille","pizza","hotDog","hamburger","frenchFries","kitchenaid","knifeStandSwap","plasticCup","silla2","yogurtBottle","beerGlass","upperCornerCabinet","upperShelves","beer_bottle","coffee_cup","fork","kitchenblender","kitchenTools","knife","largePan","microwave","spoon","washing_machine","breadBox","kitchenScale","espressokettle","boiteMetal","chaiseCuisine","verreFlute","glassDoorKitchenCabinet","verreLongDrink","microOnde","mug","assietteVerresCouverts","smallGlass","carafeEau","verreEau","carafeVin","verreVin","glassdoorCabinet","mobile_cucina_60x60","lavello_doppio_90x60","cassetti_cucina_45x60","isola_cucina_150x90","pensile_cucina_45x90","pensile_cucina_60x70","capa","piano_cottura","frigorifero","ceramicHob","cornerCabinet","3DrawerCabinet","2GlassDoorCabinet","2DoorUpperCabinet","2DoorLowerCabinet","1GlassDoorCabinet","1DoorUpperCabinet","1DoorLowerCabinet","refridgerator","pantry","kitchenSinkWithMarble","cornerChina","couteauADecouper","couteauAPain","plancheADecouper","barCusisine","frigo","desserte","casierBouteilles","cookingPlate","gaz","washer_dryer","ashtray","bullet-trash-can","12-oz-glass","highball-glass","oil-servers","dinner-plate","bread-plate","propane-stove","red-wine-bottle-01","angolo","cucina","curva","curvaEsterna30","curvaInterna30","doppio","pensileAngolo","pensileCurva","pensileDoppio","pensileVetro","pianoIsola","singolo","lavello","cassettiera","mobilettoGrande","mobilettoPiccolo","gasHob","old_jar","pottery","sushi_tray","kitchen_tool1","kitchen_tool2","kitchen_tool3","kitchen_tool4","wine_bottle","bar_chair","kitchen_stool","coffee_machine","creamer","cup","sugar","teapot","shovel","shopping-basket","squeezer","deepFryerWithFrenchFries","stoneGrillDevice","food-spaghetti-box","kitchen-glass-jar-low","waitress-table-on-wheels"],tt=["clear_sofa","beige_sofa","L_shaped_sofa","cornerSofa","sofa","couch2","futon-couch","simple_sofa","sofa1","sofa2","convertible-sofa-BZ-closed","clicClac","bookcase","dining_room","cabinet2","elementHautSalon","meubleHiFiHaut","stainlessSteelShelf","shelves_storage_steel","shelves_storage_wood","dresserWithDrawers","full-bookcase","tourRangeCD","glassDoorCabinet","pinewoodRackLowHeight","pinewoodRackMediumHeight","etageres","etagereEnfant","longcase_clock","winchesterArmchair","rocking_chair","fotel","armchair","armchair2","armchair3","chair_granmother","chair","kitchenChair","thonet","chair3","chair4","white_kitchen_chair","childChair","children_chair","foldingChair","folding_chair","chaiseOrange","osakaChair","ryokanChair","stool_small","green_stool","stool","pianoBench","tabouretPiano","puff","black_table","folding-table","children_table","coffeeTable","coffee_table","table_wood_and_iron","tableBasse2","couchTable","round-table","roundTable","squareTable","table-on-trestles","white_kitchen_table","table","table2","table-with-leaning-feet","tableCuisine2","glass-dining-table","meubleHiFiBas","table_half_round","oakTable","tableWithTablecloth","dresser","dvd","playstation4","ps4-joystick","tv-remote-control","video-projector","wirelessOfficePhone3","aquarium","filledBookcase","fireplace","cheminee","fireplace1","fireplace2","AtorHaut","furnace","guitar","piano","pianoDroit","MIDI-keyboard","batterie","microphone-with-foot","carpet","oriental-rug","round-carpet","desklamp","lamp","little_lamp2","JapaneseLantern","luckyBamboo","bonsai-tree","boston-fern","cactus","decorativePlant","flowers","mediumIndoorPlant","orchids","augalas","maceta","plant","roses","succulentPlant","yuccaPlant","christmas_tree","deer","oakChair","pianoAQueue","plasticChair","shelves","televisionCabinet","verticalShelves","electricGuitar","littlePlant","sillaBlanca","couch","modernArmchair","antiqueChair","chairWithCushion","winchesterSofa","designChair","arbolito","cafe_set_mota_chair","cafe_set_mota_table","cafe_set_tonon_chair","cafe_set_tonon_table","ella_chair_f","leaf_chair","spatifilum","tvStand","armchair1","spider_plant","tulip","white_lily","plaidChair","sofa3","tulips","couch3","barStool","bookcase2","computerWorkstation","cornerWorkstation","bocalPoisson","tableGnome","rectangularTable","squareCoffeeTable","tableBasseBois","woodTable","priseTV","petiteTableSalon","bibliothequeDroite","allenOrgan","highBoyDresser","smallbookshelves","salontafel","couchTwoSeats","kleed_grieks","pinewoodRackFullHeightHalfWidth","pinewoodRackFullHeight","latticeChair","meubleMural","CDrack","displayCabinet","hallTable","potplant2","roundTable2","shelving","sofa3Single","sofa4","couchPoofyPillows","largeCouch","singleChair","throwPillow","counter","tableBasse","pancaFratinoSing","tavoloFratino","chair_high","shelves_storage_wood2","table_granmother_marble","armchair_wing","bar_stool","dropLeafTable","mid-century-chair","chair-ottoman","bar-stool","dining-chair","utility-shelving","mid-century-bench-sofa","mid-century-sofa","credenza","sedia","tavolino","tavolo","box_room","saloon_table","table3","table4","wooden_table_office","tubular_chair","metal_glass_table","glass_table_office","desk_table","bar_table","beige_sofa_2seats","burlap_sofa","leather_sofa","living_room_table","modern_armchair","plastic_chair","calla_lily_with_roses","sofa_white_beige","ficus","coffee-table2","lavender"],it=["box","cylinder","sphere","smoke-detector","emergencySign","estintore","antenaTV","antenaParabolica","external-unity-air-conditioning","solar_panel_140W","intercom","headphones","mini_stereo","speaker2","reflex_camera","abdominalBench","treadmill","indoor-bike","punching-ball","flipper","table_football","dart_game","poolTable","table_tennis","ballonFoot","tatami","livreAvecReliure","book","livres","foldedNewspaper","revue","pileMagazines","bdOuverte","revueOuverte","cardboard-box","crate","litiere","lockedLocker","gift","suitcase","putekasse","cageFuret","arbreAChat","clock2","corniceConcaveCorner","cornice","doormat","folding-armchair","rectangularMirror","ovalMirror","mirror","frame","frame1","frame3HorizontalNorwayPhotos","frame3VerticalSummerPhotos","HaiVanPassFrame","ButterflyFrame","frame_square","cendrier","complements2","keys","glasses","hotWaterRadiator","radiateur","radiator3","radiateurVertical","radiator1","electricRadiator","electric_water_heater","gaz_water_heater","entry-bell-ring","entry-bell-speech-unit","marteau","tournevis","square-double-switch","square-switch","square-plug-TypeB","square-plug-TypeE","double-switch-whites","switch-whites","plug-TypeB-whites","plug-TypeE-whites","electricOutlet","electricOutlet2","boucheVMC","step-ladder-metal","mower","sewing_machine","pallet","wood_logs","umbrellaFolded","vase3","jar","wheelchairSymbol","electricWheelchair","wheelchair","walker-with-wheels","wall_handrail","japanese_style_screen","shippingContainer","radiator2","radiator","speaker3","tableFan","ammoBox","barrel","basketball","fireExtinguisher","numberLock","cuckooClock","riggedFan","tennisRacket","radio","wallDoubleSocket","wallSocket","wire-coathanger","sunglasses","tableTennisBat","modernRadiator","mp3Station","workbench","fitnessTower","fut","pompeBiere","curtainRod","priseTelephonique","rampe","tableauMulet","tableauVisage","tableauVisage2","tableauVisage3","tableauYing","prise","railing1","roundedEdgesRailing","roundedEdgesRailing1","scie","rampeArcCercle","interrupteur","tableauElectrique","horlogeUbuntu","venetianBlind","etau","portemanteaux","arch","AntelopeCanyonFrame","EiffelTowerFrame","InariFrame","MontBlancFrame","lightSwitch","smallWroughtIronRails","wroughtIronRails","pavesDeVerre","pile","polygonalRoof","toitureArdoiseRouge","TorontoOntarioPlaceFrame","TigerFrame","NiagaraFallsFrame","VeniceFrame","picture","guacal","LakeMoraineFrame","SquirrelFrame","StatueOfLibertyFrame","VaticanMuseumFrame","EtretatFrame","ColoredFountainFrame","HorseShoeBendFrame","TucanFrame","YosemiteFrame","WaterLilyFrame","ruffledVase","radiator_7section","bd","livreJava","sh3dMag","SweetHome3DKompakt","enceinteColonne","AtorArriere","bathroom_fan","frame_horizontal","frame_vertical","frame3HorizontalMomijiPhotos","frame3VerticalTowerPhotos","ladder_simple","ladder_water","plastic_storage_box","sauna_120x120","vent_round","staircase_handrail_hor","metalBeam","pwdRamp","iron-railing-02","recycling-bin","tape-measure","trunk-large","newspaper","vase1","vase2","vase5","frame2","basic_camera","electric_water_heater_big","mp3_base_for_ipad","stereo_amplifier","open-cardboard-box","step-ladder-wood","wall-hanger","iron-railing-separated-hooks-1","iron-railing-separated-hooks-3","scie-egoine","rouleau-de-ruban-adhesif","pelle","cone","perceuse-electrique","meuleuse-electrique","billet-10-euros","billet-20-euros","billet-50-euros","rounded-antenna","rounded-dimmer","rounded-double-switch","rounded-plug-TypeA","rounded-plug-TypeB","rounded-plug-TypeCFlat","rounded-plug-TypeE","rounded-plug-TypeG","rounded-RJ-45","rounded-switch","square-antenna","square-dimmer","square-plug-TypeA","square-plug-TypeCFlat","square-plug-TypeG","square-RJ-45","antenna-whites","dimmer-whites","plug-TypeA-whites","plug-TypeCFlat-whites","plug-TypeG-whites","RJ-45-whites","chimney","round-chimney","pince-coupante","parpaing","cageALapin","roueAvecJante","newspapersPile","openedNewspaper","safeOnFeet","fil-electrique-1m","pileRevues","walker"],ot=["angolo160W","angolo198W","angolo80W","mobile45160W","mobile45198W","mobile4580W","cassettieraW","office_furniture1","office_box","chair2","office_chair","chair_office_y","desk","lbDesk","office_desk","bureauInfoOuvert","wooden_office_pear_table","bureau3","pcstul","inkjet_and_scanner_printer","souris","tourPC","phone","imprimanteFaxPhotocopieur","penbox","pencil1","water_cooler","whiteBoard","lamp_office","workLamp","dustbin","cissors_swap","ruler","technicalTable1","technicalTable2","textMarker","kalender","biurko3","sef-kasa","simpleDesk","officeTable","classSeat","armChair2","bureauInformatique","clavier","bigCornerDesk","plantersDesk","stylo","secretarysDesk","desk2","officeChair","officeChair2","officeChair3","escritorio","bureauEcolier","invoice","bureauInfoClair","chair_office_x","scissors","office-chair","custom-desk","filing-cabinet","stapler","raccordo80W","scrivania160W","mobile90160W","mobile90198W","mobile9080W","kids_desk_chair","kids_desk_table","kids_wooden_desk","wooden_office_alder_table","wooden_office_pear_table_rect","wooden_office_teak_table","bandeja","pencil2"],st=["staircase_90_bottom","curveStaircase","staircase_180_long","escalator","staircase_180_landing","staircase_90_landing","stairs_90_closed_legal_high","stairs_rail","stairs_180_circular_notopstep_rail","spiralStaircase","staircase_360_circle","stairs_180_square","staircase","stair_ladder_loft","staircase_samba_265x150x85","stair_straight_open_stringer","staircase_ladder_steep","staircase_90_top","staircase_270_box","staircase_u2h","grandStaircaseDark","escalierColimacon2","outdoor_staircase","stairs_topcurve_90","staircase_90_high_open","staircase_straight","stairs_legal","stairs_spiral","quarterSlope","home-lift","stair-lift-rail","stair-lift"],nt=["seat_leon","smart-car","sportive","break","decapotable","monospace","renault-scenic","pickup","4x4","renaultKangoo","van","truck","dafTruck","scooter","bicycle","scooter2","remorque","caravane","stroller","bus","cityBus","tramway","locomotive","wagon","forkLift","peterbilt","bike","fordFocus","peugeot103","concept-sedan-01v2","concept-sedan-02","concept-sedan-02-sport","VW-new-beetle","concept-sedan-01v1","peugeot-308","yamaha-yzr-r6","tricycle","chevrolet","skateboard","suv2","carSegmentA"],at=["ceilingFan"],rt=["window-blinds","cover_outdoor1","storeCalifornien","curtain","blind","curtains"],lt=["man","mannequinMale","boyStanding","male03","male01","male02","holdingMale01","mannequinBrunette","female01","female02","female03","girlStanding","holdingFemale01","holdingFemale02","holdingFemale03","nourrison","boySitting","sitMale01","sitMale02","sitMale03","sitFemale03","girlSittingTable","sitFemale02","girlSittingGround","boyLying","lyingDownMale02","lyingDownMale01","lyingDownFemale01","dog","cat","siameseCat","rabbit","horse2","chicken","bulldog","horse","female-01-casual-clothing","male-01-suit","sitFemale01","fille","boy"],ht=["internal-unity-air-conditioning"],ct=["CCTV","surveillanceCamera"],dt={CCTV:{cameraLensMeshName:"Sphere",rotationYAngleDegMin:-180,rotationYAngleDegMax:180,modelRotationYOffsetDeg:0,modelMirroredRotationYSign:-1,modelRotationYAngleSign:-1,rotationXAngleDegMin:-90,rotationXAngleDegMax:90,modelRotationXOffsetDeg:20,coverage2DAreaOffsetAngleDeg:180},surveillanceCamera:{cameraLensMeshName:"sweethome3d_opening_on_hinge_1_Cubo_Cubo.007",rotationYAngleDegMin:-90,rotationYAngleDegMax:90,modelRotationYOffsetDeg:-33,modelMirroredRotationYSign:-1,modelRotationYAngleSign:1,rotationXAngleDegMin:-90,rotationXAngleDegMax:90,modelRotationXOffsetDeg:0,coverage2DAreaOffsetAngleDeg:0}},pt=["wall-flat-tv","curvedTVForTable","curvedWallOLEDTV","flatTV","tvUnit","led_tv","ecran16_9","TVCenter","tv","contemp_living_room","laptop","monitorLCD","portable","apple-ibook-2001","apple-imac-1998","apple_pc","iphone","mobile","tablet","intercom_with_screen","thermometer","appleIpod"],mt=function(e){return{targetChildName:e,offsetLeft:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,offsetRight:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,offsetTop:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,offsetBottom:arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,offsetDepth:arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,rotationXDeg:arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,useCenterPoint:arguments.length>7&&void 0!==arguments[7]&&arguments[7],screenPartDepthScaleFactor:arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,offsetDepthWorld:arguments.length>9&&void 0!==arguments[9]?arguments[9]:0}},ut={"wall-flat-tv":mt("tv-screen_Cube.003",0,0,0,0,0,0,!1,1,1),curvedTVForTable:mt("Screen"),curvedWallOLEDTV:mt("Plane.002"),flatTV:mt("Screen_Cube.001",0,0,0,0,0,0,!1,1,1),tvUnit:mt("TV",.1,.1,.1,.3),led_tv:mt("tv_set_Circle",.02,.02,.026,.185,-.375),ecran16_9:mt("sweethome3d_window_pane",0,0,0,0,0,0,!1,1,1),TVCenter:mt("Screen",0,0,0,0,0,0,!1,1,1),tv:mt("tv_Cube_tvblack",0,0,0,0,0,0,!1,1,1),contemp_living_room:mt("tv_Cube.018",.055,.055,.065,.215),laptop:mt("Plane.003_Plane.001",0,0,0,0,0,0,!1,.2,.2),monitorLCD:mt("monitorLCD",.06,.06,.041,.3,-.38),portable:mt("dalle",0,0,0,0,0,-18,!0,.2,1),"apple-ibook-2001":mt("sweethome3d_opening_on_hinge_1_iBook_lid_LCD",0,0,0,0,0,-10,!0,.2,.2),"apple-imac-1998":mt("iMac",.1,.1,.08,.28,-.065,-15,!1,.2),apple_pc:mt("applemonitor_Circle.003_screen",0,0,0,0,0,-7,!0,.2,.3),iphone:mt("iphone_Plane",.05,.05,.05,.05,.35,-90,!0,.05,.2),mobile:mt("lcd_Plane",0,0,0,0,0,-90,!0,.05,.1),tablet:mt("screen_Cube.001",0,0,0,0,0,-90,!0,.05,.2),intercom_with_screen:mt("Cube",.02,.37,.07,.57,-.41,0,!1,.05),thermometer:mt("Plane.001_Plane.005",0,0,0,0,0,0,!1,.05,.1),appleIpod:mt("fond_inox",.05,.05,.05,.05,.5,-90,!0,.05,.05)},gt=[],ft=["craftsmanDoorClosed","door","exterior-door-05","exterior-door-07","garage-door2","glass_door","glass_door_framless","puerta","double_door_with_little_part","double_door_2","doubleFrenchWindow2","doubleWindow2","fixed_window_2x2","frenchWindow2","smallWindow2","window_2x1_medium_with_large_pane","window_2x1_with_sliders","window_2x4","window_2x6","window_3x1","window_4x1","window_4x5","window_deep","window_double_2x3_frame_sill","awning_bracket","fireplace1","fireplace2","curvedWallOLEDTV","wall-flat-tv","ergonomic-washbasin","wash_basin_corner","toiletBrush","turkish-toilet","bathroom_vanity","highCabinet","largeFridge","largeStove","refrigerator","sinkCabinet2","dishwasher","stove1","barreAppuiCoude","barreAppui","folding-grab-bar","toilet_hang_round","mixer-tap-for-shower","shower","stone-washbasin","bathroom-tissue","towel2","com_bath3","towel3","small-urinal","bathroom3","awning_bracket","basketball_net_and_board","entry-bell-ring","entry-bell-speech-unit","window_shutter","doubleOven","kitchenGlassDoorCabinet","upperCabinet","upperCabinet2","hood","kitchenHood","oven","rangeHood","kitchenSmallUpperCabinet","smallUpperCabinet","towel","tray","glassDoorCabinet","stainlessSteelShelf","clock","clock2","curtain","curtains","dart_game","emergencySign","ButterflyFrame","frame","frame3VerticalSummerPhotos","frame3HorizontalNorwayPhotos","HaiVanPassFrame","intercom","intercom_with_screen","mirror","ovalMirror","wheelchairSymbol","radiator3","rectangularMirror","smoke-detector","square-double-switch","frame_square","square-switch","square-plug-TypeB","square-plug-TypeE","surveillanceCamera","double-switch-whites","wall_handrail","switch-whites","plug-TypeB-whites","plug-TypeE-whites","window-blinds","radiator1","stairs_rail","hand-washbasin","washbasin_jay_hardy","external-unity-air-conditioning","internal-unity-air-conditioning","kitchenUpperCabinet","drawersCabinet","lavastoviglie","AtorHaut","putekasse","doccia","screen-door","elevator","sixDoorFrenchStyle","accordionFoldDoors","glassDoorsOpened","window_2x3_arched","window_2x3_regular","window_2x3","window_2x4_arched","window_4x3_arched","window_4x3","frontDoor","door_glass","elevator-door","sliderPocketDoor","doorFrame","double_door","double_plain_door_with_little_part","frontDoor2","glassDoor2","revdoor","japanesedoor","garage-door","emergencyGlassDoubleDoor","garageDoor2","frenchDoors","patioGlassDoorUnit","garageDoor","slidingDoors","frontDoorDark","door1","patioDoorOpened","exterior-door-01","exterior-door-02","exterior-door-03","fancyFrontDoor","patioDoor","patioSideDoor","doorGlassPanels","DianaWindow","frenchWindow85x200","window85x123","window85x163","turn-window","window_2x3_frame_sill","doubleOutwardOpeningWindow","doubleWindow126x123","doubleWindow126x163","doubleFrenchWindow126x200","sliderWindow126x200","window-08","fixedWindow85x123","glassblock","serviceHatch","fivePanesWindowWithWallPart","rectangularFivePanesWindow","pictureWindow","simpleShutter","traditionalShutter","twoPartsShutter","fancyWindow","newWindowDk","windowFrostedGlass","window_double_3x3","door_window_thick_double_2x4","door_window_thick_double","door_window_thick","window_double_frame_sill","window_urban_neoclassic","window2","window-01","window-08-02","window-shutter","window_shop","window_stain_glass"],bt=["door","double_door","double_plain_door_with_little_part","exterior-door-05","exterior-door-07","frontDoor2","glassDoor2","glass_door","double_door_with_little_part","frontDoorDark","door1","patioDoor","door_glass","exterior-door-01","exterior-door-02","exterior-door-03","double_door_2","elevator","frenchDoors","doubleFrenchWindow2","doubleWindow2","frenchWindow2","smallWindow2","window_2x1_medium_with_large_pane","window_2x4","window_2x6","window_3x1","window_4x1","window_4x5","external-unity-air-conditioning","internal-unity-air-conditioning"],wt={sixDoorFrenchStyle:!0,accordionFoldDoors:!0,glassDoorsOpened:!0,window_urban_neoclassic:!0},Ct={revdoor:!0},xt={lightSource:!0},yt={lightSource:{model3DCreationMethod:"createLightSourceMesh"}},St=["christmas_tree"],_t={christmas_tree:{startFactor:.25,endFactor:.9,lightDistanceMeters:.3}},Dt=(e,t,i,o,s,n)=>({dimensions:{width3D:e,depth3D:t,height3D:i},author:o,itemType:n,title:s}),vt={doubleFrenchWindow2:Dt(150,25,221,"Seber Rider","Double French window",4),doubleWindow2:Dt(150,25,126,"Seber Rider","Double window",4),fixed_window_2x2:Dt(60,16,60,"Ola-Kristian Hoff","Fixed small window",4),smallWindow2:Dt(100,25,76,"Seber Rider","Small window",4),frenchWindow2:Dt(100,25,221,"Seber Rider","French window",4),"turn-window":Dt(59,13.5,102,"Scopia","Turn window",4),"window-08":Dt(62.6,16.6,128,"Kator Legaz","Double hung window",4),window_2x1_medium_with_large_pane:Dt(110,31.3,130,"Scopia","Double window with large pane",4),window_2x1_with_sliders:Dt(188,25,218,"Scopia","Sliding window",4),window_2x3_frame_sill:Dt(56,35,110,"Ola-Kristian Hoff","Window 2x3",4),window_2x4:Dt(108.5,31.3,200,"Scopia","Double window 4 panes",4),window_2x6:Dt(108.5,31.3,218,"Scopia","Double French window small panes",4),window_3x1:Dt(188,32.2,218,"Scopia","Triple French window",4),window_4x1:Dt(250.3,32.2,218,"Scopia","Quadruple French window",4),window_4x5:Dt(160.3,32.2,218,"Scopia","Quadruple French window small panes",4),window_deep:Dt(105,60,150,"Ola-Kristian Hoff","Deep window",4),window_double_2x3_frame_sill:Dt(123,25,110,"Ola-Kristian Hoff","Double small window 2x3 panes with sill",4),window_shop:Dt(180,15,120,"Ola-Kristian Hoff","Shop window",4),window_stain_glass:Dt(80,16,120,"Ola-Kristian Hoff","Window stain glass",4),glassblock:Dt(21,8.8,168,"RonnieTandriady","Glass blocks",4),doubleFrenchWindow126x200:Dt(132,34,210,"eTeks","Double French window",4),doubleHungWindow80x122:Dt(81,27,128,"eTeks","Double-hung window",4),doubleOutwardOpeningWindow:Dt(115.2,26,134,"eTeks","Outward opening window",4),doubleWindow126x123:Dt(132,34,134,"eTeks","Double small window",4),doubleWindow126x163:Dt(132,34,174,"eTeks","Double window",4),fixedWindow85x123:Dt(91,27,134,"eTeks","Fixed window",4),frenchWindow85x200:Dt(91,34,210,"eTeks","French window",4),sliderWindow126x200:Dt(132,31.5,210,"eTeks","Slider window",4),window85x123:Dt(91,34,134,"eTeks","Small window",4),window85x163:Dt(91,34,174,"eTeks","Window",4),roundWindow:Dt(91,25,91,"eTeks","Round window",4),fixedTriangleWindow85x85:Dt(91,27,91,"eTeks","Fixed triangle window",4),halfRoundWindow:Dt(91,25,46,"eTeks","Half round window",4),serviceHatch:Dt(50,16,50,"eTeks","Service hatch",4),fivePanesWindowWithWallPart:Dt(213.2,11.6,174,"Pencilart","Five panes window",4),rectangularFivePanesWindow:Dt(213.2,12,133.19992,"Pencilart","Five panes window",4),pictureWindow:Dt(213.2,54.3,135.8,"Pencilart","Picture window",4),simpleShutter:Dt(61,5,124,"Pencilart","Simple shutter",4),traditionalShutter:Dt(61,5,124,"Pencilart","Traditional shutter",4),twoPartsShutter:Dt(61,5,124,"Pencilart","Two parts shutter",4),fancyWindow:Dt(60.9,5.6,128,"Pencilart","Fancy window",4),newWindowDk:Dt(60.9,3.4,94.9,"Pencilart","Window",4),windowFrostedGlass:Dt(60.9,2.8,94.9,"Pencilart","Window frosted glass",4),window_shutter:Dt(43.9,2.9,129,"Ola-Kristian Hoff","Window shutter",4),window_double_3x3:Dt(135,16,90,"Ola-Kristian Hoff","Double small window 3x3 panes",4),door_window_thick_double_2x4:Dt(160,23,210,"Ola-Kristian Hoff","Double door window small panes",4),door_window_thick_double:Dt(160,23,210,"Ola-Kristian Hoff","Double door window",4),door_window_thick:Dt(80,23,210,"Ola-Kristian Hoff","Door window",4),window_double_frame_sill:Dt(123,25,110,"Ola-Kristian Hoff","Double small window with sill",4),window_urban_neoclassic:Dt(200,60,220,"Ola-Kristian Hoff","Neoclassic window",4),window2:Dt(100,25,126,"Seber Rider","Window",4),"window-01":Dt(55.3,16.6,128,"Kator Legaz","Double-hung window",4),"window-08-02":Dt(62.6,16.6,128,"Kator Legaz","Double-hung window",4),"window-shutter":Dt(30.6,1.8,125,"Kator Legaz","Window shutter",4),window_2x3_arched:Dt(108.5,31.3,226,"Scopia","Double arched window",4),window_2x3_regular:Dt(108.5,31.3,200,"Scopia","Double window 3 panes",4),window_2x3:Dt(108.5,31.3,218,"Scopia","Double French window 3 panes",4),window_2x4_arched:Dt(108.5,31.3,229,"Scopia","Double arched window",4),window_4x3_arched:Dt(160.3,32.2,226,"Scopia","Quadruple arched window",4),window_4x3:Dt(160.3,32.2,218,"Scopia","Quadruple French window 3 panes",4)},Tt={craftsmanDoorClosed:Dt(100.9,18.7,209.6,"Mchnz","Craftsman door",3),door:Dt(91.5,14.5,208.5,"eTeks","Door",3),double_door:Dt(176,17.5,210,"Scopia","Double door with panes",3),double_plain_door_with_little_part:Dt(132.7,17.5,210,"Scopia","Double door with small part",3),"elevator-door":Dt(185.6,21.5,244.9,"Scopia","Elevator door",3),emergencyGlassDoubleDoor:Dt(219.1,28.4,210,"Siath","Emergency glass double door",3),"exterior-door-05":Dt(99,18.5,205,"Kator Legaz","Exterior door",3),"exterior-door-07":Dt(102,18,205,"Kator Legaz","Exterior door",3),frontDoor2:Dt(112,20,216,"Seber Rider","Front door",3),"garage-door":Dt(391,26,221.3,"Scopia","Garage door",3),"garage-door2":Dt(441.2,32,216.7,"Scopia","Garage door",3),glassDoor2:Dt(84.5,14.1,204,"Scopia","Glass door",3),glass_door:Dt(104.4,17.5,210,"Scopia","Glass door",3),glass_door_framless:Dt(91,20,210.5,"Ola-Kristian Hoff","Glass door",3),puerta:Dt(87,13.7,210,"Scopia","Door",3),revdoor:Dt(384,300,230,"Ola-Kristian Hoff","Revolving door",3),"screen-door":Dt(87.6,9.7,200,"Kator Legaz","Screen door",3),sliderPocketDoor:Dt(94.8,12.2,212.5,"Ola-Kristian Hoff","Slider pocket door",3),double_door_2:Dt(176,17.5,210,"Scopia","Double door",3),double_door_with_little_part:Dt(132.7,17.5,210,"Scopia","Double door with panes",3),japanesedoor:Dt(298,9.7,210,"RonnieTandriady","Japanese door",3),elevator:Dt(185.6,189.6,245.4,"Scopia","Elevator",3),doorFrame:Dt(91,16,210,"eTeks","Door frame",3),frontDoor:Dt(101.5,23,208.5,"eTeks","Front door",3),openDoor:Dt(91.5,68,208.5,"eTeks","Open door",3),slidingDoors:Dt(154,8,205,"eTeks","Sliding doors",3),roundDoorFrame:Dt(80,15,200,"eTeks","Round door frame",3),roundedDoor:Dt(91.5,14.5,208.5,"eTeks","Rounded door",3),frontDoorDark:Dt(112.8,40,205,"Pencilart","Front door",3),garageDoor:Dt(420,25,210,"Geantick","Garage door",3),patioGlassDoorUnit:Dt(161,18.4,200,"Pencilart","Patio glass door unit",3),sixDoorFrenchStyle:Dt(595,101.3,210,"Siath","Six door French style",3),frenchDoors:Dt(239.2,28.4,210,"Pencilart","Sliding French doors",3),DianaWindow:Dt(389.6,25.6,210,"Pencilart","Triple window",3),accordionFoldDoors:Dt(284,126.5,220,"Pencilart","Accordion fold doors",3),garageDoor2:Dt(210,15,220,"Pencilart","Garage door",3),doorGlassPanels:Dt(77.1,11.2,205.7,"Peter Smolik","Glass door",3),door1:Dt(91.44,18.23,213.7,"Peter Smolik","Door",3),glassDoorsOpened:Dt(336,86.66,203,"Pencilart","Opened quadruple glass doors",3),patioDoorOpened:Dt(168.3,82.7,203,"Pencilart","Opened patio door",3),patioDoor:Dt(99.4,18.4,200,"Pencilart","Patio door",3),patioSideDoor:Dt(60.7,6.2,200,"Pencilart","Patio side door",3),fancyFrontDoor:Dt(99.8,24,200,"Pencilart","Fancy front door",3),door_glass:Dt(96,17,209.7,"Dorin Vatavu","Glass door",3),"exterior-door-01":Dt(104.9,18,208,"Kator Legaz","Exterior door",3),"exterior-door-02":Dt(98.6,17.8,205,"Kator Legaz","Exterior door",3),"exterior-door-03":Dt(104.2,16.3,205,"Kator Legaz","Exterior door",3)},jt={floorUplight:Dt(33,33,181,"eTeks","Floor uplight",2),fluorescent:Dt(105,24.3,10.6,"Kator Legaz","Fluorescent light",1),hangingLight:Dt(43.9,43.9,86,"Jay-Artist","Hanging light",1),lightSource:Dt(0,0,0,"eTeks","Simple light",1),lightSource2:Dt(40,40,40,"eTeks","Simple light",1),lustreBoule:Dt(30,30,67.6,"Sheep","Pendant light",1),painting_light:Dt(40,14.6,2.6,"Ronnie Tantriady","Painting light",7),"porch-light":Dt(17.7,17,32,"Kator Legaz","Porch light",7),spotlight:Dt(6.8,9.9,13.1,"eTeks","Spotlight",1),street_light_modern:Dt(34,245,770,"Ola-Kristian Hoff","Street light",2),"track-lights":Dt(100,17,13.8,"Kator Legaz","Track lights",7),"wall-spotlight":Dt(6,23.5,10.3,"Kator Legaz","Wall spotlight",7),wall_lamp:Dt(22.3,11,9,"alaX","Wall lamp",7),"ceiling-lamp":Dt(30,30,5.4,"Scopia","Ceiling lamp",1),farola1:Dt(43.9,43.5,250,"Scopia","Street lamp",2),lampeHalogene:Dt(31.3,68.9,180,"GdB","Floor lamp",2),lamp2:Dt(53.4,51.3,63.4,"Megeon","Lamp",1),pendantLamp:Dt(60,60,80,"eTeks","Pendant lamp",1),minispot:Dt(25,25,1,"Emmanuel Puybaret","Mini spot",1),"fluorescent-strip":Dt(55,8.9,8.3,"Kator Legaz","Fluorescent strip",7),wallUplight:Dt(24,12,26,"eTeks","Wall uplight",7),led_striplight:Dt(100,4,3,"eTeks","LED striplight",1),wallLight:Dt(22.8,24.6,53.8,"Ndakasha","Wall light",2),bougeoir:Dt(12.7,11.7,25.7,"Sleipnir1","Candlestick",2),neon:Dt(42,6.4,5,"Snduc","Fluorescent strip",2),candleOrnament:Dt(8,12.5,31.9,"Peter Smolik","Candle ornament",2),deskLamp1:Dt(40.6,40.601,61.23814,"Peter Smolik","Desk lamp",2),deskLight:Dt(23.2,73.766,56.23,"Peter Smolik","Desk lamp",2),ceiling_lamp_globo_feria:Dt(46,46,11,"MineaCristian","Ceiling lamp",2),lamp_paraffin_feuerhand:Dt(12.3,11,33.1,"Ola-Kristian Hoff","Oil lamp",2),lamp_wall_outside:Dt(45,50,65,"Ola-Kristian Hoff","Wall lamp",2),"classic-lamppost":Dt(30,30,250,"Kator Legaz","Classic lamppost",2),flashlight:Dt(4.5,15,4.5,"Kator Legaz","Flashlight",2),"hanging-restaurant-light":Dt(39.3,39.3,66.2,"Kator Legaz","Hanging light",2),"park-light":Dt(61.4,56.4,300,"Kator Legaz","Park light",2),"pedestal-vase-lamp":Dt(28.2,28.2,80,"Kator Legaz","Pedestal vase lamp",2),"wall-lamp-artwork":Dt(30,37.2,27.3,"Kator Legaz","Wall lamp artwork",2),desk_lamp1:Dt(13.7,34.2,45,"Scopia","Desk lamp",2),desk_lamp2:Dt(22.5,41.7,40,"Scopia","Desk lamp",2),little_lamp1:Dt(33.1,33.1,41.9,"Scopia","Little lamp",2),little_lamp3:Dt(41,41,72.8,"Scopia","Little lamp",2),saloon_lamp:Dt(13.2,83.6,60,"Scopia","Pendant lamp",2),table_lamp:Dt(20,20,50.1,"Scopia","Lamp",2),living_room_lamp1:Dt(27.2,27.2,66.9,"Scopia","Lamp",2),living_lamp:Dt(39.6,58.3,142.9,"Scopia","Lamp",2),"chandelier-lamp":Dt(130.6,130.6,174.4,"Scopia","Chandelier lamp",2),candelabre:Dt(43,145.2,738.2,"Scopia","Street light",2),candle:Dt(10.6,10.4,43.6,"Scopia","Candle",2)},Ot={barreAppuiCoude:Dt(76.9,11,36.4,"Emmanuel Puybaret","Angled grab bar",7),barreAppui:Dt(57.6,11,7.5,"Emmanuel Puybaret","Grab bar",7),basin:Dt(76.8,65.8,27,"Scopia","Basin",1),bathmat:Dt(73.3,47,1.4,"Kator Legaz","Bathmat",5),bathtub_jet_system:Dt(160,70,58,"Ola-Kristian Hoff","Bathtub jet system",2),bidet:Dt(39.9,53.6,51.3,"Arusano","Bidet",2),com_bath2_jabon_pijo:Dt(5.7,5.7,13.7,"Scopia","Bottle",1),"clothes-basket":Dt(53.9,53.8,67.4,"Scopia","Clothes basket",1),clothes_line:Dt(500,15,140,"Ola-Kristian Hoff","Clothes line",1),corner_bathtub:Dt(160,160,80.3,"Scopia","Corner bathtub",2),wash_basin_corner:Dt(50,50,81,"Ola-Kristian Hoff","Corner washbasin",6),"ergonomic-washbasin":Dt(60,46,53.8,"Scopia","Ergonomic washbasin",7),"folding-grab-bar":Dt(7,62.4,17.7,"Scopia","Folding grab bar",7),secheCheveux:Dt(15.8,15.3,7.2,"Toomy","Hair dryer",1),"hand-washbasin":Dt(49.1,30,27,"Scopia","Hand washbasin",7),toilet_hang_round:Dt(38,56.5,82,"Ola-Kristian Hoff","Hanged toilet",7),islandBath:Dt(169.6,93.7,108.1,"Scopia","Island bath",5),"japanese-toilet":Dt(52.7,83.6,98,"Scopia","Japanese toilet unit",2),"mixer-tap-for-shower":Dt(29,34.7,99.1,"Scopia","Mixer tap for shower",7),potty:Dt(30.3,30.3,18.4,"Icarus","Potty",1),pesePersonne:Dt(28.2,32.1,2.8,"Emmanuel Puybaret","Scale",2),"shower-cabin-with-seat":Dt(100.5,170.4,213.5,"Scopia","Shower cabin",2),shower_cabin:Dt(90,90,199,"Ola-Kristian Hoff","Shower cabin",2),doccia:Dt(70,70,200,"LucaPresidente","Shower cabin",2),showerCurtain:Dt(90.3,29.4,190,"Kator Legaz","Shower curtain",1),shower:Dt(20.8,53.8,114.3,"Wfg5001","Shower head and faucet",7),savon:Dt(7,5.8,16.7,"Toomy","Soap",1),"stone-washbasin":Dt(53.7,45.5,36.8,"Scopia","Stone washbasin",7),toiletBrush:Dt(9.6,12.9,38.6,"Nhumrod","Toilet brush",6),"bathroom-tissue":Dt(21.3,17.3,15,"Kator Legaz","Toilet paper dispenser",7),potBrossesADent:Dt(7.2,8.7,18.2,"Toomy","Tooth brushes and paste",1),towel2:Dt(21.8,13.7,66.9,"Wfg5001","Towel",7),com_bath3:Dt(60,16.8,41.8,"Scopia","Towel rack",7),towel3:Dt(59.6,8.1,47.8,"Wfg5001","Towel rack",7),"small-urinal":Dt(34,27.1,61.8,"Scopia","Urinal",7),bathroom_vanity:Dt(107.1,38.5,207.8,"Scopia","Vanity",6),modernVanity:Dt(90.4,70.8,93.3,"Dobbs","Vanity",2),washbasin_jay_hardy:Dt(59.7,43.1,86.7,"Jay-Artist","Washbasin",6),bathroom3:Dt(71.9,40.3,48.4,"Scopia","Washbasin",7),bathroom_sink:Dt(122,55,78,"Ola-Kristian Hoff","Washbasin with cabinet",2),mobilettoLavaboWenge:Dt(81,42.5,101.3,"LucaPresidente","Washbasin with cabinet",2),dryer_machine:Dt(59,61.8,84.2,"Scopia","Dryer machine",2),clothes_washing_machine:Dt(59,60.1,84.2,"Scopia","Clothes washing machine",2),clothesWasher:Dt(59,60.1,84.2,"Scopia","Clothes washing machine",2),fer:Dt(13.7,13.2,30.6,"Toomy","Iron",1),plancheARepasser:Dt(54.5,137.1,79.5,"Toomy","Ironing board",2),washbasin:Dt(56,47,97,"eTeks","Washbasin",2),washbasinWithCabinet:Dt(62,57,97,"eTeks","Washbasin with cabinet",7),fittedBath:Dt(178,77,72,"eTeks","Fitted bath",2),bacADouchePlat:Dt(90,90,6.5,"Snduc","Shower cubicle",2),toiletUnit:Dt(40,80,62,"eTeks","Toilet unit",2),bath:Dt(163,73,57,"eTeks","Bath",2),comb:Dt(12.5,3.6,.4,"JonFreer","Comb",2),cosmeticsPot:Dt(7.7,7.8,7.1,"Bocko","Cosmetics pot",2),showerDoor:Dt(90.5,22.5,229.9,"Wfg5001","Shower door",2),toiletPaperDispenser:Dt(15.6,10.4,18.45,"Nhumrod","Toilet paper dispenser",2),toiletsUnit:Dt(35.3,69.2,77.2,"Nhumrod","Toilet unit",2),flacon:Dt(3.7,2.1,13,"Tappi","Flacon",2),showerStall:Dt(93.05768,111.88634,200.01599,"Asterlil","Shower stall",2),urinal:Dt(36.1,30,88.1,"Ndakasha","Urinal",2),bath_jay_hardy:Dt(180.1,70.1,65.1,"Jay-Artist","Bath",2),bathroomRadiator:Dt(48.4,18.8,110.75,"Nikitron","Radiator",2),lipStick:Dt(2.04,2.04,9.54,"Bjo.bernis","Lip stick",2),toilets_unit_jay_hardy:Dt(41.25,54.4,76.6,"Jay-Artist","Toilet unit",2),radiatorAndTowels:Dt(60,10,154,"Gianmariaveronese","Radiator",2),modernToilet:Dt(44.8,85,76.5,"Starapple","Toilet unit",2),meubleSalleDeBain:Dt(60,59.2,91.9,"Snduc","Washbasin with cabinet",2),bidon:Dt(6.5,6.5,16.7,"Snduc","Bottle",2),robinet:Dt(5.1,14.4,12,"Snduc","Faucet",2),parfumAmbiance:Dt(8.7,4.6,8.3,"Snduc","Perfume",2),rasoir:Dt(12.5,5,2,"Snduc","Razor",2),shampoo:Dt(7.4,3.4,16.7,"Snduc","Shampoo",2),gelDouche:Dt(8,4.2,15.3,"Snduc","Soap bottle",2),boiteDeMouchoirs:Dt(22.5,11.5,13.6,"Snduc","Tissue box",2),derouleurWC:Dt(16,13.5,19.5,"Snduc","Toilet paper dispenser",2),tube:Dt(2,2,6.8,"Snduc","Tube",2),pareDouche:Dt(90,8,180,"Snduc","Shower door",2),bathroomFurniture:Dt(119,50.9,131.1,"Maui","Cabinet",2),towelMedicineCabinet:Dt(62.2,61.4,144.8,"Pencilart","Towel and medicine cabinet",2),bath_L:Dt(170,85,186,"Ola-Kristian Hoff","Bath L shape",2),bathroom_cupboard_mirror:Dt(60,15,78,"Ola-Kristian Hoff","Cupboard mirror",2),towel_rack:Dt(45,20.7,29.8,"Ola-Kristian Hoff","Towel rack",2),tendaDoccia:Dt(73.6,93.4,197.9,"Alex","Corner shower curtain",2),barreAppuiL:Dt(59.2,11.5,127.6,"Emmanuel Puybaret","L shaped grab bar",2),"towel-rack":Dt(50,9.5,10.9,"Kator Legaz","Towel rack",2),showerHeadAndFaucet:Dt(24.5,22.55,88.8,"Kator Legaz","Shower head and faucet",2),mobilettoSpecchioBlu:Dt(70,12.5,60,"LucaPresidente","Mirror",2),mobilettoSpecchioWenge:Dt(80,22,72,"LucaPresidente","Mirror cabinet",2),mobilettowenge:Dt(80,42,82,"LucaPresidente","Cabinet",2),water:Dt(36,55.7,45.25,"LucaPresidente","Toilet unit",2),bathroom4:Dt(61.5,61.5,50,"Scopia","Washbasin",2),bathroom1:Dt(73.2,77.9,172.7,"Scopia","Washbasin",2),double_vanity:Dt(185.2,68.1,225.4,"Scopia","Double vanity",2),com_bath:Dt(5.4,5.4,12,"Scopia","Bottle",2),com_bath2_cepillo:Dt(19.2,5.5,3.5,"Scopia","Brush",2),com_bath2_esponja:Dt(9.5,9.3,10.1,"Scopia","Sponge",2),com_bath2_peineta:Dt(6.6,6.1,.8,"Scopia","Comb",2),com_bath2_soap:Dt(11,5.3,20.1,"Scopia","Soap",2),com_bath3_toalla:Dt(17.9,11.6,3.39,"Scopia","Towel",2),medicoscopia_bottle:Dt(4.3,4.3,8.7,"Scopia","Medicine bottle",2),medicoscopia_bottle2:Dt(5.7,5.7,13.9,"Scopia","Medicine bottle",2),medicoscopia_box:Dt(10.9,4.3,6.6,"Scopia","Medicine box",2),small_lavatory:Dt(50,42.4,34.4,"Scopia","Small lavatory",2),"folding-wall-seat":Dt(40,45,14.7,"Scopia","Folding wall seat",2),"mixer-tap-for-bath-and-shower":Dt(29,34.7,106.5,"Scopia","Mixer tap for bath and shower",2),"mixer-tap-for-bath":Dt(29,16.6,6.7,"Scopia","Mixer tap for bath",2),"shower-armchair":Dt(43.6,43.2,85.2,"Scopia","Shower armchair",2),"shower-chair":Dt(46.1,44.5,84.7,"Scopia","Shower chair",2),"turkish-toilet":Dt(45,70.5,68.6,"Scopia","Turkish toilet",2)},It={bedFlowers:Dt(202.2,228.2,144.2,"Flowers","Bed",2),"air-mattress":Dt(69.4,181.9,15.8,"Scopia","Air mattress",2),mobileangoloCiliegio:Dt(86.7,86,240,"LucaPresidente","Angle wardrobe cherry",2),bed3:Dt(202.2,228.2,144.2,"SVAFnemesis","Bed",2),bed1:Dt(170.5,216.5,110.8,"Scopia","Bed",2),bedWithTexture:Dt(198,226.4,76.5,"Nhumrod","Bed",2),bedsideTable:Dt(50,41.4,48,"SirOccor","Bedside table",2),bedsideTable2:Dt(48.6,48.1,45.4,"Nhumrod","Bedside table",2),blocks:Dt(60,50,34.6,"LucaPresidente","Blocks",1),mobileAngoloInterno:Dt(105,105,240,"LucaPresidente","Blue corner wardrobe",2),mobileAzzurro:Dt(100,57,240,"LucaPresidente","Blue wardrobe",2),bootieSeparated:Dt(21,26.8,17.5,"Cgrifter","Bootie",1),bunkBed:Dt(113.1,205,160,"NabHlEsCK & eTeks","Bunk bed",2),"captains-bed":Dt(98.2,209.2,86.6,"Scopia","Captain's bed",2),"changing-table":Dt(122.7,48.1,97.5,"Scopia","Changing table",2),chest:Dt(143.5,53.6,82,"Elhzar","Chest",2),kommode:Dt(95.1,41.9,93,"JabberWalky","Chest",2),juniorBed:Dt(105.7,197.8,65.6,"SirOccor & eTeks","Child bed",2),"clothes-rack":Dt(111.9,35.8,125.1,"Scopia","Clothes rack",2),"clothes-hanger":Dt(43,1.3,21.5,"Kator Legaz","Clothes hanger",1),"clothes-horse":Dt(65,95,87,"Scopia","Clothes horse",2),portemanteaux2:Dt(46,46,161.8,"Baffab","Hat and coat stand",1),corner:Dt(52.5,52.5,240,"LucaPresidente","Corner bookcase",2),mensolaCurvaAcero:Dt(40,40,3,"LucaPresidente","Corner shelf maple",7),crib:Dt(72.8,124.3,110.9,"Scopia","Crib",2),pensileAcero:Dt(40,25,40,"LucaPresidente","Cube shelf maple",1),doll:Dt(14.4,12.1,16,"Scopia","Doll",1),"doll-house":Dt(69,32.4,86.8,"Scopia","Doll house",1),comoCiliegio:Dt(160,60,70,"LucaPresidente","Dresser cherry",2),folded_clothes:Dt(26.3,40.4,12.2,"Scopia","Folded clothes",1),futon:Dt(142,211.3,18.2,"Scopia","Futon",5),"hanging-clothes1":Dt(32.5,59,142.5,"Kator Legaz","Hanging clothes",1),backpack:Dt(28.9,33.7,40,"Jo.3D","Backpack",1),casque:Dt(26,37.9,30.1,"Scopia","Helmet",1),"adjustable-hospital-bed":Dt(100,209.6,89.7,"Scopia","Hospital bed",2),"hospital-table-on-wheels":Dt(76.6,45.5,74.5,"Scopia","Hospital table on wheels",2),hotelSafe:Dt(44,39.6,20,"Scopia","Hotel safe",1),letters:Dt(40.1,12.7,18,"LucaPresidente","Letter cubes",1),litMezzanine2:Dt(296.4,184.9,210,"Clyriss","Mezzanine bed",2),"mezzanine-bed":Dt(121.8,259,192.6,"Scopia","Mezzanine bed",2),mocassinSeparated:Dt(22.2,28.1,10.5,"Mocassin","Scopia",1),"convertible-sofa-BZ-opened":Dt(158.3,190.1,47.8,"Scopia","Opened convertible sofa BZ",2),housePuzzle:Dt(15.5,15.6,1.3,"Snu","Puzzle",1),rubix2:Dt(5.6,5.6,5.6,"Farcgs","Rubik's cube",1),sleepingBag:Dt(88.2,200,10.1,"Scopia","Sleeping bag",2),slippersSeparated:Dt(23.7,28.1,6.1,"Mik1190","Slippers",1),smiley:Dt(13.4,13.4,20.9,"LucaPresidente","Smiley tower",1),sneakersSeparated:Dt(23.7,30.1,11.8,"Scopia","Sneakers",1),teddyBear:Dt(33.1,21.8,32.2,"Mantislate","Teddy bear",1),train:Dt(119,97,10.2,"LucaPresidente","Train",2),armoireLotus:Dt(179.5,67.5,221.4,"Ga\xebl Bettinelli","Wardrobe",2),mobileCiliegio:Dt(100,50,240,"LucaPresidente","Wardrobe cherry",2),wardrobe2:Dt(173.5,60,208,"Richu","Wardrobe",2),womanShoesSeparated:Dt(18.9,24.9,16.5,"Scopia","Woman shoes",1),bed:Dt(144.6,193.1,52.8,"eTeks","Bed",2),bed140x190:Dt(158,208,70,"eTeks","Bed 140x190",2),bed90x190:Dt(108,208,70,"eTeks","Bed 90x190",2),bunkBed90x190:Dt(115,208,180,"eTeks","Bunk bed",2),wardrobe:Dt(100,54,165,"eTeks","Wardrobe",2),cornerBunkBed90x190:Dt(208,208,155,"eTeks","Corner bunk bed",2),petiteCommode:Dt(82,46.4,83,"Snduc","Small chest",2),armoire:Dt(109,52.8,200.5,"Icybones","Wardrobe",1),litMezzanine:Dt(200.5,216.8,200.4,"Infernal-quack","Loft bed",2),loftBed140x190:Dt(165,208,180,"eTeks","Loft bed 140x190",2),bed2:Dt(144.7,213.7,107.7,"Blend Swap","Bed",2),caballito:Dt(67.65,29.1,49.8,"Sangio","Rocking horse",2),cartoon_biplane:Dt(13.8,12.4,5.7,"Robo3dguy","Biplane",2),wardrobeWithSlidingDoors:Dt(200,66,236.4,"Ashaihullin","Wardrobe",2),cupboard:Dt(100.5,39,150,"Mahmood","Cupboard",2),babyRockingBed:Dt(59.7,82.5,76.2,"SVAFnemesis","Baby bed",2),cardGame:Dt(21.1,11.3,.38,"Bagiryu","Card game",2),briefcase:Dt(40,10.4,33.3,"Ulanbek","Briefcase",2),handbag:Dt(26.1,12.4,19.4,"Ulanbek","Handbag",2),woodToy:Dt(7.7,6,11.7,"Miroljub","Wood toy",2),"carrito-de-madera":Dt(12.6,26.9,12.7,"Oldtimer","Car model",2),clock:Dt(7,4.3,7,"Krabz","Clock",2),suit:Dt(44,11.8,60,"Rosenth","Suit",2),chessboard:Dt(30,30,8,"Swapnilrocks98","Chessboard",2),lettoCloud:Dt(188.9,216.5,78.8,"Fabbyone & eTeks","Bed",2),toyTrain:Dt(30.1,12.4,9.6,"RegusTtef","Toy train",2),xylophone:Dt(48.3,28.9,6,"SonnySee","Xylophone",2),petitReveil:Dt(9,4.6,5,"Snduc","Alarm clock",2),p40:Dt(18,15.2,5.1,"Geantick","P40",2),daybed:Dt(264.8,210,105.7,"Pencilart","Trundle bed",2),captainsBed:Dt(131.8,208,119.3,"Pencilart","Captain's bed",2),trundleBed:Dt(215.7,95,117.1,"Pencilart","Daybed",2),litParents:Dt(188.8,225.6,88.8,"Icybones","Bed",2),clicClacOuvert:Dt(182,132,39.9,"Ga\ufffdl Bettinelli","Opened sofa bed",2),lit:Dt(167.2,220.1,78.5,"Ga\ufffdl Bettinelli","Bed",2),meubleChevet:Dt(39.86778,29,54,"Ga\ufffdl Bettinelli","Bedside table",2),suits_racked:Dt(80,60,94,"Ola-Kristian Hoff","Hanging suits",2),childBed:Dt(105,210,110,"Jabberwalky","Child bed",2),"hanging-clothes2":Dt(62.1,54.4,116.2,"Kator Legaz","Hanging clothes",2),comodinoSinistroCiliegio:Dt(150,45,65,"LucaPresidente","Bedside table cherry",2),lettoCiliegio:Dt(184,197,65,"LucaPresidente","Bed cherry",2),mensolaCiliegio:Dt(102,20,34,"LucaPresidente","Shelf cherry",2),comodinoAzzurro:Dt(50,42.5,48,"LucaPresidente","Blue bedside table",2),lettoAzzurro:Dt(80,180,56,"LucaPresidente","Blue child bed",2),lettoSoppalcoAzzurro:Dt(82.9,180,146,"LucaPresidente","Blue loft bed",2),mensolaAcero:Dt(60,20,5,"LucaPresidente","Shelf maple",2),scaletta:Dt(44,46.1,128.5,"LucaPresidente","Ladder",2),iron_bed:Dt(131.7,215,116,"Scopia","Iron bed",2),wardrobe1:Dt(217.4,53,200,"Scopia","Wardrobe",2),children_bed:Dt(91.8,205.3,87.4,"Scopia","Child bed",2),kids_shelves:Dt(101,42.4,190.7,"Scopia","Shelves",2),robe:Dt(75.9,82.7,2.7,"Scopia","Dress",2),casquette:Dt(23.7,32.7,15.2,"Scopia","Cap",2),chapeau:Dt(36.1,42.4,15,"Scopia","Hat",2),"short-shadows":Dt(37.8,51.9,1.9,"Scopia","Short",2),"pantalon-shadows":Dt(40.8,98.6,2,"Scopia","Trousers",2),blouson:Dt(51.3,73.15,3.2,"Scopia","Jacket",2),jupe:Dt(40.7,40.6,3.6,"Scopia","Skirt",2),"jupe-doeskin":Dt(40.2,32.3,1.75,"Scopia","Skirt",2),chaussette:Dt(21.9,30.6,.7,"Scopia","Socket",2),"montre-with-pose":Dt(4.3,8.7,4.9,"Scopia","Watch",2),montre:Dt(4.3,24.3,.6,"Scopia","Watch",2),bague:Dt(2.2,2.4,.38,"Scopia","Ring",2),"gant-textured":Dt(14.8,26.6,6,"Scopia","Glove",2),"dressing-table":Dt(85.7,46.5,135.9,"Scopia","Dressing table",2),day_bed_frame:Dt(208,97,70,"Scopia","Day bed",2),tasDeVetements:Dt(122.2,103.8,37.7,"Scopia","Clothes heap",2),oreiller:Dt(40.5,40.5,13.9,"Scopia","Pillow",2),flipFlops:Dt(19.9,19.3,4.6,"Scopia","Flip flops",2)},Pt={awning_bracket:Dt(310,169.4,61.6,"Ola-Kristian Hoff","Awning",7),column_balustrade:Dt(30,24.4,92.5,"Ola-Kristian Hoff","Balustrade column",1),column_balustrade_corner:Dt(54.4,54.4,92.5,"Ola-Kristian Hoff","Balustrade corner",1),barbecue:Dt(39.2,48.4,50.9,"Sophie","Barbecue",2),barnum:Dt(300.3,300.5,340.1,"Scopia","Barnum",2),basketball_net_and_board:Dt(109,60.9,105.6,"Scopia","Basketball net",7),birch:Dt(394,375,750,"Ola-Kristian Hoff","Birch Tree",2),bush:Dt(151.6,143.5,131.2,"Scopia","Bush Tree",2),"cafe-chair":Dt(49.5,51.7,85,"Kator Legaz","Cafe chair",2),"cafe-table":Dt(74.2,74.2,70,"Kator Legaz","Cafe table",2),campingLamp:Dt(15.4,15.4,36.7,"Bloknayrb","Camping lamp",1),campingTent:Dt(248.1,236.2,141.4,"Scopia","Camping tent",2),child_swing:Dt(162.8,160.7,176.3,"Scopia","Child swing",2),parque:Dt(406.9,95.9,200,"Scopia","Children game",2),croisement2et2:Dt(1045,1045,18,"Scopia","Crossroad 2x2 lanes",5),routeCourbe2VoiesAvecTrottoirs90Deg:Dt(1045,1045,18,"Scopia","Curved road lanes 90\xb0",5),deckChair:Dt(71.4,125.5,82.2,"BigMouse","Deck chair",2),"diving-board":Dt(42,183,28,"Scopia","Diving board",1),"dog-house":Dt(71.6,90,71.9,"Scopia","Dog house",2),privacyFence2:Dt(100,15,100.8,"Pencilart","Fence",2),"iron-railing-separated-hooks-2":Dt(135,11,70,"Scopia","Iron railing",1),railing:Dt(94.4,5,90,"eTeks","Railing",1),railing_glass:Dt(155,5,130,"Ola-Kristian Hoff","Railing glass",1),gardeCorps:Dt(140,6,107.8,"Julie Fabre","Railing",2),fence:Dt(179.6,5.8,104.9,"Dobbs","Fence",1),fence_grid:Dt(200,5,105,"Ola-Kristian Hoff","Fence grid",1),fence_picket:Dt(85,6,125,"Ola-Kristian Hoff","Fence picket",1),"football-goal":Dt(152.4,89,120,"Scopia","Football goal",2),"big-football-goal":Dt(732,180.9,244,"Scopia","Big football goal",2),waterFountain:Dt(51.4,51.4,46.5,"Sparkywalk","Fountain",2),fountain:Dt(184.9,184.9,150,"NabHlEsCK & eTeks","Fountain",2),"garden-hut":Dt(171,182,198,"Scopia","Garden hut",2),gate_grind:Dt(191,11.5,86,"Ola-Kristian Hoff","Gate",2),greenhouse:Dt(310,310,290,"Ola-Kristian Hoff","Greenhouse",2),grillNgauge:Dt(180,69.5,135,"Pencilart","Grill",2),hammock:Dt(350.5,164.3,158.5,"Scopia","Hammock",2),hangingUmbrella:Dt(240,297,272.1,"Seber Rider","Hanging umbrella",2),hedgeTextured:Dt(154.7,59.4,100,"Scopia","Hedge",1),jacuzzi:Dt(228,228,94.8,"Scopia","Jacuzzi",2),"lavender-bush":Dt(81.8,82.1,64.7,"Scopia","Lavender bush",2),boiteALettre:Dt(31,30,30,"Venceslas","Letters box",1),lombardyPoplar:Dt(203,192,750,"Wolfram Diestel","Lombardy poplar",2),motorbike:Dt(91.4,33,74.6,"Ulanbek","Motorbike",2),"painted-bench":Dt(142.6,51.8,80,"Kator Legaz","Painted bench",2),palm:Dt(530,547,950,"Wolfram Diestel","Palm tree",2),pansy:Dt(30.8,30.3,21.5,"Scopia","Pansy",2),"passage-pieton":Dt(400,750,.3,"Scopia","Pedestrian crossing",5),pedestrianRailing1:Dt(208.1,4.8,103.9,"Colkaih","Pedestrian railing",2),pedestrianRailing2:Dt(200,5,108.9,"Colkaih","Pedestrian railing",2),pergola:Dt(240,255.6,263,"Sophie","Pergola",2),picnic_table:Dt(180.2,145.3,75,"Hawkdawg","Picnic table",2),pine:Dt(340,320,600,"Ola-Kristian Hoff","Pine Tree",2),plantie:Dt(68.9,27.7,37.3,"Rendars","Plant box",2),pool_ladder:Dt(50,50,190,"Ola-Kristian Hoff","Pool ladder",1),"porch-column-03":Dt(33.3,33.3,250,"Kator Legaz","Porch column",2),voiesFerreesDroit10m:Dt(1e3,440,39.9,"Scopia","Railroad 10m",5),voiesFerreesCourbe20m:Dt(2034.3,692.8,39.9,"Scopia","Railroad curve 20m",5),voiesFerreesAiguillage:Dt(2006.6,692.8,39.9,"Scopia","Railroad switch",5),rainGutterPart1:Dt(200,12,6.5,"Dingenskirchen","Rain gutter Part 1",1),rainGutterPart2:Dt(10,91.6,260,"Dingenskirchen","Rain gutter Part 2",1),rattanArmchair:Dt(71,72.4,78.7,"Scopia","Rattan armchair",2),rattanSofa:Dt(128.5,72.4,78.7,"Scopia","Rattan sofa",2),rattanTable:Dt(120,60,40,"Scopia","Rattan table",2),route2VoiesAvecTrottoirs:Dt(1300,1045,18,"Scopia","Road 2 lanes",5),rock1:Dt(50.5,33.7,50,"1000bones","Rock",1),rock2:Dt(69,53.4,30.7,"1000bones","Rock",1),rock3:Dt(68.5,42.3,43.8,"1000bones","Rock",1),"roses-bush":Dt(39.6,45.3,36.1,"Scopia","Roses bush",1),"round-swimming-pool":Dt(165,165,52,"Scopia","Round swimming pool",1),sandpit:Dt(130.3,120.2,26,"Scopia","Sandpit",1),bonecoDeNeve:Dt(94,71.1,98.8,"Zema","Snowman",1),stoneLantern:Dt(34.7,34.7,49.4,"Argonius","Stone lantern",1),"swimming-pool":Dt(1713.4,997.6,100.5,"Scopia","Swimming pool",2),ext_table:Dt(202.2,154.7,40,"Scopia","Table",2),silla_teca:Dt(58,67,98.4,"Scopia","Teck chair",2),"feu-de-signalisation-simple":Dt(37.5,53.3,316.6,"Scopia","Traffic light",2),trampoline:Dt(300,300,53.2,"Scopia","Trampoline",2),tree:Dt(600,640,800,"Ola-Kristian Hoff","Tree",2),umbrella:Dt(223.1,222.7,199.8,"BigMouse","Umbrella",2),wheelie_bin:Dt(60,62.5,101.5,"Ola-Kristian Hoff","Wheelie bin",2),outdoorLamp:Dt(21.3,21.3,59.1,"Mindfront","Outdoor lamp",1),window_shutter:Dt(43.9,2.9,129,"Ola-Kristian Hoff","Window shutter",7),window_flat_roof_skylight_bubble:Dt(100,100,45,"Ola-Kristian Hoff","Flat roof skylight bubble",1),bump:Dt(100,100,10.6,"Emmanuel Puybaret","Bump",2),portillon:Dt(122,6.5,110,"Roger Lonqueux","Gate",2),flowerBox:Dt(55,16.75,19.4,"MattMump","Flower box",2),mofx_mailbox:Dt(15.9,46.5,81.55,"Mofx","Mailbox",2),relaxChair:Dt(66,190,84.7,"Semhustej","Relax chair",2),bench:Dt(170.1,45.9,50.8,"Ulanbek","Bench",2),childHut:Dt(328,520.7,302.3,"Ulanbek","Child hut",2),childSwing:Dt(213.4,124.8,207,"Ulanbek","Child swing",2),seesaw:Dt(239.7,41.7,90.7,"Ulanbek","Seesaw",2),wheelbarrow:Dt(166.3,59.8,56.7,"Grs","Wheelbarrow",2),lantern:Dt(37.7,32.6,80,"CerFriBar","Stone lantern",2),chair_deck:Dt(67.35,208.5,55.3,"North.star","Deck chair",2),poolLounge:Dt(88,200,88.5,"LarryStephenRobb","Pool lounge",2),rowboat:Dt(125.8,309,58.5,"Asterlil","Rowboat",2),transat:Dt(60,104.6,97.7,"GdB","Deck chair",2),table_footrest:Dt(150,34,32.5,"Pencilart","Table",2),fencepost1:Dt(12,12,100,"Pencilart","Fence post",2),fencepost2:Dt(12,12,95,"Pencilart","Fence post",2),"borderfence-main":Dt(96.4,11.8,65,"Pencilart","Border fence",2),"borderfence-small":Dt(56.7,11.8,65,"Pencilart","Small border fence",2),dogHouse:Dt(104,133.8,73,"Theo Blonk","Dog house",2),blackDeckTable:Dt(155,156.6,72,"Pencilart","Black deck table",2),gardenUmbrella:Dt(256.7,222,250,"Pencilart","Garden umbrella",2),blackDeckChair:Dt(51.5,66,110,"Pencilart","Black deck chair",2),privacyFence:Dt(73.3,7.6,104.5,"Pencilart","Fence",2),canapeJardin:Dt(221,75,180,"Ga\ufffdl Bettinelli","Garden sofa",2),swimmingPool:Dt(832,339.1,212.7,"Emmanuel Puybaret","Swimming pool",2),balancelle:Dt(150,147.1,182.4,"Roger Lonqueux","Swinging chair",2),cloture:Dt(117,10,118.8,"Roger Lonqueux","Fence",2),fence_grid_gate:Dt(85,5,110,"Ola-Kristian Hoff","Fence grid gate",2),bordure:Dt(45,3,18,"Roger Lonqueux","Edge",2),gate_iron:Dt(98.1,1,234.6,"Ola-Kristian Hoff","Gate",2),portail:Dt(190.5,12.7,210,"Roger Lonqueux","Gate",2),etendoirLinge:Dt(416.8,90.1,204.4,"Julie Fabre","Cloth lines",2),flag_hinged_pole:Dt(230,140,820,"Ola-Kristian Hoff","Flag hinged pole",2),parasol_str:Dt(200,200,249.2,"Ola-Kristian Hoff","Umbrella",2),traffic_light_ped:Dt(53.2,53.2,300,"Ola-Kristian Hoff","Traffic light",2),"concrete-bench":Dt(142.3,60,72.9,"Kator Legaz","Concrete bench",2),"park-trashcan":Dt(79,79,85.8,"Kator Legaz","Park trashcan",2),"porch-column-01":Dt(33.2,33.2,250,"Kator Legaz","Porch column",2),"porch-column-02":Dt(43.2,43.2,250,"Kator Legaz","Porch column",2),"residential-trashcan":Dt(58.6,58.6,80,"Kator Legaz","Residential trashcan",2),"spray-bottle":Dt(9.6,11.9,30,"Kator Legaz","Spray bottle",2),"concrete-sidewalk":Dt(549,96.2,16.1,"Kator Legaz","Concrete sidewalk",2),"fire-hydrant":Dt(41.4,33.3,76.4,"Kator Legaz","Fire hydrant",2),"hose-reel":Dt(34.2,26.7,46.1,"Kator Legaz","Hose reel",2),ext_chair:Dt(100,76.4,73.4,"Scopia","Chair",2),littlebank:Dt(259.5,67,47.3,"Scopia","Little bank",2),wood_bank:Dt(200,100.3,98.5,"Scopia","Wood bank",2),beach_chair:Dt(69.6,193.5,108.1,"Scopia","Beach chair",2),letters_box:Dt(31,12.2,40.5,"Scopia","Letters box",2),"rectangle-swimming-pool":Dt(500,275.5,139.9,"Scopia","Rectangle swimming pool",2),"garden-faucet":Dt(4.96,20,15.5,"Scopia","Garden faucet",2),"passage-a-niveau":Dt(596.5,92.8,262.1,"Scopia","Rail crossing",2),rails:Dt(1e3,163.1,13.4,"Scopia","Rails",2),"fleche-tout-droit":Dt(70,400,.3,"Scopia","Arrow straight ahead",2),"fleche-tourner-a-droite-et-direct":Dt(127.5,400,.3,"Scopia","Arrow turn right and ahead",2),"fleche-tourner-a-droite":Dt(100,400,.3,"Scopia","Arrow turn right",2),"stationnement-creneau":Dt(510,205,.3,"Scopia","Parking slot",2),"stationnement-en-bataille":Dt(237.5,504.9,.3,"Scopia","Parking slot 90\ufffd",2),"stationnement-epi-45":Dt(801.9,485.1,.3,"Scopia","Parking slot 45\ufffd",2),"stationnement-epi-60":Dt(573.7,519.9,.3,"Scopia","Parking slot 60\ufffd",2),"stationnement-epi-75":Dt(385.1,514.4,.3,"Scopia","Parking slot 75\ufffd",2),"high-hedge":Dt(150.7,104.1,179,"Scopia","High hedge",2),hedge:Dt(150.9,104.6,106.3,"Scopia","Hedge",2),acacia:Dt(770.8,645.7,649.4,"Scopia","Acacia",2),bamboo:Dt(299.5,277.7,500,"Scopia","Bamboo",2),ficusTree:Dt(275,283.9,500,"Scopia","Ficus",2),bluePineSnow:Dt(351.8,369.6,559.4,"Scopia","Blue pine under snow",2),coconutTree:Dt(777.2,800,1100,"Scopia","Coconut tree",2),coconutTreeBended:Dt(729.4,750.9,1e3,"Scopia","Bended coconut tree",2),copperBeech:Dt(751.3,730,800,"Scopia","Copper beech",2),cypress:Dt(132.2,134.2,560,"Scopia","Cypress",2),japaneseMaple:Dt(790.3,697.1,700,"Scopia","Japanese maple",2),poplar:Dt(404.4,375.4,730,"Scopia","Poplar",2),peachBlossom:Dt(503.9,746.4,500,"Scopia","Peach blossom",2),pineSnow:Dt(374.5,378.9,545.7,"Scopia","Pine under snow",2),sabalPalmeto:Dt(347.4,310.4,1150,"Scopia","Palm tree",2),sycamoreMaple:Dt(908.6,1060.2,1200,"Scopia","Sycamore maple",2),tasDeTerre:Dt(92.3,93,19.8,"Scopia","Ground heap",2),tasDeSable:Dt(95.1,97.5,15.7,"Scopia","Sand heap",2),tasDeGravillons:Dt(98,89.4,14.8,"Scopia","Gravel heap",2),tasDeGravats:Dt(96,91.5,13.7,"Scopia","Rubble heap",2),voiesFerreesCourbe10m:Dt(1045.1,562.6,39.9,"Scopia","Railroad curve 10m",2),voiesFerreesCourbe40m:Dt(3933.3,942.8,39.9,"Scopia","Railroad curve 40m",2),voiesFerreesDroit1m:Dt(100,440,39.9,"Scopia","Railroad 1m",2),routeCourbe2VoiesAvecTrottoirs26m:Dt(2705.7,1365.7,18,"Scopia","Curved road 2 lanes 26m",2),routeCourbe1VoieAvecTrottoirs26m:Dt(2660.4,1021.6,18,"Scopia","Curved road 1 lane 26m",2),"routeCourbe2VoiesAvecTrottoirs6.5m":Dt(778,1111.9,18,"Scopia","Curved road 2 lanes 6.5m",2),"routeCourbe1VoieAvecTrottoirs6.5m":Dt(732.9,769.9,18,"Scopia","Curved road 1 lane 6.5m",2),routeCourbe1VoieAvecTrottoirs13m:Dt(1375.9,852.6,18,"Scopia","Curved road 1 lane 13m",2),routeCourbe2VoiesAvecTrottoirs13m:Dt(1421.2,1196.6,18,"Scopia","Curved road 2 lanes 13m",2),route1VoieAvecTrottoirs:Dt(1300,695,18,"Scopia","Road 1 lane",2),croisement1et1:Dt(695,695,18,"Scopia","Crossroad 1x1 lane",2),croisement1et2:Dt(695,1045,18,"Scopia","Crossroad 1x2 lanes",2),pont2Voies:Dt(1300,1045,228,"Scopia","Bridge 2 lanes",2),pont1Voie:Dt(1300,695,228,"Scopia","Bridge 1 lane",2),separateurDeVoie:Dt(240,60,75,"Scopia","Traffic lane separator",2),pilierPont1Voie:Dt(70,450,450,"Scopia","Bridge pillar",2),autoroute2Voies:Dt(5200,1061.2,75.2,"Scopia","Highway 2 lanes",2),routeCourbe1VoieAvecTrottoirs90Deg:Dt(695,695,18,"Scopia","Curved road 1 lane 90\ufffd",2),filElectrique:Dt(2287.1,3.46,34.8,"Scopia","Electric wire",2),"poteau-en-beton":Dt(339.9,240.6,1202,"Scopia","Concrete pole",2),"poteau-en-bois":Dt(339.9,107,1202.3,"Scopia","Wood pole",2),"feu-de-signalisation-avec-signalisation-au-dessus":Dt(320.6,56.4,499.1,"Scopia","Traffic light",2),hydrangea:Dt(79.8,78.2,64.9,"Scopia","Hydrangea",2),blackTupelo:Dt(666,650,1e3,"Wolfram Diestel","Black tupelo",2),quakingAspen:Dt(355,369,700,"Wolfram Diestel","Quaking aspen",2),fanPalm:Dt(246,257,300,"Wolfram Diestel","Fan palm tree",2),sassafras:Dt(607,592,950,"Wolfram Diestel","Sassafras",2),weepingWillow:Dt(700,683,800,"Wolfram Diestel","Weeping willow",2)},kt={apples:Dt(25.7,25.7,16,"Scopia","Apples",1),mamadeira:Dt(5,5,14.7,"Valdps","Baby bottle",1),baby_high_chair:Dt(60,64.4,104,"Scopia","Baby high chair",2),sgabello:Dt(32,36,85,"LucaPresidente","Bar stool",2),birthday_cake:Dt(24,24,10.6,"Scopia","Birthday cake",1),boiler:Dt(17.9,16.2,20,"Jay-Artist","Boiler",1),bouilloire:Dt(16.7,20.2,22.1,"Toomy","Boiler",1),bowl:Dt(20.1,20.1,12.4,"Scopia","Bowl",1),bowlWithFruits:Dt(32,33.6,14.1,"Scopia","Bowl with fruits",1),bowlWithSalad:Dt(25,25,11.7,"Scopia","Bowl with salad",1),bread:Dt(6,23.5,10.3,"Yd","Bread",1),baguettePain:Dt(54.7,7.5,4.1,"Emmanuel Puybaret","Baguette",1),broom:Dt(36.6,8.2,156,"Scopia","Broom",1),bucket:Dt(30,28,26.5,"Ola-Kristian Hoff","Bucket",1),butter:Dt(16,7.5,3.4,"BMF","Butter",1),"chest-freezer":Dt(130,85.8,74,"Scopia","Chest freezer",2),choppingBoard:Dt(37.6,26,4.5,"Jay-Artist","Chopping board",1),baguettes:Dt(1.4,21,.6,"Toomy","Chopsticks",1),cocktailGlass:Dt(8.3,8.3,13.1,"Xablend1222","Cocktail glass",1),coffeeBrewer:Dt(13.4,38.5,27.2,"TreyClaine","Coffee brewer",1),caffe_final:Dt(10,10,4.3,"Reduno","Coffee cup",1),percolateur:Dt(20.5,30.4,27.9,"Toomy","Coffee machine",1),"coffee-maker":Dt(18.6,28.7,30,"Kator Legaz","Coffee maker",1),"coffee-mug":Dt(8.5,12,10.8,"Kator Legaz","Coffee mug",1),coffeePress:Dt(16.3,10.3,26.5,"Cephei","Coffee press",1),cooker:Dt(28.9,40,27.1,"Scopia","Cooker",1),mano_cooktop:Dt(58,50,3.8,"Mano","Cooktop",1),"food-box-corn-flakes":Dt(19.1,9.1,27.1,"Kator Legaz","Corn flakes box",1),cupcake:Dt(5.9,5.9,7.5,"Dvachib","Cup cake",1),lavastoviglie:Dt(60,62.6,78,"LucaPresidente","Dishwasher",2),doubleOven:Dt(60,51.5,108.9,"Martanda","Double oven",1),drawersCabinet:Dt(60,61.2,88.5,"Vladoffsky","Drawers cabinet",2),kitchenDrawersCabinet:Dt(44.2,61.2,87.8,"Jay-Artist","Drawers cabinet",2),electronicScale:Dt(15,22,2,"Scopia","Electronic scale",1),frenchFries:Dt(20.4,19.2,3.5,"Scopia","French fries",1),glass:Dt(7.5,7.4,19.5,"Jay-Artist","Glass",1),kitchenGlassDoorCabinet:Dt(33.6,32.1,77.1,"Jay-Artist & eTeks","Glass door cabinet",7),"kitchen-glass-jar-high":Dt(9.9,9.9,21.8,"Scopia","Glass jar",1),upperCabinet:Dt(60,41,56.6,"Vladoffsky","Upper cabinet",7),upperCabinet2:Dt(60,41,56.6,"Vladoffsky","Upper cabinet",7),hamburger:Dt(11,11,8.6,"SaiZyca2","Hamburger",1),highCabinet:Dt(60,61.2,217,"Vladoffsky","High cabinet",6),hood:Dt(101.6,39.2,48.6,"Jay-Artist","Hood",7),kitchenHood:Dt(59.8,51.4,14.3,"Scopia","Hood",1),hotDog:Dt(21.1,7.3,6.5,"Erickfree","Hot dog",1),"induction-cooker-2-zones":Dt(30,52,.4,"Scopia","Induction cooker 2 zones",1),"induction-cooker-4-zones":Dt(56,49.5,.4,"Scopia","Induction cooker 4 zones",1),kitchenIsland:Dt(93.9,69.9,83.1,"Jay-Artist","Island",2),islandExtension:Dt(60,123.7,88.5,"Vladoffsky","Island extension",2),kitchenKnife:Dt(3.5,26.3,2.1,"Jay-Artist","Kitchen knife",1),kitchenUpperCabinet:Dt(109.4,32.1,77.1,"Jay-Artist","Upper cabinet",7),kitchenKnifeStandSet:Dt(9,27.1,21.9,"Scopia","Knife stand",1),largeFridge:Dt(92.5,80.6,184.3,"Vladoffsky","Large fridge",2),largeStove:Dt(103.9,72.3,85.2,"Jay-Artist","Large stove",2),lowerCabinet:Dt(60,61.2,88.5,"Vladoffsky","Lower cabinet",2),kitchenLowerCabinet:Dt(97.6,61.6,87.8,"Jay-Artist","Lower cabinet",2),lowerCornerCabinet:Dt(81,82.3,88.5,"Vladoffsky","Lower corner cabinet",2),tetrapak:Dt(9.6,9.5,26.5,"Tastykle3d & eTeks","Milk",1),oven:Dt(60,51.5,57.8,"Martanda","Oven",7),ovenFront:Dt(60,6.7,55,"LucaPresidente","Oven front",1),poele:Dt(25.7,43.2,5.4,"Toomy","Pan",1),casserole:Dt(17.4,30.3,8.5,"Toomy","Pan",1),paperTowelHolder:Dt(16,16,29.2,"Scopia","Paper towel holder",1),"food-box-pasta":Dt(13.9,5.4,19.7,"Scopia","Pasta box",1),pizza:Dt(29.7,30,.9,"Toomy","Pizza",1),"plate-and-ustensils":Dt(27,34,13.2,"Kator Legaz","Plate, glass and cultery",1),"ensemble-assiette-couteau-fourchette-cuillere-verre":Dt(41.7,38.9,14,"Scopia","Plate, glasses and cutlery",1),citrouille:Dt(29.4,29.4,24.7,"Sophie","Pumpkin",1),rangeHood:Dt(60,31.8,42.6,"Donypolo","Range hood",7),refrigerator:Dt(90,90,172,"Hilander","Refrigerator",2),bolDeRiz:Dt(15,15,12,"Toomy","Rice bowl",1),autocuiseur:Dt(25.8,22.5,22.8,"Tommy","Rice cooker",1),"roasted-chicken":Dt(30,20.3,19.5,"Scopia","Roasted chicken",1),saltShaker:Dt(4.1,4.1,7.9,"Jswing","Salt shaker",1),sandwichMaker:Dt(24,25.2,6.8,"Scopia","Sandwich maker",1),meubleChaussures:Dt(71.7,39.6,102.3,"Ga\xebl Bettinelli","Shoe cabinet",2),kitchenSink:Dt(97.6,61.6,97.6,"Jay-Artist & Kator Legaz & eTeks","Sink",2),sinkCabinet2:Dt(60,61.2,121.2,"Vladoffsky","Sink cabinet",2),dishwasher:Dt(45,60,84.5,"Scopia","Small dishwasher",2),kitchenSmallLowerCabinet:Dt(48.7,61.6,87.8,"Jay-Artist","Small lower cabinet",2),"small-oven":Dt(56.4,47.3,36.4,"Scopia","Small oven",1),kitchenSmallUpperCabinet:Dt(33.6,32.1,77.1,"Jay-Artist","Small upper cabinet",7),smallUpperCabinet:Dt(60,41,56.6,"Vladoffsky","Small upper cabinet",7),spiceTower:Dt(15.9,15.9,31,"Scopia","Spice tower",1),eponge:Dt(10,6,1.4,"Toomy","Sponge",1),steak:Dt(32.4,19.3,5.1,"Scopia","Steak",1),tabouretBar:Dt(51.1,44.2,101.7,"Ga\xebl Bettinelli","Stool",2),stool2:Dt(36.1,36.1,78,"Vladoffsky","Stool",2),stove1:Dt(83.3,93.6,104,"Pencilart","Stove",2),stove:Dt(33.3,60,5.6,"Doniypolo","Stove",1),toast:Dt(10.1,9.9,.8,"Toomy","Toast",1),grillePain:Dt(34.2,11.9,18,"Toomy","Toaster",1),toaster:Dt(27,15.5,17.4,"Scopia","Toaster",1),towel:Dt(14.5,13.4,45.4,"Jay-Artist","Towel",7),poubelleInox:Dt(29,34.2,65.2,"Ga\xebl Bettinelli","Trash can",2),tray:Dt(39,29.4,5.5,"Scopia","Tray",1),utensilsPot:Dt(12.2,11.1,40.2,"Oldtimer","Utensils pot",1),aspirateur:Dt(142.8,32.8,82.3,"Tommy","Vacuum",2),kitchenCabinet:Dt(60,64,85,"eTeks","Kitchen cabinet",2),meubleMicroOnde:Dt(62.6,44,118.3,"Infernal-quack","Microwave cabinet",2),sink:Dt(120,64,105.72,"eTeks","Sink",2),fridge:Dt(60,66,85,"eTeks","Fridge",2),fridgeFreezer:Dt(60,66,185,"eTeks","Fridge & Freezer",2),cabinet:Dt(80,62,86,"Robert Pastierovic","Gray cabinet",2),cabinetWithBasin:Dt(80,62,86,"Robert Pastierovic","Gray cabinet",2),bouteille:Dt(8.2,8.2,29.2,"Snduc","Plastic bottle",1),container:Dt(13.3,9.1,31,"Rlocatelli","Container",1),drawers:Dt(40,62,86,"Robert Pastierovic","Gray drawers",2),tableCuisine:Dt(120,40,88,"Infernal-quack","Table",2),kitchenaid:Dt(21.4,36,35.3,"Swno","Mixer",2),knifeStandSwap:Dt(39.15,3.5,35.6,"PrinterKiller","Knife stand",2),plasticCup:Dt(7.9,7.9,10,"Chemsciguy","Plastic cup",2),silla2:Dt(32.6,31.1,78.8,"Starkblend","Stool",2),yogurtBottle:Dt(6.85,6.85,21.2,"Tastykle3d","Yogurt bottle",2),beerGlass:Dt(15.4,10.2,16.5,"Hedgehogpro","Beer glass",2),upperCornerCabinet:Dt(81,81,72,"Vladoffsky","Upper corner cabinet",2),upperShelves:Dt(35,35,72,"Vladoffsky","Upper shelves cabinet",2),beer_bottle:Dt(5.1,5.1,20,"Poifox","Beer bottle",2),coffee_cup:Dt(8.5,8.5,13,"Dzerbs","Coffee cup",2),fork:Dt(1.9,17.85,.95,"Jay-Artist","Fork",2),kitchenblender:Dt(15.6,22.3,42.7,"PrinterKiller","Blender",2),kitchenTools:Dt(44,9.8,31.6,"Jay-Artist","Kitchen tools",2),knife:Dt(1.8,20.8,.3,"Jay-Artist","Knife",2),largePan:Dt(33.1,26.8,28.2,"Jay-Artist","Large pan",2),microwave:Dt(40.2,35.8,24.75,"Jay-Artist","Microwave",2),spoon:Dt(3.2,18,1.1,"Jay-Artist","Spoon",2),washing_machine:Dt(60,62.4,73.5,"Cattail","Washing machine",2),breadBox:Dt(56.2,27.5,27.5,"Oldtimer","Bread box",2),kitchenScale:Dt(23,23,27.5,"Oldtimer","Kitchen scale",2),espressokettle:Dt(17.9,9.4,15.2,"Krabz","Espresso kettle",2),boiteMetal:Dt(6.7,6.7,11.2,"Snduc","Metal box",2),chaiseCuisine:Dt(36.6,54.2,80.6,"Infernal-quack","Chair",2),verreFlute:Dt(4.2,4.2,17,"Geantick","Flute",2),glassDoorKitchenCabinet:Dt(132.6,36,121,"Pencilart","Glass door cabinet",2),verreLongDrink:Dt(5.5,5.5,17.8,"Geantick","Long drink glass",2),microOnde:Dt(49,35.3,27.4,"Infernal-quack","Microwave",2),mug:Dt(8,10.8,9.7,"Geantick","Mug",2),assietteVerresCouverts:Dt(37,36.2,10.9,"Sleipnir1","Plate, glasses and cutlery",2),smallGlass:Dt(10,10,7.9,"Pencilart","Small glass",2),carafeEau:Dt(31.1,31.1,30,"Sleipnir1","Water carafe",2),verreEau:Dt(7,7,7.2,"Geantick","Water glass",2),carafeVin:Dt(31.1,31.1,30,"Sleipnir1","Wine carafe",2),verreVin:Dt(7.3,7.3,10.1,"Geantick","Wine glass",2),glassdoorCabinet:Dt(40,44,80.1,"Robert Pastierovic","Gray glass door cabinet",2),mobile_cucina_60x60:Dt(60,65.5,100.6,"Ben Omari","Red cabinet",2),lavello_doppio_90x60:Dt(120,65.5,124.4,"Ben Omari","Red cabinet with basin",2),cassetti_cucina_45x60:Dt(45,65.5,100.6,"Ben Omari","Red drawers",2),isola_cucina_150x90:Dt(150,105,100,"Ben Omari","Red island",2),pensile_cucina_45x90:Dt(90,68.3,42.7,"Ben Omari","Upper cabinet",2),pensile_cucina_60x70:Dt(70,49.5,59,"Ben Omari","Glass door cabinet",2),capa:Dt(66.5,50,61.5,"Ben Omari","Hood",2),piano_cottura:Dt(60,61.6,96.5,"Ben Omari","Cooker",2),frigorifero:Dt(60,72.5,218.2,"Ben Omari","Fridge",2),ceramicHob:Dt(60,52,.9,"Emmanuel Puybaret","Ceramic hob",2),cornerCabinet:Dt(79,78,86,"Pencilart","Wood corner cabinet",2),"3DrawerCabinet":Dt(52.66595,64,86,"Pencilart","Wood drawer cabinet",2),"2GlassDoorCabinet":Dt(96,39.2,70,"Pencilart","Wood glass door cabinet",2),"2DoorUpperCabinet":Dt(96,39.2,70.9,"Pencilart","Wood upper cabinet",2),"2DoorLowerCabinet":Dt(96,64,86,"Pencilart","Wood lower cabinet",2),"1GlassDoorCabinet":Dt(45.2,39.2,70,"Pencilart","Wood glass door cabinet",2),"1DoorUpperCabinet":Dt(45.2,39.2,70.9,"Pencilart","Wood upper cabinet",2),"1DoorLowerCabinet":Dt(51.9,64,86,"Pencilart","Wood lower cabinet",2),refridgerator:Dt(76.4,65,167,"Pencilart","Refrigerator",2),pantry:Dt(98.3,64,184.6,"Pencilart","Wood pantry",2),kitchenSinkWithMarble:Dt(90.9,64,111.35,"Pencilart","Wood cabinet with sink",2),cornerChina:Dt(77,77,171.5,"Pencilart","Wood corner China",2),couteauADecouper:Dt(3.1,31.9,1.6,"Toomy","Kitchen knife",2),couteauAPain:Dt(2.5,28.6,1.2,"Toomy","Bread knife",2),plancheADecouper:Dt(35,23.8,1.7,"Toomy","Chopping board",2),barCusisine:Dt(121.1,45,108.4,"Ga\ufffdl Bettinelli","Bar table",2),frigo:Dt(57,60,113.2,"Ga\ufffdl Bettinelli","Fridge",2),desserte:Dt(46.7,37.2,85.8,"Ga\ufffdl Bettinelli","Cart",2),casierBouteilles:Dt(60,25,60,"Sophie","Bottles rack",2),cookingPlate:Dt(40,20.5,3,"Peter Glas","Cooking plate",2),gaz:Dt(31,31,63.14828,"Sophie","Gaz bottle",2),washer_dryer:Dt(59.5,55,85,"Ola-Kristian Hoff","Washer dryer",2),ashtray:Dt(7.8,7.8,3,"Kator Legaz","Ashtray",2),"bullet-trash-can":Dt(33,33,74,"Kator Legaz","Bullet trash can",2),"12-oz-glass":Dt(7,7,9.7,"Kator Legaz","Glass",2),"highball-glass":Dt(6,6,12.1,"Kator Legaz","Glass",2),"oil-servers":Dt(14.3,7.2,34.6,"Kator Legaz","Oil servers",2),"dinner-plate":Dt(25,17.9,2.2,"Kator Legaz","Oval plate",2),"bread-plate":Dt(20,20,2.2,"Kator Legaz","Plate",2),"propane-stove":Dt(60.05,59.6,58.4,"Kator Legaz","Propane stove",2),"red-wine-bottle-01":Dt(8.5,8.5,30,"Kator Legaz","Wine bottle",2),angolo:Dt(65,65,78,"LucaPresidente","Corner cabinet",2),cucina:Dt(80,66,81.1,"LucaPresidente","Cooker",2),curva:Dt(60,60,78,"LucaPresidente","Corner shelves",2),curvaEsterna30:Dt(30,60,78,"LucaPresidente","Corner shelves 30\ufffd",2),curvaInterna30:Dt(30,60,78,"LucaPresidente","Corner cabinet 30\ufffd",2),doppio:Dt(80,63.4,78,"LucaPresidente","Lower cabinet",2),pensileAngolo:Dt(65,65,60,"LucaPresidente","Upper corner cabinet",2),pensileCurva:Dt(27.5,27.5,60,"LucaPresidente","Upper corner shelves",2),pensileDoppio:Dt(80,33.4,60,"LucaPresidente","Upper cabinet",2),pensileVetro:Dt(40,29.75,60,"LucaPresidente","Glass door cabinet",2),pianoIsola:Dt(40,120,78,"LucaPresidente","Island extension",2),singolo:Dt(40,63.4,78,"LucaPresidente","Lower cabinet",2),lavello:Dt(80,63.4,95,"LucaPresidente","Sink",2),cassettiera:Dt(40,63.4,78,"LucaPresidente","Drawers",2),mobilettoGrande:Dt(80,63.4,141,"LucaPresidente","Large pantry",2),mobilettoPiccolo:Dt(40,63.4,141,"LucaPresidente","Pantry",2),gasHob:Dt(60,40,3.1,"LucaPresidente","Gas hob",2),old_jar:Dt(24.2,20.2,25,"Scopia","Old jar",2),pottery:Dt(11,11,9,"Scopia","Pottery",2),sushi_tray:Dt(32,24.8,4.5,"Scopia","Sushi tray",2),kitchen_tool1:Dt(7,46.5,3.3,"Scopia","Tool",2),kitchen_tool2:Dt(9.6,44.6,4.7,"Scopia","Tool",2),kitchen_tool3:Dt(7.9,46.4,2.4,"Scopia","Tool",2),kitchen_tool4:Dt(6,43.6,3,"Scopia","Tool",2),wine_bottle:Dt(7.8,7.8,30,"Scopia","Wine bottle",2),bar_chair:Dt(44.7,48.6,107.8,"Scopia","Bar chair",2),kitchen_stool:Dt(45.5,45.5,98.4,"Scopia","Stool",2),coffee_machine:Dt(58.2,40.2,36.4,"Scopia","Coffee machine",2),creamer:Dt(12.2,8.4,8.9,"Scopia","Creamer",2),cup:Dt(12,12,6.8,"Scopia","Cup",2),sugar:Dt(10.1,10.1,10.1,"Scopia","Sugar",2),teapot:Dt(21.7,14.7,21.3,"Scopia","Teapot",2),shovel:Dt(27,53.8,16.1,"Scopia","Shovel",2),"shopping-basket":Dt(60,50.2,61.1,"Scopia","Shopping basket",2),squeezer:Dt(16.2,12,8.1,"Scopia","Squeezer",2),deepFryerWithFrenchFries:Dt(27.9,56.8,27.8,"Scopia","Deep fryer",2),stoneGrillDevice:Dt(31.6,25.5,11.6,"Scopia","Stone grill device",2),"food-spaghetti-box":Dt(27.7,4.8,9,"Scopia","Spaghetti box",2),"kitchen-glass-jar-low":Dt(9.9,9.9,12.8,"Scopia","Glass jar",2),"waitress-table-on-wheels":Dt(83.5,41.6,89.6,"Scopia","Waitress table on wheels",2)},Ft={"convertible-sofa-BZ-closed":Dt(143.2,102.3,87.3,"Scopia","Convertible sofa BZ",2),clicClac:Dt(182,93.3,93.1,"Ga\xebl Bettinelli","Sofa bed",2),chair_granmother:Dt(61,58,105,"Ola-Kristian Hoff","Armchair",2),fotel:Dt(73.5,61.1,69.7,"TripleJ","Armchair",2),fauteuil:Dt(73.5,61.1,69.7,"TripleJ","Armchair",2),armchair3:Dt(59.1,69.4,94.9,"eTeks","Armchair",2),luckyBamboo:Dt(15.5,14.9,34,"Renderbob","Bamboo",1),black_table:Dt(170.1,90,75,"Scopia","Black table",2),"bonsai-tree":Dt(44.5,38.2,42.9,"Scopia","Bonsai tree",1),bookcase:Dt(166.4,33.1,186.4,"Gerardbelnder","Bookcase",2),dining_room:Dt(255.6,36.4,175,"Scopia","Bookcase",2),cabinet2:Dt(223.4,64.5,210.6,"Peter Smolik","Bookcase",2),elementHautSalon:Dt(51.9,42.6,163.2,"Ga\xebl Bettinelli","Bookcase",2),"boston-fern":Dt(65,61,44.5,"Scopia","Boston fern",1),cactus:Dt(14.8,12.8,22.5,"Evivivi","Cactus",1),carpet:Dt(160,225,1,"Emmanuel Puybaret","Carpet",5),tourRangeCD:Dt(19.9,17,179.6,"Ga\xebl Bettinelli","CD rack",2),chair:Dt(42,47.4,88,"Scopia","Chair",2),kitchenChair:Dt(43,44,91,"Cisco336","Chair",2),thonet:Dt(54.7,57.7,75.4,"JoelEapen","Chair",2),chair3:Dt(43.3,50.4,90.6,"MatBot","Chair",2),chair4:Dt(48.4,44.2,88.4,"Scopia","Chair",2),white_kitchen_chair:Dt(42.7,46.9,86,"Scopia","Chair",2),childChair:Dt(38.2,39.5,67,"Radio hate","Child chair",2),children_chair:Dt(28,28,51,"Scopia","Children chair",2),children_table:Dt(63,48,45,"Scopia","Children table",2),christmas_tree:Dt(127.8,129.6,202.9,"Scopia","Christmas tree",2),clear_sofa:Dt(193.9,75.9,80,"Scopia","Clear sofa",2),coffee_table:Dt(89.6,45.9,47.5,"Scopia","Coffee table",2),table_wood_and_iron:Dt(121.4,75.9,50.3,"Scopia","Coffee table",2),tableBasse2:Dt(112.5,59.8,39.1,"Ga\xebl Bettinelli","Coffee table",2),L_shaped_sofa:Dt(233.7,143.6,80,"Nhumrod","Corner sofa",2),sofa:Dt(147,87,87,"eTeks","Corner sofa",2),couch2:Dt(230,159.7,86.6,"Karagez","Couch",2),couchTable:Dt(101.1,70.1,44,"Jabberwalky","Couch table",2),decorativePlant:Dt(31.8,32.2,60.6,"Nmn9","Decorative plant",1),dresserWithDrawers:Dt(160.5,51.9,81,"Hsdevys","Dresser with drawers",2),batterie:Dt(104.9,92.8,115.6,"Sophie","Drums",2),dvd:Dt(43,28.2,5.6,"Scopia","DVD player",1),fireplace1:Dt(115.4,35.1,105,"Scopia","Fireplace",6),fireplace2:Dt(121,44.9,250,"Scopia","Fireplace",6),flowers:Dt(20.9,15.9,50,"Peter Smolik","Flowers",1),foldingChair:Dt(50.8,60,91.2,"Giovagiova","Folding chair",2),folding_chair:Dt(49,50.9,76.5,"alaX","Folding chair",2),"folding-table":Dt(186,77.6,75,"Kator Legaz","Folding table",2),"full-bookcase":Dt(89.8,34.7,221,"Kator Legaz","Full bookcase",2),"futon-couch":Dt(196,89.8,87.8,"Kator Legaz","Futon couch",2),glassDoorCabinet:Dt(70,38.7,198.2,"eTeks","Glass door cabinet",2),"glass-dining-table":Dt(161.8,97.6,75,"Kator Legaz","Glass table",2),table_half_round:Dt(102,58.6,78,"Ola-Kristian Hoff","Half round table",2),mediumIndoorPlant:Dt(72.5,76.6,67.9,"Betomo16","Indoor plant",1),"ps4-joystick":Dt(16.2,10.6,6.2,"Scopia","Joystick",1),longcase_clock:Dt(50,30,200,"Ola-Kristian Hoff","Longcase clock",2),"microphone-with-foot":Dt(67.4,98.7,142.8,"Scopia","Microphone with foot",2),oakTable:Dt(124,124,74.1,"Doug C","Oak table",2),chaiseOrange:Dt(41.2,46.7,95,"Icybones","Orange chair",2),orchids:Dt(31.1,35.3,57.4,"Elysia","Orchids",1),"oriental-rug":Dt(185.8,257.7,2.5,"Kator Legaz","Oriental rug",5),osakaChair:Dt(47.5,52.5,77,"Daniliescudsg","Osaka chair",2),pianoBench:Dt(61.9,35.5,52.2,"Simonrepp","Piano bench",2),pinewoodRackLowHeight:Dt(89.8,30.2,56.5,"Dingenskirchen","Pinewood rack low height",2),pinewoodRackMediumHeight:Dt(89.8,30.2,143,"Dingenskirchen","Pinewood rack medium height",2),augalas:Dt(60.9,34.9,31.5,"MZiemys","Plant",1),maceta:Dt(59,65,58,"Scopia","Plant",1),plant:Dt(81.8,69,117.1,"Ndakasha","Plant",1),playstation4:Dt(32.7,29.5,5.5,"Scopia","PlayStation4",1),puff:Dt(91.3,84.8,60.3,"Scopia","Puff",2),rocking_chair:Dt(65,80,109,"Ola-Kristian Hoff","Rocking chair",2),roses:Dt(22.8,27.3,52.9,"Scopia","Roses",1),"round-carpet":Dt(80,80,.5,"Scopia","Round carpet",5),"round-table":Dt(110,110,75.7,"Scopia","Round table",2),ryokanChair:Dt(53.3,59,54.8,"Scopia","Ryokan chair",1),meubleHiFiHaut:Dt(155.9,41.4,183,"Ga\xebl Bettinelli","Shelf unit",2),simple_sofa:Dt(179.8,67.3,95,"Scopia","Sofa",2),sofa1:Dt(234,79.4,79.2,"Peter Smolik","Sofa",2),sofa2:Dt(200,86.5,88,"eTeks","Sofa",2),stainlessSteelShelf:Dt(78,28,15,"N Mi","Stainless steel shelf",7),shelves_storage_steel:Dt(80,30,180,"Ola-Kristian Hoff","Steel shelves",2),stool_small:Dt(30,30,45,"alaX","Stool",2),green_stool:Dt(42.9,42.9,46,"Dalenryder","Stool",2),stool:Dt(40,40,46,"eTeks","Stool",2),succulentPlant:Dt(13.7,12.9,11.4,"Nmn9","Succulent plant",1),"table-on-trestles":Dt(160,66.4,76.1,"Scopia","Table on trestles",2),white_kitchen_table:Dt(110,70.1,75,"Scopia","Table",2),table:Dt(144.3,93.4,72.4,"Jay-Artist","Table",2),table2:Dt(144.3,93.4,72.4,"Jay-Artist","Table",2),"table-with-leaning-feet":Dt(150,65,75,"Scopia","Table",2),tableCuisine2:Dt(174.2,91.1,75,"Icybones","Table",2),tableWithTablecloth:Dt(80.3,81.2,75,"Sizzler","Table with table cloth",2),"tv-remote-control":Dt(4.5,18,1.7,"Scopia","TV remote control",1),meubleHiFiBas:Dt(103.8,44.4,33.3,"Ga\xebl Bettinelli","TV shelf unit",2),"video-projector":Dt(47,37.8,15.1,"Scopia","Video projector",1),winchesterArmchair:Dt(112,93.4,80.4,"Gnanasaireddy","Winchester armchair",2),wirelessOfficePhone3:Dt(11.2,15.8,17.1,"DennisH2010","Wireless phone",1),shelves_storage_wood:Dt(78,31.5,171,"Ola-Kristian Hoff","Wood shelves",2),yuccaPlant:Dt(107.9,102.4,180,"Betomo16","Yucca",2),desklamp:Dt(24.4,24.4,40,"ColdShiverGames","Desk lamp",1),JapaneseLantern:Dt(15.6,15.6,35.1,"Mindfront","Japanese lantern",1),lamp:Dt(30.5,30.5,40.9,"Bulgakov","Lamp",1),little_lamp2:Dt(31,31,43,"Scopia","Little lamp",1),"MIDI-keyboard":Dt(80,25.3,8.4,"Kator Legaz","Musical keyboard",1),cornerSofa:Dt(233,168,87,"eTeks","Corner sofa",2),aquarium:Dt(60,30,35,"eTeks","Aquarium",1),armchair:Dt(87,92,87,"eTeks","Armchair",2),armchair2:Dt(80,78.1,77.2,"eTeks","Armchair",2),coffeeTable:Dt(125,46,40,"eTeks","Coffee table",2),roundTable:Dt(126,126,74,"eTeks","Round table",2),etageres:Dt(150,39,150,"Icybones","Shelves",2),etagereEnfant:Dt(70,30.1,188.8,"Icybones","Shelves",2),squareTable:Dt(115,115,74,"eTeks","Square table",2),guitar:Dt(38.6,97.6,6,"Robert Pastierovic","Guitar",1),dresser:Dt(170,50,64.7,"eTeks","Dresser",2),fireplace:Dt(145,85,250,"eTeks","Fireplace",2),cheminee:Dt(145,85,250,"eTeks","Fireplace cheminee",2),AtorHaut:Dt(60.2,52.8,203.1,"Ga\xebl Bettinelli","Stove",2),filledBookcase:Dt(85,35,180,"eTeks","Filled bookcase",2),piano:Dt(140,43,82,"eTeks","Piano",2),tabouretPiano:Dt(35.6,37.6,48,"GdB","Piano stool",2),pianoDroit:Dt(128,55.4,121,"GdB","Upright piano",2),beige_sofa:Dt(193.9,75.9,80,"Scopia","Clear beige sofa",2),furnace:Dt(66.7,97.7,125.6,"Scopia","Furnace",2),deer:Dt(4.6,10,20,"Sizzler","Deer",2),oakChair:Dt(49.1,61.2,117.8,"Doug C","Oak chair",2),pianoAQueue:Dt(132,170,178,"Dante","Grand piano",2),plasticChair:Dt(44.4,58.4,82,"exL","Chair",2),shelves:Dt(79,39.4,79,"jclevet.net","Shelves",2),televisionCabinet:Dt(135.4,69.3,160,"Niebieski","Television cabinet",2),verticalShelves:Dt(44,39,185,"jclevet.net","Vertical shelves",2),electricGuitar:Dt(34.5,32.1,110,"Seavenois","Electric guitar",2),littlePlant:Dt(26.6,26.6,23.2,"Rameshrj","Little plant",2),sillaBlanca:Dt(50.5,58.4,85,"Jviersalas","Chair",2),couch:Dt(207.4,87.6,85.6,"TowerCG","Couch",2),modernArmchair:Dt(77.3,84.9,86.5,"Dreadbwai","Armchair",2),antiqueChair:Dt(49.8,63.2,98.2,"Niuskir","Chair",2),chairWithCushion:Dt(44.1,44.1,94.8,"MZiemys","Chair with cushion",2),winchesterSofa:Dt(231.9,93.8,80.4,"Gnanasaireddy","Winchester sofa",2),designChair:Dt(77.9,62.8,99.4,"Semhustej","Chair",2),arbolito:Dt(25.4,26.2,38,"Hermescn","Christmas tree",2),cafe_set_mota_chair:Dt(60.9,55.8,78.3,"Voodoc","Chair",2),cafe_set_mota_table:Dt(62.2,62.2,74,"Voodoc","Round table",2),cafe_set_tonon_chair:Dt(48,53.3,82.2,"Voodoc","Chair",2),cafe_set_tonon_table:Dt(66,52.8,64.4,"Voodoc","Table",2),ella_chair_f:Dt(46,57,92,"Sizzler","Chair",2),leaf_chair:Dt(67.1,81.3,82.65,"Voodoc","Chair",2),spatifilum:Dt(79.8,74.9,87.5,"HeraSK","Spathiphyllum",2),tvStand:Dt(135.1,46.5,52.6,"Leximumxii","TV stand",2),armchair1:Dt(100.5,88.2,80,"Aymanslman","Armchair",2),spider_plant:Dt(66.6,63.6,34.2,"Nmn9","Spider plant",2),tulip:Dt(38.1,43.8,39.9,"Nmn9","Tulips",2),white_lily:Dt(37.1,31.2,60,"Nmn9","White lily",2),plaidChair:Dt(40.5,42.6,80,"Cezar","Chair",2),sofa3:Dt(204.2,76.9,80,"3dModeling","Sofa",2),tulips:Dt(31.8,25.2,42.7,"Nad451","Tulips",2),couch3:Dt(201,90.9,84.3,"MatBot","Couch",2),barStool:Dt(33,33,74,"Geantick","Bar stool",2),bookcase2:Dt(82,44,150,"Geantick","Bookcase",2),computerWorkstation:Dt(124,138.5,182,"GdB","Computer desk",2),cornerWorkstation:Dt(109,108,171,"Geantick","Computer desk",2),bocalPoisson:Dt(33.5,33.5,28.4,"Geantick","Fish bowl",2),tableGnome:Dt(103.4,66.2,44,"Sleipnir1","Gnome table",2),rectangularTable:Dt(175,100.5,74,"Sleipnir1","Rectangular table",2),squareCoffeeTable:Dt(67.1,67.1,44,"GdB","Square coffee table",2),tableBasseBois:Dt(95,50,37.8,"Infernal-quack","Wooden coffee table",2),woodTable:Dt(171,106,74,"Pencilart","Wood table",2),priseTV:Dt(8,1.1,8,"Sheep","TV plug",2),petiteTableSalon:Dt(32,32,57,"Snduc","Small table",2),bibliothequeDroite:Dt(50,40.1,229,"Snduc","Bookcase",2),allenOrgan:Dt(185.9,155.9,186.3,"Don Ravey","Allen organ",2),highBoyDresser:Dt(96.6,56.7,168.4,"Don Ravey","High boy dresser",2),smallbookshelves:Dt(87.4,33.5,105.9,"Don Ravey","Small bookshelves",2),salontafel:Dt(100,100,30,"Theo Blonk","Coffee table",2),couchTwoSeats:Dt(198,90.6,72,"Theo Blonk","Couch two seats",2),kleed_grieks:Dt(170,120,1,"Theo Blonk","Greek carpet",2),pinewoodRackFullHeightHalfWidth:Dt(48.8,30.2,227,"Dingenskirchen","Pinewood rack full height half width",2),pinewoodRackFullHeight:Dt(89.8,30.2,227,"Dingenskirchen","Pinewood rack full height",2),latticeChair:Dt(43,42.3,87.3,"Pencilart","Lattice chair",2),meubleMural:Dt(261.5,55.3,215,"Icybones","Bookcase",2),CDrack:Dt(65.7,20.3,122.4,"Peter Smolik","CD rack",2),displayCabinet:Dt(84,84,179.8,"Peter Smolik","Display cabinet",2),hallTable:Dt(117.42,62.9,87.62,"Peter Smolik","Dresser",2),potplant2:Dt(96.68,96.19,85.35,"Peter Smolik","Plant",2),roundTable2:Dt(53.81,53.81,68.8,"Peter Smolik","Round table",2),shelving:Dt(119,30.9,45.6,"Peter Smolik","Shelving",2),sofa3Single:Dt(138.43,102.7,91.63,"Peter Smolik","Armchair",2),sofa4:Dt(185,74,83.54,"Peter Smolik","Sofa",2),couchPoofyPillows:Dt(156.1,70.6,75,"Pencilart","Couch",2),largeCouch:Dt(236.7,76.7,75,"Pencilart","Large couch",2),singleChair:Dt(101.2,77.1,75,"Pencilart","Armchair",2),throwPillow:Dt(35,17,32.1,"Pencilart","Pillow",1),counter:Dt(191.2,288.4,93.3,"Wrosun","Counter",2),tableBasse:Dt(112.5,59.8,39.1,"Ga\ufffdl Bettinelli","Coffee table",2),pancaFratinoSing:Dt(85,49.8,85,"Nictac","Bench",2),tavoloFratino:Dt(110,70.1,75,"Nictac","Table",2),chair_high:Dt(65,70,135,"Ola-Kristian Hoff","Armchair",2),shelves_storage_wood2:Dt(77,37,170,"Ola-Kristian Hoff","Wood shelves",2),table_granmother_marble:Dt(120,120,70,"Ola-Kristian Hoff","Marble table",2),armchair_wing:Dt(85,90,112,"Ola-Kristian Hoff","Armchair",2),bar_stool:Dt(44.5,42,70,"alaX","Bar stool",2),dropLeafTable:Dt(260,78,72,"Seber Rider","Drop leaf table",2),"mid-century-chair":Dt(73.5,84.4,80,"Kator Legaz","Armchair",2),"chair-ottoman":Dt(77,155.2,100,"Kator Legaz","Armchair ottoman",2),"bar-stool":Dt(53.2,59.3,110,"Kator Legaz","Bar stool",2),"dining-chair":Dt(42.3,57.3,100,"Kator Legaz","Chair",2),"utility-shelving":Dt(60,30,120,"Kator Legaz","Shelves",2),"mid-century-bench-sofa":Dt(278.9,107.3,75,"Kator Legaz","Sofa",2),"mid-century-sofa":Dt(199,84,80,"Kator Legaz","Sofa",2),credenza:Dt(166,50,78,"LucaPresidente","Sideboard",2),sedia:Dt(44.7,45.8,79,"LucaPresidente","Chair",2),tavolino:Dt(60,30,27,"LucaPresidente","Coffee table",2),tavolo:Dt(160,70,78,"LucaPresidente","Table",2),box_room:Dt(157.6,47.8,104,"Scopia","Box",2),saloon_table:Dt(143.9,64.1,51.1,"Scopia","Coffee table",2),table3:Dt(100,100,90.7,"Scopia","Table",2),table4:Dt(140,90,75,"Scopia","Table",2),wooden_table_office:Dt(151.1,80.4,77.5,"Scopia","Table",2),tubular_chair:Dt(53.2,49.9,81.4,"Scopia","Chair",2),metal_glass_table:Dt(160.8,89.7,76.7,"Scopia","Glass table",2),glass_table_office:Dt(186.05267,80.29927,76.64766,"Scopia","Glass table",2),desk_table:Dt(191.6,88.4,76.7,"Scopia","Glass table",2),bar_table:Dt(80,80,102.4,"Scopia","Bar table",2),beige_sofa_2seats:Dt(158.86,73.5,86.6,"Scopia","Sofa 2 seats",2),burlap_sofa:Dt(170,90,79.7,"Scopia","Burlap sofa",2),leather_sofa:Dt(192.5,90.3,100.1,"Scopia","Sofa",2),living_room_table:Dt(106.7,72.5,53.6,"Scopia","Table",2),modern_armchair:Dt(63.1,52.9,72,"Scopia","Modern armchair",2),plastic_chair:Dt(48.3,55.7,96.5,"Scopia","Plastic chair",2),calla_lily_with_roses:Dt(43.6,38.6,52.4,"Scopia","Flowers",2),sofa_white_beige:Dt(173.8,81.6,85,"Scopia","Sofa",2),ficus:Dt(42.5,41.5,82.4,"Scopia","Ficus",2),"coffee-table2":Dt(123.8,51.2,47.7,"Scopia","Coffee table",2),lavender:Dt(13.4,12,53.5,"Scopia","Lavender",2)},Mt={ceilingFan:Dt(91.3,79.8,39.2,"PrinterKiller","Ceiling fan",1)},At={"window-blinds":Dt(100,7,120,"Kator Legaz","Window blind",7),cover_outdoor1:Dt(100,7,120,"Kator Legaz","Outdoor window blind",7),storeCalifornien:Dt(200.4,16.2,170,"Julie Fabre","Blind",7),curtain:Dt(110,5,180,"Scopia","Curtain",7),blind:Dt(100,7,120,"Scopia","Curtain Blind",7),curtains:Dt(70,15,200,"eTeks","Curtains",7)},Rt={man:Dt(60,25,180,"Scopia","Presence",1),mannequinMale:Dt(60,25,180,"Scopia","Presence",1),boyStanding:Dt(60,35,180,"Scopia","Presence",1),male01:Dt(55,45,180,"Scopia","Presence",1),male03:Dt(55,40,180,"Scopia","Presence",1),male02:Dt(80,50,180,"Scopia","Presence",1),holdingMale01:Dt(60,60,180,"Scopia","Presence",1),mannequinBrunette:Dt(60,25,180,"Scopia","Presence",1),female01:Dt(55,55,170,"Scopia","Presence",1),female02:Dt(60,50,170,"Scopia","Presence",1),female03:Dt(60,60,170,"Scopia","Presence",1),girlStanding:Dt(40,40,165,"Scopia","Presence",1),holdingFemale01:Dt(50,60,170,"Scopia","Presence",1),holdingFemale02:Dt(70,70,170,"Scopia","Presence",1),holdingFemale03:Dt(50,50,170,"Scopia","Presence",1),nourrison:Dt(30,50,15,"Scopia","Presence",1),boySitting:Dt(50,60,110,"Scopia","Presence",1),sitMale01:Dt(60,70,110,"Scopia","Presence",1),sitMale02:Dt(60,70,110,"Scopia","Presence",1),sitMale03:Dt(60,90,70,"Scopia","Presence",1),sitFemale03:Dt(50,60,110,"Scopia","Presence",1),girlSittingTable:Dt(35,60,110,"Scopia","Presence",1),sitFemale02:Dt(75,100,70,"Scopia","Presence",1),girlSittingGround:Dt(60,55,70,"Scopia","Presence",1),boyLying:Dt(60,180,70,"Scopia","Presence",1),lyingDownMale02:Dt(60,170,60,"Scopia","Presence",1),lyingDownMale01:Dt(60,180,30,"Scopia","Presence",1),lyingDownFemale01:Dt(70,150,70,"Scopia","Presence",1),dog:Dt(30,90,50,"Scopia","Presence",1),cat:Dt(18,35,35,"Scopia","Presence",1),siameseCat:Dt(13,60,35,"Scopia","Presence",1),rabbit:Dt(15,25,30,"Scopia","Presence",1),horse2:Dt(60,250,190,"Scopia","Presence",1),chicken:Dt(24.2,32.8,45.6,"CDmir230","Chicken",1),bulldog:Dt(38.8,64.5,47.4,"Priide","Bulldog",1),horse:Dt(58.7,229.2,193,"B2przemo","Horse",1),"female-01-casual-clothing":Dt(47.5,37.1,170,"Kator Legaz","Female",1),"male-01-suit":Dt(55.9,41.3,185,"Kator Legaz","Male",1),sitFemale01:Dt(56.2,81.7,75.8,"Reallusion","Sitting female",1),fille:Dt(49.1,22.9,146.8,"Scopia","Mannequin girl",1),boy:Dt(53.9,27.3,159.6,"Scopia","Mannequin boy",1)},Lt={"internal-unity-air-conditioning":Dt(88.5,19.8,28.5,"Scopia","Air conditioning - Internal unit",7)},Bt={CCTV:Dt(14,14,11.7,"Scopia","CCTV",1),surveillanceCamera:Dt(22.9,39,18.3,"Starkerg","Surveillance camera",7)},Wt={"wall-flat-tv":Dt(102.8,10.9,65.9,"Scopia","Wall flat TV",7),curvedTVForTable:Dt(126.3,18.1,79.9,"Jabberwalky","Curved TV",1),curvedWallOLEDTV:Dt(151,13,87,"RonnieTantriady","Curved wall TV",7),flatTV:Dt(121,30,79.3,"eTeks","Flat TV",1),tvUnit:Dt(100,52,93,"eTeks","TV unit",2),led_tv:Dt(77.5,14.2,50.8,"Nhumrod","TV",2),ecran16_9:Dt(86.7,28.1,58,"Geantick","TV 16:9",2),TVCenter:Dt(77.2,53.8,129.9,"Pencilart","TV center",2),tv:Dt(56,31.9,50,"Scopia","TV 16:9",2),contemp_living_room:Dt(330.9,40.3,199.5,"Scopia","Contemporary living room",2),laptop:Dt(33.9,25.3,26.6,"Mayollo","Laptop",1),monitorLCD:Dt(66.4,30.7,56.8,"Carvalho","Monitor LCD",1),portable:Dt(30,25.3,19.2,"Sleipnir1","Laptop",2),"apple-ibook-2001":Dt(28.5,27.2,22.9,"Kator Legaz","Apple iBook",2),"apple-imac-1998":Dt(42.5,50,40.1,"Kator Legaz","Apple iMac 1998",2),apple_pc:Dt(44,36.2,38,"Scopia","Apple iMac 2004",2),iphone:Dt(5.8,11.5,.9,"Bheema","Apple iPhone",1),mobile:Dt(4.9,11,1.3,"Songkro","Mobile phone",1),tablet:Dt(17,24,.8,"Scopia","Tablet",1),intercom_with_screen:Dt(19,6.2,36,"Scopia","Intercom with screen",7),thermometer:Dt(7.7,5.9,17.1,"DennisH2010","Thermometer",2),appleIpod:Dt(6.2,10.3,1.6,"Snduc","Apple iPod",2)},Vt={abdominalBench:Dt(67.2,192.9,86.9,"Muhtesemozcinar","Abdominal bench",2),livreAvecReliure:Dt(17.6,10.9,3.8,"Toomy","Book",1),book:Dt(28.1,18.4,2.4,"Jay-Artist","Book",1),livres:Dt(24,16.9,26.9,"Toomy","Books",1),cageFuret:Dt(79,50,74.5,"Ga\xebl Bettinelli","Cage",1),"cardboard-box":Dt(55,35,30,"Scopia","Cardboard box",1),arbreAChat:Dt(65,48.8,89.6,"Scopia","Cat tree",2),clock:Dt(33.4,1.9,33.4,"Robert Pastierovic","Clock",7),clock2:Dt(30,3,30,"alaX","Clock",7),crate:Dt(60,58.9,59.4,"GyngaNynja","Crate",1),dart_game:Dt(45.3,16.3,45.3,"Scopia","Dart game",7),doormat:Dt(60,30,1.1,"Scopia","Doormat",5),electric_water_heater:Dt(45.6,45.9,61.9,"Scopia","Electric water heater",1),electricWheelchair:Dt(55.4,88.6,91.4,"Scopia","Electric wheelchair",2),emergencySign:Dt(30,3.5,9,"Marcinc53","Emergency sign",7),flipper:Dt(72,132.6,184.8,"Scopia","Flipper",2),foldedNewspaper:Dt(29.3,20.2,2.1,"Scopia","Folded newspaper",1),"folding-armchair":Dt(59.2,60.6,90.7,"Scopia","Folding armchair",2),table_football:Dt(150.3,124.6,100.9,"Jeff2207","Football table",2),ButterflyFrame:Dt(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Butterfly",7),frame:Dt(50,2.2,35,"eTeks","Frame",7),frame1:Dt(14.5,14.5,19.6,"Scopia & eTeks","Frame Chambord",1),frame3HorizontalNorwayPhotos:Dt(25.4,3,52.5,"Emmanuel Puybaret","Frame Norway photos",7),frame3VerticalSummerPhotos:Dt(52.5,3,25.4,"Kator Legaz","Frame summer photos",7),HaiVanPassFrame:Dt(77.2,1.5,47.9,"Emmanuel Puybaret","Frame Hai Van Pass",7),gaz_water_heater:Dt(40.5,34.5,67.6,"Scopia","Gaz water heater",1),gift:Dt(23.2,18.1,25.1,"Tadine","Gift",1),glasses:Dt(15,14.4,2.8,"Scopia","Glasses",1),marteau:Dt(34.6,12.9,3.3,"Scopia","Hammer",1),cendrier:Dt(12,12,3.4,"Scopia","Ash tray",1),headphones:Dt(18.9,8.2,20,"Alaskaman","Headphones",1),"indoor-bike":Dt(71.8,101.2,131.3,"Scopia","Indoor bike",2),intercom:Dt(9.8,5.4,36.4,"Scopia","Intercom",7),keys:Dt(11.5,11.4,2.9,"Scopia","Keys",1),litiere:Dt(28.9,50.2,42.9,"Scopia","Litter",2),lockedLocker:Dt(20,22,40,"Twin97","Locked locker",1),revue:Dt(20,28,.6,"Scopia","Magazine",1),pileMagazines:Dt(27.3,33.7,1.2,"Toomy","Magazines pile",1),mini_stereo:Dt(48.9,21,21,"Scopia","Mini stereo",1),mirror:Dt(40,.5,40,"Emmanuel Puybaret","Mirror",7),mower:Dt(51,96.5,104.2,"Scopia","Mower",2),bdOuverte:Dt(42.4,29.8,2.6,"Toomy","Opened comics book",1),revueOuverte:Dt(39.3,28.2,2.8,"Scopia","Opened magazine",1),ovalMirror:Dt(55,1,105,"Emmanuel Puybaret","Oval mirror",7),pallet:Dt(120,120.4,12,"Shivraj","Pallet",1),poolTable:Dt(256,139.2,82.3,"Jeffie","Pool table",2),"punching-ball":Dt(45.9,45.9,152.8,"Scopia","Punching ball",2),wheelchairSymbol:Dt(149,149,.1,"Emmanuel Puybaret","PWD symbol",7),radiator3:Dt(55.4,20.7,64.3,"Testinator","Radiator",7),rectangularMirror:Dt(50,1,70,"Emmanuel Puybaret","Rectangular mirror",7),reflex_camera:Dt(12.5,14.9,9.8,"Scopia","Reflex camera",1),japanese_style_screen:Dt(178,15.8,189,"Scopia","Japanese style screen",2),tournevis:Dt(25.5,3.1,3.1,"Scopia","Screwdriver",1),sewing_machine:Dt(52,12,44,"Ola-Kristian Hoff","Sewing machine",1),shippingContainer:Dt(243,606,259,"Bhoult","Shipping container",2),"smoke-detector":Dt(10,1.8,10,"Scopia","Smoke detector",7),ballonFoot:Dt(22,22,22,"DooL","Soccer ball",2),speaker2:Dt(22.1,25.4,35.4,"Nhumrod","Speaker",1),"square-double-switch":Dt(8.5,1.1,8.5,"Scopia","Square double switch",7),frame_square:Dt(100,10,100,"Ola-Kristian Hoff & Annik","Square frame",7),"square-switch":Dt(8.5,1.1,8.5,"Scopia","Square switch",7),"square-plug-TypeB":Dt(8.5,.7,8.5,"Scopia","Square type B plug",7),"square-plug-TypeE":Dt(8.5,.7,8.5,"Scopia","Square type E plug",7),"step-ladder-metal":Dt(57.8,75.9,180,"Step ladder","Scopia",2),suitcase:Dt(99.8,31.5,72.5,"Pyrophorus","Suitcase",1),table_tennis:Dt(274,173,96,"Bheema","Table tennis",2),tatami:Dt(100,200,5.5,"Scopia","Tatami",5),treadmill:Dt(88.5,195.8,152.6,"Muhtesemozcinar","Treadmill",2),putekasse:Dt(118,45,58,"Ola-Kristian Hoff","Trunk",2),umbrellaFolded:Dt(35.8,35.7,80,"Ralmon","Umbrella",1),vase3:Dt(23.5,23.5,50.9,"Scopia","Vase",1),jar:Dt(24.4,24.4,40,"Scopia","Vase",1),"walker-with-wheels":Dt(60.2,72.2,93,"Scopia","Walker with wheels",2),"double-switch-whites":Dt(8.5,1.1,8.5,"Scopia","Wall double switch",7),wall_handrail:Dt(230,9.9,9.8,"Ola-Kristian Hoff","Wall handrail",7),"switch-whites":Dt(8.5,1.1,8.5,"Scopia","Wall switch",7),"plug-TypeB-whites":Dt(8.5,.7,8.5,"Scopia","Wall type B plug",7),"plug-TypeE-whites":Dt(8.5,.7,8.5,"Scopia","Wall type E plug",7),wheelchair:Dt(64.4,76.9,91,"Bgamage","Wheelchair",2),wood_logs:Dt(40.3,69.9,31.8,"Scopia","Wood logs",2),complements2:Dt(13,13,15,"Scopia","Candle",1),radiator1:Dt(216.3,14.3,83.4,"Knyghtfall13x","Horizontal radiator",1),cornice:Dt(100,10,10,"Emmanuel Puybaret","Cornice",1),corniceConcaveCorner:Dt(10,10,10,"Emmanuel Puybaret","Concave corner cornice",1),electricOutlet:Dt(7.1,.5,11.2,"Pencilart","Electric outlet",1),electricOutlet2:Dt(7.1,.5,11.2,"Pencilart","Electric outlet 2",1),electricRadiator:Dt(37,10,45,"eTeks","Electric radiator",1),estintore:Dt(35.5,20.7,60,"Sergio Capretta","Extinguisher",1),hotWaterRadiator:Dt(65,25,61,"eTeks","Hot water radiator",1),radiateur:Dt(50.2,6,164.4,"Snduc","Radiator",1),boucheVMC:Dt(21.5,2,21.5,"Snduc","Vent",1),radiateurVertical:Dt(61,4.4,187,"Snduc","Vertical radiator",1),antenaTV:Dt(200,80.3,266.6,"Miguel Angel Serra","Antenna TV",1),antenaParabolica:Dt(65,70.4,71.1,"Miguel Angel Serra","Satellite dish",1),"external-unity-air-conditioning":Dt(77.1,28.4,54.2,"Scopia","Air conditioning - External unit",7),solar_panel_140W:Dt(125,66.8,3,"Ola-Kristian Hoff","Solar panel",1),"entry-bell-ring":Dt(3.8,2.4,10,"Scopia","Entry bell ring",7),"entry-bell-speech-unit":Dt(10.4,2,20.3,"Scopia","Entry speech unit",7),box:Dt(50,50,50,"Klet3D","Box empty",1),cylinder:Dt(50,50,50,"Klet3D","Cylinder empty",1),sphere:Dt(50,50,50,"Klet3D","Sphere empty",1),radiator2:Dt(132.6,41.4,45.66,"Redsymbzone","Radiator",2),radiator:Dt(140.3,24.7,73.1,"Redsymbzone","Radiator",2),speaker3:Dt(22.1,25.4,55.1,"Nhumrod","Speaker",2),tableFan:Dt(27.1,21.8,40.1,"Shivraj","Table fan",2),ammoBox:Dt(100,52.1,30.6,"Mahesh","Box",2),barrel:Dt(81.5,81.5,89.7,"GyngaNynja","Barrel",2),basketball:Dt(23.8,23.8,23.8,"SEspider","Basketball",2),fireExtinguisher:Dt(31.1,18,62.3,"Bastable","Extinguisher",2),numberLock:Dt(10,.45,10.2,"Avi9526","Number lock",2),cuckooClock:Dt(26.6,17.7,73.8,"Guclu","Cuckoo clock",2),riggedFan:Dt(32.7,20.7,32.2,"Kagi","Rigged fan",2),tennisRacket:Dt(26,68.5,2.9,"Ndakasha","Tennis racket",2),radio:Dt(30.7,8.4,26.3,"Jay-Artist","Radio",2),wallDoubleSocket:Dt(15.5,1,7.9,"Jay-Artist","Wall double socket",2),wallSocket:Dt(7.7,.8,7.9,"Jay-Artist","Wall socket",2),"wire-coathanger":Dt(41,1.2,26.8,"Loopo","Wire coathanger",2),sunglasses:Dt(15.1,15.7,3.5,"Krabz","Sunglasses",2),tableTennisBat:Dt(14.7,25.4,1.3,"BrunoMatheus","Table tennis bat",2),modernRadiator:Dt(50.4,11.6,60,"Atszgo","Radiator",2),mp3Station:Dt(39.8,9.8,12.1,"TrueCryer","MP3 station",2),workbench:Dt(123.3,62.4,173.8,"Victorbied","Workbench",2),fitnessTower:Dt(222.8,173.9,208,"Blenderik","Fitness tower",2),fut:Dt(45,45,64.1,"Geantick","Beer barrel",2),pompeBiere:Dt(58.9,25.2,30,"Geantick","Beer pump",2),curtainRod:Dt(150,16.5,7.7,"Geantick","Curtain rod",2),priseTelephonique:Dt(8,1,8,"Sheep","French telephone plug",2),rampe:Dt(200,11.7,85.2,"Geantick","Handrail",2),tableauMulet:Dt(32,.4,21.2,"Sleipnir1","Picture mule",2),tableauVisage:Dt(21.3,.6,30,"Sleipnir1","Picture portrait",2),tableauVisage2:Dt(33.2,.2,33.1,"Sleipnir1","Picture portrait",2),tableauVisage3:Dt(26.6,.4,35,"Sleipnir1","Picture portrait",2),tableauYing:Dt(37,.5,42.9,"Sleipnir1","Picture Ying",2),prise:Dt(8,1.6,8,"Sheep","Plug",2),railing1:Dt(162.7,11.3,62,"Pencilart","Railing",2),roundedEdgesRailing:Dt(80,9.3,62,"Pencilart","Rounded edges railing",2),roundedEdgesRailing1:Dt(83.7,9.7,62,"Pencilart","Rounded edges railing",2),scie:Dt(11.9,45,1.8,"Geantick","Saw",2),rampeArcCercle:Dt(176.3,101.1,85.2,"Geantick","Semicircle handrail",2),interrupteur:Dt(8,1.4,8,"Sheep","Switch",2),tableauElectrique:Dt(25,10.6,25,"Sheep","Switchboard",2),horlogeUbuntu:Dt(38.3,7.7,38.5,"Sleipnir1","Ubuntu clock",2),venetianBlind:Dt(90,9,60,"Geantick","Venetian blind",2),etau:Dt(12.6,20,13.3,"Geantick","Vise",2),portemanteaux:Dt(79.4,79.3,184.8,"Sheep","Hat and coat stand",2),arch:Dt(100,16,65,"Robert Pastierovic","Arch",2),AntelopeCanyonFrame:Dt(50.1,1.6,88,"Emmanuel Puybaret","Frame Antelope Canyon",2),EiffelTowerFrame:Dt(67,1.6,47.9,"Emmanuel Puybaret","Frame Eiffel Tower",2),InariFrame:Dt(48,1.6,67.9,"Emmanuel Puybaret","Frame Inari",2),MontBlancFrame:Dt(94.5,1.6,47.9,"Emmanuel Puybaret","Frame Mont Blanc",2),lightSwitch:Dt(7.1,2,11.2,"Pencilart","Light switch",2),smallWroughtIronRails:Dt(117.9,10.6,110,"Pencilart","Small wrought iron rails",2),wroughtIronRails:Dt(186.8,10.6,110,"Pencilart","Wrought iron rails",2),pavesDeVerre:Dt(21,5,188,"Snduc","Glass blocks",2),pile:Dt(1.4,5,1.4,"Snduc","Battery",2),polygonalRoof:Dt(501,150,150,"Pencilart","Polygonal roof",2),toitureArdoiseRouge:Dt(200,143,153,"Emmanuel Puybaret","Red slate roof",2),TorontoOntarioPlaceFrame:Dt(61.1,1.6,47.9,"Emmanuel Puybaret","Frame Toronto Ontario Place",2),TigerFrame:Dt(62.8,1.6,47.9,"Emmanuel Puybaret","Frame Tiger",2),NiagaraFallsFrame:Dt(80.9,1.6,47.9,"Emmanuel Puybaret","Frame Niagara Falls",2),VeniceFrame:Dt(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Venice",2),picture:Dt(133.97,9.49,81.46,"Peter Smolik","Picture",2),guacal:Dt(59.1,39.8,19.7,"Arturo Matheus","Crate",2),LakeMoraineFrame:Dt(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Lake Moraine",2),SquirrelFrame:Dt(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Squirrel",2),StatueOfLibertyFrame:Dt(50.1,1.6,88,"Emmanuel Puybaret","Frame Statue Of Liberty",2),VaticanMuseumFrame:Dt(61.2,1.6,47.9,"Emmanuel Puybaret","Frame Vatican Museum",2),EtretatFrame:Dt(67,1.6,47.9,"Emmanuel Puybaret","Frame Etretat",2),ColoredFountainFrame:Dt(73.5,1.6,47.9,"Emmanuel Puybaret","Frame Colored Fountain",2),HorseShoeBendFrame:Dt(61.2,1.6,47.9,"Emmanuel Puybaret","Frame Horse Shoe Bend",2),TucanFrame:Dt(48.7,1.6,47.9,"Emmanuel Puybaret","Frame Tucan",2),YosemiteFrame:Dt(73.5,1.6,47.8,"Emmanuel Puybaret","Frame Yosemite",2),WaterLilyFrame:Dt(67,1.6,47.9,"Emmanuel Puybaret","Frame Water Lily",2),ruffledVase:Dt(26.7,28.7,38,"Pencilart","Ruffled vase",2),radiator_7section:Dt(68.3,19,91,"Russian","Radiator",2),bd:Dt(21.44196,29.8,.7,"Toomy","Comics book",2),livreJava:Dt(21,23.9,2.55,"Emmanuel Puybaret","Book Java 7",2),sh3dMag:Dt(21,29.7,.3,"Toomy","Magazine",2),SweetHome3DKompakt:Dt(14.5,20.6,1.3,"Emmanuel Puybaret","Book Sweet Home 3D kompakt",2),enceinteColonne:Dt(22,29.62183,91.00232,"Ga\ufffdl Bettinelli","Speaker",2),AtorArriere:Dt(60.2,56.1,117.2,"Ga\ufffdl Bettinelli","Stove",2),bathroom_fan:Dt(20,33,20,"Ola-Kristian Hoff","Fan",2),frame_horizontal:Dt(155,10,130,"Ola-Kristian Hoff & Annick","Horizontal frame",2),frame_vertical:Dt(127.5,7.5,155,"Ola-Kristian Hoff & Annick","Vertical frame",2),frame3HorizontalMomijiPhotos:Dt(25.4,3,52.5,"Emmanuel Puybaret","Frame momiji photos",2),frame3VerticalTowerPhotos:Dt(52.5,3,25.4,"Emmanuel Puybaret","Frame Towers",2),ladder_simple:Dt(56,86.6,283.2,"Ola-Kristian Hoff","Ladder",2),ladder_water:Dt(44,85,225,"Ola-Kristian Hoff","Ladder",2),plastic_storage_box:Dt(58,41,19.5,"Ola-Kristian Hoff","Plastic storage box",2),sauna_120x120:Dt(120,131.6,198,"Ola-Kristian Hoff","Sauna",2),vent_round:Dt(22,30,24,"Ola-Kristian Hoff","Round vent",2),staircase_handrail_hor:Dt(94,3,87.8,"Ola-Kristian Hoff","Handrail",2),metalBeam:Dt(200,20,20,"Emmanuel Puybaret","Metal beam",2),pwdRamp:Dt(75.6,118.7,19.5,"Emmanuel Puybaret","PWD ramp",2),"iron-railing-02":Dt(112,13.6,70,"Kator Legaz","Iron railing",2),"recycling-bin":Dt(36.1,27,25.49968,"Kator Legaz","Recycling bin",2),"tape-measure":Dt(14.58,1.8,5,"Kator Legaz","Tape measure",2),"trunk-large":Dt(100,50.8,34.4,"Kator Legaz","Trunck",2),newspaper:Dt(26.8,24.1,2,"Kator Legaz","Newspaper",2),vase1:Dt(22.7,22.7,30,"Scopia","Vase",2),vase2:Dt(27.2,27.2,30,"Scopia","Vase",2),vase5:Dt(32.6,31.2,87.4,"Scopia","Vase",2),frame2:Dt(14.5,14.5,19.9,"Scopia & eTeks","Frame H\ufffdi An",2),basic_camera:Dt(9.7,2.3,6,"Scopia","Camera",2),electric_water_heater_big:Dt(45.6,45.9,100.8,"Scopia","Electric water heater",2),mp3_base_for_ipad:Dt(26.3,16.3,13.5,"Scopia","MP3 base",2),stereo_amplifier:Dt(45.4,38.8,16.8,"Scopia","Stereo amplifier",2),"open-cardboard-box":Dt(81.5,62.5,43.7,"Scopia","Open cardboard box",2),"step-ladder-wood":Dt(45.5,74.5,82.7,"Scopia","Small step ladder",2),"wall-hanger":Dt(45,6.1,7.9,"Scopia","Wall hanger",2),"iron-railing-separated-hooks-1":Dt(165,11,80,"Scopia","Iron railing",2),"iron-railing-separated-hooks-3":Dt(113,13.4,70,"Scopia","Iron railing",2),"scie-egoine":Dt(61.56,17.3,2,"Scopia","Saw",2),"rouleau-de-ruban-adhesif":Dt(15.1,3.4,12.7,"Scopia","Tape",2),pelle:Dt(22.2,99,10,"Scopia","Shovel",2),cone:Dt(37.9,37.9,70,"Scopia","Cone",2),"perceuse-electrique":Dt(6.9,27,25.9,"Scopia","Drill",2),"meuleuse-electrique":Dt(31.1,51.3,12.6,"Scopia","Grinder",2),"billet-10-euros":Dt(12.7,6.7,.1,"Scopia","Bill 10\\u20ac",2),"billet-20-euros":Dt(13.3,7.2,.1,"Scopia","Bill 20\\u20ac",2),"billet-50-euros":Dt(14,7.7,.1,"Scopia","Bill 50\\u20ac",2),"rounded-antenna":Dt(8.5,.7,8.5,"Scopia","Rounded antenna plug",2),"rounded-dimmer":Dt(8.5,1.7,8.5,"Scopia","Rounded dimmer switch",2),"rounded-double-switch":Dt(8.5,1.2,8.5,"Scopia","Rounded double switch",2),"rounded-plug-TypeA":Dt(8.5,.7,8.5,"Scopia","Rounded type A plug",2),"rounded-plug-TypeB":Dt(8.5,.7,8.5,"Scopia","Rounded type B plug",2),"rounded-plug-TypeCFlat":Dt(8.5,.7,8.5,"Scopia","Rounded type C plug",2),"rounded-plug-TypeE":Dt(8.5,.7,8.5,"Scopia","Rounded type E plug",2),"rounded-plug-TypeG":Dt(8.5,.7,8.5,"Scopia","Rounded type G plug",2),"rounded-RJ-45":Dt(8.5,.7,8.5,"Scopia","Rounded RJ45 plug",2),"rounded-switch":Dt(8.5,1.2,8.5,"Scopia","Rounded switch",2),"square-antenna":Dt(8.5,.6,8.5,"Scopia","Square antenna plug",2),"square-dimmer":Dt(8.5,1.6,8.5,"Scopia","Square dimmer switch",2),"square-plug-TypeA":Dt(8.5,.7,8.5,"Scopia","Square type A plug",2),"square-plug-TypeCFlat":Dt(8.5,.7,8.5,"Scopia","Square type C plug",2),"square-plug-TypeG":Dt(8.5,.6,8.5,"Scopia","Square type G plug",2),"square-RJ-45":Dt(8.5,.6,8.5,"Scopia","Square RJ45 plug",2),"antenna-whites":Dt(8.5,.6,8.5,"Scopia","Wall antenna plug",2),"dimmer-whites":Dt(8.5,1.7,8.5,"Scopia","Wall dimmer switch",2),"plug-TypeA-whites":Dt(8.5,.7,8.5,"Scopia","Wall type A plug",2),"plug-TypeCFlat-whites":Dt(8.5,.7,8.5,"Scopia","Wall type C plug",2),"plug-TypeG-whites":Dt(8.5,.6,8.5,"Scopia","Wall type G plug",2),"RJ-45-whites":Dt(8.5,.6,8.5,"Scopia","Wall RJ45 plug",2),chimney:Dt(67.3,67.3,118.1,"Scopia","Chimney",2),"round-chimney":Dt(36.6,36.5,99.7,"Scopia","Round chimney",2),"pince-coupante":Dt(60,17.5,3,"Scopia","Cutting pliers",2),parpaing:Dt(50,19.5,20,"Scopia","Cinder block",2),cageALapin:Dt(102.5,57.6,46.1,"Scopia","Rabbit cage",2),roueAvecJante:Dt(18.1,58.6,58.6,"Scopia","Wheel",2),newspapersPile:Dt(30.1,23.6,7.7,"Scopia","Newspapers pile",2),openedNewspaper:Dt(58.3,40.2,.92,"Scopia","Opened newspaper",2),safeOnFeet:Dt(46,46.1,71.7,"Scopia","Safe on feet",2),"fil-electrique-1m":Dt(100.135,.3,.3,"Scopia","Electric wire 1m",2),pileRevues:Dt(21.5,28.6,3.4,"Scopia","Magazines pile",2),walker:Dt(66.6,44,83.4,"Scopia","Walker",2)},Nt={angolo160W:Dt(45,45,160,"LucaPresidente","Angle shelf",2),angolo198W:Dt(45,45,198,"LucaPresidente","Angle shelf",2),angolo80W:Dt(45,45,80,"LucaPresidente","Angle shelf",2),office_furniture1:Dt(299.5,54.5,150,"Scopia","Bookcase",2),mobile45160W:Dt(45,48.8,160,"LucaPresidente","Bookcase 45x160",2),mobile45198W:Dt(45,48.8,190,"LucaPresidente","Bookcase 45x198",2),mobile4580W:Dt(45,48.8,80,"LucaPresidente","Bookcase 45x80",2),office_box:Dt(212,53.5,174.9,"Scopia","Box",2),chair2:Dt(57.9,60.9,90.2,"Peter Smolik","Chair",2),office_chair:Dt(63.5,63.7,100,"Scopia","Office chair",2),chair_office_y:Dt(48,49.5,87,"Ola-Kristian Hoff","Chair",2),pcstul:Dt(136.3,93.1,144.3,"Jarda Benkowsky","Computer desk",2),lbDesk:Dt(160,80,72.3,"Wiresoulstudio","Desk",2),office_desk:Dt(160,80,72,"Ola-Kristian Hoff","Desk",2),bureauInfoOuvert:Dt(77.9,85.9,76.4,"Ga\xebl Bettinelli","Desk2",2),bureau3:Dt(120,59,72.5,"Ga\xebl Bettinelli","Desk1",2),cassettieraW:Dt(42,53.8,53.5,"LucaPresidente","Drawer unit on casters",2),dustbin:Dt(23.3,23.3,35,"Ndakasha","Dustbin",1),inkjet_and_scanner_printer:Dt(44.6,33.2,18.9,"Scopia","Inkjet printer and scanner",1),penbox:Dt(7.3,8.3,17,"Scopia","Penbox",1),pencil1:Dt(1,13.5,.7,"Scopia","Pencil",1),phone:Dt(19.7,21.9,7.3,"Scopia","Phone",1),imprimanteFaxPhotocopieur:Dt(105.8,69.5,110,"Cristophe Tellerain","Photocopier printer",2),water_cooler:Dt(27.4,31.8,132.2,"Scopia","Water cooler",2),whiteBoard:Dt(124.7,55.1,129,"Redsymbzone","White board",2),wooden_office_pear_table:Dt(160,120,75.4,"Scopia","Wooden table",2),lamp_office:Dt(16,50,47,"Ola-Kristian Hoff","Desk lamp",1),tourPC:Dt(12,24,25,"Carvalho","Desktop computer",1),workLamp:Dt(16,50,47,"eTeks","Work Desk lamp",1),souris:Dt(6,10.1,2.4,"Geantick","Mouse",1),desk:Dt(140,67.8,77,"eTeks","Desk",2),cissors_swap:Dt(13.7,6.9,1.5,"Celticluis","Scissors",2),ruler:Dt(31.2,3.4,.17,"Doujon","Ruler",2),technicalTable1:Dt(214.7,118.8,95,"Redsymbzone","Technical table",2),technicalTable2:Dt(136.6,171.4,101.3,"Redsymbzone","Technical table",2),textMarker:Dt(3.1,10.3,1.7,"Mothome","Text marker",2),kalender:Dt(12,7.9,10.8,"Teguh9384","Calendar",2),biurko3:Dt(120.1,60.2,72,"Hilux","Desk",2),"sef-kasa":Dt(50,54.7,50,"Bocko","Safe",2),simpleDesk:Dt(140.1,81.1,72,"SirOccor","Desk",2),officeTable:Dt(189.2,83.4,75.1,"Nmn9","Desk",2),classSeat:Dt(62.5,67.7,80,"Ericblender7","Class seat",2),armChair2:Dt(97.8,82.1,88.5,"TreyClaine","Armchair",2),bureauInformatique:Dt(117.1,60,86.7,"Infernal-quack","Computer desk",2),clavier:Dt(42.5,13.9,2.1,"Geantick","Keyboard",2),bigCornerDesk:Dt(199.6,167.3,140,"Pencilart","Corner desk",2),plantersDesk:Dt(76,66,160,"Pencilart","Planters desk",2),stylo:Dt(.8,15,.8,"Snduc","Pen",2),secretarysDesk:Dt(106.7,79.8,150,"Pencilart","Secretary's desk",2),desk2:Dt(180,163,72,"Peter Smolik","Desk",2),officeChair:Dt(62.62,59.67,87.34,"Peter Smolik","Office chair",2),officeChair2:Dt(62.88,68.8,101.5,"Peter Smolik","Office chair",2),officeChair3:Dt(55.88,56.35,107,"Peter Smolik","Office chair",2),escritorio:Dt(140,59.1,75.8,"Migdalia Lopez","PC table",2),bureauEcolier:Dt(88.5,56.1,90,"Fabrice Delobe","School desk",2),invoice:Dt(21,29.7,.49,"Emmanuel Puybaret","Invoice",2),bureauInfoClair:Dt(77.9,54.6,76.4,"Ga\ufffdl Bettinelli","Desk",2),chair_office_x:Dt(52,51,87,"Ola-Kristian Hoff","Armchair",2),scissors:Dt(4.4,12,.6,"alaX","Scissors",2),"office-chair":Dt(64.3,64.3,91,"Kator Legaz","Chair",2),"custom-desk":Dt(235.1,83.8,180,"Kator Legaz","Desk",2),"filing-cabinet":Dt(38.6,52.6,60,"Kator Legaz","Filing cabinet",2),stapler:Dt(2.9,11.6,3.5,"Kator Legaz","Stapler",2),raccordo80W:Dt(80,80,72,"LucaPresidente","Desk extension",2),scrivania160W:Dt(160,80,72,"LucaPresidente","Desk",2),mobile90160W:Dt(90,48.74561,160,"LucaPresidente","Bookcase 90x160",2),mobile90198W:Dt(90,48.75,198,"LucaPresidente","Bookcase 90x198",2),mobile9080W:Dt(90,48.75,80,"LucaPresidente","Bookcase 90x80",2),kids_desk_chair:Dt(53.4,51.9,88.3,"Scopia","Chair",2),kids_desk_table:Dt(112,60.5,74.6,"Scopia","Desk table",2),kids_wooden_desk:Dt(100.4,61.8,74.6,"Scopia","Wooden desk",2),wooden_office_alder_table:Dt(161.5,94.2,75.4,"Scopia","Wooden alder table",2),wooden_office_pear_table_rect:Dt(160,80,75.4,"Scopia","Wooden table",2),wooden_office_teak_table:Dt(160,120,75.4,"Scopia","Wooden teak table",2),bandeja:Dt(26.9,37.8,6.5,"Scopia","Letter tray",2),pencil2:Dt(.8,14,.6,"Scopia","Pencil",2)},Et={staircase_90_bottom:Dt(100,330,352.2,"Ola-Kristian Hoff","Bottom winder staircase",2),staircase_180_long:Dt(100,330,353.1,"Ola-Kristian Hoff","Double winder staircase",2),escalator:Dt(129.1,882.2,424.8,"Scopia","Escalator",2),staircase_180_landing:Dt(200,260,349,"Ola-Kristian Hoff","Half landing staircase",2),staircase_90_landing:Dt(225,228.3,347.8,"Ola-Kristian Hoff","Quarter landing staircase",2),stairs_90_closed_legal_high:Dt(166,300,362.8,"Ola-Kristian Hoff","Quarter landing staircase",2),stairs_rail:Dt(329.8,6,234.5,"Ola-Kristian Hoff","Stairs rail",1),stairs_180_circular_notopstep_rail:Dt(600,301,355,"Ola-Kristian Hoff","Semiciruclar staircase",2),staircase_360_circle:Dt(230,230,353.4,"Ola-Kristian Hoff","Spiral staircase",2),stairs_180_square:Dt(200,100,335.6,"Ola-Kristian Hoff","Square spiral staircase",2),stair_ladder_loft:Dt(58,114,262,"Ola-Kristian Hoff","Staircase ladder",2),staircase_samba_265x150x85:Dt(85,150,262,"Ola-Kristian Hoff","Staircase samba",2),stair_straight_open_stringer:Dt(80,334.3,350.2,"Ola-Kristian Hoff","Staircase with open stringer",2),staircase_ladder_steep:Dt(94.4,167.1,356.7,"Ola-Kristian Hoff","Steep staircase",2),staircase_90_top:Dt(100,330,353.1,"Ola-Kristian Hoff","Top winder staircase",2),staircase_270_box:Dt(225,225,341.4,"Ola-Kristian Hoff","Triple winder staircase",2),staircase_u2h:Dt(338,176,342.5,"Ola-Kristian Hoff","Triple winder staircase",2),curveStaircase:Dt(72,238,362.4,"eTeks","Curve staircase",1),spiralStaircase:Dt(140,140,362,"eTeks","Spiral staircase",1),staircase:Dt(72,222,362.4,"eTeks","Staircase",1),grandStaircaseDark:Dt(507.6,288.1,400,"Pencilart","Grand staircase",2),escalierColimacon2:Dt(201.3,216.4,356.5,"Geantick","Spiral staircase",2),outdoor_staircase:Dt(128,282,205.5,"DaniFeri","Outdoor staircase",2),stairs_topcurve_90:Dt(200,401,358.6,"Ola-Kristian Hoff","Staircase curved at top",2),staircase_90_high_open:Dt(179,254,358.8,"Ola-Kristian Hoff","Winder staircase",2),staircase_straight:Dt(90,341.7,349.8,"Ola-Kristian Hoff","Straight staircase",2),stairs_legal:Dt(90,307.8,355.9,"Ola-Kristian Hoff","Straight staircase",2),stairs_spiral:Dt(200,200,358.1,"Ola-Kristian Hoff","Spiral staircase",2),quarterSlope:Dt(800,800,151,"Emmanuel Puybaret","Quarter slope",2),"home-lift":Dt(101.6,73.6,512,"Scopia","Home lift",2),"stair-lift-rail":Dt(539.9,11.4,20.4,"Scopia","Stair lift rail",2),"stair-lift":Dt(59.8,54.4,83.9,"Scopia","Stair lift",2)},Ht={"4x4":Dt(186.4,381.6,194.3,"Scopia","4x4",2),bicycle:Dt(46,149.2,84.3,"Scopia","Bicycle",2),bus:Dt(279.5,1404.3,366.7,"Scopia","Bus",2),caravane:Dt(211.9,547,236.3,"Scopia","Caravan",2),cityBus:Dt(303.1,1219.2,302,"Scopia","City bus",2),decapotable:Dt(210.4,459.2,141.2,"Scopia","Convertible",2),locomotive:Dt(247.3,1500.2,647.2,"Scopia","Locomotive",2),monospace:Dt(212.7,467.2,179,"Scopia","Minivan",2),pickup:Dt(215.2,524.3,180.8,"Scopia","Pickup",2),renaultKangoo:Dt(203.4,403.4,177,"Scopia","Renault Kangoo",2),"renault-scenic":Dt(212.7,426.2,196.2,"Scopia","Renault Scenic",2),scooter:Dt(34,86.4,88,"Scopia","Scooter",2),scooter2:Dt(76.4,173.1,120.8,"Scopia","Scooter",2),seat_leon:Dt(192.4,419.5,146,"Scopia","Seat Leon",2),"smart-car":Dt(170.8,252.8,154.6,"Scopia","Smart car",2),sportive:Dt(210.2,447.8,128,"Scopia","Sports car",2),break:Dt(200.4,457.3,155.4,"Scopia","Station wagon",2),stroller:Dt(48,81.2,99.2,"Scopia","Stroller",2),remorque:Dt(180.2,313.4,102.4,"Scopia","Trailer",2),tramway:Dt(250.4,3000.8,481.6,"Scopia","Tramway",2),truck:Dt(271.8,630,340,"Scopia","Truck",2),dafTruck:Dt(305.8,1653.6,400.5,"Kartoffelphantom","DAF truck",2),van:Dt(240.5,595.8,256.5,"Scopia","Van",2),wagon:Dt(215.5,1500,412.4,"Scopia","Wagon",2),forkLift:Dt(351.4,130.1,215.7,"TheGIWI","Fork lift",2),peterbilt:Dt(287.2,2104.9,403,"Thomaswornall","Truck",2),bike:Dt(40.7,116.3,76.5,"Rodrigoalves123","Bike",2),fordFocus:Dt(204.5,435.8,155.1,"Ruff","Ford Focus",2),peugeot103:Dt(56.7,170,96.5,"Sleipnir1","Peugeot 103",2),"concept-sedan-01v2":Dt(184.9,455.9,155,"Kator Legaz","Concept Sedan 01",2),"concept-sedan-02":Dt(210.7,439.8,150,"Kator Legaz","Concept Sedan 02",2),"concept-sedan-02-sport":Dt(210.7,424.9,150,"Kator Legaz","Concept Sedan 02 Sport",2),"VW-new-beetle":Dt(193.6,409.1,154.5,"Kator Legaz","VW new beetle",2),"concept-sedan-01v1":Dt(191.1,471.1,155,"Kator Legaz","Concept Sedan 01",2),"peugeot-308":Dt(210,444,138.9,"Scopia","Peugeot 308 CC",2),"yamaha-yzr-r6":Dt(79.6,203.1,114.8,"Scopia","Yamaha YZR R6",2),tricycle:Dt(37.4,60,43.4,"Scopia","Tricycle",2),suv:Dt(209.1,463.1,162.7,"Scopia","SUV",2),chevrolet:Dt(210.15,445.7,121.1,"Scopia","Chevrolet",2),skateboard:Dt(20,80.2,10.4,"Scopia","Skateboard",2),suv2:Dt(209.2,427.2,176.2,"Scopia","SUV",2),carSegmentA:Dt(170.8,274.2,154.6,"Scopia","Small car",2),carSegmentB:Dt(184.4,393.9,141.3,"Scopia","City car",2)},zt={seat_leon:{width:231,height:504},"smart-car":{width:205,height:304},sportive:{width:253,height:538},break:{width:241,height:549},decapotable:{width:253,height:551},monospace:{width:256,height:561},"renault-scenic":{width:256,height:512},pickup:{width:259,height:630},"4x4":{width:224,height:458},renaultKangoo:{width:245,height:485},van:{width:289,height:715},truck:{width:327,height:756},dafTruck:{width:367,height:1985},scooter:{width:41,height:104},bicycle:{width:56,height:180},scooter2:{width:92,height:208},remorque:{width:217,height:377},caravane:{width:255,height:657},stroller:{width:58,height:98},bus:{width:336,height:1686},cityBus:{width:364,height:1463},tramway:{width:301,height:3601},locomotive:{width:297,height:1801},wagon:{width:259,height:1800},washbasin_jay_hardy:{width:72,height:52},bathroom3:{width:87,height:49},"hand-washbasin":{width:59,height:36},"stone-washbasin":{width:65,height:55},"ergonomic-washbasin":{width:72,height:56},bathroom_vanity:{width:129,height:47},modernVanity:{width:109,height:85},bathroom_sink:{width:147,height:66},mobilettoLavaboWenge:{width:98,height:51},wash_basin_corner:{width:60,height:60},islandBath:{width:204,height:113},bathtub_jet_system:{width:192,height:84},corner_bathtub:{width:192,height:192},"mixer-tap-for-shower":{width:35,height:42},shower:{width:25,height:65},doccia:{width:84,height:84},shower_cabin:{width:108,height:108},"shower-cabin-with-seat":{width:121,height:205},toilet_hang_round:{width:46,height:68},"japanese-toilet":{width:64,height:101},"small-urinal":{width:41,height:33},bidet:{width:48,height:65},towel2:{width:27,height:17},com_bath3:{width:72,height:21},towel3:{width:72,height:10},showerCurtain:{width:109,height:36},barreAppuiCoude:{width:93,height:14},"folding-grab-bar":{width:9,height:75},savon:{width:9,height:7},com_bath2_jabon_pijo:{width:7,height:7},potBrossesADent:{width:9,height:11},secheCheveux:{width:19,height:19},potty:{width:37,height:37},toiletBrush:{width:12,height:16},"bathroom-tissue":{width:26,height:21},pesePersonne:{width:34,height:39},basin:{width:93,height:79},bathmat:{width:88,height:57},"clothes-basket":{width:65,height:65},clothes_line:{width:600,height:18},clothes_washing_machine:{width:71,height:73},dryer_machine:{width:71,height:75},fer:{width:17,height:16},plancheARepasser:{width:66,height:165},bedFlowers:{width:243,height:274},"air-mattress":{width:84,height:219},bed3:{width:243,height:274},bed1:{width:205,height:260},bedWithTexture:{width:238,height:272},"captains-bed":{width:118,height:252},juniorBed:{width:127,height:238},"convertible-sofa-BZ-opened":{width:190,height:229},bunkBed:{width:136,height:246},litMezzanine2:{width:356,height:222},"mezzanine-bed":{width:147,height:311},crib:{width:88,height:150},"adjustable-hospital-bed":{width:120,height:252},armoireLotus:{width:216,height:81},mobileCiliegio:{width:120,height:60},mobileangoloCiliegio:{width:105,height:104},mobileAngoloInterno:{width:126,height:126},mobileAzzurro:{width:120,height:69},corner:{width:63,height:63},wardrobe2:{width:209,height:72},"changing-table":{width:148,height:58},chest:{width:173,height:65},kommode:{width:115,height:51},bedsideTable:{width:60,height:50},bedsideTable2:{width:59,height:58},comoCiliegio:{width:192,height:72},"clothes-rack":{width:135,height:43},mensolaCurvaAcero:{width:48,height:48},pensileAcero:{width:48,height:30},folded_clothes:{width:32,height:49},futon:{width:171,height:254},"hanging-clothes1":{width:39,height:71},casque:{width:32,height:46},"hospital-table-on-wheels":{width:92,height:55},hotelSafe:{width:53,height:48},sleepingBag:{width:106,height:240},bootieSeparated:{width:26,height:33},slippersSeparated:{width:29,height:34},sneakersSeparated:{width:29,height:37},mocassinSeparated:{width:27,height:34},womanShoesSeparated:{width:23,height:30},blocks:{width:72,height:60},doll:{width:18,height:15},"doll-house":{width:83,height:39},smiley:{width:17,height:17},teddyBear:{width:40,height:27},train:{width:143,height:117},letters:{width:49,height:16},housePuzzle:{width:19,height:19},rubix2:{width:7,height:7},awning_bracket:{width:372,height:204},barbecue:{width:48,height:59},basketball_net_and_board:{width:131,height:74},barnum:{width:361,height:361},campingLamp:{width:19,height:19},campingTent:{width:298,height:284},deckChair:{width:86,height:151},"diving-board":{width:51,height:220},"dog-house":{width:86,height:108},"entry-bell-ring":{width:5,height:3},"entry-bell-speech-unit":{width:13,height:3},privacyFence2:{width:120,height:18},fence_grid:{width:240,height:6},fence_picket:{width:102,height:8},"football-goal":{width:183,height:107},"big-football-goal":{width:879,height:217},waterFountain:{width:62,height:62},fountain:{width:222,height:222},"garden-hut":{width:206,height:219},gate_grind:{width:230,height:14},greenhouse:{width:372,height:372},grillNgauge:{width:216,height:84},hammock:{width:421,height:198},hangingUmbrella:{width:288,height:357},jacuzzi:{width:274,height:274},boiteALettre:{width:38,height:36},motorbike:{width:110,height:40},"painted-bench":{width:172,height:63},"passage-pieton":{width:480,height:900},pedestrianRailing1:{width:250,height:6},pedestrianRailing2:{width:240,height:6},pergola:{width:288,height:307},picnic_table:{width:217,height:175},pool_ladder:{width:60,height:60},"porch-column-03":{width:40,height:40},rainGutterPart1:{width:240,height:15},rainGutterPart2:{width:12,height:110},rattanArmchair:{width:86,height:87},rattanSofa:{width:155,height:87},rattanTable:{width:144,height:72},"round-swimming-pool":{width:198,height:198},sandpit:{width:157,height:145},bonecoDeNeve:{width:113,height:86},solar_panel_140W:{width:150,height:81},stoneLantern:{width:42,height:42},"swimming-pool":{width:2057,height:1198},ext_table:{width:243,height:186},silla_teca:{width:70,height:81},"feu-de-signalisation-simple":{width:45,height:64},trampoline:{width:360,height:360},umbrella:{width:268,height:268},wheelie_bin:{width:72,height:75},outdoorLamp:{width:26,height:26},window_flat_roof_skylight_bubble:{width:120,height:120},"external-unity-air-conditioning":{width:93,height:35},column_balustrade:{width:36,height:30},column_balustrade_corner:{width:66,height:66},birch:{width:473,height:450},bush:{width:182,height:173},"cafe-chair":{width:60,height:63},"cafe-table":{width:90,height:90},child_swing:{width:196,height:193},parque:{width:489,height:116},croisement2et2:{width:1254,height:1254},routeCourbe2VoiesAvecTrottoirs90Deg:{width:1254,height:1254},route2VoiesAvecTrottoirs:{width:1560,height:1254},voiesFerreesAiguillage:{width:2408,height:832},voiesFerreesCourbe20m:{width:2442,height:832},voiesFerreesDroit10m:{width:1200,height:528},hedgeTextured:{width:186,height:72},"lavender-bush":{width:99,height:99},palm:{width:636,height:657},pansy:{width:37,height:37},tree:{width:720,height:768},lombardyPoplar:{width:244,height:231},pine:{width:408,height:384},plantie:{width:83,height:34},rock1:{width:61,height:41},rock2:{width:83,height:65},rock3:{width:83,height:51},"roses-bush":{width:48,height:55},kitchenUpperCabinet:{width:132,height:39},kitchenSmallUpperCabinet:{width:41,height:39},kitchenSmallLowerCabinet:{width:59,height:74},lowerCabinet:{width:72,height:74},lowerCornerCabinet:{width:98,height:99},drawersCabinet:{width:72,height:74},kitchenLowerCabinet:{width:118,height:74},kitchenIsland:{width:113,height:84},kitchenDrawersCabinet:{width:54,height:74},smallUpperCabinet:{width:72,height:50},upperCabinet:{width:72,height:50},highCabinet:{width:72,height:74},kitchenSink:{width:118,height:74},sinkCabinet2:{width:72,height:74},islandExtension:{width:72,height:149},meubleChaussures:{width:87,height:48},kitchenGlassDoorCabinet:{width:41,height:39},dishwasher:{width:54,height:72},refrigerator:{width:108,height:108},largeFridge:{width:111,height:97},rangeHood:{width:72,height:39},"chest-freezer":{width:156,height:103},stove1:{width:100,height:113},stove:{width:40,height:72},largeStove:{width:125,height:87},oven:{width:72,height:62},ovenFront:{width:72,height:9},hood:{width:122,height:48},kitchenHood:{width:72,height:62},"induction-cooker-2-zones":{width:36,height:63},"induction-cooker-4-zones":{width:68,height:60},mano_cooktop:{width:70,height:60},lavastoviglie:{width:72,height:76},doubleOven:{width:72,height:62},sgabello:{width:39,height:44},tabouretBar:{width:62,height:54},stool2:{width:44,height:44},baby_high_chair:{width:72,height:78},boiler:{width:22,height:20},bouilloire:{width:21,height:25},toaster:{width:33,height:19},coffeeBrewer:{width:17,height:47},percolateur:{width:25,height:37},"coffee-maker":{width:23,height:35},cooker:{width:35,height:48},electronicScale:{width:18,height:27},autocuiseur:{width:31,height:27},sandwichMaker:{width:29,height:31},"small-oven":{width:68,height:57},spiceTower:{width:20,height:20},saltShaker:{width:5,height:5},grillePain:{width:42,height:15},towel:{width:18,height:17},poubelleInox:{width:35,height:42},tray:{width:47,height:36},kitchenKnife:{width:5,height:32},kitchenKnifeStandSet:{width:11,height:33},poele:{width:31,height:52},casserole:{width:21,height:37},paperTowelHolder:{width:20,height:20},bolDeRiz:{width:18,height:18},"plate-and-ustensils":{width:33,height:41},"ensemble-assiette-couteau-fourchette-cuillere-verre":{width:51,height:47},"kitchen-glass-jar-high":{width:12,height:12},cocktailGlass:{width:10,height:10},glass:{width:9,height:9},"coffee-mug":{width:11,height:15},coffeePress:{width:20,height:13},choppingBoard:{width:46,height:32},baguettes:{width:2,height:26},bowl:{width:25,height:25},mamadeira:{width:6,height:6},utensilsPot:{width:15,height:14},aspirateur:{width:172,height:40},broom:{width:44,height:10},bucket:{width:36,height:34},eponge:{width:12,height:8},"food-box-pasta":{width:17,height:7},"food-box-corn-flakes":{width:23,height:11},tetrapak:{width:12,height:12},caffe_final:{width:12,height:12},butter:{width:20,height:9},cupcake:{width:8,height:8},birthday_cake:{width:29,height:29},bowlWithFruits:{width:39,height:41},bowlWithSalad:{width:30,height:30},bread:{width:8,height:29},apples:{width:31,height:31},baguettePain:{width:66,height:9},toast:{width:13,height:12},steak:{width:39,height:24},"roasted-chicken":{width:36,height:25},citrouille:{width:36,height:36},pizza:{width:36,height:36},hotDog:{width:26,height:9},hamburger:{width:14,height:14},frenchFries:{width:25,height:24},clear_sofa:{width:233,height:92},L_shaped_sofa:{width:281,height:173},couch2:{width:276,height:192},"futon-couch":{width:236,height:108},simple_sofa:{width:216,height:81},sofa1:{width:281,height:96},"convertible-sofa-BZ-closed":{width:172,height:123},clicClac:{width:219,height:112},dining_room:{width:307,height:44},cabinet2:{width:269,height:78},elementHautSalon:{width:63,height:52},meubleHiFiHaut:{width:188,height:50},stainlessSteelShelf:{width:94,height:34},shelves_storage_steel:{width:96,height:36},shelves_storage_wood:{width:94,height:38},dresserWithDrawers:{width:193,height:63},"full-bookcase":{width:108,height:42},tourRangeCD:{width:24,height:21},pinewoodRackLowHeight:{width:108,height:37},pinewoodRackMediumHeight:{width:108,height:37},longcase_clock:{width:60,height:36},rocking_chair:{width:78,height:96},fotel:{width:89,height:74},armchair3:{width:71,height:84},chair_granmother:{width:74,height:70},chair:{width:51,height:57},kitchenChair:{width:52,height:53},thonet:{width:66,height:70},chair3:{width:52,height:61},chair4:{width:59,height:54},white_kitchen_chair:{width:52,height:57},childChair:{width:46,height:48},children_chair:{width:34,height:34},foldingChair:{width:61,height:72},folding_chair:{width:59,height:62},chaiseOrange:{width:50,height:57},osakaChair:{width:57,height:63},ryokanChair:{width:64,height:71},stool_small:{width:36,height:36},green_stool:{width:52,height:52},pianoBench:{width:75,height:43},black_table:{width:205,height:108},"folding-table":{width:224,height:94},children_table:{width:76,height:58},coffee_table:{width:108,height:56},table_wood_and_iron:{width:146,height:92},couchTable:{width:122,height:85},"round-table":{width:132,height:132},"table-on-trestles":{width:192,height:80},white_kitchen_table:{width:132,height:85},table:{width:174,height:113},"table-with-leaning-feet":{width:180,height:78},tableCuisine2:{width:210,height:110},"glass-dining-table":{width:195,height:118},meubleHiFiBas:{width:125,height:54},table_half_round:{width:123,height:71},oakTable:{width:149,height:149},tableWithTablecloth:{width:97,height:98},"wall-flat-tv":{width:124,height:14},curvedTVForTable:{width:152,height:22},curvedWallOLEDTV:{width:182,height:16},dvd:{width:52,height:34},playstation4:{width:40,height:36},"ps4-joystick":{width:20,height:13},"tv-remote-control":{width:6,height:22},"video-projector":{width:57,height:46},wirelessOfficePhone3:{width:14,height:19},fireplace1:{width:139,height:43},fireplace2:{width:146,height:54},carpet:{width:192,height:270},puff:{width:110,height:102},"round-carpet":{width:96,height:96},desklamp:{width:30,height:30},JapaneseLantern:{width:19,height:19},lamp:{width:37,height:37},little_lamp2:{width:38,height:38},"MIDI-keyboard":{width:96,height:31},batterie:{width:126,height:112},"microphone-with-foot":{width:81,height:119},luckyBamboo:{width:19,height:18},"bonsai-tree":{width:54,height:46},"boston-fern":{width:78,height:74},cactus:{width:18,height:16},decorativePlant:{width:39,height:39},flowers:{width:26,height:20},mediumIndoorPlant:{width:87,height:92},orchids:{width:38,height:43},augalas:{width:74,height:42},maceta:{width:71,height:78},plant:{width:99,height:83},roses:{width:28,height:33},succulentPlant:{width:17,height:16},yuccaPlant:{width:130,height:123},christmas_tree:{width:154,height:156},abdominalBench:{width:81,height:232},"internal-unity-air-conditioning":{width:107,height:24},iphone:{width:7,height:14},backpack:{width:35,height:41},storeCalifornien:{width:241,height:20},livreAvecReliure:{width:22,height:14},book:{width:34,height:23},livres:{width:29,height:21},cageFuret:{width:95,height:60},"cardboard-box":{width:66,height:42},arbreAChat:{width:78,height:59},CCTV:{width:17,height:17},ceilingFan:{width:110,height:96},clock2:{width:36,height:4},"clothes-hanger":{width:52,height:2},"clothes-horse":{width:78,height:114},crate:{width:72,height:71},curtain:{width:132,height:6},curtains:{width:180,height:28},dart_game:{width:55,height:20},doormat:{width:72,height:36},electric_water_heater:{width:55,height:56},electricWheelchair:{width:67,height:107},emergencySign:{width:36,height:5},fence:{width:216,height:7},flipper:{width:87,height:160},foldedNewspaper:{width:36,height:25},"folding-armchair":{width:72,height:73},table_football:{width:181,height:150},ButterflyFrame:{width:59,height:2},frame:{width:60,height:3},frame1:{width:18,height:18},frame3HorizontalNorwayPhotos:{width:31,height:4},frame3VerticalSummerPhotos:{width:63,height:4},HaiVanPassFrame:{width:93,height:2},furnace:{width:81,height:118},gaz_water_heater:{width:49,height:42},gift:{width:28,height:22},glasses:{width:18,height:18},barreAppui:{width:70,height:14},marteau:{width:42,height:16},cendrier:{width:15,height:15},headphones:{width:23,height:10},"indoor-bike":{width:87,height:122},intercom:{width:12,height:7},intercom_with_screen:{width:23,height:8},"iron-railing-separated-hooks-2":{width:162,height:14},keys:{width:14,height:14},litiere:{width:35,height:61},lockedLocker:{width:24,height:27},revue:{width:24,height:34},mini_stereo:{width:59,height:26},mirror:{width:48,height:1},mobile:{width:6,height:14},mower:{width:62,height:116},bdOuverte:{width:51,height:36},revueOuverte:{width:48,height:34},ovalMirror:{width:66,height:2},pallet:{width:144,height:145},poolTable:{width:308,height:168},"punching-ball":{width:56,height:56},wheelchairSymbol:{width:179,height:179},radiator3:{width:67,height:25},gardeCorps:{width:168,height:8},railing_glass:{width:186,height:6},rectangularMirror:{width:60,height:2},reflex_camera:{width:15,height:18},japanese_style_screen:{width:214,height:19},tournevis:{width:31,height:4},sewing_machine:{width:63,height:15},shippingContainer:{width:292,height:728},"smoke-detector":{width:12,height:3},ballonFoot:{width:27,height:27},speaker2:{width:27,height:31},"square-double-switch":{width:11,height:2},frame_square:{width:120,height:12},"square-switch":{width:11,height:2},"square-plug-TypeB":{width:11,height:1},"square-plug-TypeE":{width:11,height:1},"step-ladder-metal":{width:70,height:92},AtorHaut:{width:73,height:64},suitcase:{width:120,height:38},surveillanceCamera:{width:28,height:47},table_tennis:{width:329,height:208},tablet:{width:21,height:29},tatami:{width:120,height:240},treadmill:{width:107,height:235},putekasse:{width:142,height:54},umbrellaFolded:{width:43,height:43},vase3:{width:29,height:29},jar:{width:30,height:30},"walker-with-wheels":{width:73,height:87},"double-switch-whites":{width:11,height:2},wall_handrail:{width:276,height:12},"switch-whites":{width:11,height:2},"plug-TypeB-whites":{width:11,height:1},"plug-TypeE-whites":{width:11,height:1},wheelchair:{width:78,height:93},"window-blinds":{width:120,height:9},cover_outdoor1:{width:120,height:9},wood_logs:{width:49,height:84},complements2:{width:16,height:16},mobile45160W:{width:54,height:59},mobile45198W:{width:54,height:59},mobile4580W:{width:54,height:59},office_furniture1:{width:360,height:66},cassettieraW:{width:51,height:65},office_box:{width:255,height:65},chair2:{width:70,height:74},office_chair:{width:77,height:77},chair_office_y:{width:58,height:60},pcstul:{width:164,height:112},lbDesk:{width:192,height:96},office_desk:{width:192,height:96},bureauInfoOuvert:{width:94,height:104},wooden_office_pear_table:{width:192,height:144},bureau3:{width:144,height:71},inkjet_and_scanner_printer:{width:54,height:40},laptop:{width:41,height:31},monitorLCD:{width:80,height:37},phone:{width:24,height:27},imprimanteFaxPhotocopieur:{width:127,height:84},penbox:{width:9,height:10},pencil1:{width:2,height:17},water_cooler:{width:33,height:39},whiteBoard:{width:150,height:67},lamp_office:{width:20,height:60},dustbin:{width:28,height:28},staircase_90_bottom:{width:120,height:396},staircase_180_long:{width:120,height:396},escalator:{width:155,height:1059},staircase_180_landing:{width:240,height:312},staircase_90_landing:{width:270,height:274},stairs_90_closed_legal_high:{width:200,height:360},stairs_rail:{width:396,height:8},stairs_180_circular_notopstep_rail:{width:720,height:362},staircase_360_circle:{width:276,height:276},stairs_180_square:{width:240,height:120},stair_ladder_loft:{width:70,height:137},staircase_samba_265x150x85:{width:102,height:180},stair_straight_open_stringer:{width:96,height:402},staircase_ladder_steep:{width:114,height:201},staircase_90_top:{width:120,height:396},staircase_270_box:{width:270,height:270},staircase_u2h:{width:406,height:212},man:{width:72,height:30},mannequinMale:{width:72,height:30},boyStanding:{width:72,height:42},male03:{width:66,height:48},male01:{width:66,height:54},male02:{width:96,height:60},holdingMale01:{width:72,height:72},mannequinBrunette:{width:72,height:30},female01:{width:66,height:66},female02:{width:72,height:60},female03:{width:72,height:72},girlStanding:{width:48,height:48},holdingFemale01:{width:60,height:72},holdingFemale02:{width:84,height:84},holdingFemale03:{width:60,height:60},nourrison:{width:36,height:60},boySitting:{width:60,height:72},sitMale01:{width:72,height:84},sitMale02:{width:72,height:84},sitMale03:{width:72,height:108},sitFemale03:{width:60,height:72},girlSittingTable:{width:42,height:72},sitFemale02:{width:90,height:120},girlSittingGround:{width:72,height:66},boyLying:{width:72,height:216},lyingDownMale02:{width:72,height:204},lyingDownMale01:{width:72,height:216},lyingDownFemale01:{width:84,height:180},dog:{width:36,height:108},cat:{width:22,height:42},siameseCat:{width:16,height:72},rabbit:{width:18,height:30},horse2:{width:72,height:300},bed:{width:174,height:232},boucheVMC:{width:26,height:3},radiator1:{width:260,height:18},radiateur:{width:61,height:8},radiateurVertical:{width:74,height:6},cornice:{width:120,height:12},corniceConcaveCorner:{width:12,height:12},pileMagazines:{width:33,height:41},antenaTV:{width:240,height:97},guitar:{width:47,height:118},winchesterArmchair:{width:135,height:113},etageres:{width:180,height:47},etagereEnfant:{width:84,height:37},bookcase:{width:200,height:40},beige_sofa:{width:233,height:92},container:{width:16,height:11},bouteille:{width:10,height:10},tableCuisine:{width:144,height:48},meubleMicroOnde:{width:76,height:53},cabinet:{width:96,height:75},cabinetWithBasin:{width:96,height:75},drawers:{width:48,height:75},upperCabinet2:{width:72,height:50},portillon:{width:147,height:8},bump:{width:120,height:120},petiteCommode:{width:99,height:56},armoire:{width:131,height:64},portemanteaux2:{width:56,height:56},litMezzanine:{width:241,height:261},bacADouchePlat:{width:108,height:108},frontDoor:{width:122,height:28},frenchWindow85x200:{width:110,height:41},window85x123:{width:110,height:41},window85x163:{width:110,height:41},doubleOutwardOpeningWindow:{width:139,height:32},doubleWindow126x123:{width:159,height:41},doubleWindow126x163:{width:159,height:41},doubleFrenchWindow126x200:{width:159,height:41},sliderWindow126x200:{width:159,height:38},fixedWindow85x123:{width:110,height:33},serviceHatch:{width:60,height:10},slidingDoors:{width:185,height:10},pendantLamp:{width:72,height:72},spotlight:{width:9,height:12},wallUplight:{width:29,height:15},floorUplight:{width:40,height:40},lampeHalogene:{width:38,height:83},led_striplight:{width:120,height:5},washbasin:{width:68,height:57},washbasinWithCabinet:{width:75,height:69},fittedBath:{width:214,height:93},bath:{width:196,height:88},toiletUnit:{width:48,height:96},clothesWasher:{width:71,height:73},bed140x190:{width:190,height:250},bed90x190:{width:130,height:250},bunkBed90x190:{width:138,height:250},loftBed140x190:{width:198,height:250},cornerBunkBed90x190:{width:250,height:250},wardrobe:{width:120,height:65},railing:{width:114,height:6},kitchenCabinet:{width:72,height:77},sink:{width:144,height:77},fridge:{width:72,height:80},fridgeFreezer:{width:72,height:80},cornerSofa:{width:280,height:202},sofa:{width:177,height:105},sofa2:{width:240,height:104},glassDoorCabinet:{width:84,height:47},armchair:{width:105,height:111},armchair2:{width:96,height:94},stool:{width:48,height:48},tabouretPiano:{width:43,height:46},coffeeTable:{width:150,height:56},roundTable:{width:152,height:152},squareTable:{width:138,height:138},tvUnit:{width:120,height:63},dresser:{width:204,height:60},aquarium:{width:72,height:36},filledBookcase:{width:102,height:42},flatTV:{width:146,height:36},fireplace:{width:174,height:102},cheminee:{width:174,height:102},piano:{width:168,height:52},pianoDroit:{width:154,height:67},box:{width:60,height:60},cylinder:{width:60,height:60},estintore:{width:43,height:25},antenaParabolica:{width:78,height:85},hotWaterRadiator:{width:78,height:30},electricRadiator:{width:45,height:12},electricOutlet:{width:9,height:1},electricOutlet2:{width:9,height:1},desk:{width:168,height:82},souris:{width:8,height:13},tourPC:{width:15,height:29},workLamp:{width:20,height:60},curveStaircase:{width:87,height:286},spiralStaircase:{width:168,height:168},staircase:{width:87,height:267},blind:{width:120,height:9},fivePanesWindowWithWallPart:{width:256,height:14},rectangularFivePanesWindow:{width:256,height:14},pictureWindow:{width:256,height:65},simpleShutter:{width:73,height:6},traditionalShutter:{width:73,height:6},twoPartsShutter:{width:73,height:6},fancyWindow:{width:73,height:7},newWindowDk:{width:73,height:4},windowFrostedGlass:{width:73,height:3},window_shutter:{width:53,height:3},window_double_3x3:{width:162,height:19},door_window_thick_double_2x4:{width:192,height:28},door_window_thick_double:{width:192,height:28},door_window_thick:{width:96,height:28},window_double_frame_sill:{width:148,height:30},window_urban_neoclassic:{width:240,height:72},window2:{width:120,height:30},"window-01":{width:66,height:20},"window-08-02":{width:75,height:20},"window-shutter":{width:37,height:2},window_2x3_arched:{width:130,height:38},window_2x3_regular:{width:130,height:38},window_2x3:{width:130,height:38},window_2x4_arched:{width:130,height:38},window_4x3_arched:{width:192,height:39},window_4x3:{width:192,height:39},frontDoorDark:{width:135,height:48},garageDoor:{width:504,height:30},patioGlassDoorUnit:{width:193,height:22},sixDoorFrenchStyle:{width:714,height:122},frenchDoors:{width:287,height:34},DianaWindow:{width:468,height:31},accordionFoldDoors:{width:341,height:152},garageDoor2:{width:252,height:18},doorGlassPanels:{width:93,height:13},door1:{width:110,height:22},glassDoorsOpened:{width:403,height:104},patioDoorOpened:{width:202,height:99},patioDoor:{width:119,height:22},patioSideDoor:{width:73,height:7},fancyFrontDoor:{width:120,height:29},door_glass:{width:115,height:20},"exterior-door-01":{width:126,height:22},"exterior-door-02":{width:118,height:21},"exterior-door-03":{width:125,height:20},wallLight:{width:27,height:30},bougeoir:{width:15,height:14},neon:{width:50,height:8},candleOrnament:{width:10,height:15},deskLamp1:{width:49,height:49},deskLight:{width:28,height:89},ceiling_lamp_globo_feria:{width:55,height:55},lamp_paraffin_feuerhand:{width:15,height:13},lamp_wall_outside:{width:54,height:60},"classic-lamppost":{width:36,height:36},flashlight:{width:5,height:18},"hanging-restaurant-light":{width:47,height:47},"park-light":{width:74,height:68},"pedestal-vase-lamp":{width:34,height:34},"wall-lamp-artwork":{width:36,height:45},desk_lamp1:{width:16,height:41},desk_lamp2:{width:27,height:50},little_lamp1:{width:40,height:40},little_lamp3:{width:49,height:49},saloon_lamp:{width:16,height:100},table_lamp:{width:24,height:24},living_room_lamp1:{width:33,height:33},living_lamp:{width:48,height:70},"chandelier-lamp":{width:157,height:157},candelabre:{width:52,height:174},candle:{width:13,height:12},deer:{width:6,height:12},led_tv:{width:93,height:17},oakChair:{width:59,height:73},pianoAQueue:{width:158,height:204},plasticChair:{width:53,height:70},shelves:{width:95,height:47},televisionCabinet:{width:162,height:83},verticalShelves:{width:53,height:47},electricGuitar:{width:41,height:39},littlePlant:{width:32,height:32},sillaBlanca:{width:61,height:70},couch:{width:249,height:105},modernArmchair:{width:93,height:102},antiqueChair:{width:60,height:76},chairWithCushion:{width:53,height:53},winchesterSofa:{width:278,height:113},designChair:{width:93,height:75},arbolito:{width:30,height:31},cafe_set_mota_chair:{width:73,height:67},cafe_set_mota_table:{width:75,height:75},cafe_set_tonon_chair:{width:58,height:64},cafe_set_tonon_table:{width:79,height:63},ella_chair_f:{width:55,height:68},leaf_chair:{width:81,height:98},spatifilum:{width:96,height:90},tvStand:{width:162,height:56},armchair1:{width:121,height:106},spider_plant:{width:80,height:76},tulip:{width:46,height:53},white_lily:{width:45,height:37},plaidChair:{width:49,height:51},sofa3:{width:245,height:92},tulips:{width:38,height:30},couch3:{width:241,height:109},barStool:{width:40,height:40},bookcase2:{width:98,height:53},computerWorkstation:{width:149,height:166},cornerWorkstation:{width:131,height:130},bocalPoisson:{width:40,height:40},tableGnome:{width:124,height:79},rectangularTable:{width:210,height:121},squareCoffeeTable:{width:81,height:81},ecran16_9:{width:104,height:34},tableBasseBois:{width:114,height:60},woodTable:{width:205,height:127},priseTV:{width:10,height:1},petiteTableSalon:{width:38,height:38},bibliothequeDroite:{width:60,height:48},allenOrgan:{width:223,height:187},highBoyDresser:{width:116,height:68},smallbookshelves:{width:105,height:40},salontafel:{width:120,height:120},couchTwoSeats:{width:238,height:109},kleed_grieks:{width:204,height:144},pinewoodRackFullHeightHalfWidth:{width:59,height:36},pinewoodRackFullHeight:{width:108,height:36},latticeChair:{width:52,height:51},meubleMural:{width:314,height:66},CDrack:{width:79,height:24},displayCabinet:{width:101,height:101},hallTable:{width:141,height:75},potplant2:{width:116,height:115},roundTable2:{width:65,height:65},shelving:{width:143,height:37},sofa3Single:{width:166,height:123},sofa4:{width:222,height:89},couchPoofyPillows:{width:187,height:85},largeCouch:{width:284,height:92},singleChair:{width:121,height:93},throwPillow:{width:42,height:20},counter:{width:229,height:346},tableBasse:{width:135,height:72},pancaFratinoSing:{width:102,height:60},tavoloFratino:{width:132,height:84},TVCenter:{width:93,height:65},chair_high:{width:78,height:84},shelves_storage_wood2:{width:92,height:44},table_granmother_marble:{width:144,height:144},armchair_wing:{width:102,height:108},bar_stool:{width:53,height:50},dropLeafTable:{width:312,height:94},"mid-century-chair":{width:88,height:101},"chair-ottoman":{width:92,height:186},"bar-stool":{width:64,height:71},"dining-chair":{width:51,height:69},"utility-shelving":{width:72,height:36},"mid-century-bench-sofa":{width:335,height:129},"mid-century-sofa":{width:239,height:101},credenza:{width:199,height:60},sedia:{width:54,height:55},tavolino:{width:72,height:36},tavolo:{width:192,height:84},box_room:{width:189,height:57},saloon_table:{width:173,height:77},table3:{width:120,height:120},table4:{width:168,height:108},tv:{width:67,height:38},wooden_table_office:{width:181,height:96},tubular_chair:{width:64,height:60},metal_glass_table:{width:193,height:108},glass_table_office:{width:223,height:96},desk_table:{width:230,height:106},bar_table:{width:96,height:96},beige_sofa_2seats:{width:191,height:88},burlap_sofa:{width:204,height:108},contemp_living_room:{width:397,height:48},leather_sofa:{width:231,height:108},living_room_table:{width:128,height:87},modern_armchair:{width:76,height:63},plastic_chair:{width:58,height:67},calla_lily_with_roses:{width:52,height:46},sofa_white_beige:{width:209,height:98},ficus:{width:51,height:50},"coffee-table2":{width:149,height:61},lavender:{width:16,height:14},kitchenaid:{width:26,height:44},knifeStandSwap:{width:47,height:5},plasticCup:{width:10,height:10},silla2:{width:40,height:38},yogurtBottle:{width:9,height:9},beerGlass:{width:19,height:13},upperCornerCabinet:{width:98,height:98},upperShelves:{width:42,height:42},beer_bottle:{width:7,height:7},coffee_cup:{width:11,height:11},fork:{width:3,height:22},kitchenblender:{width:19,height:27},kitchenTools:{width:53,height:12},knife:{width:3,height:25},largePan:{width:40,height:33},microwave:{width:49,height:43},spoon:{width:4,height:22},washing_machine:{width:72,height:75},breadBox:{width:68,height:33},kitchenScale:{width:28,height:28},espressokettle:{width:22,height:12},boiteMetal:{width:9,height:9},chaiseCuisine:{width:44,height:66},verreFlute:{width:6,height:6},glassDoorKitchenCabinet:{width:160,height:44},verreLongDrink:{width:7,height:7},microOnde:{width:59,height:43},mug:{width:10,height:13},assietteVerresCouverts:{width:45,height:44},smallGlass:{width:12,height:12},carafeEau:{width:38,height:38},verreEau:{width:9,height:9},carafeVin:{width:38,height:38},verreVin:{width:9,height:9},glassdoorCabinet:{width:48,height:53},mobile_cucina_60x60:{width:72,height:79},lavello_doppio_90x60:{width:144,height:79},cassetti_cucina_45x60:{width:54,height:79},isola_cucina_150x90:{width:180,height:126},pensile_cucina_45x90:{width:108,height:82},pensile_cucina_60x70:{width:84,height:60},capa:{width:80,height:60},piano_cottura:{width:72,height:74},frigorifero:{width:72,height:87},ceramicHob:{width:72,height:63},cornerCabinet:{width:95,height:94},"3DrawerCabinet":{width:64,height:77},"2GlassDoorCabinet":{width:116,height:48},"2DoorUpperCabinet":{width:116,height:48},"2DoorLowerCabinet":{width:116,height:77},"1GlassDoorCabinet":{width:55,height:48},"1DoorUpperCabinet":{width:55,height:48},"1DoorLowerCabinet":{width:63,height:77},refridgerator:{width:92,height:78},pantry:{width:118,height:77},kitchenSinkWithMarble:{width:110,height:77},cornerChina:{width:93,height:93},couteauADecouper:{width:4,height:39},couteauAPain:{width:3,height:35},plancheADecouper:{width:42,height:29},barCusisine:{width:146,height:54},frigo:{width:69,height:72},desserte:{width:57,height:45},casierBouteilles:{width:72,height:30},cookingPlate:{width:48,height:25},gaz:{width:38,height:38},washer_dryer:{width:72,height:66},ashtray:{width:10,height:10},"bullet-trash-can":{width:40,height:40},"12-oz-glass":{width:9,height:9},"highball-glass":{width:8,height:8},"oil-servers":{width:18,height:9},"dinner-plate":{width:30,height:22},"bread-plate":{width:24,height:24},"propane-stove":{width:73,height:72},"red-wine-bottle-01":{width:11,height:11},angolo:{width:78,height:78},cucina:{width:96,height:80},curva:{width:72,height:72},curvaEsterna30:{width:36,height:72},curvaInterna30:{width:36,height:72},doppio:{width:96,height:77},pensileAngolo:{width:78,height:78},pensileCurva:{width:33,height:33},pensileDoppio:{width:96,height:41},pensileVetro:{width:48,height:36},pianoIsola:{width:48,height:144},singolo:{width:48,height:77},lavello:{width:96,height:77},cassettiera:{width:48,height:77},mobilettoGrande:{width:96,height:77},mobilettoPiccolo:{width:48,height:77},gasHob:{width:72,height:48},old_jar:{width:30,height:25},pottery:{width:14,height:14},sushi_tray:{width:39,height:30},kitchen_tool1:{width:9,height:56},kitchen_tool2:{width:12,height:54},kitchen_tool3:{width:10,height:56},kitchen_tool4:{width:8,height:53},wine_bottle:{width:10,height:10},bar_chair:{width:54,height:59},kitchen_stool:{width:55,height:55},coffee_machine:{width:70,height:49},creamer:{width:15,height:11},cup:{width:15,height:15},sugar:{width:13,height:13},teapot:{width:27,height:18},shovel:{width:33,height:65},"shopping-basket":{width:72,height:61},squeezer:{width:20,height:15},deepFryerWithFrenchFries:{width:34,height:69},stoneGrillDevice:{width:38,height:31},"food-spaghetti-box":{width:34,height:6},"kitchen-glass-jar-low":{width:12,height:12},"waitress-table-on-wheels":{width:101,height:50},bed2:{width:174,height:257},caballito:{width:82,height:35},cartoon_biplane:{width:17,height:15},wardrobeWithSlidingDoors:{width:240,height:80},cupboard:{width:121,height:47},babyRockingBed:{width:72,height:99},cardGame:{width:26,height:14},briefcase:{width:48,height:13},handbag:{width:32,height:15},woodToy:{width:10,height:8},"carrito-de-madera":{width:16,height:33},clock:{width:9,height:6},suit:{width:53,height:15},chessboard:{width:36,height:36},lettoCloud:{width:227,height:260},toyTrain:{width:37,height:15},xylophone:{width:58,height:35},petitReveil:{width:11,height:6},p40:{width:22,height:19},daybed:{width:318,height:252},captainsBed:{width:159,height:250},trundleBed:{width:259,height:114},litParents:{width:227,height:271},clicClacOuvert:{width:219,height:159},lit:{width:201,height:265},meubleChevet:{width:48,height:35},suits_racked:{width:96,height:72},childBed:{width:126,height:252},"hanging-clothes2":{width:75,height:66},comodinoSinistroCiliegio:{width:180,height:54},lettoCiliegio:{width:221,height:237},mensolaCiliegio:{width:123,height:24},comodinoAzzurro:{width:60,height:51},lettoAzzurro:{width:96,height:216},lettoSoppalcoAzzurro:{width:100,height:216},mensolaAcero:{width:72,height:24},scaletta:{width:53,height:56},iron_bed:{width:159,height:258},wardrobe1:{width:261,height:64},children_bed:{width:111,height:247},kids_shelves:{width:122,height:51},robe:{width:92,height:100},casquette:{width:29,height:40},chapeau:{width:44,height:51},"short-shadows":{width:46,height:63},"pantalon-shadows":{width:49,height:119},blouson:{width:62,height:88},jupe:{width:49,height:49},"jupe-doeskin":{width:49,height:39},chaussette:{width:27,height:37},"montre-with-pose":{width:6,height:11},montre:{width:6,height:30},bague:{width:3,height:3},"gant-textured":{width:18,height:32},"dressing-table":{width:103,height:56},day_bed_frame:{width:250,height:117},tasDeVetements:{width:147,height:125},oreiller:{width:49,height:49},flipFlops:{width:24,height:24},cissors_swap:{width:17,height:9},ruler:{width:38,height:5},technicalTable1:{width:258,height:143},technicalTable2:{width:164,height:206},textMarker:{width:4,height:13},kalender:{width:15,height:10},biurko3:{width:145,height:73},"sef-kasa":{width:60,height:66},simpleDesk:{width:169,height:98},officeTable:{width:228,height:101},classSeat:{width:75,height:82},armChair2:{width:118,height:99},bureauInformatique:{width:141,height:72},clavier:{width:51,height:17},portable:{width:36,height:31},bigCornerDesk:{width:240,height:201},plantersDesk:{width:92,height:80},stylo:{width:1,height:18},secretarysDesk:{width:129,height:96},desk2:{width:216,height:196},officeChair:{width:76,height:72},officeChair2:{width:76,height:83},officeChair3:{width:68,height:68},escritorio:{width:168,height:71},bureauEcolier:{width:107,height:68},invoice:{width:26,height:36},bureauInfoClair:{width:94,height:66},chair_office_x:{width:63,height:62},scissors:{width:6,height:15},"apple-ibook-2001":{width:35,height:33},"office-chair":{width:78,height:78},"custom-desk":{width:283,height:101},"filing-cabinet":{width:47,height:64},"apple-imac-1998":{width:51,height:60},stapler:{width:4,height:14},raccordo80W:{width:96,height:96},scrivania160W:{width:192,height:96},mobile90160W:{width:108,height:59},mobile90198W:{width:108,height:59},mobile9080W:{width:108,height:59},apple_pc:{width:53,height:44},kids_desk_chair:{width:65,height:63},kids_desk_table:{width:135,height:73},kids_wooden_desk:{width:121,height:75},wooden_office_alder_table:{width:194,height:114},wooden_office_pear_table_rect:{width:192,height:96},wooden_office_teak_table:{width:192,height:144},bandeja:{width:33,height:46},pencil2:{width:1,height:17},comb:{width:15,height:5},cosmeticsPot:{width:10,height:10},showerDoor:{width:109,height:27},toiletPaperDispenser:{width:19,height:13},toiletsUnit:{width:43,height:84},flacon:{width:5,height:3},showerStall:{width:112,height:135},urinal:{width:44,height:36},bath_jay_hardy:{width:217,height:85},bathroomRadiator:{width:59,height:23},lipStick:{width:3,height:3},toilets_unit_jay_hardy:{width:50,height:66},radiatorAndTowels:{width:72,height:12},modernToilet:{width:54,height:102},meubleSalleDeBain:{width:72,height:72},bidon:{width:8,height:8},robinet:{width:7,height:18},parfumAmbiance:{width:11,height:6},rasoir:{width:15,height:6},shampoo:{width:9,height:5},gelDouche:{width:10,height:6},boiteDeMouchoirs:{width:27,height:14},derouleurWC:{width:20,height:17},tube:{width:3,height:3},pareDouche:{width:108,height:10},bathroomFurniture:{width:143,height:62},towelMedicineCabinet:{width:75,height:74},bath_L:{width:204,height:102},bathroom_cupboard_mirror:{width:72,height:18},towel_rack:{width:54,height:25},tendaDoccia:{width:89,height:113},barreAppuiL:{width:72,height:14},"towel-rack":{width:60,height:12},showerHeadAndFaucet:{width:30,height:28},mobilettoSpecchioBlu:{width:84,height:15},mobilettoSpecchioWenge:{width:96,height:27},mobilettowenge:{width:96,height:51},water:{width:44,height:67},bathroom4:{width:74,height:74},bathroom1:{width:88,height:94},double_vanity:{width:223,height:82},com_bath:{width:7,height:7},com_bath2_cepillo:{width:24,height:7},com_bath2_esponja:{width:12,height:12},com_bath2_peineta:{width:8,height:8},com_bath2_soap:{width:14,height:7},com_bath3_toalla:{width:22,height:14},medicoscopia_bottle:{width:6,height:6},medicoscopia_bottle2:{width:7,height:7},medicoscopia_box:{width:14,height:6},small_lavatory:{width:60,height:51},"folding-wall-seat":{width:48,height:54},"mixer-tap-for-bath-and-shower":{width:35,height:42},"mixer-tap-for-bath":{width:35,height:20},"shower-armchair":{width:53,height:52},"shower-chair":{width:56,height:54},"turkish-toilet":{width:54,height:85},grandStaircaseDark:{width:610,height:346},escalierColimacon2:{width:242,height:260},outdoor_staircase:{width:154,height:339},stairs_topcurve_90:{width:240,height:482},staircase_90_high_open:{width:215,height:305},staircase_straight:{width:108,height:410},stairs_legal:{width:108,height:370},stairs_spiral:{width:240,height:240},quarterSlope:{width:960,height:960},"home-lift":{width:122,height:89},"stair-lift-rail":{width:648,height:14},"stair-lift":{width:72,height:66},flowerBox:{width:66,height:21},mofx_mailbox:{width:20,height:56},relaxChair:{width:80,height:228},bench:{width:205,height:56},childHut:{width:394,height:625},childSwing:{width:257,height:150},seesaw:{width:288,height:51},wheelbarrow:{width:200,height:72},lantern:{width:46,height:40},chair_deck:{width:81,height:251},poolLounge:{width:106,height:240},rowboat:{width:151,height:371},transat:{width:72,height:126},table_footrest:{width:180,height:41},fencepost1:{width:15,height:15},fencepost2:{width:15,height:15},"borderfence-main":{width:116,height:15},"borderfence-small":{width:69,height:15},dogHouse:{width:125,height:161},blackDeckTable:{width:186,height:188},gardenUmbrella:{width:309,height:267},blackDeckChair:{width:62,height:80},privacyFence:{width:88,height:10},canapeJardin:{width:266,height:90},swimmingPool:{width:999,height:407},balancelle:{width:180,height:177},cloture:{width:141,height:12},fence_grid_gate:{width:102,height:6},bordure:{width:54,height:4},gate_iron:{width:118,height:2},portail:{width:229,height:16},etendoirLinge:{width:501,height:109},flag_hinged_pole:{width:276,height:168},parasol_str:{width:240,height:240},traffic_light_ped:{width:64,height:64},"concrete-bench":{width:171,height:72},"park-trashcan":{width:95,height:95},"porch-column-01":{width:40,height:40},"porch-column-02":{width:52,height:52},"residential-trashcan":{width:71,height:71},"spray-bottle":{width:12,height:15},"concrete-sidewalk":{width:659,height:116},"fire-hydrant":{width:50,height:40},"hose-reel":{width:42,height:33},ext_chair:{width:120,height:92},littlebank:{width:312,height:81},wood_bank:{width:240,height:121},beach_chair:{width:84,height:233},letters_box:{width:38,height:15},"rectangle-swimming-pool":{width:600,height:331},"garden-faucet":{width:6,height:24},"passage-a-niveau":{width:716,height:112},rails:{width:1200,height:196},"fleche-tout-droit":{width:84,height:480},"fleche-tourner-a-droite-et-direct":{width:153,height:480},"fleche-tourner-a-droite":{width:120,height:480},"stationnement-creneau":{width:612,height:246},"stationnement-en-bataille":{width:285,height:606},"stationnement-epi-45":{width:963,height:583},"stationnement-epi-60":{width:689,height:624},"stationnement-epi-75":{width:463,height:618},"high-hedge":{width:181,height:125},hedge:{width:182,height:126},acacia:{width:925,height:775},bamboo:{width:360,height:334},ficusTree:{width:330,height:341},bluePineSnow:{width:423,height:444},coconutTree:{width:933,height:960},coconutTreeBended:{width:876,height:901},copperBeech:{width:902,height:876},cypress:{width:159,height:161},japaneseMaple:{width:949,height:837},poplar:{width:486,height:451},peachBlossom:{width:605,height:896},pineSnow:{width:450,height:455},sabalPalmeto:{width:417,height:373},sycamoreMaple:{width:1091,height:1272},tasDeTerre:{width:111,height:112},tasDeSable:{width:115,height:117},tasDeGravillons:{width:118,height:108},tasDeGravats:{width:116,height:110},voiesFerreesCourbe10m:{width:1255,height:676},voiesFerreesCourbe40m:{width:4720,height:1132},voiesFerreesDroit1m:{width:120,height:528},routeCourbe2VoiesAvecTrottoirs26m:{width:3247,height:1639},routeCourbe1VoieAvecTrottoirs26m:{width:3193,height:1226},"routeCourbe2VoiesAvecTrottoirs6.5m":{width:934,height:1335},"routeCourbe1VoieAvecTrottoirs6.5m":{width:880,height:924},routeCourbe1VoieAvecTrottoirs13m:{width:1652,height:1024},routeCourbe2VoiesAvecTrottoirs13m:{width:1706,height:1436},route1VoieAvecTrottoirs:{width:1560,height:834},croisement1et1:{width:834,height:834},croisement1et2:{width:834,height:1254},pont2Voies:{width:1560,height:1254},pont1Voie:{width:1560,height:834},separateurDeVoie:{width:288,height:72},pilierPont1Voie:{width:84,height:540},autoroute2Voies:{width:6240,height:1274},routeCourbe1VoieAvecTrottoirs90Deg:{width:834,height:834},filElectrique:{width:2745,height:5},"poteau-en-beton":{width:408,height:289},"poteau-en-bois":{width:408,height:128},"feu-de-signalisation-avec-signalisation-au-dessus":{width:385,height:68},hydrangea:{width:96,height:94},blackTupelo:{width:800,height:780},quakingAspen:{width:426,height:443},fanPalm:{width:296,height:309},sassafras:{width:729,height:711},weepingWillow:{width:840,height:820},radiator2:{width:160,height:50},radiator:{width:169,height:30},speaker3:{width:27,height:31},tableFan:{width:33,height:27},ammoBox:{width:120,height:63},barrel:{width:98,height:98},basketball:{width:29,height:29},fireExtinguisher:{width:38,height:22},numberLock:{width:12,height:1},cuckooClock:{width:32,height:22},riggedFan:{width:40,height:25},tennisRacket:{width:32,height:83},radio:{width:37,height:11},thermometer:{width:10,height:8},wallDoubleSocket:{width:19,height:2},wallSocket:{width:10,height:1},"wire-coathanger":{width:50,height:2},sunglasses:{width:19,height:19},tableTennisBat:{width:18,height:31},modernRadiator:{width:61,height:14},mp3Station:{width:48,height:12},workbench:{width:148,height:75},fitnessTower:{width:268,height:209},fut:{width:54,height:54},pompeBiere:{width:71,height:31},curtainRod:{width:180,height:20},priseTelephonique:{width:10,height:2},rampe:{width:240,height:15},tableauMulet:{width:39,height:1},tableauVisage:{width:26,height:1},tableauVisage2:{width:40,height:1},tableauVisage3:{width:32,height:1},tableauYing:{width:45,height:1},prise:{width:10,height:2},railing1:{width:196,height:14},roundedEdgesRailing:{width:96,height:12},roundedEdgesRailing1:{width:101,height:12},scie:{width:15,height:54},rampeArcCercle:{width:212,height:122},interrupteur:{width:10,height:2},tableauElectrique:{width:30,height:13},horlogeUbuntu:{width:46,height:10},venetianBlind:{width:108,height:11},etau:{width:16,height:24},portemanteaux:{width:96,height:96},arch:{width:120,height:20},AntelopeCanyonFrame:{width:61,height:2},EiffelTowerFrame:{width:81,height:2},InariFrame:{width:58,height:2},MontBlancFrame:{width:114,height:2},lightSwitch:{width:9,height:3},smallWroughtIronRails:{width:142,height:13},wroughtIronRails:{width:225,height:13},pavesDeVerre:{width:26,height:6},appleIpod:{width:8,height:13},pile:{width:2,height:6},polygonalRoof:{width:602,height:180},toitureArdoiseRouge:{width:240,height:172},TorontoOntarioPlaceFrame:{width:74,height:2},TigerFrame:{width:76,height:2},NiagaraFallsFrame:{width:98,height:2},VeniceFrame:{width:89,height:2},picture:{width:161,height:12},guacal:{width:71,height:48},LakeMoraineFrame:{width:89,height:2},SquirrelFrame:{width:59,height:2},StatueOfLibertyFrame:{width:61,height:2},VaticanMuseumFrame:{width:74,height:2},EtretatFrame:{width:81,height:2},ColoredFountainFrame:{width:89,height:2},HorseShoeBendFrame:{width:74,height:2},TucanFrame:{width:59,height:2},YosemiteFrame:{width:89,height:2},WaterLilyFrame:{width:81,height:2},ruffledVase:{width:33,height:35},radiator_7section:{width:82,height:23},bd:{width:26,height:36},livreJava:{width:26,height:29},sh3dMag:{width:26,height:36},SweetHome3DKompakt:{width:18,height:25},enceinteColonne:{width:27,height:36},AtorArriere:{width:73,height:68},bathroom_fan:{width:24,height:40},frame_horizontal:{width:186,height:12},frame_vertical:{width:153,height:9},frame3HorizontalMomijiPhotos:{width:31,height:4},frame3VerticalTowerPhotos:{width:63,height:4},ladder_simple:{width:68,height:104},ladder_water:{width:53,height:102},plastic_storage_box:{width:70,height:50},sauna_120x120:{width:144,height:158},vent_round:{width:27,height:36},staircase_handrail_hor:{width:113,height:4},metalBeam:{width:240,height:24},pwdRamp:{width:91,height:143},"iron-railing-02":{width:135,height:17},"recycling-bin":{width:44,height:33},"tape-measure":{width:18,height:3},"trunk-large":{width:120,height:61},newspaper:{width:33,height:29},vase1:{width:28,height:28},vase2:{width:33,height:33},vase5:{width:40,height:38},frame2:{width:18,height:18},basic_camera:{width:12,height:3},electric_water_heater_big:{width:55,height:56},mp3_base_for_ipad:{width:32,height:20},stereo_amplifier:{width:55,height:47},"open-cardboard-box":{width:98,height:75},"step-ladder-wood":{width:55,height:90},"wall-hanger":{width:54,height:8},"iron-railing-separated-hooks-1":{width:198,height:14},"iron-railing-separated-hooks-3":{width:136,height:17},"scie-egoine":{width:74,height:21},"rouleau-de-ruban-adhesif":{width:19,height:5},pelle:{width:27,height:119},cone:{width:46,height:46},"perceuse-electrique":{width:9,height:33},"meuleuse-electrique":{width:38,height:62},"billet-10-euros":{width:16,height:9},"billet-20-euros":{width:16,height:9},"billet-50-euros":{width:17,height:10},"rounded-antenna":{width:11,height:1},"rounded-dimmer":{width:11,height:3},"rounded-double-switch":{width:11,height:2},"rounded-plug-TypeA":{width:11,height:1},"rounded-plug-TypeB":{width:11,height:1},"rounded-plug-TypeCFlat":{width:11,height:1},"rounded-plug-TypeE":{width:11,height:1},"rounded-plug-TypeG":{width:11,height:1},"rounded-RJ-45":{width:11,height:1},"rounded-switch":{width:11,height:2},"square-antenna":{width:11,height:1},"square-dimmer":{width:11,height:2},"square-plug-TypeA":{width:11,height:1},"square-plug-TypeCFlat":{width:11,height:1},"square-plug-TypeG":{width:11,height:1},"square-RJ-45":{width:11,height:1},"antenna-whites":{width:11,height:1},"dimmer-whites":{width:11,height:3},"plug-TypeA-whites":{width:11,height:1},"plug-TypeCFlat-whites":{width:11,height:1},"plug-TypeG-whites":{width:11,height:1},"RJ-45-whites":{width:11,height:1},chimney:{width:81,height:81},"round-chimney":{width:44,height:44},"pince-coupante":{width:72,height:21},parpaing:{width:60,height:24},cageALapin:{width:123,height:70},roueAvecJante:{width:22,height:71},newspapersPile:{width:37,height:29},openedNewspaper:{width:70,height:49},safeOnFeet:{width:56,height:56},"fil-electrique-1m":{width:121,height:1},pileRevues:{width:26,height:35},walker:{width:80,height:53},forkLift:{width:422,height:157},peterbilt:{width:345,height:2526},bike:{width:49,height:140},fordFocus:{width:246,height:523},peugeot103:{width:69,height:204},"concept-sedan-01v2":{width:222,height:548},"concept-sedan-02":{width:253,height:528},"concept-sedan-02-sport":{width:253,height:510},"VW-new-beetle":{width:233,height:491},"concept-sedan-01v1":{width:230,height:566},"peugeot-308":{width:252,height:533},"yamaha-yzr-r6":{width:96,height:244},tricycle:{width:45,height:72},suv:{width:251,height:556},chevrolet:{width:253,height:535},skateboard:{width:24,height:97},suv2:{width:252,height:513},carSegmentA:{width:205,height:329},carSegmentB:{width:222,height:473},chicken:{width:30,height:40},bulldog:{width:47,height:78},horse:{width:71,height:275},"female-01-casual-clothing":{width:57,height:45},"male-01-suit":{width:68,height:50},sitFemale01:{width:68,height:99},fille:{width:59,height:28},boy:{width:65,height:33},frenchWindow2:{width:120,height:30},"turn-window":{width:71,height:17},smallWindow2:{width:120,height:30},window_2x3_frame_sill:{width:68,height:42},window_deep:{width:126,height:72},fixed_window_2x2:{width:72,height:20},doubleWindow2:{width:180,height:30},window_double_2x3_frame_sill:{width:148,height:30},doubleFrenchWindow2:{width:180,height:30},window_2x4:{width:131,height:38},window_2x6:{width:131,height:38},window_4x5:{width:193,height:39},window_3x1:{width:226,height:39},window_4x1:{width:301,height:39},window_2x1_medium_with_large_pane:{width:132,height:38},window_2x1_with_sliders:{width:226,height:30},"window-08":{width:76,height:20},window_shop:{width:216,height:18},window_stain_glass:{width:96,height:20},glassblock:{width:26,height:11},door:{width:110,height:18},glass_door_framless:{width:110,height:24},"screen-door":{width:106,height:12},puerta:{width:105,height:17},craftsmanDoorClosed:{width:122,height:23},sliderPocketDoor:{width:114,height:15},double_door_2:{width:212,height:21},double_door:{width:212,height:21},double_plain_door_with_little_part:{width:160,height:21},"exterior-door-05":{width:119,height:23},"exterior-door-07":{width:123,height:22},frontDoor2:{width:135,height:24},glass_door:{width:126,height:21},double_door_with_little_part:{width:160,height:21},glassDoor2:{width:102,height:17},japanesedoor:{width:358,height:12},"garage-door":{width:470,height:32},"garage-door2":{width:530,height:39},emergencyGlassDoubleDoor:{width:263,height:35},revdoor:{width:461,height:360},elevator:{width:223,height:228},"elevator-door":{width:223,height:26},hangingLight:{width:53,height:53},lamp2:{width:65,height:62},lustreBoule:{width:36,height:36},"ceiling-lamp":{width:36,height:36},minispot:{width:30,height:30},painting_light:{width:48,height:18},"track-lights":{width:120,height:21},"wall-spotlight":{width:8,height:29},wall_lamp:{width:27,height:14},fluorescent:{width:126,height:30},"fluorescent-strip":{width:66,height:11},lightSource2:{width:48,height:48},"porch-light":{width:22,height:21},street_light_modern:{width:41,height:294},farola1:{width:53,height:53},tableBasse2:{width:135,height:72},table2:{width:174,height:113},"oriental-rug":{width:223,height:310},angolo160W:{width:54,height:54},angolo198W:{width:54,height:54},angolo80W:{width:54,height:54},sphere:{width:60,height:60}},Gt=[...tt,...et,...Qe,...ot,...Je,...st,...$e,...it,...nt],Ut={...Ft,...kt,...It,...Nt,...Ot,...Et,...Pt,...Vt,...Ht},qt=["3_blue_and_white_lines_wallpaper","3_brown_lines_wallpaper","3_green_and_white_lines_wallpaper","3_red_and_white_lines_wallpaper","african-wallpaper-2","african-wallpaper","alu_siding_greyscale2","animal-skin","asphalte-clair-4x4m","asphalte-fonce-4x4m","balanced-blue-sponge-wallpaint","balanced-green-sponge-wallpaint","basic-white-tile","bathroom-tile-beige","bathroom_tiles-multicolour","bathroom_tiles","bathroom_tiles_2","beech","beige-bricks-wall-bricks","beige-carpet-square","beige-granite-cook-tops","beige-leather","beigeTile","beige_brown_tiles","beige_fabric","beige_fabric2","beige_grey_squares_wallpaper","beige_pattern","beige_tiles","beige_waves_wallpaper","big-stones-floor-tiles","big-sun-sky","birch","black-and-white-stones","blackAndWhiteTiles","bleachedWood","blue-and-geometric-kitchen-tiles","blue-and-green-plaid-furniture-fabric","blue-fabric","blue-fibres_fabric-for-furniture","blue-painted-wood","blue-rectangles-bathroom-tiles","blue-sponge-wallpaint","blue-wall-pattern","blueSky","blueSlates","blueSlates2","blueTiles","blue_and_white_wallpaper","blue_cells_wallpaper","blue_diamants_wallpaper","blue_lines_wallpaper","blue_with_stars_wallpaper","boxTree","brass","brick-wall-with-old-stones","brown-cercles","brown-circles-floor-carpeting","brown-esparto-fibers","brown-sponge-wallpaint","brown-terrazzo-floor-tiles","brown_lines_with_white_bands_wallpaper","brown_waves_combinated_2_wallpaper","brown_waves_combinated_wallpaper","browns-and-blue-geometrics-kitchen-tiles","browns-bathroom-tiles","browns_wallpaper","butterflies_wallpaper","carpet-with-coloured-tiles","carpet-with-geometric-shapes","cercles_and_stars_wallpaper","cheetah-skin","cherry","chess-parquet","claret-cotton-velvet","classic-red-squares-fabric-for-furniture","classic-red-wallpaper","classic-roof","clay-floor","cloudy","cobblest","coloured-glass-stones","coloured-stones-stonewalls","compact-and-grey-marble-for-cook-tops","concentrated-stones-roughcast","concrete-wall-1","concrete-wall-2","concrete-wall-3","corrugated-roof","dark-blue-seamless-floor-carpeting","dark-blue-sponge-wallpaint","dark-brown-sponge-wallpaint","dark-brown_leather","dark-ceramic-tiles","dark-granite-cook-tops","dark-green-sponge-wallpaint","dark-leather","dark-wall-paper","darkBlueTile","darkBlueTiles","darkBrown","darkWood","detailed-mosaic-arab-wall","drawing_lines_wallpaper","dry_mud","dryflowers_wallpaper","encircled_grey_wallpaper","encircled_wallpaper","english-parquet-1","english-parquet-2","english-parquet-3","english-parquet-dark","esparto-floor-carpeting","false-ceiling-2","false-ceiling-3","false-ceiling","fantasy-wall-mosaic","field-of-daisies","field-of-poppies","field-with-floral-stripes","field-with-white-and-yellow-flowers","fireplace-stones","fish_in_the_sea_wallpaper","floor-carpet-grey-and-white","floor-carpeting-grey","floor-slates","floor-stones-1","floor-stones-2","floor-tiles-hexagonal","flowers_and_yellow_fabric-for-furniture","fruits-kitchen-tiles","geometric-brown-carpet","geometric-kitchen-tiles","geometric_dark_flowers_wallpaper","geometric_green_wallpaper","geometry_colors_wallpaper","giraffe-skin","glass-tiles-wall","gold_circles_wallpaper","granite","grass","grass2","grass3","grass_darker","gray-and-cyan-floor-carpeting","gray-and-green-floor-carpeting","gray-carpet","gray-medium-thick-floor-carpeting","gray-medium-thick-with-squares-floor-carpeting","gray-metal-floor","green-and-black-bathroom-tiles","green-and-bone-kitchen-tiles","green-and-yello-geometry-kitchen-tiles","green-apples-and-white-kitchen-tiles","green-apples-kitchen-tiles","green-fabric-for-furniture","green_leather","green_waves_wallpaper","green_with_leaves_wallpaper","grey-ceramic-tiles","grey-dark-parquet","grey-rough-stonewall","greyTile","grey_marble_for_cook-tops","ground-gravel","ground-pebbles-2","ground-pebbles","hairy-gray-floor-carpeting","hexagon-red-slate","hungarian_parquet","hut-wall-texture","irregular-cercles","irregular-orange-kitchen-tiles","japanese-wallpaper-pink-and-lila-flowers","japanese-wallpaper-with-cranes-and-trees","japanese-wallpaper-with-cranes","laft_05","laft_05_light","leopard-skin","letter_O_wallpaper","light-beige-parquet","light-brown-sponge-wallpaint","light-brown-tiles","light-moss-yellow","lightBlueTile","light_wood","lilac_70s_wallpaper","little-browns-kitchen-wall-tiles","little-stones-bathroom","logWall","logs-wall-2","logs-wall-3","logs-wall","marble-floor-tiles","marble-tiles","marbleWall","mexican-carpet","moon-and-stars","mosaic-patchwork","multi-grey-stones-floor-tiles","multifruit-multicolor-kitchen-tiles","multifruit-orange-kitchen-tiles","natural_colors_wallpaper","navy-blue-stripes","night-sky","oak-brown-parquet","oak","oak2","oak3","old-and-light-gray-parquet","old-and-red-bricks-wall","old-bricks-floor","old-brown-parquet","old-carpet","old-floor-tile","old-grey-parquet","old-mosaic-arab-wall","old-mosaic-wall-arab-2","old-roof-tiles","old-stones-wall","old-wooden-wall","oldWood","oldWoodenFloor","old_grey_bricks","orange-and-browns-kitchen-tiles","orange-fabric-for-furniture","orange-leather","orange-line-and-flowers-kitchen-tiles","orange-napkin-texture","orange_pattern","oranges_70s_wallpaper","oriental-carpet","overlapping-white-wood","overlapping-white-wood_brighter","paneling-for-interior","pansy-purple-velvet","pastel-blue-sponge-wallpaint","pastel-brown-sponge-wallpaint","pastel-cyan-sponge-wallpaint","pastel-gray-sponge-wallpaint","pastel-lilac-sponge-wallpaint","pastel-orange-sponge-wallpaint","pastel-yellow-sponge-wallpaint","pavement","pavement_2","paves-autobloquants-60x60cm","pavingStone","paving_stone_2","peacock-velvet","peacock_blue_velvet","pebbles","persianCarpet","pine","pink-carpet","pink_clouds_wallpaper","pink_squares_fabric-for-furniture","pink_squares_wallpaper","poplar","portuguese-wall-2","portuguese-wall","rattan-for-outdoor-furniture","rattan-furniture","rattan-red","rattan-texture-2","rattan-texture-3","rattan-texture-4","rawPine","rectangularStones","red-american-carpet","red-and-black-plaid-furniture-fabric","red-and-yellow-floor-carpeting","red-bricks-wall","red-brown-parquet","red-building-bricks","red-carpet-large-hair","red-sponge-wallpaint","red-stones-brown-background-stonewalls","red-stripes","red-tomatoes-and-white-kitchen-tiles","red-tomatoes-kitchen-tiles","redOak","redTiles","red_bricks","red_slates","red_tiles","red_with_stars_wallpaper","rough-brown-kitchen-tiles","roughcast","roundBlueSlates","rustic-brown-beige-bathroom-tiles","rusty-metal-texture","salmon-sponge-wallpaint","sandy-soil-2","sandy-soil","sauna_panel","sea-rush-woven","sea-texture","sky-dawn","smallBricks","smallRedBricks","smallWhiteBricks","soil","square-roof-slates","square_shapes","stain_glass","stain_glass_2","stained-brown-ceramic-floor-tiles","stone-bricks-stonewall","stone2Wall","stone3Wall","stoneTiles","stoneWall","stones_wall_coloured","stoneway-floor-tiles","straw-roof","striped-fabric-texture","sunset-sky","swimming-pool-ceramic","swimming-pool-top-cyan","swimming-pool-top","swimmingPool","teira-blue-velvet","terrazo-floor","terrazzo-floor-tiles","texture_knit","thatched-roof","thin-grey-ceramics-floor-tiles","tiger-skin","tile-ext-border","tiled-stones-for-bathroom","travertine-tiles","trendy-wall-paper","trunk","vertical-wood","vertical_blue_lines","vertical_lines","veryCloudy","wall-coloured-glass","wall-effect-beige-tadelakt","wall-effect-gray-tadelakt","wall-effect-green-tadelakt","wall-fabric-blue-duck","wall-fabric-blue-ink","wall-fabric-gold","wall-frosted-glass","wall-glass-geometric-tiles","wall-metal-texture","wall-portuguese-mosaic-3-green","wall-portuguese-mosaic-3","wall-striped-canvas","wall-tile-bathroom","wall-tiles-brown","wallBeigeTile","wall_texture_white","wall_with_little_stones","wallpaper-chiyogami","wallpaper-japanese-blue-flowers","wallpaper-japanese-painted","wallpaper-japanese-pansy-painted","wallpaper-japanese-pink-flowers","wallpaper-japanese-pink-geometry","wallpaper-japanese-pink-pansy-painted","wallpaper-japanese-white-and-pink-flowers","wallpaper-japanese-white-and-yellow-flowers","wallpaper-nepalese-beige-dots-over-red","wallpaper-nepalese-red-dots","wallpaper-with-flamingos","wet-mud","white-little-roughcast","white-marble","white-with-border-kitchen-tiles","white_with_stars_wallpaper","wood-paneling","wood-pine","wood","wooden-bathroom-floor","woodenFloor","words_of_world_wallpaper","yellow-and-black-plaid-furniture-fabric","yellow-lemon-and-white-kitchen-tiles","yellow-lemon-kitchen-tiles","yellow-medium-floor-carpeting","yellow-pears-and-white-kitchen-tiles","yellow-pears-kitchen-tiles","yellow_classic_wallpaper","zebra-skin","wall_texture_red","wall_texture_green","wall_texture_blue","roughcast2","wallp_fleur_de_lis_blue_multi","wallp_fleur_de_lis_green_multi","wallp_fleur_de_lis_red_multi","tommerstokker_1","tile_wall_pattern","beige_tiles_frieze","tile_deco_wall","tile_wall3","shower_tiles","wallp_tomatoes","tile_burg_shad","curtains","vertical_brown_lines","dark-carpet","yellow-carpet","yellow_and_grey_squares-fabric-for-furniture","beige-wall-with-white-stones-roughcast","old-castle-stonewall","green-sponge-wallpaint","pink_with_stars_wallpaper","feline-skin","beige-carpet-rounded","rattan-rouge","wallpaper-nepalese-beige-dots-over-blue","red-metal-floor","wall-glass-with-bubbles","chinese-paper-wall","corrugated-roof-2","painted-wallpaper-fuchsia","zebra-asphalte-clair-4x4m","zebra-asphalte-fonce-4x4m"],Kt={"3_blue_and_white_lines_wallpaper":{width:512,height:512},"3_brown_lines_wallpaper":{width:512,height:512},"3_green_and_white_lines_wallpaper":{width:512,height:512},"3_red_and_white_lines_wallpaper":{width:512,height:512},"african-wallpaper-2":{width:512,height:512},"african-wallpaper":{width:512,height:512},alu_siding_greyscale2:{width:64,height:64},"animal-skin":{width:512,height:512},"asphalte-clair-4x4m":{width:512,height:512},"asphalte-fonce-4x4m":{width:512,height:512},"balanced-blue-sponge-wallpaint":{width:512,height:512},"balanced-green-sponge-wallpaint":{width:512,height:512},"basic-white-tile":{width:512,height:512},"bathroom-tile-beige":{width:512,height:512},"bathroom_tiles-multicolour":{width:512,height:512},bathroom_tiles:{width:512,height:512},bathroom_tiles_2:{width:512,height:512},beech:{width:256,height:512},"beige-bricks-wall-bricks":{width:512,height:512},"beige-carpet-rounded":{width:512,height:512},"beige-carpet-square":{width:512,height:512},"beige-granite-cook-tops":{width:512,height:512},"beige-leather":{width:512,height:512},"beige-wall-with-white-stones-roughcast":{width:512,height:512},beigeTile:{width:256,height:256},beige_brown_tiles:{width:128,height:128},beige_fabric:{width:512,height:512},beige_fabric2:{width:512,height:512},beige_grey_squares_wallpaper:{width:512,height:512},beige_pattern:{width:512,height:512},beige_tiles:{width:100,height:100},beige_tiles_frieze:{width:128,height:640},beige_waves_wallpaper:{width:512,height:512},"big-stones-floor-tiles":{width:512,height:512},"big-sun-sky":{width:2304,height:384},birch:{width:256,height:512},"black-and-white-stones":{width:512,height:512},blackAndWhiteTiles:{width:256,height:256},bleachedWood:{width:256,height:512},"blue-and-geometric-kitchen-tiles":{width:512,height:512},"blue-and-green-plaid-furniture-fabric":{width:512,height:512},"blue-fabric":{width:512,height:512},"blue-fibres_fabric-for-furniture":{width:512,height:512},"blue-painted-wood":{width:512,height:512},"blue-rectangles-bathroom-tiles":{width:512,height:512},"blue-sponge-wallpaint":{width:512,height:512},"blue-wall-pattern":{width:512,height:512},blueSky:{width:1500,height:620},blueSlates:{width:256,height:256},blueSlates2:{width:256,height:256},blueTiles:{width:256,height:256},blue_and_white_wallpaper:{width:512,height:512},blue_cells_wallpaper:{width:512,height:512},blue_diamants_wallpaper:{width:512,height:512},blue_lines_wallpaper:{width:512,height:512},blue_with_stars_wallpaper:{width:512,height:512},boxTree:{width:256,height:256},brass:{width:512,height:512},"brick-wall-with-old-stones":{width:512,height:512},"brown-cercles":{width:512,height:512},"brown-circles-floor-carpeting":{width:512,height:512},"brown-esparto-fibers":{width:512,height:512},"brown-sponge-wallpaint":{width:512,height:512},"brown-terrazzo-floor-tiles":{width:512,height:512},brown_lines_with_white_bands_wallpaper:{width:512,height:512},brown_waves_combinated_2_wallpaper:{width:512,height:512},brown_waves_combinated_wallpaper:{width:512,height:512},"browns-and-blue-geometrics-kitchen-tiles":{width:512,height:512},"browns-bathroom-tiles":{width:512,height:512},browns_wallpaper:{width:512,height:512},butterflies_wallpaper:{width:512,height:512},"carpet-with-coloured-tiles":{width:768,height:512},"carpet-with-geometric-shapes":{width:700,height:512},cercles_and_stars_wallpaper:{width:512,height:512},"cheetah-skin":{width:512,height:512},cherry:{width:256,height:512},"chess-parquet":{width:512,height:512},"chinese-paper-wall":{width:512,height:512},"claret-cotton-velvet":{width:512,height:512},"classic-red-squares-fabric-for-furniture":{width:512,height:512},"classic-red-wallpaper":{width:512,height:512},"classic-roof":{width:512,height:512},"clay-floor":{width:512,height:512},cloudy:{width:1500,height:414},cobblest:{width:64,height:64},"coloured-glass-stones":{width:512,height:512},"coloured-stones-stonewalls":{width:512,height:512},"compact-and-grey-marble-for-cook-tops":{width:512,height:512},"concentrated-stones-roughcast":{width:512,height:512},"concrete-wall-1":{width:512,height:512},"concrete-wall-2":{width:512,height:512},"concrete-wall-3":{width:512,height:512},"corrugated-roof-2":{width:512,height:512},"corrugated-roof":{width:512,height:512},curtains:{width:64,height:64},"dark-blue-seamless-floor-carpeting":{width:512,height:512},"dark-blue-sponge-wallpaint":{width:512,height:512},"dark-brown-sponge-wallpaint":{width:512,height:512},"dark-brown_leather":{width:512,height:512},"dark-carpet":{width:512,height:328},"dark-ceramic-tiles":{width:512,height:512},"dark-granite-cook-tops":{width:512,height:512},"dark-green-sponge-wallpaint":{width:512,height:512},"dark-leather":{width:512,height:512},"dark-wall-paper":{width:512,height:512},darkBlueTile:{width:256,height:256},darkBlueTiles:{width:128,height:256},darkBrown:{width:256,height:512},darkWood:{width:512,height:256},"detailed-mosaic-arab-wall":{width:512,height:512},drawing_lines_wallpaper:{width:512,height:512},dry_mud:{width:512,height:512},dryflowers_wallpaper:{width:512,height:512},encircled_grey_wallpaper:{width:512,height:512},encircled_wallpaper:{width:512,height:512},"english-parquet-1":{width:512,height:512},"english-parquet-2":{width:512,height:512},"english-parquet-3":{width:512,height:512},"english-parquet-dark":{width:512,height:512},"esparto-floor-carpeting":{width:512,height:512},"false-ceiling-2":{width:512,height:512},"false-ceiling-3":{width:512,height:512},"false-ceiling":{width:512,height:512},"fantasy-wall-mosaic":{width:512,height:512},"feline-skin":{width:512,height:512},"field-of-daisies":{width:512,height:512},"field-of-poppies":{width:512,height:512},"field-with-floral-stripes":{width:512,height:512},"field-with-white-and-yellow-flowers":{width:512,height:512},"fireplace-stones":{width:512,height:512},fish_in_the_sea_wallpaper:{width:512,height:512},"floor-carpet-grey-and-white":{width:512,height:512},"floor-carpeting-grey":{width:512,height:512},"floor-slates":{width:512,height:512},"floor-stones-1":{width:512,height:512},"floor-stones-2":{width:512,height:512},"floor-tiles-hexagonal":{width:512,height:512},"flowers_and_yellow_fabric-for-furniture":{width:512,height:512},"fruits-kitchen-tiles":{width:512,height:512},"geometric-brown-carpet":{width:812,height:512},"geometric-kitchen-tiles":{width:512,height:512},geometric_dark_flowers_wallpaper:{width:512,height:512},geometric_green_wallpaper:{width:512,height:512},geometry_colors_wallpaper:{width:512,height:512},"giraffe-skin":{width:512,height:512},"glass-tiles-wall":{width:512,height:512},gold_circles_wallpaper:{width:512,height:512},granite:{width:256,height:256},grass:{width:512,height:512},grass2:{width:384,height:384},grass3:{width:100,height:100},grass_darker:{width:512,height:512},"gray-and-cyan-floor-carpeting":{width:512,height:512},"gray-and-green-floor-carpeting":{width:512,height:512},"gray-carpet":{width:512,height:290},"gray-medium-thick-floor-carpeting":{width:512,height:512},"gray-medium-thick-with-squares-floor-carpeting":{width:512,height:512},"gray-metal-floor":{width:512,height:512},"green-and-black-bathroom-tiles":{width:512,height:512},"green-and-bone-kitchen-tiles":{width:512,height:512},"green-and-yello-geometry-kitchen-tiles":{width:512,height:512},"green-apples-and-white-kitchen-tiles":{width:512,height:512},"green-apples-kitchen-tiles":{width:512,height:512},"green-fabric-for-furniture":{width:512,height:512},"green-sponge-wallpaint":{width:512,height:512},green_leather:{width:512,height:512},green_waves_wallpaper:{width:512,height:512},green_with_leaves_wallpaper:{width:512,height:512},"grey-ceramic-tiles":{width:512,height:512},"grey-dark-parquet":{width:512,height:512},"grey-rough-stonewall":{width:512,height:512},greyTile:{width:256,height:256},"grey_marble_for_cook-tops":{width:512,height:512},"ground-gravel":{width:512,height:512},"ground-pebbles-2":{width:512,height:512},"ground-pebbles":{width:512,height:512},"hairy-gray-floor-carpeting":{width:512,height:512},"hexagon-red-slate":{width:512,height:512},hungarian_parquet:{width:512,height:359},"hut-wall-texture":{width:512,height:512},"irregular-cercles":{width:512,height:512},"irregular-orange-kitchen-tiles":{width:512,height:512},"japanese-wallpaper-pink-and-lila-flowers":{width:512,height:512},"japanese-wallpaper-with-cranes-and-trees":{width:512,height:512},"japanese-wallpaper-with-cranes":{width:512,height:512},laft_05:{width:128,height:128},laft_05_light:{width:128,height:128},"leopard-skin":{width:512,height:512},letter_O_wallpaper:{width:512,height:512},"light-beige-parquet":{width:512,height:512},"light-brown-sponge-wallpaint":{width:512,height:512},"light-brown-tiles":{width:512,height:512},"light-moss-yellow":{width:512,height:512},lightBlueTile:{width:256,height:256},light_wood:{width:64,height:64},lilac_70s_wallpaper:{width:512,height:512},"little-browns-kitchen-wall-tiles":{width:512,height:512},"little-stones-bathroom":{width:512,height:512},logWall:{width:512,height:512},"logs-wall-2":{width:512,height:512},"logs-wall-3":{width:512,height:512},"logs-wall":{width:512,height:512},"marble-floor-tiles":{width:512,height:512},"marble-tiles":{width:512,height:512},marbleWall:{width:256,height:256},"mexican-carpet":{width:984,height:512},"moon-and-stars":{width:512,height:512},"mosaic-patchwork":{width:512,height:512},"multi-grey-stones-floor-tiles":{width:512,height:512},"multifruit-multicolor-kitchen-tiles":{width:512,height:512},"multifruit-orange-kitchen-tiles":{width:512,height:512},natural_colors_wallpaper:{width:512,height:512},"navy-blue-stripes":{width:512,height:512},"night-sky":{width:2048,height:512},"oak-brown-parquet":{width:512,height:512},oak:{width:256,height:512},oak2:{width:256,height:512},oak3:{width:256,height:512},"old-and-light-gray-parquet":{width:512,height:512},"old-and-red-bricks-wall":{width:512,height:512},"old-bricks-floor":{width:512,height:512},"old-brown-parquet":{width:512,height:512},"old-carpet":{width:870,height:512},"old-castle-stonewall":{width:512,height:512},"old-floor-tile":{width:512,height:512},"old-grey-parquet":{width:512,height:512},"old-mosaic-arab-wall":{width:512,height:512},"old-mosaic-wall-arab-2":{width:526,height:455},"old-roof-tiles":{width:512,height:512},"old-stones-wall":{width:512,height:512},"old-wooden-wall":{width:512,height:512},oldWood:{width:256,height:512},oldWoodenFloor:{width:256,height:256},old_grey_bricks:{width:512,height:512},"orange-and-browns-kitchen-tiles":{width:512,height:512},"orange-fabric-for-furniture":{width:512,height:512},"orange-leather":{width:512,height:512},"orange-line-and-flowers-kitchen-tiles":{width:512,height:512},"orange-napkin-texture":{width:512,height:512},orange_pattern:{width:512,height:512},oranges_70s_wallpaper:{width:512,height:512},"oriental-carpet":{width:913,height:512},"overlapping-white-wood":{width:512,height:512},"overlapping-white-wood_brighter":{width:512,height:512},"painted-wallpaper-fuchsia":{width:512,height:512},"paneling-for-interior":{width:512,height:512},"pansy-purple-velvet":{width:512,height:512},"pastel-blue-sponge-wallpaint":{width:512,height:512},"pastel-brown-sponge-wallpaint":{width:512,height:512},"pastel-cyan-sponge-wallpaint":{width:512,height:512},"pastel-gray-sponge-wallpaint":{width:512,height:512},"pastel-lilac-sponge-wallpaint":{width:512,height:512},"pastel-orange-sponge-wallpaint":{width:512,height:512},"pastel-yellow-sponge-wallpaint":{width:512,height:512},pavement:{width:512,height:512},pavement_2:{width:512,height:512},"paves-autobloquants-60x60cm":{width:512,height:512},pavingStone:{width:256,height:182},paving_stone_2:{width:128,height:128},"peacock-velvet":{width:512,height:512},peacock_blue_velvet:{width:512,height:512},pebbles:{width:256,height:256},persianCarpet:{width:500,height:300},pine:{width:256,height:512},"pink-carpet":{width:512,height:512},pink_clouds_wallpaper:{width:512,height:512},"pink_squares_fabric-for-furniture":{width:512,height:512},pink_squares_wallpaper:{width:512,height:512},pink_with_stars_wallpaper:{width:512,height:512},poplar:{width:256,height:512},"portuguese-wall-2":{width:512,height:512},"portuguese-wall":{width:512,height:512},"rattan-for-outdoor-furniture":{width:512,height:512},"rattan-furniture":{width:512,height:512},"rattan-red":{width:512,height:512},"rattan-rouge":{width:512,height:512},"rattan-texture-2":{width:512,height:512},"rattan-texture-3":{width:512,height:512},"rattan-texture-4":{width:512,height:512},rawPine:{width:256,height:512},rectangularStones:{width:512,height:512},"red-american-carpet":{width:683,height:512},"red-and-black-plaid-furniture-fabric":{width:512,height:512},"red-and-yellow-floor-carpeting":{width:512,height:512},"red-bricks-wall":{width:512,height:512},"red-brown-parquet":{width:512,height:512},"red-building-bricks":{width:512,height:512},"red-carpet-large-hair":{width:740,height:512},"red-metal-floor":{width:512,height:512},"red-sponge-wallpaint":{width:512,height:512},"red-stones-brown-background-stonewalls":{width:512,height:512},"red-stripes":{width:512,height:512},"red-tomatoes-and-white-kitchen-tiles":{width:512,height:512},"red-tomatoes-kitchen-tiles":{width:512,height:512},redOak:{width:256,height:512},redTiles:{width:256,height:256},red_bricks:{width:120,height:120},red_slates:{width:100,height:150},red_tiles:{width:100,height:100},red_with_stars_wallpaper:{width:512,height:512},"rough-brown-kitchen-tiles":{width:512,height:512},roughcast:{width:256,height:256},roughcast2:{width:60,height:60},roundBlueSlates:{width:256,height:256},"rustic-brown-beige-bathroom-tiles":{width:512,height:512},"rusty-metal-texture":{width:512,height:512},"salmon-sponge-wallpaint":{width:512,height:512},"sandy-soil-2":{width:512,height:512},"sandy-soil":{width:512,height:512},sauna_panel:{width:256,height:256},"sea-rush-woven":{width:512,height:512},"sea-texture":{width:512,height:512},shower_tiles:{width:64,height:256},"sky-dawn":{width:2048,height:512},smallBricks:{width:256,height:166},smallRedBricks:{width:256,height:105},smallWhiteBricks:{width:256,height:108},soil:{width:256,height:256},"square-roof-slates":{width:512,height:512},square_shapes:{width:512,height:512},stain_glass:{width:128,height:128},stain_glass_2:{width:64,height:64},"stained-brown-ceramic-floor-tiles":{width:512,height:512},"stone-bricks-stonewall":{width:512,height:512},stone2Wall:{width:256,height:158},stone3Wall:{width:256,height:162},stoneTiles:{width:256,height:172},stoneWall:{width:256,height:118},stones_wall_coloured:{width:512,height:512},"stoneway-floor-tiles":{width:512,height:512},"straw-roof":{width:512,height:512},"striped-fabric-texture":{width:512,height:512},"sunset-sky":{width:2304,height:384},"swimming-pool-ceramic":{width:512,height:512},"swimming-pool-top-cyan":{width:512,height:512},"swimming-pool-top":{width:512,height:512},swimmingPool:{width:256,height:256},"teira-blue-velvet":{width:512,height:512},"terrazo-floor":{width:512,height:512},"terrazzo-floor-tiles":{width:512,height:512},texture_knit:{width:256,height:256},"thatched-roof":{width:512,height:512},"thin-grey-ceramics-floor-tiles":{width:512,height:512},"tiger-skin":{width:512,height:512},"tile-ext-border":{width:256,height:256},tile_burg_shad:{width:150,height:150},tile_deco_wall:{width:21,height:250},tile_wall3:{width:60,height:250},tile_wall_pattern:{width:64,height:512},"tiled-stones-for-bathroom":{width:512,height:512},tommerstokker_1:{width:256,height:64},"travertine-tiles":{width:512,height:512},"trendy-wall-paper":{width:512,height:512},trunk:{width:128,height:512},"vertical-wood":{width:512,height:512},vertical_blue_lines:{width:512,height:512},vertical_brown_lines:{width:512,height:512},vertical_lines:{width:512,height:512},veryCloudy:{width:1e3,height:448},"wall-coloured-glass":{width:512,height:512},"wall-effect-beige-tadelakt":{width:512,height:512},"wall-effect-gray-tadelakt":{width:512,height:512},"wall-effect-green-tadelakt":{width:512,height:512},"wall-fabric-blue-duck":{width:512,height:512},"wall-fabric-blue-ink":{width:512,height:512},"wall-fabric-gold":{width:512,height:512},"wall-frosted-glass":{width:512,height:512},"wall-glass-geometric-tiles":{width:512,height:512},"wall-glass-with-bubbles":{width:512,height:512},"wall-metal-texture":{width:512,height:512},"wall-portuguese-mosaic-3-green":{width:512,height:512},"wall-portuguese-mosaic-3":{width:512,height:512},"wall-striped-canvas":{width:512,height:512},"wall-tile-bathroom":{width:512,height:512},"wall-tiles-brown":{width:512,height:512},wallBeigeTile:{width:163,height:256},wall_texture_blue:{width:128,height:128},wall_texture_green:{width:128,height:128},wall_texture_red:{width:128,height:128},wall_texture_white:{width:128,height:128},wall_with_little_stones:{width:512,height:512},wallp_fleur_de_lis_blue_multi:{width:240,height:240},wallp_fleur_de_lis_green_multi:{width:240,height:240},wallp_fleur_de_lis_red_multi:{width:240,height:240},wallp_tomatoes:{width:128,height:128},"wallpaper-chiyogami":{width:512,height:512},"wallpaper-japanese-blue-flowers":{width:512,height:512},"wallpaper-japanese-painted":{width:512,height:512},"wallpaper-japanese-pansy-painted":{width:512,height:512},"wallpaper-japanese-pink-flowers":{width:512,height:512},"wallpaper-japanese-pink-geometry":{width:512,height:512},"wallpaper-japanese-pink-pansy-painted":{width:512,height:512},"wallpaper-japanese-white-and-pink-flowers":{width:512,height:512},"wallpaper-japanese-white-and-yellow-flowers":{width:512,height:512},"wallpaper-nepalese-beige-dots-over-blue":{width:512,height:512},"wallpaper-nepalese-beige-dots-over-red":{width:512,height:512},"wallpaper-nepalese-red-dots":{width:512,height:512},"wallpaper-with-flamingos":{width:512,height:512},"wet-mud":{width:512,height:512},"white-little-roughcast":{width:512,height:512},"white-marble":{width:512,height:512},"white-with-border-kitchen-tiles":{width:512,height:512},white_with_stars_wallpaper:{width:512,height:512},"wood-paneling":{width:512,height:512},"wood-pine":{width:256,height:256},wood:{width:256,height:512},"wooden-bathroom-floor":{width:512,height:512},woodenFloor:{width:256,height:256},words_of_world_wallpaper:{width:512,height:512},"yellow-and-black-plaid-furniture-fabric":{width:512,height:512},"yellow-carpet":{width:512,height:328},"yellow-lemon-and-white-kitchen-tiles":{width:512,height:512},"yellow-lemon-kitchen-tiles":{width:512,height:512},"yellow-medium-floor-carpeting":{width:512,height:512},"yellow-pears-and-white-kitchen-tiles":{width:512,height:512},"yellow-pears-kitchen-tiles":{width:512,height:512},"yellow_and_grey_squares-fabric-for-furniture":{width:512,height:512},yellow_classic_wallpaper:{width:512,height:512},"zebra-asphalte-clair-4x4m":{width:512,height:512},"zebra-asphalte-fonce-4x4m":{width:512,height:512},"zebra-skin":{width:512,height:512}},Yt=["doorFrame","patioSideDoor","window_shop","window_stain_glass","glassblock","fixedWindow85x123","serviceHatch","fivePanesWindowWithWallPart","rectangularFivePanesWindow","pictureWindow","window2","window_2x3_frame_sill","fixed_window_2x2","newWindowDk","windowFrostedGlass","window_double_3x3","window_urban_neoclassic","DianaWindow"],Xt={door:.2,puerta:.2,craftsmanDoorClosed:.2,frontDoor:.15,double_door_2:.1,double_door:.1,double_plain_door_with_little_part:.1,"exterior-door-05":.2,"exterior-door-07":.2,frontDoor2:.2,glass_door:.19,glassDoor2:.06,double_door_with_little_part:.1,frontDoorDark:0,patioGlassDoorUnit:.8,door1:.18,patioDoor:.1,fancyFrontDoor:0,door_glass:.15,"exterior-door-01":.15,"exterior-door-02":.15,"exterior-door-03":.15,patioDoorOpened:.8,glass_door_framless:0,"screen-door":0,doorGlassPanels:0,frenchWindow2:.1,frenchWindow85x200:.1,window85x123:.1,window85x163:.1,smallWindow2:.15,window_deep:.23,simpleShutter:0,twoPartsShutter:0,"turn-window":.05,window_shutter:0,"window-shutter":0,door_window_thick:.1},Zt={revdoor:!0},Jt={emergencyGlassDoubleDoor:{part1:.1,part2:.1},"garage-door2":{part1:.1,part2:.1},glassDoorsOpened:{part1:.39,part2:.39},doubleOutwardOpeningWindow:{part1:.2,part2:.2},doubleWindow126x123:{part1:.1,part2:.1},doubleWindow126x163:{part1:.1,part2:.1},doubleWindow2:{part1:.1,part2:.1},window_double_2x3_frame_sill:{part1:.1,part2:.1},doubleFrenchWindow2:{part1:.1,part2:.1},doubleFrenchWindow126x200:{part1:.1,part2:.1},window_2x4:{part1:.1,part2:.1},window_2x6:{part1:.1,part2:.1},window_4x5:{part1:.4,part2:.4},window_3x1:{part1:.7,part2:.1},window_4x1:{part1:.5,part2:.5},window_2x1_medium_with_large_pane:{part1:.1,part2:.1},door_window_thick_double_2x4:{part1:.1,part2:.1},door_window_thick_double:{part1:.1,part2:.1},window_double_frame_sill:{part1:.1,part2:.1},window_2x3_arched:{part1:.1,part2:.1},window_2x3_regular:{part1:.1,part2:.1},window_2x3:{part1:.1,part2:.1},window_2x4_arched:{part1:.1,part2:.1},window_4x3_arched:{part1:.4,part2:.4},window_4x3:{part1:.4,part2:.4}},Qt={slidingDoors:[{destinationPointFactor:.05,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1_door"],translateAndScale:!0,defaultModelState:"closed"}],japanesedoor:[{destinationPointFactor:.7,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_2_frame"],translateOnly:!0}],elevator:[{destinationPointFactor:.4,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["right-door_Cube.001"],translateAndScale:!0,defaultModelState:"open"}],"elevator-door":[{destinationPointFactor:.4,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:-1,doorPartChildName:["right-door_Cube.001"],translateAndScale:!0,defaultModelState:"closed"}],frenchDoors:[{destinationPointFactor:1,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["handle2"],translateOnly:!0}],sliderPocketDoor:[{destinationPointFactor:.2,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["4_4_1_1"],translateAndScale:!0,defaultModelState:"open"}],"garage-door":[{destinationPointFactor:.4,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cube"],translateAndScale:!0,defaultModelState:"closed"}],garageDoor:[{destinationPointFactor:.25,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cylinder_9","Cylinder_9_1","Cylinder_9_2"],translateAndScale:!0,defaultModelState:"closed"}],garageDoor2:[{destinationPointFactor:.1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["PolyMesh_1","sweethome3d_window_pane"],translateAndScale:!0,defaultModelState:"closed"}],sixDoorFrenchStyle:[{destinationPointFactor:.7,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:-1,doorPartChildName:["Cube_5"],translateOnly:!0,defaultModelState:"open"},{destinationPointFactor:1.3,direction:"horizontal",horizontalOpeningDirection:"righttoleft",originPointDirectionCalculationSign:1,doorPartChildName:["Cube_4"],translateOnly:!0,defaultModelState:"open"}],sliderWindow126x200:[{destinationPointFactor:.15,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1"],translateOnly:!0,defaultModelState:"closed"}],window_2x1_with_sliders:[{destinationPointFactor:1,direction:"horizontal",horizontalOpeningDirection:"lefttoright",originPointDirectionCalculationSign:-1,doorPartChildName:["sweethome3d_opening_on_rail_1_frame"],translateOnly:!0,defaultModelState:"closed"}],"window-08":[{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1_window_gloss_white"],translateOnly:!0,defaultModelState:"closed"}],traditionalShutter:[{destinationPointFactor:.15,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cube_2","Cube_2_1","Cube_2_2","Cube_2_3","Cube_2_4","Cube_2_5","Cube_2_6","Cube_2_7","Cube_2_8","Cube_2_9","Cube_2_10","Cube_2_11","Cube_2_12","Cube_2_13","Cube_2_14","Cube_2_15","Cube_2_16","Cube_2_17","Cube_2_18","Cube_2_19","Cube_2_20","Cube_2_51","Cube_2_52","Cube_2_53"],translateOnly:!0,defaultModelState:"closed"},{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cube_2_21","Cube_2_22","Cube_2_23","Cube_2_24","Cube_2_25","Cube_2_26","Cube_2_27","Cube_2_28","Cube_2_29","Cube_2_30","Cube_2_31","Cube_2_32","Cube_2_33","Cube_2_34","Cube_2_35","Cube_2_36","Cube_2_37","Cube_2_38","Cube_2_39","Cube_2_40","Cube_2_41","Cube_2_42","Cube_2_43","Cube_2_44","Cube_2_45","Cube_2_46","Cube_2_47","Cube_2_48","Cube_2_49","Cube_2_50"],translateOnly:!0,defaultModelState:"closed"}],fancyWindow:[{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["Cube_4_2"],translateOnly:!0,defaultModelState:"closed"}],"window-01":[{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1_window_bottom_gloss_white"],translateAndScale:!0,defaultModelState:"closed"}],"window-08-02":[{destinationPointFactor:1,direction:"vertical",verticalOpeningDirection:"bottomtotop",originPointDirectionCalculationSign:1,doorPartChildName:["sweethome3d_opening_on_rail_1_window_bottom_gloss_white"],translateAndScale:!0,defaultModelState:"closed"}]},$t=[{label:"Edit",infoText:"Allows you to select objects and customize Home Assistant entity bindings and parameters.",title:"Enter edit mode",value:"edit"},{label:"Control",infoText:"Enables you to select specific Home Assistant bound objects to change their state. For other objects, it's view-only.",title:"Enter edit mode",value:"control"}],ei=[{field:"open_state",label:"Open:",keepTextWidth:!0,longText:"Closed:",validate:e=>q.isEmpty(e)},{field:"closed_state",label:"Closed:",validate:e=>q.isEmpty(e)}],ti=[{field:"switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>q.isEmpty(e)},{field:"switched_off_state",label:"Switched off:",validate:e=>q.isEmpty(e)},{field:"power_sync",label:"Sync power",type:"checkbox",defaultValue:!1},{field:"power",label:"Luminous Power(lm)",min:0,max:500,step:1,placeholder:"Luminous power of light in lumens",validate:e=>q.isEmpty(e)||q.isNumber(e)},{field:"color_sync",label:"Sync color",type:"checkbox",defaultValue:!1},{field:"color",label:"Color",type:"color",validate:e=>q.isEmpty(e)||q.isHexColor(e)},{field:"variant",label:"Light variant",validate:e=>q.isEmpty(e),options:[{name:"Omnidirectional",value:"point"},{name:"Spot",value:"spot"}],selectInput:!0},{field:"spot_angle",label:"Spot light angle",placeholder:"Spot light angle",min:1,max:90,step:1,validate:e=>q.isEmpty(e)||q.isNumber(e)},{field:"spot_distance",label:"Spot light distance",placeholder:"Spot light distance",min:1,step:1,validate:e=>q.isEmpty(e)||q.isNumber(e),max:20}],ii=[{field:"percentage_sync",label:"Percentage sync",type:"checkbox",defaultValue:!1},{field:"percentage",label:"Fan percentage",min:1,max:100,step:1,validate:e=>q.isEmpty(e)||q.isNumber(e)},{field:"direction_sync",label:"Direction sync",type:"checkbox",defaultValue:!1},{field:"direction",label:"Fan direction",validate:e=>q.isEmpty(e),selectInput:!0,options:[{name:"Forward",value:"forward"},{name:"Reverse",value:"reverse"}]},{field:"switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>q.isEmpty(e)},{field:"switched_off_state",label:"Switched off:",validate:e=>q.isEmpty(e)}],oi=[{field:"closing_direction",label:"Direction",validate:e=>q.isEmpty(e),selectInput:!0,options:[{name:"Top",value:"top"},{name:"Left",value:"left"},{name:"Right",value:"right"}]},{field:"open_offset",label:"Open",validate:e=>q.isEmpty(e)||q.isNumber(e),keepTextWidth:!0,longText:"Bottom (cm):"},{field:"closed_offset",label:"Closed",keepTextWidth:!0,longText:"Bottom (cm):",validate:e=>q.isEmpty(e)||q.isNumber(e)}],si=[{field:"detected_state",label:"Detected:",keepTextWidth:!0,longText:"Not detected:",validate:e=>q.isEmpty(e)},{field:"undetected_state",label:"Not detected:",validate:e=>q.isEmpty(e)},{field:"detected_opacity",label:"Detected opacity",min:0,max:100,step:1,validate:e=>q.isEmpty(e)||q.isNumber(e)},{field:"undetected_opacity",label:"Undetected opacity",min:0,max:100,step:1,validate:e=>q.isEmpty(e)||q.isNumber(e)}],ni=[{field:"hvac_switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>q.isEmpty(e)},{field:"hvac_switched_off_state",label:"Switched off:",validate:e=>q.isEmpty(e)}],ai=[{field:"christmas_light_switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>q.isEmpty(e)},{field:"christmas_light_switched_off_state",label:"Switched off:",validate:e=>q.isEmpty(e)}],ri=[{field:"screen_switched_on_state",label:"Switched on:",keepTextWidth:!0,longText:"Switched off:",validate:e=>q.isEmpty(e)},{field:"screen_switched_off_state",label:"Switched off:",validate:e=>q.isEmpty(e)},{field:"screen_on_color",label:"On color:",longText:"Off color:",type:"color",validate:e=>q.isEmpty(e)||q.isHexColor(e)},{field:"screen_off_color",label:"Off color:",isLongText:!0,type:"color",validate:e=>q.isEmpty(e)||q.isHexColor(e)},{field:"screen_is_light",label:"Screen Light",type:"checkbox",infoText:(0,l.jsxs)("span",{children:["Check this box to enable light behavior for the screen. When on, the specified"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"on color"})," will be used for illumination, and"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"no light"})," will be emitted when off."]}),defaultValue:!1},{field:"screen_3d_glow_effect",label:"3D Glow",type:"checkbox",infoText:(0,l.jsxs)("span",{children:["Check this box to enable enhanced light simulation. When on, the glow will include"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"3D depth"})," and"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"realistic dispersion"})," for a natural effect."]}),defaultValue:!1},{field:"screen_3d_glow_factor",label:"Glow Factor:",keepTextWidth:!0,longText:"Spread Factor:",min:.01,max:1,step:.01,placeholder:"Glow factor",validate:e=>q.isEmpty(e)||q.isNumber(e)},{field:"screen_3d_glow_spread",label:"Spread Factor:",min:1,max:100,step:.01,placeholder:"Spread factor",validate:e=>q.isEmpty(e)||q.isNumber(e)}],li=e=>[{field:"".concat(e,"_coloring_type"),label:"Coloring",type:"radio",formChoices:!0,choices:[{name:"Fixed",value:"fixed",form:[{label:"Color:",field:"".concat(e,"_fixed_color"),type:"color",validate:e=>q.isEmpty(e)||q.isHexColor(e)}]},{name:"Range",value:"range",form:[{label:"Min value:",field:"".concat(e,"_range_min_value"),validate:e=>q.isEmpty(e)||q.isNumber(e)},{label:"Min color:",field:"".concat(e,"_range_min_color"),validate:e=>q.isEmpty(e)||q.isHexColor(e)},{label:"Max value:",field:"".concat(e,"_range_max_value"),validate:e=>q.isEmpty(e)||q.isNumber(e)},{label:"Max color:",field:"".concat(e,"_range_max_color"),validate:e=>q.isEmpty(e)||q.isHexColor(e)},{label:"Intermediate color",field:"".concat(e,"_range_intermediate_colors"),value:[]}]}]},{field:"".concat(e,"_opacity"),label:"Opacity:",validate:e=>q.isNumber(e),placeholder:"Color opacity",min:0,max:1,step:.01,isNumberInput:!0,keepTextWidth:!0,longText:"Font size:"}],hi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{counter:e,form:[{label:"Value:",field:"range_intermediate_color_value_".concat(e),keepTextWidth:!0,longText:"Max value:",validate:e=>q.isEmpty(e)||q.isNumber(e),value:t},{label:"Color:",field:"range_intermediate_color_color_".concat(e),keepTextWidth:!0,longText:"Max color:",validate:e=>q.isEmpty(e)||q.isHexColor(e),value:i}]}},ci=[{field:"sensor_type",label:"Sensor type",type:"radio",choices:[{name:"Number",value:"number"},{name:"Text",value:"text"}]},{field:"background",label:"Background",type:"checkbox",infoText:(0,l.jsxs)("span",{children:["Select this option to visually represent sensor values by the background color of the room where the sensor is located ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"if one exists"})]}),explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},form:[...li("background")]},{field:"text",label:"Text",type:"checkbox",infoText:(0,l.jsx)("span",{children:"Select this option to visually represent sensor values by text colors"}),explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},form:[...li("text"),{field:"text_font_size",label:"Font size:",validate:e=>q.isNumber(e),min:1,max:100,step:1,isNumberInput:!0}]}],di=[{field:"color",label:"Color:",isColorInput:!0,validate:e=>q.isEmpty(e)||q.isHexColor(e)},{field:"opacity",label:"Opacity:",isNumberInput:!0,validate:e=>q.isNumber(e),placeholder:"Color opacity",min:0,max:1,step:.01,keepTextWidth:!0,longText:"Font size:"},{field:"font_size",label:"Font size:",validate:e=>q.isNumber(e),min:1,max:100,step:1,isNumberInput:!0}],pi=[{label:"Min value:",field:"critical_min_value",validate:e=>q.isEmpty(e)||q.isNumber(e),defaultValue:10},{label:"Min color:",field:"critical_min_color",validate:e=>q.isEmpty(e)||q.isHexColor(e),defaultValue:"#0000ff"},{label:"Max value:",field:"critical_max_value",validate:e=>q.isEmpty(e)||q.isNumber(e),defaultValue:30},{label:"Max color:",field:"critical_max_color",validate:e=>q.isEmpty(e)||q.isHexColor(e),defaultValue:"#ff0000"},{field:"intermediate_colors",defaultValue:[]}],mi={field:"obj_item_class",label:"Class",validate:e=>q.isEmpty(e),selectInput:!0,options:[{name:"Free",value:1,infoText:(0,l.jsx)("span",{children:"Items can be placed anywhere without any restrictions"})},{name:"Floor",value:2,infoText:(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"Standing"})," items placed on the floor that occupy"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"vertical"})," space (e.g. wardrobe, desk)"]})},{name:"On floor",value:5,infoText:(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"Flat"})," items placed directly on the floor,"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"covering"})," surface area without standing (e.g carpet)"]})},{name:"In wall",value:4,infoText:(0,l.jsxs)("span",{children:["Items are placed ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"inside"})," the wall and"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"do not need"})," to touch the floor (e.g. windows)"]})},{name:"In wall floor",value:3,infoText:(0,l.jsxs)("span",{children:["Items are placed ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"inside"})," the wall and"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"must also"})," touch the floor (e.g. doors)"]})},{name:"On wall",value:7,infoText:(0,l.jsxs)("span",{children:["Items are placed ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"on"})," the wall and"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"do not need"})," to touch the floor (e.g. painting, mirror)"]})},{name:"On wall floor",value:6,infoText:(0,l.jsxs)("span",{children:["Items are placed ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"on"})," the wall and"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"must also"})," touch the floor (e.g. bookcase, cabinets)"]})}]};var ui=i(1317);const gi=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"block",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];0!==t?requestAnimationFrame((()=>{e.style.display=o,s?(e=e.firstChild).style.transitionDuration="".concat(t,"ms"):e.style.transitionDuration="".concat(t,"ms"),i&&e.addEventListener("transitionend",i,{once:!0}),0!==t?requestAnimationFrame((()=>{ui.log("Callback"),s?e.classList.add("indoor-modal-fade-in"):e.classList.add("fade-in")})):i&&i()})):e.style.display=o},fi=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];0!==t?requestAnimationFrame((()=>{let n;o?(n=e.firstChild,n.style.transitionDuration="".concat(t,"ms")):(n=e,n.style.transitionDuration="".concat(t,"ms"));const a=t=>{t.target===n&&(s||(e.style.display="none"),i&&i(),n.removeEventListener("transitionend",a))};n.addEventListener("transitionend",a),requestAnimationFrame((()=>{o?n.classList.remove("indoor-modal-fade-in"):n.classList.remove("fade-in")}))})):e.style.display="none"},bi=e=>{let t=[],i=[];for(let o=0;o<e.coords.length;o++)t.push(e.coords[o].x),i.push(e.coords[o].y);return t.sort(((e,t)=>e-t)),i.sort(((e,t)=>e-t)),{minX:t[0],maxX:t[t.length-1],minY:i[0],maxY:i[i.length-1]}},wi=(e,t)=>{t||(t=e),t.maxX=T(e.maxX,0),t.minX=T(e.minX,0),t.minY=T(e.minY,0),t.maxY=T(e.maxY,0),t.width=t.maxX-t.minX,t.height=t.maxY-t.minY},Ci=e=>e.length>0?so(e.flatMap((e=>(e=>{let t=[{x:-e.size/2,y:-e.thick/2},{x:e.size/2,y:-e.thick/2},{x:e.size/2,y:e.thick/2},{x:-e.size/2,y:e.thick/2}];oo(t,{x:0,y:0},R(e.angle));for(let i=0;i<t.length;i++)t[i].x+=e.x,t[i].y+=e.y;return t})(e)))):null,xi=e=>{let t=e.filter((e=>!Mi(e.start,e.end)));if(0===t.length)return null;{let e,i,o,s,n;if(1===t.length)n=bi(t[0]),e=n.minX,i=n.maxX,o=n.minY,s=n.maxY;else for(let a=0;a<t.length;a++)n=bi(t[a]),0===a?(e=n.minX,i=n.maxX,o=n.minY,s=n.maxY):(e=n.minX<e?n.minX:e,i=n.maxX>i?n.maxX:i,o=n.minY<o?n.minY:o,s=n.maxY>s?n.maxY:s);return{minX:e,minY:o,maxX:i,maxY:s}}},yi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i={minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0};e.forEach((e=>{const o=e.x*t,s=e.y*t;o>i.maxX&&(i.maxX=o),o<i.minX&&(i.minX=o),s>i.maxY&&(i.maxY=s),s<i.minY&&(i.minY=s)}));for(let o in i)i[o]=T(i[o],0);return i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i},Si=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e?{x:(e.minX+(e.maxX-e.minX)/2)*t,y:(e.minY+(e.maxY-e.minY)/2)*t}:null},_i=(e,t)=>[{x:e.minX*t,y:e.minY*t},{x:e.maxX*t,y:e.minY*t},{x:e.maxX*t,y:e.maxY*t},{x:e.minX*t,y:e.maxY*t}],Di=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return"v"===t.A?0===Number((e.x-t.B).toFixed(i)):"h"===t.A?0===Number((e.y-t.B).toFixed(i)):0===Number((e.y-t.A*e.x-t.B).toFixed(i))},vi=function(e,t,i,o,s){let n=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6?arguments[6]:void 0;const r=T(t,e),l=T(i,e),h=T(o.minX,e),c=T(o.maxX,e),d=T(o.minY,e),p=T(o.maxY,e),m=T(s.minX,e),u=T(s.maxX,e),g=T(s.minY,e),f=T(s.maxY,e);return n?r>=h&&r>=m&&r<=c&&r<=u&&l>=d&&l>=g&&l<=p&&l<=f:n?void 0:"h"===a?r>h&&r>m&&r<c&&r<u&&l>=d&&l>=g&&l<=p&&l<=f:"v"===a?r>=h&&r>=m&&r<=c&&r<=u&&l>d&&l>g&&l<p&&l<f:r>h&&r>m&&r<c&&r<u&&l>d&&l>g&&l<p&&l<f},Ti=(e,t)=>{let i={minX:null,maxX:null,minY:null,maxY:null};return e.y>t.y?(i.maxY=e.y,i.minY=t.y):(i.maxY=t.y,i.minY=e.y),e.x>t.x?(i.maxX=e.x,i.minX=t.x):(i.maxX=t.x,i.minX=e.x),i},ji=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},Oi=(e,t)=>{let i=["svg","g"];for(let o=0;o<e.children.length;o++){let s=e.children[o];if(-1!==i.indexOf(s.tagName)){Oi(s,t.children[o]);continue}let n=t.children[o].currentStyle||window.getComputedStyle(t.children[o]);if("undefined"!==n&&null!=n)for(let e=0;e<n.length;e++)s.style.setProperty(n[e],n.getPropertyValue(n[e]))}},Ii=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&ui.log(i);let o=!0;for(let s in e)if(e[s]!==t[s]){o=!1;break}return o},Pi=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];o&&ui.log(o);let s,n,a=i.x,r=i.y,l=e.A,h=e.B;if("v"===l)s={x:a,y:r-t/2},n={x:a,y:r+t/2};else if("h"===l)s={x:a-t/2,y:r},n={x:a+t/2,y:r};else{let e=1+l*l,i=-2*a+2*l*h+-2*r*l,o=i*i-4*e*(a*a+h*h-2*r*h+r*r-t*t/4),c=(-i-Math.sqrt(o))/(2*e),d=(-i+Math.sqrt(o))/(2*e);s={x:c,y:l*c+h},n={x:d,y:l*d+h}}return[s,n]},ki=e=>{let t=e[0].minX,i=e[0].maxX,o=e[0].minY,s=e[0].maxY;for(let n=1;n<e.length;n++)e[n].maxY>s&&(s=e[n].maxY),e[n].minY<o&&(o=e[n].minY),e[n].maxX>i&&(i=e[n].maxX),e[n].minX<t&&(t=e[n].minX);return[{x:t+(i-t)/2,y:o+(s-o)/2},{minX:t,maxX:i,minY:o,maxY:s}]},Fi=()=>document.querySelector(".rightBox.active"),Mi=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return 0===Number((e.x-t.x).toFixed(i))&&0===Number((e.y-t.y).toFixed(i))},Ai=e=>{let t,i,o=0;for(let s=0;s<e.length-1;s++)t=s,i=s+1,s===e.length-2&&(i=0),ui.log(t+" -> "+i),o+=(e[i].x-e[t].x)*(e[i].y+e[t].y);return o<0},Ri=function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];let o=180*Math.atan2(t,e)/Math.PI+90;return e<0&&t<0&&(o+=360),i&&(o=Li(o)),o},Li=e=>e>180?e-360:e,Bi=(e,t)=>Math.log2(2*Math.cos(e*Math.PI/180)*Math.PI*6378137/(512*t)),Wi=function(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const n=J()([t,e]),a=(0,X.Z)(n,i/1e3,Li(90+s)),r=(0,X.Z)(a,o/1e3,Li(180+s)),l=(0,X.Z)(n,o/1e3,Li(180+s));return[[t,e],a.geometry.coordinates,r.geometry.coordinates,l.geometry.coordinates]},Vi=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,s=0,n=2;i>90&&i<=180?(s=3,n=1):i>180&&i<=270?(s=2,n=0):i>270&&i<=359&&(s=1,n=3),e.fitBounds([t[n],t[s]],{padding:o})},Ni=(e,t)=>{let i=e.x,o=e.y,s=!1;for(let n=0,a=t.length-1;n<t.length;a=n++){let e=t[n].x,r=t[n].y,l=t[a].x,h=t[a].y;r>o!==h>o&&i<(l-e)*(o-r)/(h-r)+e&&(s=!s)}return s},Ei=(e,t)=>{if(Ni(e,t))return!0;{let i=!1;for(let o=0;o<t.length-1;o++)if(e.x<=Math.max(t[o].x,t[o+1].x)&&e.x>=Math.min(t[o].x,t[o+1].x)&&e.y<=Math.max(t[o].y,t[o+1].y)&&e.y>=Math.min(t[o].y,t[o+1].y)&&Di(e,qi(t[o].x,t[o].y,t[o+1].x,t[o+1].y,0),0)){i=!0;break}return i}},Hi=function(e,t){let i=!1;const o=_i(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1);for(let s=0;s<e.length;s++)if(!Ei(e[s],o)){i=!0;break}return!i},zi=function(e,t){let i,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"array";if(e.A===t.A&&(i=!1,o=!1),"v"===e.A&&"h"===t.A&&(i=[e.B,t.B],o={x:e.B,y:t.B}),"h"===e.A&&"v"===t.A&&(i=[t.B,e.B],o={x:t.B,y:e.B}),"h"===e.A&&"v"!==t.A&&"h"!==t.A&&(i=[(e.B-t.B)/t.A,e.B],o={x:(e.B-t.B)/t.A,y:e.B}),"v"===e.A&&"v"!==t.A&&"h"!==t.A&&(i=[e.B,t.A*e.B+t.B],o={x:e.B,y:t.A*e.B+t.B}),"h"===t.A&&"v"!==e.A&&"h"!==e.A&&(i=[(t.B-e.B)/e.A,t.B],o={x:(t.B-e.B)/e.A,y:t.B}),"v"===t.A&&"v"!==e.A&&"h"!==e.A&&(i=[t.B,e.A*t.B+e.B],o={x:t.B,y:e.A*t.B+e.B}),"h"!==e.A&&"v"!==e.A&&"v"!==t.A&&"h"!==t.A){let s=(t.B-e.B)/(e.A-t.A),n=e.A*s+e.B;i=[s,n],o={x:s,y:n}}return"array"===s?i:o},Gi=function(e,t){let i=[],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?"coordsInsideWithOrphans":"coordsInside";for(let s=0;s<t.length;s++){Ni(e,t[s][o])&&i.push(s)}if(i.length>0){let e,o=t[i[0]].realRoomArea;for(let s=0;s<i.length;s++)t[i[s]].realRoomArea<=o&&(o=t[i[s]].realRoomArea,e=t[i[s]]);return e}return!1},Ui=function(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{wallNode1:e[t],wallNode2:e[i],wallEquation:o&&qi(e[t].x,e[t].y,e[i].x,e[i].y)}},qi=function(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:12;return 0===Number((i-e).toFixed(s))?{A:"v",B:e}:0===Number((o-t).toFixed(s))?{A:"h",B:t}:{A:(o-t)/(i-e),B:o-i*((o-t)/(i-e))}},Ki=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),Yi=(e,t)=>{let i,o,s;"v"===t.A?(i=1,o=0,s=-t.B):"h"===t.A?(i=0,o=1,s=-t.B):(i=t.A,o=-1,s=t.B);const n=e.x,a=e.y,r=(o*(o*n-i*a)-i*s)/(i**2+o**2),l=(i*(i*a-o*n)-o*s)/(i**2+o**2);return{distance:Ki({x:n,y:a},{x:r,y:l}),projectedPoint:{x:r,y:l}}},Xi=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2)),Zi=e=>{for(let t=0;t<e.length;t++)if(!e[t])return!1;return!0},Ji=e=>e.area>0?e.area:Math.sign(e.realArea)>0&&Math.sign(e.outsideArea)>0?Math.min(e.realArea,e.outsideArea):Math.sign(e.realArea)>0?e.realArea:Math.sign(e.outsideArea)>0?e.outsideArea:null,Qi=function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return("metric"!==t||arguments.length>7&&void 0!==arguments[7]&&arguments[7])&&(e=M(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"meter",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"feet")),e=T(e,i),o&&(s&&(e+=" "),e+="metric"===t?"m":"ft"),e},$i=function(e,t){return("metric"!==t||arguments.length>4&&void 0!==arguments[4]&&arguments[4])&&(e=M(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"feet",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"meter")),e},eo=function(e,t){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return("metric"!==t||arguments.length>7&&void 0!==arguments[7]&&arguments[7])&&(e=M(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"square meter",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"square foot")),e=T(e,i),o&&(s&&(e+=" "),e+="metric"===t?"m\xb2":"ft\xb2"),e},to=(e,t,i)=>{const{arrowHalfLength:o}=io(i),s=-o,n=o,a=.5*(n+s),r=Math.atan2(0,n-s)-Math.PI/2,l=bo(i.type)?0:"start"===e?15:-15,h=a+l*Math.cos(r),c=0+l*Math.sin(r),d=new DOMMatrix;d.translateSelf(i.x,i.y),d.rotateSelf(i.angle+90);const p=new DOMPoint(h,c).matrixTransform(d),{translateX:m,translateY:u}=io(i,t),g=new DOMMatrix;g.translateSelf(m,u),g.rotateSelf(i.angle+90);return{curvePoint1X:s,curvePoint1Y:0,curvePoint2X:n,curvePoint2Y:0,controlPointX:h,controlPointY:c,transformedControlPointOnWallCoordinates:p,transformedArrowControlPointCoordinates:new DOMPoint(h,c).matrixTransform(g)}},io=(e,t)=>{let i={arrowHalfLength:0,translateX:0,translateY:0};if(i.arrowHalfLength=e.thick/2+5,t){const o=e.angle*(Math.PI/180),s="up"===t?0:Math.PI;i.translateX=e.bbox.origin.x+i.arrowHalfLength*Math.sin(o+s),i.translateY=e.bbox.origin.y-i.arrowHalfLength*Math.cos(o+s)}return i},oo=(e,t,i)=>{for(let o=0;o<e.length;o++){const s=e[o].x-t.x,n=e[o].y-t.y;e[o].x=s*Math.cos(i)-n*Math.sin(i),e[o].y=s*Math.sin(i)+n*Math.cos(i),e[o].x+=t.x,e[o].y+=t.y}},so=e=>{let t=1/0,i=-1/0,o=1/0,s=-1/0;for(let n=0;n<e.length;n++)e[n].x<t&&(t=e[n].x),e[n].x>i&&(i=e[n].x),e[n].y<o&&(o=e[n].y),e[n].y>s&&(s=e[n].y);return{minX:t,maxX:i,minY:o,maxY:s,width:i-t,height:s-o}},no=e=>({...e,objData:e.objData.map((e=>{let{bbox:t,realBbox:i,size:o,thick:s,height:n,width:a,...r}=e;return r}))}),ao=e=>{let t=e.parent;for(;t;){if(t.isScene)return t;t=t.parent}return null},ro=(e,t)=>{let i=[],o=[];for(let s=0;s<e.coords.length;s++)Di(e.coords[s],e.equations.up,t)?i.push(e.coords[s]):o.push(e.coords[s]);return{interiorLineCoords:i,exteriorLineCoords:o}},lo=(e,t)=>"<div ".concat(t?'class="'.concat(t,'"'):"",'>\n<div>\n  <span style="font-weight: bold;">Floor number: </span>\n  <span>').concat(e.floorNumber,"</span>\n</div>\n").concat(e.floorNote?'<div>\n        <span>\n          <span style="font-weight: bold;">Floor note: </span>\n          <span>'.concat(e.floorNote,"</span>\n        </span>\n      </div>"):"","\n</div>"),ho=e=>e.obj&&90===e.obj.params.onWallOffsetAngle||90===e.params.onWallOffsetAngle?"thick":"size",co=(e,t)=>{("onWall"===e.family||e.obj&&"onWall"===e.obj.family)&&(e.obj?e.angle+=e.obj.params.onWallOffsetAngle:e.angle+=e.params.onWallOffsetAngle,e.additionalParams.onWallAngle=t.angle,e.additionalParams.onWallThick=t.thick)},po=(e,t,i,o)=>{const s=R(o-90);return{x:e+i*Math.cos(s),y:t+i*Math.sin(s)}},mo=(e,t,i,o)=>{const s=-o/2,n=o/2,a=po(e,t,i,s),r=po(e,t,i,n),l=n-s<=180?"0":"1";return["M",e,t,"L",a.x,a.y,"A",i,i,0,l,1,r.x,r.y,"Z"].join(" ")},uo=(e,t,i,o)=>({rotationX:{previousAngleDeg:e,newAngleDeg:t},rotationY:{previousAngleDeg:i,newAngleDeg:o}}),go=(e,t,i)=>{const o=1===e.angleSign?-1:1;return{offsetX:o*t*Math.sin(i),offsetY:-o*t*Math.cos(i)}},fo=e=>Object.hasOwn(Xt,e),bo=e=>Jt[e],wo=e=>fo(e)||bo(e);var Co=i(1317);const xo=e=>{if(e.isMesh){if(e.geometry.dispose(),e.material.isMaterial)yo(e.material);else for(const t of e.material)yo(t);e=null}},yo=e=>{e.dispose();for(const t of Object.keys(e)){const i=e[t];i&&"object"===typeof i&&"minFilter"in i&&i.dispose()}},So=(e,t)=>{Co.log("disposeScene"),e&&(e.traverse((e=>xo(e))),e=null),t&&(t.dispose(),t=null)},_o=(e,t)=>{e.applyQuaternion(t.quaternion)},Do=e=>[new te.Pa4(e.min.x,e.min.y,e.min.z),new te.Pa4(e.max.x,e.min.y,e.min.z),new te.Pa4(e.min.x,e.max.y,e.min.z),new te.Pa4(e.min.x,e.min.y,e.max.z),new te.Pa4(e.max.x,e.max.y,e.min.z),new te.Pa4(e.max.x,e.min.y,e.max.z),new te.Pa4(e.min.x,e.max.y,e.max.z),new te.Pa4(e.max.x,e.max.y,e.max.z)],vo=(e,t)=>2*Math.atan(t*Math.tan(e/2)),To=e=>{const t=new te.Pa4;e.getWorldDirection(t);const i=new te.Pa4(t.x,0,t.z).normalize();return Ri(i.x,i.z,!1)},jo=(e,t)=>{const i=e.clone();return t.clone().clone().sub(i).normalize()},Oo=(e,t,i,o,s)=>{const n=e.object2D;let a,r="horizontal"===t?e.halfSize.x:e.halfSize.y;if(o&&(r-=o*r),"horizontal"===t){const t=R(n.angle);a=new te.Pa4(n.x*s+i*r*Math.cos(t),e.getItemCenterPositionY(s),n.y*s+i*r*Math.sin(t))}else a=new te.Pa4(n.x*s,e.getItemCenterPositionY(s)+r,n.y*s);return e.depthDirectionOffsetTranslation(a,1,s),a},Io=(e,t)=>{const i=Do(e).map((e=>{const i=e.clone();return t.worldToLocal(i),i})),o=new te.ZzF;return o.setFromPoints(i),o},Po=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lefttoright";const i=e.itemObject,o=Oo(i,"horizontal",1,1,1),s=Oo(i,"horizontal",-1,0,1),n=new te.Pa4;e.getWorldScale(n);const a=Math.abs(n.x),r=o.clone();e.worldToLocal(r);const l=r.clone();l.x+=.5*i.halfSize.x/a;const h=l.clone();e.localToWorld(h);const c=Xi(h,s)<i.halfSize.x?1:-1;return"lefttoright"!==t?-1*c:c},ko=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"forward",i=1;return gt.includes(e.type)&&(i=-1),"forward"!==t?-1*i:i},Fo=(e,t,i)=>{const o=(new te.Pa4).subVectors(i,t),s=(new te.Pa4).subVectors(e,t).dot(o)/o.lengthSq();return(new te.Pa4).copy(t).addScaledVector(o,s)},Mo=(e,t,i)=>{const o=(new te.Pa4).subVectors(t,e),s=new te.yGw;return s.makeRotationY(i),o.applyMatrix4(s),(new te.Pa4).addVectors(e,o)};var Ao=i(1317);function Ro(e){return t=>{const i=t&&t.target?t.target.value:t,o=this.state.edit.map((t=>({...t,value:t.field===e.field?i:t.value})));this.setState({edit:o,needsSave:K(o,this.state.originalData)})}}function Lo(e){return t=>{const i="checkbox"===e.type?!this.state.edit.find((t=>t.field===e.field)).value:t&&t.target?t.target.value:t;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field],null,e.selectInput?i.value:i),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState(),this.simpleOnChangeHandlerBinded(e)("checkbox"===e.type?{target:{value:i}}:t)}}function Bo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=((e,t)=>{let i=0,o=e.map((e=>{let t,o,{value:s,validate:n,...a}=e;return a.isGpsCoord?(U.log("Comma value"+s),o=s.toString()&&s.toString().replace(",","."),U.log("Dotted value"+o),t=n&&n(o),t||(s=o)):t=n&&n(s),t&&i++,{...a,validate:n,value:s,error:t}}));return t(o),!i})(this.state.edit,(e=>{this.setState({edit:e})}));if(i){let i=[...this.props.mainComponentThis.klet3DLastSavedData],o=i.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));o&&(t?t(o):this.state.edit.forEach((e=>this.props.mainComponentThis.setKlet3DDataParamValue(o,this.props.targetObject2D,[e.field],e))),this.objectsBindingParamsCallSaveAPI(o,i,e))}}function Wo(){const e=this.props.mainComponentThis.floorplan3DComponent.current.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));e&&e.update(this.props.mainComponentThis.floorplan3DComponent.current.getObjectConnectorParamsData(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName],e.bindedObjects[0].object2D))}function Vo(e){this.state.needsSave&&(Ao.log("original data",this.state.originalData,this.props.klet3DBinder),this.state.originalData.forEach((t=>{e.find((e=>e.field===t.field))&&this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[t.field],t)})),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState())}function No(e,t,i){let o={entitydata:t};this.setState({loading:!0},(()=>{const s=()=>{this.props.mainComponentThis.klet3DLastSavedData=t,this.props.updateKlet3DBinderState(e),i&&i(),this.setState({loading:!1,originalData:this.state.edit,needsSave:!1})};this.props.callAPIForSave?C.post.call(this,"/klet3d/entity/".concat(this.props.mainComponentThis.props.floorplanID,"/").concat(this.props.mainComponentThis.props.licenseKey),o,(e=>{Ao.log("Klet post API response"),Ao.log(e),s()})):s()}))}const Eo=e=>null!==e.coordX&&null!==e.coordY&&(0!==e.coordX||e.coordY>0),Ho=e=>{let{children:t,title:i,controls:o,responseError:s,indoorMapping:n=!1,hideLayoutHeader:a=!1}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("main",{className:"layout container ".concat("Map"===i?"fieldmap-container":""," ").concat(n?"layout-indoormapping":""),children:[!a&&(0,l.jsx)(c,{title:i,controls:!y(s)&&o}),y(s)?S(s):t]})})};class zo extends o.PureComponent{render(){const{className:e,onClick:t,children:i,type:o,disabled:s,disabledNative:n,style:a={}}=this.props;return(0,l.jsx)("button",{className:n?"":"button ".concat(o?"button--type-".concat(o):""," ").concat(s?"button-disabled":""," ").concat(e||""),onClick:s||n?null:t,disabled:n,style:a,children:i})}}const Go=zo;var Uo=i(5807);class qo extends o.Component{render(){const{buttonType:e,ButtonIcon:t,buttonText:i,loading:o,spinnerLoading:s,spinnerColor:n}=this.props;return(0,l.jsxs)(Go,{type:e,disabled:this.props.disabled||!1,style:{position:o?"relative":"static"},onClick:()=>!this.props.disabled&&!o&&this.props.onClick&&this.props.onClick(),children:[(0,l.jsxs)("div",{className:"loading-button-content-container",style:{visibility:o?"hidden":"visible"},children:[t,(0,l.jsx)("span",{children:i})]})," ",o?s?(0,l.jsx)("div",{style:{height:"0.875rem",width:"0.875rem",borderColor:n,borderRightColor:"transparent",position:"absolute",top:"0.6rem",left:"calc(50% - 0.4375rem)",boxSizing:"border-box"},className:"spinner"}):(0,l.jsx)(Uo.Z,{style:{position:"absolute",top:0,left:0,height:"2.75rem",width:"100%"},animation:"pulse"}):null]})}}const Ko=qo;class Yo extends o.Component{render(){return(0,l.jsx)("div",{className:"button-centered-container edit-button",children:(0,l.jsx)(Go,{type:"primary",style:{paddingLeft:"1.2rem",paddingRight:"1.2rem"},children:(0,l.jsx)("a",{href:"https://app.klet3d.com/floorplan/".concat(this.props.mainComponentThis.getFloorplanID()),target:"_blank",rel:"noreferrer",style:{textDecoration:"none",color:"#fff"},children:"Edit values"})})})}}const Xo=Yo;var Zo=i(9150);class Jo extends o.Component{render(){return(0,l.jsxs)("div",{className:"screen-centered response-error-container",children:[(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(Zo.Z,{className:"popup-alert-icon"})}),(0,l.jsx)("p",{className:"error-message",children:this.props.message})]})}}const Qo=Jo;class $o extends o.Component{render(){return"403"===this.props.responseError?(0,l.jsx)(Qo,{message:"You do not have access to this site."}):"401"===this.props.responseError?(0,l.jsx)(Qo,{message:"Session expired, please log in again."}):!this.props.errorMessageCheckDisabled&&y(this.props.responseError)?this.props.contextError?(0,l.jsx)("div",{style:{padding:"1rem"},children:S(this.props.responseError)}):S(this.props.responseError):this.props.customResponseError?(0,l.jsx)(Qo,{message:this.props.customResponseError}):(0,l.jsx)(o.Fragment,{children:this.props.children})}}const es=$o;var ts=i(4827),is=i(1317);class os extends o.Component{constructor(){super(),this.state={displayMessage:!1},this.infoIconRef=o.createRef()}render(){return(0,l.jsxs)("div",{ref:this.infoIconRef,className:"info-icon-container",style:{...this.props.infoContainerStyles},children:[(0,l.jsx)(ts.Z,{className:"info-icon",onMouseOver:()=>{if(!this.state.displayMessage){if(this.props.indoorPanelExplanationBox){let e=this.infoIconRef.current.getBoundingClientRect();is.log(e),this.props.indoorPanelExplanationBox.current.style.top=e.top+"px",this.props.indoorPanelExplanationBox.current.style.left=e.left+20+"px",this.props.indoorPanelExplanationBox.current.innerHTML=this.props.infoText,this.props.indoorPanelExplanationBox.current.style.display="block"}this.setState({displayMessage:!0})}},onMouseLeave:()=>{this.state.displayMessage&&(this.props.indoorPanelExplanationBox&&(this.props.indoorPanelExplanationBox.current.style.display="none"),this.setState({displayMessage:!1}))}}),this.props.indoorPanelExplanationBox?null:(0,l.jsx)("div",{className:"explanation-info-box ".concat(this.props.persistExplanationBox?"explanation-box-persist":""),style:{display:this.state.displayMessage||this.props.persistExplanationBox?"inline-block":"none",...this.props.explanationInfoBoxStyles},children:this.props.infoText})]})}}const ss=os;class ns extends o.Component{constructor(e){super(e),this.setInitialValue=e=>this.initialValue=e,this.setValue=e=>this.inputRef.current.value=e,this.getValue=()=>this.inputRef.current.value,this.setRangeValues=(e,t)=>{this.inputRef.current.setAttribute("min",e),this.inputMin=e,this.inputRef.current.setAttribute("max",t),this.inputMax=t},this.setValueInsideInterval=e=>(this.props.allowEmpty&&""===e||(e>this.inputMax?e=this.inputMax:e<this.inputMin&&(e=this.inputMin)),e),this.onInputChange=e=>{let t=T(e.target.value,this.decimalPrecision),i=e.target.value,o=!1;(!isNaN(t)||this.props.allowEmpty&&""===i)&&(i=this.props.allowEmpty&&""===i?i:t,i===this.setValueInsideInterval(i)&&(o=!0)),this.inputRef.current.value=i,this.setState({isInvalid:!o},(()=>{this.props.callOnlyOnBlur||!o||!this.props.onInputValueChanged||this.props.checkInputValueChangeBeforeCall&&this.inputValueChangedCalledWithValue===i||(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged())}))},this.onInputBlur=e=>{let t=T(e.target.value,this.decimalPrecision),i=this.initialValue;(!isNaN(t)||this.props.allowEmpty&&""===e.target.value)&&(i=this.props.allowEmpty&&""===e.target.value?e.target.value:t,i=this.setValueInsideInterval(i)),this.inputRef.current.value=i,this.setState({isInvalid:!1},(()=>{!this.props.onInputValueChanged||this.props.checkInputValueChangeBeforeCall&&this.inputValueChangedCalledWithValue===i||(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged())}))},this.state={isInvalid:!1},this.inputMin=e.inputMin,this.inputMax=e.inputMax,this.initialValue=void 0!==e.defaultValue?e.defaultValue:e.inputMin,this.decimalPrecision=-Math.log10(e.inputStep),this.inputValueChangedCalledWithValue=null,this.inputRef=o.createRef(),this.setValue=this.setValue.bind(this),this.getValue=this.getValue.bind(this),this.setRangeValues=this.setRangeValues.bind(this),this.setInitialValue=this.setInitialValue.bind(this),this.setValueInsideInterval=this.setValueInsideInterval.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}componentDidMount(){this.props.defaultValue&&(this.inputRef.current.value=this.props.defaultValue)}render(){return(0,l.jsx)("input",{ref:this.inputRef,type:"number",disabled:this.props.disabled,min:this.inputMin,max:this.inputMax,step:this.props.inputStep,placeholder:this.props.placeholder||"",title:this.props.title||"",style:this.props.inputStyle||{},lang:"en",className:"form-control input ".concat(this.state.isInvalid?"is-invalid":""," ").concat(this.props.hideNumberArrows?"hide-number-arrows":""," ").concat(this.props.disabled?"form-disabled-input":""),onChange:this.props.disabled?void 0:this.onInputChange,onBlur:this.props.disabled?void 0:this.onInputBlur,onKeyDown:e=>!this.props.disabled&&"Enter"===e.key&&this.props.callOnlyOnBlur&&e.target.blur()})}}const as=ns;var rs=i(1317);class ls extends o.Component{constructor(e){super(e),this.setInitialValue=e=>this.initialValue=e,this.setValue=e=>this.setState({value:e}),this.getValue=()=>this.state.value,this.setRangeValues=(e,t)=>{this.setState({min:e,max:t})},this.setValueInsideInterval=e=>(this.props.allowEmpty&&""===e||(e>this.state.max?e=this.state.max:e<this.state.min&&(e=this.state.min)),e),this.onInputChange=e=>{let t=T(e.target.value,this.decimalPrecision),i=e.target.value,o=!1;(!isNaN(t)||this.props.allowEmpty&&""===i)&&(i=this.props.allowEmpty&&""===i?i:t,i===this.setValueInsideInterval(i)&&(o=!0)),this.setState({value:i,isInvalid:!o},(()=>{!this.props.callOnlyOnBlur&&o&&this.props.onInputValueChanged&&this.inputValueChangedCalledWithValue!==i&&(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged(this.state.value))}))},this.onInputBlur=e=>{let t=T(e.target.value,this.decimalPrecision),i=this.initialValue;(!isNaN(t)||this.props.allowEmpty&&""===e.target.value)&&(i=this.props.allowEmpty&&""===e.target.value?e.target.value:t,i=this.setValueInsideInterval(i)),this.setState({value:i,isInvalid:!1},(()=>{(this.props.callOnlyOnBlur||this.props.onInputValueChanged&&this.inputValueChangedCalledWithValue!==i)&&(this.inputValueChangedCalledWithValue=i,this.props.onInputValueChanged(this.state.value))}))},this.state={value:e.value||"",min:e.inputMin,max:e.inputMax,isInvalid:!1},this.decimalPrecision=-Math.log10(e.inputStep),this.initialValue=void 0!==e.value?e.value:e.inputMin,this.inputValueChangedCalledWithValue=null,this.setValue=this.setValue.bind(this),this.getValue=this.getValue.bind(this),this.setRangeValues=this.setRangeValues.bind(this),this.setInitialValue=this.setInitialValue.bind(this),this.setValueInsideInterval=this.setValueInsideInterval.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}render(){rs.log("Is invalid "+this.state.isInvalid);const{value:e,min:t,max:i,isInvalid:o}=this.state;return(0,l.jsx)("input",{type:"number",min:t,max:i,step:this.props.inputStep,placeholder:this.props.placeholder||"",title:this.props.title||"",style:this.props.inputStyle||{},lang:"en",className:"form-control input ".concat(o?"is-invalid":""," ").concat(this.props.hideNumberArrows?"hide-number-arrows":""," ").concat(this.props.inputClasses||""," ").concat(this.props.disabled?"form-disabled-input":""),value:this.props.usePropsValue?this.props.value:e,onChange:this.props.disabled?void 0:this.onInputChange,onBlur:this.props.disabled?void 0:this.onInputBlur,onKeyDown:e=>!this.props.disabled&&"Enter"===e.key&&this.props.callOnlyOnBlur&&e.target.blur()})}}const hs=ls;var cs=i(648);class ds extends o.Component{render(){return(0,l.jsxs)("div",{className:"screen-centered-tabs-and-close-button-modal ".concat(this.props.className||""),style:this.props.modalStyles||{},children:[(0,l.jsx)("div",{className:"tab-labels-container",children:this.props.modalTabs||(0,l.jsx)("div",{className:"keep-height",children:"Keep height"})}),(0,l.jsx)("div",{className:"close-button-container",onClick:this.props.onCloseModalClick,children:(0,l.jsx)(cs.Z,{})}),this.props.children]})}}const ps=ds;class ms extends o.Component{render(){return(0,l.jsxs)(xs,{containerRef:this.props.formGroupRef||null,containerClasses:this.props.containerClasses,containerStyle:this.props.formGroupStyle,label:this.props.label,labelStyle:this.props.labelStyle,labelClasses:this.props.labelClasses,children:[this.props.inputLoading?(0,l.jsx)("div",{children:(0,l.jsx)(Ms,{center:!0,noMargin:!0,spinnerStyle:{width:20,height:20}})}):(0,l.jsx)(o.Fragment,{children:this.props.selectInput?this.props.selectBoxComboInput?(0,l.jsx)(zs,{item:this.props.item,handleChange:this.props.onChange}):(0,l.jsx)(Us,{ref:this.props.selectInputRef||null,disabled:this.props.disabled,explanationInfoBoxStyles:this.props.explanationInfoBoxStyles,fullWidth:this.props.fullWidth,item:this.props.item,handleChange:this.props.onChange}):(0,l.jsx)(Ss,{inputProps:{item:this.props.item,onChange:this.props.onChange,inputRef:this.props.inputRef,inputClasses:this.props.inputClasses,disabled:this.props.disabled,inputStyle:this.props.inputStyle,value:this.props.value,error:this.props.error,type:this.props.type,placeholder:this.props.placeholder,accept:this.props.accept}})}),this.props.error&&(0,l.jsx)("div",{className:"form-control feedback ".concat(this.props.errorClasses||""),children:this.props.error}),this.props.bellowInputElements&&this.props.bellowInputElements]})}}const us=ms;class gs extends o.Component{render(){return(0,l.jsxs)("div",{className:"checked-input-container ".concat(this.props.disabled?"disabled":""," ").concat(this.props.containerClasses||""),children:[(0,l.jsx)("input",{ref:this.props.inputRef||null,title:this.props.title,type:"checkbox",onChange:this.props.disabled?void 0:this.props.onChange,defaultChecked:this.props.defaultChecked,disabled:this.props.disabled,checked:this.props.checked}),this.props.label&&(0,l.jsx)("label",{children:this.props.label}),this.props.infoLabel&&(0,l.jsxs)("div",{className:"label-info-box-container",children:[(0,l.jsx)("label",{children:this.props.infoLabelTitle}),(0,l.jsx)(ss,{infoText:this.props.infoText,explanationInfoBoxStyles:this.props.explanationInfoBoxStyles||{}})]})]})}}const fs=gs;class bs extends o.Component{render(){return(0,l.jsxs)(xs,{label:this.props.label,containerStyle:this.props.formGroupContainerStyle||{},children:[(0,l.jsx)("div",{className:"form-radio-group",style:this.props.radioGroupContainerStyle||{},children:this.props.item.choices.map(((e,t)=>(0,l.jsxs)("div",{style:this.props.choiceRowStyle||{},children:[!this.props.rightLabel&&(0,l.jsx)("label",{className:"left-label",children:e.name}),(0,l.jsx)("input",{disabled:this.props.disabled,value:e.value,type:"radio",checked:this.props.item.value===e.value,onChange:this.props.disabled?void 0:this.props.onChange(this.props.item)}),this.props.rightLabel&&(0,l.jsx)("label",{className:"right-label",children:e.name}),e.inputSiblingElement||null]},t)))}),this.props.item.error&&(0,l.jsx)("div",{className:"form-control feedback",children:this.props.item.error})]})}}const ws=bs;class Cs extends o.Component{render(){return(0,l.jsxs)("div",{ref:this.props.containerRef||null,className:"form-group ".concat(this.props.containerClasses||""),style:this.props.containerStyle||{},children:[this.props.label&&(0,l.jsx)("label",{style:this.props.labelStyle||{},className:"label form-control ".concat(this.props.labelClasses||""),children:this.props.label}),this.props.children]})}}const xs=Cs;class ys extends o.Component{render(){return(0,l.jsx)("input",{ref:this.props.inputProps.inputRef||null,className:"form-control input ".concat(this.props.inputProps.inputClasses||""," ").concat(this.props.inputProps.error?"is-invalid":""," ").concat(this.props.inputProps.disabled?"form-disabled-input":""),style:this.props.inputProps.inputStyle||{},value:this.props.inputProps.value,disabled:this.props.inputProps.disabled,type:this.props.inputProps.type||"text",placeholder:this.props.inputProps.placeholder||"",onChange:this.props.inputProps.onChange&&this.props.inputProps.onChange(this.props.inputProps.item),accept:this.props.inputProps.accept})}}const Ss=ys;var _s=i(8735);class Ds extends o.Component{constructor(){super(),this.onColorChange=e=>!this.props.disabled&&this.props.onChange(this.props.item)({target:{value:e}}),this.onOpenColorPickerClick=()=>{this.setState({isColorPickerVisible:!this.state.isColorPickerVisible})},this.colorPickerPopupRaycasting=e=>{this.state.isColorPickerVisible&&(A(e.clientX,e.clientY,this.colorPickerPopupContainerRef.current.getElementsByClassName("react-colorful")[0].getBoundingClientRect())||A(e.clientX,e.clientY,this.colorPickerInputContainerRef.current.getBoundingClientRect())||this.setState({isColorPickerVisible:!1}))},this.state={isColorPickerVisible:!1},this.colorPickerPopupContainerRef=o.createRef(),this.colorPickerInputContainerRef=o.createRef(),this.paddingValue=3,this.onColorChange=this.onColorChange.bind(this),this.onOpenColorPickerClick=this.onOpenColorPickerClick.bind(this),this.colorPickerPopupRaycasting=this.colorPickerPopupRaycasting.bind(this)}componentWillUnmount(){this.props.boxContainer&&this.props.boxContainer.removeEventListener("click",this.colorPickerPopupRaycasting)}componentDidMount(){const e=this.colorPickerInputContainerRef.current.getElementsByClassName("input");for(let t=0;t<e.length;t++)e[t].style.paddingLeft=this.colorPickerInputContainerRef.current.offsetHeight+this.paddingValue+"px";this.props.boxContainer&&this.props.boxContainer.addEventListener("click",this.colorPickerPopupRaycasting)}render(){return(0,l.jsxs)("div",{className:"color-picker-container",style:this.props.containerStyle||{},children:[(0,l.jsx)("div",{ref:this.colorPickerPopupContainerRef,className:"color-picker-popup-container",style:{display:this.state.isColorPickerVisible?"block":"none",opacity:this.state.isColorPickerVisible?1:0,pointerEvents:this.state.isColorPickerVisible?"auto":"none"},children:(0,l.jsx)(_s.gW,{color:this.props.item.value,onChange:this.onColorChange,disabled:this.props.disabled})}),(0,l.jsxs)("div",{ref:this.colorPickerInputContainerRef,className:"color-picker-input-container input-auto-width",children:[(0,l.jsx)("span",{className:"form-control input keep-width-span",style:{paddingRight:this.paddingValue},children:"#000000"}),(0,l.jsx)(_s.ZE,{className:"form-control input color-picker-input",style:{paddingRight:this.paddingValue},color:this.props.item.value,prefixed:!0,disabled:this.props.disabled,onChange:this.onColorChange}),(0,l.jsx)("div",{className:"color-value-layout",style:{backgroundColor:this.props.item.value},onClick:this.onOpenColorPickerClick})]})]})}}const vs=Ds;class Ts extends o.Component{render(){return(0,l.jsxs)("div",{ref:this.props.containerRef||null,className:"form-group inline ".concat(this.props.autoWidth?"auto-width-container":""," ").concat(this.props.containerClasses||""),style:this.props.containerStyle||{},children:[(0,l.jsx)("div",{className:"label-container",children:(0,l.jsx)("label",{style:this.props.labelStyle||{},className:"label form-control ".concat(this.props.labelClasses||""),children:this.props.label})}),(0,l.jsxs)("div",{className:"input-container ".concat(this.props.autoWidth?"input-auto-width":""),children:[this.props.autoWidth&&(0,l.jsx)("span",{className:"form-control input ".concat(this.props.autoWidthClass),children:this.props.keepWidthValue}),this.props.isColorInput?(0,l.jsx)(vs,{disabled:this.props.disabled,item:this.props.item,onChange:this.props.onChange,boxContainer:this.props.colorPickerBoxContainer}):this.props.isNumberInput?this.props.controledNumberInput?(0,l.jsx)(hs,{placeholder:this.props.item.placeholder,disabled:this.props.disabled,inputStep:this.props.item.step,inputMin:this.props.item.min,inputMax:this.props.item.max,usePropsValue:this.props.usePropsValue,value:this.props.item.value,onInputValueChanged:this.props.onChange(this.props.item)}):(0,l.jsx)(as,{ref:this.props.uncontroledNumberInputRef,disabled:this.props.disabled,placeholder:this.props.item.placeholder,inputStep:this.props.item.step,inputMin:this.props.item.min,inputMax:this.props.item.max,onInputValueChanged:this.props.onChange(this.props.item)}):(0,l.jsx)(Ss,{inputProps:{item:this.props.item,onChange:this.props.onChange,inputRef:this.props.inputRef,inputClasses:this.props.inputClasses,disabled:this.props.disabled,inputStyle:this.props.inputStyle,value:this.props.value,error:this.props.error,type:this.props.type,placeholder:this.props.placeholder,accept:this.props.accept}}),this.props.error&&(0,l.jsx)("div",{className:"form-control feedback ".concat(this.props.errorClasses||""),children:this.props.error})]})]})}}const js=Ts;var Os=i(2661);class Is extends o.Component{constructor(e){super(),this.setValue=e=>this.setState({value:e}),this.copyInputValue=()=>{if(navigator.clipboard)navigator.clipboard.writeText(this.inputRef.current.textContent).then((()=>{this.setState({showCopyStatus:!0,copyStatusText:"Copied!"},(()=>{setTimeout((()=>{this.setState({showCopyStatus:!1})}),1e3)}))})).catch((()=>{this.setState({showCopyStatus:!0,copyStatusText:"Can't copy!"})}));else{const e=document.createElement("textarea");e.value=this.inputRef.current.textContent,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),this.setState({showCopyStatus:!0,copyStatusText:"Copied!"},(()=>{setTimeout((()=>{this.setState({showCopyStatus:!1})}),1e3)}))}},this.state={showCopyStatus:!1,value:e.value},this.inputRef=o.createRef(),this.setValue=this.setValue.bind(this),this.copyInputValue=this.copyInputValue.bind(this)}render(){const{showCopyStatus:e,copyStatusText:t,value:i}=this.state;return i?(0,l.jsxs)("div",{style:{width:"100%",...this.props.containerStyle},children:[(0,l.jsxs)("div",{className:"copy-alert-and-label-container",children:[(0,l.jsx)("label",{className:"label form-control",children:this.props.label}),(0,l.jsx)("div",{style:{display:e?"block":"none"},children:t})]}),(0,l.jsxs)("div",{className:"clipboard-label",children:[(0,l.jsx)("div",{ref:this.inputRef,style:{wordBreak:"break-all"},className:"form-control input form-disabled-input",children:i}),(0,l.jsx)("div",{className:"clipboard-container copy-input",onClick:this.copyInputValue,children:(0,l.jsx)(Os.Z,{className:"copy-icon"})})]})]}):null}}const Ps=Is;class ks extends o.Component{constructor(){super(),this.closeDropdownMenu=()=>this.actionButtonRef.current.nextSibling.classList.remove("show"),this.setValue=e=>{this.actionButtonRef.current.innerHTML=e+' <span class="caret"></span>',this.setState({selectedValue:e}),this.closeDropdownMenu()},this.onActionButtonClick=e=>{!this.props.disabled&&e.target.nextSibling&&e.target.nextSibling.classList.toggle("show")},this.handleClickOutside=e=>{this.props.disableCloseOnOutsideClick||this.containerRef.current&&!this.containerRef.current.contains(e.target)&&this.closeDropdownMenu()},this.state={selectedValue:null},this.onActionButtonClick=this.onActionButtonClick.bind(this),this.setValue=this.setValue.bind(this),this.handleClickOutside=this.handleClickOutside.bind(this),this.closeDropdownMenu=this.closeDropdownMenu.bind(this),this.actionButtonRef=o.createRef(),this.containerRef=o.createRef()}componentDidMount(){document.addEventListener("mousedown",this.handleClickOutside)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}render(){return(0,l.jsxs)("div",{ref:this.containerRef,className:"select-custom-mini-container ".concat(this.props.containerClasses||""),children:[(0,l.jsx)("button",{disabled:this.props.disabled,ref:this.actionButtonRef,className:"btn btn-default form-control input",onClick:this.onActionButtonClick}),(0,l.jsx)("ul",{ref:this.props.dropdownMenuRef||null,className:"list-unstyled select-custom-mini-dropdown-menu",children:this.props.listItems.map(((e,t)=>(0,l.jsx)("li",{className:"".concat(e===this.state.selectedValue?"selected":""),onClick:e=>!this.props.disabled&&this.props.onListItemClick(e,t),children:e},e)))})]})}}const Fs=ks,Ms=e=>{let{center:t,screenCenter:i,spinnerHolderStyle:o={},spinnerStyle:s={},noMargin:n}=e;return(0,l.jsx)("div",{style:{...o,textAlign:t?"center":"auto"},className:"spinner-holder ".concat(i?"screen-centered":""," ").concat(n?"spinner-holder-no-margin":""),children:(0,l.jsx)("div",{style:s,className:"spinner"})})};var As=i(8039),Rs=i(6508),Ls=i(309),Bs=i(8364),Ws=i(1504),Vs=i(3702);const Ns=(0,Vs.ZP)({overrides:{MuiPopover:{root:{zIndex:"1402!important"}},MuiSelect:{root:{"&:$focus":{border:"2px solid #19ab7f !important"}}},MuiInput:{underline:{"&:after":{borderBottomColor:"#19ab7f !important"},"&:before":{borderBottomColor:"#ffffff !important"}}},MuiFormLabel:{root:{"&$focused":{color:"#19ab7f !important"}},focused:{}},MuiIconButton:{colorSecondary:{"&:hover":{backgroundColor:"rgba(27, 215, 65, 0.04)"}}},MuiCheckbox:{colorSecondary:{color:"#19ab7f !important"}},MuiChecked:{root:{"&:$hover":{backgroundColor:"#transparent !important"}}},MuiTypography:{root:{fontSize:"0.875rem !important"}},MuiListItemText:{root:{margin:"0 !important",textAlign:"center"}},MuiMenu:{paper:{maxHeight:"50vh"}}}});var Es=i(7664);class Hs extends o.Component{constructor(e){super(e),this.handleSelectChange=e=>{"Other..."===e.target.value?this.state.showInputBox||(this.inputRef.current.focus(),e.target.value="",this.setState({showInputBox:!0,inputValue:"",selectValue:this.props.item.options[this.props.item.options.length-1]},(()=>this.props.handleChange(this.props.item)(e)))):this.setState({showInputBox:!1},(()=>this.handleChangeSelect(e)))},this.onInputChange=()=>e=>this.handleChangeInput(e),this.handleChangeInput=e=>{e.persist(),this.setState({inputValue:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.handleChangeSelect=e=>{e.persist(),this.setState({selectValue:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.state={selectValue:e.item.options.find((t=>t===e.item.value))||""===e.item.value?e.item.value:e.item.options[e.item.options.length-1],inputValue:e.item.options.find((t=>t===e.item.value))||""===e.item.value?"":e.item.value||"",showInputBox:!e.item.options.find((t=>t===e.item.value))&&""!==e.item.value},this.inputRef=o.createRef(),this.handleSelectChange=this.handleSelectChange.bind(this),this.onInputChange=this.onInputChange.bind(this),this.handleChangeInput=this.handleChangeInput.bind(this),this.handleChangeSelect=this.handleChangeSelect.bind(this)}render(){return(0,l.jsx)(Es.Z,{theme:Ns,children:(0,l.jsxs)("div",{children:[(0,l.jsx)(Ws.Z,{className:"select-input-form-control",style:{width:"50%"},children:(0,l.jsx)(Ls.Z,{MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},labelId:"select-device-label",value:this.state.selectValue,renderValue:e=>(0,l.jsx)(Rs.Z,{children:e}),onChange:e=>this.handleSelectChange(e),children:this.props.item.options.map((e=>(0,l.jsxs)(Bs.Z,{value:e,children:[(0,l.jsx)(As.Z,{checked:e===this.state.selectValue,style:{visibility:e===this.state.selectValue?"visible":"hidden"}}),(0,l.jsx)(Rs.Z,{children:e})]},e)))})}),(0,l.jsx)(us,{formGroupRef:this.inputRef,formGroupStyle:{width:"50%",display:this.state.showInputBox?"block":"none"},placeholder:"Type name",value:this.state.inputValue,error:this.props.item.error,onChange:this.onInputChange})]})})}}const zs=Hs;class Gs extends o.Component{constructor(e){super(e),this.onChange=e=>{e.persist(),this.setState({value:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.resetValue=()=>{this.setState({value:""})},this.state={value:e.item.value},this.onChange=this.onChange.bind(this),this.resetValue=this.resetValue.bind(this)}render(){return(0,l.jsx)(Es.Z,{theme:Ns,children:(0,l.jsx)("div",{children:(0,l.jsx)(Ws.Z,{className:"select-input-form-control",style:{width:this.props.fullWidth?"100%":"50%"},children:(0,l.jsx)(Ls.Z,{disabled:this.props.disabled,MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},labelId:"select-device-label",defaultValue:"",value:this.state.value,renderValue:e=>(0,l.jsx)(Rs.Z,{children:e.name||e}),onChange:e=>!this.props.disabled&&this.onChange(e),children:this.props.item.options.map((e=>(0,l.jsxs)("div",{value:e,className:"select-menu-item-container",children:[(0,l.jsxs)(Bs.Z,{value:e,children:[(0,l.jsx)(As.Z,{checked:(e.value||e)===(this.state.value.value||this.state.value),style:{visibility:(e.value||e)===(this.state.value.value||this.state.value)?"visible":"hidden"}}),(0,l.jsx)(Rs.Z,{children:e.name||e})]}),e.infoText&&(0,l.jsx)(ss,{infoText:e.infoText,explanationInfoBoxStyles:this.props.explanationInfoBoxStyles||{}})]},e.value||e)))})})})})}}const Us=Gs;class qs extends o.Component{constructor(e){super(e),this.onChange=e=>{e.persist(),this.setState({value:e.target.value},(()=>this.props.handleChange(this.props.item)(e)))},this.resetValue=()=>{this.setState({value:[]})},this.state={value:e.item.value||[]},this.onChange=this.onChange.bind(this),this.resetValue=this.resetValue.bind(this)}render(){return(0,l.jsx)(Es.Z,{theme:Ns,children:(0,l.jsx)("div",{style:{backgroundColor:"#fff"},children:(0,l.jsx)(Ws.Z,{className:"select-input-form-control",style:{width:this.props.fullWidth?"100%":"50%"},children:(0,l.jsx)(Ls.Z,{disabled:this.props.disabled,multiple:!0,MenuProps:{getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"left"}},style:{width:"100%"},renderValue:e=>{if(e.length>0){let t=e[0].name||e[0];for(let i=1;i<e.length;i++)t+=", "+e[i].name||0;return t}return""},value:this.state.value,onChange:e=>!this.props.disabled&&this.props.handleChange&&this.onChange(e),children:this.props.item.options.map(((e,t)=>(0,l.jsxs)("div",{value:e,className:"select-menu-item-container",children:[(0,l.jsxs)(Bs.Z,{value:e,children:[(0,l.jsx)(As.Z,{checked:!!this.state.value.find((t=>(t.value||t)===(e.value||e)))}),(0,l.jsx)(Rs.Z,{children:e.name||e})]},t),e.infoText&&(0,l.jsx)(ss,{infoText:e.infoText})]},e.value||e)))})})})})}}const Ks=qs;var Ys=i(4312);const Xs=(0,Vs.ZP)({overrides:{MuiSwitch:{switchBase:{color:"#fff","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)!important"}},colorSecondary:{"&$checked":{color:"#19ab7f","&:hover":{backgroundColor:"rgba(27, 215, 65, 0.04)!important"}}},track:{"$checked$checked + &":{opacity:.7,backgroundColor:"#19ab7f"}}},MuiSlider:{root:{color:"#19ab7f"}}}});class Zs extends o.Component{render(){return(0,l.jsxs)("div",{className:"map-onhover-dropdown-list-options-container",children:[(0,l.jsx)("div",{className:"bolded-title",children:"STYLES"}),this.props.mapStyles.map((e=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:e.name}),(0,l.jsx)("div",{children:(0,l.jsx)(Es.Z,{theme:Xs,children:(0,l.jsx)(Ys.Z,{checked:this.props.selectedMapStyle===e.value,onChange:this.props.switchLayer(e.value)})})})]},e.value)))]})}}const Js=Zs;var Qs=i(9675);class $s extends o.PureComponent{constructor(){super(),this.state={mapConstructed:!1},this.reactMapboxGlMap=null}componentDidMount(){this.reactMapboxGlMap=(0,Qs.ZP)({accessToken:"pk.eyJ1Ijoic2xhdmVuZGFtIiwiYSI6ImNrZ3pudHFxZzE1ZHoycnIxOXEzMndidTEifQ.sKPryHAJXxnH32c2W0HPsQ",preserveDrawingBuffer:this.props.preserveDrawingBuffer}),this.setState({mapConstructed:!0})}render(){if(this.state.mapConstructed){const e=this.reactMapboxGlMap;return(0,l.jsx)(e,{style:this.props.mapStyle,center:this.props.center,zoom:this.props.zoom,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,onClick:this.props.onClick,onZoom:this.props.onZoom,onZoomStart:this.props.onZoomStart,onZoomEnd:this.props.onZoomEnd,onPitchStart:this.props.onPitchStart,onPitchEnd:this.props.onPitchEnd,children:this.props.children})}return null}}const en=$s;var tn=i(3693);class on extends o.Component{constructor(){super(),this.handleYesClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!0},(()=>{this.props.userChoice()}))},this.handleOkClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!1},(()=>{this.props.userChoice&&this.props.userChoice()}))},this.handleNoClick=()=>{const e=this.props.statePropertyName;this.props.setChoice({[e]:!1},(()=>{this.props.userChoice&&this.props.userChoice()}))},this.handleYesClick=this.handleYesClick.bind(this),this.handleNoClick=this.handleNoClick.bind(this),this.handleOkClick=this.handleOkClick.bind(this)}render(){const{message:e,visible:t,loading:i,loadingText:s,singleButton:n,type:a,error:r,buttonGreenText:h,buttonCancelText:c}=this.props;return t?(0,l.jsx)("div",{className:"popup-disable-background",children:(0,l.jsx)("div",{className:"popup-container",style:this.props.containerStyle||{},children:this.props.children?this.props.children:(0,l.jsxs)(o.Fragment,{children:[r?(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(Zo.Z,{className:"popup-alert-icon"})}):1===a?n&&!i?(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(tn.Z,{className:"popup-success-icon"})}):n?null:(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(Zo.Z,{className:"popup-alert-icon"})}):2===a?(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(Zo.Z,{className:"popup-alert-icon"})}):3===a?(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(ts.Z,{className:"popup-alert-icon"})}):void 0,i?(0,l.jsxs)(o.Fragment,{children:[s?(0,l.jsx)("div",{className:"popup-message",children:s}):null,(0,l.jsx)(Ms,{center:!0})]}):(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"popup-message",children:r||e}),(0,l.jsx)("div",{className:"popup-button-container",children:(()=>n?(0,l.jsx)(Go,{type:"primary",onClick:this.handleOkClick,children:"OK"}):n||1!==a?n||2!==a?null:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(Go,{type:"popup-delete",onClick:this.handleYesClick,children:"Delete"}),(0,l.jsx)(Go,{type:"popup-cancel",onClick:this.handleNoClick,children:"Cancel"})]}):(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(Go,{type:"primary",style:{borderRadius:"0.75rem"},onClick:this.handleYesClick,children:h||"Confirm"}),(0,l.jsx)(Go,{type:"popup-cancel",onClick:this.handleNoClick,children:c||"Cancel"})]}))()})]})]})})}):null}}class sn extends o.Component{render(){return(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("span",{style:{visibility:"hidden"},children:this.props.longText}),(0,l.jsx)("div",{style:{position:"absolute",left:0,top:0},children:(0,l.jsx)("span",{children:this.props.shortText})})]})}}const nn=sn;class an extends o.Component{render(){return(0,l.jsxs)("div",{className:"label form-control info-label ".concat(this.props.disableMarginIncrease?"":"increase-margin"),children:[(0,l.jsx)("span",{children:this.props.labelText}),(0,l.jsx)(ss,{infoText:this.props.infoText,explanationInfoBoxStyles:{top:20,left:this.props.explanationInfoBoxLeft||0,width:150,zIndex:2}})]})}}const rn=an;var ln=i(4006);class hn extends o.Component{constructor(){super(),this.setTimeoutCallback=e=>{this.state.setVisibleCounter===e&&this.mounted&&this.setState({visible:!1,setVisibleCounter:this.state.setVisibleCounter+1})},this.showAlert=(e,t)=>{const i=this.state.setVisibleCounter+1;this.setState({visible:!0,alertMessage:e,alertType:t,setVisibleCounter:i},(()=>{void 0!==this.props.delay?this.containerRef.current.animate([{opacity:0,offset:0},{opacity:1,offset:.1},{opacity:1,offset:.9},{opacity:0,offset:.91}],this.props.delay):this.containerRef.current.style.opacity=1})),void 0!==this.props.delay&&setTimeout(this.setTimeoutCallback.bind(this,i),this.props.delay)},this.hideAlert=()=>this.setState({visible:!1}),this.state={visible:!1,setVisibleCounter:0,alertType:null,alertMessage:null},this.containerRef=o.createRef(),this.showAlert=this.showAlert.bind(this),this.hideAlert=this.hideAlert.bind(this),this.setTimeoutCallback=this.setTimeoutCallback.bind(this),this.mounted=!1}componentWillUnmount(){this.mounted=!1}componentDidMount(){this.mounted=!0}render(){return this.state.visible?(0,l.jsxs)("div",{ref:this.containerRef,className:"alert ".concat("error"===this.state.alertType?"alert-error":""," ").concat("success"===this.state.alertType?"alert-success":""," ").concat("warning"===this.state.alertType?"alert-warning":""),style:this.props.style?{...this.props.style,animationDuration:void 0!==this.props.delay?this.props.delay+"ms":"auto"}:{animationDuration:void 0!==this.props.delay?this.props.delay+"ms":"auto"},children:[(0,l.jsx)("p",{children:this.state.alertMessage}),(0,l.jsx)("div",{className:"svg-center-inside-container alert-close",onClick:()=>this.setState({visible:!1,setVisibleCounter:this.state.setVisibleCounter+1}),children:(0,l.jsx)(ln.Z,{})})]}):null}}const cn=hn;var dn=i(1317);class pn extends o.Component{constructor(){super(),this.callErrorLogAPI=e=>{const t=window._env_.floorplanID,i=window._env_.licenseKey;if(dn.log("callErrorLogAPI",e,t,i),t&&i){!0&&C.post.call(this,"/klet3d/error/".concat(t,"/").concat(i),{error:e},(e=>{dn.log("Error logged succesfully",e)}))}},this.windowErrorEventHandler=(e,t,i,o,s)=>{this.callErrorLogAPI(JSON.stringify({message:e.message,source:t,lineno:i,colno:o,error:JSON.stringify(s)}))},this.windowUnhandledRejectionEventHandler=e=>{this.callErrorLogAPI(JSON.stringify({message:e.reason.message,stack:e.reason.stack}))},this.state={responseError:null},this.mounted=!1,this.callErrorLogAPI=this.callErrorLogAPI.bind(this),this.windowErrorEventHandler=this.windowErrorEventHandler.bind(this),this.windowUnhandledRejectionEventHandler=this.windowUnhandledRejectionEventHandler.bind(this)}componentDidCatch(e,t){this.callErrorLogAPI(JSON.stringify({error:JSON.stringify(e),errorInfo:t}))}componentDidMount(){this.mounted=!0,window.addEventListener("error",this.windowErrorEventHandler),window.addEventListener("unhandledrejection",this.windowUnhandledRejectionEventHandler)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("error",this.windowErrorEventHandler),window.removeEventListener("unhandledrejection",this.windowUnhandledRejectionEventHandler)}render(){return(0,l.jsx)(es,{responseError:this.state.responseError,children:this.props.children})}}const mn=pn;class un extends o.Component{render(){return(0,l.jsxs)("div",{style:{display:"flex"},children:[(0,l.jsx)("div",{className:"checked-input-container",children:(0,l.jsx)("input",{type:"checkbox",style:{visibility:"hidden"}})}),(0,l.jsx)("div",{style:{flexGrow:1},children:this.props.children})]})}}const gn=un;var fn=i(4916),bn=i(1317);const wn=class{constructor(e){this.rectangleDimensionsFromPoints=e=>{let t=[];for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++){let s=T(Ki(e[i],e[o]),8);t.includes(s)||t.push(s)}return t.sort(((e,t)=>t-e)),{a:t[t.length-2],b:t[t.length-1]}},this.mainComponentThis=e}create(e,t,i){let o=document.createElementNS("http://www.w3.org/2000/svg",t);for(let s in i)o.setAttribute(s,i[s]);return"none"!==e&&e.current.appendChild(o),o}angleDeg(e,t,i,o){let s=o-t,n=i-e,a=Math.atan2(s,n);return a*=180/Math.PI,a<0&&(a=360+a),a}angleBetweenLines(e,t,i,o){const s=e*i+t*o,n=e*o-t*i;return-Math.atan2(n,s)}angle(e,t,i,o,s,n){let a,r,l=parseInt(e),h=parseInt(t),c=parseInt(i),d=parseInt(o);if(s){let e=parseInt(s),t=parseInt(n),i=Math.sqrt(Math.pow(Math.abs(c-l),2)+Math.pow(Math.abs(d-h),2)),o=Math.sqrt(Math.pow(Math.abs(c-e),2)+Math.pow(Math.abs(d-t),2)),p=Math.sqrt(Math.pow(Math.abs(e-l),2)+Math.pow(Math.abs(t-h),2));a=0===i||0===o?Math.PI/2:Math.acos((Math.pow(i,2)+Math.pow(o,2)-Math.pow(p,2))/(2*i*o)),r=360*a/(2*Math.PI)}else a=l-c===0?Math.PI/2:Math.atan((h-d)/(l-c)),r=180*a/Math.PI;return{rad:a,deg:r}}getAngle(e,t){return{rad:Math.atan2(t.y-e.y,t.x-e.x),deg:180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}}middle(e,t,i,o){let s=parseInt(e),n=parseInt(t);return{x:(s+parseInt(i))/2,y:(n+parseInt(o))/2}}triangleArea(e,t,i){let o=0,s=0,n=0,a=0;return o=Ki(e,t),s=Ki(t,i),n=Ki(i,e),a=(o+s+n)/2,Math.sqrt(a*(a-o)*(a-s)*(a-n))}gap(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)}pDistance(e,t,i){let o,s,n=e.x,a=e.y,r=t.x,l=t.y,h=i.x,c=i.y,d=h-r,p=c-l,m=d*d+p*p,u=-1;0!==m&&(u=((n-r)*d+(a-l)*p)/m),u<0?(o=r,s=l):u>1?(o=h,s=c):(o=r+u*d,s=l+u*p);let g=n-o,f=a-s;return{x:o,y:s,distance:Math.sqrt(g*g+f*f)}}nearPointOnEquation(e,t){let i={},o={};return"h"===e.A?{x:t.x,y:e.B,distance:Math.abs(e.B-t.y)}:"v"===e.A?{x:e.B,y:t.y,distance:Math.abs(e.B-t.x)}:(i.x=t.x,i.y=e.A*t.x+e.B,o.x=(t.y-e.B)/e.A,o.y=t.y,this.pDistance(t,i,o))}circlePath(e,t,i){return"M "+e+" "+t+" m -"+i+", 0 a "+i+","+i+" 0 1,0 "+2*i+",0 a "+i+","+i+" 0 1,0 -"+2*i+",0"}perpendicularEquation(e,t,i){return"string"!=typeof e.A?{A:-1/e.A,B:i- -1/e.A*t}:"h"===e.A?{A:"v",B:t}:"v"===e.A?{A:"h",B:i}:void 0}angleBetweenEquations(e,t){return"h"===e&&(e=0),"h"===t&&(t=0),"v"===e&&(e=1e4),"v"===t&&(t=1e4),360*Math.atan(Math.abs((t-e)/(1+e*t)))/(2*Math.PI)}vectorXY(e,t){return{x:t.x-e.x,y:t.y-e.y}}vectorDeter(e,t){return e.x*t.y-e.y*t.x}btwn(e,t,i){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&(e=Math.round(e),t=Math.round(t),i=Math.round(i)),e>=t&&e<=i||e>=i&&e<=t}getNodeFromPath(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],o=e.getPathData(),s=[],n=0;for(let a=0;a<o.length;a++)o[a].values[0]===t.x&&o[a].values[1]===t.y&&"Z"!==o[a].type&&-1===i.indexOf(a)&&(n++,s.push(a));return 0!==n&&s}polygonIntoWalls(e,t){let i=t,o=[],s=[];for(let r=0;r<i.length;r++)s.push({x:e[i[r]].x,y:e[i[r]].y});for(let r=0;r<i.length-1;r++)for(let t=0;t<e[i[r+1]].segment.length;t++)for(let s=0;s<e[i[r]].segment.length;s++)e[i[r+1]].segment[t]===e[i[r]].segment[s]&&o.push({x1:e[i[r]].x,y1:e[i[r]].y,x2:e[i[r+1]].x,y2:e[i[r+1]].y,segment:e[i[r+1]].segment[t]});o=o.filter(((e,t,i)=>i.findIndex((t=>e.segment===t.segment))===t));let n=[],a=[];for(let r=0;r<o.length;r++){let e,t=[],i=o[r];e=r<o.length-1?o[r+1]:o[0];let l=Math.atan2(i.y2-i.y1,i.x2-i.x1),h=Math.atan2(e.y2-e.y1,e.x2-e.x1),c=this.mainComponentThis.WALLS[i.segment].thick/2*Math.sin(l),d=this.mainComponentThis.WALLS[i.segment].thick/2*Math.cos(l),p=this.mainComponentThis.WALLS[e.segment].thick/2*Math.sin(h),m=this.mainComponentThis.WALLS[e.segment].thick/2*Math.cos(h),u=qi(i.x1+c,i.y1-d,i.x2+c,i.y2-d),g=qi(i.x1-c,i.y1+d,i.x2-c,i.y2+d),f=qi(e.x1+p,e.y1-m,e.x2+p,e.y2-m),b=qi(e.x1-p,e.y1+m,e.x2-p,e.y2+m);l*=180/Math.PI,h*=180/Math.PI,u.A!==f.A?(t.push(zi(u,f,"object")),t.push(zi(g,b,"object"))):(t.push({x:i.x2+c,y:i.y2-d}),t.push({x:i.x2-c,y:i.y2+d}));for(let o=0;o<t.length;o++)Ni(t[o],s)?n.push(t[o]):a.push(t[o])}return n.push(n[0]),a.push(a[0]),{inside:n,outside:a}}area(e){if(e.length<2)return!1;let t=0,i=e.length-1;for(let o=0;o<e.length;o++)t+=(e[i].x+e[o].x)*(e[i].y-e[o].y),i=o;return t/=2,Math.abs(t.toFixed(2))}areaRoom(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=t,s=0,n=o.length-2;for(let a=0;a<o.length-1;a++)s+=(e[o[n]].x+e[o[a]].x)*(e[o[n]].y-e[o[a]].y),n=a;return s/=2,Math.abs(s.toFixed(i))}junctionList(e){let t=[],i=[];for(let s=0;s<e.length;s++){let o=qi(e[s].start.x,e[s].start.y,e[s].end.x,e[s].end.y);for(let n=0;n<e.length;n++)if(n!==s){let a,r=qi(e[n].start.x,e[n].start.y,e[n].end.x,e[n].end.y);(a=zi(o,r,"object"))&&(Mi(e[s].end,e[n].start)||Mi(e[s].start,e[n].end)?(Mi(e[s].end,e[n].start)&&t.push({segment:s,child:n,values:[e[n].start.x,e[n].start.y],type:"natural"}),Mi(e[s].start,e[n].end)&&t.push({segment:s,child:n,values:[e[s].start.x,e[s].start.y],type:"natural"})):this.btwn(a.x,e[s].start.x,e[s].end.x,"round")&&this.btwn(a.y,e[s].start.y,e[s].end.y,"round")&&this.btwn(a.x,e[n].start.x,e[n].end.x,"round")&&this.btwn(a.y,e[n].start.y,e[n].end.y,"round")&&t.push({segment:s,child:n,values:[a.x,a.y],type:"intersection"})),Math.abs(o.A)!==Math.abs(r.A)&&o.A!==r.A||o.B!==r.B||(Mi(e[s].end,e[n].start)&&t.push({segment:s,child:n,values:[e[n].start.x,e[n].start.y],type:"natural"}),Mi(e[s].start,e[n].end)&&t.push({segment:s,child:n,values:[e[s].start.x,e[s].start.y],type:"natural"}),Mi(e[s].start,e[n].start)&&Mi(e[s].end,e[n].end)||(Mi(e[s].start,e[n].start)?i.push({segment:s,child:n,values:[e[s].start.x,e[s].start.y],type:"natural"}):Mi(e[s].end,e[n].end)&&i.push({segment:s,child:n,values:[e[s].end.x,e[s].end.y],type:"natural"})))}}let o=i.filter((e=>!t.find((t=>Mi({x:e.values[0],y:e.values[1]},{x:t.values[0],y:t.values[1]})))));for(let s=0;s<o.length;s++)t.push(o[s]);return t}vertexList(e){let t,i=[];for(let o=0;o<e.length;o++){t=!0;for(let s=0;s<i.length;s++){if(Math.round(e[o].values[0])===Math.round(i[s].x)&&Math.round(e[o].values[1])===Math.round(i[s].y)){t=!1,i[s].segment.push(e[o].segment);break}t=!0}t&&i.push({x:Math.round(e[o].values[0]),y:Math.round(e[o].values[1]),realX:e[o].values[0],realY:e[o].values[1],segment:[e[o].segment],bypass:0,type:e[o].type})}for(let o=0;o<i.length;o++){i[o].child=[],i[o].removed=[];for(let e=0;e<i[o].segment.length;e++)for(let t=0;t<i.length;t++)if(t!==o)for(let s=0;s<i[t].segment.length;s++)i[t].segment[s]===i[o].segment[e]&&i[o].child.push({id:t,angle:Math.floor(this.getAngle(i[o],i[t]).deg)})}return i}arrayCompare(e,t,i){let o=0,s=0;"pop"===i&&(o=1),"shift"===i&&(s=1);let n=e.length-o-s;for(let a=s;a<e.length-o;a++)for(let i=s;i<t.length-o;i++)e[a]===t[i]&&n--;return 0===n}vectorVertex(e,t,i){let o=this.vectorXY(e,t),s=this.vectorXY(t,i),n=Math.sqrt(o.x*o.x+o.y*o.y),a=Math.sqrt(s.x*s.x+s.y*s.y),r=(o.x*s.x+o.y*s.y)/(n*a),l=o.x*s.y-o.y*s.x;return Math.sign(l)*Math.acos(r)*(180/Math.PI)}segmentTree(e,t){let i=[e],o=[],s=t.length,n=e;return this.tree(i,n,s,t,o),o}tree(e,t,i,o,s){if(0===e.length)return;let n=[];i--;for(let a=0;a<e.length;a++){let r=!0,l=e[a],h=l.toString().split("-"),c=parseInt(h[h.length-1]);for(let e=0;e<o[c].child.length;e++)if(o[c].child[e].id===t&&i<o.length-1&&h.length>2){s.push(l+"-"+t),r=!1;break}if(r){let e=-1,s=1/0,a=0,r=0;if(1===o[c].child.length)c===t&&i===o.length-1&&n.push(l+"-"+o[c].child[0].id),c!==t&&i<o.length-1&&n.push(l+"-"+o[c].child[0].id);else{for(let n=0;n<o[c].child.length&&o[c].child.length>0;n++){if(c===t&&i===o.length-1){let t=this.vectorVertex({x:0,y:-1},o[c],o[o[c].child[n].id]);t>=a&&(r=1,a=t,e=o[c].child[n].id),-1===Math.sign(t)&&0===r&&(t<s&&Math.sign(s)>-1&&(s=t,e=o[c].child[n].id),t>s&&-1===Math.sign(s)&&(s=t,e=o[c].child[n].id))}if(c!==t&&h[h.length-2]!==o[c].child[n].id.toString()&&i<o.length-1){let t=this.vectorVertex(o[h[h.length-2]],o[c],o[o[c].child[n].id]);t<s&&0===r&&(s=t,e=o[c].child[n].id),-1===Math.sign(t)&&(r=1,t<=s&&(s=t,e=o[c].child[n].id))}}-1!==e&&n.push(l+"-"+e)}}}i>0&&this.tree(n,t,i,o,s)}polygonize(e){let t=this.junctionList(e),i=this.vertexList(t,e),o=[];for(let g=0;g<i.length;g++)for(let e=0;e<i[g].child.length;e++)o.push([g,i[g].child[e].id]);let s,n,a=[];for(let g=0;g<o.length;g++){let e=0,t=1/0;for(let o=0;o<i.length;o++)i[o].x<t&&i[o].child.length>1&&0===i[o].bypass&&(t=i[o].x,e=o),i[o].x===t&&i[o].child.length>1&&0===i[o].bypass&&i[o].y>i[e].y&&(t=i[o].x,e=o);if(s=this.segmentTree(e,i),0===s.length&&(i[e].bypass=1),s.length>0){let t=s[0].split("-"),o=this.areaRoom(i,t),l=parseInt(o);n=!0;for(let s=0;s<a.length;s++)if(this.arrayCompare(a[s].way,t,"pop")){n=!1,i[e].bypass=1;break}if(l<360&&(i[e].bypass=1),0===i[e].bypass){let o=this.polygonIntoWalls(i,t),s=this.area(o.inside),n=this.area(o.outside),h=[];for(let e=0;e<t.length;e++)h.push({x:i[t[e]].x,y:i[t[e]].y,realX:i[t[e]].realX,realY:i[t[e]].realY});o.inside.length!==o.outside.length?a.push({way:t,coords:h,coordsOutside:o.outside,coordsInside:o.inside,coordsInsideWithOrphans:o.inside,area:s,outsideArea:n,realArea:l}):a.push({way:t,coords:o.inside,coordsOutside:o.outside,coordsInside:o.inside,coordsInsideWithOrphans:o.inside,area:s,outsideArea:n,realArea:l});for(let a=0;a<i[e].child.length;a++)i[e].child[a].id===t[1]&&i[e].child.splice(a,1);for(let a=0;a<i[t[1]].child.length;a++)i[t[1]].child[a].id===e&&i[t[1]].child.splice(a,1);do{bn.log("Do while loop");var r=0;for(let e=0;e<i.length;e++)if(1===i[e].child.length){r=1,i[e].child=[];for(let t=0;t<i.length;t++)for(let o=0;o<i[t].child.length;o++)i[t].child[o].id===e&&i[t].child.splice(o,1)}}while(1===r)}}}bn.log(a);let l=[];for(let g=0;g<a.length;g++){let e=[],t=[];for(let i=0;i<a.length;i++)if(g!==i){let o=a[i].coordsInsideWithOrphans,s=o.length;n=!0;for(let e=0;e<s&&(n=Ei(o[e],a[g].coordsInsideWithOrphans),n);e++);n&&(e.push(i),t.push(a[i]),a[g].area=a[g].area-a[i].outsideArea)}a[g].inside=e,a[g].insidePolygonsObjects=t,e.length>0&&l.push({polygon:a[g],polygonIndex:g})}let h={};bn.log("insidePolygons "+l.length),bn.log(l);for(let g=0;g<l.length;g++)if(void 0===h[l[g].polygonIndex]){let e=!1,t=[];for(let i=0;i<l.length;i++)g!==i&&0===this.diffObjIntoArray(l[g].polygon.coordsInsideWithOrphans,l[i].polygon.coordsInsideWithOrphans)&&(e=!0,h[l[i].polygonIndex]=i,t.push(l[i].polygonIndex));if(e){let e;for(let i=0;i<t.length;i++)(e=l[g].polygon.inside.findIndex((e=>e===t[i])))&&(l[g].polygon.inside.splice(e,1),l[g].polygon.insidePolygonsObjects.splice(e,1))}}const c=Object.keys(h);let d=[],p=[];for(let g=0;g<c.length;g++)d.push(c[g]),p.push(h[c[g]]);p.sort(((e,t)=>t-e));for(let g=0;g<p.length;g++)bn.log("Delete duplicate inside polygon index "+p[g]),l.splice(p[g],1);let m=[],u={};for(let g=0;g<l.length;g++)if(l[g].polygon.inside.length>0){let e=!1,t={};l[g].polygon.coordsInsideWithOrphans.forEach((e=>t["".concat(e.x,"|").concat(e.y)]=!0));for(let i=0;i<l[g].polygon.inside.length;i++){if(0!==a[l[g].polygon.inside[i]].coordsInsideWithOrphans.filter((e=>t["".concat(e.x,"|").concat(e.y)])).length){bn.log("Pronadene zajednicke koordinate s inside poligonom"+g),e=!0;break}{let t=!1;for(let e=0;e<a[l[g].polygon.inside[i]].coordsInsideWithOrphans.length;e++)if(!Ni(a[l[g].polygon.inside[i]].coordsInsideWithOrphans[e],l[g].polygon.coordsInsideWithOrphans)){t=!0;break}if(t){bn.log("Pronadene tocke inside poligona koje nisu unutar glavnoga"+g),e=!0;break}}}e||(bn.log("Nemoj brisati poligon "+g),m.push(l[g].polygon))}d.sort(((e,t)=>t-e));for(let g=0;g<d.length;g++)a.splice(d[g],1);if(d.length>0)for(let g=0;g<m.length;g++){for(let e=0;e<m[g].inside.length;e++)m[g].inside[e]=a.findIndex((t=>t===m[g].insidePolygonsObjects[e]));delete m[g].insidePolygonsObjects}for(let g=0;g<m.length;g++)u[a.findIndex((e=>e===m[g]))]=!0;return{polygons:a,vertex:i,roomsWithInsideRoomsNoDeleteIndexes:u}}diffArray(e,t){return e.concat(t).filter((i=>e.includes(i)&&t.includes(i)?void 0:i))}diffObjIntoArray(e,t){let i=0;for(let s=0;s<e.length-1;s++)for(let o=0;o<t.length-1;o++)Ii(e[s],t[o])&&i++;let o=e.length-1;return o<t.length-1&&(o=t.length),o-i}polygonVisualCenter(e){let t,i,o,s,n=e.coordsInsideWithOrphans,a=e.inside,r=[];for(let u=0;u<n.length;u++){let e=n[u];(!u||e.x<t)&&(t=e.x),(!u||e.y<i)&&(i=e.y),(!u||e.x>o)&&(o=e.x),(!u||e.y>s)&&(s=e.y)}let l=o-t,h=s-i,c=Math.floor(l/10),d=Math.floor(h/10);for(let u=0;u<10;u++)for(let e=0;e<10;e++){let o=t+e*c,s=i+u*d;if(Ni({x:o,y:s},n)){let e=!0;for(let t=0;t<a.length;t++)if(Ni({x:o,y:s},this.mainComponentThis.ROOM[a[t]].coordsOutside)){e=!1;break}e&&r.push({x:o,y:s})}}let p,m=0;for(let u=0;u<r.length;u++){let e=1/0;for(let t=0;t<n.length-1;t++){let i=this.pDistance(r[u],n[t],n[t+1]);i.distance<e&&(e=i.distance)}e>m&&(p=u,m=e)}return r[p]}textOnDiv(e,t,i,o){if("undefined"!=typeof t){let s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttributeNS(null,"x",t.x),s.setAttributeNS(null,"y",t.y),s.setAttribute("style","fill:"+i.color+";font-weight:"+i.fontWeight+";font-size:"+i.fontSize),s.setAttributeNS(null,"text-anchor","middle"),s.textContent=e,bn.log("Text ond div"),o.appendChild(s)}}mirrorPointAroundLine(e,t,i){let o,s;if("v"===i.A)o=2*i.B-e,s=t;else if("h"===i.A)o=e,s=2*i.B-t;else{const n=i.A,a=i.B,r=n*n+1;o=(e+n*(t-a))/r,s=(n*e+n*n*t/r+a)/r}return{x:o,y:s}}polygonPolygonIntersect(e,t){for(var i=0;i<e.length;i++){var o,s=e[i];if(o=i==e.length-1?e[0]:e[i+1],!Mi(s,o)&&this.linePolygonIntersect(s.x,s.y,o.x,o.y,t))return!0}return!1}linePolygonIntersect(e,t,i,o,s){for(var n=0;n<s.length;n++){var a,r=s[n];if(a=n==s.length-1?s[0]:s[n+1],this.lineLineIntersect(e,t,i,o,r.x,r.y,a.x,a.y))return!0}return!1}lineLineIntersect(e,t,i,o,s,n,a,r){const l=(e,t,i)=>{var o=e.x,s=e.y,n=t.x,a=t.y,r=i.x;return(i.y-s)*(n-o)>(a-s)*(r-o)};var h={x:e,y:t},c={x:i,y:o},d={x:s,y:n},p={x:a,y:r};return l(h,d,p)!=l(c,d,p)&&l(h,c,d)!=l(h,c,p)}};class Cn extends o.Component{constructor(e){let{patternId:t,roomId:i,textureName:o,positionX:s,positionY:n,width:a,height:r,floorTextureRepeatCount:l,floorTextureRepeatDirection:h}=e;super(),this.patternId=t,this.roomId=i,this.textureName=o,this.positionX=s,this.positionY=n,this.width=a,this.height=r,this.textureAspectRatio=Kt[this.textureName].width/Kt[this.textureName].height,this.floorTextureRepeatCount=l,this.floorTextureRepeatDirection=h}render(){const e="horizontal"===this.floorTextureRepeatDirection?this.height:"vertical"===this.floorTextureRepeatDirection?this.width:this.width>this.height?this.height:this.width;let t,i;return e===this.height?(i=e/this.floorTextureRepeatCount,t=i*this.textureAspectRatio):(t=e/this.floorTextureRepeatCount,i=t/this.textureAspectRatio),(0,l.jsx)("pattern",{id:this.patternId,patternUnits:"userSpaceOnUse",width:t,height:i,x:this.positionX,y:this.positionY,children:(0,l.jsx)("image",{href:"".concat("https://app.klet3d.com","/textures/").concat(this.textureName,".png"),x:"0",y:"0",width:t,height:i,preserveAspectRatio:"none"})})}}const xn=Cn;const yn=class{constructor(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Unknown",n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6?arguments[6]:void 0;this.wallId=(0,fn.v4)(),this.thick=o,this.start=e,this.end=t,this.type=i,this.parent=null,this.child=null,this.angle=0,this.equations={},this.coords=[],this.backUp=!1,this.material=n?n.material:s,this.interiorPlaneMaterial=n?n.interiorPlaneMaterial:"Color"===s?Ee[0].defaultColorValue:s,this.exteriorPlaneMaterial=n?n.exteriorPlaneMaterial:"Color"===s?Ee[1].defaultColorValue:s,this.wallHeight=n?n.wallHeight:a,this.startHeight=this.wallHeight,this.endHeight=this.wallHeight}};var Sn=i(1317);const _n=class{constructor(e,t,i,o,s,n,a,r,l){var h=this;this.createAndShowBoxMeasures=function(e,t,i,o,s){let n,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},r=t-e,l=o-i,c=(t-e)/h.mainComponentThis.meter,d=(o-i)/h.mainComponentThis.meter,p="m"+(t+40)+","+i;p+=" l60,0 m-40,10 l10,-10 l10,10 m-10,-10",p=p+" l0,"+l,p+=" m-30,0 l60,0 m-40,-10 l10,10 l10,-10",p=p+"M"+e+","+(i-40),p+=" l0,-60 m10,40 l-10,-10 l10,-10 m-10,10",p=p+" l"+r+",0",p+=" m0,30 l0,-60 m-10,40 l10,-10 l-10,-10",ji(s.current),h.mainComponentThis.qSVG.create(s,"path",{d:p,stroke:a.color||"#555",fill:"none","stroke-width":a.strokeWidth||.5,"stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":4,"fill-rule":"nonzero"}),n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttributeNS(null,"x",t+70),n.setAttributeNS(null,"y",(o+i)/2+35),n.setAttributeNS(null,"fill",a.color||"#555"),n.setAttributeNS(null,"text-anchor","middle"),n.textContent=Qi(d,h.mainComponentThis.measureSystemContext.userUnit,"meter","feet",2,!0,!0),n.setAttribute("transform","rotate(270 "+(t+70)+","+(o+i)/2+")"),s.current.appendChild(n),n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttributeNS(null,"x",(t+e)/2),n.setAttributeNS(null,"y",i-95),n.setAttributeNS(null,"fill",a.color||"#555"),n.setAttributeNS(null,"text-anchor","middle"),n.textContent=Qi(c,h.mainComponentThis.measureSystemContext.userUnit,"meter","feet",2,!0,!0),s.current.appendChild(n)},this.isStartStopWallPoint=(e,t)=>{const i=T(e.x,0),o=T(e.y,0),s=T(t.start.x,0),n=T(t.start.y,0),a=T(t.end.x,0),r=T(t.end.y,0);return i===s&&o===n||i===a&&o===r},this.sliceWall=(e,t)=>{let i=new yn(t.start,e,"normal",t.thick,t.material,t);i.equations.base=t.equations.base;let o=new yn(e,t.end,"normal",t.thick,t.material,t);return o.equations.base=t.equations.base,[i,o]},this.onWallAddedSlicing=e=>{let t=[e],i=[],o={};if(e.equations.base){for(let e=0;e<t.length;e++){let s=!1;for(let n=0;n<this.mainComponentThis.WALLS.length-1;n++)if(o[n])Sn.log("Zid vec presijecen");else if(this.mainComponentThis.WALLS[n].equations.base){const a=zi(t[e].equations.base,this.mainComponentThis.WALLS[n].equations.base,"object");if(a&&this.mainComponentThis.qSVG.btwn(a.x,t[e].start.x,t[e].end.x,"round")&&this.mainComponentThis.qSVG.btwn(a.y,t[e].start.y,t[e].end.y,"round")&&this.mainComponentThis.qSVG.btwn(a.x,this.mainComponentThis.WALLS[n].start.x,this.mainComponentThis.WALLS[n].end.x,"round")&&this.mainComponentThis.qSVG.btwn(a.y,this.mainComponentThis.WALLS[n].start.y,this.mainComponentThis.WALLS[n].end.y,"round")){if(o[n]=!0,!this.isStartStopWallPoint(a,t[e])){Sn.log("Sijeci zid koji se obraduje");const o=this.sliceWall(a,t[e],null);if(t.push(o[0],o[1]),this.isStartStopWallPoint(a,this.mainComponentThis.WALLS[n]))i.push(this.mainComponentThis.WALLS[n]);else{Sn.log("SIjeci postojeci 2"),i=i.filter((e=>e!==this.mainComponentThis.WALLS[n]));const e=this.sliceWall(a,this.mainComponentThis.WALLS[n]);i.push(e[0],e[1])}s=!0;break}if(this.isStartStopWallPoint(a,this.mainComponentThis.WALLS[n]))Sn.log("Ne sijeci postojeci"),i.push(this.mainComponentThis.WALLS[n]);else{Sn.log("Sijeci postojeci"),i=i.filter((e=>e!==this.mainComponentThis.WALLS[n]));const e=this.sliceWall(a,this.mainComponentThis.WALLS[n]);i.push(e[0],e[1])}Sn.log(i)}else Sn.log("Ne sijeku se"),i.push(this.mainComponentThis.WALLS[n])}else Sn.log("Nema equation"),i.push(this.mainComponentThis.WALLS[n]);!s&&i.push(t[e])}i=i.filter(((e,t,i)=>i.findIndex((t=>e===t))===t))}else i=this.mainComponentThis.WALLS;Sn.log("Final wals after slicing"),Sn.log(i),this.mainComponentThis.WALLS=i},this.removeZeroLengthWallsAndSliceExistingWalls=()=>{Sn.log("Walls count before filtering zero length "+this.mainComponentThis.WALLS.length);let e=this.mainComponentThis.WALLS.filter((e=>!Mi(e.start,e.end)));this.mainComponentThis.WALLS=[],Sn.log("Walls count before slicing "+e.length);for(let t=0;t<e.length;t++)this.mainComponentThis.WALLS.push(e[t]),this.onWallAddedSlicing(e[t]);Sn.log("Walls count befotre filtering duplicates"+this.mainComponentThis.WALLS.length),this.mainComponentThis.WALLS=this.mainComponentThis.WALLS.filter(((e,t,i)=>i.findIndex((t=>Mi(e.start,t.start)&&Mi(e.end,t.end)))===t)),Sn.log("Walls count after filtering duplicates"+this.mainComponentThis.WALLS.length)},this.boxWall=e,this.boxArea=t,this.panel=i,this.boxRoom=o,this.boxSurface=s,this.boxRib=n,this.areaValue=a,this.boxScale=r,this.mainComponentThis=l}getWallNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];for(let o in this.mainComponentThis.WALLS)Ii(this.mainComponentThis.WALLS[o],t)||(Ii(this.mainComponentThis.WALLS[o].start,e)&&i.push({wall:this.mainComponentThis.WALLS[o],type:"start"}),Ii(this.mainComponentThis.WALLS[o].end,e)&&i.push({wall:this.mainComponentThis.WALLS[o],type:"end"}));return 0!==i.length&&i}wallsComputing(e){let t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0;(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&ji(o);for(let s=0;s<e.length;s++)t=e[s],null!=t.parent&&(Ii(t.parent.start,t.start)||Ii(t.parent.end,t.start)||(t.parent=null)),null!=t.child&&(Ii(t.child.start,t.end)||Ii(t.child.end,t.end)||(t.child=null));for(let s=0;s<e.length;s++){let n,a,r,l,h,c;if(t=e[s],null!=t.parent)Ii(t.parent.start,t.start)&&(n=t.parent,a=n.end,r=n.start),Ii(t.parent.end,t.start)&&(n=t.parent,a=n.start,r=n.end);else{let e=this.getWallNode(t.start,t);for(let o in e){let s=this.createEquationFromWall(e[o].wall),l=90;"move"===i&&(l=this.mainComponentThis.qSVG.angleBetweenEquations(s.A,this.mainComponentThis.equation2.A)),"start"===e[o].type&&null==e[o].wall.parent&&l>20&&l<160&&(t.parent=e[o].wall,e[o].wall.parent=t,n=t.parent,a=n.end,r=n.start),"end"===e[o].type&&null==e[o].wall.child&&l>20&&l<160&&(t.parent=e[o].wall,e[o].wall.child=t,n=t.parent,a=n.start,r=n.end)}}if(null!=t.child)Ii(t.child.end,t.end)?(l=t.child,h=l.end,c=l.start):(l=t.child,h=l.start,c=l.end);else{let e=this.getWallNode(t.end,t);for(let o in e){let s=this.createEquationFromWall(e[o].wall),n=90;"move"===i&&(n=this.mainComponentThis.qSVG.angleBetweenEquations(s.A,this.mainComponentThis.equation2.A)),"end"===e[o].type&&null==e[o].wall.child&&n>20&&n<160&&(t.child=e[o].wall,e[o].wall.child=t,l=t.child,h=l.end,c=l.start),"start"===e[o].type&&null==e[o].wall.parent&&n>20&&n<160&&(t.child=e[o].wall,e[o].wall.parent=t,l=t.child,h=l.start,c=l.end)}}let d=Math.atan2(t.end.y-t.start.y,t.end.x-t.start.x);t.angle=d;let p,m,u,g,f=t.thick/2*Math.sin(d),b=t.thick/2*Math.cos(d),w=qi(t.start.x+f,t.start.y-b,t.end.x+f,t.end.y-b),C=qi(t.start.x-f,t.start.y+b,t.end.x-f,t.end.y+b),x=qi(t.start.x,t.start.y,t.end.x,t.end.y);if(t.equations={up:w,down:C,base:x},null==t.parent)m=this.mainComponentThis.qSVG.perpendicularEquation(w,t.start.x,t.start.y),u=zi(w,m,"object"),g=zi(C,m,"object"),t.coords=[u,g],p="M"+u.x+","+u.y+" L"+g.x+","+g.y+" ";else{let e=this.mainComponentThis.qSVG.perpendicularEquation(w,t.start.x,t.start.y),i=Math.atan2(r.y-a.y,r.x-a.x),o=n.thick/2*Math.sin(i),s=n.thick/2*Math.cos(i),l=qi(a.x+o,a.y-s,r.x+o,r.y-s),h=qi(a.x-o,a.y+s,r.x-o,r.y+s);if(Math.abs(i-d)>.09){u=zi(w,l,"object"),g=zi(C,h,"object"),w.A===l.A&&(u={x:t.start.x+f,y:t.start.y-b},g={x:t.start.x-f,y:t.start.y+b}),this.mainComponentThis.qSVG.gap(u,{x:r.x,y:r.y})>1e3&&(u=zi(e,w,"object"),g=zi(e,C,"object"))}Math.abs(i-d)<=.09&&(u=zi(e,w,"object"),g=zi(e,C,"object")),t.coords=[u,g],p="M"+u.x+","+u.y+" L"+g.x+","+g.y+" "}if(null==t.child)m=this.mainComponentThis.qSVG.perpendicularEquation(w,t.end.x,t.end.y),u=zi(w,m,"object"),g=zi(C,m,"object"),t.coords.push(g,u),p=p+"L"+g.x+","+g.y+" L"+u.x+","+u.y+" Z";else{let e=this.mainComponentThis.qSVG.perpendicularEquation(w,t.end.x,t.end.y),i=Math.atan2(c.y-h.y,c.x-h.x),o=l.thick/2*Math.sin(i),s=l.thick/2*Math.cos(i),n=qi(h.x+o,h.y-s,c.x+o,c.y-s),a=qi(h.x-o,h.y+s,c.x-o,c.y+s);if(Math.abs(i-d)>.09){u=zi(w,n,"object"),g=zi(C,a,"object"),w.A===n.A&&(u={x:t.end.x+f,y:t.end.y-b},g={x:t.end.x-f,y:t.end.y+b}),this.mainComponentThis.qSVG.gap(u,{x:h.x,y:h.y})>1e3&&(u=zi(w,e,"object"),g=zi(C,e,"object"))}Math.abs(i-d)<=.09&&(u=zi(w,e,"object"),g=zi(C,e,"object")),t.coords.push(g,u),p=p+"L"+g.x+","+g.y+" L"+u.x+","+u.y+" Z"}t.graph=this.makeWall(p,t.material),o.appendChild(t.graph)}}makeWall(e){return this.mainComponentThis.qSVG.create("none","path",{d:e,stroke:"none",fill:"#666666","stroke-width":1,"stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":4,"fill-rule":"nonzero"})}architect(e){return this.wallsComputing(e,!1,this.mainComponentThis.boxWall.current),this.mainComponentThis.Rooms=this.mainComponentThis.qSVG.polygonize(e),ji(this.boxRoom.current),ji(this.boxSurface.current),this.roomMaker(this.mainComponentThis.Rooms),!0}nearWallNode(e){let t,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=1/0;for(let a=0;a<this.mainComponentThis.WALLS.length;a++)if(-1===s.indexOf(this.mainComponentThis.WALLS[a])){let o=this.mainComponentThis.WALLS[a].start,s=this.mainComponentThis.WALLS[a].end,r=Ki(o,e);r<n&&(t=o,n=r,i=a),r=Ki(s,e),r<n&&(t=s,n=r,i=a)}return n<=o&&{x:t.x,y:t.y,bestWall:i}}rayCastingWall(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mainComponentThis.WALLS,o=[];for(let s=0;s<i.length;s++)if(4===i[s].coords.length){let t=[];for(let e=0;e<4;e++)t.push({x:i[s].coords[e].x,y:i[s].coords[e].y});Ni(e,t)&&o.push(i[s])}return 0!==o.length&&(t||1===o.length?o[0]:o)}stickOnWall(e){if(0===this.mainComponentThis.WALLS.length)return!1;let t=1/0,i={};if(0===this.mainComponentThis.WALLS.length)return!1;for(let s=0;s<this.mainComponentThis.WALLS.length;s++){let o=qi(this.mainComponentThis.WALLS[s].coords[0].x,this.mainComponentThis.WALLS[s].coords[0].y,this.mainComponentThis.WALLS[s].coords[3].x,this.mainComponentThis.WALLS[s].coords[3].y),n=this.mainComponentThis.qSVG.nearPointOnEquation(o,e),a=qi(this.mainComponentThis.WALLS[s].coords[1].x,this.mainComponentThis.WALLS[s].coords[1].y,this.mainComponentThis.WALLS[s].coords[2].x,this.mainComponentThis.WALLS[s].coords[2].y),r=this.mainComponentThis.qSVG.nearPointOnEquation(a,e);n.distance<t&&this.mainComponentThis.qSVG.btwn(n.x,this.mainComponentThis.WALLS[s].coords[0].x,this.mainComponentThis.WALLS[s].coords[3].x)&&this.mainComponentThis.qSVG.btwn(n.y,this.mainComponentThis.WALLS[s].coords[0].y,this.mainComponentThis.WALLS[s].coords[3].y)&&(t=n.distance,i={wall:this.mainComponentThis.WALLS[s],x:n.x,y:n.y,distance:n.distance}),r.distance<t&&this.mainComponentThis.qSVG.btwn(r.x,this.mainComponentThis.WALLS[s].coords[1].x,this.mainComponentThis.WALLS[s].coords[2].x)&&this.mainComponentThis.qSVG.btwn(r.y,this.mainComponentThis.WALLS[s].coords[1].y,this.mainComponentThis.WALLS[s].coords[2].y)&&(t=r.distance,i={wall:this.mainComponentThis.WALLS[s],x:r.x,y:r.y,distance:r.distance})}let o=this.nearVertice(e);if(o.distance<t){let e=qi(o.number.coords[0].x,o.number.coords[0].y,o.number.coords[3].x,o.number.coords[3].y),s=this.mainComponentThis.qSVG.nearPointOnEquation(e,o),n=qi(o.number.coords[1].x,o.number.coords[1].y,o.number.coords[2].x,o.number.coords[2].y),a=this.mainComponentThis.qSVG.nearPointOnEquation(n,o);s.distance<t&&this.mainComponentThis.qSVG.btwn(s.x,o.number.coords[0].x,o.number.coords[3].x)&&this.mainComponentThis.qSVG.btwn(s.y,o.number.coords[0].y,o.number.coords[3].y)&&(t=s.distance,i={wall:o.number,x:s.x,y:s.y,distance:s.distance}),a.distance<t&&this.mainComponentThis.qSVG.btwn(a.x,o.number.coords[1].x,o.number.coords[2].x)&&this.mainComponentThis.qSVG.btwn(a.y,o.number.coords[1].y,o.number.coords[2].y)&&(t=a.distance,i={wall:o.number,x:a.x,y:a.y,distance:a.distance})}return i}objFromWall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.OBJDATA,i=[];for(let o=0;o<t.length;o++){let s;if("inWall"===t[o].family||"onWall"===t[o].family){let n=qi(e.start.x,e.start.y,e.end.x,e.end.y);s=this.mainComponentThis.qSVG.nearPointOnEquation(n,t[o]),s.distance<.01&&this.mainComponentThis.qSVG.btwn(t[o].x,e.start.x,e.end.x)&&this.mainComponentThis.qSVG.btwn(t[o].y,e.start.y,e.end.y)&&i.push(t[o])}}return i}createEquationFromWall(e){return qi(e.start.x,e.start.y,e.end.x,e.end.y)}rayCastingWalls(e,t){let i=[];for(let o=0;o<t.length;o++)if(4===t[o].coords.length){let s=[];for(let e=0;e<4;e++)s.push({x:t[o].coords[e].x,y:t[o].coords[e].y});Ni(e,s)&&i.push(t[o])}return 0!==i.length&&(1===i.length?i[0]:i)}inWallRib2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Sn.log("In wall rib2 pozvan"),t||ji(this.boxRib.current);let i,o=[],s=[];o.push(s),o.push(s);let n=e.angle*(180/Math.PI),a=this.objFromWall(e);o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[0],distance:0}),o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[1],distance:0});for(let r in a){let t=a[r];t.up=[this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.up,t.limit[0]),this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.up,t.limit[1])],t.down=[this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.down,t.limit[0]),this.mainComponentThis.qSVG.nearPointOnEquation(e.equations.down,t.limit[1])],i=Ki(e.coords[0],t.up[0])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:r,side:"up",coords:t.up[0],distance:i.toFixed(2)}),i=Ki(e.coords[0],t.up[1])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:r,side:"up",coords:t.up[1],distance:i.toFixed(2)}),i=Ki(e.coords[1],t.down[0])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:r,side:"down",coords:t.down[0],distance:i.toFixed(2)}),i=Ki(e.coords[1],t.down[1])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:r,side:"down",coords:t.down[1],distance:i.toFixed(2)})}i=Ki(e.coords[0],e.coords[3])/this.mainComponentThis.meter,o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[3],distance:i}),i=Ki(e.coords[1],e.coords[2])/this.mainComponentThis.meter,o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[2],distance:i}),o[0].sort((function(e,t){return(e.distance-t.distance).toFixed(2)})),o[1].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let r in o)for(let e=1;e<o[r].length;e++){let t=!0,i=-5,s=Math.abs(o[r][e-1].distance-o[r][e].distance),a=n;if(t){"down"===o[r][e-1].side&&(i=10-i),(a>89||a<-89)&&(a-=180,i="down"===o[r][e-1].side?-5:10-i),this.mainComponentThis.sizeText[e]=document.createElementNS("http://www.w3.org/2000/svg","text");let t=this.mainComponentThis.qSVG.middle(o[r][e-1].coords.x,o[r][e-1].coords.y,o[r][e].coords.x,o[r][e].coords.y);this.mainComponentThis.sizeText[e].setAttributeNS(null,"x",t.x),this.mainComponentThis.sizeText[e].setAttributeNS(null,"y",t.y+i),this.mainComponentThis.sizeText[e].setAttributeNS(null,"text-anchor","middle"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-family","roboto"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"stroke","#ffffff"),this.mainComponentThis.sizeText[e].textContent=Qi(s,this.mainComponentThis.measureSystemContext.userUnit),this.mainComponentThis.sizeText[e].textContent<1?(this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-size","0.8em"),this.mainComponentThis.sizeText[e].textContent=this.mainComponentThis.sizeText[e].textContent.substring(1,this.mainComponentThis.sizeText[e].textContent.length)):this.mainComponentThis.sizeText[e].setAttributeNS(null,"font-size","15px"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"stroke-width","0.4px"),this.mainComponentThis.sizeText[e].setAttributeNS(null,"fill","#666666"),this.mainComponentThis.sizeText[e].setAttribute("transform","rotate("+a+" "+t.x+","+t.y+")"),this.boxRib.current.appendChild(this.mainComponentThis.sizeText[e])}}}areSamePolygons(e,t){let i=this.mainComponentThis.qSVG.diffObjIntoArray(e.coordsInsideWithOrphans||e.coordsInside,t.coordsInsideWithOrphans||t.coordsInside);if(e.way.length===t.way.length||0===i){if(0===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length||0===i)return!0}else if(e.way.length===t.way.length+1){if(1===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length||2===i)return!0}else if(e.way.length===t.way.length-1&&1===this.mainComponentThis.qSVG.diffArray(e.way,t.way).length)return!0;return!1}roomMaker(e){this.mainComponentThis.globalArea=0,0===e.polygons.length&&(this.mainComponentThis.ROOM=[]);for(let s=0;s<e.polygons.length;s++){let t=!1;for(let i=0;i<this.mainComponentThis.ROOM.length;i++)if(this.areSamePolygons(e.polygons[s],this.mainComponentThis.ROOM[i])){t=!0,this.mainComponentThis.ROOM[i].area=e.polygons[s].area,this.mainComponentThis.ROOM[i].realRoomArea=Ji(e.polygons[s]),this.mainComponentThis.ROOM[i].inside=e.polygons[s].inside,this.mainComponentThis.ROOM[i].insideNoDelete=e.roomsWithInsideRoomsNoDeleteIndexes[s],this.mainComponentThis.ROOM[i].coords=e.polygons[s].coords,this.mainComponentThis.ROOM[i].coordsOutside=e.polygons[s].coordsOutside,this.mainComponentThis.ROOM[i].way=e.polygons[s].way,this.mainComponentThis.ROOM[i].coordsInside=e.polygons[s].coordsInside,this.mainComponentThis.ROOM[i].coordsInsideWithOrphans=e.polygons[s].coordsInsideWithOrphans;break}t||(this.mainComponentThis.ROOM.push({id:this.mainComponentThis.roomIdCounter,coords:e.polygons[s].coords,coordsOutside:e.polygons[s].coordsOutside,coordsInside:e.polygons[s].coordsInside,coordsInsideWithOrphans:e.polygons[s].coordsInside,inside:e.polygons[s].inside,insideNoDelete:e.roomsWithInsideRoomsNoDeleteIndexes[s],way:e.polygons[s].way,area:e.polygons[s].area,realRoomArea:Ji(e.polygons[s]),surface:"",name:"",floorTexture:"none",showSurface:!1,action:"add"}),this.mainComponentThis.roomIdCounter++)}let t=[];for(let s=0;s<this.mainComponentThis.ROOM.length;s++)if(this.mainComponentThis.ROOM[s].inside.length>0&&!this.mainComponentThis.ROOM[s].insideNoDelete)t.push(s);else{let i=!1;for(let t=0;t<e.polygons.length;t++)if(this.areSamePolygons(e.polygons[t],this.mainComponentThis.ROOM[s])){i=!0;break}i||t.push(s)}t.sort((function(e,t){return t-e}));for(let s=0;s<t.length;s++)this.mainComponentThis.ROOM.splice(t[s],1);let i={};for(let s=0;s<this.mainComponentThis.ROOM.length;s++)if(!i[s])for(let e=0;e<this.mainComponentThis.ROOM.length;e++)s!==e&&this.areSamePolygons(this.mainComponentThis.ROOM[s],this.mainComponentThis.ROOM[e])&&(i[e]=!0);Sn.log("Duplicates to splice "+JSON.stringify(i));const o=Object.keys(i).sort(((e,t)=>t-e));for(let s=0;s<o.length;s++)this.mainComponentThis.ROOM.splice(o[s],1);Sn.log("EMpty elememts"),ji(this.boxRoom.current),ji(this.boxSurface.current),ji(this.boxArea.current);for(let s=0;s<this.mainComponentThis.ROOM.length;s++){"add"===this.mainComponentThis.ROOM[s].action&&(this.mainComponentThis.globalArea=this.mainComponentThis.globalArea+this.mainComponentThis.ROOM[s].realRoomArea);let e=this.mainComponentThis.ROOM[s].coords,t="M"+e[0].x+","+e[0].y;for(let s=1;s<e.length;s++)t=t+" L"+e[s].x+","+e[s].y;this.mainComponentThis.qSVG.create(this.boxRoom,"path",{d:t,fill:"color"===this.mainComponentThis.ROOM[s].roomFloorType?this.mainComponentThis.ROOM[s].floorColor:this.mainComponentThis.ROOM[s].roomFloorType&&"pattern"!==this.mainComponentThis.ROOM[s].roomFloorType?"none":"none"!==this.mainComponentThis.ROOM[s].floorTexture?"url(#room-texture_".concat(this.mainComponentThis.ROOM[s].id,")"):"none","fill-opacity":1,stroke:"none","fill-rule":"evenodd",class:"room"}),this.mainComponentThis.qSVG.create(this.boxSurface,"path",{d:t,fill:"none","fill-opacity":1,stroke:"none","fill-rule":"evenodd",class:"room"});let i,o=this.mainComponentThis.qSVG.polygonVisualCenter(this.mainComponentThis.ROOM[s]);""!==this.mainComponentThis.ROOM[s].name&&o&&(i={color:"#343938"},this.mainComponentThis.qSVG.textOnDiv(this.mainComponentThis.ROOM[s].name,o,i,this.mainComponentThis.boxArea.current)),""!==this.mainComponentThis.ROOM[s].name&&o&&(o.y=o.y+20),Sn.log("Area of room"),Sn.log(this.mainComponentThis.ROOM[s].realRoomArea),this.mainComponentThis.ROOM[s].realRoomArea<0&&Sn.log("Negative room surface"),i={color:"#343938",fontSize:"12.5px",fontWeight:"normal"},this.mainComponentThis.ROOM[s].surface&&(i.fontWeight="bold")}if(this.mainComponentThis.globalArea<=0)this.mainComponentThis.globalArea=0,this.areaValue.current.innerHTML="";else{const e=this.mainComponentThis.globalArea/(this.mainComponentThis.meter*this.mainComponentThis.meter);this.areaValue.current.innerHTML=eo(e,this.mainComponentThis.measureSystemContext.userUnit,"square meter","square foot",2,!0,!1)}this.roomWallsClockwiseOrder(),Sn.log("Roomss"+this.mainComponentThis.ROOM.length),Sn.log(this.mainComponentThis.ROOM),this.renderRoomTextures()}createSvgRoomTextureElement(e,t){const i=Math.min(...e.coordsInsideWithOrphans.map((e=>e.x))),o=Math.min(...e.coordsInsideWithOrphans.map((e=>e.y))),s=Math.max(...e.coordsInsideWithOrphans.map((e=>e.x))),n=Math.max(...e.coordsInsideWithOrphans.map((e=>e.y))),a=s-i,r=n-o,h=Kt[e.floorTexture].height,c=r*this.mainComponentThis.floorplan3DScaleFactor/h;return(0,l.jsx)(xn,{patternId:t?"room-texture-preview":"room-texture_".concat(e.id),roomId:e.id,textureName:e.floorTexture,positionX:i,positionY:o+r,width:a,height:r,floorTextureRepeatCount:e.floorTextureRepeatCount||c,floorTextureRepeatDirection:e.floorTextureRepeatCount?"automatic":"horizontal"},[e.id,e.floorTexture,i,o,s,n,e.floorTextureRepeatCount].join("-"))}renderRoomTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mainComponentThis.ROOM;const t=this.mainComponentThis.roomTextureContainerRef.current;s.render((0,l.jsx)(l.Fragment,{children:e.map((e=>!e.floorTexture||"none"===e.floorTexture||e.roomFloorType&&"pattern"!==e.roomFloorType?null:this.createSvgRoomTextureElement(e,!1)))}),t)}renderRoomPreviewTexture(e){const t=this.mainComponentThis.roomTexturePreviewContainerRef.current;if(!e.floorTexture||"none"===e.floorTexture||e.roomFloorType&&"pattern"!==e.roomFloorType)return null;s.render(this.createSvgRoomTextureElement(e,!0),t)}roomWallsClockwiseOrder(){let e=[];for(let i=0;i<this.mainComponentThis.ROOM.length;i++){Sn.log("Room"),Sn.log(this.mainComponentThis.ROOM[i]),Sn.log(this.mainComponentThis.WALLS);let t={x:this.mainComponentThis.ROOM[i].coords[0].realX,y:this.mainComponentThis.ROOM[i].coords[0].realY};const o=Ai(this.mainComponentThis.ROOM[i].coords);if(Sn.log("Is clockwise "+o),o){let o,s;Sn.log("Nastavi obilazak sobe u dosadasnjem smjeru");for(let n=0;n<this.mainComponentThis.ROOM[i].coords.length-1;n++)o=n,s=o===this.mainComponentThis.ROOM[i].coords.length-2?0:o+1,Sn.log("Wall "+o+" -> "+s),Sn.log("Cwstop before "+JSON.stringify(t)),t=this.roomWallsClockwiseOrderProcessWall(this.mainComponentThis.ROOM[i],o,s,e,t),Sn.log("Cwstop after "+JSON.stringify(t))}else{let o,s;Sn.log("Obrni smjer obilaska sobe");for(let n=0;n>=0&&(o=n,0===n?(s=this.mainComponentThis.ROOM[i].coords.length-2,n=this.mainComponentThis.ROOM[i].coords.length-1):s=o-1,Sn.log("Wall "+o+" -> "+s),Sn.log("Cwstop before "+JSON.stringify(t)),t=this.roomWallsClockwiseOrderProcessWall(this.mainComponentThis.ROOM[i],o,s,e,t),Sn.log("Cwstop after "+JSON.stringify(t)),1!==n);n--);}}this.mainComponentThis.ORPHANWALLS=[];let t=[];for(let i=0;i<this.mainComponentThis.WALLS.length;i++)if(!e.find((e=>e===this.mainComponentThis.WALLS[i]))){const e=Gi(this.mainComponentThis.WALLS[i].start,this.mainComponentThis.ROOM,!1),o=Gi(this.mainComponentThis.WALLS[i].end,this.mainComponentThis.ROOM,!1);let s;if(this.mainComponentThis.ORPHANWALLS.push({wall:this.mainComponentThis.WALLS[i],startRoom:e,endRoom:o}),e&&!o?s=e:!e&&o&&(s=o),s){let e=t.find((e=>e.room===s));e?e.orphanWalls.push(this.mainComponentThis.ORPHANWALLS[this.mainComponentThis.ORPHANWALLS.length-1]):t.push({room:s,orphanWalls:[this.mainComponentThis.ORPHANWALLS[this.mainComponentThis.ORPHANWALLS.length-1]]})}}Sn.log("Orphan walls count "+this.mainComponentThis.ORPHANWALLS.length),Sn.log("roomsWithSingleOrphanWalls count"+t.length),Sn.log(t),this.interpolateRoomCoordsInsideWithOrphanWalls(t)}interpolateRoomCoordsInsideWithOrphanWalls(e){for(let s=0;s<e.length;s++){let n=[];for(let r=0;r<e[s].room.coordsInside.length-1;r++)t=r,i=e[s].room.coordsInside,o=n,t===i.length-2?Mi(i[t],i[0])||o.push(Ui(i,t,0,!0)):Mi(i[t],i[t+1])||o.push(Ui(i,t,t+1,!0));let a=[...e[s].room.coordsInside];for(let t=0;t<e[s].orphanWalls.length;t++){Sn.log("Current orphan wall");let i=[],o=[];for(let n=0;n<e[s].orphanWalls[t].wall.coords.length;n++)Di(e[s].orphanWalls[t].wall.coords[n],e[s].orphanWalls[t].wall.equations.up,this.mainComponentThis.isPointOnWallDecimalPrecision)?i.push(e[s].orphanWalls[t].wall.coords[n]):o.push(e[s].orphanWalls[t].wall.coords[n]);Sn.log("Room coords before "+JSON.stringify(a)),Sn.log("Room coords up point"+JSON.stringify(i)),Sn.log("Room coords down point"+JSON.stringify(o));let r=[],l={intersectedRoomCoordsInsideWalls:[],upEquationWallNode1SpliceIndex:null,upEquationWallNode2SpliceIndex:null};if(this.orphanWallLineProcessing(e[s].orphanWalls[t].wall.equations.up,i,n,e[s].room.coordsInside,a,r,l,!0),this.orphanWallLineProcessing(e[s].orphanWalls[t].wall.equations.down,o,n,e[s].room.coordsInside,a,r,l,!1),null!==l.upEquationWallNode1SpliceIndex&&null!==l.upEquationWallNode2SpliceIndex&&4===r.length){let e=null;l.intersectedRoomCoordsInsideWalls.length>1?(Sn.log("Orphan izmedu 2 zida"),-1!==l.upEquationWallNode2SpliceIndex?(Sn.log("Interpoliraj wallNode2"),e=l.upEquationWallNode2SpliceIndex):Sn.log("Exception, nema wallNode2 indexa")):(Sn.log("Orphan na rubu"),Mi(r[0],l.intersectedRoomCoordsInsideWalls[0].wallNode1,0)?-1!==l.upEquationWallNode1SpliceIndex?(Sn.log("Interpoliraj wallNode1"),e=l.upEquationWallNode1SpliceIndex):Sn.log("Exception, nema wallNode1 indexa"):Mi(r[3],l.intersectedRoomCoordsInsideWalls[0].wallNode2,0)?-1!==l.upEquationWallNode2SpliceIndex?(Sn.log("Interpoliraj wallNode2"),e=l.upEquationWallNode2SpliceIndex):Sn.log("Exception, nema wallNode2 indexa"):Sn.log("Orphan na rubu interpolation exception")),null!==e&&a.splice(e,1,r[0],r[1],r[2],r[3]),Sn.log("Room coords after "+JSON.stringify(a))}else Sn.log("Orphan walls interpolation exception "+JSON.stringify(e[s].orphanWalls[t].wall.coords));Sn.log(l)}e[s].room.coordsInsideWithOrphans=a}var t,i,o}orphanWallLineProcessing(e,t,i,o,s,n,a,r){let l=t[0];Ni(t[1],o)||(l=t[1]);let h=t.find((e=>e!==l));const c=Ti(t[0],t[1]);for(let d=0;d<i.length;d++){const t=zi(i[d].wallEquation,e,"object");if(t){Sn.log("Equation intersection "+JSON.stringify(t));const e=Ti(i[d].wallNode1,i[d].wallNode2);if(vi(0,t.x,t.y,c,e)){a.intersectedRoomCoordsInsideWalls.find((e=>e===i[d]))||a.intersectedRoomCoordsInsideWalls.push(i[d]),Sn.log("Intersection coords inside wall"),Sn.log(i[d]),Sn.log("Pomjeri tocku orphan zida "+JSON.stringify(l)),l.x=t.x,l.y=t.y,Sn.log("Tocka orphan zida nakom pomjeranja "+JSON.stringify(l)),r?(n.push(l,h),a.upEquationWallNode1SpliceIndex=s.findIndex((e=>Mi(e,i[d].wallNode1,0))),a.upEquationWallNode2SpliceIndex=s.findIndex((e=>Mi(e,i[d].wallNode2,0)))):n.push(h,l);break}}}}roomWallsClockwiseOrderProcessWall(e,t,i,o,s){const n=Ui(e.coords,t,i);Sn.log(n);let a=this.mainComponentThis.WALLS.find((e=>T(e.start.x,0)===T(n.wallNode1.realX,0)&&T(e.start.y,0)===T(n.wallNode1.realY,0)&&T(e.end.x,0)===T(n.wallNode2.realX,0)&&T(e.end.y,0)===T(n.wallNode2.realY,0)||T(e.start.x,0)===T(n.wallNode2.realX,0)&&T(e.start.y,0)===T(n.wallNode2.realY,0)&&T(e.end.x,0)===T(n.wallNode1.realX,0)&&T(e.end.y,0)===T(n.wallNode1.realY,0)));Sn.log(a);let r=s;return a?(Sn.log("Wall start "+JSON.stringify(a.start)+"wall end: "+JSON.stringify(a.end)),Sn.log(JSON.stringify(r)),Sn.log("Wall needs switch "+!Mi(a.start,r,0)),Sn.log(o),Sn.log(!o.find((e=>e===a))),Mi(a.start,r,0)?(!o.find((e=>e===a))&&o.push(a),r=a.end):o.find((e=>e===a))?r=a.start:(Sn.log(JSON.stringify(r)),Sn.log(JSON.stringify(a.start)),Sn.log("Obrnioo"),this.switchWallStartEnd(a),o.push(a),r=a.end)):(r={x:n.wallNode2.realX,y:n.wallNode2.realY},Sn.log("Nema target walla u roomWallsClockwiseOrderProcessWall"+JSON.stringify(n))),r}switchWallStartEnd(e){const t={...e.start};e.start={...e.end},e.end=t}findCorrespondingWall(e){return this.mainComponentThis.WALLS.find((t=>t.start.x===e.wallNode1.realX&&t.start.y===e.wallNode1.realY&&t.end.x===e.wallNode2.realX&&t.end.y===e.wallNode2.realY||t.start.x===e.wallNode2.realX&&t.start.y===e.wallNode2.realY&&t.end.x===e.wallNode1.realX&&t.end.y===e.wallNode1.realY))}nearVertice(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.WALLS,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,s=1/0;for(let n=0;n<i.length;n++){let o=this.mainComponentThis.qSVG.gap(e,{x:i[n].start.x,y:i[n].start.y}),a=this.mainComponentThis.qSVG.gap(e,{x:i[n].end.x,y:i[n].end.y});o<a&&o<s&&(s=o,t={number:i[n],x:i[n].start.x,y:i[n].start.y,distance:Math.sqrt(s)}),a<o&&a<s&&(s=a,t={number:i[n],x:i[n].end.x,y:i[n].end.y,distance:Math.sqrt(s)})}return s<o*o&&t}nearWall(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainComponentThis.WALLS,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,s=1/0,n={};if(0===i.length)return!1;for(let r=0;r<i.length;r++){let o=qi(i[r].start.x,i[r].start.y,i[r].end.x,i[r].end.y);t=this.mainComponentThis.qSVG.nearPointOnEquation(o,e),t.distance<s&&this.mainComponentThis.qSVG.btwn(t.x,i[r].start.x,i[r].end.x)&&this.mainComponentThis.qSVG.btwn(t.y,i[r].start.y,i[r].end.y)&&(s=t.distance,n={wall:i[r],x:t.x,y:t.y,distance:t.distance})}let a=this.nearVertice(e,i);return a.distance<s&&(s=a.distance,n={wall:a.number,x:a.x,y:a.y,distance:a.distance}),s<=o&&n}showScaleBox(){const e=xi(this.mainComponentThis.WALLS);if(!e)return ji(this.boxScale.current),void(this.mainComponentThis.boxWallCoordinates={minX:0,maxX:0,minY:0,maxY:0,width:0,height:0});this.createAndShowBoxMeasures(e.minX,e.maxX,e.minY,e.maxY,this.boxScale),this.mainComponentThis.setBoxWallCoordinatesValues(e)}};const Dn=class{constructor(e,t,i,o,s,n,a){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"normal",l=arguments.length>8?arguments[8]:void 0,h=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,d=arguments.length>11?arguments[11]:void 0,p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{};if(this.family=e,this.class=t,this.type=i,this.x=o.x,this.y=o.y,this.angle=s,this.angleSign=n,this.limit=[],this.hinge=r,this.graph=d.qSVG.create("none","g",{"data-object-class":this.class,"data-object-type":this.type}),this.additionalParams=c||{},this.constructorParams=p,this.wallHeightConstruc=this.constructorParams.wallHeightConstruc||d.floorHeight,this.actionGraph=this.graph,"inWall"===this.family||"onWall"===this.family||this.additionalParams.onWallObjectBBox){const e=d.qSVG.create("none","g");this.graph.appendChild(e),this.actionGraph=e}this.scale={x:1,y:1},this.value=h,this.size=a,this.thick=l,this.width=(this.size/d.meter).toFixed(2),this.height=(this.thick/d.meter).toFixed(2);let m,u=d.carpentryCalc(e,t,i,a,l,h,c);for(let f=0;f<u.length;f++)u[f].path&&(m=d.qSVG.create("none","path",{d:u[f].path,"stroke-width":1,fill:u[f].fill,stroke:u[f].stroke,"stroke-dasharray":u[f].strokeDashArray})),u[f].text&&(m=d.qSVG.create("none","text",{x:u[f].x,y:u[f].y,"font-size":"1em",stroke:u[f].stroke,"stroke-width":u[f].strokeWidth,"font-family":"roboto","text-anchor":"middle",fill:u[f].fill}),m.textContent=u[f].text),this.actionGraph.appendChild(m);let g=this.actionGraph.getBoundingClientRect();g.x=g.x*d.zoomFactor-d.offset.left*d.zoomFactor+d.originX_viewbox,g.y=g.y*d.zoomFactor-d.offset.top*d.zoomFactor+d.originY_viewbox,g.origin={x:this.x,y:this.y},this.bbox=g,this.realBbox=[{x:-this.size/2,y:-this.thick/2},{x:this.size/2,y:-this.thick/2},{x:this.size/2,y:this.thick/2},{x:-this.size/2,y:this.thick/2}],this.params=u.params,"doorWindow"===this.class&&d.isWindowObject(this.type)&&c&&(Object.hasOwn(this.additionalParams,"rotationDirection")&&Object.hasOwn(this.additionalParams,"rotationAxis")&&Object.hasOwn(this.additionalParams,"curvePoints")&&Object.hasOwn(this.additionalParams,"controlPointOnWall")&&Object.hasOwn(this.additionalParams,"arrowControlPoint")&&Object.hasOwn(this.additionalParams,"arrowControlPointAngleSign")||d.setWindowObjectRotationProperties(this)),"inWall"!==this.family&&"onWall"!==this.family||Object.hasOwn(this.additionalParams,"hideWithWall")||(this.additionalParams.hideWithWall=!0),Object.hasOwn(this.additionalParams,"mirrored")||xt[i]||""===d.getObjectFolderName(i)||(this.additionalParams.mirrored=!1),u.params.width?this.size=u.params.width:this.size=a,u.params.height?this.thick=u.params.height:this.thick=l,this.setObject3DDimensions(d)}update(e){this.width=(this.size/e.meter).toFixed(2),this.height=(this.thick/e.meter).toFixed(2),this.setObject3DDimensions(e);let t=e.carpentryCalc(this.family,this.class,this.type,this.size,this.thick,this.value,this.additionalParams);for(let h=0;h<t.length;h++)if(t[h].path)this.actionGraph.querySelectorAll("path")[h].setAttribute("d",t[h].path);else if(t[h].text){let e=this.actionGraph.querySelectorAll("text");for(let i of e)i.setAttribute("font-size",t[h].fontSize),i.setAttribute("fill",t[h].fill);e[0].textContent=t[h].text}if("text"===this.class){let i=e.qSVG.create("none","text",{x:0,y:0,"font-size":t[0].fontSize,stroke:t[0].stroke,"stroke-width":t[0].strokeWidth,"font-family":"roboto","text-anchor":"middle",fill:t[0].fill});i.textContent=t[0].text,i.style.visibility="hidden",this.actionGraph.appendChild(i);const o=i.getBBox();this.size=o.width,this.thick=o.height,i.remove()}let i=1,o=1;e.isDoorObject(this.type)?fo(this.type)&&"normal"!==this.hinge&&(i=-1):e.isWindowObject(this.type)&&(e.setWindowObjectRotationProperties(this),fo(this.type)?("start"!==this.additionalParams.rotationAxis&&(i=-1),"up"!==this.additionalParams.rotationDirection&&(o=-1)):bo(this.type)&&"up"!==this.additionalParams.rotationDirection&&(o=-1));let s=this.y;this.actionGraph.setAttribute("transform","translate("+this.x+","+s+") rotate("+this.angle+",0,0) scale("+i+", "+o+")");let n=this.actionGraph.getBoundingClientRect();n.x=n.x*e.zoomFactor-e.offset.left*e.zoomFactor+e.originX_viewbox,n.y=n.y*e.zoomFactor-e.offset.top*e.zoomFactor+e.originY_viewbox,n.origin={x:this.x,y:this.y},this.bbox=n;let a=this.angle*(Math.PI/180),r=[{x:-this.size/2,y:-this.thick/2},{x:this.size/2,y:-this.thick/2},{x:this.size/2,y:this.thick/2},{x:-this.size/2,y:this.thick/2}],l={x:0,y:0};if("text"===this.class&&(r=[{x:this.bbox.x,y:this.bbox.y},{x:this.bbox.x+this.bbox.width*e.zoomFactor,y:this.bbox.y},{x:this.bbox.x+this.bbox.width*e.zoomFactor,y:this.bbox.y+this.bbox.height*e.zoomFactor},{x:this.bbox.x,y:this.bbox.y+this.bbox.height*e.zoomFactor}],l.x=this.bbox.x+this.bbox.width*e.zoomFactor/2,l.y=this.bbox.y+this.bbox.height*e.zoomFactor/2),oo(r,l,a),"text"!==this.class)for(let h=0;h<r.length;h++)r[h].x+=this.x,r[h].y+=this.y;if(this.realBbox=r,"inWall"===this.family||"onWall"===this.family||this.additionalParams.onWallObjectBBox){let t,i;"onWall"===this.family||this.additionalParams.onWallObjectBBox?(i=this.additionalParams.onWallObjectBBox?this.obj:this,t=e.getOnWallItemDepthOffsetParams(i,90===i.params.onWallOffsetAngle?this.size/2:this.thick/2)):(i="socle"===this.class?this.obj:this,t=e.getInWallItemDepthOffsetParams(i));const{offsetX:o,offsetY:s}=go(i,t.offsetValue,t.wall2D.angle);this.graph.setAttribute("transform","translate(".concat(o,", ").concat(s,")")),new Array(...this.realBbox,this.bbox.origin).forEach((e=>{e.x+=o,e.y+=s}))}return!0}setObject3DDimensions(e){if("lights"===this.class)this.additionalParams.height3D=this.additionalParams.height3D||e.lightsDetails[this.type].dimensions.height3D*(e.meter/100),"onWall"===this.family?(this.additionalParams.width3D=parseFloat(this.thick),this.additionalParams.depth3D=parseFloat(this.size)):(this.additionalParams.width3D=parseFloat(this.size),this.additionalParams.depth3D=parseFloat(this.thick));else if("doorWindow"===this.class)this.additionalParams.width3D=parseFloat(this.size),this.additionalParams.height3D=this.additionalParams.height3D||(e.isWindowObject(this.type)?e.windowsDetails[this.type].dimensions.height3D*(e.meter/100):e.doorsDetails[this.type].dimensions.height3D*(e.meter/100)),this.additionalParams.depth3D=parseFloat(this.thick);else if("furniture"===this.class){this.additionalParams.width3D=parseFloat(this.size);let t=this.additionalParams.height3D;this.additionalParams.height3D||(t=e.isStaircaseObject(this.type)?this.wallHeightConstruc:e.isFanObject(this.type)?e.fanDetails[this.type].dimensions.height3D*(e.meter/100):e.isCoverObject(this.type)?e.coverDetails[this.type].dimensions.height3D*(e.meter/100):e.isPresenceBinaryObject(this.type)?e.presenceDetails[this.type].dimensions.height3D*(e.meter/100):e.isHVACObject(this.type)?e.hvacDetails[this.type].dimensions.height3D*(e.meter/100):e.isCameraObject(this.type)?e.cameraDetails[this.type].dimensions.height3D*(e.meter/100):e.isScreenObject(this.type)?e.screenDetails[this.type].dimensions.height3D*(e.meter/100):e.furnitureDetails[this.type].dimensions.height3D*(e.meter/100)),this.additionalParams.height3D=t,this.additionalParams.depth3D=parseFloat(this.thick)}if(!Ge.includes(e.getObjectItemType(this.type))){const t=Ke.includes(this.type);this.additionalParams.positionY=F(this.additionalParams.positionY)?t?this.wallHeightConstruc-this.additionalParams.height3D:e.isLightObject(this.type)||e.isACObject(this.type)||e.isCameraObject(this.type)&&!t?3*this.wallHeightConstruc/4:e.isPresenceBinaryObject(this.type)||"free"===this.family?0:this.wallHeightConstruc/2-this.additionalParams.height3D/2:this.additionalParams.positionY}}cloneProperties(e){e.x=this.x,e.y=this.y,e.angle=this.angle,e.angleSign=this.angleSign,e.limit=this.limit,e.hinge=this.hinge,e.additionalParams={...this.additionalParams},e.scale={...this.scale},e.value=this.value,e.size=this.size,e.thick=this.thick,e.width=this.width,e.height=this.height,e.bbox={...this.bbox},e.realBbox=this.realBbox.map((e=>({...e}))),e.params={...this.params}}};var vn=i(1317);function Tn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("floorplan_image_scaling"===this.mode||"floorplan_image_translation"===this.mode){if(this.snap=this.calcul_snap(e,this.grid_snap),this.cursor("pointer"),this.binder?t&&(this.binder.setAttribute("cx",this.snap.x),this.binder.setAttribute("cy",this.snap.y)):(this.binder=this.qSVG.create("none","circle",{cx:this.snap.x,cy:this.snap.y,r:this.meter/6,fill:"url('#uploadFloorplanCursorCircleGradient')"}),this.boxBind.current.appendChild(this.binder)),t&&"floorplan_image_scaling"===this.mode){let e;if((e=this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group"))&&!this.boxFloorplanImage.current.querySelector("#endCircle")){let t=e.querySelector("line");t.setAttribute("x2",this.snap.x),t.setAttribute("y2",this.snap.y)}}}else"upload_floorplan_image_mode"===this.mode&&this.removeBinder()}function jn(e){if("room_mode"===this.mode){let t;this.snap=this.calcul_snap(e,this.grid_snap),(t=Gi(this.snap,this.ROOM))?(this.cursor("pointer"),(!this.selectedBinder||this.selectedBinder&&parseInt(this.selectedBinder.id)!==this.ROOM.indexOf(t))&&(this.removeBinder(),this.binder=this.createRoomBinderPath(t))):this.removeBinder()}}function On(e){if("select_mode"===this.mode&&"off"===this.drag){this.snap=this.calcul_snap(e,"off");let t,i,o=!1,s=[];for(let e=0;e<this.OBJDATA.length;e++){let t=this.OBJDATA[e].realBbox;Ni(this.snap,t)&&s.push(this.OBJDATA[e])}if(s.length>0&&(o=s[0],s.length>1)){let e,t=Ki(this.snap,{x:s[0].x,y:s[0].y});for(let i=1;i<s.length;i++)e=Ki(this.snap,{x:s[i].x,y:s[i].y}),e<t&&(t=e,o=s[i])}if(!1!==o){if(this.binder&&"segment"===this.binder.type&&(this.removeBinder(),this.cursor("default")),!this.selectedBinder||this.selectedBinder&&this.selectedBinder.obj!==o)if(o.params.bindBox)(!this.binder||this.binder&&this.binder.obj!==o)&&(this.binder&&this.binder.obj!==o&&this.removeBinder(),this.binder=new Dn("free","boundingBox","",o,o.angle,0,o.size,"normal",o.thick,o.realBbox,{onWallObjectBBox:"onWall"===o.family},this),this.binder.obj=o,this.binder.update(this),this.binder.type="boundingBox",this.binder.oldX=this.binder.x,this.binder.oldY=this.binder.y,this.boxBind.current.appendChild(this.binder.graph),o.params.move?this.cursor("move"):this.cursor("pointer"));else if(!this.binder||this.binder.obj&&this.binder.obj!==o){let e;if(this.binder&&this.binder.obj!==o&&this.removeBinder(),e=this.editor.rayCastingWall(o)){e.length>1&&(e=e[0]),this.inWallRib(e);let t=o.thick,i=o.size;this.binder=new Dn("inWall","socle","",o,o.angle,0,i,"normal",t,null,void 0,this),this.binder.obj=o,this.binder.update(this),this.binder.type="obj",this.binder.oldXY={x:o.x,y:o.y},this.boxBind.current.appendChild(this.binder.graph)}}else this.binder.actionGraph&&(vn.log("Wall item binder",e.target),vn.log(this.binder),e.target===this.binder.actionGraph.firstChild?(this.cursor("move"),this.binder.actionGraph.firstChild.setAttribute("class","circle_css_2"),this.binder.type="obj",this.binder.obj=o):(this.cursor("default"),this.binder.actionGraph.firstChild.setAttribute("class","circle_css"),this.binder.type=!1))}else this.binder&&(this.removeBinder(),this.cursor("default"),this.rib());if(t=this.editor.nearWallNode(this.snap,this.selectModeNearWallNodeRange)){if(!this.binder||"segment"===this.binder.type)if(this.selectedBinder)if(this.selectedBinder.obj){let e=[];for(let o=this.WALLS.length-1;o>-1;o--)(Ii(this.WALLS[o].start,t)||Ii(this.WALLS[o].end,t))&&e.push(this.WALLS[o]);let i=!1;vn.log(e);for(let t=0;t<e.length;t++)if(-1!==this.editor.objFromWall(e[t]).indexOf(this.selectedBinder.obj)){i=!0;break}i||(vn.log("Create node binder"),this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node")}else this.selectedBinder.wall&&(!this.selectedBinder.wall||Ii(this.selectedBinder.wall.start,t)||Ii(this.selectedBinder.wall.end,t))||(this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node");else this.binder=this.qSVG.create(this.boxBind,"circle",{id:"circlebinder",class:"circle_css_2",cx:t.x,cy:t.y,r:this.Rcircle}),this.binder.data=t,this.binder.type="node";this.cursor("move")}else this.binder&&"node"===this.binder.type&&(this.removeBinder(),this.cursor("default"),this.rib());if(i=this.editor.rayCastingWalls(this.snap,this.WALLS)){if((!this.selectedBinder||!this.selectedBinder.obj||this.selectedBinder.obj&&!Array.isArray(i)&&-1===this.editor.objFromWall(i).indexOf(this.selectedBinder.obj)||0===(this.selectedBinder.obj&&Array.isArray(i)&&i.filter((e=>-1!==this.editor.objFromWall(e).indexOf(this.selectedBinder.obj)))).length)&&(!this.selectedBinder||!this.selectedBinder.wall||this.selectedBinder.wall&&this.selectedBinder.wall!==i)&&(i.length>1&&(i=i[i.length-1]),i&&!this.binder)){this.editor.objFromWall(i).length>0&&this.editor.inWallRib2(i),this.binder={},this.binder.wall=i,this.inWallRib(this.binder.wall);let e=this.qSVG.create("none","line",{x1:this.binder.wall.start.x,y1:this.binder.wall.start.y,x2:this.binder.wall.end.x,y2:this.binder.wall.end.y,"stroke-width":this.wallSize,stroke:"#19ab7f"}),t=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.start.x,cy:this.binder.wall.start.y,r:this.wallBinderBallsRadius}),o=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.end.x,cy:this.binder.wall.end.y,r:this.wallBinderBallsRadius});this.binder.graph=this.qSVG.create("none","g"),this.binder.graph.append(e),this.binder.graph.append(t),this.binder.graph.append(o),this.boxBind.current.appendChild(this.binder.graph),this.binder.type="segment",this.cursor("pointer")}}else if(i=this.editor.nearWall(this.snap,this.WALLS,this.nearWallBinderRadius)){if((!this.selectedBinder||!this.selectedBinder.obj||this.selectedBinder.obj&&-1===this.editor.objFromWall(i.wall).indexOf(this.selectedBinder.obj))&&(!this.selectedBinder||!this.selectedBinder.wall||this.selectedBinder.wall&&this.selectedBinder.wall!==i.wall)&&i&&!this.binder){vn.log("Wall objects"),vn.log(this.editor.objFromWall(i.wall)),this.selectedBinder&&this.editor.objFromWall(i.wall).length>0&&vn.log(this.editor.objFromWall(i.wall).indexOf(this.selectedBinder.obj)),i=i.wall,this.editor.objFromWall(i).length>0&&this.editor.inWallRib2(i),this.binder={},this.binder.wall=i,this.inWallRib(this.binder.wall);let e=this.qSVG.create("none","line",{x1:this.binder.wall.start.x,y1:this.binder.wall.start.y,x2:this.binder.wall.end.x,y2:this.binder.wall.end.y,"stroke-width":this.wallSize,stroke:"#19ab7f"}),t=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.start.x,cy:this.binder.wall.start.y,r:this.wallBinderBallsRadius}),o=this.qSVG.create("none","circle",{class:"circle_css",cx:this.binder.wall.end.x,cy:this.binder.wall.end.y,r:this.wallBinderBallsRadius});this.binder.graph=this.qSVG.create("none","g"),this.binder.graph.append(e),this.binder.graph.append(t),this.binder.graph.append(o),this.boxBind.current.appendChild(this.binder.graph),this.binder.type="segment",this.cursor("pointer")}}else this.binder&&"segment"===this.binder.type&&(this.removeBinder(),this.cursor("default"),this.rib())}}function In(e){vn.log("Angle",e.angle),vn.log("Angle sign",e.angleSign),this.removeWindowRotationAxisDirectionBinder();const t=this.createWindowRotationSvg(e,e.additionalParams.curvePoints,e.additionalParams.rotationDirection);this.windowRotationAxisDirectionGraph=t.svgGroupElement,this.boxBind.current.appendChild(this.windowRotationAxisDirectionGraph),this.windowRotationAxisDirectionGraph.appendChild(t.curveArrowPath)}function Pn(e){const t=e.additionalParams.cameraDistance;this.removeCameraCoverageAreaBinder(),this.cameraCoverageAreaGraph=this.qSVG.create("none","g",{transform:"translate(".concat(e.bbox.origin.x,",").concat(e.bbox.origin.y,") rotate(").concat(e.angle+dt[e.type].coverage2DAreaOffsetAngleDeg+e.additionalParams.cameraRotationAngleYDeg,",0,0) scale(1,1)")});const i=0,o=0,s=t/Math.cos(R(e.additionalParams.cameraHorizontalFOVAngleDeg/2)),n=po(i,o,s,-e.additionalParams.cameraHorizontalFOVAngleDeg/2),a=po(i,o,s,e.additionalParams.cameraHorizontalFOVAngleDeg/2),r=["M",i,o,"L",n.x,n.y,"L",a.x,a.y,"Z"].join(" ");this.cameraCoverageAreaGraph.appendChild(this.qSVG.create("none","path",{d:r,fill:"url(#cameraCoverageGradient)",stroke:"#333"})),document.getElementById("cameraCoverageGradient").setAttribute("y2",-t),this.boxBind.current.appendChild(this.cameraCoverageAreaGraph)}function kn(e){this.removePresenceAreaBinder();const t=e.additionalParams.presenceAreaRotation;this.presenceAreaGraph=this.qSVG.create("none","g",{transform:"translate(".concat(e.x,",").concat(e.y,") rotate(").concat(t,",0,0) scale(1,1)")});const i=e.additionalParams.presenceAreaWidth,o=["M",-i/2,-e.additionalParams.presenceAreaHeight,"H",i/2,"V",0,"H",-i/2,"Z"].join(" ");this.presenceAreaGraph.appendChild(this.qSVG.create("none","path",{d:o,fill:"rgba(0, 128, 255, 0.7)",opacity:.7,stroke:"#333"})),this.boxBind.current.appendChild(this.presenceAreaGraph)}var Fn=i(1317);let Mn=!1;function An(e){"layer_mode"!==this.mode&&!Mn&&e.shiftKey&&(this.snap=this.calcul_snap(e,this.grid_snap),this.pox=this.snap.xMouse,this.poy=this.snap.yMouse),Fn.log("Mouse move mode"+this.mode),Mn=e.shiftKey,this.textAndUploadFloorplanImageBinderCreation(e,!0),this.roomModeBinderCreation(e),this.selectModeObj2DWallNodeWallSegmentBinderCreation(e);"bind_mode"!==this.mode&&!e.touches&&("select_mode"===this.mode&&"on"===this.drag||"layer_mode"!==this.mode&&e.shiftKey)&&(this.snap=this.calcul_snap(e,this.grid_snap),this.cursor("move"),this.distX=(this.snap.xMouse-this.pox)*this.zoomFactor,this.distY=(this.snap.yMouse-this.poy)*this.zoomFactor,this.pox=this.snap.xMouse-this.distX,this.poy=this.snap.yMouse-this.distY,this.zoom_maker("zoomdrag",this.distX,this.distY))}var Rn=i(1317);function Ln(){if(Rn.log("Mouse up mode"+this.mode),this.showRib&&gi(this.boxScale.current,0,null,"inline",!1),this.drag="off",this.cursor("default"),"select_mode"===this.mode&&this.binder&&this.removeBinder(),"room_mode"===this.mode){if(!this.binder)return!1;this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.binderType="room",this.binder=null,this.setRoomToolsValues(),Rn.log("Room mode"),this.translateRightBox(this.roomTools.current,-this.rightBoxWidth,!0),this.cursor("default")}if("bind_mode"===this.mode&&(this.action=0,this.construc=0,this.binder)){if(this.foncButton("select_mode","dont_save"),"node"===this.binder.type&&(Rn.log("Mouse up bind mode NODE"),this.editor.removeZeroLengthWallsAndSliceExistingWalls(),this.editor.architect(this.WALLS)),"segment"===this.binder.type){let e=!1;if(this.binder.wall.start===this.binder.before&&(e=!0),e){this.boxInfo.current.innerHTML="Modify the wall",Rn.log("mainComponentThis.binder wall:"),Rn.log(this.binder),this.hideActiveRightBox(),this.translateRightBox(this.wallTools.current,-this.rightBoxWidth,!0),this.setWallToolsValues(this.binder.wall),this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.binderType="wall",this.binder=null;for(let e=0;e<this.selectedBinder.graph.children.length;e++)this.selectedBinder.graph.children[e].setAttribute("stroke","#0cacf2"),this.selectedBinder.graph.children[e].setAttribute("fill","#0cacf2"),this.selectedBinder.graph.children[e].style.stroke="#0cacf2",this.selectedBinder.graph.children[e].style.fill="#0cacf2"}else Rn.log("Mouse up bind mode pomican cijeli zid"),this.editor.removeZeroLengthWallsAndSliceExistingWalls(),this.editor.architect(this.WALLS);this.equation1=null,this.equation2=null,this.equation3=null}else if("obj"===this.binder.type&&"inWall"===this.binder.family){if(Math.abs(this.binder.oldXY.x-this.binder.x)+Math.abs(this.binder.oldXY.y-this.binder.y)<1){this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(this.binder.obj,"onRightBoxOpenMessage"),this.openWallItemToolsRightBox(this.binder.obj),this.cursor("default"),this.removeSelectedBinder(),this.selectedBinder=this.binder,this.selectedBinder.graph.querySelector(".circle_css_2")&&this.selectedBinder.graph.querySelector(".circle_css_2").classList.remove("circle_css_2"),this.selectedBinder.binderType="wallItem",this.binder=null;for(let e=0;e<this.selectedBinder.graph.children.length;e++)this.selectedBinder.graph.children[e].setAttribute("stroke","#0cacf2"),this.selectedBinder.graph.children[e].setAttribute("fill","#0cacf2"),this.selectedBinder.graph.children[e].style.stroke="#0cacf2",this.selectedBinder.graph.children[e].style.fill="#0cacf2"}else this.mode="select_mode",this.action=0,this.removeBinder();this.wallItemObjOriginalWidth=null}else if("boundingBox"===this.binder.type){let e=Math.abs(this.binder.oldX-this.binder.x)+Math.abs(this.binder.oldY-this.binder.y),t=this.binder.obj;if(Rn.log("target object: "),Rn.log(t),e<1||!t)if(t.params.move){let e="";"inWall"===t.family||"onWall"===t.family?(e="wallItem",this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(t,"onRightBoxOpenMessage"),this.openWallItemToolsRightBox(t)):"homeAssistant"===t.class||"sensors"===t.class?(this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(t,"onRightBoxOpenMessage"),this.openSensorOtherToolsRightBox(t)):this.isPresenceAreaObject(t.type)?(e="presenceArea",this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(t,"onRightBoxOpenMessage"),this.openPresenceAreaToolsRightBox(t)):(e="freeItem",this.boxInfo.current.innerHTML=this.determineObj2DInfoTexts(t,"onRightBoxOpenMessage"),this.openFreeItemToolsRightBox(t)),this.cursor("default"),this.removeSelectedBinder(),this.selectedBinder=this.binder,this.binder=null,this.selectedBinder.binderType=e}else this.mode="select_mode",this.action=0,this.removeBinder();else this.binder.additionalParams.onWallObjectBBox&&(this.wallItemObjOriginalWidth=null)}"bind_mode"===this.mode&&this.binder&&(Rn.log("Makni mainComponentThis.binder"),this.removeBinder())}"edit_room_mode"!==this.mode&&(this.editor.showScaleBox(),this.rib())}var Bn=i(1317);function Wn(e){if("floorplan_image_scaling"!==this.mode&&"floorplan_image_translation"!==this.mode||(this.snap=this.calcul_snap(e,this.grid_snap),this.uploadFloorplanImageToolsRef.current.handleMouseDownAction(this.snap)),"select_mode"===this.mode)if(Bn.log("Inside select mode"),Bn.log(this.binder),!this.binder||"segment"!==this.binder.type&&"node"!==this.binder.type&&"obj"!==this.binder.type&&"boundingBox"!==this.binder.type)this.action=0,this.drag="on",this.snap=this.calcul_snap(e,this.grid_snap),this.pox=this.snap.xMouse,this.poy=this.snap.yMouse,this.selectModeRightClickDraggOn=2===e.button;else{if(Bn.log("Set bind mode"),this.mode="bind_mode","obj"===this.binder.type&&(this.action=1),"boundingBox"===this.binder.type&&(this.action=1),"node"===this.binder.type){fi(this.boxScale.current,0,null,!1);let e=this.binder.data;this.pox=e.x,this.poy=e.y;let t,i={x:this.pox,y:this.poy};this.wallListObj=[],this.wallListRun=[];for(let o=this.WALLS.length-1;o>-1;o--)if(Ii(this.WALLS[o].start,i)||Ii(this.WALLS[o].end,i)){this.wallListRun.push(this.WALLS[o]);break}null!=this.wallListRun[0].child&&(Ii(this.wallListRun[0].child.start,i)||Ii(this.wallListRun[0].child.end,i))&&this.wallListRun.push(this.wallListRun[0].child),null!=this.wallListRun[0].parent&&(Ii(this.wallListRun[0].parent.start,i)||Ii(this.wallListRun[0].parent.end,i))&&this.wallListRun.push(this.wallListRun[0].parent);for(let o in this.wallListRun)if(Ii(this.wallListRun[o].start,i)||Ii(this.wallListRun[o].end,i)){let e=this.wallListRun[o].start;Ii(this.wallListRun[o].start,i)&&(e=this.wallListRun[o].end),t=this.editor.objFromWall(this.wallListRun[o]);let s=this.wallListRun[o];for(let i=0;i<t.length;i++){let o=t[i],n=Ki(o,e);this.wallListObj.push({wall:s,from:e,distance:n,obj:o,indexObj:i})}}this.magnetic=0,this.action=1}if("segment"===this.binder.type){fi(this.boxScale.current,0,null,!1);let e=this.binder.wall;if(this.binder.before=this.binder.wall.start,this.equation2=this.editor.createEquationFromWall(e),null!=e.parent){this.equation1=this.editor.createEquationFromWall(e.parent);let t=this.qSVG.angleBetweenEquations(this.equation1.A,this.equation2.A);if(t<20||t>160){let t=!0;for(let i in this.WALLS)if(Ni(e.start,this.WALLS[i].coords)&&!Ii(this.WALLS[i],e.parent)&&!Ii(this.WALLS[i],e)){null!=e.parent.parent&&Ii(e,e.parent.parent)&&(e.parent.parent=null),null!=e.parent.child&&Ii(e,e.parent.child)&&(e.parent.child=null),e.parent=null,t=!1;break}if(t){let t;Ii(e.parent.end,e.start,"1")?(t=new yn(e.parent.end,e.start,"normal",e.thick,e.material,e),Bn.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e.parent,t.child=e,e.parent.child=t,e.parent=t,this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y)):Ii(e.parent.start,e.start,"2")&&(t=new yn(e.parent.start,e.start,"normal",e.thick,e.material,e),Bn.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e.parent,t.child=e,e.parent.parent=t,e.parent=t,this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y))}}}if(null==e.parent){let t=!1;for(let i in this.WALLS)if(Ni(e.start,this.WALLS[i].coords)&&!Ii(this.WALLS[i].coords,e.coords)){let e=this.qSVG.angleBetweenEquations(this.WALLS[i].equations.base.A,this.equation2.A);if(e<20||e>160)break;this.equation1=this.editor.createEquationFromWall(this.WALLS[i]),this.equation1.follow=this.WALLS[i],this.equation1.backUp={coords:this.WALLS[i].coords,start:this.WALLS[i].start,end:this.WALLS[i].end,child:this.WALLS[i].child,parent:this.WALLS[i].parent},t=!0;break}t||(this.equation1=this.qSVG.perpendicularEquation(this.equation2,e.start.x,e.start.y))}if(null!=e.child){this.equation3=this.editor.createEquationFromWall(e.child);let t=this.qSVG.angleBetweenEquations(this.equation3.A,this.equation2.A);if(t<20||t>160){let t=!0;for(let i in this.WALLS)if(Ni(e.end,this.WALLS[i].coords)&&!Ii(this.WALLS[i],e.child)&&!Ii(this.WALLS[i],e)){null!=e.child.parent&&Ii(e,e.child.parent)&&(e.child.parent=null),null!=e.child.child&&Ii(e,e.child.child)&&(e.child.child=null),e.child=null,t=!1;break}if(t)if(Ii(e.child.start,e.end)){let t=new yn(e.end,e.child.start,"new",e.thick,e.material,e);Bn.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e,t.child=e.child,e.child.parent=t,e.child=t,this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y)}else if(Ii(e.child.end,e.end)){let t=new yn(e.end,e.child.end,"normal",e.thick,e.material,e);Bn.log("Push new wall "+JSON.stringify(t)),this.WALLS.push(t),t.parent=e,t.child=e.child,e.child.child=t,e.child=t,this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y)}}}if(null==e.child){let t=!1;for(let i in this.WALLS)if(Ni(e.end,this.WALLS[i].coords)&&!Ii(this.WALLS[i].coords,e.coords,"4")){let e=this.qSVG.angleBetweenEquations(this.WALLS[i].equations.base.A,this.equation2.A);if(e<20||e>160)break;this.equation3=this.editor.createEquationFromWall(this.WALLS[i]),this.equation3.follow=this.WALLS[i],this.equation3.backUp={coords:this.WALLS[i].coords,start:this.WALLS[i].start,end:this.WALLS[i].end,child:this.WALLS[i].child,parent:this.WALLS[i].parent},t=!0;break}t||(this.equation3=this.qSVG.perpendicularEquation(this.equation2,e.end.x,e.end.y))}this.equationFollowers=[];for(let i in this.WALLS)null==this.WALLS[i].child&&Ni(this.WALLS[i].end,e.coords)&&!Ii(e,this.WALLS[i])&&this.equationFollowers.push({wall:this.WALLS[i],eq:this.editor.createEquationFromWall(this.WALLS[i]),type:"end"}),null==this.WALLS[i].parent&&Ni(this.WALLS[i].start,e.coords)&&!Ii(e,this.WALLS[i])&&this.equationFollowers.push({wall:this.WALLS[i],eq:this.editor.createEquationFromWall(this.WALLS[i]),type:"start"});this.equationsObj=[];let t=this.editor.objFromWall(e);for(let i=0;i<t.length;i++){let o=t[i];this.equationsObj.push({obj:o,wall:e,eq:this.qSVG.perpendicularEquation(this.equation2,o.x,o.y)})}this.action=1}}}function Vn(e){j(e,(e=>{const{xMouse:t,yMouse:i}=this.calcul_snap(e);if(this.showMapLayer2DInputRef.current.getCheckedStatus())var o=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.setZoomParameters(e.deltaY<0?"zoomin":"zoomout",this.zoomXMove,!0)){const{xMouse:s,yMouse:n}=this.calcul_snap(e);this.originX_viewbox=this.originX_viewbox-(s-t),this.originY_viewbox=this.originY_viewbox-(n-i),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this.handleMapZoomChange(o),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes()}}),100)()}function Nn(e){if(1===e.touches.length)this.touchStartPageCoordinates={pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY},this.textAndUploadFloorplanImageBinderCreation(e),this.roomModeBinderCreation(e),this.selectModeObj2DWallNodeWallSegmentBinderCreation(e),this.handleMouseDown(e);else if(2===e.touches.length){this.drag="off",this.touchZoomTouches=[],this.touchZoomTouches.push({identifier:e.touches[0].identifier,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY}),this.touchZoomTouches.push({identifier:e.touches[1].identifier,pageX:e.touches[1].pageX,pageY:e.touches[1].pageY}),this.zoomTouchFocusPoint={pageX:(e.touches[0].pageX+e.touches[1].pageX)/2,pageY:(e.touches[0].pageY+e.touches[1].pageY)/2};const t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;this.touchZoomDollyStartDistance=Math.sqrt(t*t+i*i)}}var En=i(1317);function Hn(e){if(e.touches[0].pageX!==this.touchStartPageCoordinates.pageX||e.touches[0].pageY!==this.touchStartPageCoordinates.pageY)if(1===e.touches.length&&"on"===this.drag)En.log("Drag"),this.snap=this.calcul_snap(e,this.grid_snap),this.distX=(this.snap.xMouse-this.pox)*this.zoomFactor,this.distY=(this.snap.yMouse-this.poy)*this.zoomFactor,this.pox=this.snap.xMouse-this.distX,this.poy=this.snap.yMouse-this.distY,this.zoom_maker("zoomdrag",this.distX,this.distY);else if(2===e.touches.length){En.log("Zoom 2 fingers"),this.binder&&(this.removeBinder(),this.mode="select_mode");const i=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY;this.touchZoomDollyEndDistance=Math.sqrt(i*i+o*o);const s=this.touchZoomDollyEndDistance-this.touchZoomDollyStartDistance;if(En.log("Distance "+s),0!==s){const{xMouse:e,yMouse:i}=this.calcul_snap(this.zoomTouchFocusPoint);if(this.showMapLayer2DInputRef.current.getCheckedStatus())var t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});const o=s>0?.95*this.zoomFactor:this.zoomFactor/.95,n=1/o,a=o*this.taille_w;if(s>0){if(this.isOverMaxZoomIn(a,0))return}else if(this.isOverMaxZoomOut(a,0))return;const r=a-this.width_viewbox;En.log("Zoom out Width viewbox delta "+r),this.width_viewbox+=r,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox-r/2,this.originY_viewbox=this.originY_viewbox-r/2*this.ratio_viewbox,this.zoomFactor=this.width_viewbox/this.taille_w;const{xMouse:l,yMouse:h}=this.calcul_snap(this.zoomTouchFocusPoint);this.originX_viewbox=this.originX_viewbox-(l-e),this.originY_viewbox=this.originY_viewbox-(h-i),this.setScaleValueWidth(n),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this.handleMapZoomChange(t),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes(),this.touchZoomDollyStartDistance=this.touchZoomDollyEndDistance}}else this.handleMouseMove(e)}function zn(e){this.drag="off",this.handleMouseUp(e)}function Gn(e){(this.lineModeDraggOn||this.selectModeRightClickDraggOn)&&e.preventDefault(),this.lineModeDraggOn=!1,this.selectModeRightClickDraggOn=!1}var Un=i(3308),qn=i(1051),Kn=i(8393),Yn=i(2317),Xn=i(6788),Zn=i(2550),Jn=i(1015);class Qn extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 95.098 95.098",style:{enableBackground:"new 0 0 95.098 95.098",marginRight:5},xmlSpace:"preserve",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M47.549,0C21.288,0,0,21.288,0,47.549s21.288,47.549,47.549,47.549c26.262,0,47.549-21.288,47.549-47.549\r S73.811,0,47.549,0z M47.549,85.098C26.844,85.098,10,68.253,10,47.549S26.844,10,47.549,10s37.549,16.845,37.549,37.549\r S68.254,85.098,47.549,85.098z"}),(0,l.jsx)("path",{d:"M77.665,29.911c-0.25-0.428-0.755-0.633-1.231-0.503l-33.783,9.213c-0.186,0.052-0.355,0.151-0.492,0.288L17.596,63.865\r c-0.346,0.354-0.414,0.895-0.164,1.32c0.25,0.428,0.755,0.635,1.232,0.504l33.783-9.214c0.093-0.024,0.182-0.062,0.265-0.11\r c0.083-0.049,0.159-0.108,0.228-0.178l24.562-24.957C77.848,30.879,77.915,30.337,77.665,29.911z M26.705,59.756l16.46-16.725\r l6.179,10.551L26.705,59.756z"})]})})}}const $n=Qn;class ea extends o.Component{render(){return(0,l.jsx)("svg",{width:"20px",height:"20px",style:{marginRight:5},viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"m22 6-3-4-3 4h2v4h-2l3 4 3-4h-2V6zM9.307 4l-6 16h2.137l1.875-5h6.363l1.875 5h2.137l-6-16H9.307zm-1.239 9L10.5 6.515 12.932 13H8.068z"})})}}const ta=ea;class ia extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"25px",height:"25px",viewBox:"0 0 477.381 477.382",style:{marginRight:5,enableBackground:"new 0 0 477.381 477.382"},xmlSpace:"preserve",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M477.381,103.373c0-54.988-44.577-99.564-99.565-99.564c-53.146,0-96.562,41.64-99.413,94.074\r c-13.35-2.513-27.168-3.838-41.322-3.838c-113.595,0-205.681,84.96-205.681,189.764c0,28.472,6.81,55.472,18.986,79.71\r L1.735,451.491c-2.703,4.889-2.215,10.917,1.239,15.308c2.673,3.397,6.721,5.3,10.911,5.3c1.223,0,2.457-0.163,3.674-0.498\r l106.506-29.233c32.435,19.721,71.269,31.206,113.016,31.206c113.594,0,205.681-84.96,205.681-189.764\r c0-32.378-8.8-62.854-24.3-89.521C453.186,178.737,477.381,143.881,477.381,103.373z M377.816,177.937\r c-41.115,0-74.565-33.449-74.565-74.564c0-41.115,33.45-74.564,74.565-74.564s74.565,33.449,74.565,74.564\r C452.381,144.487,418.931,177.937,377.816,177.937z"}),(0,l.jsx)("path",{d:"M419.955,92.871h-31.636V61.233c0-5.801-4.703-10.503-10.503-10.503c-5.799,0-10.502,4.702-10.502,10.503V92.87h-31.636\r c-5.802,0-10.503,4.702-10.503,10.503c0,5.8,4.701,10.502,10.503,10.502h31.636v31.636c0,5.801,4.703,10.503,10.502,10.503\r c5.801,0,10.503-4.702,10.503-10.503v-31.636h31.636c5.802,0,10.503-4.702,10.503-10.502\r C430.458,97.572,425.755,92.871,419.955,92.871z"})]})})}}const oa=ia;class sa extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"20px",height:"20px",viewBox:"0 0 347.523 347.523",style:{marginRight:5,enableBackground:"new 0 0 347.523 347.523"},xmlSpace:"preserve",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M108.674,196.125c-2.857-0.402-5.777-0.592-8.746-0.534c-14.267,0.278-36.342,6.092-60.493,32.207\r c-19.171,20.729-19.954,42.635-20.644,61.961c-0.66,18.474-1.181,33.065-16.507,43.727c-1.506,1.049-2.318,2.837-2.113,4.661\r c0.128,1.147,0.645,2.191,1.434,2.98c0.466,0.466,1.026,0.843,1.658,1.099c28.523,11.553,77.316,5.895,117.044-33.833\r c18.043-18.044,28.812-37.145,31.14-55.233c0.607-4.719,0.618-9.323,0.091-13.763L108.674,196.125z M100.915,229.382\r c-1.553,2.174-3.859,3.612-6.494,4.052c-19.209,3.202-25.884,15.953-26.159,16.494c-1.627,3.387-5.167,5.611-8.989,5.611\r c-0.337,0-0.676-0.017-1.015-0.052c-1.149-0.117-2.264-0.432-3.313-0.936c-4.97-2.391-7.069-8.376-4.681-13.347\r c0.442-0.918,11.153-22.546,40.869-27.5c0.546-0.09,1.1-0.136,1.647-0.136c4.908,0,9.055,3.516,9.861,8.357\r C103.08,224.559,102.467,227.207,100.915,229.382z"}),(0,l.jsx)("path",{d:"M340.587,6.796c-8.615-8.614-22.425-9.1-31.624-1.112c-5.782,5.021-141.818,123.166-160.166,141.513\r c-9.175,9.175-20.946,24.898-31.124,39.428l42.864,43.271c14.546-10.18,30.345-22.003,39.65-31.308\r C218.749,180.024,336.69,44.193,341.703,38.42C349.688,29.22,349.201,15.41,340.587,6.796z"})]})})}}const na=sa;class aa extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"22px",height:"22px",viewBox:"0 0 360.39 360.389",style:{enableBackground:"new 0 0 360.39 360.389"},xmlSpace:"preserve",children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M301.123,173.306L118.995,3.265c-3.242-3.038-7.891-4.049-12.105-2.639c-4.211,1.404-7.317,5.006-8.086,9.389\r L55.602,255.404c-0.854,4.847,1.306,9.717,5.464,12.341c4.152,2.625,9.49,2.465,13.491-0.378l59.968-42.699l47.219,127.448\r c2.127,6.336,8.984,9.765,15.332,7.648l62.087-20.771c6.342-2.116,9.771-8.984,7.648-15.327l-47.228-127.43l73.596-1.975\r c4.905-0.13,9.262-3.215,11.006-7.802C305.929,181.85,304.717,176.654,301.123,173.306z M202.591,172.455\r c-3.842,0.109-7.4,2.004-9.599,5.163c-2.205,3.147-2.778,7.146-1.561,10.781l48.557,131.467l-39.111,13.075l-48.56-131.455\r c-1.224-3.647-4.093-6.502-7.743-7.679c-3.656-1.188-7.643-0.585-10.772,1.649l-49.216,35.027l34.206-194.281l144.19,134.636\r L202.591,172.455z"})})})}}const ra=aa;class la extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 60 60",style:{enableBackground:"new 0 0 60 60",width:22,height:22},xmlSpace:"preserve",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M58,37.104V4c0-0.553-0.448-1-1-1H1C0.448,3,0,3.447,0,4v44c0,0.553,0.448,1,1,1h34.003c1.963,4.693,6.6,8,11.997,8\r c7.168,0,13-5.832,13-13C60,41.465,59.26,39.105,58,37.104z M34.359,47H2V5h54v29.622c-0.17-0.164-0.354-0.311-0.532-0.465\r c-0.088-0.075-0.171-0.155-0.261-0.228c-0.235-0.192-0.48-0.37-0.728-0.545c-0.092-0.065-0.181-0.135-0.275-0.198\r c-0.245-0.163-0.498-0.312-0.754-0.458c-0.109-0.063-0.214-0.13-0.325-0.189c-0.077-0.041-0.154-0.083-0.232-0.123\r c0.179-0.385,0.112-0.852-0.218-1.154l-12-11c-0.196-0.179-0.45-0.277-0.72-0.262c-0.265,0.012-0.515,0.129-0.694,0.325\r l-9.794,10.727l-4.743-4.743c-0.374-0.373-0.972-0.391-1.368-0.044L6.339,41.249c-0.415,0.365-0.455,0.997-0.09,1.412\r C6.447,42.886,6.723,43,7,43c0.234,0,0.47-0.082,0.66-0.249l16.313-14.362l10.302,10.301c0.203,0.203,0.47,0.295,0.736,0.287\r C34.361,40.523,34,42.22,34,44c0,0.493,0.033,0.977,0.087,1.456c0.009,0.075,0.024,0.149,0.034,0.224\r c0.056,0.428,0.131,0.849,0.227,1.262C34.353,46.961,34.354,46.981,34.359,47z M48.779,31.136\r c-0.162-0.022-0.321-0.055-0.485-0.071C47.867,31.023,47.435,31,47,31c-4.773,0-8.942,2.593-11.203,6.437\r c-0.036-0.054-0.06-0.114-0.107-0.162l-4.807-4.807l9.181-10.054l9.694,8.887c-0.067-0.015-0.133-0.032-0.2-0.045\r C49.301,31.204,49.039,31.172,48.779,31.136z M47,55c-4.787,0-8.859-3.08-10.367-7.358c-0.094-0.267-0.176-0.536-0.249-0.806\r c-0.015-0.058-0.03-0.115-0.045-0.173c-0.06-0.238-0.112-0.476-0.156-0.716c-0.024-0.133-0.042-0.267-0.061-0.401\r c-0.026-0.18-0.054-0.36-0.071-0.54C36.021,44.674,36,44.339,36,44c0-6.065,4.935-11,11-11c0.426,0,0.848,0.031,1.265,0.079\r c0.127,0.015,0.25,0.039,0.375,0.057c0.291,0.044,0.579,0.096,0.863,0.162c0.141,0.033,0.281,0.07,0.421,0.108\r c0.268,0.074,0.531,0.159,0.792,0.253c0.134,0.048,0.269,0.094,0.4,0.147c0.295,0.119,0.583,0.255,0.866,0.399\r c0.083,0.042,0.17,0.077,0.252,0.121c0.342,0.185,0.671,0.393,0.992,0.614c0.131,0.09,0.255,0.19,0.382,0.286\r c0.199,0.15,0.395,0.305,0.584,0.469c0.127,0.11,0.251,0.224,0.373,0.339c0.193,0.184,0.379,0.377,0.559,0.575\r c0.094,0.103,0.191,0.202,0.281,0.309c0.261,0.311,0.51,0.634,0.739,0.976C57.315,39.643,58,41.743,58,44\r C58,50.065,53.065,55,47,55z"}),(0,l.jsx)("path",{d:"M53,43h-5v-5c0-0.553-0.448-1-1-1s-1,0.447-1,1v5h-5c-0.552,0-1,0.447-1,1s0.448,1,1,1h5v5c0,0.553,0.448,1,1,1\r s1-0.447,1-1v-5h5c0.552,0,1-0.447,1-1S53.552,43,53,43z"}),(0,l.jsx)("path",{d:"M16,25.138c3.071,0,5.569-2.498,5.569-5.568C21.569,16.498,19.071,14,16,14s-5.569,2.498-5.569,5.569\r C10.431,22.64,12.929,25.138,16,25.138z M16,16c1.968,0,3.569,1.602,3.569,3.569S17.968,23.138,16,23.138s-3.569-1.601-3.569-3.568\r S14.032,16,16,16z"})]})})}}const ha=la;class ca extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",height:"800px",width:"800px",version:"1.1",id:"Capa_1",viewBox:"0 0 297 297",children:(0,l.jsx)("path",{d:"M148.5,0C66.653,0,0.067,66.616,0.067,148.499C0.067,230.383,66.653,297,148.5,297s148.433-66.617,148.433-148.501\r C296.933,66.616,230.347,0,148.5,0z M158.597,276.411v-61.274c0-5.575-4.521-10.097-10.097-10.097s-10.097,4.521-10.097,10.097\r v61.274c-62.68-4.908-112.845-55.102-117.747-117.814h61.207c5.575,0,10.097-4.521,10.097-10.097s-4.522-10.097-10.097-10.097\r H20.656C25.558,75.69,75.723,25.497,138.403,20.589v61.274c0,5.575,4.521,10.097,10.097,10.097s10.097-4.521,10.097-10.097V20.589\r c62.681,4.908,112.846,55.102,117.747,117.814h-61.207c-5.575,0-10.097,4.521-10.097,10.097s4.521,10.097,10.097,10.097h61.207\r C271.441,221.31,221.276,271.503,158.597,276.411z"})})}}const da=ca;class pa extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsx)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M337 583 c-4 -3 -7 -46 -7 -95 l0 -88 -100 0 -100 0 0 -140 0 -140\r 240 0 240 0 0 235 0 235 -133 0 c-74 0 -137 -3 -140 -7z m243 -103 l0 -80 -55\r 0 c-42 0 -55 -3 -55 -15 0 -12 13 -15 55 -15 l55 0 0 -110 0 -110 -105 0 -105\r 0 0 50 c0 38 -4 50 -15 50 -11 0 -15 -12 -15 -50 l0 -50 -90 0 -90 0 0 110 0\r 110 100 0 100 0 0 95 0 95 110 0 110 0 0 -80z"})})})}}const ma=pa;class ua extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsxs)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:[(0,l.jsx)("path",{d:"M375 654 c-16 -17 -12 -53 9 -66 30 -20 66 0 66 37 0 42 -44 59 -75\r 29z"}),(0,l.jsx)("path",{d:"M311 516 c-44 -34 -70 -87 -71 -143 0 -41 28 -26 35 18 6 37 40 87\r 51 76 7 -7 -23 -150 -45 -208 -12 -30 -32 -70 -46 -89 -27 -36 -31 -55 -15\r -65 25 -15 50 11 96 100 l48 94 40 -36 c55 -49 56 -50 56 -111 0 -50 2 -53 23\r -50 18 2 23 10 25 47 5 65 -3 86 -58 146 -28 30 -50 61 -50 68 0 6 7 32 14 57\r 12 40 15 43 22 23 5 -12 26 -33 47 -47 66 -45 94 -28 32 20 -19 14 -47 49 -63\r 78 -24 45 -31 51 -62 54 -27 1 -45 -6 -79 -32z"})]})})}}const ga=ua;class fa extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",width:"22px",height:"22px",viewBox:"0 0 75.000000 75.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsx)("g",{transform:"translate(0.000000,75.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M299 595 l-84 -52 -5 -49 c-5 -47 -6 -49 -67 -84 l-62 -35 -3 -88\r c-2 -49 0 -97 4 -107 3 -9 49 -39 100 -66 l94 -47 195 114 194 114 3 87 3 87\r -43 27 c-24 15 -88 55 -144 90 l-100 62 -85 -53z m214 -55 c58 -36 107 -67\r 107 -70 0 -3 -31 -23 -70 -44 l-70 -37 -45 32 -45 32 0 80 c0 43 4 77 8 75 4\r -1 56 -32 115 -68z m-143 -15 c0 -63 -3 -76 -19 -85 -28 -15 -31 -13 -31 18 0\r 18 -10 35 -32 53 l-32 27 49 31 c27 17 53 31 57 31 4 0 8 -34 8 -75z m-100\r -35 c0 -4 -7 -10 -15 -14 -10 -4 -15 1 -15 14 0 13 5 18 15 14 8 -4 15 -10 15\r -14z m28 -77 c-3 -45 -6 -49 -46 -71 l-43 -24 -41 27 -41 27 74 44 c41 24 80\r 44 87 44 9 0 12 -13 10 -47z m352 -31 c0 -44 -5 -63 -17 -74 -27 -22 -331\r -198 -343 -198 -7 0 -10 26 -8 73 l3 72 170 92 c94 51 176 92 183 93 8 0 12\r -18 12 -58z m-231 19 l34 -28 -88 -46 c-97 -52 -96 -52 -113 -35 -9 9 -2 17\r 28 35 27 17 40 31 40 46 0 13 11 29 28 39 35 21 32 22 71 -11z m-233 -97 l74\r -46 0 -74 c0 -41 -3 -74 -7 -74 -5 0 -41 17 -80 37 l-73 38 0 83 c0 45 3 82 6\r 82 4 0 40 -21 80 -46z"})})})}}const ba=fa;class wa extends o.Component{render(){return(0,l.jsx)("svg",{viewBox:"0 0 512 512",children:(0,l.jsx)("g",{children:(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:"M497.972,113.851l-92.47-92.47c-9.06-9.061-21.107-14.051-33.921-14.051c-12.813,0-24.861,4.99-33.922,14.051\r l-276.1,276.099l21.069,21.069l-25.993,25.993c-6.052,6.051-9.385,14.099-9.385,22.658c0,8.558,3.333,16.605,9.385,22.657\r l1.198,1.198L0,448.885l85.151,55.786l43.149-43.15l1.197,1.198c6.052,6.052,14.098,9.385,22.657,9.385\r c8.559,0,16.605-3.333,22.657-9.385l25.993-25.992l21.068,21.068l276.101-276.099\r C516.676,162.989,516.676,132.554,497.972,113.851z M81.139,465.757l-33.283-21.804l31.439-31.439l27.545,27.545L81.139,465.757z\r M153.351,441.255c-0.658,0.658-1.734,0.658-2.392,0l-1.197-1.198l-70.468-70.467l-1.198-1.198\r c-0.329-0.329-0.495-0.731-0.495-1.196c0-0.465,0.167-0.867,0.495-1.197l25.992-25.992l75.253,75.254L153.351,441.255z\r M221.873,414.87L104.482,297.479l36.67-36.67l117.391,117.391L221.873,414.87z M476.511,160.233L280.005,356.738L162.614,239.347\r L359.12,42.843c3.329-3.329,7.754-5.162,12.46-5.162s9.131,1.833,12.459,5.161l92.47,92.47\r C483.381,142.183,483.381,153.362,476.511,160.233z"})})})})}}const Ca=wa;class xa extends o.Component{render(){return(0,l.jsx)("svg",{viewBox:"0 0 512 512",children:(0,l.jsx)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M0 2560 l0 -2560 2560 0 2560 0 0 2560 0 2560 -2560 0 -2560 0 0\r\n-2560z m960 1930 l0 -330 -330 0 -330 0 0 330 0 330 330 0 330 0 0 -330z m970\r\n0 l0 -330 -335 0 -335 0 0 330 0 330 335 0 335 0 0 -330z m960 0 l0 -330 -330\r\n0 -330 0 0 330 0 330 330 0 330 0 0 -330z m970 205 c0 -111 -2 -126 -17 -132\r\n-172 -58 -329 -206 -379 -355 l-16 -48 -129 0 -129 0 0 330 0 330 335 0 335 0\r\n0 -125z m960 -205 l0 -330 -130 0 c-103 0 -130 3 -130 14 0 7 -16 46 -36 86\r\n-54 107 -155 209 -256 260 -44 22 -87 40 -94 40 -11 0 -14 26 -14 130 l0 130\r\n330 0 330 0 0 -330z m-700 -231 c182 -82 219 -334 68 -463 -146 -125 -378 -64\r\n-445 117 -17 46 -16 136 3 189 21 62 74 121 136 152 67 34 170 36 238 5z\r\nm-3160 -526 l0 -128 -91 -43 c-119 -56 -217 -151 -272 -263 -20 -41 -37 -83\r\n-37 -92 0 -15 -15 -17 -130 -17 l-130 0 0 335 0 335 330 0 330 0 0 -127z m968\r\n-210 l2 -333 -130 0 c-104 0 -130 3 -130 14 0 7 -18 50 -40 94 -66 131 -181\r\n236 -312 284 l-58 21 0 122 c0 67 3 125 7 128 4 4 153 6 332 5 l326 -3 3 -332z\r\nm962 2 l0 -335 -330 0 -330 0 0 335 0 335 330 0 330 0 0 -335z m566 298 c42\r\n-103 74 -153 144 -223 70 -70 120 -102 223 -144 l37 -15 0 -125 0 -126 -335 0\r\n-335 0 0 328 c0 181 3 332 7 335 3 4 60 7 125 7 l119 0 15 -37z m1364 -298 l0\r\n-335 -330 0 -330 0 0 129 0 129 49 17 c149 49 295 205 354 378 6 15 21 17 132\r\n17 l125 0 0 -335z m-3584 -233 c58 -30 103 -78 132 -141 21 -45 24 -64 20\r\n-126 -10 -155 -124 -261 -278 -259 -77 2 -125 20 -182 72 -59 53 -88 121 -88\r\n205 0 128 64 217 189 264 51 19 156 11 207 -15z m-676 -415 c0 -27 69 -155\r\n113 -209 51 -61 154 -135 232 -166 l50 -20 3 -126 3 -126 -331 0 -330 0 0 330\r\n0 330 130 0 c99 0 130 -3 130 -13z m1370 -317 l0 -330 -335 0 -336 0 3 126 3\r\n126 51 18 c143 50 288 195 340 341 l18 49 128 0 128 0 0 -330z m960 0 l0 -330\r\n-330 0 -330 0 0 330 0 330 330 0 330 0 0 -330z m970 0 l0 -330 -335 0 -335 0\r\n0 330 0 330 335 0 335 0 0 -330z m960 0 l0 -330 -330 0 -330 0 0 330 0 330\r\n330 0 330 0 0 -330z m-3860 -965 l0 -335 -330 0 -330 0 0 335 0 335 330 0 330\r\n0 0 -335z m970 0 l0 -335 -332 2 -333 3 -3 320 c-1 176 0 325 3 332 3 10 78\r\n13 335 13 l330 0 0 -335z m960 206 l0 -129 -49 -17 c-119 -39 -258 -165 -316\r\n-287 -18 -37 -35 -76 -38 -88 -5 -19 -13 -20 -131 -20 l-126 0 0 335 0 335\r\n330 0 330 0 0 -129z m965 -206 l0 -330 -127 -3 -126 -3 -17 50 c-40 120 -168\r\n261 -296 325 -39 20 -78 36 -85 36 -11 0 -14 27 -14 130 l0 130 333 -2 332 -3\r\n0 -330z m965 0 l0 -335 -330 0 -330 0 0 335 0 335 330 0 330 0 0 -335z m-1665\r\n-229 c60 -27 107 -72 138 -130 17 -32 22 -58 22 -121 0 -70 -4 -87 -29 -133\r\n-53 -96 -132 -141 -246 -141 -81 -1 -150 29 -202 87 -53 59 -71 105 -71 187\r\n-1 99 35 166 125 234 61 46 185 54 263 17z m-2195 -736 l0 -330 -330 0 -330 0\r\n0 330 0 330 330 0 330 0 0 -330z m970 0 l0 -330 -335 0 -335 0 0 330 0 330\r\n335 0 335 0 0 -330z m569 284 c18 -61 100 -183 154 -229 57 -49 143 -100 195\r\n-117 l42 -13 0 -127 0 -128 -330 0 -330 0 0 330 0 330 128 0 128 0 13 -46z\r\nm1351 -284 l0 -330 -330 0 -331 0 3 126 3 125 57 23 c134 55 259 176 320 313\r\nl33 73 123 0 122 0 0 -330z m970 0 l0 -330 -330 0 -330 0 0 330 0 330 330 0\r\n330 0 0 -330z"})})})}}const ya=xa;class Sa extends o.Component{render(){return(0,l.jsxs)("svg",{viewBox:"0 0 1024 1024",children:[(0,l.jsx)("path",{d:"M331.7248 412.202667c-3.882667 0.2816-7.765333 0.5888-11.7248 0.5888-87.048533 0-157.866667-70.818133-157.866667-157.866667s70.818133-157.866667 157.866667-157.866667S477.866667 167.876267 477.866667 254.933333c0 3.5584-0.1792 7.082667-0.418133 10.581333l-1.058133-0.187733-33.604267-6.033067c-5.0944-0.913067-10.231467 1.3312-13.0304 5.691733-2.798933 4.352-2.688 9.966933 0.264533 14.216533l41.344 59.4432c4.0448 5.802667 12.0064 7.236267 17.8176 3.2l59.4432-41.344c4.2496-2.952533 6.306133-8.183467 5.1968-13.243733s-5.154133-8.951467-10.24-9.864533l-32.384-5.8112C511.675733 266.077867 512 260.539733 512 254.933333c0-105.873067-86.135467-192-192-192S128 149.060267 128 254.933333s86.135467 192 192 192c8.0128 0 15.906133-0.546133 23.671467-1.5104l-10.487467-28.6208C332.6208 415.274667 332.2112 413.730133 331.7248 412.202667z"}),(0,l.jsx)("path",{d:"M811.9808 527.1296c-7.074133-19.4304-27.3664-32.4864-50.491733-32.4864-6.621867 0-13.013333 1.1008-19.003733 3.285333-3.259733 1.186133-11.144533 5.333333-18.679467 11.076267-9.6-21.188267-30.933333-35.131733-54.442667-35.131733-6.954667 0-13.832533 1.211733-20.4288 3.6096-12.945067 4.7104-23.6288 13.525333-30.651733 25.147733-14.848-18.944-39.492267-26.8544-62.429867-18.5088-14.984533 5.4528-26.6496 16.392533-32.8704 30.805333l-59.5456-147.0208c-9.6-26.368-32.1792-43.400533-57.506133-43.400533-6.877867 0-13.781333 1.245867-20.539733 3.703467-32.017067 11.665067-46.754133 46.3104-34.176 80.8448l98.961067 254.7968c-5.188267 5.879467-12.680533 15.8976-21.102933 31.8976-29.1328 55.415467-8.5504 156.296533 67.566933 212.471467 54.417067 40.157867 104.584533 58.8544 157.883733 58.8544 31.240533 0 63.752533-6.2976 99.3792-19.268267 101.2736-36.864 116.6592-100.0192 123.7248-161.536C884.445867 727.108267 814.9504 535.2704 811.9808 527.1296zM852.1984 783.368533c-6.656 57.9328-19.310933 108.4672-107.042133 140.398933-32.785067 11.9296-62.421333 17.732267-90.624 17.732267-48.2048 0-92.2112-16.605867-142.685867-53.8624-45.448533-33.544533-91.460267-120.328533-60.100267-179.959467 3.3792-6.442667 6.528-11.665067 9.2928-15.829333l32.324267 83.208533c2.56 6.587733 9.966933 9.847467 16.5632 7.296 6.587733-2.56 9.856-9.975467 7.296-16.5632L375.185067 400.059733c-7.7312-21.239467 0.0768-40.891733 18.978133-47.7696 18.645333-6.775467 37.751467 3.822933 45.397333 24.823467l89.745067 221.602133c2.4576 6.084267 9.122133 9.344 15.453867 7.483733 6.2976-1.834667 10.1888-8.1408 9.0112-14.600533l-7.048533-38.2976c-0.136533-0.699733-0.315733-1.390933-0.5632-2.065067-3.217067-8.823467-3.089067-18.0992 0.341333-26.103467 3.3792-7.901867 9.821867-13.917867 18.133333-16.938667 16.64-6.058667 33.143467 3.319467 39.876267 21.8112l8.7552 24.0384 0 0.008533c2.414933 6.638933 9.770667 10.069333 16.401067 7.645867 6.638933-2.414933 10.069333-9.762133 7.645867-16.4096l-0.017067-0.0512c-3.0976-8.5504-2.679467-17.800533 1.160533-26.052267 3.848533-8.260267 10.692267-14.532267 19.2512-17.646933 3.780267-1.373867 7.7056-2.065067 11.6736-2.065067 14.301867 0 27.195733 9.0368 32.093867 22.468267 0 0 17.245867 42.888533 21.026133 52.1216 3.780267 9.250133 9.7792 10.717867 16.1792 8.32s8.686933-9.002667 5.8112-17.1008-11.144533-30.600533-11.144533-30.600533c3.950933-4.096 12.2624-10.6496 17.92-12.714667 3.165867-1.152 6.6048-1.732267 10.24-1.732267 12.219733 0 23.082667 6.434133 26.4448 15.633067C807.534933 589.7472 857.2928 739.2 852.1984 783.368533z"})]})}}const _a=Sa;class Da extends o.Component{render(){return(0,l.jsxs)("svg",{viewBox:"0 0 1229 1024",children:[(0,l.jsx)("path",{d:"M710.23616 236.98432c1.88416 1.56672 4.20864 2.37568 6.56384 2.37568 1.47456 0 2.95936-0.31744 4.34176-0.96256C724.736 236.70784 727.04 233.09312 727.04 229.12L727.04 215.04l40.96 0 0 40.96-10.24 0c-3.97312 0-7.58784 4.21888-9.2672 7.81312-1.6896 3.60448-1.13664 8.8064 1.40288 11.85792l25.6 31.20128c1.9456 2.33472 4.83328 3.92192 7.87456 3.92192s5.91872-1.2288 7.87456-3.56352l25.6-30.65856c2.53952-3.05152 3.09248-9.18528 1.40288-12.78976C816.54784 260.18816 812.93312 256 808.96 256l-10.24 0 0-40.96 40.96 0 0 14.08c0 3.97312 2.304 7.58784 5.89824 9.27744 1.3824 0.64512 2.85696 0.96256 4.34176 0.96256 2.34496 0 4.67968-0.80896 6.56384-2.37568l30.72-25.6C889.52832 209.43872 890.88 206.55104 890.88 203.52s-1.35168-5.91872-3.67616-7.86432l-30.72-25.6c-3.05152-2.53952-7.31136-3.08224-10.89536-1.41312C841.984 170.32192 839.68 173.93664 839.68 177.92L839.68 184.32l-40.96 0 0-40.96 10.24 0c3.97312 0 7.58784-0.37888 9.2672-3.98336 1.6896-3.60448 1.13664-6.89152-1.40288-9.94304l-25.6-30.23872c-3.90144-4.66944-11.83744-4.43392-15.73888 0.23552l-25.6 30.84288c-2.53952 3.05152-3.09248 5.44768-1.40288 9.04192C750.17216 142.91968 753.78688 143.36 757.76 143.36l10.24 0 0 40.96-40.96 0 0-6.4c0-3.97312-2.304-7.58784-5.89824-9.27744-3.56352-1.66912-7.8336-1.13664-10.89536 1.41312l-30.72 25.6C677.19168 197.59104 675.84 200.47872 675.84 203.52s1.35168 5.91872 3.67616 7.86432L710.23616 236.98432z"}),(0,l.jsx)("path",{d:"M834.37568 469.76c-4.16768 0-14.7456 1.4336-25.62048 4.8128-2.77504-36.99712-33.78176-66.2528-71.4752-66.2528-16.96768 0-32.58368 5.92896-44.87168 15.8208-9.08288-27.72992-33.09568-46.5408-62.83264-46.5408-19.69152 0-37.21216 8.09984-49.70496 21.32992l-3.15392-88.2176c34.95936-25.10848 57.79456-66.07872 57.79456-112.31232 0-76.22656-62.01344-138.24-138.24-138.24s-138.24 62.01344-138.24 138.24c0 53.00224 30.08512 98.93888 73.99424 122.10176l4.62848 216.40192c-8.27392 4.49536-20.82816 12.71808-36.89472 27.31008-55.59296 50.52416-73.78944 172.72832-11.008 267.3152 69.888 105.28768 151.77728 150.23104 273.83808 150.23104 129.32096 0 172.58496-64.90112 205.824-131.3792 31.96928-63.93856 32.33792-308.79744 32.33792-319.1808C900.7616 498.46272 869.74464 469.76 834.37568 469.76zM840.93952 836.63872c-31.29344 62.58688-66.304 114.40128-178.33984 114.40128-111.98464 0-183.90016-39.54688-248.23808-136.4992-37.48864-56.48384-53.76-173.21984 6.07232-227.60448 6.46144-5.86752 12.16512-10.46528 16.9984-14.03904l2.29376 107.10016c0.18432 8.47872 6.85056 15.43168 15.68768 15.03232 8.47872-0.18432 15.2064-7.19872 15.03232-15.68768l-10.07616-470.70208c0-27.12576 16.85504-46.08 41.00096-46.08s41.00096 18.95424 41.0112 46.63296l10.24 286.72c0.27648 7.87456 6.48192 14.26432 14.336 14.77632 7.77216 0.48128 14.83776-4.99712 16.15872-12.76928l7.77216-46.08c0.14336-0.84992 0.21504-1.69984 0.21504-2.56 0-23.3472 16.54784-40.96 38.49216-40.96 24.75008 0 36.02432 21.22752 36.02432 40.96l0 30.72c0 8.48896 6.88128 15.36 15.36 15.36s15.36-6.87104 15.36-15.36c0-22.58944 18.37056-40.96 40.96-40.96s40.96 18.37056 40.96 40.96l0 66.56c0 8.47872 6.88128 15.36 15.36 15.36s15.36-6.88128 15.36-15.36l0-39.1168c6.144-2.99008 18.18624-6.97344 25.41568-6.97344 18.3296 0 35.65568 14.92992 35.65568 30.72C870.0416 599.97184 864.79872 788.92032 840.93952 836.63872z"})]})}}const va=Da;class Ta extends o.Component{constructor(e){super(e),this.smallGridSize="metric"===e.measureSystemContext.userUnit?e.svgMeterUnits:M(e.imperialSystemSquareFeetSize,"feet","meter")*e.svgMeterUnits,this.bigGridSizeSmallGridCount=6,this.bigGridSize=this.bigGridSizeSmallGridCount*this.smallGridSize}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("pattern",{id:"smallGrid",width:this.smallGridSize,height:this.smallGridSize,patternUnits:"userSpaceOnUse",children:(0,l.jsx)("path",{d:"M 30 0 L 0 0 0 30",fill:"none",stroke:"#777",strokeWidth:"0.25"})}),(0,l.jsxs)("pattern",{id:"grid",width:this.bigGridSize,height:this.bigGridSize,patternUnits:"userSpaceOnUse",children:[(0,l.jsx)("rect",{width:this.bigGridSize,height:this.bigGridSize,fill:"url(#smallGrid)"}),(0,l.jsx)("path",{d:"M 200 10 L 200 0 L 190 0 M 0 10 L 0 0 L 10 0 M 0 190 L 0 200 L 10 200 M 190 200 L 200 200 L 200 190",fill:"none",stroke:"#999",strokeWidth:"0.8"})]})]})}}const ja=Ta;class Oa extends o.Component{render(){return(0,l.jsx)("div",{className:"indoor-modal",ref:this.props.modalRef,style:this.props.indoorModalContainerStyle||{},children:(0,l.jsx)("div",{className:"indoor-modal-dialog ".concat(this.props.indoorModalDialogClasses||""),style:this.props.indoorModalDialogStyle||{},children:(0,l.jsxs)("div",{className:"indoor-modal-content",children:[(0,l.jsx)("div",{className:"indoor-modal-header",children:(0,l.jsx)("h3",{className:"indoor-modal-title",children:"GLAMOS Indoor Mapping"})}),this.props.modalBody?(0,l.jsx)("div",{className:"indoor-modal-body",children:this.props.modalBody}):null,this.props.modalFooter?(0,l.jsx)("div",{className:"indoor-modal-footer",children:this.props.modalFooter}):null]})})})}}const Ia=Oa;var Pa=i(1618);class ka extends o.Component{render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{ref:this.props.panelRef,className:"panel panel-transition",onMouseMove:()=>this.props.onPanelMouseMove&&this.props.onPanelMouseMove(),style:{width:this.props.panelWidth||200,left:this.props.panelWidth?-this.props.panelWidth:-200},children:(0,l.jsx)("ul",{className:"list-unstyled",children:this.props.children})}),this.props.panelControlRef&&(0,l.jsx)("div",{ref:this.props.panelControlRef,title:"Hide panel",className:"panel-control-container panel-transition svg-center-inside-container",style:this.props.panelControlStyles||{},onClick:()=>this.props.onPanelControlClick(),children:(0,l.jsx)(Pa.Z,{className:"panel-transition"})})]})}}const Fa=ka;var Ma=i(1317);class Aa extends o.Component{constructor(e){super(),this.onFloorplanDrawedCallback=()=>{this.floorplanDrawedCallbackCalled||(this.imagePaths.filter((e=>!this.props.usedImagePaths.find((t=>t.name===e.name)))).forEach((e=>this.imageLoadAndDraw(e))),this.floorplanDrawedCallbackCalled=!0)},this.imageLoadAndDraw=e=>{const t=!!e.objId;this.loadingImageDataUrls.push(e.name);const i=new Image;i.onload=()=>{if(this.loadingImageDataUrls=this.loadingImageDataUrls.filter((t=>t!==e.name)),this.loadedImageDataUrls.find((t=>t.id===e.name)))return;const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const o=t.getContext("2d");e.mirrorImage&&(o.translate(e.width,e.height),o.rotate(Math.PI)),o.drawImage(i,0,0,e.width,e.height),this.loadedImageDataUrls.push({id:e.name,dataURL:t.toDataURL("image/".concat(this.props.imageFormat)),width:e.width,height:e.height}),this.forceUpdate((()=>{this.arePatternsLoaded()&&this.props.emitDataLoadedEvent&&document.dispatchEvent(new Event("patternImageDataLoaded"))}))},i.onerror=e=>Ma.log("AsyncSvgImagePattern error",e),i.crossOrigin="anonymous";const o="https://app.klet3d.com";i.src=this.props.furniturePattern?t?"https://app.klet3d.com/api/glamos/klet3d/objects-download2/".concat(e.objId,"/").concat(e.name,"-top.").concat(this.props.imageFormat):"".concat(o,"/models3D/objMtl/").concat(this.props.publicFolderName,"/").concat(e.folder,"/").concat(e.name,"-top.").concat(this.props.imageFormat):"".concat(o,"/").concat(this.props.publicFolderName,"/").concat(e.name,".").concat(this.props.imageFormat)},this.isPatternLoaded=e=>this.loadedImageDataUrls.find((t=>t.id===e))||this.loadingImageDataUrls.find((t=>t===e))||this.props.usedImagePaths.find((t=>t.name===e)),this.loadPattern=e=>{const t=this.imagePaths.find((t=>t.name===e));t&&this.imageLoadAndDraw(t)},this.clearPatterns=()=>{this.loadingImageDataUrls=[],this.loadedImageDataUrls=[],this.floorplanDrawedCallbackCalled=!1,this.forceUpdate()},this.arePatternsLoaded=()=>0===this.loadingImageDataUrls.length,this.addImagePathData=e=>this.imagePaths=[...this.imagePaths,...e],this.imagePaths=e.imagePaths,this.loadingImageDataUrls=[],this.loadedImageDataUrls=[],this.floorplanDrawedCallbackCalled=!1,this.imageLoadAndDraw=this.imageLoadAndDraw.bind(this),this.onFloorplanDrawedCallback=this.onFloorplanDrawedCallback.bind(this),this.isPatternLoaded=this.isPatternLoaded.bind(this),this.loadPattern=this.loadPattern.bind(this),this.clearPatterns=this.clearPatterns.bind(this),this.arePatternsLoaded=this.arePatternsLoaded.bind(this),this.addImagePathData=this.addImagePathData.bind(this)}componentDidMount(){this.props.usedImagePaths.forEach((e=>this.imageLoadAndDraw(e)))}render(){return this.props.furniturePattern?(0,l.jsx)(o.Fragment,{children:this.loadedImageDataUrls.map((e=>(0,l.jsx)("pattern",{id:e.id,patternUnits:"objectBoundingBox",width:"100%",height:"100%",viewBox:"0 0 ".concat(e.width," ").concat(e.height),preserveAspectRatio:"none",children:(0,l.jsx)("image",{href:e.dataURL,x:0,y:0,width:e.width,height:e.height})},e.id)))}):(0,l.jsx)(o.Fragment,{children:this.loadedImageDataUrls.map((e=>(0,l.jsx)("pattern",{id:e.id,patternUnits:"userSpaceOnUse",width:e.width,height:e.height,children:(0,l.jsx)("image",{href:e.dataURL,x:0,y:0,width:e.width,height:e.height})},e.id)))})}}const Ra=Aa;class La extends o.Component{render(){return(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"gradientRed",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#e65d5e",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#e33b3c",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientYellow",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#FDEB71",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#F8D800",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientGreen",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#c0f7d9",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#6ce8a3",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientSky",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#c4e0f4",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#87c8f7",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientOrange",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#f9ad67",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#f97f00",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientWhite",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#f0f0f0",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientGrey",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#666",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#aaa",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientBlue",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#4f72a6",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#365987",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientPurple",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#E2B0FF",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#9F44D3",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientPink",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#f6c4dd",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#f699c7",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientBlack",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#3c3b3b",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#000000",stopOpacity:1})]}),(0,l.jsxs)("linearGradient",{id:"gradientNeutral",x1:"0%",y1:"0%",x2:"100%",y2:"100%",spreadMethod:"pad",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#dbc6a0",stopOpacity:1}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#c69d56",stopOpacity:1})]}),(0,l.jsxs)("radialGradient",{id:"uploadFloorplanCursorCircleGradient",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:"#CD0404"}),(0,l.jsx)("stop",{offset:"100%",stopColor:"#FF5D5D"})]}),(0,l.jsxs)("linearGradient",{id:"cameraCoverageGradient",gradientUnits:"userSpaceOnUse",x1:"0",y1:"0",x2:"0",children:[(0,l.jsx)("stop",{offset:"0%",style:{stopColor:"rgba(0, 128, 255, 1)",stopOpacity:1}}),(0,l.jsx)("stop",{offset:"50%",style:{stopColor:"rgba(0, 128, 255, 0.7)",stopOpacity:.7}}),(0,l.jsx)("stop",{offset:"100%",style:{stopColor:"rgba(0, 128, 255, 0.3)",stopOpacity:.3}})]}),(0,l.jsx)(ja,{measureSystemContext:this.props.measureSystemContext,svgMeterUnits:this.props.svgMeterUnits,imperialSystemSquareFeetSize:this.props.imperialSystemSquareFeetSize}),(0,l.jsx)("pattern",{id:"floorplan_image_pattern",ref:this.props.floorplanImagePattern,width:0,height:0,patternUnits:"userSpaceOnUse",children:(0,l.jsx)("image",{ref:this.props.floorplanImage,href:"#",x:0,y:0,width:0,height:0,alt:"Floorplan image",preserveAspectRatio:"none"})}),(0,l.jsx)("defs",{children:(0,l.jsx)(Ra,{ref:this.props.wallMaterialsAsyncPatternRef,imagePaths:Ne.slice(2).map((e=>({name:e.title,width:e.width/this.props.floorplan3DScaleFactor,height:e.height/this.props.floorplan3DScaleFactor}))),usedImagePaths:[],imageFormat:"png",publicFolderName:"wallMaterials",mainComponentThis:this.props.mainComponentThis})}),(0,l.jsx)("defs",{children:(0,l.jsx)(Ra,{ref:this.props.furnitureAsyncPatternRef,imagePaths:[],usedImagePaths:[],imageFormat:"png",publicFolderName:"thumbnails",furniturePattern:!0,mainComponentThis:this.props.mainComponentThis})}),(0,l.jsx)("defs",{children:(0,l.jsx)("marker",{id:"window-rotation-direction-arrow-triangle",viewBox:"0 0 10 10",refX:"5",refY:"5",markerUnits:"strokeWidth",markerWidth:"4",markerHeight:"4",orient:"auto",children:(0,l.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#f00"})})}),(0,l.jsx)("defs",{id:"room-textures-container",ref:this.props.roomTextureContainerRef}),(0,l.jsx)("defs",{ref:this.props.roomTexturePreviewContainerRef})]})}}const Ba=La;var Wa=i(7483),Va=i(5542),Na=i(7579),Ea=i(2966),Ha=i(273),za=i(7017),Ga=i(1332);class Ua extends o.Component{render(){return(0,l.jsxs)("div",{ref:this.props.mainComponentThis.rightControlsBox,className:"right-controls-box right-box-transition",children:[(0,l.jsx)("div",{className:"moveBox move-box-container",children:(0,l.jsxs)("div",{className:"pull-right move-box",children:[(0,l.jsx)("p",{style:{margin:0},children:(0,l.jsx)("button",{title:"Move up",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomtop"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Na.Z,{})})})}),(0,l.jsxs)("p",{style:{margin:0},children:[(0,l.jsx)("button",{title:"Move left",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomleft"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Va.Z,{})})}),(0,l.jsx)("button",{title:"Center",className:"btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomreset"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Wa.Z,{style:{width:18,height:18}})})}),(0,l.jsx)("button",{title:"Move right",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomright"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Ea.Z,{})})})]}),(0,l.jsx)("p",{style:{margin:0},children:(0,l.jsx)("button",{title:"Move down",className:"shadow btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoombottom"),children:(0,l.jsx)("div",{className:"svg-center-inside-container",children:(0,l.jsx)(Ha.Z,{})})})})]})}),(0,l.jsx)("div",{ref:this.props.mainComponentThis.mapStylesChangeRef,className:"map-styles-change-container"}),(0,l.jsxs)("div",{className:"zoomBox zoom-box-container",children:[(0,l.jsxs)("div",{className:"pull-right zoom-box",children:[(0,l.jsx)("button",{title:"Zoom in",className:"shadow btn btn btn-default zoom svg-center-inside-container",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomin"),style:{display:"inline-flex"},children:(0,l.jsx)(za.Z,{})}),(0,l.jsx)("button",{title:"Zoom out",className:"shadow btn btn btn-default zoom",onClick:()=>this.props.mainComponentThis.onZoomButonClick("zoomout"),style:{display:"inline-flex"},children:(0,l.jsx)(Ga.Z,{})})]}),(0,l.jsx)("div",{style:{clear:"both"}}),(0,l.jsx)("div",{ref:this.props.mainComponentThis.scaleVal,className:"pull-right scale-box",children:"metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"1m":"".concat(this.props.mainComponentThis.imperialSystemSquareFeetSize,"ft")}),(0,l.jsx)("div",{style:{clear:"both"}})]})]})}}const qa=Ua;class Ka extends o.Component{render(){return(0,l.jsxs)("div",{ref:this.props.containerRef,style:this.props.containerStyle||{},className:"rightBox right-box-transition ".concat(this.props.containerClasses||""),children:[(0,l.jsx)("div",{title:this.props.closeButtonTitle||"Close",className:"close-rightBox",onClick:this.props.onCloseRightBox,children:(0,l.jsx)(ln.Z,{})}),this.props.children]})}}const Ya=Ka;var Xa=i(2105);class Za extends o.Component{render(){return(0,l.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"20px",viewBox:"-10 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",style:this.props.style||{},children:(0,l.jsxs)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",stroke:"none",children:[(0,l.jsx)("path",{d:"M2061 5100 c-195 -52 -330 -195 -387 -412 -14 -54 -15 -175 -16 -996\r\nl0 -934 25 -37 c64 -96 207 -92 268 6 l24 38 5 935 5 935 22 41 c28 53 83 100\r\n130 113 26 7 431 11 1235 11 1169 0 1199 0 1250 -20 68 -26 133 -90 158 -158\r\n20 -52 20 -79 20 -1230 0 -770 -4 -1190 -10 -1214 -17 -59 -71 -130 -124 -163\r\nl-49 -30 -926 -5 c-699 -4 -931 -8 -947 -17 -37 -22 -83 -82 -90 -119 -9 -51\r\n9 -104 51 -144 l36 -35 932 -3 c647 -2 948 1 985 9 95 19 209 85 287 163 81\r\n82 127 163 155 272 19 75 20 115 20 1278 0 1302 1 1272 -55 1390 -59 126 -156\r\n223 -283 286 -125 62 -79 60 -1422 59 -1179 0 -1228 -1 -1299 -19z"}),(0,l.jsx)("path",{d:"M3300 4448 c-107 -30 -152 -167 -83 -249 49 -58 55 -59 383 -59 165\r\n0 300 -3 300 -8 0 -4 -720 -727 -1601 -1607 -880 -880 -1607 -1612 -1615\r\n-1627 -20 -39 -18 -117 6 -155 36 -60 107 -90 174 -72 36 9 232 201 1651 1620\r\n886 885 1613 1609 1618 1609 4 0 7 -133 7 -296 0 -331 2 -344 69 -390 71 -48\r\n169 -27 225 49 21 28 21 39 24 520 2 271 0 511 -3 535 -9 60 -60 116 -120 131\r\n-56 14 -984 14 -1035 -1z"}),(0,l.jsx)("path",{d:"M373 2456 c-178 -44 -325 -195 -362 -374 -15 -74 -15 -1630 0 -1704\r\n27 -130 119 -254 235 -315 121 -65 96 -63 986 -63 550 0 824 4 860 11 167 35\r\n303 156 357 317 20 59 21 81 21 590 l0 529 -22 33 c-32 47 -68 71 -116 77 -55\r\n7 -123 -26 -154 -75 l-23 -37 -5 -515 c-5 -495 -6 -516 -25 -542 -11 -15 -38\r\n-37 -61 -48 -40 -20 -54 -20 -842 -18 -791 3 -801 3 -828 24 -15 11 -37 33\r\n-48 48 -21 27 -21 37 -24 825 l-2 797 23 44 c16 30 37 51 67 67 l43 23 495 0\r\n495 0 42 25 c100 58 101 196 2 269 -28 21 -38 21 -545 23 -388 1 -530 -2 -569\r\n-11z"})]})})}}const Ja=Za;class Qa extends o.Component{render(){return(0,l.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",strokeWidth:"2px",stroke:"#19ab7f",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M10.57,5.8l2.71-2.72a5.4,5.4,0,0,1,7.64,7.64L18.2,13.43"}),(0,l.jsx)("path",{d:"M5.8,10.57,3.08,13.28a5.4,5.4,0,0,0,7.64,7.64l2.71-2.72"}),(0,l.jsx)("line",{x1:"16.77",y1:"7.23",x2:"7.23",y2:"16.77"})]})}}const $a=Qa;class er extends o.Component{render(){return(0,l.jsxs)("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",strokeWidth:"2px",stroke:"#4b4b5a",children:[(0,l.jsx)("path",{d:"M10.56,5.77l2.72-2.72a5.43,5.43,0,0,1,3.84-1.59,5.43,5.43,0,0,1,5.42,5.42A5.43,5.43,0,0,1,21,10.72l-2.72,2.72"}),(0,l.jsx)("path",{d:"M5.77,10.56,3.05,13.28A5.42,5.42,0,1,0,10.72,21l2.72-2.72"}),(0,l.jsx)("line",{x1:"16.79",y1:"7.21",x2:"7.21",y2:"16.79"}),(0,l.jsx)("line",{x1:"20.63",y1:"15.83",x2:"23.5",y2:"15.83"}),(0,l.jsx)("line",{x1:"15.83",y1:"20.63",x2:"15.83",y2:"23.5"}),(0,l.jsx)("line",{x1:"19.19",y1:"19.19",x2:"21.1",y2:"21.1"}),(0,l.jsx)("line",{x1:"3.38",y1:"8.17",x2:"0.5",y2:"8.17"}),(0,l.jsx)("line",{x1:"8.17",y1:"3.38",x2:"8.17",y2:"0.5"}),(0,l.jsx)("line",{x1:"4.81",y1:"4.81",x2:"2.9",y2:"2.9"})]})}}const tr=er;var ir=i(1317);class or extends o.Component{constructor(e){var t;super(e),t=this,this.onInsertFlorplanImageClose=function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.props.mainComponentThis.translateRightBox(t.props.floorplanImageTools.current,250,!1),t.resetUploadFloorplanImageTools(),i||(t.props.mainComponentThis.foncButton("select_mode"),t.props.mainComponentThis.boxInfo.current.innerHTML="Select mode")},this.resetUploadFloorplanImageTools=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.setState({scaleButtonClicked:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1,translateButtonClicked:!1,floorplanTranslationFirstClick:!1,floorplanImageUploaded:!e&&t.state.floorplanImageUploaded})},this.onInsertFloorplanImageDeleteButtonClick=()=>{this.props.mainComponentThis.foncButton("select_mode"),this.props.mainComponentThis.boxInfo.current.innerHTML="Select mode",this.props.mainComponentThis.translateRightBox(this.props.floorplanImageTools.current,250,!1),ji(this.props.boxFloorplanImage.current),this.resetLayoutState(),this.props.mainComponentThis.zoom_maker("zoomreset",this.props.mainComponentThis.zoomXMove,this.props.mainComponentThis.zoomXView)},this.resetLayoutState=()=>{this.state.floorplanImageUploaded&&(fi(this.props.uploadImageFloorplanSettingsIconRef.current,this.props.mainComponentThis.othersTimeout,null,!1),ir.log("Hide hide icon"),fi(this.props.uploadFloorplanImageStatusContainerRef.current,this.props.mainComponentThis.othersTimeout,null,!1),fi(this.props.uploadImageFloorplanHideRef.current,0,null,!1),fi(this.props.uploadImageFloorplanShowRef.current,0,null,!1),!this.props.boxFloorplanImage.current.classList.contains("fade-in")&&gi(this.props.boxFloorplanImage.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1),this.floorplanLength.current.setValue(""),this.floorplanLength.current.setInitialValue(""),this.floorplanWidth.current.setValue(""),this.floorplanWidth.current.setInitialValue(""),this.floorplanImageInput.current.value="",fi(this.floorplanImageToolsDeleteButtonRef.current,this.props.mainComponentThis.othersTimeout,(()=>this.setState({floorplanImageUploaded:!1})),!1))},this.onUploadFloorplanImageInputChange=()=>e=>{this.uploadedFloorplanImage=e.target.files[0],this.resetUploadFloorplanImageTools(!0),gi(this.explanationBox.current,this.props.mainComponentThis.othersTimeout,null,"flex",!1)},this.getFloorplanImageBoundingBox=()=>({minX:this.floorplanBoundingBoxCurrentParams.originX,maxX:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,minY:this.floorplanBoundingBoxCurrentParams.originY,maxY:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length}),this.centerAndShowWholeFloorplanImage=()=>{const e={x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width/2,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length/2};this.props.mainComponentThis.centerAndShowWholeBoxOperations(e,this.getFloorplanImageBoundingBox(),!1)},this.onExplanationConfirmedCallback=()=>{this.setState({floorplanImageUploaded:!0,preserveAspectRatio:!0},(()=>{let e=new Image,t=window.URL||window.webkitURL||window,i=t.createObjectURL(this.uploadedFloorplanImage);e.onload=()=>{this.floorplanAspectRatio=e.width/e.height,this.floorplanInitialWidth=this.floorplanImageInitialSvgWidth,this.floorplanInitialLength=this.floorplanInitialWidth/this.floorplanAspectRatio,t.revokeObjectURL(i),this.floorplanBoundingBoxCurrentParams.originX=200-this.props.mainComponentThis.offset.left,this.floorplanBoundingBoxCurrentParams.originY=24,this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength,this.drawUploadedFloorplanImage(),this.props.mainComponentThis.zoom_maker("zoomreset",this.props.mainComponentThis.zoomXMove,this.props.mainComponentThis.zoomXView),gi(this.props.uploadFloorplanImageStatusContainerRef.current,this.props.mainComponentThis.othersTimeout,null,"block",!1),"none"===this.props.uploadImageFloorplanHideRef.current.style.display&&"none"===this.props.uploadImageFloorplanShowRef.current.style.display&&(gi(this.props.uploadImageFloorplanHideRef.current,0,null,"inline",!1),this.props.uploadFloorplanImageStatusContainerRef.current.title="Hide floorplan image"),gi(this.props.uploadImageFloorplanSettingsIconRef.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1),gi(this.floorplanImageToolsDeleteButtonRef.current,this.props.mainComponentThis.othersTimeout,null,"block",!1),I()||(this.props.mainComponentThis.boxInfo.current.innerHTML="Hold <b>SHIFT</b> to drag around floorplan.")},e.src=i}))},this.drawUploadedFloorplanImage=()=>{ji(this.props.boxFloorplanImage.current);const e=this.floorplanImageInput.current.files[0];this.props.mainComponentThis.editor.createAndShowBoxMeasures(this.floorplanBoundingBoxCurrentParams.originX,this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,this.floorplanBoundingBoxCurrentParams.originY,this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length,this.props.boxFloorplanImage,{color:"#ffcc00",strokeWidth:1}),this.props.floorplanImagePattern.current.setAttribute("x",this.floorplanBoundingBoxCurrentParams.originX),this.props.floorplanImagePattern.current.setAttribute("y",this.floorplanBoundingBoxCurrentParams.originY),this.props.floorplanImagePattern.current.setAttribute("height",this.floorplanBoundingBoxCurrentParams.length),this.props.floorplanImagePattern.current.setAttribute("width",this.floorplanBoundingBoxCurrentParams.width),this.props.floorplanImage.current.setAttribute("height",this.floorplanBoundingBoxCurrentParams.length),this.props.floorplanImage.current.setAttribute("width",this.floorplanBoundingBoxCurrentParams.width);let t=new FileReader;t.onload=e=>{this.props.floorplanImage.current.setAttribute("href",e.target.result),ir.log("Atrribute setted")},t.onerror=()=>{this.props.mainComponentThis.boxInfo.current.innerHTML="Ooops. An error happened. Cannot load image."},t.readAsDataURL(e);let i="M".concat(this.floorplanBoundingBoxCurrentParams.originX,",").concat(this.floorplanBoundingBoxCurrentParams.originY,"\n            L").concat(this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,",").concat(this.floorplanBoundingBoxCurrentParams.originY,"\n            L").concat(this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,",").concat(this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length,"\n            L").concat(this.floorplanBoundingBoxCurrentParams.originX,",").concat(this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length,"\n            L").concat(this.floorplanBoundingBoxCurrentParams.originX,",").concat(this.floorplanBoundingBoxCurrentParams.originY);this.props.mainComponentThis.qSVG.create(this.props.boxFloorplanImage,"path",{id:"floorplan-image-path",d:i,fill:"url(#floorplan_image_pattern)","fill-opacity":1,stroke:"none"});const o=Qi(this.floorplanBoundingBoxCurrentParams.width/this.props.mainComponentThis.meter,this.props.mainComponentThis.measureSystemContext.userUnit,"meter","feet",this.floorplanDimensionsDecimalPrecision),s=Qi(this.floorplanBoundingBoxCurrentParams.length/this.props.mainComponentThis.meter,this.props.mainComponentThis.measureSystemContext.userUnit,"meter","feet",this.floorplanDimensionsDecimalPrecision);this.floorplanWidth.current.setValue(o),this.floorplanWidth.current.setInitialValue(o),this.floorplanLength.current.setValue(s),this.floorplanLength.current.setInitialValue(s),this.setState({originX:T(this.floorplanBoundingBoxCurrentParams.originX,this.originTranslateDecimalPrecision),originY:T(this.floorplanBoundingBoxCurrentParams.originY,this.originTranslateDecimalPrecision),width:o,length:s})},this.translateFloorplan=(e,t)=>{const i=this.wallTranslateGroup.querySelector("#originCircle").getAttribute("cx"),o=this.wallTranslateGroup.querySelector("#originCircle").getAttribute("cy"),s=(e.x-i)*t,n=(e.y-o)*t;this.floorplanBoundingBoxCurrentParams.originX=this.floorplanBoundingBoxCurrentParams.originX+s,this.floorplanBoundingBoxCurrentParams.originY=this.floorplanBoundingBoxCurrentParams.originY+n,this.drawUploadedFloorplanImage(),ji(this.wallTranslateGroup)},this.handleMouseDownAction=e=>{const t=[{x:this.floorplanBoundingBoxCurrentParams.originX,y:this.floorplanBoundingBoxCurrentParams.originY},{x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,y:this.floorplanBoundingBoxCurrentParams.originY},{x:this.floorplanBoundingBoxCurrentParams.originX+this.floorplanBoundingBoxCurrentParams.width,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length},{x:this.floorplanBoundingBoxCurrentParams.originX,y:this.floorplanBoundingBoxCurrentParams.originY+this.floorplanBoundingBoxCurrentParams.length}];if("floorplan_image_translation"===this.props.mainComponentThis.mode)if(this.state.floorplanTranslationFirstClick)if(this.state.floorplanTranslationIsOutsideClick)if(Ni(e,t))this.translateFloorplan(e,-1),this.setState({floorplanTranslationFirstClick:!1,floorplanTranslationIsOutsideClick:!1});else{const t=this.wallTranslateGroup.querySelector("#originCircle");t.setAttribute("cx",e.x),t.setAttribute("cy",e.y)}else this.translateFloorplan(e,1),this.setState({floorplanTranslationFirstClick:!1});else{this.wallTranslateGroup?ji(this.wallTranslateGroup):this.wallTranslateGroup=this.props.mainComponentThis.qSVG.create("none","g",{class:"floorplan-image-translate-group"});const i=this.props.mainComponentThis.qSVG.create("none","circle",{id:"originCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallTranslateGroup.appendChild(i),this.props.boxFloorplanImage.current.appendChild(this.wallTranslateGroup),this.setState({floorplanTranslationFirstClick:!0,floorplanTranslationIsOutsideClick:!Ni(e,t)})}else if(Ni(e,t))if(this.state.floorplanScalingFirstClick){const t=this.props.mainComponentThis.qSVG.create("none","circle",{id:"endCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallLineGroup.appendChild(t),this.props.mainComponentThis.boxInfo.current.innerHTML="Insert selected line length in ".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"meters(m)":"feet(ft)"),this.setState({floorplanScalingFirstClick:!1,showWallLengthInput:!0},(()=>{this.selectedWallLengthInput.current.setValue(""),this.selectedWallLengthInput.current.setInitialValue("")}))}else{this.wallLineGroup?ji(this.wallLineGroup):this.wallLineGroup=this.props.mainComponentThis.qSVG.create("none","g",{class:"floorplan-image-scaling-group"});const t=this.props.mainComponentThis.qSVG.create("none","line",{x1:e.x,y1:e.y,x2:e.x,y2:e.y,"stroke-width":this.lineThick,stroke:"#4b4b5a"});this.wallLineGroup.appendChild(t);const i=this.props.mainComponentThis.qSVG.create("none","circle",{id:"startCircle",cx:e.x,cy:e.y,r:this.circleRadius,fill:"#ff0000"});this.wallLineGroup.appendChild(i),this.props.boxFloorplanImage.current.appendChild(this.wallLineGroup),this.setState({floorplanScalingFirstClick:!0,showWallLengthInput:!1})}},this.onWallLengthConfirmClick=()=>{const e=$i(parseFloat(this.selectedWallLengthInput.current.getValue()),this.props.mainComponentThis.measureSystemContext.userUnit)*this.props.mainComponentThis.meter;let t=this.wallLineGroup.querySelector("#startCircle"),i=this.wallLineGroup.querySelector("#endCircle");const o=Ki({x:t.getAttribute("cx"),y:t.getAttribute("cy")},{x:i.getAttribute("cx"),y:i.getAttribute("cy")}),s=T(e/o*this.state.scalingFactor,this.scaleFactorDecimalPrecision);this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth*s,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength*s,this.drawUploadedFloorplanImage(),this.setState({showWallLengthInput:!1,scalingFactor:s})},this.onScaleButtonClick=()=>{this.state.scaleButtonClicked?(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.props.mainComponentThis.mode="upload_floorplan_image_mode"):(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove(),this.props.mainComponentThis.mode="floorplan_image_scaling"),this.setState({scaleButtonClicked:!this.state.scaleButtonClicked,floorplanScalingFirstClick:!1,translateButtonClicked:!1,floorplanTranslationFirstClick:!1,showWallLengthInput:!this.state.scaleButtonClicked&&this.state.showWallLengthInput})},this.onTranslateButtonClick=()=>{this.state.translateButtonClicked?(this.props.mainComponentThis.mode="upload_floorplan_image_mode",this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove()):(this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.props.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.props.mainComponentThis.mode="floorplan_image_translation"),this.setState({translateButtonClicked:!this.state.translateButtonClicked,floorplanTranslationFirstClick:!1,scaleButtonClicked:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1})},this.handleAspectRatioButtonClick=()=>{this.setState({preserveAspectRatio:!this.state.preserveAspectRatio})},this.onFloorplanInputWidthChanged=()=>{const e=this.floorplanWidth.current.getValue();e!==this.state.width&&(this.floorplanBoundingBoxCurrentParams.width=$i(parseFloat(e),this.props.mainComponentThis.measureSystemContext.userUnit)*this.props.mainComponentThis.meter,this.state.preserveAspectRatio&&(this.floorplanBoundingBoxCurrentParams.length=this.floorplanBoundingBoxCurrentParams.width/this.floorplanAspectRatio),this.drawUploadedFloorplanImage())},this.onFloorplanInputLengthChanged=()=>{const e=this.floorplanLength.current.getValue();e!==this.state.length&&(this.floorplanBoundingBoxCurrentParams.length=$i(parseFloat(e),this.props.mainComponentThis.measureSystemContext.userUnit)*this.props.mainComponentThis.meter,this.state.preserveAspectRatio&&(this.floorplanBoundingBoxCurrentParams.width=this.floorplanAspectRatio*this.floorplanBoundingBoxCurrentParams.length),this.drawUploadedFloorplanImage())},this.onScaleFactorInputChange=e=>{this.state.scalingFactor!==e&&(this.floorplanBoundingBoxCurrentParams.width=this.floorplanInitialWidth*e,this.floorplanBoundingBoxCurrentParams.length=this.floorplanInitialLength*e,this.drawUploadedFloorplanImage(),this.setState({scalingFactor:e,floorplanScalingFirstClick:!1,showWallLengthInput:!1}))},this.onFloorplanOriginXInputChange=e=>{e!==this.state.originX&&(this.floorplanBoundingBoxCurrentParams.originX=e,this.drawUploadedFloorplanImage(),this.setState({originX:e}))},this.onFloorplanOriginYInputChange=e=>{this.state.originY!==e&&(this.floorplanBoundingBoxCurrentParams.originY=e,this.drawUploadedFloorplanImage(),this.setState({originY:e}))},this.state={floorplanImageUploaded:!1,floorplanScalingFirstClick:!1,showWallLengthInput:!1,floorplanTranslationFirstClick:!1,floorplanTranslationIsOutsideClick:!1,scaleButtonClicked:!1,translateButtonClicked:!1,preserveAspectRatio:!0,scalingFactor:1,originX:0,originY:0,width:0,length:0},this.floorplanDimensionsInputStep=(e.mainComponentThis.measureSystemContext.userUnit,.1),this.floorplanDimensionsDecimalPrecision=-Math.log10(this.floorplanDimensionsInputStep),this.lineLengthInputStep="metric"===e.mainComponentThis.measureSystemContext.userUnit?.01:.1,this.lineLengthDecimalPrecision=-Math.log10(this.lineLengthInputStep),this.scaleFactorInputStep=.01,this.scaleFactorDecimalPrecision=-Math.log10(this.scaleFactorInputStep),this.originTranslateInputStep=1,this.originTranslateDecimalPrecision=-Math.log10(this.originTranslateInputStep),this.wallTranslateGroup=null,this.wallLineGroup=null,this.circleRadius=e.mainComponentThis.meter/6,this.lineThick=e.mainComponentThis.meter/8,this.floorplanAspectRatio=0,this.uploadedImagePixelToSvgUnitRatio=1,this.floorplanImageInitialSvgWidth=20*e.mainComponentThis.meter,this.floorplanBoundingBoxCurrentParams={originX:0,originY:0,width:0,length:0},this.floorplanInitialWidth=null,this.floorplanInitialLength=null,this.uploadedFloorplanImage=null,this.floorplanLength=o.createRef(),this.floorplanWidth=o.createRef(),this.floorplanImageInput=o.createRef(),this.floorplanImageToolsDeleteButtonRef=o.createRef(),this.selectedWallLengthInput=o.createRef(),this.scaleFactorInput=o.createRef(),this.explanationBox=o.createRef(),this.onInsertFloorplanImageDeleteButtonClick=this.onInsertFloorplanImageDeleteButtonClick.bind(this),this.onInsertFlorplanImageClose=this.onInsertFlorplanImageClose.bind(this),this.resetUploadFloorplanImageTools=this.resetUploadFloorplanImageTools.bind(this),this.handleMouseDownAction=this.handleMouseDownAction.bind(this),this.translateFloorplan=this.translateFloorplan.bind(this),this.onWallLengthConfirmClick=this.onWallLengthConfirmClick.bind(this),this.drawUploadedFloorplanImage=this.drawUploadedFloorplanImage.bind(this),this.onScaleButtonClick=this.onScaleButtonClick.bind(this),this.onTranslateButtonClick=this.onTranslateButtonClick.bind(this),this.onUploadFloorplanImageInputChange=this.onUploadFloorplanImageInputChange.bind(this),this.onExplanationConfirmedCallback=this.onExplanationConfirmedCallback.bind(this),this.handleAspectRatioButtonClick=this.handleAspectRatioButtonClick.bind(this),this.onFloorplanInputWidthChanged=this.onFloorplanInputWidthChanged.bind(this),this.onFloorplanInputLengthChanged=this.onFloorplanInputLengthChanged.bind(this),this.onScaleFactorInputChange=this.onScaleFactorInputChange.bind(this),this.onFloorplanOriginXInputChange=this.onFloorplanOriginXInputChange.bind(this),this.onFloorplanOriginYInputChange=this.onFloorplanOriginYInputChange.bind(this),this.getFloorplanImageBoundingBox=this.getFloorplanImageBoundingBox.bind(this),this.centerAndShowWholeFloorplanImage=this.centerAndShowWholeFloorplanImage.bind(this),this.resetLayoutState=this.resetLayoutState.bind(this)}render(){return ir.log(this.state),(0,l.jsxs)(Ya,{containerStyle:{width:250,right:-250},containerRef:this.props.floorplanImageTools,onCloseRightBox:this.onInsertFlorplanImageClose,children:[(0,l.jsxs)("div",{ref:this.explanationBox,className:"upload-floorplan-image-explanation-box hidden",children:[(0,l.jsxs)("h3",{children:["Floorplan dimensions are set to ",(0,l.jsx)("b",{children:"fixed values"}),"."," "]}),(0,l.jsxs)("h3",{children:["You can change them to the actual values either by ",(0,l.jsx)("b",{children:"direct input"})," or using our ",(0,l.jsx)("b",{children:"Click&Scale"})," ","feature."]})," ",(0,l.jsxs)("h3",{children:["For floorplan translation on drawing area use ",(0,l.jsx)("b",{children:"Click&Translate"}),"."]}),(0,l.jsx)("h3",{children:(0,l.jsx)("b",{children:"NOTE: 1 grid square equals ".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"1 meter":"".concat(this.props.mainComponentThis.imperialSystemSquareFeetSize," feet"))})}),(0,l.jsx)(Go,{type:"primary",onClick:()=>fi(this.explanationBox.current,this.props.mainComponentThis.othersTimeout,this.onExplanationConfirmedCallback,!1),children:"Got it"})]}),(0,l.jsx)(us,{label:"Upload floorplan image from your local device",labelStyle:{display:"block",fontSize:"1.17em",margin:"1em 0",fontWeight:"bold"},inputRef:this.floorplanImageInput,type:"file",accept:"image/png, image/jpeg",onChange:this.onUploadFloorplanImageInputChange}),this.state.floorplanImageUploaded?(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{ref:this.floorplanImageToolsDeleteButtonRef,className:"button-centered-container hidden form-group",children:(0,l.jsx)(Go,{type:"delete",onClick:this.onInsertFloorplanImageDeleteButtonClick,children:"Delete uploaded image"})}),(0,l.jsx)(xs,{label:"Floorplan width(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"m":"ft",")"),children:(0,l.jsx)(as,{ref:this.floorplanWidth,placeholder:"Floorplan width",inputStep:this.floorplanDimensionsInputStep,inputMin:this.floorplanDimensionsInputStep,inputMax:1/0,inputStyle:{textAlign:"left"},callOnlyOnBlur:!0,hideNumberArrows:!0,onInputValueChanged:this.onFloorplanInputWidthChanged,defaultValue:"",checkInputValueChangeBeforeCall:!0})}),(0,l.jsxs)("div",{className:"preserve-aspect-ratio-container",children:[(0,l.jsx)("div",{className:"svg-action-icon-container button-with-icon svg-center-inside-container",onClick:this.handleAspectRatioButtonClick,title:this.state.preserveAspectRatio?"Preserve aspect ratio":"No aspect ratio",children:this.state.preserveAspectRatio?(0,l.jsx)($a,{}):(0,l.jsx)(tr,{})}),(0,l.jsx)("label",{className:"label form-control",children:"Floorplan aspect ratio"})]}),(0,l.jsx)(xs,{label:"Floorplan length(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"m":"ft",")"),children:(0,l.jsx)(as,{ref:this.floorplanLength,placeholder:"Floorplan length",inputStep:this.floorplanDimensionsInputStep,inputMin:this.floorplanDimensionsInputStep,inputMax:1/0,inputStyle:{textAlign:"left"},callOnlyOnBlur:!0,hideNumberArrows:!0,onInputValueChanged:this.onFloorplanInputLengthChanged,defaultValue:"",checkInputValueChangeBeforeCall:!0})}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsxs)(Go,{type:this.state.scaleButtonClicked?"primary":"dull",className:"button-with-icon",onClick:this.onScaleButtonClick,children:[(0,l.jsx)(Ja,{style:{fill:this.state.scaleButtonClicked?"#ffffff":"#4b4b5a"}}),"Click&Scale"]})}),this.state.scaleButtonClicked&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{className:"upload-floorplan-info-container",children:[(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(ts.Z,{})}),(0,l.jsx)("p",{children:this.state.showWallLengthInput?(0,l.jsx)("span",{children:(0,l.jsx)("b",{children:"Insert selected line length in ".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"meters(m)":"feet(ft)")})}):(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Select 2 points"})," on floorplan image for which you know the exact length"]})}),(0,l.jsx)("p",{children:"Click button to exit scaling mode"}),this.state.showWallLengthInput&&(0,l.jsxs)(xs,{containerStyle:{marginTop:"0.5rem"},children:[(0,l.jsx)(as,{ref:this.selectedWallLengthInput,placeholder:"Insert line length(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"m":"ft",")"),inputStyle:{marginBottom:"0.5rem",border:"1px solid #19ab7f"},inputStep:this.lineLengthInputStep,inputMin:this.lineLengthInputStep,inputMax:1/0,defaultValue:"",checkInputValueChangeBeforeCall:!0}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Go,{type:"primary",onClick:this.onWallLengthConfirmClick,children:"Confirm"})})]}),(0,l.jsxs)("div",{className:"line-divider-container",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("b",{children:"OR"}),(0,l.jsx)("hr",{})]}),(0,l.jsx)("p",{children:"Insert scale factor value directly"})]}),(0,l.jsx)(xs,{containerStyle:{marginBottom:0},label:"Scale factor",children:(0,l.jsx)(hs,{ref:this.scaleFactorInput,placeholder:"Scale factor",inputStep:this.scaleFactorInputStep,inputMin:this.scaleFactorInputStep,inputMax:1/0,usePropsValue:!0,value:this.state.scalingFactor,onInputValueChanged:this.onScaleFactorInputChange})})]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsxs)(Go,{type:this.state.translateButtonClicked?"primary":"dull",className:"button-with-icon",onClick:this.onTranslateButtonClick,children:[(0,l.jsx)(Xa.Z,{style:{width:20,height:20,fill:this.state.translateButtonClicked?"#ffffff":"#4b4b5a"}}),"Click&Translate"]})}),this.state.translateButtonClicked&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{className:"upload-floorplan-info-container",children:[(0,l.jsx)("div",{className:"popup-icon-container",children:(0,l.jsx)(ts.Z,{})}),(0,l.jsx)("p",{children:this.state.floorplanTranslationFirstClick?(0,l.jsx)("span",{children:this.state.floorplanTranslationIsOutsideClick?(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Select floorplan point"})," which you want to translate to the origin point"]}):(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Select location"})," to which you want to translate the selected floorplan point"]})}):(0,l.jsxs)("span",{children:[(0,l.jsx)("b",{children:"Select origin point"})," of translation"]})}),(0,l.jsx)("p",{children:"Click button to exit translation mode"}),(0,l.jsxs)("div",{className:"line-divider-container",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("b",{children:"OR"}),(0,l.jsx)("hr",{})]}),(0,l.jsx)("p",{children:"Insert offset values directly"})]}),(0,l.jsx)(xs,{label:"Horizontal offset",children:(0,l.jsx)(hs,{placeholder:"Horizontal offset",inputStep:this.originTranslateInputStep,inputMin:-1/0,inputMax:1/0,usePropsValue:!0,value:this.state.originX,onInputValueChanged:this.onFloorplanOriginXInputChange})}),(0,l.jsx)(xs,{label:"Vertical offset",containerStyle:{marginBottom:0},children:(0,l.jsx)(hs,{placeholder:"Vertical offset",inputStep:this.originTranslateInputStep,inputMin:-1/0,inputMax:1/0,usePropsValue:!0,value:this.state.originY,onInputValueChanged:this.onFloorplanOriginYInputChange})})]})]})]}):null]})}}const sr=or;class nr extends o.Component{render(){return(0,l.jsx)(xs,{containerStyle:{marginBottom:this.props.sizePoliceComponent?0:"0.5rem"},label:!this.props.sizePoliceComponent&&this.props.valueLabelText,children:(0,l.jsx)("input",{ref:this.props.sliderInputRef,type:"range",disabled:this.props.disabled,step:this.props.sliderStep,min:this.props.minValue,max:this.props.maxValue,className:"range ".concat(this.props.disabled?"disabled":""),onChange:this.props.disabled?void 0:this.props.onSliderChange,onMouseUp:()=>!this.props.disabled&&this.props.onSliderChangeFinished&&this.props.onSliderChangeFinished()})})}}const ar=nr;class rr extends o.Component{render(){return(0,l.jsx)("div",{children:(0,l.jsx)(as,{ref:this.props.inputNumberComponentRef,inputStep:this.props.sliderStep,disabled:this.props.disabled,inputMin:this.props.minValue,inputMax:this.props.maxValue,onInputValueChanged:this.props.onInputChange,checkInputValueChangeBeforeCall:!1})})}}const lr=rr;class hr extends o.Component{constructor(){super(),this.onSliderChange=e=>{this.props.onSliderValueChanged(e.target.value),this.inputNumberComponentRef.current.setValue(this.props.sliderInputRef.current.value)},this.onInputChange=()=>{this.props.sliderInputRef.current.value=this.inputNumberComponentRef.current.getValue(),this.props.onSliderValueChanged(this.props.sliderInputRef.current.value),this.props.onSliderChangeFinished&&this.props.onSliderChangeFinished()},this.setNumberInputInitialValues=e=>{this.inputNumberComponentRef.current.setInitialValue(e),this.inputNumberComponentRef.current.setValue(e)},this.setMaxMinRangeValues=(e,t)=>{this.props.sliderInputRef.current.setAttribute("min",e),this.props.sliderInputRef.current.setAttribute("max",t),this.inputNumberComponentRef.current.setRangeValues(e,t)},this.containerRef=o.createRef(),this.inputNumberComponentRef=o.createRef(),this.setMaxMinRangeValues=this.setMaxMinRangeValues.bind(this),this.setNumberInputInitialValues=this.setNumberInputInitialValues.bind(this),this.onSliderChange=this.onSliderChange.bind(this),this.onInputChange=this.onInputChange.bind(this)}componentDidMount(){this.props.defaultValue&&(this.props.sliderInputRef.current.value=this.props.defaultValue,this.inputNumberComponentRef.current.setValue(this.props.defaultValue),this.inputNumberComponentRef.current.setInitialValue(this.props.defaultValue))}render(){return(0,l.jsxs)("div",{ref:this.containerRef,className:"form-group",children:[this.props.sizePoliceComponent&&this.props.sizePoliceComponent,this.props.sizePoliceComponent?(0,l.jsxs)("div",{className:"modify-size-police-container",children:[(0,l.jsx)(ar,{disabled:this.props.disabled,valueLabelText:this.props.valueLabelText,sizePoliceComponent:this.props.sizePoliceComponent,sliderInputRef:this.props.sliderInputRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onSliderChange:this.onSliderChange,onSliderChangeFinished:this.props.onSliderChangeFinished}),(0,l.jsx)(lr,{disabled:this.props.disabled,inputNumberComponentRef:this.inputNumberComponentRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onInputChange:this.onInputChange})]}):(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(ar,{disabled:this.props.disabled,valueLabelText:this.props.valueLabelText,sliderInputRef:this.props.sliderInputRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onSliderChange:this.onSliderChange,onSliderChangeFinished:this.props.onSliderChangeFinished}),(0,l.jsx)(lr,{disabled:this.props.disabled,inputNumberComponentRef:this.inputNumberComponentRef,sliderStep:this.props.sliderStep,minValue:this.props.minValue,maxValue:this.props.maxValue,onInputChange:this.onInputChange})]})]})}}const cr=hr;class dr extends o.Component{constructor(){var e;super(),e=this,this.setCheckedStatus=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.setState({checked:t},(()=>!!i&&i()))},this.getCheckedStatus=()=>this.state.checked,this.setDisabledStatus=e=>this.setState({disabled:e}),this.state={checked:!1,disabled:!1},this.setCheckedStatus=this.setCheckedStatus.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this),this.setDisabledStatus=this.setDisabledStatus.bind(this)}render(){const{checked:e,disabled:t}=this.state;return(0,l.jsxs)("div",{className:"show-map-switch-container left-panel-switch-option-container ".concat(this.props.containerClasses||""),children:[(0,l.jsx)("label",{children:"SHOW MAP"}),(0,l.jsx)(Es.Z,{theme:Xs,children:(0,l.jsx)(Ys.Z,{disabled:t,checked:e,title:"Show on map",onChange:()=>!t&&this.props.onChangeCallback()})})]})}}const pr=dr;class mr extends o.Component{render(){return(0,l.jsx)("div",{className:"popup-disable-background",children:(0,l.jsx)(Ms,{spinnerHolderStyle:this.props.whiteSpinnerBackground?{borderRadius:"50%",backgroundColor:"#ffffff"}:{},screenCenter:!0})})}}const ur=mr;class gr extends o.Component{constructor(){super(),this.onSceneControlsVisibilityChange=()=>{const e=document.querySelectorAll(".scene-control");for(let t=0;t<e.length;t++)e[t].classList.toggle("hide-control");this.setState({checked:!this.state.checked})},this.state={checked:!0},this.onSceneControlsVisibilityChange=this.onSceneControlsVisibilityChange.bind(this)}render(){return(0,l.jsxs)("div",{className:"left-panel-switch-option-container",children:[(0,l.jsx)("label",{children:"CONTROLS"}),(0,l.jsx)(Es.Z,{theme:Xs,children:(0,l.jsx)(Ys.Z,{checked:this.state.checked,title:"Show scene controls",onChange:this.onSceneControlsVisibilityChange})})]})}}const fr=gr;class br extends o.Component{constructor(){super(),this.isSunLightShadowEnabled=()=>this.state.checked,this.handleSunLightChange=()=>{this.setState({checked:!this.state.checked},(()=>{const e=this.props.floorplan3DThis.getActiveScenes().map((e=>({scene:e,intervalObject:e===this.props.floorplan3DThis.floorplan3DOnMapScene?this.props.floorplan3DThis.sunLightPositionFloorplan3DOnMapInterval:this.props.floorplan3DThis.sunLightPositionFloorplan3DViewInterval,cameraHelpers:e===this.props.floorplan3DThis.floorplan3DOnMapScene?this.props.floorplan3DThis.sunLightPositionFloorplan3DOnMapCameraHelpers:this.props.floorplan3DThis.sunLightPositionFloorplan3DViewCameraHelpers,isMapScene:e===this.props.floorplan3DThis.floorplan3DOnMapScene})));this.state.checked?e.forEach((e=>{this.props.floorplan3DThis.calculateSunPosition(this.props.floorplan3DThis.calculateCurrentDate()).altitude<=0&&this.props.floorplan3DThis.sunPositionAlertRef.current.showAlert((0,l.jsx)("span",{children:"Daylight shadows are not visible because the sun is currently below the horizon"}),"warning"),s.render((0,l.jsx)(ur,{}),this.props.floorplan3DThis.props.mainComponentThis.loadingComponentContainer.current,(()=>{this.props.floorplan3DThis.initializeSunLightPositionIntervalCalculation(e.isMapScene,e.scene,e.cameraHelpers,!0)}))})):e.forEach((e=>{this.props.floorplan3DThis.clearSunLightPositionInterval(e.intervalObject,e.isMapScene),this.props.floorplan3DThis.deallocateSceneSunLightData(e.scene,e.cameraHelpers)}))}))},this.state={checked:!1},this.isSunLightShadowEnabled=this.isSunLightShadowEnabled.bind(this),this.handleSunLightChange=this.handleSunLightChange.bind(this)}render(){return(0,l.jsx)(o.Fragment,{children:(0,l.jsxs)("div",{className:"sun-light-controls-container left-panel-switch-option-container",children:[(0,l.jsxs)("div",{className:"info-label-container",children:[(0,l.jsx)("label",{children:"SUN LIGHT"}),(0,l.jsx)(ss,{indoorPanelExplanationBox:this.props.floorplan3DThis.panelInfoExplanationBox,infoText:'<span>\n                <span style="font-weight: bold;">Note:</span> Enabling this feature may impact performance,\n                especially for detailed floorplans.\n              </span>'})]}),(0,l.jsx)(Es.Z,{theme:Xs,children:(0,l.jsx)(Ys.Z,{checked:this.state.checked,title:"Simulate sun light shadows",onChange:this.handleSunLightChange})})]})})}}const wr=br;function Cr(e){const t=new te.Mig(4210752,this.props.mainComponentThis.ambientLightIntensity);e.add(t)}function xr(e){const t=this.props.mainComponentThis.groundColor,i=parseInt(t.split("#").at(-1),16),o=new te.zf8(this.floorplanEnvironmentRadius,this.environmentCircleSegmentsCount),s=new te.YBo({color:16777215});s.color.setHex(i);const n=new te.Kj0(o,s);n.rotation.x=-Math.PI/2,n.receiveShadow=!0,n.translateX(this.floorplanWallsObjectsBBoxCenterVector.x),n.translateY(-this.floorplanWallsObjectsBBoxCenterVector.z),n.translateZ(-5),e.add(n)}function yr(e){if("color"===this.props.mainComponentThis.skyColorType)e.background=new te.Ilk(this.props.mainComponentThis.skyColor);else{const t="\n    varying vec3 vWorldPosition;\n\n    void main() {\n\n      vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n      vWorldPosition = worldPosition.xyz;\n\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }",i="uniform vec3 topColorDay;\n        uniform vec3 bottomColorDay;\n        uniform vec3 topColorNight;\n        uniform vec3 bottomColorNight;\n        uniform float sunAltitude;\n        \n        varying vec3 vWorldPosition;\n\n        // Function to adjust exposure\n        vec3 applyExposure(vec3 color, float exposure) {\n          return 1.0 - exp(-color * exposure);\n        }\n        \n        void main() {\n          float dayNightFactor = smoothstep(0.2, 1.0, 0.5 + 0.5 * cos(sunAltitude));\n        \n          vec3 topColor = mix(topColorDay, topColorNight, dayNightFactor);\n          vec3 bottomColor = mix(bottomColorDay, bottomColorNight, dayNightFactor);\n\n          // Adjust the intensity using exposure control\n          float exposure = 15.0;  // Adjust this value for desired brightness\n          topColor = applyExposure(topColor, exposure);\n          bottomColor = applyExposure(bottomColor, exposure);\n      \n          float h = normalize(vWorldPosition).y;\n          gl_FragColor = vec4(mix(bottomColor, topColor, h), 1.0);\n        }",o=this.calculateSunPosition(this.floorplanStartDate),s={topColorDay:{value:new te.Ilk(.6,.8,1)},bottomColorDay:{value:new te.Ilk(.8,.9,1)},topColorNight:{value:new te.Ilk(0,.05,.2)},bottomColorNight:{value:new te.Ilk(0,0,.05)},offset:{value:33},exponent:{value:.6},sunAltitude:{value:Math.max(o.altitude,0)}},n=new te.xo$(this.floorplanEnvironmentRadius,this.environmentCircleSegmentsCount,15);this.skyMaterial=new te.jyz({uniforms:s,vertexShader:t,fragmentShader:i,side:te._Li});const a=new te.Kj0(n,this.skyMaterial);a.translateX(this.floorplanWallsObjectsBBoxCenterVector.x),a.translateZ(this.floorplanWallsObjectsBBoxCenterVector.z),e.add(a)}}function Sr(e){const t=this.calculateControlsMaxDistance();this.orbitControls.maxDistance=t,this.firstPersonControls.maxDistance=t,this.createFloorplanEnvironmentSky(e),this.createFloorplanEnvironmentGround(e)}function _r(){const e=this.createFloorplan3DXZPlaneBBoxPoints(this.floorplanWallsObjectsBoundingBox2DCoordinates),{maxXDist:t,maxZDist:i}=this.calculateMaxXMaxZOffsetsFromCenterPoint(this.floorplanWallsObjectsBBoxCenterVector,e),o=this.props.mainComponentThis.getHighestFloorData();this.floorplanEnvironmentRadius=Math.max((this.props.mainComponentThis.getFloorStartElevation(o.floorNumber)+2*o.floorHeight)*this.scaleFactor,6*Math.max(t,i))}var Dr=i(1317);function vr(e,t,i){const o=R(45),s=e.maxX-e.minX,n=e.maxY-e.minY,a=t,r=this.canvasRef.current.offsetWidth/this.canvasRef.current.offsetHeight,l=R(this.orbitControlsCamera.fov),h=vo(l,r),c=Math.max(n,a)/(2*Math.tan(l/2)),d=s/(2*Math.tan(h/2)),p=Math.max(d,c),m=new te.Pa4(i.x,0,0),u=p+i.y+n/2,g=u*Math.tan(o);m.y=g,m.z=u;const f=this.calculateControlsMaxDistance(),b=Xi(m,this.floorplanWallsObjectsBBoxCenterVector);if(b>=f){const e=(f-1)/b;m.y*=e,m.z*=e}this.orbitControlsCamera.position.copy(m)}function Tr(){const e=this.props.mainComponentThis.getHighestFloorData(),t=(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber)+e.floorHeight)*this.scaleFactor;let i={};for(let s in this.floorplanWallsBoundingBox2DCoordinates)i[s]=this.floorplanWallsBoundingBox2DCoordinates[s]*this.scaleFactor;const o=Si(i);o&&this.centerBBoxOrbitControlsCamera(i,t,o)}function jr(e,t,i){const o=e.position.clone(),s=Ki(new te.Pa4(t.x,t.z),new te.FM8(o.x,o.z)),n=o.clone(),a=R(i);n.x=t.x-Math.sin(a)*s,n.z=t.z+Math.cos(a)*s,e.position.copy(n)}function Or(e){this.floorplanNavigationRef.current.resetBearingParams(),this.floorplanNavigationRef.current.setCircleNavigatorPosition(new te.FM8(this.firstPersonControlsCamera.position.x,this.firstPersonControlsCamera.position.z).divideScalar(this.scaleFactor),e)}function Ir(e,t){this.firstPersonControlsCamera.position.set(e.x,this.floorplanFloorsPanelSelection3DRef.current.calculateFirstPersonControlsCameraPositionY(),e.y);const i=R(t);this.firstPersonControlsCamera.lookAt(this.firstPersonControlsCamera.position.x+1*Math.sin(i),this.firstPersonControlsCamera.position.y,this.firstPersonControlsCamera.position.z-1*Math.cos(i)),this.setCircleNavigatorFromFirstPersonControls(t)}function Pr(){const e=xi(this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().wallData);if(e){const t=Si(e,this.scaleFactor);this.setFirstPersonControlsCameraPosition(t,270)}}function kr(e,t){if(this.firstPersonCameraTransitionInProgress)return;this.firstPersonCameraTransitionInProgress=!0;let i=0;const o=this.orbitControlsCamera.position.clone(),s=this.orbitControlsCamera.quaternion.clone(),n=this.firstPersonControlsCamera.position.clone(),a=this.firstPersonControlsCamera.quaternion.clone(),r=new te.SUY,l=()=>{const h=r.getDelta();i+=h/e,i>=1?(i=1,this.firstPersonCameraTransitionInProgress=!1,this.floorplan3DViewCamera=this.firstPersonControlsCamera,this.currentControls=this.firstPersonControls,this.cameraControlsRef.current.setCurrentControlsType("first_person"),this.orbitControlsCamera.position.copy(o),this.orbitControlsCamera.quaternion.copy(s),this.updateWallsVisibility(),this.currentControls.setEnabledStatus(!0),t&&t()):(this.orbitControlsCamera.position.lerpVectors(o,n,i),this.orbitControlsCamera.quaternion.slerpQuaternions(s,a,i),requestAnimationFrame(l))};l()}function Fr(){return Math.cos(360/this.environmentCircleSegmentsCount/2*(Math.PI/180))*this.floorplanEnvironmentRadius}function Mr(){this.orbitControls.setEnabledStatus(!1),!this.firstPersonCameraTransitionInProgress&&this.smoothTransitionToFirstPerson(2),this.floorplanNavigationRef.current.setActiveStatus(!0)}function Ar(){if(!this.showMapLayer3DInputRef.current.getCheckedStatus())if(this.currentControls===this.orbitControls){const e=new te.JOQ;e.setFromNormalAndCoplanarPoint(new te.Pa4(0,1,0),this.floorplanViewUserInteractionController.intersectionGround.position);const t=new te.zHn,i=this.orbitControls.camera.position.clone(),o=this.orbitControls.target.clone().sub(i).normalize();t.set(i,o);const s=new te.Pa4;t.intersectPlane(e,s)?this.setFirstPersonControlsCameraPosition(new te.FM8(s.x,s.z),To(this.orbitControlsCamera)):Dr.error("Switch controls no intersection found"),this.switchToFirstPersonControls()}else this.firstPersonControls.setEnabledStatus(!1),this.firstPersonControls.disposeCircleNavigator(),this.floorplanNavigationRef.current.setActiveStatus(!1),this.floorplan3DViewCamera=this.orbitControlsCamera,this.currentControls=this.orbitControls,this.cameraControlsRef.current.setCurrentControlsType("orbit"),this.updateWallsVisibility(),this.currentControls.setEnabledStatus(!0)}function Rr(){return!this.showMapLayer3DInputRef.current.getCheckedStatus()}function Lr(e,t){const i=e.mesh.children.find((t=>t.name===dt[e.object2D.type].cameraLensMeshName)),o=e.cameraItemProperties.cameraLensMeshLensPosLocal.clone();i.localToWorld(o),this.firstPersonControlsCamera.position.copy(o);const s=e.cameraItemProperties.cameraLensMeshCenterLocal.clone();i.localToWorld(s);const n=o.clone(),a=jo(s,n),r=o.clone();r.add(a),this.firstPersonControlsCamera.lookAt(r),this.setCircleNavigatorFromFirstPersonControls(Ri(a.x,a.z,!1)),this.smoothTransitionToFirstPerson(2,(()=>{t&&t()})),this.switchToFirstPersonControls()}function Br(){this.userInteractionCurrentController.selectedObject&&(this.removeCameraCoverageArea3DMesh(),this.floorplanItemCurrentHUDObject.itemUnselected(),this.setCameraPOVView(this.userInteractionCurrentController.selectedObject,(()=>{const e=this.props.mainComponentThis.bindingRightBoxComponentRef&&this.props.mainComponentThis.bindingRightBoxComponentRef.current.activeParameters.current;e&&e.browserModPopupComponentRef.current&&e.browserModPopupComponentRef.current.onConfigureEntityClick()})))}var Wr=i(1317);const Vr=class{constructor(e,t,i,o,s){var n=this;this.setWallPlaneShadow=e=>{e.castShadow=!0,e.receiveShadow=!0},this.drawWall=()=>{let e=new te.ZAu;this.drawWallExteriorAndInteriorPlanes(e),this.variableVisiblityPlanes.push(this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight+this.wallHeight,this.floorplan3DThis.wallTopPlaneMaterial,e)),this.fixedVisibilityPlanes.push(this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight+1,this.floorplan3DThis.wallBottomPlaneMaterial,e)),this.variableVisiblityPlanes.push(this.drawStartEndWallPlanes(this.interiorLineCoords[0],this.exteriorLineCoords[0],e)),this.variableVisiblityPlanes.push(this.drawStartEndWallPlanes(this.interiorLineCoords[1],this.exteriorLineCoords[1],e)),this.floorThicknessWallPart=this.drawTopBottomWallPlanes([this.exteriorLineCoords[0],this.exteriorLineCoords[1],this.interiorLineCoords[1],this.interiorLineCoords[0]],this.wallStartHeight-this.floorplan3DThis.props.mainComponentThis.roomFloorVerticalOffset,this.floorplan3DThis.roomFloorDefaultMaterial,e,{depth:this.floorplan3DThis.props.mainComponentThis.floorThickness*this.floorplan3DThis.scaleFactor,bevelEnabled:!1}),this.floorThicknessWallPart.receiveShadow=!0,this.floorThicknessWallPart.castShadow=!1,this.wall3D=e,this.floorplan3DThis.isFloorHidden(this.floorNumber)&&(this.floorThicknessWallPart.visible=!1,this.setWallPlanesObjectsVisibility(!1,!1)),this.sceneObject.add(e),this.wall2D.alwaysHide?this.setWallPlanesObjectsVisibility(!1,!1):this.updateFrontWallVisibility()},this.drawExteriorInteriorPlane=(e,t,i,o,s,n,a)=>{let r=new te.Pa4(e.x,this.wallStartHeight,e.y),l=new te.Pa4(t.x,this.wallStartHeight,t.y),h=l.clone();h.y=this.wallStartHeight+this.wallHeight;let c=r.clone();c.y=this.wallStartHeight+this.wallHeight;let d=[r,l,h,c],p=Ki({x:r.x,y:r.z},{x:l.x,y:l.z});const{transform3Dto2DMatrix:m,transform2Dto3DMatrix:u}=this.calculateWallPlaneTransformMatrices(e,t);d.forEach((e=>e.applyMatrix4(m)));let g=new te.bnF(d.map((e=>new te.FM8(e.x,e.y))));d.forEach((e=>e.applyMatrix4(u)));for(let S=0;S<s.length;S++)if("doorWindow"===s[S].class){let e,t,o=[];if(s[S].realBbox.forEach((e=>o.push(Yi(e,i)))),o.sort(((e,t)=>t.distance-e.distance)),o=o.slice(0,2).map((e=>e.projectedPoint)),this.floorplan3DThis.props.mainComponentThis.isDoorObject(s[S].type)){const i=s[S].additionalParams.height3D*this.floorplan3DThis.scaleFactor;let n=new te.Pa4(o[0].x,this.wallStartHeight,o[0].y),a=new te.Pa4(o[1].x,this.wallStartHeight,o[1].y),r=a.clone();r.y=this.wallStartHeight+i;let l=n.clone();l.y=this.wallStartHeight+i,e=[n,a,r,l],e.forEach((e=>e.applyMatrix4(m))),t=e.map((e=>new te.FM8(e.x,e.y)))}else{const i=s[S].additionalParams.height3D*this.floorplan3DThis.scaleFactor,n=(s[S].additionalParams.positionY+s[S].additionalParams.height3D/2)*this.floorplan3DThis.scaleFactor;let a=new te.Pa4(o[0].x,this.wallStartHeight+n-i/2,o[0].y),r=new te.Pa4(o[1].x,this.wallStartHeight+n-i/2,o[1].y),l=r.clone();l.y=this.wallStartHeight+n+i/2;let h=a.clone();h.y=this.wallStartHeight+n+i/2,e=[a,r,l,h],e.forEach((e=>e.applyMatrix4(m))),t=e.map((e=>new te.FM8(e.x,e.y)))}g.holes.push(new te.y$t(t))}let f,b=new te.oa8(g),w=b.getAttribute("position"),C=new te.Pa4;for(let S=0;S<w.count;S++)C.fromBufferAttribute(w,S),C.applyMatrix4(u),w.setXYZ(S,C.x,C.y,C.z);w.needsUpdate=!0,b.computeVertexNormals(),b.scale(this.floorplan3DThis.scaleFactor,1,this.floorplan3DThis.scaleFactor);const x=this.wall2D[i===this.interiorLineEquation?"interiorPlaneMaterial":"exteriorPlaneMaterial"];if("Glass"!==x&&"Unknown"!==x&&q.isHexColor(x)){let e=r.clone();e.multiplyScalar(this.floorplan3DThis.scaleFactor);const t=t=>{const i=Ki({x:e.x,y:e.z},{x:t.x,y:t.z})/(p*this.floorplan3DThis.scaleFactor),o=t.y/this.wallHeight;return new te.FM8(i,o)};this.floorplan3DThis.calculateShapeGeometryUVMappings(b,t);const i=Ne.find((e=>e.title===x));f=this.floorplan3DThis.createTextureMaterial(this.floorplan3DThis.floorplanWallMaterials.find((e=>e.name===x)).textureData,o,{width:p*this.floorplan3DThis.scaleFactor,height:this.wallHeight,scaleWidthValue:i.width,scaleHeightValue:i.height})}else if("Glass"===x)f=new te.EJi,f.side=o,f.color=new te.Ilk(1,1,1),f.transmission=1,f.roughness=0,f.ior=1.7,f.thickness=.5,f.specularIntensity=1,f.clearcoat=1;else{let e;e="Unknown"===x?"#f9f3e4":x,f=new te.xoR({color:e,flatShading:!0,side:o})}let y=new te.Kj0(b,f);return n.planeObject=y,n.planeObject.wall3D=this,this.setWallPlaneShadow(y),a.add(y),y},this.drawTopBottomWallPlanes=(e,t,i,o,s)=>{let n,a=[new te.FM8(e[0].x*this.floorplan3DThis.scaleFactor,e[0].y*this.floorplan3DThis.scaleFactor),new te.FM8(e[1].x*this.floorplan3DThis.scaleFactor,e[1].y*this.floorplan3DThis.scaleFactor),new te.FM8(e[2].x*this.floorplan3DThis.scaleFactor,e[2].y*this.floorplan3DThis.scaleFactor),new te.FM8(e[3].x*this.floorplan3DThis.scaleFactor,e[3].y*this.floorplan3DThis.scaleFactor)],r=new te.bnF(a);n=s?new te.O7d(r,s):new te.oa8(r);let l=new te.Kj0(n,i);return l.rotation.set(Math.PI/2,0,0),l.position.y=t,this.setWallPlaneShadow(l),o.add(l),l},this.drawStartEndWallPlanes=(e,t,i)=>{let o=new Float32Array([e.x,this.wallStartHeight,e.y,t.x,this.wallStartHeight,t.y,t.x,this.wallStartHeight+this.wallHeight,t.y,e.x,this.wallStartHeight+this.wallHeight,e.y]),s=new te.u9r;s.setAttribute("position",new te.TlE(o,3));s.setIndex([0,1,2,0,2,3]);let n=new te.Kj0(s,this.floorplan3DThis.wallStartEndPlanesMaterial);return this.setWallPlaneShadow(n),n.scale.set(this.floorplan3DThis.scaleFactor,1,this.floorplan3DThis.scaleFactor),i.add(n),n},this.drawWallObjects=()=>{let e=this.wall2DObjects.filter((e=>"doorWindow"===e.class&&this.floorplan3DThis.props.mainComponentThis.isDoorObject(e.type))),t=this.wall2DObjects.filter((e=>"doorWindow"===e.class&&this.floorplan3DThis.props.mainComponentThis.isWindowObject(e.type))),i=this.wall2DObjects.filter((e=>"lights"===e.class&&("onWall"===e.family||"inWall"===e.family))),o=this.wall2DObjects.filter((e=>"furniture"===e.class&&!this.floorplan3DThis.props.mainComponentThis.isFanObject(e.type)&&!this.floorplan3DThis.props.mainComponentThis.isCoverObject(e.type)&&!this.floorplan3DThis.props.mainComponentThis.isPresenceBinaryObject(e.type)&&!this.floorplan3DThis.props.mainComponentThis.isHVACObject(e.type)&&!this.floorplan3DThis.props.mainComponentThis.isCameraObject(e.type)&&!this.floorplan3DThis.props.mainComponentThis.isScreenObject(e.type)&&("onWall"===e.family||"inWall"===e.family))),s=this.wall2DObjects.filter((e=>this.floorplan3DThis.props.mainComponentThis.isCoverObject(e.type)&&("onWall"===e.family||"inWall"===e.family))),n=this.wall2DObjects.filter((e=>this.floorplan3DThis.props.mainComponentThis.isFanObject(e.type)&&("onWall"===e.family||"inWall"===e.family))),a=this.wall2DObjects.filter((e=>this.floorplan3DThis.props.mainComponentThis.isPresenceBinaryObject(e.type)&&("onWall"===e.family||"inWall"===e.family))),r=this.wall2DObjects.filter((e=>this.floorplan3DThis.props.mainComponentThis.isHVACObject(e.type)&&("onWall"===e.family||"inWall"===e.family))),l=this.wall2DObjects.filter((e=>this.floorplan3DThis.props.mainComponentThis.isCameraObject(e.type)&&("onWall"===e.family||"inWall"===e.family))),h=this.wall2DObjects.filter((e=>this.floorplan3DThis.props.mainComponentThis.isScreenObject(e.type)&&("onWall"===e.family||"inWall"===e.family)));for(let c=0;c<e.length;c++)this.drawDoorWindowObjects(e[c]);for(let c=0;c<t.length;c++)this.drawDoorWindowObjects(t[c]);for(let c=0;c<i.length;c++)this.drawWallLightsObjects(i[c]);for(let c=0;c<o.length;c++)this.drawWallFurnitureObjects(o[c]);for(let c=0;c<s.length;c++)this.drawWallCoverObjects(s[c]);for(let c=0;c<n.length;c++)this.drawWallFanObjects(n[c]);for(let c=0;c<a.length;c++)this.drawWallPresenceBinaryObjects(a[c]);for(let c=0;c<r.length;c++)this.drawWallHVACObjects(r[c]);for(let c=0;c<l.length;c++)this.drawWallCameraObjects(l[c]);for(let c=0;c<h.length;c++)this.drawWallScreenObjects(h[c])},this.removeWallObjects=()=>{[...this.inWallItemObjects,...this.onWallItemObjects].forEach((e=>{this.removeWallObject(e,e.addToWall?"inWall":"onWall"),this.floorplan3DThis.removeFloorplanItem(e)}))},this.drawDoorWindowObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.props.mainComponentThis.isDoorObject(e.type)?n.floorplan3DThis.doorObjects3D:n.floorplan3DThis.windowObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallCoverObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.coverObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallLightsObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.lightObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallFurnitureObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.furnitureObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallFanObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.fanObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallPresenceBinaryObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.presenceObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallHVACObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.HVACObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallCameraObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.cameraObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.drawWallScreenObjects=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=n.floorplan3DThis.createFloorplanItem(n.sceneObject,n.floorplan3DThis.screenObjects3D,e.type,e,n.floorNumber,t);n.onWallObjectDrawed(i)},this.updateFrontWallVisibility=()=>{if(!this.callUpdateFrontWallVisibility||this.hideWall||this.wall2D.alwaysHide||this.floorplan3DThis.isFloorHidden(this.floorNumber))this.hideWall?this.setWallPlanesObjectsVisibility(!1):(this.wall2D.alwaysHide||this.floorplan3DThis.isFloorHidden(this.floorNumber))&&this.setWallPlanesObjectsVisibility(!1,!1);else{const e=new te.FM8(this.wallStart.x,this.wallStart.y).multiplyScalar(this.floorplan3DThis.scaleFactor),t=new te.FM8(this.wallEnd.x,this.wallEnd.y).multiplyScalar(this.floorplan3DThis.scaleFactor),i=t.x-e.x,o=t.y-e.y;let s=new te.Pa4(-o,0,i);s.normalize();const n=new te.Pa4;this.sceneObject===this.floorplan3DThis.floorplan3DOnMapScene?(n.copy(this.floorplan3DThis.floorplan3DOnMapCameraPosition),this.floorplan3DThis.processSceneVec3(n)):n.copy(this.floorplan3DThis.currentControls.object.position);let a=new te.Pa4((e.x+t.x)/2,this.wallStartHeight,(e.y+t.y)/2).clone().sub(n).clone(),r=s.dot(a)<=0;this.setWallPlanesObjectsVisibility(r)}},this.drawWallExteriorAndInteriorPlanes=e=>{new Array({planeLineCoords:this.interiorLineCoords,planeLineEquation:this.interiorLineEquation,planeAttributeObject:this.interiorWallPlane},{planeLineCoords:this.exteriorLineCoords,planeLineEquation:this.exteriorLineEquation,planeAttributeObject:this.exteriorWallPlane}).forEach((t=>this.variableVisiblityPlanes.push(this.drawExteriorInteriorPlane(t.planeLineCoords[0],t.planeLineCoords[1],t.planeLineEquation,te.ehD,this.wall2DObjects.filter((e=>"inWall"===e.family)),t.planeAttributeObject,e))))},this.calculateWallPlaneTransformMatrices=(e,t)=>{const i=this.floorplan3DThis.calculateAngleBetween2DVectors(1,0,t.x-e.x,t.y-e.y);let o=new te.yGw,s=new te.yGw,n=new te.yGw,a=new te.yGw;return a.makeRotationY(-i),n.makeTranslation(-e.x,0,-e.y),o.multiplyMatrices(a,n),s=o.clone().invert(),{transform3Dto2DMatrix:o,transform2Dto3DMatrix:s}},this.setWallPlanesObjectsVisibility=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(n.wall2D.alwaysHide||n.floorplan3DThis.isFloorHidden(n.floorNumber))&&(e=!1,t=!1);let i=[...n.variableVisiblityPlanes];t||i.push(...n.fixedVisibilityPlanes);for(let s=0;s<i.length;s++)i[s].visible=e;const o=[...n.inWallItemObjects,...n.onWallItemObjects];for(let s=0;s<o.length;s++)o[s].object2D.additionalParams.hideWithWall?o[s].setVisibilityStatus(e):o[s].setVisibilityStatus(!0)},this.setExteriorInteriorPlanesOpacity=e=>{new Array(this.interiorWallPlane.planeObject,this.exteriorWallPlane.planeObject).forEach((t=>{t.material.opacity=e,t.material.transparent=100!==e,t.material.needsUpdate=!0}))},this.interiorLineCoords=[],this.exteriorLineCoords=[],this.interiorLineEquation=i.equations.up,this.exteriorLineEquation=i.equations.down,this.wallStart=i.start,this.wallEnd=i.end,this.wall2D=i,this.wall2DObjects=o,this.wall3D=null,this.inWallItemObjects=[],this.onWallItemObjects=[],this.variableVisiblityPlanes=[],this.fixedVisibilityPlanes=[],this.floorThicknessWallPart=null,this.interiorWallPlane={},this.exteriorWallPlane={},this.sceneObject=t,this.callUpdateFrontWallVisibility=!0,this.hideWall=!1,this.floorNumber=s,this.wallHeight=i.wallHeight*e.scaleFactor,this.wallStartHeight=e.props.mainComponentThis.getFloorStartElevation(s,!0),this.floorplan3DThis=e;const a=ro(i,this.floorplan3DThis.isPointOnWallDecimalPrecision);this.interiorLineCoords=a.interiorLineCoords,this.exteriorLineCoords=a.exteriorLineCoords,2===this.interiorLineCoords.length&&2===this.exteriorLineCoords.length&&this.drawWall()}onWallObjectDrawed(e){const t="inWall"===e.object2D.family?this.inWallItemObjects:this.onWallItemObjects;t.find((t=>t.object2D.id===e.object2D.id))||(t.push(e),this.hideWall||this.wall2D.alwaysHide?e.setVisibilityStatus(!1):this.updateFrontWallVisibility())}addWallObject(e,t){if(!this.wall2DObjects.find((t=>t.id===e.object2D.id))){Wr.log("addWallObject",e),this.wall2DObjects.push(e.object2D);("inWall"===t?this.inWallItemObjects:this.onWallItemObjects).push(e)}}removeWallObject(e,t){Wr.log("removeWallObject"),this.wall2DObjects=this.wall2DObjects.filter((t=>t.id!==e.object2D.id));const i="inWall"===t?this.inWallItemObjects:this.onWallItemObjects,o=i.findIndex((t=>t.object2D.id===e.object2D.id));-1!==o&&i.splice(o,1)}getWallItemObject(e,t){return("inWall"===t?this.inWallItemObjects:this.onWallItemObjects).find((t=>t.object2D.id===e.id))}redrawWallExteriorInteriorPlanes(){Wr.log("redrawWallExteriorInteriorPlanes"),this.variableVisiblityPlanes=this.variableVisiblityPlanes.filter((e=>e.uuid!==this.interiorWallPlane.planeObject.uuid||e.uuid!==this.exteriorWallPlane.planeObject.uuid)),new Array(this.interiorWallPlane.planeObject,this.exteriorWallPlane.planeObject).forEach((e=>{this.wall3D.remove(e),xo(e)})),this.drawWallExteriorAndInteriorPlanes(this.wall3D),100!==this.floorplan3DThis.wallsOpacityRef.current.getWallsOpacityValue()&&this.setExteriorInteriorPlanesOpacity(this.floorplan3DThis.wallsOpacityRef.current.getWallsOpacityValue()/100),this.updateFrontWallVisibility()}removeWall(){this.sceneObject.remove(this.wall3D),xo(this.wall3D),this.removeWallObjects()}};var Nr=i(1317);const Er=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.floorplan3DThis=e,this.bindedObjects=t||[],this.connectorIDPropertyName=e.props.mainComponentThis.connectorIDbinderIDPropertyName,this.class=e.getObjectConnectorClassValue(i),this.bindWithFixed2DObjects=e.getIsFixed2DObjectsValue(i),this.additionalParameters=e.getObjectConnectorAdditionalParameters(i),e.setObjectsConnectorInstanceCustomProperties(this,i)}create(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.bindWithFixed2DObjects){const e=[...this.bindedObjects];this.bindedObjects=[];for(let i=0;i<e.length;i++)this.addBindedObject(e[i],t)}}update(e){for(const[t,i]of Object.entries(e))this[t]=i;if(this.bindedObjects)if(this.bindWithFixed2DObjects)this.floorplan3DThis.controlPanelRef.current.updateFixedBindedObjects(this.bindedObjects,e);else if(this.additionalParameters.customBindedObjectUpdateMethodName)this.bindedObjects.forEach((t=>{this.floorplan3DThis[this.additionalParameters.customBindedObjectUpdateMethodName](t,e)}));else{const t=this.bindedObjects.map((e=>this.floorplan3DThis.getObjectsConnectorUnfixedBindedObjectParameters(e)));for(let e=0;e<this.bindedObjects.length;e++)this.removeBindedObject(this.bindedObjects[e],!1);this.bindedObjects=[];for(let e=0;e<t.length;e++)this.addBindedObject(t[e]);this.floorplan3DThis.controlPanelRef.current.updateUnfixedBindedObjects(e)}else this.create(e)}removeBindedObject(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.bindedObjects.findIndex((t=>t.object2D.id===e.object2D.id));if(-1!==i){t&&this.bindedObjects.splice(i,1);let o=[this.floorplan3DThis.floorplan3DViewScene];this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene&&o.push(this.floorplan3DThis.floorplan3DOnMapScene),this.bindWithFixed2DObjects?o.forEach((t=>{const i=t.getObjectsByProperty(this.connectorIDPropertyName,this[this.connectorIDPropertyName]);Nr.log("Remove binded object Target object",i);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){Nr.log("Remove target object"),i[o][this.connectorIDPropertyName]=null;const e=this.floorplan3DThis.removeBindedFixedObjectCallback(i[o]);i[o].changeStateMethod(i[o],e);break}})):(this.floorplan3DThis[this.additionalParameters.floorplanViewArrayName]=this.floorplan3DThis[this.additionalParameters.floorplanViewArrayName].filter((t=>!(t.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName]&&t.mesh.object2D.id===e.object2D.id))),this.floorplan3DThis[this.additionalParameters.currentViewArrayName]=this.floorplan3DThis[this.additionalParameters.currentViewArrayName].filter((t=>!(t.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName]&&t.mesh.object2D.id===e.object2D.id))),o.forEach((t=>{const i=t.getObjectsByProperty(this.connectorIDPropertyName,this[this.connectorIDPropertyName]);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){this.floorplan3DThis.removeUnfixedItem(i[o],!1);break}})))}if(null===e[this.connectorIDPropertyName]){const t=e.itemObject;t&&t.removeAllAnimations&&(Nr.log("ObjectsConnector removeAllAnimations call"),t.removeAllAnimations())}}addBindedObject(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.bindedObjects.push(e),this.bindWithFixed2DObjects){let t=[this.floorplan3DThis.floorplan3DViewScene];this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene&&t.push(this.floorplan3DThis.floorplan3DOnMapScene),t.forEach((t=>{const i=t.getObjectsByProperty("type",e.type);for(let o=0;o<i.length;o++)if(i[o].object2D.id===e.object2D.id){i[o][this.connectorIDPropertyName]=this[this.connectorIDPropertyName];const e=this.floorplan3DThis.addBindedFixedObjectCallback(i[o],this);i[o].changeStateMethod(i[o],e);break}})),this.floorplan3DThis.userInteractionCurrentController.selectedObject&&this.floorplan3DThis.userInteractionCurrentController.selectedObject.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName]&&this.floorplan3DThis.updateRightBoxBindingComponent(this.floorplan3DThis.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id)))))}else{if("sensor"===this.class){const t=this.floorplan3DThis.createSensorMesh(e,this);if(!t)return void this.bindedObjects.splice(this.bindedObjects.length-1,1);this.bindedObjects[this.bindedObjects.length-1]=t}if("other"===this.class){const t=this.floorplan3DThis.createOtherMesh(e,this);if(!t)return void this.bindedObjects.splice(this.bindedObjects.length-1,1);this.bindedObjects[this.bindedObjects.length-1]=t}if("presence_area"===this.class){const t=this.floorplan3DThis.createPresenceAreaGroup(e,this);if(!t)return void this.bindedObjects.splice(this.bindedObjects.length-1,1);this.bindedObjects[this.bindedObjects.length-1]=t}if(t){const e=this.floorplan3DThis.createUnfixedItem(this.floorplan3DThis.floorplan3DViewScene,this.bindedObjects[this.bindedObjects.length-1]);if(this.floorplan3DThis[this.additionalParameters.floorplanViewArrayName].push(e),this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.floorplan3DOnMapScene){const e=this.floorplan3DThis.cloneUnfixedBindedObject3D(this.bindedObjects[this.bindedObjects.length-1]),t=this.floorplan3DThis.createUnfixedItem(this.floorplan3DThis.floorplan3DOnMapScene,e);this.floorplan3DThis[this.additionalParameters.currentViewArrayName].push(t)}else this.floorplan3DThis[this.additionalParameters.currentViewArrayName].push(e)}}}remove(){Nr.log("ObjectsConnector remove");const e=this.floorplan3DThis.userInteractionCurrentController.selectedObject&&this.floorplan3DThis.userInteractionCurrentController.selectedObject.mesh[this.connectorIDPropertyName]===this[this.connectorIDPropertyName];for(let t=0;t<this.bindedObjects.length;t++)this.removeBindedObject(this.bindedObjects[t],!1);this.bindedObjects=[],e&&(this.bindWithFixed2DObjects?this.floorplan3DThis.updateRightBoxBindingComponent(null):this.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null))}};function Hr(e){for(let g=0;g<this.floorplanFloors.length;g++){for(let t=0;t<this.floorplanFloors[g].wallData.length;t++){[this.floorplanFloors[g].wallData[t].interiorPlaneMaterial,this.floorplanFloors[g].wallData[t].exteriorPlaneMaterial].forEach((e=>{"Glass"!==e&&"Unknown"!==e&&q.isHexColor(e)&&!this.floorplanWallMaterials.find((t=>t.name===e))&&this.floorplanWallMaterials.push({name:e,textureData:null})}))}for(let t=0;t<this.floorplanFloors[g].roomData.length;t++)this.floorplanFloors[g].roomData[t].roomFloorType&&"pattern"!==this.floorplanFloors[g].roomData[t].roomFloorType||"none"===this.floorplanFloors[g].roomData[t].floorTexture||this.roomFloorTextures.find((e=>e.name===this.floorplanFloors[g].roomData[t].floorTexture))||this.roomFloorTextures.push({name:this.floorplanFloors[g].roomData[t].floorTexture,textureData:null});const e=this.floorplanFloors[g].objData.filter((e=>!yt[e.type]));[{floorItems:e.filter((e=>!("doorWindow"!==e.class||!this.props.mainComponentThis.isDoorObject(e.type)))),itemsArrayName:"doorObjects3D"},{floorItems:e.filter((e=>!("doorWindow"!==e.class||!this.props.mainComponentThis.isWindowObject(e.type)))),itemsArrayName:"windowObjects3D"},{floorItems:e.filter((e=>"lights"===e.class)),itemsArrayName:"lightObjects3D"},{floorItems:e.filter((e=>!("furniture"!==e.class||this.props.mainComponentThis.isFanObject(e.type)||this.props.mainComponentThis.isCoverObject(e.type)||this.props.mainComponentThis.isPresenceBinaryObject(e.type)||this.props.mainComponentThis.isHVACObject(e.type)||this.props.mainComponentThis.isCameraObject(e.type)||this.props.mainComponentThis.isScreenObject(e.type)))),itemsArrayName:"furnitureObjects3D"},{floorItems:e.filter((e=>!!this.props.mainComponentThis.isFanObject(e.type))),itemsArrayName:"fanObjects3D"},{floorItems:e.filter((e=>!!this.props.mainComponentThis.isCoverObject(e.type))),itemsArrayName:"coverObjects3D"},{floorItems:e.filter((e=>!!this.props.mainComponentThis.isPresenceBinaryObject(e.type))),itemsArrayName:"presenceBinaryObjects3D"},{floorItems:e.filter((e=>!!this.props.mainComponentThis.isPresenceAreaObject(e.type))),itemsArrayName:"presenceAreaObjects3D"},{floorItems:e.filter((e=>!!this.props.mainComponentThis.isHVACObject(e.type))),itemsArrayName:"HVACObjects3D"},{floorItems:e.filter((e=>!!this.props.mainComponentThis.isCameraObject(e.type))),itemsArrayName:"cameraObjects3D"},{floorItems:e.filter((e=>!!this.props.mainComponentThis.isScreenObject(e.type))),itemsArrayName:"screenObjects3D"}].forEach((e=>{for(let t=0;t<e.floorItems.length;t++){let i=[];"presenceAreaObjects3D"===e.itemsArrayName?e.floorItems[t].additionalParams.detectedObjectToModelMappings.forEach((o=>i.push({object2D:e.floorItems[t],objectType:o.modelType}))):i=[{object2D:e.floorItems[t],objectType:e.floorItems[t].type}],i.forEach((t=>{this[e.itemsArrayName].find((e=>e.floorplanItemType===t.objectType))||this[e.itemsArrayName].push({object2D:t.object2D,floorplanItemType:t.objectType,object:null,sizeVector:null})}))}}))}const t=this.floorplanWallMaterials.find((e=>!e.textureData)),i=this.roomFloorTextures.find((e=>!e.textureData)),o=this.panelDrawingOptions.flatMap((e=>e.objects3DArray)).filter((e=>("onWall"===e.object2D.family||"inWall"===e.object2D.family)&&null===e.object)),s=this.lightObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object)),n=this.furnitureObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object)),a=this.fanObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object)),r=this.coverObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object));[...this.presenceBinaryObjects3D,...this.presenceAreaObjects3D].forEach((e=>{this.presenceObjects3D.find((t=>t.floorplanItemType===e.floorplanItemType))||this.presenceObjects3D.push(e)}));const l=this.presenceObjects3D.filter((e=>null===e.object)),h=this.presenceBinaryObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object&&l.find((t=>t.floorplanItemType===e.floorplanItemType)))),c=this.presenceAreaObjects3D.filter((e=>null===e.object&&l.find((t=>t.floorplanItemType===e.floorplanItemType)))),d=this.HVACObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object)),p=this.cameraObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object)),m=this.screenObjects3D.filter((e=>"onWall"!==e.object2D.family&&"inWall"!==e.object2D.family&&null===e.object)),u=!this.textFont;if(t&&this.floorplanWallMaterials.forEach((t=>this.loadTexture(t,this.loadingWallMaterialsStatuses,(()=>"".concat("https://app.klet3d.com","/wallMaterials/").concat(t.name,".png")),(()=>{this.drawFloorplanFloorsWalls(e),e===this.floorplan3DViewScene&&(this.floorplanViewWalls3D=[...this.currentWalls3D]),Zi(this.loadingWallObjectsStatuses)&&this.drawFloorplanFloorsWallObjects(e)})))),o.length>0&&o.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingWallObjectsStatuses,!0,(()=>{Zi(this.loadingWallMaterialsStatuses)&&this.drawFloorplanFloorsWallObjects(e)})))),i?this.roomFloorTextures.forEach((t=>this.loadTexture(t,this.loadingRoomFloorTexturesStatuses,(()=>"".concat("https://app.klet3d.com","/textures/").concat(t.name,".png")),(()=>this.drawFloorplanRoomFloors(e))))):this.drawFloorplanRoomFloors(e),s.length>0?s.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingFreeLightObjectsStatuses,!0,(()=>this.drawFloorplanFreeLights(e))))):this.drawFloorplanFreeLights(e),n.length>0?n.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingFreeFurnitureObjectsStatuses,!0,(()=>this.drawFloorplanFreeFurniture(e))))):this.drawFloorplanFreeFurniture(e),a.length>0?a.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingFanObjectsStatuses,!0,(()=>this.drawFloorplanFreeFans(e))))):this.drawFloorplanFreeFans(e),r.length>0?r.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingCoverObjectsStatuses,!0,(()=>this.drawFloorplanFreeCovers(e))))):this.drawFloorplanFreeCovers(e),l.length>0?l.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingPresenceObjectsStatuses,!0,null,(()=>{h.find((e=>null===e.object))||this.drawFloorplanFreePresenceBinarys(e),c.find((e=>null===e.object))||this.drawFloorplanPresenceAreas(e)})))):(this.drawFloorplanFreePresenceBinarys(e),this.drawFloorplanPresenceAreas(e)),d.length>0?d.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingHVACObjectsStatuses,!0,(()=>this.drawFloorplanFreeHVACs(e))))):this.drawFloorplanFreeHVACs(e),p.length>0?p.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingCameraObjectsStatuses,!0,(()=>this.drawFloorplanFreeCameras(e))))):this.drawFloorplanFreeCameras(e),m.length>0?m.forEach((t=>this.loadFloorplanItemObject3D(t,this.loadingScreenObjectsStatuses,!0,(()=>this.drawFloorplanFreeScreens(e))))):this.drawFloorplanFreeScreens(e),u){let t=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1),this.fontLoader.load("https://cdn.jsdelivr.net/gh/mrdoob/three.js@master/examples/fonts/droid/droid_sans_regular.typeface.json",(i=>{this.textFont=i,this.loadingCallbacksStatuses[t]=!0,this.isInitialLoadingFinished(),this.drawFloorplanSensors(e),this.drawFloorplanOthers(e),this.createFloorplanTimeMesh(e,this.calculateCurrentDate())}))}else this.drawFloorplanSensors(e),this.drawFloorplanOthers(e);t||(this.drawFloorplanFloorsWalls(e),e===this.floorplan3DViewScene&&(this.floorplanViewWalls3D=[...this.currentWalls3D])),o.length||this.drawFloorplanFloorsWallObjects(e),this.isInitialLoadingFinished()}function zr(e,t,i,o,s){let n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this.panelDrawingOptions.find((e=>e.objects3DArray===t)).object3DProperties;this.props.mainComponentThis.isChristmasTreeObject(i)&&(a={type:"christmas_tree"});const r=new(ze[this.props.mainComponentThis.getObjectItemType(i)])(e,t,a,o,i,s,this,{fixed:!0,resizable:!1},n);return r.initObject(),r.mesh.object2D=o,r.mesh.floorNumber=s,this.props.mainComponentThis.isLightObject(i)?(r.mesh.changeStateMethod=this.handleLightSwitchClick,r.mesh.changeStateOnClick=this.toggleLightState,r.mesh.state="off"):this.props.mainComponentThis.isDoorObject(i)||this.props.mainComponentThis.isWindowObject(i)?(r.mesh.changeStateMethod=this.handleDoorWindowSwitchClick,r.mesh.status="closed",this.setDoorWindowMeshToDefaultState(r)):this.props.mainComponentThis.isFanObject(i)?(r.mesh.changeStateMethod=this.handleFanSwitchClick,r.mesh.changeStateOnClick=this.toggleFanState,r.mesh.state="off"):this.props.mainComponentThis.isCoverObject(i)?(r.mesh.changeStateMethod=this.handleCoverSwitchClick,r.mesh.changeStateOnClick=this.toggleCoverState):this.props.mainComponentThis.isPresenceBinaryObject(i)?(r.mesh.changeStateMethod=this.handlePresenceBinaryDetectionUpdate,r.mesh.state="on"):this.props.mainComponentThis.isHVACObject(i)?(r.mesh.changeStateMethod=this.handleHVACUpdate,r.mesh.changeStateOnClick=this.toggleHVACState,r.mesh.state="off"):this.props.mainComponentThis.isChristmasTreeObject(i)?(r.mesh.changeStateMethod=this.handleChristmasTreeUpdate,r.mesh.changeStateOnClick=this.toggleChristmasTreeState,r.mesh.state="off"):this.props.mainComponentThis.isCameraObject(i)?(r.mesh.changeStateMethod=this.handleCameraUpdate,r.mesh.changeStateOnClick=this.onCameraClick,r.mesh.longPressCustomHandler=this.onCameraLongPress,r.mesh.state="off"):this.props.mainComponentThis.isScreenObject(i)&&(r.mesh.changeStateMethod=this.handleScreenUpdate,r.mesh.changeStateOnClick=this.toggleScreenState,r.mesh.state="off"),this.setFloorplanItemMeshProperties(r.mesh,o),r}function Gr(e){this.objectConnectorBindedObjectsOnItemRemoveCheck(e.mesh),e.remove(),this.userInteractionCurrentController.itemRemoved(e)}function Ur(e){this.currentWalls3D=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorWalls(e,this.floorplanFloors[t].wallData,this.floorplanFloors[t].floorNumber,this.currentWalls3D)}function qr(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];for(let n=0;n<t.length;n++){let a=new Vr(this,e,t[n],this.props.mainComponentThis.editor.objFromWall(t[n],this.floorplanFloors.find((e=>e.floorNumber===i)).objData),i);a.wall3D?(o.push(a),s&&a.drawWallObjects()):a=null}100!==this.wallsOpacityRef.current.getWallsOpacityValue()&&this.changeWallMaterialOpacity(o,this.wallsOpacityRef.current.getWallsOpacityValue()),!this.wallsVisibilityOptionsRef.current.getShowWallSwitchState()&&this.wallsVisibilityOptionsRef.current.hideFloorplanWalls(o),this.wallsVisibilityOptionsRef.current.getFrontWallsSwitchState()&&this.wallsVisibilityOptionsRef.current.showFrontFloorplanWalls(o)}function Kr(){for(let e=0;e<this.currentWalls3D.length;e++)this.currentWalls3D[e].drawWallObjects()}function Yr(e){this.currentFurniture=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeFurniture(e,this.filterFreeFurnitureObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentFurniture)}function Xr(e,t,i,o){for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.furnitureObjects3D,t[s].type,t[s],i,!1);o.push(n)}}function Zr(e){this.currentRoomFloors=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorRoomFloors(e,this.floorplanFloors[t],this.currentRoomFloors)}function Jr(e,t,i){const o=[{name:"Room floor",translateZ:-this.props.mainComponentThis.getFloorStartElevation(t.floorNumber,!0),castShadow:!1,receiveShadow:!0,floorNumber:t.floorNumber}];for(let s=0;s<t.roomData.length;s++){let n=[];for(let e=0;e<t.roomData[s].coordsOutsideWithOrphans.length;e++)n.push(new te.FM8(t.roomData[s].coordsOutsideWithOrphans[e].x,t.roomData[s].coordsOutsideWithOrphans[e].y).multiplyScalar(this.scaleFactor));let a,r=new te.bnF(n),l=new te.oa8(r);for(let h=0;h<o.length;h++){if(o[h].material)a=o[h].material;else if(t.roomData[s].roomFloorType&&"pattern"!==t.roomData[s].roomFloorType||"none"===t.roomData[s].floorTexture)a="color"===t.roomData[s].roomFloorType?new te.xoR({side:te.ehD,color:t.roomData[s].floorColor}):this.roomFloorDefaultMaterial;else{const e=so(n),i={width:e.width,height:e.height,scaleWidthValue:Kt[t.roomData[s].floorTexture].width,scaleHeightValue:Kt[t.roomData[s].floorTexture].height},o=t=>{const i=(t.x-e.minX)/e.width,o=(e.maxY-t.y)/e.height;return new te.FM8(Math.min(1,Math.max(0,i)),Math.min(1,Math.max(0,o)))};this.calculateShapeGeometryUVMappings(l,o),a=this.createTextureMaterial(this.roomFloorTextures.find((e=>e.name===t.roomData[s].floorTexture)).textureData,te._Li,i,t.roomData[s].floorTextureRepeatCount)}const c=new te.Kj0(l,a);c.rotation.set(Math.PI/2,0,0);const d=this.props.mainComponentThis.getFloorStartElevation(t.floorNumber,!0);c.translateZ(-d),i.push(c),c.receiveShadow=o[h].receiveShadow,c.castShadow=o[h].castShadow,c.name=o[h].name,c.floorNumber=o[h].floorNumber,"Room roof"!==o[h].name&&(c.roomID=t.roomData[s].id),c.isNoneFloorType="none"===t.roomData[s].roomFloorType,(this.isFloorHidden(t.floorNumber)||c.isNoneFloorType)&&(c.visible=!1),e.add(c);const p=new te.Kj0(new te.O7d(r,{depth:this.props.mainComponentThis.floorThickness*this.scaleFactor,bevelEnabled:!1}),this.roomFloorDefaultMaterial);p.receiveShadow=!0,p.castShadow=!1,p.rotation.set(Math.PI/2,0,0),p.translateZ(-(d-this.props.mainComponentThis.roomFloorVerticalOffset)),c.thickMesh=p,(this.isFloorHidden(t.floorNumber)||c.isNoneFloorType)&&(p.visible=!1),e.add(p)}}}function Qr(e){this.currentViewLights=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeLights(e,this.filterFreeLightsObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentViewLights)}function $r(e,t,i,o){for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.lightObjects3D,t[s].type,t[s],i,!1);o.push(n)}}function el(e){this.currentViewFans=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeFans(e,this.filterFreeFansObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentViewFans)}function tl(e,t,i,o){for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.fanObjects3D,t[s].type,t[s],i,!1);o.push(n)}}function il(e){this.currentViewCovers=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeCovers(e,this.filterFreeCoversObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentViewCovers)}function ol(e,t,i,o){for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.coverObjects3D,t[s].type,t[s],i,!1);o.push(n)}}function sl(e){this.currentViewPresenceBinarys=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreePresenceBinarys(e,this.filterFreePresenceBinarysObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentViewPresenceBinarys)}function nl(e,t,i,o){for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.presenceObjects3D,t[s].type,t[s],i,!1);o.push(n)}}function al(e){this.currentViewHVACs=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeHVACs(e,this.filterFreeHVACsObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentViewHVACs)}function rl(e,t,i,o){for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.HVACObjects3D,t[s].type,t[s],i,!1);o.push(n)}}function ll(e){this.currentViewCameras=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeCameras(e,this.filterFreeCamerasObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentViewCameras)}function hl(e,t,i,o){for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.cameraObjects3D,t[s].type,t[s],i,!1);o.push(n)}}function cl(e){this.currentViewScreens=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorFreeScreens(e,this.filterFreeScreensObjData(this.floorplanFloors[t].objData),this.floorplanFloors[t].floorNumber,this.currentViewScreens)}function dl(e,t,i,o){for(let s=0;s<t.length;s++){const n=this.createFloorplanItem(e,this.screenObjects3D,t[s].type,t[s],i,!1);o.push(n)}}function pl(e){this.currentViewSensors=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorBindedUnfixedObjects(e,this.floorplanFloors[t].objData.filter((e=>"sensor"===e.type)),this.floorplanFloors[t].floorNumber,this.currentViewSensors)}function ml(e){this.currentViewOthers=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorBindedUnfixedObjects(e,this.floorplanFloors[t].objData.filter((e=>"other_entity"===e.type)),this.floorplanFloors[t].floorNumber,this.currentViewOthers)}function ul(e){this.currentViewPresenceAreas=[];for(let t=0;t<this.floorplanFloors.length;t++)this.drawFloorBindedUnfixedObjects(e,this.floorplanFloors[t].objData.filter((e=>this.props.mainComponentThis.isPresenceAreaObject(e.type))),this.floorplanFloors[t].floorNumber,this.currentViewPresenceAreas)}function gl(e,t,i,o){for(let s=0;s<t.length;s++){let n=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.objID.find((e=>e.id===t[s].id))));if(n){if(this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(n[this.props.mainComponentThis.connectorIDbinderIDPropertyName])){let a=this.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===n[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));if(a){let n=a.bindedObjects.find((e=>e.object2D.id===t[s].id));if(n){const i=e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,a[this.props.mainComponentThis.connectorIDbinderIDPropertyName]);let r=!1;for(let e=0;e<i.length;e++)if(i[e].object2D.id===t[s].id){r=!0;break}if(!r){const t=this.cloneUnfixedBindedObject3D(n),i=this.createUnfixedItem(e,t);o.push(i)}}else{const n=a.bindedObjects.length;if(a.addBindedObject(this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:t[s],floorNumber:i}),!1),a.bindedObjects[n]){const t=this.createUnfixedItem(e,a.bindedObjects[n]);o.push(t)}}}else{const a=new Er(this,[this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:t[s],floorNumber:i})],this.getObjectConnectorParamsData(n[this.props.mainComponentThis.connectorIDbinderIDPropertyName],t[s]));if(this.objectConnectorsArray.push(a),a.create(this.getObjectConnectorParamsData(n[this.props.mainComponentThis.connectorIDbinderIDPropertyName],t[s]),!1),a.bindedObjects[0]){const t=this.createUnfixedItem(e,a.bindedObjects[0]);o.push(t)}}}}}}function fl(e){let t=[{scene:this.floorplan3DViewScene,walls3DArray:this.floorplanViewWalls3D,floorFreeFurniture3DArray:"floorplanViewFurniture",floorFreeLights3DArray:"floorplanViewLights",floorFreeCovers3DArray:"floorplanViewCovers",floorFreeFans3DArray:"floorplanViewFans",floorFreePresenceBinarys3DArray:"floorplanViewPresenceBinarys",floorFreeHVACs3DArray:"floorplanViewHVACs",floorFreeCameras3DArray:"floorplanViewCameras",floorFreeScreens3DArray:"floorplanViewScreens"}];this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&t.push({scene:this.floorplan3DOnMapScene,walls3DArray:this.currentWalls3D,floorFreeFurniture3DArray:"currentFurniture",floorFreeLights3DArray:"currentViewLights",floorFreeCovers3DArray:"currentViewCovers",floorFreeFans3DArray:"currentViewFans",floorFreePresenceBinarys3DArray:"currentViewPresenceBinarys",floorFreeHVACs3DArray:"currentViewHVACs",floorFreeCameras3DArray:"currentViewCameras",floorFreeScreens3DArray:"currentViewScreens"}),t.forEach((t=>{const i=t.scene.getObjectsByProperty("isFloorplanItem",!0).filter((t=>t.itemObject.floorNumber===e.floorNumber));for(let e=0;e<i.length;e++)this.removeFloorplanItem(i[e].itemObject);const o=t.walls3DArray.filter((t=>t.floorNumber===e.floorNumber));for(let e=0;e<o.length;e++)o[e].removeWallObjects();new Array(t.floorFreeFurniture3DArray,t.floorFreeLights3DArray,t.floorFreeCovers3DArray,t.floorFreeFans3DArray,t.floorFreePresenceBinarys3DArray,t.floorFreeHVACs3DArray,t.floorFreeCameras3DArray,t.floorFreeScreens3DArray).forEach((t=>this[t]=this[t].filter((t=>t.floorNumber!==e.floorNumber))));for(let s=0;s<o.length;s++)o[s].wall2DObjects=this.props.mainComponentThis.editor.objFromWall(o[s].wall2D,e.objData),o[s].drawWallObjects();this.drawFloorFreeFurniture(t.scene,this.filterFreeFurnitureObjData(e.objData),e.floorNumber,this[t.floorFreeFurniture3DArray]),this.drawFloorFreeLights(t.scene,this.filterFreeLightsObjData(e.objData),e.floorNumber,this[t.floorFreeLights3DArray]),this.drawFloorFreeCovers(t.scene,this.filterFreeCoversObjData(e.objData),e.floorNumber,this[t.floorFreeCovers3DArray]),this.drawFloorFreeFans(t.scene,this.filterFreeFansObjData(e.objData),e.floorNumber,this[t.floorFreeFans3DArray]),this.drawFloorFreePresenceBinarys(t.scene,this.filterFreePresenceBinarysObjData(e.objData),e.floorNumber,this[t.floorFreePresenceBinarys3DArray]),this.drawFloorFreeHVACs(t.scene,this.filterFreeHVACsObjData(e.objData),e.floorNumber,this[t.floorFreeHVACs3DArray]),this.drawFloorFreeCameras(t.scene,this.filterFreeCamerasObjData(e.objData),e.floorNumber,this[t.floorFreeCameras3DArray]),this.drawFloorFreeScreens(t.scene,this.filterFreeScreensObjData(e.objData),e.floorNumber,this[t.floorFreeScreens3DArray])}))}function bl(e){this.removeFloorplanFloorItems(this.floorplan3DViewScene,e,"floorplanViewWalls3D","floorplanViewRoomFloors","floorplanViewFurniture","floorplanViewLights","floorplanViewCovers","floorplanViewFans","floorplanViewPresenceBinarys","floorplanViewHVACs","floorplanViewCameras","floorplanViewScreens","floorplanViewSensors","floorplanViewOthers","floorplanViewPresenceAreas"),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?this.removeFloorplanFloorItems(this.floorplan3DOnMapScene,e,"currentWalls3D","currentRoomFloors","currentFurniture","currentViewLights","currentViewCovers","currentViewFans","currentViewPresenceBinarys","currentViewHVACs","currentViewCameras","currentViewScreens","currentViewSensors","currentViewOthers","currentViewPresenceAreas"):this.setCurrentFromFloorplanArrays(),this.updateControlPanelState()}function wl(e,t,i,o,s,n,a,r,l,h,c,d,p,m,u){this[i]=this[i].filter((e=>e.floorNumber!==t||(e.removeWall(),!1)));let g=[t];t===this.getMaxFloorNumber()&&g.push(this.getMaxFloorNumber()+1),this[o]=this[o].filter((t=>!g.includes(t.floorNumber)||(e.remove(t.thickMesh),xo(t.thickMesh),e.remove(t),xo(t),!1))),this[s]=this[s].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[n]=this[n].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[a]=this[a].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[r]=this[r].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[l]=this[l].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[h]=this[h].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[c]=this[c].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1))),this[d]=this[d].filter((e=>e.floorNumber!==t||(this.removeFloorplanItem(e),!1)));[p,m,u].forEach((e=>{this[e]=this[e].filter((e=>{const i=e.mesh;return i.floorNumber!==t||(this.removeUnfixedItem(i,!0),!1)}))}))}function Cl(e){this.addFloorplanFloorItems(this.floorplan3DViewScene,e,this.floorplanViewWalls3D,this.floorplanViewRoomFloors,this.floorplanViewFurniture,this.floorplanViewLights,this.floorplanViewCovers,this.floorplanViewFans,this.floorplanViewPresenceBinarys,this.floorplanViewHVACs,this.floorplanViewCameras,this.floorplanViewScreens,this.floorplanViewSensors,this.floorplanViewOthers,this.floorplanViewPresenceAreas),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?this.addFloorplanFloorItems(this.floorplan3DOnMapScene,e,this.currentWalls3D,this.currentRoomFloors,this.currentFurniture,this.currentViewLights,this.currentViewCovers,this.currentViewFans,this.currentViewPresenceBinarys,this.currentViewHVACs,this.currentViewCameras,this.currentViewScreens,this.currentViewSensors,this.currentViewOthers,this.currentViewPresenceAreas):this.setCurrentFromFloorplanArrays(),this.updateControlPanelState()}function xl(e,t,i,o,s,n,a,r,l,h,c,d,p,m,u){this.drawFloorWalls(e,t.wallData,t.floorNumber,i,!0),this.drawFloorFreeFurniture(e,this.filterFreeFurnitureObjData(t.objData),t.floorNumber,s),this.drawFloorRoomFloors(e,t,o),this.drawFloorFreeLights(e,this.filterFreeLightsObjData(t.objData),t.floorNumber,n),this.drawFloorFreeCovers(e,this.filterFreeCoversObjData(t.objData),t.floorNumber,a),this.drawFloorFreeFans(e,this.filterFreeFansObjData(t.objData),t.floorNumber,r),this.drawFloorFreePresenceBinarys(e,this.filterFreePresenceBinarysObjData(t.objData),t.floorNumber,l),this.drawFloorFreeHVACs(e,this.filterFreeHVACsObjData(t.objData),t.floorNumber,h),this.drawFloorFreeCameras(e,this.filterFreeCamerasObjData(t.objData),t.floorNumber,c),this.drawFloorFreeScreens(e,this.filterFreeScreensObjData(t.objData),t.floorNumber,d),this.drawFloorBindedUnfixedObjects(e,t.objData.filter((e=>"sensor"===e.type)),t.floorNumber,p),this.drawFloorBindedUnfixedObjects(e,t.objData.filter((e=>"other_entity"===e.type)),t.floorNumber,m),this.drawFloorBindedUnfixedObjects(e,t.objData.filter((e=>this.props.mainComponentThis.isPresenceAreaObject(e.type))),t.floorNumber,u)}var yl=i(7701),Sl=i.n(yl),_l=i(9192),Dl=i.n(_l);function vl(e,t){let i,o=e.getAttribute("uv"),s=e.getAttribute("position"),n=new te.Pa4;for(let a=0;a<o.count;a++)n.fromBufferAttribute(s,a),i=t(n),o.setXY(a,i.x,i.y);o.needsUpdate=!0}function Tl(e,t,i,o){return-Math.atan2(e*o-t*i,e*i+t*o)}function jl(e){let t=[new te.Pa4(e.minX,0,e.minY),new te.Pa4(e.minX+e.width,0,e.minY),new te.Pa4(e.minX,0,e.minY+e.height),new te.Pa4(e.minX+e.width,0,e.minY+e.height)];return t.forEach((e=>e.multiplyScalar(this.scaleFactor))),t}function Ol(e,t){let i=-1/0,o=-1/0;for(let s=0;s<t.length-1;s++){let i=Math.abs(t[s].z-e.z);i>o&&(o=i)}for(let s=0;s<t.length-1;s++){let o=Math.abs(t[s].x-e.x);o>i&&(i=o)}return{maxXDist:i,maxZDist:o}}function Il(){return new Date(this.floorplanStartDate.getTime()+((new Date).getTime()-this.floorplanStartDateSetTimestamp))}function Pl(e,t){let i,o;if(e){const s=t.width/t.height,n=t.scaleWidthValue/t.scaleHeightValue;s>1?(o=e,i=1/n*e*(t.width/t.height)):(o=n*e*(t.height/t.width),i=e)}else i=t.width/t.scaleWidthValue,o=t.height/t.scaleHeightValue;return{wrapSValue:i,wrapTValue:o}}function kl(e){const t=[e.coordsInsideWithOrphans.map((e=>({X:e.x,Y:e.y})))],i=new(Sl().Paths),o=new(Sl().ClipperOffset);o.AddPaths(t,Sl().JoinType.jtMiter,Sl().EndType.etClosedPolygon),o.Execute(i,1);let s=i[0];return s?(s=s.map((e=>({x:e.X,y:e.Y}))),Mi(s[0],s[s.length-1])||s.push(s[0])):s=e.coordsInsideWithOrphans,{...e,coordsOutsideWithOrphans:s}}function Fl(e,t,i,o){const s=new te.Vkp;s.set(t.x,i.x,o.x,t.y,i.y,o.y,t.z,i.z,o.z);let n=[];for(let a=0;a<e.length;a++)n.push(new te.Pa4(s.elements[0]*e[a].x+s.elements[1]*e[a].y+s.elements[2]*e[a].z,s.elements[3]*e[a].x+s.elements[4]*e[a].y+s.elements[5]*e[a].z,s.elements[6]*e[a].x+s.elements[7]*e[a].y+s.elements[8]*e[a].z));return n}function Ml(){return null}function Al(e){return e.filter((e=>"furniture"!==e.class||this.props.mainComponentThis.furnitureDimensions[e.type]))}function Rl(e){return e.filter((e=>"furniture"===e.class&&!this.props.mainComponentThis.isFanObject(e.type)&&!this.props.mainComponentThis.isCoverObject(e.type)&&!this.props.mainComponentThis.isPresenceBinaryObject(e.type)&&!this.props.mainComponentThis.isHVACObject(e.type)&&!this.props.mainComponentThis.isCameraObject(e.type)&&!this.props.mainComponentThis.isScreenObject(e.type)&&"onWall"!==e.family&&"inWall"!==e.family))}function Ll(e){return e.filter((e=>"lights"===e.class&&"onWall"!==e.family&&"inWall"!==e.family))}function Bl(e){return e.filter((e=>this.props.mainComponentThis.isHVACObject(e.type)&&"onWall"!==e.family&&"inWall"!==e.family))}function Wl(e){return e.filter((e=>this.props.mainComponentThis.isFanObject(e.type)&&"onWall"!==e.family&&"inWall"!==e.family))}function Vl(e){return e.filter((e=>this.props.mainComponentThis.isPresenceBinaryObject(e.type)&&"onWall"!==e.family&&"inWall"!==e.family))}function Nl(e){return e.filter((e=>this.props.mainComponentThis.isCoverObject(e.type)&&"onWall"!==e.family&&"inWall"!==e.family))}function El(e){return e.filter((e=>this.props.mainComponentThis.isCameraObject(e.type)&&"onWall"!==e.family&&"inWall"!==e.family))}function Hl(e){return e.filter((e=>this.props.mainComponentThis.isScreenObject(e.type)&&"onWall"!==e.family&&"inWall"!==e.family))}function zl(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?["currentFurniture","currentViewLights","currentViewCovers","currentViewFans","currentViewPresenceBinarys","currentViewHVACs","currentViewCameras","currentViewScreens"]:["floorplanViewFurniture","floorplanViewLights","floorplanViewCovers","floorplanViewFans","floorplanViewPresenceBinarys","floorplanViewHVACs","floorplanViewCameras","floorplanViewScreens"];let i;for(let o=0;o<t.length;o++)if(i=this[t[o]].findIndex((t=>t.object2D.id===e.id)),-1!==i){this[t[o]].splice(i,1);break}}function Gl(){this.currentWalls3D=[...this.floorplanViewWalls3D],this.currentRoomFloors=[...this.floorplanViewRoomFloors],this.currentFurniture=[...this.floorplanViewFurniture],this.currentViewLights=[...this.floorplanViewLights],this.currentViewSensors=[...this.floorplanViewSensors],this.currentViewOthers=[...this.floorplanViewOthers],this.currentViewPresenceAreas=[...this.floorplanViewPresenceAreas],this.currentViewCovers=[...this.floorplanViewCovers],this.currentViewFans=[...this.floorplanViewFans],this.currentViewPresenceBinarys=[...this.floorplanViewPresenceBinarys],this.currentViewHVACs=[...this.floorplanViewHVACs],this.currentViewCameras=[...this.floorplanViewCameras],this.currentViewScreens=[...this.floorplanViewScreens]}function Ul(){return Math.max(...this.floorplanFloors.map((e=>e.floorNumber)))}function ql(e){return this.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===this.floorplanFloors.find((t=>t.floorNumber===e)).floorID))}function Kl(e){return Dl().getPosition(e,this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral))}function Yl(e,t){"add"===e?(this.props.mainComponentThis.floorplan3DContainerRef.current.addEventListener("click",t),this.props.mainComponentThis.floorplan3DContainerRef.current.addEventListener("touchstart",t)):(this.props.mainComponentThis.floorplan3DContainerRef.current.removeEventListener("click",t),this.props.mainComponentThis.floorplan3DContainerRef.current.removeEventListener("touchstart",t))}function Xl(e,t,i){return o=>{const s={x:o.touches?o.touches[0].pageX:o.clientX,y:o.touches?o.touches[0].pageY:o.clientY};A(s.x,s.y,e.current.getBoundingClientRect())||A(s.x,s.y,t.current.getBoundingClientRect())||i()}}function Zl(e){e.objData=this.filterFurnitureObjData(this.props.mainComponentThis.OBJDATA);this.getActiveScenes().forEach((t=>{const i=t.getObjectsByProperty("isFloorplanItem",!0).filter((t=>t.itemObject.floorNumber===e.floorNumber));for(let o=0;o<i.length;o++)i[o].itemObject.object2D=e.objData.find((e=>e.id===i[o].itemObject.object2D.id))}))}var Jl=i(8986),Ql=i(2178),$l=i.n(Ql);const eh=class{constructor(e){this.scene=e,this.selectedItem=null,this.rotating=!1,this.mouseover=!1,this.height=5,this.distance=20,this.color="#000000",this.hoverColor="#f1c40f",this.activeObject=null}getScene(){return this.scene}getObject(){return this.activeObject}resetSelectedItem(){this.selectedItem=null,this.activeObject&&(this.scene.remove(this.activeObject),this.activeObject=null)}itemSelected(e){this.selectedItem!=e&&(this.resetSelectedItem(),e.allowRotate&&!e.fixed&&(this.selectedItem=e,this.activeObject=this.makeObject(this.selectedItem),this.scene.add(this.activeObject)))}itemUnselected(){this.resetSelectedItem()}setRotating(e){this.rotating=e,this.setColor()}setMouseover(e){this.mouseover=e,this.setColor()}setColor(){this.activeObject&&this.activeObject.children.forEach((e=>{e.material.color.set(this.getColor())}))}getColor(){return this.mouseover||this.rotating?this.hoverColor:this.color}update(){if(this.activeObject){this.activeObject.rotation.y=this.selectedItem.rotation;const e=this.selectedItem.getItemCenter();this.activeObject.position.x=e.x,this.activeObject.position.z=e.z}}makeLineGeometry(e){const t=new te.u9r,i=this.rotateVector(e),o=new Float32Array([0,0,0,i.x,i.y,i.z]),s=new te.TlE(o,3);return t.setAttribute("position",s),t}rotateVector(e){return new te.Pa4(0,0,Math.max(e.halfSize.x,e.halfSize.z)+1.4+this.distance)}makeLineMaterial(){return new te.nls({color:this.getColor(),linewidth:3})}makeCone(e){var t=new te.fHI(5,0,10),i=new te.vBJ({color:this.getColor()}),o=new te.Kj0(t,i);return o.position.copy(this.rotateVector(e)),o.rotation.x=-Math.PI/2,o}makeSphere(){var e=new te.xo$(4,16,16),t=new te.vBJ({color:this.getColor()});return new te.Kj0(e,t)}makeObject(e){var t=new te.Tme,i=new te.ejS(this.makeLineGeometry(e),this.makeLineMaterial(this.rotating)),o=this.makeCone(e),s=this.makeSphere(e);t.add(i),t.add(o),t.add(s),t.rotation.y=e.rotation;const n=e.getItemCenter();return t.position.x=n.x,t.position.z=n.z,t.position.y=n.y-e.halfSize.y+this.height,t}};var th=i(1317);const ih=class{constructor(e,t,i){var o=this;this.mouseMoveEvent=(e,t)=>{if(this.enabled){e.preventDefault(),this.mouseDownItemSelected=!1,this.setSelectItemLongPressData(null),this.mouseMoved=!0,this.mouse.x=t?e.touches[0].clientX:e.clientX,this.mouse.y=t?e.touches[0].clientY:e.clientY;const i=this.floorplan3DThis.getSelectedDrawingOption();if(this.floorplan3DThis.selectedFloorplanItemType&&i&&"select"!==i.value&&!this.itemBinder){let e,t;const o=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();if(Ue.includes(this.floorplan3DThis.props.mainComponentThis.getObjectItemType(this.floorplan3DThis.selectedFloorplanItemType))&&(e=[],this.floorplan3DThis.currentWalls3D.filter((e=>e.floorNumber===o.floorNumber)).forEach((t=>{e.push(t.interiorWallPlane.planeObject),e.push(t.exteriorWallPlane.planeObject)})),this.previousItemBinder&&e.push(this.previousItemBinder.mesh),t=this.getIntersections(new te.FM8(this.mouse.x,this.mouse.y),e,!0,!0)[0]),t||(t=this.getIntersections(new te.FM8(this.mouse.x,this.mouse.y),this.intersectionGround,!1,!1),t&&(t=t[0])),!t)return;this.floorplan3DThis.processSceneVec3(t.point);const s=this.floorplan3DThis.props.mainComponentThis.calcul_snap_inverse(t.point.x/this.floorplan3DThis.scaleFactor,t.point.z/this.floorplan3DThis.scaleFactor);i.createBinderMethod({pageX:s.screenX,pageY:s.screenY}),this.floorplan3DThis.props.mainComponentThis.binder&&(this.itemBinder=this.floorplan3DThis.createFloorplanItem(this.scene,i.objects3DArray,this.floorplan3DThis.selectedFloorplanItemType,this.floorplan3DThis.props.mainComponentThis.binder,0,!0),this.itemBinder.setItemPosition(new te.Pa4(this.floorplan3DThis.props.mainComponentThis.binder.x,0,this.floorplan3DThis.props.mainComponentThis.binder.y).multiplyScalar(this.floorplan3DThis.scaleFactor)),this.itemLoaded(this.itemBinder))}switch(this.mouseDown||(this.updateIntersections(),!this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DThis.currentControls===this.floorplan3DThis.firstPersonControls&&this.floorplan3DThis.firstPersonControls.updateCircleNavigator(this.rotateMouseOver||this.intersectedObject,this.isTouchScreen?[]:this.getWallsIntersections(this.mouse),this.getIntersections(this.mouse,this.intersectionGround,!1,!1))),this.state){case this.states.UNSELECTED:case this.states.SELECTED:this.updateMouseover();break;case this.states.DRAGGING:case this.states.ROTATING:case this.states.ROTATING_FREE:this.clickDragged(),this.floorplan3DThis.floorplanItemCurrentHUDObject.update(),this.needsUpdate=!0}}},this.isRotating=()=>this.state==this.states.ROTATING||this.state==this.states.ROTATING_FREE,this.mouseDownEvent=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o.enabled&&(0===e.button||t))switch(e.preventDefault(),o.mouseMoved=!1,o.mouseDown=!0,o.state){case o.states.SELECTED:o.rotateMouseOver?o.switchState(o.states.ROTATING):null!=o.intersectedObject&&(o.intersectedObject!==o.selectedObject&&o.floorplan3DThis.onFloorplanItemUnselect(),o.setSelectedObject(o.intersectedObject),o.mouseDownItemSelected=!0,o.setSelectItemLongPressData(o.intersectedObject),o.intersectedObject.fixed||(o.intersectedObject.isWallItem&&o.floorplan3DThis.props.mainComponentThis.setWallItemObjOriginalWidth(o.intersectedObject.object2D),o.switchState(o.states.DRAGGING)));break;case o.states.UNSELECTED:null!=o.intersectedObject&&(o.setSelectedObject(o.intersectedObject),o.mouseDownItemSelected=!0,o.setSelectItemLongPressData(o.intersectedObject),o.intersectedObject.fixed||(o.intersectedObject.isWallItem&&o.floorplan3DThis.props.mainComponentThis.setWallItemObjOriginalWidth(o.intersectedObject.object2D),o.switchState(o.states.DRAGGING)));break;case o.states.DRAGGING:case o.states.ROTATING:break;case o.states.ROTATING_FREE:o.switchState(o.states.SELECTED)}},this.mouseUpEvent=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o.enabled&&(o.setSelectItemLongPressData(null),0===e.button||t)){o.mouseDown=!1;const t=o.floorplan3DThis.getSelectedDrawingOption();if(o.itemBinder&&t&&"select"!==t.value)o.floorplan3DThis.props.mainComponentThis.handleMouseUp(e),o.itemBinder.isWallItem?o.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&o.floorplan3DThis.createFloorplanItem(o.floorplan3DThis.floorplan3DViewScene,t.objects3DArray,o.itemBinder.objectType,o.itemBinder.object2D,o.itemBinder.floorNumber):o.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?(o.floorplan3DThis[t.currentViewArrayName].push(o.itemBinder),o.floorplan3DThis[t.floorplanViewArrayName].push(o.floorplan3DThis.createFloorplanItem(o.floorplan3DThis.floorplan3DViewScene,t.objects3DArray,o.itemBinder.objectType,o.itemBinder.object2D,o.itemBinder.floorNumber))):o.floorplan3DThis[t.floorplanViewArrayName].push(o.itemBinder),o.switchState(o.states.UNSELECTED),o.previousItemBinder=o.itemBinder,o.itemBinder=null;else switch(o.mouseDownItemSelected&&(o.floorplan3DThis.selectedUserMode!==o.floorplan3DThis.editModeValue?o.selectedObject&&(await o.selectedObject.mesh.changeStateOnClick(o.selectedObject.mesh),o.setSelectedObject(null),o.intersectedObject=null,o.updateMouseover()):o.floorplan3DThis.onFloorplanItemSelect(o.selectedObject)),o.state){case o.states.DRAGGING:if(o.selectedObject.clickReleased(),o.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&!o.selectedObject.isWallItem){const e=o.floorplan3DThis.getFloorplanViewSceneItem(o.selectedObject.object2D);e&&e.moveToPosition(o.selectedObject.getItemCenter())}o.switchState(o.states.SELECTED);break;case o.states.ROTATING:if(o.mouseMoved){if(o.selectedObject.clickReleased(),o.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()){const e=o.floorplan3DThis.getFloorplanViewSceneItem(o.selectedObject.object2D);e&&e.rotateItem(R(o.selectedObject.object2D.angle),-1)}o.switchState(o.states.SELECTED)}else o.switchState(o.states.ROTATING_FREE);break;case o.states.UNSELECTED:o.mouseMoved||o.checkWallsAndFloors();break;case o.states.SELECTED:null!=o.intersectedObject||o.mouseMoved||(o.switchState(o.states.UNSELECTED),o.checkWallsAndFloors());case o.states.ROTATING_FREE:}}},this.touchStartEvent=e=>{this.isTouchScreen=!0,this.mouseMoveEvent(e,!0),this.mouseDownEvent(e,!0),this.updateMouseover()},this.touchEndEvent=e=>{this.mouseUpEvent(e,!0)},this.enabled=!0,this.scene=e,this.container=t,this.raycaster=new te.iMs,this.floorplan3DThis=i,this.itemBinder=null,this.previousItemBinder=null,this.mouse=new te.FM8,this.intersectedObject=null,this.mouseoverObject=null,this.selectedObject=null,this.mouseDown=!1,this.mouseDownItemSelected=!1,this.selectedItemLongPressData={periodMs:2e3,selectionTimestamp:null,item:null,timeout:null},this.mouseMoved=!1,this.isTouchScreen=!1,this.rotateMouseOver=!1,this.states={UNSELECTED:0,SELECTED:1,DRAGGING:2,ROTATING:3,ROTATING_FREE:4,PANNING:5},this.state=this.states.UNSELECTED,this.needsUpdate=!0,this.container.addEventListener("mousemove",this.mouseMoveEvent,!1),this.container.addEventListener("mousedown",this.mouseDownEvent,!1),this.container.addEventListener("mouseup",this.mouseUpEvent,!1),this.container.addEventListener("touchstart",this.touchStartEvent,!0),this.container.addEventListener("touchend",this.touchEndEvent,!1),this.intersectionGround=new te.Kj0(new te._12(2*this.floorplan3DThis.floorplanEnvironmentRadius,2*this.floorplan3DThis.floorplanEnvironmentRadius),new te.vBJ({color:16711680})),this.intersectionGround.rotation.x=-Math.PI/2,this.intersectionGround.translateX(this.floorplan3DThis.floorplanWallsObjectsBBoxCenterVector.x),this.intersectionGround.translateY(-this.floorplan3DThis.floorplanWallsObjectsBBoxCenterVector.z),this.intersectionGround.visible=!1,this.scene.add(this.intersectionGround)}setSelectItemLongPressData(e){e?(this.selectedItemLongPressData.item=e,this.selectedItemLongPressData.selectionTimestamp=Date.now(),this.selectedItemLongPressData.timeout=setTimeout((()=>{this.selectedItemLongPressData.item&&this.selectedItemLongPressData.item.object2D.id===e.object2D.id&&(this.floorplan3DThis.selectedItemLongPressHandler&&this.floorplan3DThis.selectedItemLongPressHandler(this.selectedItemLongPressData.item),this.setSelectItemLongPressData(null),this.setSelectedObject(null),this.intersectedObject=null,this.updateMouseover(),this.mouseDownItemSelected=!1,this.floorplan3DThis.currentControls.resetState())}),this.selectedItemLongPressData.periodMs)):(this.selectedItemLongPressData.item=null,this.selectedItemLongPressData.selectionTimestamp=null,this.selectedItemLongPressData.timeout&&clearTimeout(this.selectedItemLongPressData.timeout))}removeItemBinder(){this.itemBinder&&(this.itemBinder.remove(),this.itemBinder.clickReleased(),this.itemRemoved(this.itemBinder),this.itemBinder=null,this.previousItemBinder=null,this.floorplan3DThis.props.mainComponentThis.removeBinder())}setCursorStyle(e){this.container.style.cursor=e}itemLoaded(e){this.setSelectedObject(e),this.switchState(this.states.DRAGGING),this.clickPressed()}itemRemoved(e){e===this.selectedObject&&(this.selectedObject.setUnselected(),this.selectedObject.mouseOff(),this.switchState(this.states.UNSELECTED))}clickPressed(e){e=e||this.mouse;var t=this.itemIntersection(e,this.selectedObject);t&&this.selectedObject.clickPressed(t)}clickDragged(e){e=e||this.mouse;var t=this.itemIntersection(e,this.selectedObject);t&&(this.isRotating()?this.selectedObject.rotate(t):this.selectedObject.clickDragged(t,this.mouseDown))}getWallsIntersections(e){const t=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();var i=[];return(this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?this.floorplan3DThis.currentWalls3D:this.floorplan3DThis.floorplanViewWalls3D).filter((e=>e.floorNumber===t.floorNumber)).forEach((e=>{i.push(e.interiorWallPlane.planeObject),i.push(e.exteriorWallPlane.planeObject)})),this.getIntersections(e,i,!0,!1)}checkWallsAndFloors(){if(this.state==this.states.UNSELECTED&&null==this.mouseoverObject){const n=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();var e=this.getWallsIntersections(this.mouse);if(e.length>0){var t=e[0].object.wall3D;return void th.log("Wall clickedd",t)}var i=this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?this.floorplan3DThis.currentRoomFloors:this.floorplan3DThis.floorplanViewRoomFloors,o=this.getIntersections(this.mouse,i.filter((e=>e.floorNumber===n.floorNumber)),!0,!1);if(o.length>0){var s=o[0].object;return void th.log("Room clicked",s)}this.floorplan3DThis.userInteractionControlerNothingClickedReset()}}switchState(e){e!=this.state&&(this.onExit(this.state),this.onEntry(e)),this.state=e,this.floorplan3DThis.floorplanItemCurrentHUDObject.setRotating(this.isRotating())}onEntry(e){switch(e){case this.states.UNSELECTED:this.setSelectedObject(null);break;case this.states.SELECTED:this.setSceneControlsState(!0);break;case this.states.ROTATING:case this.states.ROTATING_FREE:this.setSceneControlsState(!1);break;case this.states.DRAGGING:this.setCursorStyle("move"),this.clickPressed(),this.setSceneControlsState(!this.mouseDown)}}onExit(e){switch(e){case this.states.UNSELECTED:case this.states.SELECTED:break;case this.states.DRAGGING:this.mouseoverObject?this.setCursorStyle("pointer"):this.setCursorStyle("auto");case this.states.ROTATING:case this.states.ROTATING_FREE:}}updateIntersections(){var e=this.floorplan3DThis.floorplanItemCurrentHUDObject.getObject();if(null!=e&&this.floorplan3DThis.selectedUserMode===this.floorplan3DThis.editModeValue&&this.getIntersections(this.mouse,e,!0,!0).length>0)return this.rotateMouseOver=!0,this.floorplan3DThis.floorplanItemCurrentHUDObject.setMouseover(!0),void(this.intersectedObject=null);this.rotateMouseOver=!1,this.floorplan3DThis.floorplanItemCurrentHUDObject.setMouseover(!1);const t=this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D();this.intersectedObject=null;let i=[];const o=this.scene.getObjectsByProperty("floorplanItemBoxSelector",!0).filter((e=>e.itemObject.floorNumber===t.floorNumber));if(i=this.getIntersections(this.mouse,o,!1,!0),!i.length){const e=this.scene.getObjectsByProperty("isFloorplanItem",!0).filter((e=>e.itemObject.floorNumber===t.floorNumber));i=this.getIntersections(this.mouse,e,!0,!0)}if(i.length>0)this.intersectedObject=this.resolveIntersectedItemObject(this.getIntersectionFloorplanItemObject(i[0].object),i[0]);else{let e=[];this.scene.getObjectsByProperty("isUnfixedItem",!0).forEach((t=>e.push(...t.itemObject.getUnfixedItemIntersections())));const t=this.getIntersections(this.mouse,e,!0,!0);if(t.length>0){const e=(e=>{let t,i;for(let o=0;o<e.length;o++)"background_mesh"===e[o].object.type?t=e[o]:"room_mesh"===e[o].object.type&&(i=e[o]);return t&&i&&("background_mesh"===e[0].object.type||"room_mesh"===e[0].object.type)?i:e[0]})(t);this.intersectedObject=this.resolveIntersectedItemObject(this.getIntersectionUnfixedItemObject(e.object),e),this.intersectedObject&&(this.intersectedObject.raycastedObject=e.object)}}}getIntersectionFloorplanItemObject(e){if(e.isFloorplanItem||e.floorplanItemBoxSelector)return e.itemObject;let t=e.parent;for(;!t.isFloorplanItem&&!t.floorplanItemBoxSelector;)t=t.parent;return t.itemObject}getIntersectionUnfixedItemObject(e){if(e.itemObject)return e.itemObject}resolveIntersectedItemObject(e,t){const i=this.getWallsIntersections(this.mouse);if(i.length>0&&i[0].distance<t.distance)return null;let o=e;return this.floorplan3DThis.selectedUserMode!==this.floorplan3DThis.editModeValue&&(this.floorplan3DThis.isFloorplanItemMeshBinded(e.mesh)&&e.mesh.changeStateOnClick||(o=null)),o}itemIntersection(e,t){var i=t.customIntersectionPlanes(),o=[];return(o=i&&i.length>0?this.getIntersections(e,i,!0,!1):this.getIntersections(e,this.intersectionGround,!1,!1)).length>0?(this.floorplan3DThis.processSceneVec3(o[0].point),o[0]):null}normalizeVector2(e){const t=this.container.getBoundingClientRect();let i=new te.FM8;return i.x=(e.x-t.left)/t.width*2-1,i.y=-(e.y-t.top)/t.height*2+1,i}getIntersections(e,t,i,o){if(i=i||!1,o=o||!1,this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()){const t=this.normalizeVector2(e),i=this.floorplan3DThis.floorplan3DOnMapCamera.projectionMatrix.clone().invert(),o=(new te.Pa4).applyMatrix4(i),s=new te.Pa4(t.x,t.y,1).applyMatrix4(i).clone().sub(o).normalize();this.raycaster.set(o,s)}else this.raycaster.setFromCamera(this.normalizeVector2(e),this.floorplan3DThis.floorplan3DViewCamera);var s=[];if(t instanceof Array)i&&(t=t.filter((e=>e.visible&&this.scene.getObjectByProperty("uuid",e.uuid)))),s=this.raycaster.intersectObjects(t,o);else{if(i&&!t.visible)return[];s=this.raycaster.intersectObject(t,o)}return s}setSelectedObject(e){this.state===this.states.UNSELECTED&&this.switchState(this.states.SELECTED),null!=this.selectedObject&&this.selectedObject.setUnselected(),null==e||e.disabled?(this.selectedObject=null,this.floorplan3DThis.onFloorplanItemUnselect()):(this.selectedObject=e,this.selectedObject.setSelected()),this.needsUpdate=!0}updateMouseover(){null==this.intersectedObject||this.intersectedObject.disabled?null==this.mouseoverObject||this.mouseoverObject.disabled||(this.mouseoverObject.mouseOff(),this.setCursorStyle("auto"),this.setSceneControlsState(!0),this.mouseoverObject=null,this.needsUpdate=!0):null!=this.mouseoverObject?this.mouseoverObject!==this.intersectedObject?(this.mouseoverObject.mouseOff(),this.mouseoverObject=this.intersectedObject,this.mouseoverObject.mouseOver(),this.setSceneControlsState(!1),this.needsUpdate=!0):this.setSceneControlsState(!1):(this.mouseoverObject=this.intersectedObject,this.mouseoverObject.mouseOver(),this.setSceneControlsState(!1),this.setCursorStyle("pointer"),this.needsUpdate=!0)}setSceneControlsState(e){this.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?e?this.floorplan3DThis._map.dragPan.enable():this.floorplan3DThis._map.dragPan.disable():(!e&&this.mouseoverObject&&this.mouseoverObject.mesh&&(new te.ZzF).setFromObject(this.mouseoverObject.mesh,!0).containsPoint(this.floorplan3DThis.currentControls.camera.position)&&(e=!0),this.floorplan3DThis.currentControls.setEnabledStatus(e))}};var oh=i(1317);function sh(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=i.clone();if(e.parent){const o=t.clone(),s=i.clone();s.add(o);const a=o.clone();e.parent.worldToLocal(a);const r=s.clone();e.parent.worldToLocal(r);const l=jo(a,r);l.normalize(),n=l}s&&e.parent&&e.parent.worldToLocal(t);const a=new te._fP;a.setFromAxisAngle(n,o);const r=e.position.clone().sub(t);r.applyQuaternion(a),e.position.copy(t.clone().add(r)),e.quaternion.premultiply(a)}function nh(e,t,i,o){const s=t.clone();e.parent.worldToLocal(s);const n=e.position.clone().sub(s);n.applyAxisAngle(i.normalize(),o),e.position.copy(n).add(s),e.rotateOnAxis(i.normalize(),o)}function ah(e,t,i,o,s){const n=new te.Pa4(t,i,o),a=new te.Pa4;e.getWorldPosition(a),a.add(n),this.floorplan3DOnMapScene&&ao(e)===this.floorplan3DOnMapScene&&s&&this.processSceneVec3(a),e.position.set(a.x,a.y,a.z)}function rh(e,t){let i=[],o=[];for(let a=0;a<e.children.length;a++){let t=e.children[a];"Mesh"===t.type&&(t.material.length?i=i.concat(t.material):i.push(t.material),t.geometry.isBufferGeometry&&o.push(t.geometry))}let s=new te.u9r;s=Jl.qf([...o],!0),s.computeVertexNormals(),s.computeBoundingBox(),s.normalizeNormals();const n=new te.Kj0(s,i);t.add(n)}function lh(){this.updateWallsVisibility()}function hh(){for(let e=0;e<this.currentWalls3D.length;e++)this.currentWalls3D[e].updateFrontWallVisibility()}function ch(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.traverse((e=>{e.isMesh&&(e.castShadow=!t,e.receiveShadow=!0)}))}function dh(e,t){const i=t/100,o=100!==t;this.wallTopPlaneMaterial.opacity=i,this.wallTopPlaneMaterial.transparent=o,this.wallTopPlaneMaterial.needsUpdate=!0,this.wallStartEndPlanesMaterial.opacity=i,this.wallStartEndPlanesMaterial.transparent=o,this.wallStartEndPlanesMaterial.needsUpdate=!0,e.forEach((e=>e.setExteriorInteriorPlanesOpacity(i)))}function ph(){const e=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;Vi(this._map,Wi(this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral),this.floorplanWallsBoundingBox2DCoordinates.width/this.props.mainComponentThis.meter,this.floorplanWallsBoundingBox2DCoordinates.height/this.props.mainComponentThis.meter,e),e,20)}function mh(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._map=e,e.setMaxZoom(22);const i=[this.props.mainComponentThis.getFloorplanGpsLongitude(this.props.mainComponentThis.floorplanGeneral),this.props.mainComponentThis.getFloorplanGpsLatitude(this.props.mainComponentThis.floorplanGeneral)],o=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0,s=[Math.PI/2,0,0],n=$l().MercatorCoordinate.fromLngLat(i,0),a={translateX:n.x,translateY:n.y,translateZ:n.z,rotateX:s[0],rotateY:s[1],rotateZ:s[2],scale:n.meterInMercatorCoordinateUnits()/(this.scaleFactor*this.props.mainComponentThis.meter)},r=this,l={id:"floorplan-3d-model",type:"custom",renderingMode:"3d",onAdd:function(e,i){this.showFloorplan3DOnMapCamera=new te.cPb(45,r.canvasRef.current.offsetWidth/r.canvasRef.current.offsetHeight,1,5e4),r.floorplan3DOnMapCamera=this.showFloorplan3DOnMapCamera,r.floorplan3DOnMapCameraPosition=this.showFloorplan3DOnMapCamera.position.clone(),this.showFloorplan3DOnMapScene=new te.xsS,r.floorplan3DOnMapScene=this.showFloorplan3DOnMapScene,this.map=e,this.showFloorplan3DOnMapRenderer=new te.CP7({canvas:e.getCanvas(),context:i,antialias:!0,preserveDrawingBuffer:!0}),r.floorplan3DOnMapRenderer=this.showFloorplan3DOnMapRenderer,this.showFloorplan3DOnMapRenderer.setClearColor(16777215,1),this.showFloorplan3DOnMapRenderer.setPixelRatio(window.devicePixelRatio),this.showFloorplan3DOnMapRenderer.setSize(r.canvasRef.current.offsetWidth,r.canvasRef.current.offsetHeight),this.showFloorplan3DOnMapRenderer.autoClear=!1,this.showFloorplan3DOnMapRenderer.shadowMap.enabled=!0,this.showFloorplan3DOnMapRenderer.shadowMap.type=te.ntZ,r.floorplanOnMapHUDObject=new eh(this.showFloorplan3DOnMapScene),r.floorplanItemCurrentHUDObject=r.floorplanOnMapHUDObject,r.createAmbientLight(this.showFloorplan3DOnMapScene),r.drawFloorplan(this.showFloorplan3DOnMapScene),r.floorplanOnMapUserInteractionController=new ih(this.showFloorplan3DOnMapScene,this.map.getCanvas(),r),r.userInteractionCurrentController=r.floorplanOnMapUserInteractionController;const s=new te.Pa4(r.floorplanWallsBoundingBox2DCoordinates.minX,0,r.floorplanWallsBoundingBox2DCoordinates.minY).multiplyScalar(r.scaleFactor);this.showFloorplan3DOnMapScene.translateX(-s.x),this.showFloorplan3DOnMapScene.translateZ(-s.z),r.rotateAroundPoint(this.showFloorplan3DOnMapScene,new te.Pa4(0,0,0),new te.Pa4(0,1,0),-o*(Math.PI/180)),document.dispatchEvent(new CustomEvent("sceneTransformed")),r.initializeSunLightPositionIntervalCalculation(!0,r.floorplan3DOnMapScene,r.sunLightPositionFloorplan3DOnMapCameraHelpers),t&&r.focusFloorplanOnMap()},render:function(e,t){if(!r.mounted)return;const i=(new te.yGw).makeRotationAxis(new te.Pa4(1,0,0),a.rotateX),o=(new te.yGw).makeRotationAxis(new te.Pa4(0,1,0),a.rotateY),s=(new te.yGw).makeRotationAxis(new te.Pa4(0,0,1),a.rotateZ),n=(new te.yGw).fromArray(t),l=(new te.yGw).makeTranslation(a.translateX,a.translateY,a.translateZ).scale(new te.Pa4(a.scale,-a.scale,a.scale)).multiply(i).multiply(o).multiply(s);this.showFloorplan3DOnMapCamera.projectionMatrix=n.multiply(l);const h=(new te.Pa4).applyMatrix4(this.showFloorplan3DOnMapCamera.projectionMatrix.clone().invert());h.equals(r.floorplan3DOnMapCameraPosition)||(r.floorplan3DOnMapCameraPosition.copy(h),r.onCameraMoved()),this.showFloorplan3DOnMapRenderer.resetState(),this.showFloorplan3DOnMapRenderer.render(this.showFloorplan3DOnMapScene,this.showFloorplan3DOnMapCamera),r.changedLightsShadowMaps.length>0&&r.isLightsShadowMapChangeFinished(!0),this.map.triggerRepaint()}};e.getStyle().layers.find((e=>"waterway-label"===e.id))?e.addLayer(l,"waterway-label"):e.addLayer(l)}function uh(){let e=[this.floorplan3DViewScene];this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&e.push(this.floorplan3DOnMapScene),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()?this.objectConnectorsArray.forEach((t=>{e.forEach((e=>{e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).forEach((e=>e.changeStateMethod&&e.changeStateMethod(e,this.getObjectConnectorParamsData(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName],e.object2D))))}))})):this.objectConnectorsArray.forEach((t=>{e.forEach((e=>{e.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).forEach((e=>e.itemObject.resetHighlightColor&&e.itemObject.resetHighlightColor()))}))}))}function gh(e,t){const i=["floorplanViewWalls3D"],o=["floorplanViewRoomFloors"],s=["floorplanViewFurniture","floorplanViewLights","floorplanViewCovers","floorplanViewFans","floorplanViewPresenceBinarys","floorplanViewHVACs","floorplanViewCameras","floorplanViewScreens"],n=["floorplanViewSensors"],a=["floorplanViewOthers"],r=["floorplanViewPresenceAreas"];this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&(i.push("currentWalls3D"),o.push("currentRoomFloors"),s.push("currentFurniture","currentViewLights","currentViewCovers","currentViewFans","currentViewPresenceBinarys","currentViewHVACs","currentViewCameras","currentViewScreens"),n.push("currentViewSensors"),a.push("currentViewOthers"),r.push("currentViewPresenceAreas")),i.forEach((i=>this[i].forEach((i=>{i.floorNumber===e&&(i.setWallPlanesObjectsVisibility(t,!1),i.floorThicknessWallPart.visible=t,i.updateFrontWallVisibility())})))),o.forEach((i=>this[i].forEach((i=>{if(i.floorNumber===e){const e=!i.isNoneFloorType&&t;i.thickMesh.visible=e,i.visible=e}})))),s.forEach((i=>this[i].forEach((i=>{i.floorNumber===e&&i.setVisibilityStatus(t)})))),n.forEach((i=>this[i].forEach((i=>{const o=i.mesh;o.floorNumber===e&&(o.visible=t,o.roomMesh&&(o.roomMesh.visible=t),o.backgroundMesh&&(o.backgroundMesh.visible=t))})))),a.forEach((i=>this[i].forEach((i=>{const o=i.mesh;o.floorNumber===e&&(o.visible=t,o.backgroundMesh&&(o.backgroundMesh.visible=t))})))),r.forEach((i=>{this[i].forEach((i=>{const o=i.mesh;o.floorNumber===e&&(o.visible=t)}))})),this.sensorHeatmapPlanesData.filter((t=>t.floorNumber===e)).forEach((e=>{e.planeMesh.visible=t,e.valueTextMeshes&&e.valueTextMeshes.forEach((e=>e.visible=t))}))}function fh(e,t,i){const o=new te.nls({color:i||16711935}),s=(new te.u9r).setFromPoints(e),n=new te.x12(s,o);t.add(n)}function bh(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new te.Pa4(0,0,0);oh.log(i),this.drawLine([new te.Pa4(0,0,0).add(i),new te.Pa4(1,0,0).multiplyScalar(t).add(i)],e,16711680),this.drawLine([new te.Pa4(0,0,0).add(i),new te.Pa4(0,1,0).multiplyScalar(t).add(i)],e,65280),this.drawLine([new te.Pa4(0,0,0).add(i),new te.Pa4(0,0,1).multiplyScalar(t).add(i)],e,255)}function wh(e){if(this.showMapLayer3DInputRef.current.getCheckedStatus()){const t=new te.Pa4(this.floorplanWallsBoundingBox2DCoordinates.minX,0,this.floorplanWallsBoundingBox2DCoordinates.minY).multiplyScalar(this.scaleFactor),i=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;e.copy(new te.Pa4(e.x+t.x,e.y,e.z+t.z));const o=[{x:e.x,y:e.z}];oo(o,{x:t.x,y:t.z},-R(i)),e.x=o[0].x,e.z=o[0].y}}function Ch(e){const t=new te.Pa4(this.floorplanWallsBoundingBox2DCoordinates.minX,0,this.floorplanWallsBoundingBox2DCoordinates.minY).multiplyScalar(this.scaleFactor),i=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0,o=[{x:e.x,y:e.z}];oo(o,{x:t.x,y:t.z},R(i)),e.x=o[0].x,e.z=o[0].y,e.x-=t.x,e.z-=t.z}function xh(e){if("inWall"===e.family||"onWall"===e.family){const t="inWall"===e.family?"inWallItemObjects":"onWallItemObjects";let i;for(let o=0;o<this.floorplanViewWalls3D.length;o++)if(i=this.floorplanViewWalls3D[o][t].find((t=>t.object2D.id===e.id)),i)return i}else{let t=[this.floorplanViewFurniture,this.floorplanViewLights,this.floorplanViewCovers,this.floorplanViewFans,this.floorplanViewPresenceBinarys,this.floorplanViewHVACs,this.floorplanViewCameras,this.floorplanViewScreens];for(let i=0;i<t.length;i++)for(let o=0;o<t[i].length;o++)if(t[i][o].object2D.id===e.id)return t[i][o]}return null}function yh(e){this.addShadowCastLightToList({lightMeshObject:this.shadowCastingLightsWaitingList[e].lightMeshObject,isMapScene:this.shadowCastingLightsWaitingList[e].isMapScene},this.shadowCastingLightsActive),this.setLightStateParameters(this.shadowCastingLightsWaitingList[e].lightMeshObject,!0,!1),this.shadowCastingLightsWaitingList.splice(e,1)}function Sh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;const o=e.itemObject,n=this.getLightProperties(e);o.renderLight(n.variant,"spot"===n.variant?{spotAngle:n.spot_angle,spotDistance:n.spot_distance}:null);const a=e.light,r=null!==t?t:this.getLightTurnOnState(e);a.color=n.color;const h=ao(a);if(a.state!==(r?"on":"off")){const e=()=>{a.castShadow=r,a.state=r?"on":"off",a.power=r?n.power:0;const e=h===this.floorplan3DOnMapScene?this.floorplan3DOnMapRenderer:this.floorplan3DViewRenderer;e&&(e.shadowMap.needsUpdate=!0)};i?e():0===this.changedLightsShadowMaps.length?(this.changeLightShadowMapsLoadingSet=null,this.changedLightsShadowMaps.push({lightObject:a,isMapLight:h===this.floorplan3DOnMapScene,onLoadingRenderedCallback:e}),s.render((0,l.jsx)(ur,{}),this.props.mainComponentThis.loadingComponentContainer.current,(()=>{setTimeout((()=>{this.changeLightShadowMapsLoadingSet=!0,this.changedLightsShadowMaps.forEach((e=>{e.onLoadingRenderedCallback&&(e.onLoadingRenderedCallback(),delete e.onLoadingRenderedCallback)}))}),100)}))):null===this.changeLightShadowMapsLoadingSet?this.changedLightsShadowMaps.push({lightObject:a,isMapLight:h===this.floorplan3DOnMapScene,onLoadingRenderedCallback:e}):(this.changedLightsShadowMaps.push({lightObject:a,isMapLight:h===this.floorplan3DOnMapScene}),e())}else a.power=r?n.power:0}function _h(e,t){!t.find((t=>t.lightMeshObject===e.lightMeshObject))&&t.push(e)}function Dh(e){for(let t=this.changedLightsShadowMaps.length-1;t>=0;t--)this.changedLightsShadowMaps[t].isMapLight===e&&!Object.hasOwn(this.changedLightsShadowMaps[t],"onLoadingRenderedCallback")&&("off"===this.changedLightsShadowMaps[t].lightObject.state&&!1===this.changedLightsShadowMaps[t].lightObject.castShadow||"on"===this.changedLightsShadowMaps[t].lightObject.state&&!0===this.changedLightsShadowMaps[t].lightObject.castShadow)&&this.changedLightsShadowMaps.splice(t,1);0===this.changedLightsShadowMaps.length&&(s.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current),this.changeLightShadowMapsLoadingSet=!1)}function vh(){let e=[this.floorplan3DViewScene];return this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&e.push(this.floorplan3DOnMapScene),e}function Th(e,t){const i=t||this.userInteractionCurrentController.selectedObject;if(i&&(e(i),this.showMapLayer3DInputRef.current.getCheckedStatus())){const t=this.getFloorplanViewSceneItem(i.object2D);t&&e(t)}}function jh(e,t){0!==t.rotationX.previousAngleDeg&&this.cameraItemRotationX(e,0,-t.rotationX.previousAngleDeg,t.rotationY.previousAngleDeg),0!==t.rotationY.previousAngleDeg&&this.cameraItemRotationY(e,0,-t.rotationY.previousAngleDeg),this.cameraItemRotationY(e,0,t.rotationY.newAngleDeg),this.cameraItemRotationX(e,0,t.rotationX.newAngleDeg,t.rotationY.newAngleDeg)}function Oh(e,t,i){if("surveillanceCamera"===e.object2D.type||"CCTV"===e.object2D.type){let o=[],s=new te.Pa4;if("surveillanceCamera"===e.object2D.type){o=["sweethome3d_opening_on_hinge_1_Cubo","sweethome3d_opening_on_hinge_1_Cube.002_Cube.002","sweethome3d_opening_on_hinge_1_Cube.000_Cube.000","sweethome3d_opening_on_hinge_1_Cube.003_Cube.003","sweethome3d_opening_on_hinge_1_Cilindro.001_Cilindro.001","sweethome3d_opening_on_hinge_1_Cubo_Cubo.007"].map((t=>e.mesh.children.find((e=>e.name===t))));const t=e.mesh.children.find((e=>"sweethome3d_hinge_1"===e.name)),i=(new te.ZzF).setFromObject(t,!0);i.getCenter(s),s.y=i.max.y}else"CCTV"===e.object2D.type&&(o=["Sphere","Circle"].map((t=>e.mesh.children.find((e=>e.name===t)))),s=e.getItemCenter(),ao(e.mesh)===this.floorplan3DOnMapScene&&e.sceneTransformedCalled&&this.inverseProcessSceneVec3(s));const n=new te.Pa4(0,1,0);o.forEach((o=>this.rotateAroundPoint(o,s.clone(),n.clone(),dt[e.object2D.type].modelRotationYAngleSign*R(i-t),!0)))}}function Ih(e,t,i,o){if("surveillanceCamera"===e.object2D.type||"CCTV"===e.object2D.type){let s=[],n=new te.Pa4;if("surveillanceCamera"===e.object2D.type){oh.log("Surveilance camera"),s=["sweethome3d_opening_on_hinge_1_Cubo","sweethome3d_opening_on_hinge_1_Cube.002_Cube.002","sweethome3d_opening_on_hinge_1_Cube.000_Cube.000","sweethome3d_opening_on_hinge_1_Cube.003_Cube.003","sweethome3d_opening_on_hinge_1_Cilindro.001_Cilindro.001","sweethome3d_opening_on_hinge_1_Cubo_Cubo.007"].map((t=>e.mesh.children.find((e=>e.name===t))));const t=e.mesh.children.find((e=>"sweethome3d_hinge_1"===e.name)),i=(new te.ZzF).setFromObject(t,!0);i.getCenter(n),n.y=i.max.y}else if("CCTV"===e.object2D.type){s=[e.mesh.children.find((e=>"Sphere"===e.name))],n=e.getItemCenter(),ao(e.mesh)===this.floorplan3DOnMapScene&&e.sceneTransformedCalled&&this.inverseProcessSceneVec3(n)}const a=((e,t,i)=>{const o=e.clone();_o(t,i),o.add(t);const s=e.clone().sub(o);return s.normalize(),s})(n,new te.Pa4(100,0,0),e.mesh);e.object2D.additionalParams.mirrored&&a.negate();const r=(new te._fP).setFromAxisAngle(new te.Pa4(0,1,0),-R(e.object2D.additionalParams.mirrored?dt[e.object2D.type].modelMirroredRotationYSign*o:o)),l=a.clone();l.applyQuaternion(r),l.normalize(),s.forEach((e=>{this.rotateAroundPoint(e,n.clone(),l.clone(),R(i-t),!0)}))}}function Ph(){this.getActiveScenes().forEach((e=>{const t=e.getObjectByName("coverage_area_mesh");t&&(t.parent.remove(t),xo(t))}))}function kh(e){if(this.userInteractionCurrentController.selectedObject){const t=[{scene:this.showMapLayer3DInputRef.current.getCheckedStatus()?this.floorplan3DOnMapScene:this.floorplan3DViewScene,cameraItem:this.userInteractionCurrentController.selectedObject}];if(this.showMapLayer3DInputRef.current.getCheckedStatus()){const i=this.getFloorplanViewSceneItem(e);i&&t.push({scene:this.floorplan3DViewScene,cameraItem:i})}t.forEach((t=>{const i=t.cameraItem.mesh.children.find((t=>t.name===dt[e.type].cameraLensMeshName));i||oh.error("Coverage area 3D exception");let o=!1;const s=t.scene.getObjectByName("coverage_area_mesh");if(s?s.cameraObj2DId===e.id&&s.cameraDistanceValue===e.additionalParams.cameraDistance&&s.horizontalFOVAngleValue===e.additionalParams.cameraHorizontalFOVAngleDeg||(s.parent.remove(s),xo(s),o=!0):o=!0,!o||!i)return;const n=t.cameraItem.cameraItemProperties.cameraLensMeshLensPosLocal.clone(),a=e.additionalParams.cameraDistance*this.scaleFactor,r=R(e.additionalParams.cameraHorizontalFOVAngleDeg),l=R(this.firstPersonControlsCamera.fov),h=2*a*Math.tan(l/2),c=2*a*Math.tan(r/2),d=new te.Pa4;i.getWorldScale(d);const p=a*(1/Math.abs(d.z)),m=h*(1/Math.abs(d.y)),u=c*(1/Math.abs(d.x));let g=[new te.Pa4(-u/2,-m/2,p),new te.Pa4(u/2,-m/2,p),new te.Pa4(u/2,m/2,p),new te.Pa4(-u/2,m/2,p),new te.Pa4(0,0,p)];const f=jo(t.cameraItem.cameraItemProperties.cameraLensMeshCenterLocal,n),b=g[g.length-1].clone();t.cameraItem.mesh.localToWorld(b),i.worldToLocal(b),b.add(n);const w=jo(n,b),C=new te._fP;C.setFromUnitVectors(w,f),g.forEach((e=>{t.cameraItem.mesh.localToWorld(e),i.worldToLocal(e),e.applyQuaternion(C),e.add(n)})),g=g.map((e=>e.toArray()));const x=new te.u9r;x.setAttribute("position",new te.TlE(new Float32Array([...n.toArray(),...g[0],...g[1],...g[2],...g[3]]),3));const y=[];y.push(0,1,4),y.push(0,2,3),y.push(1,4,2),y.push(2,3,4),y.push(0,3,4),y.push(0,1,2),x.setIndex(y),x.computeVertexNormals();const S={nearPosition:{value:n},farCenterPosition:{value:new te.Pa4(g[4][0],g[4][1],g[4][2])},gradientColor:{value:new te.Ilk(33023)},opacityNear:{value:1},opacityMid:{value:.7},opacityFar:{value:.3}},_=new te.jyz({vertexShader:"\n      varying float vGradientPos; // Pass gradient position to fragment shader\n    \n      uniform vec3 nearPosition; // Near plane center position\n      uniform vec3 farCenterPosition; // Far plane center position\n    \n      void main() {\n        // Compute the view direction: near plane to far plane\n        vec3 viewDirection = normalize(farCenterPosition - nearPosition);\n    \n        // Project vertex position onto the view direction\n        vec3 vertexToNear = position - nearPosition;\n        float distanceAlongView = dot(vertexToNear, viewDirection);\n    \n        // Compute the total distance between near and far positions\n        float totalDistance = length(farCenterPosition - nearPosition);\n    \n        // Normalize gradient position to range [0.0, 1.0]\n        vGradientPos = clamp(distanceAlongView / totalDistance, 0.0, 1.0);\n    \n        // Transform vertex position\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n      }\n    ",fragmentShader:"\n    varying float vGradientPos; // Gradient position passed from vertex shader\n  \n    uniform vec3 gradientColor; // Base color for the gradient\n    uniform float opacityNear;  // Opacity at near plane\n    uniform float opacityMid;   // Opacity at midpoint (50%)\n    uniform float opacityFar;   // Opacity at far plane\n  \n    void main() {\n      float opacity;\n  \n      // Piecewise linear interpolation for opacity\n      if (vGradientPos < 0.5) {\n        // Interpolate between near and midpoint\n        opacity = mix(opacityNear, opacityMid, vGradientPos / 0.5);\n      } else {\n        // Interpolate between midpoint and far plane\n        opacity = mix(opacityMid, opacityFar, (vGradientPos - 0.5) / 0.5);\n      }\n  \n      // Final color with gradient opacity\n      gl_FragColor = vec4(gradientColor, opacity);\n    }\n  ",uniforms:S,transparent:!0,side:te.ehD}),D=new te.Kj0(x,_);D.cameraObj2DId=e.id,D.name="coverage_area_mesh",D.cameraDistanceValue=e.additionalParams.cameraDistance,D.horizontalFOVAngleValue=e.additionalParams.cameraHorizontalFOVAngleDeg,D.raycast=()=>{},i.add(D)}))}}function Fh(e){return{width:e.screenItemProperties.screenPartDimensions.localWidth*(1-(ut[e.objectType].offsetLeft+ut[e.objectType].offsetRight)),height:e.screenItemProperties.screenPartDimensions.localHeight*(1-(ut[e.objectType].offsetTop+ut[e.objectType].offsetBottom))}}function Mh(e){if(!e.screenItemProperties)return;e.mesh.updateWorldMatrix(!0,!0);const t=ut[e.objectType].useCenterPoint?e.screenItemProperties.screenPartCenterPointLocal.clone():e.screenItemProperties.screenPartCenterEdgePointLocal.clone();t.y+=ut[e.objectType].offsetBottom/2*e.screenItemProperties.screenPartDimensions.localHeight,t.y-=ut[e.objectType].offsetTop/2*e.screenItemProperties.screenPartDimensions.localHeight;let i=ut[e.objectType].offsetLeft,o=ut[e.objectType].offsetRight;e.object2D.additionalParams.mirrored&&(i=ut[e.objectType].offsetRight,o=ut[e.objectType].offsetLeft),t.x+=Po(e.mesh,"lefttoright")*(i/2)*e.screenItemProperties.screenPartDimensions.localWidth,t.x+=Po(e.mesh,"righttoleft")*(o/2)*e.screenItemProperties.screenPartDimensions.localWidth,0!==ut[e.objectType].rotationXDeg&&e.mesh.screenPart.rotation.set(R(ut[e.objectType].rotationXDeg),0,0),e.mesh.screenPart.position.set(t.x,t.y,t.z);let s=ut[e.objectType].offsetDepth*e.screenItemProperties.screenPartDimensions.localDepth+ut[e.objectType].offsetDepthWorld*e.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor;s+=this.getScreenPartLocalDepth(e.mesh)/2,e.mesh.screenPart.translateOnAxis(new te.Pa4(0,0,ko(e.object2D,"forward")),s)}function Ah(e){const t=this.getScreenProperties(e),i=t.screen_is_light?t.screen_3d_glow_effect?this.screen3DGlowLightPartDepth:this.screenBasicLightPartDepth:this.screenMeshPartDepth;return t.screen_3d_glow_effect?i*e.itemObject.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor*t.screen_3d_glow_factor:i*e.itemObject.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor*ut[e.itemObject.objectType].screenPartDepthScaleFactor}function Rh(e){this.orbitControlsCamera.position.copy((new te.Pa4).fromArray(e.cameraParams.cameraPosition)),this.orbitControls.target=(new te.Pa4).fromArray(e.cameraParams.cameraTarget),this.orbitControls.update()}var Lh=i(2894),Bh=i(1317);function Wh(e,t,i,o,s){let n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;n="number"===typeof n?n:1;const a=new Lh.M(e,{font:this.textFont,size:i,height:s,curveSegments:5});a.computeBoundingBox();const r=a.boundingBox.max.x-a.boundingBox.min.x,l=a.boundingBox.max.y-a.boundingBox.min.y,h=[new te.vBJ({color:t,transparent:n<1,opacity:n}),new te.vBJ({color:t,transparent:n<1,opacity:n})],c=new te.Kj0(a,h);return c.position.set(o.x-r/2,o.y,o.z+l/2),c}function Vh(e,t,i){const o=(new te.ZzF).setFromObject(new te.Kj0(e.geometry),!0),s=Math.abs(o.max.x-o.min.x),n=Math.abs(o.max.y-o.min.y),a=new te._12(s+10,n+10),r=new te.xoR({transparent:!0,opacity:0,side:te.Wl3,color:16777215}),l=new te.Kj0(a,r);return l.position.x=t.x*this.scaleFactor,l.position.z=t.y*this.scaleFactor,l.rotation.set(-Math.PI/2,0,0),l.translateZ(this.props.mainComponentThis.getFloorStartElevation(i,!0)+this.bindedObjectTextHeight/2),l.type="background_mesh",l}function Nh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.sensorValueDecimalPrecision;const i=e[0].value,o=e[e.length-1].value,s=document.createElement("canvas"),n=T((o-i)*Math.pow(10,t),0);s.width=n,s.height=1;const a=s.getContext("2d"),r=a.createLinearGradient(0,0,n,1);let l={0:e[0].color};for(let h=1;h<e.length-1;h++)l[(e[h].value-i)/(o-i)]=e[h].color;l["1.0"]=e[e.length-1].color,Bh.log("sensorGradientColorStops",l);for(let h in l)r.addColorStop(h,l[h]);a.fillStyle=r,a.fillRect(0,0,n,1);return{paletteImageData:a.getImageData(0,0,n,1).data,paletteCanvasWidth:n}}function Eh(e,t,i){let o=[{value:t["".concat(i,"_range_min_value")],color:t["".concat(i,"_range_min_color")]}];o.push(...t["".concat(i,"_range_intermediate_colors")]),o.push({value:t["".concat(i,"_range_max_value")],color:t["".concat(i,"_range_max_color")]});for(let h=0;h<o.length;h++)if(q.isNumber(o[h].value))return Bh.log("Invalid range color"),null;const s=o[0].value,n=o[o.length-1].value,a=Math.min(n,Math.max(s,e)),r=this.initializeSensorColorPaletteImageData(o),l=4*T((r.paletteCanvasWidth-1)*(a-s)/(n-s),0);return new te.Ilk("rgb(".concat(r.paletteImageData[l],", ").concat(r.paletteImageData[l+1],", ").concat(r.paletteImageData[l+2],")"))}function Hh(e,t){const i=this.getSensorMeshParameters(e,t);if(!i)return null;const{connectorInstanceSavedParameters:o}=i,s={x:e.object2D.x,y:e.object2D.y},n=this.isFloorHidden(e.floorNumber);Bh.log("Sensor parameters",i);const a=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["background"]),r=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["text"]),l=this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["sensor_type"]);let h,c;if(a.checked){let t;const o=this.floorplanFloors.find((t=>t.floorNumber===e.floorNumber)).roomData;if(t=Gi(s,o)){const o=this.floorplan3DViewScene.getObjectsByProperty("floorNumber",e.floorNumber);if(t=o.find((e=>e.roomID===t.id)),t){let o;if(Bh.log("Background parameters",a),"fixed"===a.background_coloring_type?o=new te.Ilk(a.background_fixed_color):"range"===a.background_coloring_type&&"number"===l&&i.isSensorNumberValue&&(o=this.calculateSensorRangeColoringColor(i.sensorOutputValue,a,"background")),o){const i="number"===typeof a.background_opacity?a.background_opacity:1;c=new te.Kj0(t.geometry.clone(),new te.xoR({color:o,flatShading:!0,side:t.material.side,transparent:i<1,opacity:i})),c.type="room_mesh",c.rotation.set(Math.PI/2,0,0),c.translateZ(-(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)+this.bindedObjectTextHeight/2)),n&&(c.visible=!1)}}else Bh.log("Ne postoji soba na sceni")}else Bh.log("Ne postoji soba")}if(r.checked){let t;Bh.log("Text parameters",r),"fixed"===r.text_coloring_type?t=new te.Ilk(r.text_fixed_color):"range"===r.text_coloring_type&&"number"===l&&i.isSensorNumberValue&&"range"!==a.background_coloring_type&&(t=this.calculateSensorRangeColoringColor(i.sensorOutputValue,r,"text")),t&&(Bh.log("textColor",t),h=this.createTextMesh(""+i.sensorOutputValue+this.getSensorUnitOfMeasurement(e),t,r.text_font_size,new te.Pa4(s.x,0,s.y).multiplyScalar(this.scaleFactor),this.bindedObjectTextHeight,r.text_opacity),h.textColor=t,h.backgroundMesh=this.createTextBackgroundMesh(h,s,e.floorNumber),h.backgroundMesh.sensorMesh=h,n&&(h.backgroundMesh.visible=!1,h.visible=!1))}return h||c?(h?c&&(h.roomMesh=c,c.sensorMesh=h):(h=new te.Kj0,h.roomMesh=c,c.sensorMesh=h),h.rotation.set(-Math.PI/2,0,0),h.translateZ(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)),h[this.props.mainComponentThis.connectorIDbinderIDPropertyName]=t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],i.sensorMeshPropertiesSetter(h),h.type="sensor",h.object2D=e.object2D,h.floorNumber=e.floorNumber,Bh.log("Created sensorTextMesh",h),h):null}function zh(e,t){const i=this.getOtherMeshParameters(e,t);if(!i)return null;const{connectorInstanceSavedParameters:o}=i,s={x:e.object2D.x,y:e.object2D.y},n=new te.Ilk(this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["color"])),a=this.createTextMesh(i.otherValue,n,this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["font_size"]),new te.Pa4(s.x,0,s.y).multiplyScalar(this.scaleFactor),this.bindedObjectTextHeight,this.props.mainComponentThis.getKlet3DDataParamValue(o,e.object2D,["opacity"]));return a.textColor=n,a.backgroundMesh=this.createTextBackgroundMesh(a,s,e.floorNumber),a.backgroundMesh.otherMesh=a,this.isFloorHidden(e.floorNumber)&&(a.visible=!1,a.backgroundMesh.visible=!1),a.rotation.set(-Math.PI/2,0,0),a.translateZ(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)),a[this.props.mainComponentThis.connectorIDbinderIDPropertyName]=t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],i.otherMeshPropertiesSetter(a),a.type="other",a.object2D=e.object2D,a.floorNumber=e.floorNumber,a}function Gh(e,t){const i=this.getPresenceAreaGroupParameters(e,t);if(!i)return null;const o=new te.ZAu;return o.position.copy(new te.Pa4(e.object2D.x,0,e.object2D.y).multiplyScalar(this.scaleFactor)),o.translateZ(this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0)),o.rotateY(-R(e.object2D.additionalParams.presenceAreaRotation+180)),e.object2D.additionalParams.detectedObjectToModelMappings.forEach(((t,s)=>{const n=Eo(i.detectedObjectsPositions[s]),a=new(ze[this.props.mainComponentThis.getObjectItemType(t.modelType)])(o,this.presenceObjects3D,{detected_object_index:s,detected_object_field:t.detectedObjectField},new Dn(qe[this.props.mainComponentThis.presenceDetails[t.modelType].itemType],"furniture",t.modelType,{x:n?this.calculatePresenceAreaDetectedObjectCoordinateValue(i.detectedObjectsPositions[s].coordX,i.coordinatesUnit):0,y:n?this.calculatePresenceAreaDetectedObjectCoordinateValue(i.detectedObjectsPositions[s].coordY,i.coordinatesUnit):0},0,0,this.props.mainComponentThis.presenceDetails[t.modelType].dimensions.width3D*this.props.mainComponentThis.meter/100,"normal",this.props.mainComponentThis.presenceDetails[t.modelType].dimensions.depth3D*this.props.mainComponentThis.meter/100,null,void 0,this.props.mainComponentThis),t.modelType,e.floorNumber,this,{fixed:!0,resizable:!1});a.mesh.visible=n,a.initObject()})),o[this.props.mainComponentThis.connectorIDbinderIDPropertyName]=t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],i.presenceAreaGroupPropertiesSetter(o),o.type="presence_area",o.object2D=e.object2D,o.floorNumber=e.floorNumber,o}function Uh(e,t){if("hidden"===this.props.mainComponentThis.clockVisibility)return;const i=e.getObjectByName("floorplan_time");i&&(e.remove(i),xo(i));const o=this.createTextMesh(t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0"),0,100,new te.Pa4(this.floorplanWallsObjectsBBoxCenterVector.x,0,this.floorplanWallsObjectsBBoxCenterVector.z+.8*this.floorplanWallsObjectsBoundingBox2DCoordinates.height*this.scaleFactor),1);o.rotation.x=-Math.PI/2,o.name="floorplan_time",e.add(o)}function qh(e,t){const i=new te.cek;return i.state="off",i.power=0,i.decay=1,i.distance=1e3,i.shadow.bias=-.01,i.shadow.mapSize.width=1028,i.shadow.mapSize.height=1028,i.shadow.camera.near=1,i.shadow.camera.far=e.y-this.props.mainComponentThis.getFloorStartElevation(t,!0)+2,i.position.set(e.x,e.y,e.z),i}function Kh(e,t,i){const o=new te.PMe;return o.state="off",o.power=0,o.decay=1,o.distance=i.spotDistance,o.shadow.bias=-5e-4,o.shadow.mapSize.width=1028,o.shadow.mapSize.height=1028,o.shadow.camera.near=1,o.shadow.camera.far=e.y-this.props.mainComponentThis.getFloorStartElevation(t,!0)+2,o.angle=R(i.spotAngle),o.penumbra=1,o.position.set(e.x,e.y,e.z),o}function Yh(){const e=new te.xo$(20,32,15),t=new te.Ilk(10066329),i=new te.xoR({emissive:t});return new te.Kj0(e,i)}function Xh(e){const t=this.calculateScreenPartDimenions(e),i=this.getScreenPartLocalDepth(e.mesh),o=new te.DvJ(t.width,t.height,i);let s={color:{value:new te.Ilk},direction:{value:new te.Pa4(0,0,1)},boxDepth:{value:i},intensity:{value:2}};s.maxGlowDistance={value:1.5*i};const n=new te.jyz({uniforms:s,vertexShader:"\n        varying vec3 vPosition;\n        void main() {\n            vPosition = position;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform vec3 color;\n        uniform vec3 direction;\n        uniform float intensity;\n        uniform float maxGlowDistance;\n        uniform float boxDepth;\n\n        varying vec3 vPosition;\n\n        void main() {\n        vec3 vertexToFarPlane = vPosition;\n\n        //ZANIMA NAS UDALJENOST U ODNOSU NA STRAZNJU RAVNINU -> KOORDINATA STRAZNJE RAVNINE JE -boxDepth/2 A PREDNJE boxDepth/2\n        vertexToFarPlane.z += boxDepth / 2.0;\n        \n        float projection = dot(vertexToFarPlane, normalize(direction)); \n        \n        float normalizedGlow = clamp(projection / maxGlowDistance, 0.0, 1.0);\n        \n        float glowFactor = normalizedGlow;\n        //INVERTIRANJE AKO ZELIMO DA NAJVECI GLOW IMA STRAZNJA STRANA BOXA\n        glowFactor = 1.0 - normalizedGlow;\n\n        vec3 finalGlow = color * glowFactor * intensity;\n        \n        gl_FragColor = vec4(finalGlow, 1.0);\n        }\n        ",side:te.ehD,blending:te.WMw,transparent:!0}),a=new te.Kj0(o,n);return a.userData={basicLightScreenPart:!0},a.state="off",a.visible=!1,a}function Zh(e,t){const i=this.calculateScreenPartDimenions(e),o=this.getScreenPartLocalDepth(e.mesh),s=i.width,n=i.height,a=t.screen_3d_glow_spread,r=s*a,l=n*a,h=new te.u9r,c=[-s/2,-n/2,-o/2,s/2,-n/2,-o/2,s/2,n/2,-o/2,-s/2,n/2,-o/2,-r/2,-l/2,o/2,r/2,-l/2,o/2,r/2,l/2,o/2,-r/2,l/2,o/2];h.setAttribute("position",new te.a$l(c,3)),h.setIndex([0,1,2,0,2,3,0,4,7,0,7,3,1,5,6,1,6,2,0,4,5,0,5,1,3,7,6,3,6,2]),h.computeVertexNormals();let d={color:{value:new te.Ilk},direction:{value:new te.Pa4(0,0,1)},boxDepth:{value:o},glowFalloff:{value:.005},projectionScaleFactor:{value:e.screenItemProperties.screenPartDimensions.worldToLocalDepthScaleFactor*t.screen_3d_glow_factor},intensity:{value:2}};const p=new te.jyz({uniforms:d,vertexShader:"\n        varying vec3 vPosition;\n        void main() {\n            vPosition = position;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n    ",fragmentShader:"\n        uniform vec3 color;\n        uniform vec3 direction;\n        uniform float intensity;\n        uniform float boxDepth;\n        uniform float glowFalloff;\n        uniform float projectionScaleFactor;\n\n        varying vec3 vPosition;\n\n        void main() {\n          vec3 vertexToFarPlane = vPosition;\n\n          //ZANIMA NAS UDALJENOST U ODNOSU NA STRAZNJU RAVNINU -> Z KOORDINATA STRAZNJE RAVNINE JE -boxDepth/2 A PREDNJE boxDepth/2\n          vertexToFarPlane.z += boxDepth / 2.0;\n\n          float projection = dot(vertexToFarPlane, normalize(direction)); \n\n          //TRANSFORMIRAMO UDALJENOST U WORLD KOORDINATNI SUSTAV JER glowFalloff DEFINIRAMO PREMA WORLD DIMENZIJAMA\n          projection = projection / projectionScaleFactor;\n\n          //MODELIRANJE DISPERZIJE SVJETLA PREKO INVERSE-SQUARE LAW\n          float normalizedGlow = 1.0 / (1.0 + glowFalloff * projection * projection);\n\n          float glowFactor = normalizedGlow;\n\n          vec3 finalGlow = color * glowFactor * intensity;\n\n          gl_FragColor = vec4(finalGlow, normalizedGlow);\n        }\n      ",side:te.ehD,blending:te.WMw,transparent:!0}),m=new te.Kj0(h,p);return m.userData={glow3DLightScreenPart:!0,screenProperties:t},m.state="off",m.visible=!1,m}function Jh(e){const t=this.calculateScreenPartDimenions(e),i=this.getScreenPartLocalDepth(e.mesh),o=new te.Kj0(new te.DvJ(t.width,t.height,i),new te.xoR({flatShading:!0,side:te.ehD}));return o.userData={nonLightScreenPart:!0},o.state="off",o}function Qh(e,t,i,o){const s=e.clone();if(i&&i.scaleWidthValue&&i.scaleHeightValue){const{wrapSValue:e,wrapTValue:t}=this.calculateTextureWrapValues(o,i);e>1&&(s.wrapS=te.rpg),t>1&&(s.wrapT=te.rpg),s.repeat.set(e,t),s.offset.set(0,0)}return new te.xoR({color:16777215,side:t,map:s})}async function $h(e){await this.toggleLightStateAction(e)}async function ec(e){await this.toggleFanStateAction(e)}async function tc(e){await this.toggleCoverStateAction(e)}async function ic(e){await this.toggleHVACStateAction(e)}async function oc(e){await this.toggleChristmasTreeStateAction(e)}async function sc(e){await this.onCameraClickActions(e)}async function nc(e){await this.toggleScreenStateAction(e)}function ac(){this.controlPanelRef.current.setSensorValues(),this.controlPanelRef.current.setOthersValues(),this.controlPanelRef.current.setPresenceAreaValues(),this.controlPanelRef.current.setDoorsWindowsSwitches(),this.controlPanelRef.current.setLightsSwitches(),this.controlPanelRef.current.setFansSwitches(),this.controlPanelRef.current.setCoverSwitches(),this.controlPanelRef.current.setPresenceBinarySwitches(),this.controlPanelRef.current.setHVACSwitches(),this.controlPanelRef.current.setChristmasTreeLightsSwitches(),this.controlPanelRef.current.setCameraSwitches(),this.controlPanelRef.current.setScreenSwitches()}var rc=i(1221),lc=i(825),hc=i(1317);function cc(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1);let a=t.length;t.push(!1);let r=new lc.v((e=>{const t=new te.lLk;return t.itemError=t=>{const i=t.split("/"),o=i[i.length-1];Co.log("Item error",o,e[o]),e[o]&&e[o].forEach((e=>{e.materialObject[e.materialTexturePropertyName]=null,e.materialObject.needsUpdate=!0}))},t})(this.materialToTextureMappings)),l=new rc.L;const h=this.props.mainComponentThis.getObjectFolderName(e.floorplanItemType),c=this.props.mainComponentThis.folderNameToModelsMapping[h].details[e.floorplanItemType].objId?"https://app.klet3d.com/api/glamos/klet3d/objects-download2/".concat(this.props.mainComponentThis.folderNameToModelsMapping[h].details[e.floorplanItemType].objId):"".concat("https://app.klet3d.com","/models3D/objMtl/models/").concat(h,"/").concat(e.floorplanItemType),d=h=>{h&&l.setMaterials(h),l.load("".concat(c,"/").concat(e.floorplanItemType,".obj"),(h=>{this.loadingCallbacksStatuses[n]=!0,t[a]=!0,this.setFloorplanItemShadow(h,this.props.mainComponentThis.isLightObject(e.floorplanItemType)||this.props.mainComponentThis.isChristmasTreeObject(e.floorplanItemType));const c=(new te.ZzF).setFromObject(h,!0),d=new te.Pa4;c.getSize(d),e.object=h,e.sizeVector=d,r=null,l=null,s?s():Zi(t)&&o(),i&&this.isInitialLoadingFinished()}))};r.load("".concat(c,"/").concat(e.floorplanItemType,".mtl"),(e=>{this.loadingCallbacksStatuses[n]=!0,t[a]=!0,e.preload(),((e,t)=>{for(let i in e.materialsInfo){const o=e.materialsInfo[i],s=e.materials[i];let n;for(let e in s)if(s[e]&&s[e].isTexture){n=e;break}for(let e in o)if("name"!==e){const i=o[e];/^[a-zA-Z0-9_-]+\.(jpg|jpeg|png|bmp|tga)$/i.test(i)&&(t[i]?t[i].push({materialObject:s,materialTexturePropertyName:n}):t[i]=[{materialObject:s,materialTexturePropertyName:n}])}}})(e,this.materialToTextureMappings),n=this.loadingCallbacksStatuses.length,this.loadingCallbacksStatuses.push(!1),a=t.length,t.push(!1),d(e)}),null,(()=>{d(null)}))}function dc(e,t,i,o){let s=this.loadingCallbacksStatuses.length;this.loadingCallbacksStatuses.push(!1);let n=t.length;t.push(!1),this.textureLoader.load(i(e),(i=>{this.loadingCallbacksStatuses[s]=!0,t[n]=!0,e.textureData=i,Zi(t)&&o(),this.isInitialLoadingFinished()}),null,(e=>hc.error("Texture loading error",e)))}function pc(){this.floorplanViewWalls3D=[...this.currentWalls3D],this.floorplanViewRoomFloors=[...this.currentRoomFloors],this.floorplanViewFurniture=[...this.currentFurniture],this.floorplanViewLights=[...this.currentViewLights],this.floorplanViewCovers=[...this.currentViewCovers],this.floorplanViewFans=[...this.currentViewFans],this.floorplanViewPresenceBinarys=[...this.currentViewPresenceBinarys],this.floorplanViewHVACs=[...this.currentViewHVACs],this.floorplanViewCameras=[...this.currentViewCameras],this.floorplanViewScreens=[...this.currentViewScreens],this.floorplanViewSensors=[...this.currentViewSensors],this.floorplanViewOthers=[...this.currentViewOthers],this.floorplanViewPresenceAreas=[...this.currentViewPresenceAreas],this.loadedTextures=[...this.roomFloorTextures],this.updateControlPanelState(),this.floorplanFloorsPanelSelection3DRef.current.setFloorplanFloors3DData(this.floorplanFloors,(()=>{const e=this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor(),t=this.floorplanFloors.find((t=>t.floorNumber===e.floorNumber));this.floorplanFloorsPanelSelection3DRef.current.setSelectedFloorplanFloor3D(t,(()=>{this.floorplanFloorsSceneControlsSelectionRef.current.setFloorplanFloors3DData(this.floorplanFloors,(()=>this.floorplanFloorsSceneControlsSelectionRef.current.setSelectedFloorplanFloor3D(t)))}))})),s.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current),requestAnimationFrame((()=>{this.state.isPanelShowed&&(this.props.mainComponentThis.taille_w>=this.props.mainComponentThis.smallScreenPixelSize?(this.panel.current.style.transform="translateX(".concat(this.panelWidth,"px)"),this.sceneControlToolsContainer.current.style.transform="translateX(".concat(this.panelWidth,"px)"),this.panelControl.current.style.transform="translateX(".concat(this.panelWidth,"px)")):this.onPanelControlClick())})),hc.log("Active",this.shadowCastingLightsActive),hc.log("Waiting",this.shadowCastingLightsWaitingList),this.isInitialFloorplanDrawingFinished=!0}function mc(){if(!this.showMapLayer3DInputRef.current.getCheckedStatus()){hc.log(JSON.stringify(this.loadingCallbacksStatuses));for(let e=0;e<this.loadingCallbacksStatuses.length;e++)if(!this.loadingCallbacksStatuses[e])return;this.onInitialFloorplanDrawingFinishedCallback()}}var uc=i(3835),gc=i(1411),fc=i(2656),bc=i(7119),wc=i(6627),Cc=i(1317);function xc(e,t,i){const o=i.xMouse-t.xMouse,s=i.yMouse-t.yMouse,n=Ri(o,s),a=Math.sqrt(Math.pow(o/this.meter,2)+Math.pow(s/this.meter,2));let r=e;return 0===o&&0===s||(r=(0,X.Z)(J()(e),a/1e3,n).geometry.coordinates),r}function yc(e){if("setCenter"===e.name){this._map.off("moveend",this.alignFloorplanTopLeftCornerOnMap);const e=this.calcul_snap_inverse(this.floorplanLastSavedTopLeftSvgCoords?this.floorplanLastSavedTopLeftSvgCoords.x:this.boxWallCoordinates.minX,this.floorplanLastSavedTopLeftSvgCoords?this.floorplanLastSavedTopLeftSvgCoords.y:this.boxWallCoordinates.minY),t=this._map.unproject([e.screenX-this.offset.left,e.screenY-(this.offset.top+this.offset.scrollY)]),i=J()([t.lng,t.lat]),o=J()([this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]),s=(0,bc.Z)(i,o),n=(0,wc.Z)(i,o),a=this._map.getCenter(),r=(0,X.Z)(J()([a.lng,a.lat]),n,s).geometry.coordinates;this._map.setCenter(r);const l=(0,gc.Z)({type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]},properties:{}},n,s);this.mapCornersGpsCoords=l.geometry.coordinates[0].slice(0,-1),this.mapCornerCoordsDebug&&this._map.getSource("mapCornersAfterSource").setData({type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}})}}function Sc(e){const t=Wi(e[1],e[0],this.width_viewbox/this.meter,this.height_viewbox/this.meter,this.floorplanGeneral.floorplan_bearing||0);return{topRightCorner:t[1],bottomRightCorner:t[2],bottomLeftCorner:t[3]}}function _c(e){const t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersBeforeSource").setData(e)}const i=this.calculateGpsCoordinatesForNewSvgPoint(this.mapCornersGpsCoords[0],e,t),{topRightCorner:o,bottomRightCorner:s,bottomLeftCorner:n}=this.calculateMapCornersCoordinatesFromTopLeftPoint(i);this.mapCornersGpsCoords=[i,o,s,n];const a={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,i]]},properties:{}},r=(0,uc.Z)(a).geometry.coordinates;this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(r,{name:"setCenter"})}function Dc(e){const t=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if(this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersBeforeSource").setData(e)}const i=this.calculateGpsCoordinatesForNewSvgPoint(this.mapCornersGpsCoords[0],e,t),{topRightCorner:o,bottomRightCorner:s,bottomLeftCorner:n}=this.calculateMapCornersCoordinatesFromTopLeftPoint(i),a={type:"Feature",geometry:{type:"Polygon",coordinates:[[i,o,s,n,i]]},properties:{}};if(this.mapCornersGpsCoords=a.geometry.coordinates[0].slice(0,-1),this.mapCornerCoordsDebug){const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]}};this._map.getSource("mapCornersAfterSource").setData(e)}Cc.log("Zoom before "+this._map.getZoom());const r=(0,uc.Z)(a).geometry.coordinates,l=Bi(r[1],this.zoomFactor/this.meter);Cc.log("New zoom "+l),this._map.setZoom(l),this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(r,{name:"setCenter"})}function vc(e){this._map=e,this._map.setMinZoom(0),this._map.setMaxZoom(22),this._map.on("resize",this.handleMapLayerWindowResize);const t=this.getFloorplanWallsBBoxCoords(),i={type:"Feature",geometry:{type:"Polygon",coordinates:[[...Wi(this.getFloorplanGpsLatitude(this.floorplanGeneral),this.getFloorplanGpsLongitude(this.floorplanGeneral),t.width/this.meter,t.height/this.meter),[this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]]]},properties:{}},o={pivot:[this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)]},s=(0,fc.Z)(i,this.floorplanGeneral.floorplan_bearing||0,o),n=(0,uc.Z)(s).geometry.coordinates;this.coordinateFloorplanSvgZoomWithMap(n[1]);const a=Bi(n[1],this.zoomFactor/this.meter),r=e=>{"setZoom"===e.name?(this._map.setCenter([this.getFloorplanGpsLongitude(this.floorplanGeneral),this.getFloorplanGpsLatitude(this.floorplanGeneral)],{name:"setCenter1"}),this._map.setBearing(this.floorplanGeneral.floorplan_bearing||0,{name:"setBearing"}),this._map.setCenter(n,{name:"setCenter2"})):this.onMapCameraOptionsSetFinishCallback(e,r)};this._map.on("moveend",r),this._map.setZoom(a,{name:"setZoom"})}function Tc(e,t){Cc.log("Moveend event"),Cc.log(e.name),"setCenter2"===e.name&&(Cc.log("Map set bearing and center finished"),this._map.off("moveend",t),this.getCurrentMapCornersGpsCoords(),Cc.log(this.mapCornersGpsCoords),this.mapCornerCoordsDebug&&(this._map.addSource("mapCornersBeforeSource",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[]}}}),this._map.addLayer({id:"mapCornersBeforeLayer",type:"line",source:"mapCornersBeforeSource",layout:{},paint:{"line-color":"#000","line-width":3}}),this._map.addSource("mapCornersAfterSource",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[]}}}),this._map.addLayer({id:"outlineafter",type:"line",source:"mapCornersAfterSource",layout:{},paint:{"line-color":"#ff0000","line-width":3}})),this.alignFloorplanTopLeftCornerOnMap({name:"setCenter"}))}function jc(){let e=this._map.unproject([0,0]);e=[e.lng,e.lat];const{topRightCorner:t,bottomRightCorner:i,bottomLeftCorner:o}=this.calculateMapCornersCoordinatesFromTopLeftPoint(e);this.mapCornersGpsCoords=[e,t,i,o]}function Oc(){this.getCurrentMapCornersGpsCoords();const e={type:"Feature",geometry:{type:"Polygon",coordinates:[[...this.mapCornersGpsCoords,this.mapCornersGpsCoords[0]]]},properties:{}},t=(0,uc.Z)(e),i=Bi(t.geometry.coordinates[1],this.zoomFactor/this.meter);this._map.setZoom(i),this._map.on("moveend",this.alignFloorplanTopLeftCornerOnMap),this._map.setCenter(t.geometry.coordinates,{name:"setCenter"})}function Ic(e){let t=Bi(e,this.zoomFactor/this.meter);if(t>22||t<0){let i,o=0,s=this.zoomFactor*this.taille_w;if(t>22){for(i="zoomout";t>22;)o++,s+=this.zoomXMove,t=Bi(e,s/this.taille_w/this.meter);Cc.log("Zoom out levels needed "+o)}else if(t<0){for(i="zoomin";t<0;)o++,s-=this.zoomXMove,t=Bi(e,s/this.taille_w/this.meter);Cc.log("Zoom in levels needed "+o)}this.zoomToSpecificLevel(i,o),this.setSvgViewBoxes()}}function Pc(e){return()=>{if(this.state.mapStyleLoaded){const t=this._map&&this._map.getStyle();this._map&&t&&t.layers&&(!this.props.isStyleChangeAllowed||this.props.isStyleChangeAllowed())&&this.state.selectedMapStyle!==e&&this.mounted&&this.setState({selectedMapStyle:e,mapStyleLoaded:!1},(()=>{t.layers.forEach((e=>this._map.removeLayer(e.id))),this._map.setStyle("mapbox://styles/mapbox/"+e,{diff:!1}),this._map.once("idle",(()=>{this.props.onSwitchLayerFinishedCallback&&this.props.onSwitchLayerFinishedCallback(this._map),this.mounted&&this.setState({mapStyleLoaded:!0})}))}))}}}class kc extends o.Component{constructor(e){super(e),this.setMapContext=e=>this._map=e,this.getMapStyleLoadedStatus=()=>this.state.mapStyleLoaded,this.state={selectedMapStyle:"light-v8",mapStyleLoaded:!0},this.mounted=!1,this._map=null,this.switchLayer=Pc.bind(this),this.setMapContext=this.setMapContext.bind(this),this.getMapStyleLoadedStatus=this.getMapStyleLoadedStatus.bind(this)}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"layer-change map-feature-icon svg-center-inside-container"}),(0,l.jsx)("div",{className:"layer-dropdown",children:(0,l.jsx)(Js,{mapStyles:He,switchLayer:this.switchLayer,selectedMapStyle:this.state.selectedMapStyle})})]})}}const Fc=kc;var Mc=i(1317);class Ac extends o.Component{constructor(){super(),this.onSwitchLayerFinishedCallback=()=>{this.props.is3D&&this.props.onMapContextLoadedCallback(this._map,!1)},this.onMapZoom=()=>{this._map&&(this._zoom=this._map.getZoom())},this.isStyleChangeAllowed=()=>{if(this.showMapLayerStyleChange3DRef.current?this.showMapLayerStyleChange3DRef.current.getMapStyleLoadedStatus():this.showMapLayerStyleChange2DRef.current.getMapStyleLoadedStatus()){const e=this._map.getStyle();return e&&e.layers?this.props.is3D&&!this._map.getLayer("floorplan-3d-model")?(Mc.log("False. Nema floorplan3D layera"),!1):(Mc.log("Omogucena promjena stila"),!0):(Mc.log("Nema layera"),!1)}return Mc.log("Vanjski if. Nije loadan stil"),!1},this.state={error:null,tooltip:null},this.showMapLayerStyleChange2DRef=o.createRef(),this.showMapLayerStyleChange3DRef=o.createRef(),this._map=null,this.zoomRange=4,this._zoom=9,this.onMapMountCallbackCalled=!1,this.mounted=!1,this.onMapZoom=this.onMapZoom.bind(this),this.onSwitchLayerFinishedCallback=this.onSwitchLayerFinishedCallback.bind(this),this.isStyleChangeAllowed=this.isStyleChangeAllowed.bind(this)}componentDidMount(){this.mounted=!0,!this.props.is3D&&s.render((0,l.jsx)(Fc,{ref:this.showMapLayerStyleChange2DRef,is3D:this.props.is3D,onMapContextLoadedCallback:this.props.onMapContextLoadedCallback,onSwitchLayerFinishedCallback:this.onSwitchLayerFinishedCallback,isStyleChangeAllowed:this.isStyleChangeAllowed}),this.props.mapStylesChangeRef.current)}componentWillUnmount(){this.mounted=!1,!this.props.is3D&&s.unmountComponentAtNode(this.props.mapStylesChangeRef.current)}render(){return(0,l.jsxs)(o.Fragment,{children:[this.props.is3D&&(0,l.jsx)(Fc,{ref:this.showMapLayerStyleChange3DRef,is3D:this.props.is3D,onMapContextLoadedCallback:this.props.onMapContextLoadedCallback,onSwitchLayerFinishedCallback:this.onSwitchLayerFinishedCallback,isStyleChangeAllowed:this.isStyleChangeAllowed}),(0,l.jsxs)(en,{mapStyle:"mapbox://styles/mapbox/light-v8",center:this.props.center,zoom:[this._zoom],onZoom:this.onMapZoom,preserveDrawingBuffer:this.props.preserveDrawingBuffer,children:[this.props.is3D&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(Qs.Ly,{className:"zoom-control",style:{right:20}}),(0,l.jsx)(Qs.AI,{className:"rotation-control",style:{right:20}})]}),(0,l.jsx)(Qs.jf,{className:"scale-control",measurement:"metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"km":"mi"}),(0,l.jsx)(Qs.X$.Consumer,{children:e=>{this._map=e,this.onMapMountCallbackCalled||(this.onMapMountCallbackCalled=!0,this.showMapLayerStyleChange3DRef.current?this.showMapLayerStyleChange3DRef.current.setMapContext(e):this.showMapLayerStyleChange2DRef.current.setMapContext(e),this.props.onMapContextLoadedCallback(e))}})]})]})}}const Rc=Ac,Lc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbcAAABgCAYAAACe2zzIAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAZgElEQVR42u2dW2wc13nH/2dm9jYURS11oWinlkWqSF0XLly6BQr3kQLcPCSOG6qxrSCBm1BoKj+4TkA9BEgC+EFC7OZFNSomNRLEsVzRVY2+NID4WL3UZgMLUaogIhU51oWUyBFNieJtZ/owe8Tds2d2Z2bncmb5/QBCEkXunpmdc/7f7XyHOY6DuDmz8KtXZp3l725n+fPdLPf158qP34j9TQmCIIgtC4tT3P7duvjMbfv+yU+d9UH+PYOx1T5mvvVC7xPfTPviCYIgiM4kFnE7a13sX3LWfzxn3/+c188Umb7Yz7qOfqn38bfTvgkEQRBEZxG5uL2zcOHNWWf5pQ3HKfj5+e0sN92nmSPPlv/4l2nfDIIgCKIziEzc3lu4ePiGc+/kilPpCfP7ezXzdBczXqV8HEEQBNEubYvb+9avn5y1lydq82phMRhb3cvM15/vfeI7ad8YgiAIIruEFrez1sX+e87GGzft5eejHpTJjJt9zPw25eMIgiCIMIQSt9MLF1676Sx/y29eLSw7teL5XlZ4mfJxBEEQRBACidt7CxcPzzrLP1h2NvYmNUCDsdVdrHSW8nEEQRCEX3yJ2/vWr5+8Za/85I6z+kRaAy0yfXEXK56kfBxBEATRiqbixvNqt537z8UdgvTLdpab3qWVjv5N+fFfpD0WgiAIQk08xe30woXXbjsrR8OW9sfNTq14fgfLj1CokiAIghBpEDdZyyxV4fm4r/T+6Qtpj4UgCIJQhwfidta62H/HWZuYt1eeTntQQSkyfbGPmd8/1PsnP0x7LARBEET6MMdx8LOFj95RKa8WFmrlRRAEQQAAG7899VGaVZBRs7icw771vg92a4UvPLt/D+XjCIIgtiCaDbsr7UFEwfKajt/Pm5hdLGJ2xf7zqysbV96dnn0z7XERBEEQyaOlPYB2qdgMN+8U8cm8iftr+ub3HRSur1b+/p8v3bhz9src4bTHSRAEQSQH+5fbH1zOQmWkjPmlAqx7OdgOq/v+Pq0bJsvVfW+HoV3Ylde+9vlH92yFfNxYzd+Pt/jZKQAT1b9bAMZjGtMAgGnhe4MAZhK/O2pxCsBozb8tuPfFSnFM4mc1CeBgiuOJijKAD6vXp8J18XlaRv2clXECm8/EiRTHHIRhAEPVv4/U/F1G7To0Wf13W2RS3O6uGJj7tIiNCpP+v0zcOH15/XSXzl7tsHzcCNwJ20rI/DIDV+QmEJ34kLg1IrsnAHAM6S5gsnEdhLvoZJkx1M+RpMVtCO6CPwZX0NrBgvuMRCIEETJavcaRCF5rvHptoQzuTIUl1ysafj9v4rpV8hS2VsyuVZ6/urJx5d+mZ19L+3rahFt7CwDOIDphAzaFchqupTva3ssRHowG/H6anEp7AG0SpfEXlFG48+jD6hjaFTZUX+N49TWn0drzixu+Fp1CNMIGuPftFACneq0DQX45E55bxWaYv5vHnXt5Xz/fzHOrpVvXpnfmte89t39Plo7W4aIW9GGuDWsA7oMSZBGdqb5G2LAleW71lOHeD6+F7gjiCxG3QlWPsh3OoHHRjdtzG0GwRZl7Y7UE8fIsuJ9Rks/NMFwB8nuNk6iPAARdh8ar96jluqG8uFn38phfyjfk1ZrhV9w4O3Pa+XJOezkD+ThuyTSDPzxTCBZG4iGTITS3vCbhTqCgoRASt3rEEJnIFICnUhqbl7ipkA8MwzCAc5LvxyVuA3Dn6XCTn5lE/Vz1g985OgXXOIo7XNnsGeZCHTSPP1bzZzNRb2n8KStuy2s6bt4JF34MKm4AoDOs7srpZxXNx7WaLDwZG6VVPQp3Anm9Z1DPgsStngXUT94jaAxZpZXn8hI3wP3Mj6Qwpnb4EPJihjjErZkBynPZUc3Tser7eXlNcXraxyGPHk1iM1/fLgPY9H5lNP38lMu5rVc0XLNK+GTeDJ1XC0PFQWF2rfL8tdXK/703M/dK2vehhmG4k1MmMvzDfQrRP8Tj1df2WmBPIb0cRtYZRb2I1Rbw1JJ2HsVr7ENtv0pnjvcM5MI2A+AQXGMuynl6ovqahyA3Eo9D7rG2i1da5Ajc9SIKYQM2UyEMrlBbkv/3RBlxq9gM80sFXJnrwr0VI7VxrNpOz8crG//0o9/cvPwfV+aeSfm2jMF9OEX3nE+WJCx7LqAya30M2S80SANxYTgh/MmpLaVWiawYNbzoIgnOQR4qPAZXgKJa8GVMVN/jmOT/uHEcRREL4D6P4j2dgWtgx5nrOwGgF/VzpKmhoIS4LS7ncGWuC/N3/RWMJMFSxR68cn/jv37625v//f6Vuf4UhuAVzx5H/JNFBn/f2jg+t6wI//BtG5zanMQMGhcIFSsnoyr1jhsxbxNHrpDvnRMjKzxnmuT8OFF9T9GjGYLcSA6DuCZZcA3tpLYjHKte4zGo7Lktr+m4eqsLs4vFQAUjSTK/bj99dWXjys8vz76T4Nt6CdshpJvv4BbaJNyH+iC2bs4sLKJYiYufTNwClUDHhDgu1b23AXh7yFFyBo3e9STceZLG/jMuqmJEhwtcOwyjUcTDFJdFcY0tP8tUxG29oj1ombW6oYTz2BSej0uolZcsgcqFJGlvzQue5yNhC4a4OMgqyWRVrirk3mRbSVQYlxdiuJxvCI6S42hc7HmuOk34eiETuDNtvK54rbx4REkSVRaeV7t6y8Sn94NVM6rAqu30/O7+xs9+9Jubl//zd3NPxvAWvCpSRMXuECRswRG9tnHIQ2WiVTqC6HImYZGFoMeghlcpIlb5yvaPRfEeorhPQK1KUtm6IRu3X8TnVxVjW0pi4vbJuokr89swfzfYnjUVWarYg5eXN/43hlDlGTQuYknGs4n44GXNtXhZveLepzLUyL2Jm2f99ERMAzHy4WvTbwBkRugU3LmqGrL1I4xRMoDGtWlri9syDFxyenDF7sbV4jYsFtQpGmn72irOX0T4cmNojN0fg+IPEOEbUQTG0XzBHZf8ftreG9DomfBegqogLtxxFD3JClVUFDavsZURvMpZFEMLim/mj03cKmCYcbpx0d6BJccNQdqM4U6+gGvburCi622+Q0chs4B9JU2JTCDzvFoZLaL4laFGheKkZOyqFJfI5lHUYcJhNH6WLSv3UmYGjdsEZMUhzRANK6WFDYhJ3K45Jj6yezHvFKT/v8E0zJomZs0SNjT1C0oSQNzUC6hrCRLBERdDsb+eFzLvTQXEhXIIaoRNxQ4vE4g+Vy1+BkoXVdRwAvLwpF+UFzORSJVlCTl8ZPfiumOigtZ5tRXdwLWuLliFAmyW7TxcG8iszVYhKyI7yD5fvx65WHAStMlsXMg8gbTDpjKBPRbmhZog83ayFF1p13urRYUQeVMiEbdV6Ljk9OCS3YO1EC/5aT6Pa11dWMp3Tj4uADKvLepJSaSHrNWWX29CVuWnQmgSaDTA0hZeMTQaR6hQdqqAalXMzZCN1+9nJt7LMtTsnvOAtsStAoaPnS5csMsP8mphsRnDQqGAG13mVsvH+S0PJ7JJq03brRBDXu1Y21EiE97AZ25FhFjUIuv00i6ynGeWvDaOeF/8bjOZQeO6pMJz6ElocZt1SvjI7sWsU4p0QGuajlnTxK3SlsjHDaFxMchC/J7wh9hdJMyiK9vorUrubRyNnkAaxSWysG/UBuIwwnvgKjGBxnvj13uTNfZWNjwZWD2WkMOvnDI+drp85dXCsmy4+bjFQr6T83GyfnS0p61zkOVSwyBrqKzK5mkxhN7smKQ4EEv/4yrwEL22LG/REe+P3/CieM1hthQkhm9xW4WO3zrbccnuwX0nubDhnbwbqryby15HEx/IetIRnYEoQEEPbaxF5vGp4r1NScaW1IInawEWV75a1noqq4gGtF9jRJazG0F7Lb1io6W4VcBwzTFxwS7jjpNOwccG0zBfLGLWLHVaPk7muRGdQdShMtFqVqWhMtB41lZSxSViWCyO/pGovocYfsvyXBUFqgz/z9IRND7HI3BPRlDleQTQQtxuO8UHpf0qsKIbmDVNzBeLnZCPk7WzybI1SGwiK/poN4zlZTWrgIVGj0nccxY14mZq2RiifK9appDtoi8LjeLsNzQ5A3lj6CG4p7ersqFfLm5LyLkts5xtsebVwnI3l8MN08x6Ky/xYVK+nQ3hG1kPySjK0mWNi1VJ6IteU9x9J2X9I+OaP6JHkmWvjSM+j0G8Ln6sjux+jwFw4IamUzW+6sRtFTpmnG5csnvaLu2Pm9pWXstGeid3t4HsdG0i+8hCclGVjE+isSWXCpu6ObKN3XGEqkZRbxwmfWhuJ8xV2b61IHidG8cZhZuLc+AaIonniB+I2zXHxEV7h2fLLFXZYBpulUqYNUtY0zMVqiRx60xk7Zmi/GzFRVwlcZNVKkZdXJJE/0gRpXJJESF6XWEiADxEeQTNn3F++LIDN3Q5hgS8Om0BxR1BWmapyopu4IbZhfliEZVsXgaFJLNPEht9VesMIiKGB4cR7UImFtLE0T+yFZ0wV6O8hnEAg3BFrlVueQCu0HGv7kPEJHbaOnrhsEyG9aSs5Quo6GqHVDPOENyHkX+pUtSgAmKrrbjaM6m6LQCQhwijKjLgC2Mt1KouGqLI3Y7DbfjO4P+4riHUi90ZRPQ8a9tY8c4BbQd2aSVoGd4sbTAN21keXcgle7z41oM/jPxL6RY8CSILl8W10VfWUFklI0M8HFS2Hy0MSfSP3KpE7Y2ewKbQHYL/z2oEmyFM7tWF4oEO7GYlDGg96GHZyrlpALYxA93IQc9wWBXqVL0R4RB79MXR35Aj6+uoUmgSiP7UADG8Gef9bUUnzNUkr2EC7vM6CFfsjsB9PlpVnXJDmldfBsp91jk5OWh4SOvCPm07TKZ2aI8BKDIdPayAHDK5sVu0lDoxab2VCHusTVhUbajMmUC951pGe+FJsTAlztJ/kU70DtM8fHQc7uf3FOrFrtkYRrFZjOILaQTPZAb2ad14SOtSMlSZr4YgS8h0rpDErXMQixwsxN97UNbOS3XvTSzh94t4f9M+ILQT5qp4DWkWyXCx64Xr3TULYR6Hz24oTdNTPawAno9TAYNp6Ga5al5NPdENiOiSy1r8ENlAViGZxGIhO+tNpYVXdqhpUO9N5vElXUQiLrRKn2PmE/E5UcU75QVJg3C3GcgKsoYAnEOLZ71l7YUOht2shAP6Dmxj6XQE0QB0VfNqRueUi2TufCRCihgObKdBclBmID+GRCXErQti26xWxNk/0q8hIC6wWRc32UGjKnZdmYQrcAch76hyDk0cAt9KkYOGP9C2YZ+2HYUEtw4UmY7tLI98NvNqrei0SbMVkVVIJp2/qEV2snuayIpf/BaXiFWWcfaPbHUNnWSIimO3oI7nJmMS8m4oA2jSJCCwG2QyAwPadvRpZqz5uBzT0FPNq7HshyC9EK0llcq5idYMoHGhSPp0ZtleOtVyb+Khpn43nqdZRCIi3uMsi1sWj9qy4HpwsjVT+lmEdsF6WRE9rIDb9n0sOCuRXYHOGEwYnRR+bIbMEhlGNh42otFrm0E6Boq44I+hcS9c2hyDWwjAOQ7Xy/XyGMRFawrJGw61TKD+sx1BdjeQi4aFiiFJLw7CrZqs9fxHIVkz24ov6mDo00z0oojr9j0sO+uhX4sBKDEDhc4MP3oxBXdy18b+R0DilgVk3oesg0Ya8IbKaYqBCD/UtPaejcG7L2TaRSQik3CNBb6oZtUQFfdjAulWngaFh7lrnw+p5xaJe5SDhn1aN/Zp25FjwV/S3a+W32rCxpHlTFSqeCPkqBb6y8L4xL1Mo5AvTOJpAmJYMw1k2ztUK97xg/hcJJ0jjgLxc5AVyEQb+zOZgSCtvIytkVdrhSx8lMVJs5VQ7agZGao1VAbkxSWihya2MZP9TlqIi6pqG+dbIRtvlrw2jqzSvMEhiCWxtZuVcEDb4dnKSwPQzXLo7oz9au3i1UopS5NmqyFWJM7Ajayn/aX6pm7AfdZrczxDwjjFE7zFPpVpIiveyZIhKhoScTX2TgLZPuE6Yqva0MHwkNaF/XrPg1ZetS2ztkjBiF9k3lvU52AR0SEuaKpYv6KRNAQ1jSTZxm4eWqoVuqQPIfWDOJ6g+/bSYgyNoTvV7m2kxK4wRehuKy+jiJ16Iests+owdfY/Eb2UzHtTpTiBqEf02pLctN2KGWTDsxDbZ/FQpGpFJH7Gjuq4Vc6Ty05lyLLXBvjojZmY+9RnFDBQymFXXoOW8Uhkt65NHzCNP3vxQN8LEb6sGK4BNs9MI9RB1iBZpYS8zLNQsTmAeN/GUO9lTiL+/pxRjb0M9xwyFeFjEw2yuE8vj5uW7cMSjQ3qDNiV17G/ZKAnl72wZEFji4+WjK9847N7D3z+0T2/jOEtDqFxoTwO2tytCrLejaotwFnY1A20DjmqvPjOSMY3BDUF7gzk4UhV8phhGEajWDfs1UtFYXIaQ39BxyMlA4UMuHE6w2pfXj/9D3/Uv+O5/XvejvGtZJMGcB9QErj0EUVC7JuoCqLgqrq9xGuRzcLiy88oq2UEauXKz6Ex5yobtx8GoE4EQFwLpeHVVN0nU2fYbxroL+rKhip35rTz+4rG/ohDkM2YgDzXENnx60QoslRGLRNdVZ8d8VlXqfTfz9hlXvK5lMdVhlzYpuBGh8LAj5pJu0BJLDoCPKInSsQGewwNg6abj1OFbl2b3l8y/vqrf7j3r57dv+dGwm9/AnKBO47G+HmSlLF1PUhxQk1C7bZFMq9CpYbKnAnUC0SrQytV4xAan4NhuEKQhqfDj4ORCdvBkK85gs15fw7pFbrJcpuykzEAKCJuwGY+btA0sM1Iz40raGzxkaLxj9/47N4DX9y/5xcp3hIvgRuB21st6TwKf9+0Lbc0GID8zDaVETtPqLzxnJ/EfAzqesNe8Ia+shM+PkSyHvMY5KLKhS2s0SA++2NIfi3gR9yI4XXP3Kwy4sbJaQyfKRp4pGQgyZoTnld7uKA/9qWBPT9M+z5UOQF5GKEMN7afRJiAW4Iyj3EKapZrR424QE1B/TLqdo6aSRpeXKK6weAFFziZB3EcrhDEGfHghqfMo5qAe1xMO97wIcm1cbE5F/O18euTibYsLPwA5cSNY+oMg2YOfYX483E7c9r5/SXjL1880PdCCiHIVkzAPZVWFgLjwhOHhchzB14COo72J00WkHk8WfEuxOYAWzmsnASHIPckBuAah9OIdp5yD+oM5AVDxxA+xya7NpkhOyxcW5TG0zC8DetxtDCG2Bvz85cXHWcwwgFFTsUBbq9VYK3bvn7+sRUb2yutf65b16Z35rXvxVwBGSWjaF2NxUvBg3oXvJvFEJovgDNwH/KgJfADcCdALYNQvypO3Fw8Ux13VjiFxq4frcYv+6wULfkKBF8sg9yLMPBDNJtFVSZRP1f94HeOTsEV2ThywkNw50Oza5vBpgEY1Bsfq/nTSyiP+XndTIgbZ912cGO1guWK0/TnWombzrC6N6+//reDfd9J+5pCwLs5BLUAxY2nYRrr+nqoPJAtmCpsgG52PWU0nh3Vzj1IA9l9P4Lm3ieJWzSMIFj3knZDyfyk8iQiCyOQt/RqxhQajeKRAK/Bt0r5MtozJW6cpQ0bc2sVeDlyzcStL6+f7tLZqwqGH4PCw2VxVy7xB7LdBV22YKZNq8VN9Nqs6s+nLchBEb23STSvnCNxi5bR6ldc1ZPcU0rD6BpBfTWlMteXyUaP3YaGbkPD7bUKFtZt2E7r39lhaBd25bWvxdRZJA24lXcCm50zohI6LmjNTkreCshybVkTNsD9HGuvhe/ZU70oplMYr37xsGIUuSk+/9MubuLrBLDpyUUldPwcv1BdgDIpbpxdeR3lnI65tQoWPdy4gsYW+wv60Qzl1cLAP3xu2fCQpXg2lozaUIHnnpEtiHhgJpCdQhIRntupzZMch1sQRCTHVPUrzDytDeGrGhavHVftiRR+BG8CmznCSPaQZjIsKWO54uD2mpuPe2zFRtnGal9ef+vLg33fTHtsBEEQRLIYOnAv7UFEgakzPFIysLhhY6/NPtgL9oUOyKsRBEEQIWCO42B8YeGdWcd5bgMotP+S6dHD2PRDjI18uVzulLwaQRAEEQLmOG41xjuW1b/gOBO3HOfptAcVlBKw2K9p3/9quaxKZxGCIAgiRR6IG+fnlvXMrOOczEIezgBW+xg7O9rbm1THfoIgCCIDNIgb5y3Lem3Oto/eB3rSHqSM3Yyd72Vs5IVymfJqBEEQRB2e4ga4ocq7jvOGSvm4Hsam+xg7+mK5nGbHfoIgCEJhmoob513LenLWcX6y4DhPpDXQErC4R9NOvlQuZ7FlFkEQBJEgvsSN87ZlHb7hOD+46zh7kxogz6ttY+xVCkESBEEQfggkbpy3LOu1a7b9rbhDlbsZO7+LsZeptJ8gCIIIQihxAzbzcdcc5/moB7WNsZv9jH37cLncyS2zCIIgiJgILW6cdy3ryeuOMxHF1gEDWH1Y016nvBpBEATRDm2LG+dtyzr8iW2fDLt14GHGTlNejSAIgoiCyMSN86+W9eZ1237Jbz6OWmYRBEEQURO5uAFuPm7RcX5803E+5/UzJWDxM5p2lPJqBEEQRNTEIm4cWSsvA1h9SNPe+rtymY6iIQiCIGIhVnHj/NSyXrlh29/tYex8D2Nfp7waQRAEESeJiBtBEARBJImW9gAIgiAIImpI3AiCIIiOg8SNIAiC6Dj+H70JmpUCX4E6AAAAEnRFWHRFWElGOk9yaWVudGF0aW9uADGEWOzvAAAAAElFTkSuQmCC";var Bc=i(1317);function Wc(){this.closeActiveRightBox(),window.removeEventListener("keydown",this.handleKeyDown3D),window.addEventListener("keydown",this.props.mainComponentThis.handleKeyDown,{capture:!0}),this.props.mainComponentThis.setShow3DStatus(!1)}function Vc(){Bc.log("Canvas resize");let e=this.props.mainComponentThis.floorplan3DContainerRef.current.getBoundingClientRect();new Array(this.orbitControlsCamera,this.firstPersonControlsCamera).forEach((t=>{t.aspect=e.width/e.height,t.updateProjectionMatrix()})),this.floorplan3DViewRenderer.setSize(e.width,e.height),this.floorplanNavigationRef.current.updateNavigatorShape(),this.showMapLayer3DInputRef.current.getCheckedStatus()&&(this.floorplan3DOnMapCamera.aspect=e.width/e.height,this.floorplan3DOnMapCamera.updateProjectionMatrix(),this.floorplan3DOnMapRenderer.setSize(e.width,e.height))}function Nc(){this.state.isPanelShowed?this.hidePanel():(this.panel.current.style.transform="translateX(".concat(this.panelWidth,"px)"),this.sceneControlToolsContainer.current.style.transform="translateX(".concat(this.panelWidth,"px)"),this.panelControl.current.style.transform="translateX(".concat(this.panelWidth,"px)")),this.setState({isPanelShowed:!this.state.isPanelShowed})}function Ec(){const e=this.showMapLayer3DInputRef.current.getCheckedStatus()?this._map.getCanvas():this.canvasRef.current,t=e.toDataURL("image/png");let i=document.createElement("canvas");i.width=e.width*this.exportPngResolutionScale,i.height=e.height*this.exportPngResolutionScale;let o=i.getContext("2d");o.scale(this.exportPngResolutionScale,this.exportPngResolutionScale);let s=new Image;s.onload=()=>{o.drawImage(s,0,0);let t=new Image;t.onload=()=>{o.drawImage(t,e.width-176,e.height-50,166,40);const s=i.toDataURL("image/png"),n=document.createElement("a");n.download="GLAMOS_3DFloorplan_".concat((new Date).getDate().toString().padStart(2,"0"),"_").concat(((new Date).getMonth()+1).toString().padStart(2,"0"),"_").concat((new Date).getFullYear()),n.href=s,n.click()},t.src=a},s.src=t}function Hc(){if(this.userInteractionCurrentController.removeItemBinder(),this.userInteractionCurrentController.setSelectedObject(null),this.showMapLayer3DInputRef.current.getCheckedStatus()){this.currentControls.setEnabledStatus(!0),this.cameraControlsRef.current.setIsMapActiveState(!1),this.currentControls===this.firstPersonControls&&this.floorplanNavigationRef.current.setActiveStatus(!0),this.sensorsHeatmapSceneControlRef.current.setIsMapActiveState(!1),this.glamosLogoImgRef.current.setAttribute("src",Lc),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),So(this.floorplan3DOnMapScene,this.floorplan3DOnMapRenderer),this.shadowCastingLightsActive=this.shadowCastingLightsActive.filter((e=>!e.isMapScene)),this.shadowCastingLightsWaitingList=this.shadowCastingLightsWaitingList.filter((e=>!e.isMapScene));const t=this.maxShadowCastingLightsCount-this.shadowCastingLightsActive.length;if(t>0){var e=[];for(let i=this.shadowCastingLightsWaitingList.length-1;i>=0&&i>this.shadowCastingLightsWaitingList.length-1-t;i--)e.push(i);e.forEach((e=>this.turnWaitingLightOn(e)))}this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers),this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1,this.onCameraMoved),this.setCurrentFromFloorplanArrays(),this.userInteractionCurrentController=this.floorplanViewUserInteractionController,this.floorplanItemCurrentHUDObject=this.floorplanViewHUDObject,s.unmountComponentAtNode(this.mapLayer3DContainerRef.current)}else C.get.call(this,"/klet3d/entity/".concat(this.props.mainComponentThis.getFloorplanID(),"/").concat(this.props.mainComponentThis.props.licenseKey),(e=>{e&&e.length>0?k(this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general))&&k(this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general))?(this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1),this.props.mainComponentThis.onFloorplanGpsCoordsClick()):(this.currentControls.setEnabledStatus(!1),this.cameraControlsRef.current.setIsMapActiveState(!0),this.floorplanNavigationRef.current.setActiveStatus(!1),this.sensorsHeatmapSceneControlRef.current.setIsMapActiveState(!0),this.glamosLogoImgRef.current.setAttribute("src",a),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.mapLayer3DContainerRef.current.classList.add("active"),this.props.mainComponentThis.floorplanGeneral=e[0].plan_general,this.shadowCastingLightsActive=this.shadowCastingLightsActive.filter((e=>(e.isMapScene||(this.setLightStateParameters(e.lightMeshObject,!1,!1),this.addShadowCastLightToList(e,this.shadowCastingLightsWaitingList)),!1))),this.showMapLayer3DInputRef.current.setCheckedStatus(!0,(()=>{s.render((0,l.jsx)(Rc,{is3D:!0,center:[this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general),this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general)],floorplanGpsCoords:[this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general),this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general)],onMapContextLoadedCallback:this.show3DFloorplanOnMap,preserveDrawingBuffer:!0,mainComponentThis:this.props.mainComponentThis}),this.mapLayer3DContainerRef.current)}))):(this.mapLayer3DContainerRef.current.classList.remove("active"),this.showMapLayer3DInputRef.current.setCheckedStatus(!1),this.boxInfo.current.innerHTML="There is no floorplan with specified id")}));Bc.log("Active",this.shadowCastingLightsActive),Bc.log("Waiting",this.shadowCastingLightsWaitingList)}function zc(){this.panel.current.style.transform="translateX(0px)",this.sceneControlToolsContainer.current.style.transform="translateX(0px)",this.panelControl.current.style.transform="translateX(0px)"}function Gc(e){if(this.currentControls===this.firstPersonControls&&this.currentControls.resetState(),this.floorplanItemCurrentHUDObject.itemSelected(e),this.closeActiveRightBox(),e.object2D)e.object3DProperties.detected_object_field?this.props.mainComponentThis.openPresenceAreaToolsRightBox(e.mesh.parent.object2D,this):"inWall"===e.object2D.family||"onWall"===e.object2D.family?this.props.mainComponentThis.openWallItemToolsRightBox(e.object2D,this):this.props.mainComponentThis.openFreeItemToolsRightBox(e.object2D,this);else{let t;e.raycastedObject&&(e.raycastedObject.sensorMesh&&"sensor"===e.raycastedObject.sensorMesh.type?t=e.raycastedObject.sensorMesh:e.raycastedObject.otherMesh&&"other"===e.raycastedObject.otherMesh.type&&(t=e.raycastedObject.otherMesh)),t&&this.props.mainComponentThis.openSensorOtherToolsRightBox(t.object2D,this)}}function Uc(){this.floorplanItemCurrentHUDObject.itemUnselected(),this.closeActiveRightBox()}function qc(){this.closeActiveRightBox()}function Kc(){this.props.mainComponentThis.hideActiveRightBox(),this.props.mainComponentThis.removeSelectedBinder()}function Yc(e){"Escape"===e.key&&this.userInteractionCurrentController.setSelectedObject(null)}function Xc(){this.showMapLayer3DInputRef.current.getCheckedStatus()?(this._map.setPitch(0),this.focusFloorplanOnMap()):this.currentControls===this.orbitControls&&(this.floorplan3DViewCamera.position.set(this.floorplanWallsBBoxCenterVector.x,this.orbitControls.maxDistance-1,this.floorplanWallsBBoxCenterVector.z),this.orbitControls.target=this.floorplanWallsBBoxCenterVector.clone(),this.orbitControls.update())}function Zc(){this.showMapLayer3DInputRef.current.getCheckedStatus()?this.focusFloorplanOnMap():this.currentControls===this.firstPersonControls?(this.centerFloorFirstPersonControlsCamera(),this.updateWallsVisibility()):(this.centerFloorOrbitControlsCamera(),this.orbitControls.target=this.floorplanWallsBBoxCenterVector.clone(),this.orbitControls.update())}const Jc=class extends Ie{constructor(e,t,i,o){super(),this.scene=e,this.floorplan3DThis=i,this.fixed=o.fixed||!1,this.resizable=o.resizable||!1,this.mesh=t,this.mesh.isUnfixedItem=!0,this.mesh.itemObject=this,this.raycastedObject=null}initObject(){this.scene.add(this.mesh),"sensor"===this.mesh.type?(this.mesh.backgroundMesh&&(this.mesh.backgroundMesh.itemObject=this,this.scene.add(this.mesh.backgroundMesh)),this.mesh.roomMesh&&(this.mesh.roomMesh.itemObject=this,this.scene.add(this.mesh.roomMesh))):"other"===this.mesh.type&&this.mesh.backgroundMesh&&(this.mesh.backgroundMesh.itemObject=this,this.scene.add(this.mesh.backgroundMesh))}remove(){if("sensor"===this.mesh.type)this.mesh.backgroundMesh&&(this.scene.remove(this.mesh.backgroundMesh),xo(this.mesh.backgroundMesh)),this.mesh.roomMesh&&(this.scene.remove(this.mesh.roomMesh),xo(this.mesh.roomMesh));else if("other"===this.mesh.type)this.mesh.backgroundMesh&&(this.scene.remove(this.mesh.backgroundMesh),xo(this.mesh.backgroundMesh));else if("presence_area"===this.mesh.type)for(let e=this.mesh.children.length-1;e>=0;e--){const t=this.mesh.children[e];this.mesh.remove(t),xo(t)}this.scene.remove(this.mesh),xo(this.mesh)}getUnfixedItemIntersections(){let e=[];return"other"===this.mesh.type?e.push(this.mesh.backgroundMesh):"sensor"===this.mesh.type?(this.mesh.backgroundMesh&&e.push(this.mesh.backgroundMesh),this.mesh.roomMesh&&e.push(this.mesh.roomMesh)):"presence_area"===this.mesh.type?this.mesh.children.forEach((t=>e.push(t))):e.push(this.mesh),e}};const Qc=class{constructor(){this.name="DefaultAnimationName",this.clock=new te.SUY,this.running=!1}start(){throw new Error("Method start of class that implements interface Animation must be implemented")}stop(){throw new Error("Method stop of class that implements interface Animation must be implemented")}animate(){throw new Error("Method animate of class that implements interface Animation must be implemented")}remove(){throw new Error("Method remove of class that implements interface Animation must be implemented")}setIsVisible(){}};const $c=class extends Qc{get on(){return this.running}constructor(e){super(),this.name="FanRotationAnimation",this.maxRPM=150,this.direction="forward",this.percentage=.6,this.floorItem=e}setDirection(e){"forward"!==e&&"reverse"!==e||(this.direction=e)}setPercentage(e){this.percentage=Math.max(0,Math.min(1,e))}increaseSpeed(e){this.setPercentage(this.percentage+e)}decreaseSpeed(e){this.setPercentage(this.percentage-e)}turnOn(){this.clock=new te.SUY,this.start()}turnOff(){this.stop()}toggle(){this.on?this.turnOff():this.turnOn()}animate(){const e=this.clock.getDelta(),t=2*Math.PI*(this.maxRPM*this.percentage)/60*e;"reverse"===this.direction?this.floorItem.mesh.rotation.y-=t:this.floorItem.mesh.rotation.y+=t,this.on&&requestAnimationFrame((()=>this.animate()))}start(){this.running=!0,this.animate()}stop(){this.running=!1}remove(){this.stop()}};const ed=class extends Qc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10;super(),this.name="CoverScaleAnimation",this.startHeightOrWidthSvg=null,this.targetHeightOrWidthSvg=null,this.startTime=null,this.speed=200,this.wallItem=e,this.running=!1,this.closingDirection=t,this.targetPosition=i,this.currentPosition=i,this.previousPosition=i,this.closedOffsetInSvg=o,this.openOffsetInSvg=s,this.refreshPosition()}setClosedOffset(e){const t=this.getOriginalHeightOrWidth(),i=Math.max(Math.min(e,t),0);i!==this.closedOffsetInSvg&&(this.closedOffsetInSvg=i,this.refreshPosition())}setOpenOffset(e){const t=this.getOriginalHeightOrWidth(),i=Math.max(Math.min(e,t),0);i!==this.openOffsetInSvg&&(this.openOffsetInSvg=i,this.refreshPosition())}setSpeed(e){this.speed=Math.max(e,5)}setClosingDirection(e){["top","left","right"].includes(e)&&e!==this.closingDirection&&(this.resizeByWidthHeightDepth(this.wallItem.object2D.additionalParams.width3D,this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D),this.closingDirection=e,this.refreshPosition())}setPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=Math.max(0,Math.min(1,e));(o!==this.targetPosition||i)&&(this.targetPosition=o,0!==t?this.start(t):this.resizeByHeightOrWidth(this.getHeightOrWidthFromPosition(o)))}refreshPosition(){this.setPosition(this.targetPosition,0,!0)}getOriginalHeightOrWidth(){return"top"===this.closingDirection?this.wallItem.object2D.additionalParams.height3D*this.wallItem.floorplan3DThis.scaleFactor:this.wallItem.object2D.additionalParams.width3D*this.wallItem.floorplan3DThis.scaleFactor}getOpenHeightOrWidth(){return this.getOriginalHeightOrWidth()-this.openOffsetInSvg}getHeightOrWidthRange(){return this.getOriginalHeightOrWidth()-this.openOffsetInSvg-this.closedOffsetInSvg}getClosedHeightOrWidth(){return this.getOpenHeightOrWidth()-this.getHeightOrWidthRange()}resizeByHeightOrWidth(e){this.resizeByWidthHeightDepth("top"===this.closingDirection?this.wallItem.object2D.additionalParams.width3D:e/this.wallItem.floorplan3DThis.scaleFactor,"top"===this.closingDirection?e/this.wallItem.floorplan3DThis.scaleFactor:this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D)}resizeToOriginalSize(){this.resizeByWidthHeightDepth(this.wallItem.object2D.additionalParams.width3D,this.wallItem.object2D.additionalParams.height3D,this.wallItem.object2D.additionalParams.depth3D)}resizeByWidthHeightDepth(e,t,i){this.wallItem.resizeByReferencePoint(e,t,i,(()=>"top"===this.closingDirection?this.wallItem.getMeshPoint({x:0,y:1,z:0}):"left"===this.closingDirection?this.wallItem.getMeshPoint({x:1,y:0,z:0}):"right"===this.closingDirection?this.wallItem.getMeshPoint({x:-1,y:0,z:0}):this.wallItem.getMeshCenter()))}getCurrentHeightOrWidth(){const e=this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg;return this.openOffsetInSvg+e*(1-this.currentPosition)}getTargetHeightOrWidth(){return(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)*(1-this.targetPosition)+this.openOffsetInSvg}getPositionFromHeightOrWidth(e){return 1-(e-this.openOffsetInSvg)/(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)}getHeightOrWidthFromPosition(e){return(1-e)*(this.getOriginalHeightOrWidth()-this.closedOffsetInSvg-this.openOffsetInSvg)+this.openOffsetInSvg}animate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.speed;this.startData||(this.startData={time:e,heightOrWidth:this.getCurrentHeightOrWidth()});const i=(e-this.startData.time)/1e3,o=Math.abs(this.getTargetHeightOrWidth()-this.startData.heightOrWidth),s=0===t?0:o/t,n=0===s?1:Math.min(i/s,1);this.currentPosition=n*this.targetPosition+(1-n)*this.previousPosition;const a=te.M8C.lerp(this.startData.heightOrWidth,this.getTargetHeightOrWidth(),n);this.resizeByHeightOrWidth(a),n<1?this.running?requestAnimationFrame((e=>this.animate(e,t))):this.resizeByHeightOrWidth(this.getTargetHeightOrWidth()):this.stop()}start(e){this.running?this.stop():(this.running=!0,this.startData=null,requestAnimationFrame((t=>this.animate(t,e))))}stop(){this.previousPosition=this.currentPosition,this.startData=null,this.running=!1}remove(){this.stop(),this.resizeToOriginalSize()}};const td=class extends Qc{constructor(e,t,i){super(),this.name="AirConditionAnimation",this.airConditionItem=e,this.airConditionMode="neutral",this.airFlowColor="#696969",this.scene=t,this.floorplan3DThis=i,this.airFlowGroup=null,this.airFlowGroupWidth=1.6*this.airConditionItem.halfSize.x,this.airFlowGroupHeight=2*this.airConditionItem.halfSize.y*.2,this.airFlowGroupDepth=4*this.airConditionItem.halfSize.z,this.pointsPerCurve=50,this.curveCount=5,this.curveZInstancesCount=2,this.curveLength=this.airFlowGroupDepth/(this.curveZInstancesCount+1),this.curveSpacing=this.curveZInstancesCount>1?(this.airFlowGroupDepth-this.curveZInstancesCount*this.curveLength)/(this.curveZInstancesCount+1):0,this.curveHeight=this.airFlowGroupHeight,this.airFlowSpeed=.2,this.curveThickness=1,this.curveInitialZPosition=this.airFlowGroupDepth-this.curveLength}updateAnimationProperties(e){this.airConditionMode=e.mode,this.airFlowColor="heating"===this.airConditionMode||"drying"===this.airConditionMode?"#ff4500":"cooling"===this.airConditionMode?"#00bfff":"#696969",this.airFlowGroup&&this.airFlowGroup.children.forEach((e=>{e.material.color.set(this.airFlowColor),e.material.needsUpdate=!0}))}getAirConditionModelBottomFrontCenterPointCoordinates(){const e=this.airConditionItem.getItemCenter(),t=new te.Pa4(0,-this.airConditionItem.halfSize.y,this.airConditionItem.halfSize.z),i=this.airConditionItem.mesh.localToWorld(t.clone()).sub(this.airConditionItem.mesh.position),o=e.clone().add(i);return this.scene===this.floorplan3DThis.floorplan3DOnMapScene&&this.airConditionItem.sceneTransformedCalled&&this.floorplan3DThis.processSceneVec3(o),o}createAirflowGroup(){this.airFlowGroup=new te.ZAu;for(let t=0;t<this.curveCount;t++)for(let e=0;e<this.curveZInstancesCount;e++)this.createAirflowCurve(t,e);const e=this.getAirConditionModelBottomFrontCenterPointCoordinates();this.airFlowGroup.rotateY(this.airConditionItem.rotation),this.airFlowGroup.position.set(e.x-this.airFlowGroupDepth*Math.sin(this.airConditionItem.rotation),e.y,e.z-this.airFlowGroupDepth*Math.cos(this.airConditionItem.rotation)),this.scene.add(this.airFlowGroup)}createAirflowCurve(e,t){const i=e/(this.curveCount-1)*this.airFlowGroupWidth-this.airFlowGroupWidth/2,o=[];for(let l=0;l<=this.pointsPerCurve;l++){const e=l/this.pointsPerCurve*this.curveLength,t=Math.sin(e*Math.PI*2/this.curveLength)*this.curveHeight*.5;o.push(new te.Pa4(i,t,e))}const s=new te.YT8(o),n=new te.WXh(s,this.pointsPerCurve,this.curveThickness,8,!1),a=new te.vBJ({opacity:1,transparent:!0});a.color.set(this.airFlowColor),a.needsUpdate=!0;const r=new te.Kj0(n,a);return r.position.z=this.curveInitialZPosition-(t+1)*this.curveSpacing-t*this.curveLength,r.airFlowAnimationCallCount=0,this.airFlowGroup.add(r),{curve:s,curveMesh:r}}removeAirFlowGroup(){if(this.airFlowGroup){const e=[...this.airFlowGroup.children];for(let t=e.length-1;t>=0;t--)this.airFlowGroup.remove(e[t]),xo(e[t]);this.scene.remove(this.airFlowGroup),this.airFlowGroup=null}}start(){this.airFlowGroup||this.createAirflowGroup(),this.running=!0,this.animate()}stop(){this.running=!1,this.airFlowGroup&&this.removeAirFlowGroup()}animate(){this.running&&(this.airFlowGroup.children.forEach((e=>{e.airFlowAnimationCallCount++,e.position.z-=this.airFlowSpeed;const t=e.position.z/this.curveInitialZPosition;e.material.opacity=Math.min(Math.max(t,0),1),e.material.needsUpdate=!0;const i=e.geometry.getAttribute("position");for(let o=0;o<i.count;o++){const t=i.getZ(o)-e.airFlowAnimationCallCount*this.airFlowSpeed,s=Math.sin(t*Math.PI*2/this.curveLength)*this.curveHeight*.5;i.setY(o,s)}i.needsUpdate=!0,e.position.z<this.curveSpacing-this.curveLength&&(e.position.z=this.curveInitialZPosition,e.airFlowAnimationCallCount=0)})),requestAnimationFrame((()=>this.animate())))}remove(){this.stop()}setIsVisible(e){this.airFlowGroup&&(this.airFlowGroup.visible=e)}};const id=class extends Qc{constructor(e,t,i,o){super(),this.getRadiusForHeight=e=>this.christmasTreeMeshHeightToRadiusMap[Math.floor(e)]||0,this.name="ChristmasTreeLightsAnimation",this.christmasTreeItem=e,this.scene=t,this.camera=i,this.floorplan3DThis=o,this.lightsCount=50,this.lightSpiralRotationsCount=5,this.lightsAnimationIntervalMs=500,this.availableLightColors=[16711680,65280,255,16776960,16777215,65535,16711935,16753920,8388736],this.usePointLights=!1,this.lightsAnimationIntervalObject=null,this.christmasTreeMesh=e.mesh,this.christmasTreeMeshHeight=2*e.halfSize.y,this.christmasTreeMeshCenter=e.getItemCenter(),this.lightsStartHeightOffset=_t[e.objectType].startFactor*this.christmasTreeMeshHeight,this.lightsEndHeightOffset=_t[e.objectType].endFactor*this.christmasTreeMeshHeight,this.christmasTreeBottomYCoordinate=e.itemStartHeight,this.heightToradiusMapStep=1,this.christmasTreeMeshHeightToRadiusMap=e.heightToRadiusMap||this.calculateHeightToRadiusMap(e),this.christmasTreeLightObjects=[]}calculateHeightToRadiusMap(e){const t={};return this.christmasTreeMesh.updateMatrixWorld(!0),this.christmasTreeMesh.traverse((e=>{if(e.isMesh&&e.geometry){const i=((e,t)=>{const i=[],o=e.getAttribute("position");for(let s=0;s<o.count;s++){const e=new te.Pa4;e.fromBufferAttribute(o,s),e.applyMatrix4(t),i.push(e)}return i})(e.geometry,e.matrixWorld);this.scene===this.floorplan3DThis.floorplan3DOnMapScene&&this.christmasTreeItem.sceneTransformedCalled&&i.forEach((e=>this.floorplan3DThis.processSceneVec3(e))),i.forEach((e=>{const i=e.y-this.christmasTreeBottomYCoordinate;if(i<this.lightsStartHeightOffset||i>this.lightsEndHeightOffset)return;const o=Math.floor(i/this.heightToradiusMapStep)*this.heightToradiusMapStep,s=Math.sqrt(Math.pow(e.x-this.christmasTreeMeshCenter.x,2)+Math.pow(e.z-this.christmasTreeMeshCenter.z,2));s>(t[o]||-1/0)&&(t[o]=s)}))}})),e.heightToRadiusMap=t,t}createChristmasTreeLights(){for(let e=0;e<this.lightsCount;e++){const t=e/(this.lightsCount-1),i=this.lightsStartHeightOffset+t*(this.lightsEndHeightOffset-this.lightsStartHeightOffset),o=this.getRadiusForHeight(i);if(o>0){const e=t*this.lightSpiralRotationsCount*2*Math.PI,s=o*Math.cos(e),n=o*Math.sin(e),a=i;this.christmasTreeLightObjects.push(this.createLightObject(new te.Pa4(s+this.christmasTreeMeshCenter.x,a,n+this.christmasTreeMeshCenter.z)))}}}createLightObject(e){let t;const i=this.getLightColor();return this.usePointLights?(t=new te.cek(i,1,_t[this.christmasTreeItem.objectType].lightDistanceMeters*this.floorplan3DThis.props.mainComponentThis.meter*this.floorplan3DThis.scaleFactor,.5),t.position.copy(e),t.needsUpdate=!0,this.scene.add(t)):(t={},t.centerMesh=new te.Kj0(new te.xo$(.95,16,16),new te.jyz({uniforms:{color:{value:new te.Ilk(i)},intensity:{value:1},time:{value:0}},vertexShader:"\n            varying vec3 vNormal;\n            varying vec3 vPosition;\n    \n            void main() {\n                vNormal = normal;\n                vPosition = position;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }\n          ",fragmentShader:"\n            uniform vec3 color;\n            uniform float intensity;\n            uniform float time;\n            \n            varying vec3 vNormal;\n            varying vec3 vPosition;\n    \n            void main() {\n                // Calculate distance from the camera to create a gradient effect\n                float dist = length(vPosition);\n                \n                // Create a glowing effect with an intensity based on the distance\n                float glow = intensity / (dist * dist + 1.0);\n    \n                // Add a pulsating effect (flicker) based on time\n                float flicker = sin(time * 10.0) * 0.1 + 1.0;\n    \n                // Apply glow and color with the pulsating flicker\n                gl_FragColor = vec4(color * glow * flicker, 1.0);\n            }\n          ",emissive:new te.Ilk(i),side:te.ehD,transparent:!0,depthWrite:!1})),t.centerMesh.position.copy(e),t.centerMesh.needsUpdate=!0,this.scene.add(t.centerMesh),t.glowMesh=new te.Kj0(new te.xo$(1,16,16),new te.jyz({uniforms:{c:{type:"f",value:1},p:{type:"f",value:1.4},glowColor:{type:"c",value:new te.Ilk(i)},viewVector:{type:"v3",value:this.camera.position}},vertexShader:"\n            uniform vec3 viewVector;\n            uniform float c;\n            uniform float p;\n            varying float intensity;\n            void main() \n            {\n                vec3 vNormal = normalize( normalMatrix * normal );\n              vec3 vNormel = normalize( normalMatrix * viewVector );\n              intensity = pow( c - dot(vNormal, vNormel), p );\n              \n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }\n          ",fragmentShader:" \n            uniform vec3 glowColor;\n            varying float intensity;\n            void main() \n            {\n              vec3 glow = glowColor * intensity;\n                gl_FragColor = vec4( glow, 1.0 );\n            }\n          ",side:te.Wl3,blending:te.WMw,transparent:!0})),t.glowMesh.position.copy(e),t.glowMesh.needsUpdate=!0,this.scene.add(t.glowMesh)),t}getLightColor(){return this.availableLightColors[Math.floor(Math.random()*(this.availableLightColors.length-1))]}turnChristmasLightsOn(){this.christmasTreeLightObjects.length||this.createChristmasTreeLights(),this.start()}turnChristmasLightsOff(){this.stop()}animate(){this.christmasTreeLightObjects.forEach((e=>{const t=this.getLightColor();this.usePointLights?e.color.setHex(t):(e.centerMesh.material.uniforms.color.value.set(t),e.centerMesh.material.uniforms.time.value+=.05,e.centerMesh.material.needsUpdate=!0,e.glowMesh.material.uniforms.viewVector.value=(new te.Pa4).subVectors(this.camera.position,e.glowMesh.position),e.glowMesh.material.uniforms.glowColor.value.setHex(t),e.glowMesh.material.needsUpdate=!0)}))}start(){this.running=!0,this.lightsAnimationIntervalObject=setInterval((()=>this.animate()),this.lightsAnimationIntervalMs)}stop(){this.running=!1;for(let e=0;e<this.christmasTreeLightObjects.length;e++)this.usePointLights?(this.scene.remove(this.christmasTreeLightObjects[e]),xo(this.christmasTreeLightObjects[e])):new Array(this.christmasTreeLightObjects[e].glowMesh,this.christmasTreeLightObjects[e].centerMesh).forEach((e=>{this.scene.remove(e),xo(e)}));this.christmasTreeLightObjects=[],clearInterval(this.lightsAnimationIntervalObject)}remove(){this.stop()}setIsVisible(e){this.christmasTreeLightObjects.forEach((t=>{this.usePointLights?t.visible=e:t.centerMesh.visible=t.glowMesh.visible=e}))}};var od=i(1317);function sd(){const e=this.sensorsHeatmapSceneControlRef.current.getActiveSensorHeatmap();e&&this.renderSensorHeatmap(e,this.floorplan3DViewScene)}function nd(e){let t=[];const i=this.getObjectConnectorParamsData(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName],this.props.mainComponentThis.getObject2DById(e.objID[0].id));if(this.getIsFixed2DObjectsValue(i))for(let s=0;s<this.floorplan3DViewScene.children.length;s++)this.floorplan3DViewScene.children[s].object2D&&e.objID.find((e=>e.id===this.floorplan3DViewScene.children[s].object2D.id))&&t.push(this.floorplan3DViewScene.children[s]);else{for(let i=0;i<e.objID.length;i++){let o;for(let s=0;s<this.floorplanFloors.length;s++)if(o=this.floorplanFloors[s].objData.find((t=>t.id===e.objID[i].id)),o){t.push({obj2D:o,floorNumber:this.floorplanFloors[s].floorNumber});break}}t=t.map((e=>this.getObjectsConnectorUnfixedBindedObjectParameters({object2D:e.obj2D,floorNumber:e.floorNumber})))}const o=new Er(this,[],i);this.objectConnectorsArray.push(o);for(let s=0;s<t.length;s++)od.log("create ObjectsConnector addBindedObject"),o.addBindedObject(t[s])}function ad(e){const t=this.getObjectConnectorClassValue(e);return"sensor"===t?{floorplanViewArrayName:"floorplanViewSensors",currentViewArrayName:"currentViewSensors"}:"other"===t?{floorplanViewArrayName:"floorplanViewOthers",currentViewArrayName:"currentViewOthers"}:"presence_area"===t?{floorplanViewArrayName:"floorplanViewPresenceAreas",currentViewArrayName:"currentViewPresenceAreas",customBindedObjectUpdateMethodName:"handlePresenceAreaBindedObjectUpdate"}:{}}function rd(e){return e?{object2D:e.object2D,floorNumber:e.floorNumber}:{}}function ld(e){if(this.isFloorplanItemMeshBinded(e)){let t=this.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(t.bindedObjects=t.bindedObjects.filter((t=>t.object2D.id!==e.object2D.id)))}}function hd(e){return{other:!1,sensor:!1,presence_area:!1,door_window:!0,lights:!0,fan:!0,cover:!0,presence_binary:!0,hvac:!0,christmas_tree_lights:!0,camera:!0,screen:!0}[this.getObjectConnectorClassValue(e)]}function cd(e){this.props.mainComponentThis.bindingRightBoxComponentRef.current&&this.props.mainComponentThis.bindingRightBoxComponentRef.current.updateKlet3DBinderState(e)}function dd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};od.log("handleLightSwitchClick params",t),this.shadowCastingLightsWaitingList=this.shadowCastingLightsWaitingList.filter((e=>this.getLightTurnOnState(e.lightMeshObject)));const i=this.getLightTurnOnState(e),o=ao(e)===this.floorplan3DOnMapScene,s=this.shadowCastingLightsActive.findIndex((t=>t.lightMeshObject===e));if(this.shadowCastingLightsActive.length<this.maxShadowCastingLightsCount){let n;i?-1===s&&(this.showMapLayer3DInputRef.current.getCheckedStatus()&&o||!this.showMapLayer3DInputRef.current.getCheckedStatus()&&!o?(n=!0,this.addShadowCastLightToList({lightMeshObject:e,isMapScene:o},this.shadowCastingLightsActive)):(n=!1,this.addShadowCastLightToList({lightMeshObject:e,isMapScene:o},this.shadowCastingLightsWaitingList))):(n=!1,-1!==s&&this.shadowCastingLightsActive.splice(s,1)),this.setLightStateParameters(e,n,t.isInitialRenderCall)}else if(i){let i;this.showMapLayer3DInputRef.current.getCheckedStatus()&&o||!this.showMapLayer3DInputRef.current.getCheckedStatus()&&!o?-1===s?(this.addShadowCastLightToList({lightMeshObject:e,isMapScene:o},this.shadowCastingLightsWaitingList),i=!1):i=!0:(this.addShadowCastLightToList({lightMeshObject:e,isMapScene:o},this.shadowCastingLightsWaitingList),i=!1),this.setLightStateParameters(e,i,t.isInitialRenderCall)}else if(this.setLightStateParameters(e,!1,t.isInitialRenderCall),-1!==s&&(this.showMapLayer3DInputRef.current.getCheckedStatus()&&o||!this.showMapLayer3DInputRef.current.getCheckedStatus()&&!o)){let e=this.shadowCastingLightsWaitingList.findIndex((e=>e.isMapScene===this.shadowCastingLightsActive[s].isMapScene));this.shadowCastingLightsActive.splice(s,1),-1!==e&&this.turnWaitingLightOn(e)}let n=[];if(n=this.showMapLayer3DInputRef.current.getCheckedStatus()?this.shadowCastingLightsWaitingList.filter((e=>e.isMapScene)):this.shadowCastingLightsWaitingList.filter((e=>!e.isMapScene)),n.length>0?this.maxShadowCastingLightsAlert.current.showAlert((0,l.jsxs)("span",{children:["To ensure optimal performance, add-on currently allows a maximum of ",(0,l.jsx)("b",{children:this.maxShadowCastingLightsCount})," ","lights to be turned on simultaneously"]}),"warning"):this.maxShadowCastingLightsAlert.current.hideAlert(),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&(i?t.highlightOnColor():t.highlightOffColor())}od.log("Active",this.shadowCastingLightsActive),od.log("Waiting",this.shadowCastingLightsWaitingList)}function pd(e){const t=e.status,i=this.getDoorWindowOpenStatus(e),o=i?"open":"closed";if(t!==o&&(e.status=o,this.updateDoorWindowMeshState(e)),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&(i?t.highlightOnColor():t.highlightOffColor())}}function md(e){const{itemObject:t}=e;let i=t.getAnimation("FanRotationAnimation");i||(i=new $c(t),t.addAnimation(i));const o=e.state,s=this.getFanState(e);o!==s&&(e.state=s,"on"===s?i.turnOn():i.turnOff());const n=this.getFanProperties(e);if(i.setPercentage(n.percentage/100),i.setDirection(n.direction),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&("on"===s?t.highlightOnColor():t.highlightOffColor())}}function ud(e){const{itemObject:t}=e;let i=t.getAnimation("CoverScaleAnimation");i||(i=new ed(t),t.addAnimation(i));const o=this.getCoverProperties(e);if(i.setOpenOffset(o.openOffset*this.scaleFactor),i.setClosedOffset(o.closedOffset*this.scaleFactor),i.setClosingDirection(o.closingDirection),i.setPosition(o.currentPosition/100),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&(0!==o.currentPosition?t.highlightOnColor():t.highlightOffColor())}}function gd(e){const t=e.itemObject,i=e.state,o=this.getPresenceBinaryState(e);i!==o&&(e.state=o);const s=this.getPresenceBinaryProperties(e);"on"===o?t.setMaterialOpacity(s.detectedOpacity):t.setMaterialOpacity(s.undetectedOpacity)}function fd(e,t){const i=e.itemObject;let o;this.props.mainComponentThis.isACObject(i.objectType)&&(o=i.getAnimation("AirConditionAnimation"),o||(o=new td(i,ao(e),this),i.addAnimation(o)));const s=e.state,n=this.getHVACState(e),a=this.getHVACProperties(e,t);o&&o.updateAnimationProperties(a),s!==n&&(e.state=n,"on"===n?o&&o.start():o&&o.stop()),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()&&i.setHighlightColor&&("on"===n?i.highlightOnColor():i.highlightOffColor())}function bd(e){const t=e.itemObject;let i=t.getAnimation("ChristmasTreeLightsAnimation");if(!i){const o=ao(e);i=new id(t,o,o===this.floorplan3DViewScene?this.floorplan3DViewCamera:this.floorplan3DOnMapCamera,this),t.addAnimation(i)}const o=e.state,s=this.getChristmasTreeLightState(e);o!==s&&(e.state=s,"on"===s?i.turnChristmasLightsOn():i.turnChristmasLightsOff()),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()&&t.setHighlightColor&&("on"===s?t.highlightOnColor():t.highlightOffColor())}function wd(e){const t=e.state,i=this.getCameraState(e);if(t!==i&&(e.state=i),this.bindedObjectsHighlightInputRef.current.getCheckedStatus()){const t=e.itemObject;t.setHighlightColor&&("on"===i?t.highlightOnColor():t.highlightOffColor())}}function Cd(e){const t=e.itemObject,i=this.getScreenProperties(e);t.renderScreenPart(i);const o=e.screenPart,s=o.state,n=this.getScreenState(e);null!==n?(s!==n&&(o.state=n,i.screen_is_light&&(o.visible="on"===n)),i.screen_is_light?(o.material.uniforms.color.value.set(new te.Ilk(i.screen_on_color)),o.material.needsUpdate=!0):o.material.color="on"===n?i.screen_on_color:i.screen_off_color,this.bindedObjectsHighlightInputRef.current.getCheckedStatus()&&t.setHighlightColor&&("on"===n?t.highlightOnColor():t.highlightOffColor())):t.unrenderScreenPart()}function xd(e,t){const i=this.getPresenceAreaDetectedObjectsData(e.object2D,t);this.getActiveScenes().map((t=>t.children.find((t=>"presence_area"===t.type&&t.object2D.id===e.object2D.id)))).filter((e=>!!e)).forEach((e=>{e.children.forEach((e=>{const t=e.itemObject,o=i.detectedObjectsPositions.find((e=>e.detected_object_field===t.object3DProperties.detected_object_field));o&&Eo(o)?(t.setItemPosition(new te.Pa4(this.calculatePresenceAreaDetectedObjectCoordinateValue(o.coordX,i.coordinatesUnit,this.scaleFactor),t.itemStartHeight,this.calculatePresenceAreaDetectedObjectCoordinateValue(o.coordY,i.coordinatesUnit,this.scaleFactor))),e.visible=!0):e.visible=!1}))}))}function yd(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return M(e,t,"meter")*this.props.mainComponentThis.meter*i}function Sd(e){const t=e.clone(!this.props.mainComponentThis.isPresenceAreaObject(e.object2D.type));return t.type=e.type,t.object2D=e.object2D,t.floorNumber=e.floorNumber,e.changeStateMethod&&(t.changeStateMethod=e.changeStateMethod),e.changeStateOnClick&&(t.changeStateOnClick=e.changeStateOnClick),"sensor"===e.type?(e.backgroundMesh&&(t.backgroundMesh=e.backgroundMesh.clone(),t.backgroundMesh.type=e.backgroundMesh.type,t.backgroundMesh.sensorMesh=t),e.roomMesh&&(t.roomMesh=e.roomMesh.clone(),t.roomMesh.type=e.roomMesh.type,t.roomMesh.sensorMesh=t)):"other"===e.type?e.backgroundMesh&&(t.backgroundMesh=e.backgroundMesh.clone(),t.backgroundMesh.type=e.backgroundMesh.type,t.backgroundMesh.otherMesh=t):this.props.mainComponentThis.isPresenceAreaObject(e.object2D.type)&&e.children.forEach((e=>{const i=e.itemObject,o=new(ze[this.props.mainComponentThis.getObjectItemType(i.objectType)])(t,this.presenceObjects3D,{...i.object3DProperties},i.object2D,i.objectType,i.floorNumber,this,{fixed:i.fixed,resizable:i.resizable});o.mesh.visible=e.visible,o.initObject()})),this.cloneUnfixedBindedObject3DCustomCallback(e,t),t}function _d(e,t){const i=new Jc(e,t,this,{fixed:!0,resizable:!1});return i.initObject(),i}function Dd(e,t){t&&this.objectConnectorBindedObjectsOnItemRemoveCheck(e);e.itemObject.remove()}var vd=i(1317);const Td=new te.Pa4,jd=new te.V1s;class Od extends te.ejS{constructor(e,t){const i=new te.u9r,o=new te.nls({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],n=[],a={};function r(e,t){l(e),l(t)}function l(e){s.push(0,0,0),n.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(s.length/3-1)}r("n1","n2"),r("n2","n4"),r("n4","n3"),r("n3","n1"),r("f1","f2"),r("f2","f4"),r("f4","f3"),r("f3","f1"),r("n1","f1"),r("n2","f2"),r("n3","f3"),r("n4","f4"),r("p","n1"),r("p","n2"),r("p","n3"),r("p","n4"),r("u1","u2"),r("u2","u3"),r("u3","u1"),r("c","t"),r("p","c"),r("cn1","cn2"),r("cn3","cn4"),r("cf1","cf2"),r("cf3","cf4"),i.setAttribute("position",new te.a$l(s,3)),i.setAttribute("color",new te.a$l(n,3)),super(i,o),this.isDisposed=!1,this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.onGeometryCoordinatesSetCallback=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const h=new te.Ilk(16755200),c=new te.Ilk(16711680),d=new te.Ilk(43775),p=new te.Ilk(16777215),m=new te.Ilk(3355443);this.setColors(h,c,d,p,m)}setColors(e,t,i,o,s){const n=this.geometry.getAttribute("color");n.setXYZ(0,e.r,e.g,e.b),n.setXYZ(1,e.r,e.g,e.b),n.setXYZ(2,e.r,e.g,e.b),n.setXYZ(3,e.r,e.g,e.b),n.setXYZ(4,e.r,e.g,e.b),n.setXYZ(5,e.r,e.g,e.b),n.setXYZ(6,e.r,e.g,e.b),n.setXYZ(7,e.r,e.g,e.b),n.setXYZ(8,e.r,e.g,e.b),n.setXYZ(9,e.r,e.g,e.b),n.setXYZ(10,e.r,e.g,e.b),n.setXYZ(11,e.r,e.g,e.b),n.setXYZ(12,e.r,e.g,e.b),n.setXYZ(13,e.r,e.g,e.b),n.setXYZ(14,e.r,e.g,e.b),n.setXYZ(15,e.r,e.g,e.b),n.setXYZ(16,e.r,e.g,e.b),n.setXYZ(17,e.r,e.g,e.b),n.setXYZ(18,e.r,e.g,e.b),n.setXYZ(19,e.r,e.g,e.b),n.setXYZ(20,e.r,e.g,e.b),n.setXYZ(21,e.r,e.g,e.b),n.setXYZ(22,e.r,e.g,e.b),n.setXYZ(23,e.r,e.g,e.b),n.setXYZ(24,t.r,t.g,t.b),n.setXYZ(25,t.r,t.g,t.b),n.setXYZ(26,t.r,t.g,t.b),n.setXYZ(27,t.r,t.g,t.b),n.setXYZ(28,t.r,t.g,t.b),n.setXYZ(29,t.r,t.g,t.b),n.setXYZ(30,t.r,t.g,t.b),n.setXYZ(31,t.r,t.g,t.b),n.setXYZ(32,i.r,i.g,i.b),n.setXYZ(33,i.r,i.g,i.b),n.setXYZ(34,i.r,i.g,i.b),n.setXYZ(35,i.r,i.g,i.b),n.setXYZ(36,i.r,i.g,i.b),n.setXYZ(37,i.r,i.g,i.b),n.setXYZ(38,o.r,o.g,o.b),n.setXYZ(39,o.r,o.g,o.b),n.setXYZ(40,s.r,s.g,s.b),n.setXYZ(41,s.r,s.g,s.b),n.setXYZ(42,s.r,s.g,s.b,!0),n.setXYZ(43,s.r,s.g,s.b,!0),n.setXYZ(44,s.r,s.g,s.b,!0),n.setXYZ(45,s.r,s.g,s.b,!0),n.setXYZ(46,s.r,s.g,s.b),n.setXYZ(47,s.r,s.g,s.b),n.setXYZ(48,s.r,s.g,s.b),n.setXYZ(49,s.r,s.g,s.b),n.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;jd.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Id("c",t,e,jd,0,0,-1),Id("t",t,e,jd,0,0,1),Id("n1",t,e,jd,-1,-1,-1),Id("n2",t,e,jd,1,-1,-1),Id("n3",t,e,jd,-1,1,-1),Id("n4",t,e,jd,1,1,-1),Id("f1",t,e,jd,-1,-1,1),Id("f2",t,e,jd,1,-1,1),Id("f3",t,e,jd,-1,1,1),Id("f4",t,e,jd,1,1,1),Id("u1",t,e,jd,.7,1.1,-1),Id("u2",t,e,jd,-.7,1.1,-1),Id("u3",t,e,jd,0,2,-1),Id("cf1",t,e,jd,-1,0,1),Id("cf2",t,e,jd,1,0,1),Id("cf3",t,e,jd,0,-1,1),Id("cf4",t,e,jd,0,1,1);let i=[{propertyName:"cn2",index:43},{propertyName:"cn3",index:44}];if(Id("cn1",t,e,jd,-1,0,-1),Id("cn2",t,e,jd,1,0,-1),i[0].beforeCoords=new te.Pa4(e.getAttribute("position").getX(i[0].index),e.getAttribute("position").getY(i[0].index),e.getAttribute("position").getZ(i[0].index)),Id("cn3",t,e,jd,0,-1,-1),i[1].beforeCoords=new te.Pa4(e.getAttribute("position").getX(i[1].index),e.getAttribute("position").getY(i[1].index),e.getAttribute("position").getZ(i[1].index)),Id("cn4",t,e,jd,0,1,-1),e.getAttribute("position").needsUpdate=!0,this.onGeometryCoordinatesSetCallback){const t=setInterval((()=>{if(vd.log("Set interval call"),this.isDisposed)clearInterval(t);else{const o=e.getAttribute("position");if(i.forEach((e=>{const t=new te.Pa4(o.getX(e.index),o.getY(e.index),o.getZ(e.index));t.applyMatrix4(this.matrix),e.newCoords=t})),vd.log("targetIndexes",i),0===i.filter((e=>e.beforeCoords.x===e.newCoords.x&&e.beforeCoords.y===e.newCoords.y&&e.beforeCoords.z===e.newCoords.z)).length){clearInterval(t);let e={};for(let t=0;t<i.length;t++)e[i[t].propertyName]=i[t].newCoords;this.onGeometryCoordinatesSetCallback(e)}}}),1)}}dispose(){this.isDisposed=!0,this.geometry.dispose(),this.material.dispose()}}function Id(e,t,i,o,s,n,a){Td.set(s,n,a).unproject(o);const r=t[e];if(void 0!==r){const e=i.getAttribute("position");for(let t=0,i=r.length;t<i;t++)e.setXYZ(r[t],Td.x,Td.y,Td.z)}}const Pd=Od;var kd=i(1317);function Fd(e,t,i,o){this.updateSunLightPosition(t,i,o),e?this.sunLightPositionFloorplan3DOnMapInterval=setInterval((()=>this.updateSunLightPosition(t,i)),this.updateSunLightPositionIntervalDelayMs):this.sunLightPositionFloorplan3DViewInterval=setInterval((()=>this.updateSunLightPosition(t,i)),this.updateSunLightPositionIntervalDelayMs)}function Md(e,t){e&&(clearInterval(e),t?this.sunLightPositionFloorplan3DOnMapInterval=null:this.sunLightPositionFloorplan3DViewInterval=null)}function Ad(e,t,i){kd.log("updateSunLightPosition call"),kd.log("objectConnectorsArray",this.objectConnectorsArray);const o=this.calculateCurrentDate();this.textFont&&this.createFloorplanTimeMesh(e,o);const n=this.calculateSunPosition(o);if(this.skyMaterial&&(this.skyMaterial.uniforms.sunAltitude.value=Math.max(n.altitude,0),this.skyMaterial.needsUpdate=!0),!this.sunLightControlsRef.current.isSunLightShadowEnabled())return;const a=new te.Pa4(this.floorplanWallsObjectsBBoxCenterVector.x,0,this.floorplanWallsObjectsBBoxCenterVector.z),r=this.floorplanEnvironmentRadius;if(n.altitude<=0)this.deallocateSceneSunLightData(e,t),this.textFont&&this.createFloorplanTimeMesh(e,o),i&&s.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current);else{const o=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0;n.azimuth=(n.azimuth+Math.PI-o*(Math.PI/180))%(2*Math.PI);const s=Math.sin(n.altitude)*r,l=Math.cos(n.altitude)*r,h=l*Math.cos(Math.PI/2-n.azimuth),c=-l*Math.sin(Math.PI/2-n.azimuth),d=new te.xo$(200,32,15),p=new te.vBJ({color:16711680}),m=new te.vBJ({color:16711680});new te.Kj0(d,p).position.set(h+this.floorplanWallsObjectsBBoxCenterVector.x,0,c+this.floorplanWallsObjectsBBoxCenterVector.z);new te.Kj0(d,m).position.set(h+this.floorplanWallsObjectsBBoxCenterVector.x,s,c+this.floorplanWallsObjectsBBoxCenterVector.z),t.offscreenShadowCamera||(t.offscreenShadowCamera=new te.iKG);const u=new te.Pa4(a.x,a.y,a.z),g=new te.Pa4(h+this.floorplanWallsObjectsBBoxCenterVector.x,s,c+this.floorplanWallsObjectsBBoxCenterVector.z),f=g.clone();t.offscreenShadowCamera.position.set(f.x,f.y,f.z),t.offscreenShadowCamera.lookAt(u),t.offscreenShadowCamera.updateProjectionMatrix(),t.offscreenShadowCamera.updateMatrixWorld();let b=this.createFloorplan3DXZPlaneBBoxPoints(this.floorplanWallsObjectsBoundingBox2DCoordinates);const w=this.getMaxFloorNumber();for(let e=0;e<4;e++)b.push(b[e].clone().add(new te.Pa4(0,this.props.mainComponentThis.getFloorStartElevation(w,!0)+this.floorplanFloors.find((e=>e.floorNumber===w)).floorHeight*this.scaleFactor,0)));b.push(a);const C=g.clone().sub(a);let x=[];for(let e=0;e<b.length;e++){const t=b[e].clone().projectOnPlane(C.clone().normalize());x.push(t);new te.Kj0(new te.xo$(40,32,15),new te.vBJ({color:16711935})).position.set(t.x,t.y,t.z)}t.auxiliaryCameraHelper&&t.auxiliaryCameraHelper.dispose(),t.auxiliaryCameraHelper=new Pd(t.offscreenShadowCamera,this.onSunLightPositionCoordinateSystemTransformReady(g,C,b,x,e,t,a,i))}}function Rd(e,t,i,o,n,a,r,l){return h=>{h.cn2=h.cn2.clone().sub(e),h.cn3=h.cn3.clone().sub(e);const c=new te.Pa4(h.cn2.x,h.cn2.y,h.cn2.z).normalize(),d=t.clone().normalize(),p=new te.Pa4(h.cn3.x,h.cn3.y,h.cn3.z).normalize(),m=this.changeCoordinateSystemBasisForPoints(i,c,d,p),u=this.changeCoordinateSystemBasisForPoints(o,c,d,p),g=this.changeCoordinateSystemBasisForPoints([e],c,d,p)[0],{maxXDist:f,maxZDist:b}=this.calculateMaxXMaxZOffsetsFromCenterPoint(u[u.length-1],u),w=f,C=b;kd.log("leftRight",w),kd.log("topBottom",C);const x=-w,y=w,S=C,_=-C,D=Math.abs(Math.min(...m.map((e=>Math.abs(g.y-e.y))))),v=Math.abs(Math.max(...m.map((e=>Math.abs(g.y-e.y)))));kd.log("near",D),kd.log("far",v);const T=new te.Ox3(16777215,.9);T.castShadow=!0,T.shadow.bias=-.002,T.shadow.mapSize.width=2048,T.shadow.mapSize.height=2048,T.target.position.set(r.x,r.y,r.z),T.position.set(e.x,e.y,e.z),T.shadow.camera.left=x,T.shadow.camera.right=y,T.shadow.camera.top=S,T.shadow.camera.bottom=_,T.shadow.camera.near=D,T.shadow.camera.far=v,T.name="sun_light";const j=n.getObjectByName("sun_light");n.add(T),n.add(T.target),j&&(kd.log("Sun light removed"),n.remove(j),xo(j)),a.mainCameraHelper&&(a.mainCameraHelper.dispose(),n.remove(a.mainCameraHelper)),a.mainCameraHelper=new Pd(T.shadow.camera),l&&s.unmountComponentAtNode(this.props.mainComponentThis.loadingComponentContainer.current),this.textFont&&this.createFloorplanTimeMesh(n,this.calculateCurrentDate())}}function Ld(e,t){[e.getObjectByName("sun_light")].forEach((t=>{t&&(e.remove(t.target),xo(t.target),e.remove(t),xo(t))})),t.mainCameraHelper&&(t.mainCameraHelper.dispose(),e.remove(t.mainCameraHelper),t.mainCameraHelper=null),t.auxiliaryCameraHelper&&(t.auxiliaryCameraHelper.dispose(),t.auxiliaryCameraHelper=null),t.offscreenShadowCamera&&xo(t.offscreenShadowCamera)}var Bd=i(1317);function Wd(e,t){let i;i=e.isUnitHeatmap?this.getSensorUnitFloorsRoomsDistribution(e):this.getSensorHeatmapFloorsRoomsDistribution(e);let o=[];for(let s=this.sensorHeatmapPlanesData.length-1;s>=0;s--){const e=i.find((e=>e.floorObject.floorNumber===this.sensorHeatmapPlanesData[s].floorNumber));if(e){let t=!1;for(let i=0;i<this.sensorHeatmapPlanesData[s].sensorsData.length;i++)if(e.sensorsData.find((e=>e.id===this.sensorHeatmapPlanesData[s].sensorsData[i].id))){t=!0;break}t||o.push(s)}else o.push(s)}o.forEach((e=>this.removeSensorHeatmapPlane(this.sensorHeatmapPlanesData[e],t))),i.forEach((i=>this.renderSensorFloorHeatmap(e,i,t)))}function Vd(e,t,i){const o=this.sensorHeatmapPlanesData.filter((e=>e.floorNumber===t.floorObject.floorNumber&&null!==e.roomID)),s=this.sensorHeatmapPlanesData.find((e=>e.floorNumber===t.floorObject.floorNumber&&null===e.roomID)),n=!this.isFloorHidden(t.floorObject.floorNumber);if(e.isRoomLevel){s&&this.removeSensorHeatmapPlane(s,i);const a=t.roomLevelDistribution;for(let e=o.length-1;e>=0;e--)a.find((t=>t.roomID===o[e].roomID))||this.removeSensorHeatmapPlane(o[e],i);o.forEach((o=>{const s=a.find((e=>e.roomID===o.roomID));this.createSensorHeatmapPlane(e,t,this.getRoomsMappingRenderTargetData(t.floorObject,[s.roomData],o.roomID),o,i)})),a.forEach((s=>{o.find((e=>e.roomID===s.roomID))||this.createSensorHeatmapPlane(e,t,this.getRoomsMappingRenderTargetData(t.floorObject,[s.roomData],s.roomID),null,i,s.roomID,n,s.verticalOffset)}))}else{for(let e=o.length-1;e>=0;e--)this.removeSensorHeatmapPlane(o[e],i);this.createSensorHeatmapPlane(e,t,this.getRoomsMappingRenderTargetData(t.floorObject,t.floorObject.roomData,null),s,i,null,n,0)}Bd.log("Sensor heatmap planes",this.sensorHeatmapPlanesData),Bd.log("Render targets",this.floorplanRoomsMappingRenderTargets)}function Nd(e,t){e.valueTextMeshes&&(e.valueTextMeshes.forEach((e=>{t.remove(e),xo(e)})),e.valueTextMeshes=null)}function Ed(e,t,i){const o=this.createTextMesh(e.value.toString()+this.getSensorUnitOfMeasurement({object2D:e}),0,20,new te.Pa4(e.x,0,e.z),2,1);return o.rotation.set(-Math.PI/2,0,0),o.translateZ(t),i.add(o),o}function Hd(e,t,i,o,s,n,a){let r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;const l=this.props.mainComponentThis.getFloorStartElevation(t.floorObject.floorNumber,!0)+this.sensorHeatmapFloorOffset+r;if(o)o.planeMesh.material=this.createSensorHeatmapPlaneMaterial(i,i.renderTargetBBox,t.sensorsData,e),o.planeMesh.material.needsUpdate=!0,e.showSensorValue?(this.removeSensorHeatmapValueTextMeshes(o,s),o.valueTextMeshes=[],t.sensorsData.forEach((e=>{const t=this.createSensorHeatmapValueTextMesh(e,l,s);t.visible=o.planeMesh.visible,o.valueTextMeshes.push(t)}))):this.removeSensorHeatmapValueTextMeshes(o,s);else{const o=i.renderTargetBBox.width,r=i.renderTargetBBox.height,h=new te.Kj0(new te._12(o,r),this.createSensorHeatmapPlaneMaterial(i,i.renderTargetBBox,t.sensorsData,e));h.rotateX(-Math.PI/2),h.position.set(i.renderTargetBBox.minX+o/2,l,i.renderTargetBBox.minY+r/2),h.visible=a,s.add(h);let c=null;e.showSensorValue&&(c=[],t.sensorsData.forEach((e=>{const t=this.createSensorHeatmapValueTextMesh(e,l,s);t.visible=a,c.push(t)}))),this.sensorHeatmapPlanesData.push({roomID:n,planeMesh:h,valueTextMeshes:c,floorNumber:t.floorObject.floorNumber,sensorsData:t.sensorsData})}}function zd(e,t){const i=this.sensorHeatmapPlanesData.findIndex((t=>t===e));-1!==i&&(t.remove(this.sensorHeatmapPlanesData[i].planeMesh),xo(this.sensorHeatmapPlanesData[i].planeMesh),this.removeSensorHeatmapValueTextMeshes(this.sensorHeatmapPlanesData[i],t),this.sensorHeatmapPlanesData.splice(i,1))}function Gd(e){for(let t=this.sensorHeatmapPlanesData.length-1;t>=0;t--)this.removeSensorHeatmapPlane(this.sensorHeatmapPlanesData[t],e)}function Ud(e,t,i){let o=this.floorplanRoomsMappingRenderTargets.find((t=>t.roomID===i&&t.floorNumber===e.floorNumber));return o||(o=this.createRoomsMappingRenderTarget(e,null===i?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=xi(e.wallData);for(let o in i)i[o]=T(i[o],0)*t;return i.width=i.maxX-i.minX,i.height=i.maxY-i.minY,i}(e,this.scaleFactor):yi(t[0].coordsOutsideWithOrphans,this.scaleFactor),t,i)),o}function qd(e,t,i,o){const s=i.length,n=Math.max(...i.map((e=>e.coordsInsideWithOrphans.length))),a=te.av9;let r;switch(a){case te.wk1:r=4;break;case te.av9:r=2;break;default:r=4}const l=new Float32Array(s*n*r),h=new Float32Array(s);for(let y=0;y<i.length;y++){h[y]=i[y].coordsInsideWithOrphans.length;for(let e=0;e<i[y].coordsOutsideWithOrphans.length;e++)l[y*n*r+e*r]=i[y].coordsOutsideWithOrphans[e].x*this.scaleFactor,l[y*n*r+e*r+1]=i[y].coordsOutsideWithOrphans[e].y*this.scaleFactor}const c=t.width,d=t.height,p="\n      precision highp float;\n      precision mediump int;\n      uniform sampler2D polygonTexture;\n      uniform sampler2D polygonSizes;\n      uniform int MAX_VERTICES; // Max number of vertices per polygon\n      vec2 polygonVertices[".concat(n,"];\n      uniform int NUM_POLYGONS; // Number of polygons\n      uniform float translatePosX;\n      uniform float translatePosY;\n      in vec4 v_p;\n      vec2 getVertex(int polygonIndex, int vertexIndex) {\n        int index = polygonIndex * MAX_VERTICES + vertexIndex;\n        // Sample from the texture\n        vec4 texel = texture(polygonTexture, vec2(float(index) / float(NUM_POLYGONS * MAX_VERTICES), 0.0));\n        return vec2(texel.r, texel.g); //*RG FORMAT\n      }\n      int getPolygonSize(int polygonIndex) {\n        float step = 1.0 / float(NUM_POLYGONS);\n        float halfStep = step / 2.0;\n        vec4 texel = texture(polygonSizes,vec2(float(polygonIndex) * step + halfStep, 0.0));\n        return int(texel.r);\n      }\n      bool isPointInPolygon(vec2 point, int polygonIndex) {\n        //*TRANSFORMIRAMO KOORDINATE IZ LOKALNOG SUSTAVA RAVNINE U KOORDINATNI SUSTAV SCENE ZA POTREBE PROVJERE JE LI TOCKA UNUTAR POLIGONA\n        //*KOORDINATE LOKALNOG SUSTAVA SE ODNOSE NA SREDISTE RAVNINE\n        //*X OS -> TOP LEFT TOCKA CE IMATI LOKALNU KOORDINATU -planeWidth/2 -> U KOORDINATNOM SUSTAVU SCENE TO TREBA BITI minX VRIJEDNOST \u0160TO SE POSTI\u017dE DODAVANJEM translatePosX\n        point.x += translatePosX;\n        //*Z OS(Y OS ZA POTREBE PROVJERE) -> TOP LEFT TOCKA \u0106E IMATI LOKALNU KOORDINATU planeHeight/2 -> U SUSTAVU SCENE TO TREBA BITI minY VRIJEDNOST -> ZATO ODUZIMAMO OD trsnalatePosY\n        point.y = translatePosY - point.y;\n        bool inside = false;\n        //*BUDUCI DA JE ZA SVAKI POLIGON ALOCIRAMO MAX_VERTICES TOCAKA ZA POLIGONE KOJI IMAJU MANJI BROJ CVOROVA OD MAX_VERTICES \u0106E DIJELOVI VISKA IMATI DEFAULT VRIJEDNOSTI 0 TE CE BIT TRETIRANI KAO TOCKE POLIGONA SA (0,0) KOORIDNATAMA STO JE NEISPRAVNO I DOVODI DO GRESAKA KOD RAYCASTING ISPITIVANJA\n        //*STOGA TREBA NA NEKI NACIN RAZLUCITI KOJE TOCKE PREDSTAVLJAJU TOCKE POLIGONA A KOJE PADDING\n        //*STOGA ZA SVAKI POLIGON PAMTIMO BROJ NJEGOVIH CVOROVA I ITERIRAMO KROZ PETLJU DO TOG BROJA\n        int polygonSize = getPolygonSize(polygonIndex);\n        //*UCITAJ PODATKE ZA SVE VERTEXE POLIGONA KAKO BI MINIMIZIRALI BROJ getVertex POZIVA I TEXTURE LOOKUP-A\n        for (int i = 0; i < polygonSize; i++) {\n          polygonVertices[i] = getVertex(polygonIndex, i);\n        }\n        for (int i = 0, j = polygonSize - 1; i < polygonSize; j = i++) {\n          vec2 vertexI = polygonVertices[i];\n          vec2 vertexJ = polygonVertices[j];\n          bool intersect = (vertexI.y > point.y) != (vertexJ.y > point.y) &&\n            (point.x < ((vertexJ.x - vertexI.x) * (point.y - vertexI.y)) / (vertexJ.y - vertexI.y) + vertexI.x);\n          if (intersect) {\n            inside = !inside;\n          }\n        }\n        return inside;\n      }\n      void main() {\n        vec2 pos = vec2(v_p.x, v_p.y);\n        bool isInside = false;\n        int i = 0;\n        while (i < NUM_POLYGONS) {\n          isInside = isInside || isPointInPolygon(pos, i);\n          i++;\n        }\n        gl_FragColor = isInside ? vec4(1.0, 0.0, 0.0, 0.0) : vec4(0.0, 0.0, 0.0, 0.0);\n      }\n  "),m=new te.IEO(l,l.length/r,1,a,te.VzW);m.needsUpdate=!0;const u=new te.IEO(h,s,1,te.hEm,te.VzW);u.needsUpdate=!0;const g={polygonTexture:{value:m},polygonSizes:{value:u},NUM_POLYGONS:{value:s},MAX_VERTICES:{value:n},translatePosX:{value:t.minX+c/2},translatePosY:{value:d/2+t.minY}},f=new te.jyz({uniforms:g,vertexShader:"\n    precision highp float;\n    precision mediump int;\n    out vec4 v_p;\n    void main(void) {\n      v_p = vec4( position, 1.0 );\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:p,side:te.ehD}),b=new te.Kj0(new te._12(c,d),f),w=new te.dd2(c,d,{format:te.hEm,type:te.ywz}),C=new te.xsS;C.add(b);const x=new te.iKG(-c/2,c/2,d/2,-d/2,.1,10);return x.position.set(0,0,1),x.lookAt(new te.Pa4(0,0,0)),this.floorplan3DViewRenderer.setRenderTarget(w),this.floorplan3DViewRenderer.clear(),this.floorplan3DViewRenderer.render(C,x),this.floorplan3DViewRenderer.setRenderTarget(null),So(C),xo(x),this.floorplanRoomsMappingRenderTargets.push({floorNumber:e.floorNumber,roomID:o,renderTargetBBox:t,renderTarget:w}),this.floorplanRoomsMappingRenderTargets[this.floorplanRoomsMappingRenderTargets.length-1]}function Kd(e,t,i,o){const s=t.width,n=t.height;Bd.log("Sensor heatmap data",o);const a=parseFloat(o.colorData.find((e=>"critical_min_value"===e.field)).value),r=parseFloat(o.colorData.find((e=>"critical_max_value"===e.field)).value),l=B(o.colorData.find((e=>"critical_min_color"===e.field)).value),h=B(o.colorData.find((e=>"critical_max_color"===e.field)).value),c=this.calculateSensorColoringIntermediateValues(o.colorData),d=c.length,p=c.flatMap((e=>[e.hue/360,e.form[0].value])),m=new Float32Array(p),u=new te.IEO(m,d,1,te.av9,te.VzW);u.needsUpdate=!0;let g=[];i.forEach((e=>{const i=new te.Pa4(e.x,0,e.z);i.x-=t.minX,i.x-=s/2,i.z-=t.minY,i.z=n/2-i.z,g.push({pos:i,value:e.value})}));const f=g.flatMap((e=>[e.pos.x,e.pos.z,e.pos.y,e.value])),b=new Float32Array(f),w=f.length/4,C=new te.IEO(b,w,1,te.wk1,te.VzW);C.magFilter=te.TyD,C.needsUpdate=!0;const x=s/2,y=n/2,S=s,_=n,D={uDataTexture:{value:C},uDataTextureSize:{value:w},opacityTexture:{value:e.renderTarget.texture},opacityTextureWidth:{value:S},opacityTextureHeight:{value:_},opacityTextureOffsetX:{value:x},opacityTextureOffsetY:{value:y},isoLineInterval:{value:1},isoLineOpacity:{value:.1},minValue:{value:a},maxValue:{value:r},minValueHue:{value:l/360},maxValueHue:{value:h/360},hueLookupTexture:{value:u},hueLookupTextureWidth:{value:d}};return Bd.log("Unfiorms",D),new te.jyz({uniforms:D,vertexShader:"\n    precision highp float;\n    precision mediump int;\n    out vec4 v_p;\n    out vec2 vUv;\n    void main(void) {\n      v_p = vec4( position, 1.0 );\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:"\n    precision highp float;\n    precision mediump int;\n    uniform sampler2D uDataTexture;\n    uniform sampler2D opacityTexture;\n    uniform float opacityTextureWidth;\n    uniform float opacityTextureHeight;\n    uniform float opacityTextureOffsetX;\n    uniform float opacityTextureOffsetY;\n    uniform sampler2D hueLookupTexture;\n    uniform float hueLookupTextureWidth;\n    uniform uint uDataTextureSize;\n    uniform float minValue; // critical low value\n    uniform float maxValue; // critical high value\n    uniform float isoLineInterval; // isoline interval, > 0.0\n    uniform float isoLineOpacity; // isoline opacity, 0.0 - 1.0\n    uniform float minValueHue; // hue for critical low value, 0.0 - 1.0\n    uniform float maxValueHue; // hue for critical high value, 0.0 - 1.0\n    in vec4 v_p;\n    in vec2 vUv;\n    float getWeight(float dist) {\n      return 1.0 / pow(dist, 2.0);\n    }\n    float isoline(float val, float lg, float ref, float pas, float thickness) {\n      float v = abs(mod(val - ref + pas  *.5, pas) - pas*  .5) / lg - .1 * thickness;\n      return smoothstep(.2, .8, v);\n    }\n    float interpolateHue(float v, float hue1, float hue2, float value1, float value2) {\n      float t = (v - value1) / (value2 - value1);\n      return mix(hue1, hue2, smoothstep(0.0, 1.0, t));\n    }\n    float getHue(float v) {\n      if (v <= minValue) {\n        return minValueHue;\n      }\n      if (v >= maxValue) {\n        return maxValueHue;\n      }\n      //*PRETRAZIVANJE U INTERMEDIATE COLORS\n      if(hueLookupTextureWidth == 0.0) {\n        return minValueHue; //*minValue=maxValue I minValueHue=maxValueHue\n      }\n      vec4 firstIntermediateColorTexel = texture2D(hueLookupTexture, vec2(0.0, 0.0));\n      vec4 lastIntermediateColorTexel = texture2D(hueLookupTexture, vec2(1.0, 0.0));\n      if(v < firstIntermediateColorTexel.g) {\n      //*INTERPOLATE IZMEDU minValue/minValueHue I firstIntermediateColorTexel\n        return interpolateHue(v, minValueHue, firstIntermediateColorTexel.r, minValue, firstIntermediateColorTexel.g);\n      }\n      if(v > lastIntermediateColorTexel.g) {\n        //*INTERPOLATE IZMEDU lastIntermediateColorTexel maxValue/maxValueHue\n        return interpolateHue(v, lastIntermediateColorTexel.r, maxValueHue, lastIntermediateColorTexel.g, maxValue);\n      }\n      for (float i = 1.0; i < hueLookupTextureWidth; i++) {\n        vec4 previousTexel = texture2D(hueLookupTexture, vec2((i - 1.0) / hueLookupTextureWidth, 0.0));\n        vec4 currentTexel = texture2D(hueLookupTexture, vec2(i / hueLookupTextureWidth, 0.0));\n        if (v >= previousTexel.g && v <= currentTexel.g) {\n          return interpolateHue(v, previousTexel.r, currentTexel.r, previousTexel.g, currentTexel.g);\n        }\n      }\n    }\n    vec3 hsv2rgb(vec3 c) {\n      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n    vec4 getPoint(uint index) {\n      float step = 1.0 / float(uDataTextureSize);\n      float halfStep = step / 2.0;\n      vec4 texel = texture(uDataTexture, vec2(float(index) * step + halfStep, 0.5));\n      return texel;\n    }\n    float getOpacityValue(vec2 pos) {\n      //POTREBNO FLIPPAT Y OS(OpenGL)\n      vec2 uv = vec2((pos.x + opacityTextureOffsetX) / opacityTextureWidth,(1.0 - (0.0 -pos.y + opacityTextureOffsetY) / opacityTextureHeight));\n      vec4 texel = texture(opacityTexture, uv);\n      return texel.r;\n    }\n    void main() {\n      vec2 pos = vec2(v_p.x, v_p.y);\n      float value = 0.0;\n      float sum = 0.0;\n      for (uint i = 0u; i < uDataTextureSize; i++) {\n        vec4 texel = getPoint(i);\n        vec2 p = texel.xy;\n        float dist = length(pos - p);\n        float weight = getWeight(dist);\n        // accumulate value\n        value += texel.w * weight;\n        sum += weight;\n      }\n      value /= sum;\n      // output value as hue\n      float hue = getHue(value);\n      vec3 color = hsv2rgb(vec3(hue, 1.0, 1.0));\n      // generate isolines\n      if (isoLineInterval > 0.0) {\n        float lg = length(vec2(dFdx(value), dFdy(value)));\n        float k2 = isoline(value, lg, .025, isoLineInterval, .0);\n        color *= 1. - isoLineOpacity + (k2*  isoLineOpacity);\n      }\n      float isInside = getOpacityValue(pos);\n      gl_FragColor = vec4(color.rgb, isInside);\n    }\n  ",side:te.Wl3,transparent:!0})}function Yd(){let e=[];const t=this.objectConnectorsArray.filter((e=>"sensor"===e.class));for(let i=0;i<t.length;i++){let o,s=!1;for(let e=0;e<t[i].bindedObjects.length;e++)if(o=this.getSensorMeshParameters(t[i].bindedObjects[e],t[i]),o.isSensorNumberValue){s=!0;break}s&&e.push(t[i])}return e}function Xd(){const e=this.getAvailableBindedNumberSensors();let t=[];for(let i=0;i<e.length;i++){const o=this.getSensorUnitOfMeasurement(e[i].bindedObjects[0]);!t.find((e=>e.measurementUnit===o))&&t.push({measurementUnit:o})}return t}function Zd(e){let t,i=[];for(let o=0;o<e.length;o++)for(let s=0;s<e[o].bindedObjects.length;s++){const n=this.getSensorMeshParameters(e[o].bindedObjects[s],e[o]);n.isSensorNumberValue&&((t=i.find((t=>t.floorObject.floorNumber===e[o].bindedObjects[s].floorNumber)))?t.sensorsData.push({id:e[o].bindedObjects[s].object2D.id,x:e[o].bindedObjects[s].object2D.x*this.scaleFactor,z:e[o].bindedObjects[s].object2D.y*this.scaleFactor,value:n.sensorOutputValue}):i.push({floorObject:this.floorplanFloors.find((t=>t.floorNumber===e[o].bindedObjects[s].floorNumber)),sensorsData:[{id:e[o].bindedObjects[s].object2D.id,x:e[o].bindedObjects[s].object2D.x*this.scaleFactor,z:e[o].bindedObjects[s].object2D.y*this.scaleFactor,value:n.sensorOutputValue}],roomLevelDistribution:[]}))}return i.forEach((e=>{let t,i,o=[];const s=this.floorplanFloors.find((t=>t.floorNumber===e.floorObject.floorNumber)).roomData;for(let n=0;n<e.sensorsData.length;n++)t=Gi({x:e.sensorsData[n].x/this.scaleFactor,y:e.sensorsData[n].z/this.scaleFactor},s),t&&(t=e.floorObject.roomData.find((e=>e.id===t.id)),i=o.find((e=>e.roomID===t.id)),Bd.log("targetSensorRaycastedRoom",t),i?i.sensorsData.push(e.sensorsData[n]):o.push({roomID:t.id,roomBBox:yi(t.coordsOutsideWithOrphans,this.scaleFactor),roomData:t,sensorsData:[e.sensorsData[n]],verticalOffset:0}));for(let n=0;n<o.length;n++){const e=[];for(let t=0;t<o.length;t++)n!==t&&(Hi(o[n].roomData.coordsInsideWithOrphans,o[t].roomBBox,1/this.scaleFactor)||this.props.mainComponentThis.qSVG.polygonPolygonIntersect(_i(o[t].roomBBox,1/this.scaleFactor),o[n].roomData.coordsInsideWithOrphans))&&e.push(o[t].roomData);o[n].parentRooms=e,o[n].verticalOffset=1*e.length}e.roomLevelDistribution=o})),Bd.log("targetSensorUnitFloorDistribution",i),i}function Jd(e){const t=this.objectConnectorsArray.filter((t=>"sensor"===t.class&&this.getSensorUnitOfMeasurement(t.bindedObjects[0])===e.heatmapName));return this.createSensorConnectorsFloorRoomsDistribution(t)}function Qd(e){let t,i=[];for(let o=0;o<e.heatmapSensorsItem.value.length;o++)t=this.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e.heatmapSensorsItem.value[o].sensorConnectorId)),t&&i.push(t);return this.createSensorConnectorsFloorRoomsDistribution(i)}function $d(e){const t=parseFloat(e.find((e=>"critical_min_value"===e.field)).value),i=parseFloat(e.find((e=>"critical_max_value"===e.field)).value),o=B(e.find((e=>"critical_min_color"===e.field)).value),s=B(e.find((e=>"critical_max_color"===e.field)).value),n=Math.abs(V(o,s)),a=1/n;let r=[];for(let l=1;l<n;l++){const e=N(o,s,l*a);r.push({hue:e,interpolationFactor:l*a,form:[{field:"range_intermediate_color_value_".concat(l),value:t+l*a*(i-t),validate:e=>q.isEmpty(e)||q.isNumber(e)},{field:"range_intermediate_color_color_".concat(l),value:W(e,1,1),validate:e=>q.isEmpty(e)||q.isHexColor(e)}]})}return r}var ep=i(4329),tp=i(6325),ip=i(1317);const op=function(e,t,i,o){this.object=e,this.camera=e,this.domElement=void 0!==t?t:document,this.floorplan3DThis=o,this.enabled=!0,this.target=new te.Pa4,this.movementRestrictionPivotPoint=i,this.objectTest=e.clone(),this.targetTest=this.target.clone(),this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.touchZoomSpeed=.8,this.minDistance=0,this.maxDistance=3e4,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=40,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI/2,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.zoomToCursor=!0,this.mouse3D=new te.Pa4,this.enableDamping=!1,this.dampingFactor=.05,this.needsUpdate=!0;var s=this,n=1e-6,a=new te.FM8,r=new te.FM8,l=new te.FM8,h=new te.FM8,c=new te.FM8,d=new te.FM8,p=new te.FM8,m=new te.FM8,u=new te.FM8,g=0,f=0,b=1,w=new te.Pa4,C={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},x=C.NONE;function y(e,t){var i=new te.Pa4,o=new te.Pa4,n=s.domElement===document?s.domElement.body:s.domElement;if(t){const t={x:(e.touches[0].clientX+e.touches[1].clientX)/2,y:(e.touches[0].clientY+e.touches[1].clientY)/2};i.set(t.x/window.innerWidth*2-1,-t.y/window.innerHeight*2+1,.5)}else i.set(e.clientX/n.clientWidth*2-1,-e.clientY/n.clientHeight*2+1,.5);i.unproject(s.object),i.sub(s.object.position).normalize();var a=o.copy(s.target).sub(s.object.position).dot(s.object.up)/i.dot(s.object.up);s.mouse3D.copy(s.object.position).add(i.multiplyScalar(a))}function S(){return 2*Math.PI/60/60*s.autoRotateSpeed}function _(e){return Math.pow(.95,e?s.touchZoomSpeed:s.zoomSpeed)}function D(e){if(!1!==s.enabled){if(e.preventDefault(),0!==e.button||s.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn()){if(1===e.button){if(!0===s.noZoom)return;x=C.DOLLY,p.set(e.clientX,e.clientY)}else if(2===e.button||0===e.button&&s.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn()){if(!0===s.noPan)return;x=C.PAN,h.set(e.clientX,e.clientY)}}else{if(!0===s.noRotate)return;x=C.ROTATE,a.set(e.clientX,e.clientY)}s.domElement.addEventListener("mousemove",v,!1),s.domElement.addEventListener("mouseup",T,!1)}}function v(e){if(!1!==s.enabled){e.preventDefault();var t=s.domElement===document?s.domElement.body:s.domElement;if(x===C.ROTATE){if(!0===s.noRotate)return;r.set(e.clientX,e.clientY),l.subVectors(r,a),s.rotateLeft(2*Math.PI*l.x/t.clientWidth*s.rotateSpeed),s.rotateUp(2*Math.PI*l.y/t.clientHeight*s.rotateSpeed),a.copy(r)}else if(x===C.DOLLY){if(!0===s.noZoom)return;m.set(e.clientX,e.clientY),u.subVectors(m,p),u.y>0?s.dollyIn():s.dollyOut(),p.copy(m)}else if(x===C.PAN){if(!0===s.noPan)return;c.set(e.clientX,e.clientY),d.subVectors(c,h),s.pan(d),h.copy(c)}s.update()}}function T(){!1!==s.enabled&&(s.domElement.removeEventListener("mousemove",v,!1),s.domElement.removeEventListener("mouseup",T,!1),x=C.NONE)}function j(e){if(!1!==s.enabled&&!0!==s.noZoom){var t=0;e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),y(e),t>0?s.dollyOut():s.dollyIn(),s.update()}}function O(e){if(!1!==s.enabled&&!0!==s.noKeys&&!0!==s.noPan)switch(e.keyCode){case s.keys.UP:s.pan(new te.FM8(0,s.keyPanSpeed));break;case s.keys.BOTTOM:s.pan(new te.FM8(0,-s.keyPanSpeed));break;case s.keys.LEFT:s.pan(new te.FM8(s.keyPanSpeed,0));break;case s.keys.RIGHT:s.pan(new te.FM8(-s.keyPanSpeed,0))}}function I(e){if(!1!==s.enabled)if(1!==e.touches.length||s.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn())if(2===e.touches.length){if(!0===s.noZoom)return;x=C.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+i*i);p.set(0,o)}else if(3===e.touches.length||1===e.touches.length&&s.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn()){if(!0===s.noPan)return;x=C.TOUCH_PAN,h.set(e.touches[0].pageX,e.touches[0].pageY)}else x=C.NONE;else{if(!0===s.noRotate)return;x=C.TOUCH_ROTATE,a.set(e.touches[0].pageX,e.touches[0].pageY)}}function P(e){if(!1!==s.enabled){e.preventDefault(),e.stopPropagation();var t=s.domElement===document?s.domElement.body:s.domElement;if(1!==e.touches.length||s.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn())if(2===e.touches.length){if(!0===s.noZoom)return;if(x!==C.TOUCH_DOLLY)return;var i=e.touches[0].pageX-e.touches[1].pageX,o=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(i*i+o*o);m.set(0,n),u.subVectors(m,p),y(e,!0),0!==u.y&&(u.y>0?s.dollyOut(void 0,!0):s.dollyIn(void 0,!0)),p.copy(m)}else if(3===e.touches.length||1===e.touches.length&&s.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.isPanModeOn()){if(!0===s.noPan)return;if(x!==C.TOUCH_PAN)return;c.set(e.touches[0].pageX,e.touches[0].pageY),d.subVectors(c,h),s.pan(d),h.copy(c)}else x=C.NONE;else{if(!0===s.noRotate)return;if(x!==C.TOUCH_ROTATE)return;r.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(r,a),s.rotateLeft(2*Math.PI*l.x/t.clientWidth*s.rotateSpeed),s.rotateUp(2*Math.PI*l.y/t.clientHeight*s.rotateSpeed),a.copy(r)}s.update()}}function k(){!1!==s.enabled&&(x=C.NONE)}function F(e){e.preventDefault()}this.setEnabledStatus=function(e){s.enabled=e},this.getEnabledStatus=function(){return s.enabled},this.resetState=function(){s.onMouseUp()},this.controlsActive=function(){return x===C.NONE},this.setPan=function(e){w=e},this.panTo=function(e){var t=new te.Pa4(e.x,s.target.y,e.z),i=s.target.clone().sub(t);w.sub(i),s.update()},this.rotateLeft=function(e){void 0===e&&(e=S()),f-=e},this.rotateUp=function(e){void 0===e&&(e=S()),g-=e},this.panLeft=function(e){var t=new te.Pa4,i=this.object.matrix.elements;t.set(i[0],0,i[2]),t.normalize(),t.multiplyScalar(-e),w.add(t)},this.panUp=function(e){var t=new te.Pa4;t.setFromMatrixColumn(this.object.matrix,1),t.multiplyScalar(e);var i=w.clone(),o=this.target.clone();i.add(t),o.add(i),o.y>0&&w.add(t)},this.pan=function(e){var t=s.domElement===document?s.domElement.body:s.domElement;if(void 0!==s.object.fov){var i=s.object.position.clone().sub(s.target).length();i*=Math.tan(s.object.fov/2*Math.PI/180),s.panLeft(2*e.x*i/t.clientHeight),s.panUp(2*e.y*i/t.clientHeight)}else void 0!==s.object.top?(s.panLeft(e.x*(s.object.right-s.object.left)/t.clientWidth),s.panUp(e.y*(s.object.top-s.object.bottom)/t.clientHeight)):ip.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.");s.update()},this.panXY=function(e,t){s.pan(new te.FM8(e,t))},this.dollyIn=function(e,t){void 0===e&&(e=_(t)),b/=e},this.dollyOut=function(e,t){void 0===e&&(e=_(t)),b*=e},this.update=function(){this.objectTest=this.object.clone(),this.targetTest=this.target.clone();const e=this.movementRestrictionPivotPoint?this.objectTest:this.object,t=this.movementRestrictionPivotPoint?this.targetTest:this.target;var i=e.position,o=i.clone().sub(this.target),a=Math.atan2(o.x,o.z),r=Math.atan2(Math.sqrt(o.x*o.x+o.z*o.z),o.y);this.autoRotate&&this.rotateLeft(S()),this.enableDamping?(a+=f*this.dampingFactor,r+=g*this.dampingFactor):(a+=f,r+=g),r=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,r)),r=Math.max(n,Math.min(Math.PI-n,r));var l=o.length(),h=l*b;h=Math.max(this.minDistance,Math.min(this.maxDistance,h)),this.enableDamping?t.addScaledVector(w,this.dampingFactor):t.add(w),this.zoomToCursor&&t.lerp(this.mouse3D,1-h/l),o.x=h*Math.sin(r)*Math.sin(a),o.y=h*Math.cos(r),o.z=h*Math.sin(r)*Math.cos(a),i.copy(t).add(o),e.lookAt(t),this.movementRestrictionPivotPoint&&Xi(e.position,this.movementRestrictionPivotPoint)<this.maxDistance&&(this.object.position.copy(e.position),this.object.rotation.copy(e.rotation),this.object.scale.copy(e.scale),this.object.projectionMatrix.copy(e.projectionMatrix),this.object.isPerspectiveCamera&&e.isPerspectiveCamera&&this.object.matrixWorldInverse.copy(e.matrixWorldInverse),this.object.isOrthographicCamera&&e.isOrthographicCamera&&(this.object.matrixWorld.copy(e.matrixWorld),this.object.matrixWorldInverse.copy(e.matrixWorldInverse)),this.object.isPerspectiveCamera&&e.isPerspectiveCamera?(this.object.fov=e.fov,this.object.near=e.near,this.object.far=e.far):this.object.isOrthographicCamera&&e.isOrthographicCamera&&(this.object.left=e.left,this.object.right=e.right,this.object.top=e.top,this.object.bottom=e.bottom,this.object.near=e.near,this.object.far=e.far),this.object.updateProjectionMatrix(),this.object.updateMatrixWorld(),this.target=t.clone(),s.domElement.dispatchEvent(new Event("cameraMoved")),this.needsUpdate=!0),this.enableDamping?(f*=1-this.dampingFactor,g*=1-this.dampingFactor,w.multiplyScalar(1-this.dampingFactor)):(f=0,g=0,w.set(0,0,0)),b=1,this.movementRestrictionPivotPoint||(s.domElement.dispatchEvent(new Event("cameraMoved")),this.needsUpdate=!0)},this.onMouseUp=T,this.touchend=k,this.domElement.addEventListener("contextmenu",F,!1),this.domElement.addEventListener("mousedown",D,!1),this.domElement.addEventListener("wheel",j,!1),this.domElement.addEventListener("touchstart",I,!1),this.domElement.addEventListener("touchend",k,!1),this.domElement.addEventListener("touchmove",P,!1),window.document.addEventListener("keydown",O,!1),this.dispose=function(){this.domElement.removeEventListener("contextmenu",F),this.domElement.removeEventListener("mousedown",D),this.domElement.removeEventListener("wheel",j),this.domElement.removeEventListener("touchstart",I),this.domElement.removeEventListener("touchend",k),this.domElement.removeEventListener("touchmove",P),window.document.removeEventListener("keydown",O)}};var sp=i(1317);const np=-1,ap=0,rp=3,lp=6,hp=1e-6;function cp(e){this.enabled&&(this.mouseMoved=!0,this.state===ap&&(this.rotateEnd.set(e.clientX,e.clientY),this.makeRotation()))}function dp(e){this.enabled&&0===e.button&&(this.mouseMoved=!1,this.state=ap,this.rotateStart.set(e.clientX,e.clientY))}function pp(){this.enabled&&(this.state=np,this.mouseMoved||this.moveToCircleNavigatorPosition())}function mp(e){if(this.enabled)switch(e.preventDefault(),e.stopPropagation(),this.touchMoved=!0,e.touches.length){case 1:if(this.state!==rp)return;this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.makeRotation();break;case 2:if(this.state!==lp)return;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+i*i);this.dollyEnd.set(0,o),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),0!==this.dollyDelta.y&&(this.dollyDelta.y>0?(this.shouldMoveForward=!0,this.shouldMoveBackward=!1):(this.shouldMoveForward=!1,this.shouldMoveBackward=!0));break;default:this.state=np}}function up(e){if(this.enabled)switch(this.touchMoved=!1,e.touches.length){case 1:this.state=rp,this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:this.state=lp;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+i*i);this.dollyStart.set(0,o);break;default:this.state=np}}function gp(){this.enabled&&(this.touchMoved||this.moveToCircleNavigatorPosition(),this.shouldMoveForward=!1,this.shouldMoveBackward=!1,this.state=np)}function fp(e){if(this.enabled)switch(e.code){case"ArrowUp":case"KeyW":this.shouldMoveForward=!0;break;case"ArrowLeft":case"KeyA":this.shouldMoveLeft=!0;break;case"ArrowDown":case"KeyS":this.shouldMoveBackward=!0;break;case"ArrowRight":case"KeyD":this.shouldMoveRight=!0}}function bp(e){if(this.enabled)switch(e.code){case"ArrowUp":case"KeyW":this.shouldMoveForward=!1;break;case"ArrowLeft":case"KeyA":this.shouldMoveLeft=!1;break;case"ArrowDown":case"KeyS":this.shouldMoveBackward=!1;break;case"ArrowRight":case"KeyD":this.shouldMoveRight=!1}}function wp(e){this.enabled&&(e.preventDefault(),e.deltaY<0?(this.shouldMoveForward=!0,this.shouldMoveBackward=!1):(this.shouldMoveForward=!1,this.shouldMoveBackward=!0),clearTimeout(this.isUserScrolling),this.isUserScrolling=setTimeout((()=>{this.shouldMoveForward=!1,this.shouldMoveBackward=!1}),100))}const Cp=class{constructor(e,t,i,o,s){this.camera=e,this.object=e,this.domElement=t,this.scene=i,this.movementRestrictionPivotPoint=o,this.floorplan3DThis=s,this.enabled=!0,this.maxDistance=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this._vector=new te.Pa4,this.pointerSpeed=1,this._onMouseMove=cp.bind(this),this._onMouseDown=dp.bind(this),this._onMouseUp=pp.bind(this),this._onTouchStart=up.bind(this),this._onTouchEnd=gp.bind(this),this._onTouchMove=mp.bind(this),this._onKeyDown=fp.bind(this),this._onKeyUp=bp.bind(this),this._onMouseWheel=wp.bind(this),this.shouldMoveForward=!1,this.shouldMoveBackward=!1,this.shouldMoveLeft=!1,this.shouldMoveRight=!1,this.clock=new te.SUY,this.movementSpeed=100,this.previousMouseMoveEventCoords=null,this.state=np,this.rotateStart=new te.FM8,this.rotateEnd=new te.FM8,this.rotateDelta=new te.FM8,this.rotateSpeed=1,this.thetaDelta=0,this.phiDelta=0,this.rotationScale=1,this.dollyStart=new te.FM8,this.dollyEnd=new te.FM8,this.dollyDelta=new te.FM8,this.mouseMoved=!1,this.touchMoved=!1,this.circleNavigator=null,this.cameraPositionAnimationDurationMs=500,this.isUserScrolling=null,this.domElement.addEventListener("mousemove",this._onMouseMove),this.domElement.addEventListener("mousedown",this._onMouseDown),this.domElement.addEventListener("mouseup",this._onMouseUp),this.domElement.addEventListener("touchstart",this._onTouchStart),this.domElement.addEventListener("touchend",this._onTouchEnd),this.domElement.addEventListener("touchmove",this._onTouchMove),this.domElement.addEventListener("wheel",this._onMouseWheel),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("keyup",this._onKeyUp)}setEnabledStatus(e){this.enabled=e}getEnabledStatus(){return this.enabled}resetState(){this.state=np}dispose(){this.domElement.removeEventListener("mousemove",this._onMouseMove),this.domElement.removeEventListener("mousedown",this._onMouseDown),this.domElement.removeEventListener("mouseup",this._onMouseUp),this.domElement.removeEventListener("touchstart",this._onTouchStart),this.domElement.removeEventListener("touchend",this._onTouchEnd),this.domElement.removeEventListener("touchmove",this._onTouchMove),this.domElement.removeEventListener("wheel",this._onMouseWheel),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp)}getObject(){return this.camera}getDirection(e){return e.set(0,0,-1).applyQuaternion(this.camera.quaternion)}createCircleNavigator(e){if(!this.circleNavigator){this.circleNavigator=new te.ZAu;const t=this.floorplan3DThis.props.mainComponentThis.meter/2,i=.9*t,o=32;this.circleNavigator.add(new te.Kj0(new te.zf8(i,o),new te.vBJ({color:16777215,transparent:!0,opacity:.2}))),this.circleNavigator.add(new te.blk(new te.o8S(i,t,o),new te.nls({color:16777215}))),this.circleNavigator.children.forEach((e=>{e.isMesh=!0,e.rotation.x=-Math.PI/2})),this.moveCircleNavigatorToPosition(e),this.scene.add(this.circleNavigator)}}disposeCircleNavigator(){this.circleNavigator&&(this.circleNavigator.children.forEach((e=>{this.scene.remove(this.circleNavigator),xo(e)})),this.circleNavigator=null)}moveCircleNavigatorToPosition(e){this.circleNavigator.children.forEach((t=>t.position.set(e.x,this.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D().floorNumber,!0)+this.floorplan3DThis.sensorHeatmapFloorOffset+1,e.z)))}updateCircleNavigator(e,t,i){this.state===np&&(e||t.length>0||!i||!i[0]?this.disposeCircleNavigator():(i=i[0],this.circleNavigator?this.moveCircleNavigatorToPosition(i.point):this.createCircleNavigator(i.point)))}isCameraPositionValid(e){return!this.movementRestrictionPivotPoint||Xi(e,this.movementRestrictionPivotPoint)<this.maxDistance}updateFloorplanNavigation(){const e=To(this.camera);this.floorplan3DThis.floorplanNavigationRef.current.setCircleNavigatorPosition(new te.FM8(this.camera.position.x,this.camera.position.z).divideScalar(this.floorplan3DThis.scaleFactor),e)}moveCameraToPositionWithAnimation(e){let t=null;const i=this.camera.position.clone(),o=s=>{sp.log("updateCameraPosition"),t||(t=s);const n=s-t;if(n>=this.cameraPositionAnimationDurationMs)this.camera.position.copy(e),this.updateFloorplanNavigation(),this.domElement.dispatchEvent(new Event("cameraMoved"));else{const t=n/this.cameraPositionAnimationDurationMs;this.camera.position.lerpVectors(i,e,t),this.updateFloorplanNavigation(),requestAnimationFrame(o)}};requestAnimationFrame(o)}moveToCircleNavigatorPosition(){if(!this.circleNavigator)return;const e=this.circleNavigator.children[0].position,t=new te.Pa4(e.x,this.camera.position.y,e.z);this.isCameraPositionValid(t)&&this.moveCameraToPositionWithAnimation(t)}handleFloorplanNavigationClick(e){const t=new te.Pa4(e.x*this.floorplan3DThis.scaleFactor,this.camera.position.y,e.y*this.floorplan3DThis.scaleFactor);this.moveCameraToPositionWithAnimation(t)}isCameraPositionDistanceShiftValid(e,t){e.applyQuaternion(this.camera.quaternion);const i=this.camera.position.clone().add(e.multiplyScalar(t));return this.isCameraPositionValid(i)}moveForwardBackward(e){this.isCameraPositionDistanceShiftValid(new te.Pa4(0,0,1),e)&&(this.camera.translateZ(e),this.updateFloorplanNavigation(),this.domElement.dispatchEvent(new Event("cameraMoved")))}moveLeftRight(e){this.isCameraPositionDistanceShiftValid(new te.Pa4(1,0,0),e)&&(this.camera.translateX(e),this.updateFloorplanNavigation(),this.domElement.dispatchEvent(new Event("cameraMoved")))}makeRotation(){this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.thetaDelta+=2*Math.PI*this.rotateDelta.x/this.domElement.clientWidth*this.rotateSpeed,this.phiDelta+=2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight*this.rotateSpeed,this.rotateStart.copy(this.rotateEnd);const e=new te.Pa4;this.camera.getWorldDirection(e);const t=new te.Pa4;t.copy(this.camera.position).add(e);let i=this.camera.position.clone().sub(t);var o=Math.atan2(i.x,i.z),s=Math.atan2(Math.sqrt(i.x*i.x+i.z*i.z),i.y);o+=this.thetaDelta,s+=this.phiDelta,s=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,s)),s=Math.max(hp,Math.min(Math.PI-hp,s));const n=i.length()*this.rotationScale;i.x=n*Math.sin(s)*Math.sin(o),i.y=n*Math.cos(s),i.z=n*Math.sin(s)*Math.cos(o),this.camera.position.copy(t).add(i),this.camera.lookAt(t),this.updateFloorplanNavigation(),this.thetaDelta=0,this.phiDelta=0,this.domElement.dispatchEvent(new Event("cameraMoved"))}animate(){if(!0===this.enabled){const e=this.clock.getDelta();this.shouldMoveForward&&this.moveForwardBackward(-e*this.movementSpeed),this.shouldMoveBackward&&this.moveForwardBackward(e*this.movementSpeed),this.shouldMoveLeft&&this.moveLeftRight(-e*this.movementSpeed),this.shouldMoveRight&&this.moveLeftRight(e*this.movementSpeed)}}};class xp extends o.Component{constructor(){super(),this.getShowWallSwitchState=()=>this.state.wallsVisible,this.getFrontWallsSwitchState=()=>this.state.frontWallsVisible,this.showFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].hideWall=!1,this.state.frontWallsVisible?e[t].setWallPlanesObjectsVisibility(!0):e[t].updateFrontWallVisibility()},this.hideFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].hideWall=!0,e[t].setWallPlanesObjectsVisibility(!1)},this.onWallVisibilityChange=()=>{const e=this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus();this.state.wallsVisible?(this.hideFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.hideFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)):(this.showFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.showFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)),this.setState({wallsVisible:!this.state.wallsVisible})},this.showFrontFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].callUpdateFrontWallVisibility=!1,this.state.wallsVisible&&e[t].setWallPlanesObjectsVisibility(!0)},this.hideFrontFloorplanWalls=e=>{for(let t=0;t<e.length;t++)e[t].callUpdateFrontWallVisibility=!0,e[t].updateFrontWallVisibility()},this.onFrontWallVisibilityChange=()=>{const e=this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus();this.state.frontWallsVisible?(this.hideFrontFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.hideFrontFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)):(this.showFrontFloorplanWalls(this.props.mainComponentThis.currentWalls3D),e&&this.showFrontFloorplanWalls(this.props.mainComponentThis.floorplanViewWalls3D)),this.setState({frontWallsVisible:!this.state.frontWallsVisible})},this.state={frontWallsVisible:!0,wallsVisible:!0},this.onWallVisibilityChange=this.onWallVisibilityChange.bind(this),this.onFrontWallVisibilityChange=this.onFrontWallVisibilityChange.bind(this),this.getShowWallSwitchState=this.getShowWallSwitchState.bind(this),this.getFrontWallsSwitchState=this.getFrontWallsSwitchState.bind(this),this.showFloorplanWalls=this.showFloorplanWalls.bind(this),this.hideFloorplanWalls=this.hideFloorplanWalls.bind(this),this.showFrontFloorplanWalls=this.showFrontFloorplanWalls.bind(this),this.hideFrontFloorplanWalls=this.hideFrontFloorplanWalls.bind(this)}render(){return(0,l.jsxs)("li",{children:[(0,l.jsxs)("div",{className:"panel-option-container",children:[(0,l.jsxs)("div",{className:"option-name-note-container",children:[(0,l.jsx)("div",{children:"SHOW WALLS"}),(0,l.jsx)("div",{children:(0,l.jsx)(ss,{indoorPanelExplanationBox:this.props.panelInfoExplanationBox,infoText:"Show floorplan walls"})})]}),(0,l.jsx)("div",{children:(0,l.jsx)(Ys.Z,{checked:this.state.wallsVisible,onChange:this.onWallVisibilityChange})})]}),(0,l.jsxs)("div",{className:"panel-option-container",children:[(0,l.jsxs)("div",{className:"option-name-note-container",children:[(0,l.jsx)("div",{children:"FRONT WALLS"}),(0,l.jsx)("div",{children:(0,l.jsx)(ss,{indoorPanelExplanationBox:this.props.panelInfoExplanationBox,infoText:"Show or hide front walls on camera movement"})})]}),(0,l.jsx)("div",{children:(0,l.jsx)(Ys.Z,{checked:this.state.frontWallsVisible,onChange:this.onFrontWallVisibilityChange})})]})]})}}const yp=xp;var Sp=i(3649);class _p extends o.Component{constructor(){super(),this.getWallsOpacityValue=()=>this.state.wallsOpacity,this.onWallsOpacitySliderChange=(e,t)=>{this.setState({wallsOpacity:t})},this.onWallsOpacitySliderMouseUp=()=>{this.props.mainComponentThis.changeWallMaterialOpacity(this.props.mainComponentThis.currentWalls3D,this.state.wallsOpacity),this.props.mainComponentThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.mainComponentThis.changeWallMaterialOpacity(this.props.mainComponentThis.floorplanViewWalls3D,this.state.wallsOpacity)},this.state={wallsOpacity:100,isVisible:!1},this.getWallsOpacityValue=this.getWallsOpacityValue.bind(this),this.onWallsOpacitySliderChange=this.onWallsOpacitySliderChange.bind(this),this.onWallsOpacitySliderMouseUp=this.onWallsOpacitySliderMouseUp.bind(this)}render(){return(0,l.jsx)(xs,{containerClasses:"slider-form-group",containerStyle:{textAlign:"center",marginBottom:0},label:"Walls opacity",labelStyle:{margin:0},children:(0,l.jsx)(Sp.Z,{getAriaLabel:()=>"Walls opacity",getAriaValueText:e=>"".concat(e,"%"),valueLabelFormat:e=>"".concat(e,"%"),value:this.state.wallsOpacity,onChange:this.onWallsOpacitySliderChange,onChangeCommitted:this.onWallsOpacitySliderMouseUp,valueLabelDisplay:"auto",min:0,max:100,step:1})})}}const Dp=_p;class vp extends o.Component{constructor(){super(),this.setBindedFixedObjectsPanelItems=(e,t,i)=>{this.panelItems=this.panelItems.filter((e=>!i.includes(e.type)));const o=this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?t:e;for(let s=0;s<o.length;s++)if(this.props.floorplan3DThis.isFloorplanItemMeshBinded(o[s].mesh)){this.panelItems.push({type:o[s].mesh.type,object3D:o[s].mesh,object2D:o[s].mesh.object2D,...this.props.floorplan3DThis.getPanelItemProperties(o[s].mesh,!0)});let e=this.props.floorplan3DThis.objectConnectorsArray.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===o[s].mesh[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));e?!e.bindedObjects.find((e=>e.object2D.id===o[s].mesh.object2D.id))&&e.addBindedObject(o[s].mesh):this.props.floorplan3DThis.objectConnectorsArray.push(new Er(this.props.floorplan3DThis,[o[s].mesh],this.props.floorplan3DThis.getObjectConnectorParamsData(o[s].mesh[this.props.mainComponentThis.connectorIDbinderIDPropertyName],o[s].mesh.object2D)))}this.forceUpdate()},this.setBindedUnfixedObjectsPanelItems=(e,t,i)=>{const o=this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()?t:e;this.panelItems=this.panelItems.filter((e=>!i.includes(e.type)));for(let s=0;s<o.length;s++)this.props.floorplan3DThis.isFloorplanItemMeshBinded(o[s].mesh)&&this.panelItems.push({type:o[s].mesh.type,object3D:o[s].mesh,object2D:o[s].mesh.object2D,...this.props.floorplan3DThis.getPanelItemProperties(o[s].mesh,!1)});this.forceUpdate()},this.setDoorsWindowsSwitches=()=>this.setBindedFixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isDoorObject(e.object2D.type)||this.props.mainComponentThis.isWindowObject(e.object2D.type))),this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isDoorObject(e.object2D.type)||this.props.mainComponentThis.isWindowObject(e.object2D.type))),["door","window"]),this.setLightsSwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewLights,...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isLightObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentViewLights,...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isLightObject(e.object2D.type)))],["light"])},this.setFansSwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewFans,...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isFanObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentViewFans,...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isFanObject(e.object2D.type)))],["fan"])},this.setCoverSwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewCovers,...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isCoverObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentViewCovers,...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isCoverObject(e.object2D.type)))],["cover"])},this.setPresenceBinarySwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewPresenceBinarys,...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isPresenceBinaryObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentViewPresenceBinarys,...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isPresenceBinaryObject(e.object2D.type)))],["presence_binary"])},this.setHVACSwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewHVACs,...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isHVACObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentViewHVACs,...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isHVACObject(e.object2D.type)))],["hvac"])},this.setChristmasTreeLightsSwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewFurniture.filter((e=>this.props.mainComponentThis.isChristmasTreeObject(e.object2D.type))),...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isChristmasTreeObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentFurniture.filter((e=>this.props.mainComponentThis.isChristmasTreeObject(e.object2D.type))),...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isChristmasTreeObject(e.object2D.type)))],["christmas_tree"])},this.setCameraSwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewCameras,...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isCameraObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentViewCameras,...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isCameraObject(e.object2D.type)))],["camera"])},this.setScreenSwitches=()=>{this.setBindedFixedObjectsPanelItems([...this.props.floorplan3DThis.floorplanViewScreens,...this.props.floorplan3DThis.floorplanViewWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isScreenObject(e.object2D.type)))],[...this.props.floorplan3DThis.currentViewScreens,...this.props.floorplan3DThis.currentWalls3D.reduce(((e,t)=>(e.push(...t.inWallItemObjects,...t.onWallItemObjects),e)),[]).filter((e=>this.props.mainComponentThis.isScreenObject(e.object2D.type)))],["screen"])},this.setSensorValues=()=>this.setBindedUnfixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewSensors,this.props.floorplan3DThis.currentViewSensors,["sensor"]),this.setOthersValues=()=>this.setBindedUnfixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewOthers,this.props.floorplan3DThis.currentViewOthers,["other"]),this.setPresenceAreaValues=()=>this.setBindedUnfixedObjectsPanelItems(this.props.floorplan3DThis.floorplanViewPresenceAreas,this.props.floorplan3DThis.currentViewPresenceAreas,["presence_area"]),this.updateFixedBindedObjects=(e,t)=>{const i=this.props.floorplan3DThis.getObjectConnectorParamsDataIDValue(t);this.panelItems.filter((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===i)).forEach((e=>e.value=this.props.floorplan3DThis.getObjectPanelItemValue(e.object3D,!0,t)));let o=[{targetObjects:this.props.floorplan3DThis.floorplan3DViewScene.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,i)}];this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.floorplan3DOnMapScene&&o.push({targetObjects:this.props.floorplan3DThis.floorplan3DOnMapScene.getObjectsByProperty(this.props.mainComponentThis.connectorIDbinderIDPropertyName,i)});for(let s=0;s<e.length;s++)o.forEach((i=>{const o=i.targetObjects.find((t=>t.object2D.id===e[s].object2D.id));o&&o.changeStateMethod(o,t)}));this.forceUpdate()},this.updateUnfixedBindedObjects=e=>{const t=this.props.floorplan3DThis.getObjectConnectorParamsDataIDValue(e);this.panelItems.filter((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t)).forEach((t=>{t.value=this.props.floorplan3DThis.getObjectPanelItemValue(t.object3D,!1,e,t.isNumberValue),this.forceUpdate()}))},this.panelItems=[],this.setDoorsWindowsSwitches=this.setDoorsWindowsSwitches.bind(this),this.setLightsSwitches=this.setLightsSwitches.bind(this),this.setFansSwitches=this.setFansSwitches.bind(this),this.setCoverSwitches=this.setCoverSwitches.bind(this),this.setPresenceBinarySwitches=this.setPresenceBinarySwitches.bind(this),this.setHVACSwitches=this.setHVACSwitches.bind(this),this.setChristmasTreeLightsSwitches=this.setChristmasTreeLightsSwitches.bind(this),this.setCameraSwitches=this.setCameraSwitches.bind(this),this.setScreenSwitches=this.setScreenSwitches.bind(this),this.setSensorValues=this.setSensorValues.bind(this),this.setOthersValues=this.setOthersValues.bind(this),this.setPresenceAreaValues=this.setPresenceAreaValues.bind(this),this.setBindedFixedObjectsPanelItems=this.setBindedFixedObjectsPanelItems.bind(this),this.setBindedUnfixedObjectsPanelItems=this.setBindedUnfixedObjectsPanelItems.bind(this),this.updateFixedBindedObjects=this.updateFixedBindedObjects.bind(this),this.updateUnfixedBindedObjects=this.updateUnfixedBindedObjects.bind(this)}render(){this.panelItems.filter((e=>"door"===e.type)),this.panelItems.filter((e=>"window"===e.type)),this.panelItems.filter((e=>"light"===e.type)),this.panelItems.filter((e=>"fan"===e.type)),this.panelItems.filter((e=>"cover"===e.type)),this.panelItems.filter((e=>"presence_binary"===e.type)),this.panelItems.filter((e=>"hvac"===e.type)),this.panelItems.filter((e=>"christmas_tree"===e.type)),this.panelItems.filter((e=>"camera"===e.type)),this.panelItems.filter((e=>"screen"===e.type)),this.panelItems.filter((e=>"sensor"===e.type)),this.panelItems.filter((e=>"other"===e.type)),this.panelItems.filter((e=>"presence_area"===e.type));return null}}const Tp=vp;class jp extends o.Component{constructor(e){super(),this.onModeChangeClick=(e,t)=>()=>{e.value!==this.state.selectedMode&&(this.state.selectedMode===this.props.floorplan3DThis.editModeValue&&this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null),this.props.floorplan3DThis.selectedUserMode=e.value,this.setState({selectedMode:e.value},(()=>{this.modeSelectorRef.current.style.left=1===t?"50%":"".concat(this.modeControlContainerPaddingLeftRight,"px"),this.props.floorplan3DThis.alertRef.current.showAlert("Switched to ".concat(e.label," Mode."),"success")})))},this.state={selectedMode:e.floorplan3DThis.defaultUserMode},this.modeControlContainerPaddingLeftRight=2,this.modeOptionInfoExplanationBox=o.createRef(),this.modeSelectorRef=o.createRef(),this.onModeChangeClick=this.onModeChangeClick.bind(this)}render(){return(0,l.jsxs)("div",{className:"mode-control-container",children:[$t.map(((e,t)=>(0,l.jsxs)("div",{title:e.title,className:"mode-option ".concat(this.state.selectedMode===e.value?"active":""),onClick:this.onModeChangeClick(e,t),children:[(0,l.jsx)("div",{className:"label",children:(0,l.jsx)("span",{children:e.label})}),(0,l.jsx)(ss,{infoText:e.infoText,infoContainerStyles:{marginLeft:2},indoorPanelExplanationBox:this.modeOptionInfoExplanationBox})]},e.label))),(0,l.jsx)("div",{ref:this.modeSelectorRef,className:"mode-selector"}),(0,l.jsx)("div",{ref:this.modeOptionInfoExplanationBox,className:"mode-option-info-explanation-box"})]})}}const Op=jp;class Ip extends o.Component{render(){return(0,l.jsx)("svg",{fill:"#000000",viewBox:"0 0 492.589 492.589",children:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{d:"M468.467,222.168h-28.329c-9.712-89.679-80.46-161.18-169.71-172.258V24.135c0-13.338-10.791-24.134-24.134-24.134\r\nc-13.311,0-24.117,10.796-24.117,24.134V49.91C132.924,60.988,62.177,132.488,52.482,222.168H24.153\r\nC10.806,222.168,0,232.964,0,246.286c0,13.336,10.806,24.132,24.153,24.132h29.228c12.192,86.816,81.551,155.4,168.797,166.229\r\nv31.804c0,13.336,10.806,24.135,24.117,24.135c13.343,0,24.134-10.799,24.134-24.135v-31.804\r\nc87.228-10.829,156.607-79.413,168.775-166.229h29.264c13.33,0,24.122-10.796,24.122-24.132\r\nC492.589,232.964,481.797,222.168,468.467,222.168z M246.294,398.093c-85.345,0-154.804-69.453-154.804-154.813\r\nc0-85.363,69.459-154.813,154.804-154.813c85.376,0,154.823,69.45,154.823,154.813\r\nC401.117,328.639,331.671,398.093,246.294,398.093z"}),(0,l.jsx)("path",{d:"M246.294,176.93c-36.628,0-66.34,29.704-66.34,66.349c0,36.635,29.711,66.349,66.34,66.349\r\nc36.66,0,66.34-29.713,66.34-66.349C312.634,206.635,282.955,176.93,246.294,176.93z"})]})})}}const Pp=Ip;class kp extends o.Component{constructor(){super(),this.setIsMapActiveState=e=>{this.setState({isMapActive:e})},this.setIsFloorplanViewModeActive=e=>this.setState({isFloorplanViewModeActive:e}),this.setCurrentControlsType=e=>{this.props.floorplan3DThis.orbitControlsRotatePanModeSwitchRef.current.setDisableStatus("orbit"!==e),this.setState({currentControlsType:e})},this.state={isMapActive:!1,currentControlsType:"orbit",isFloorplanViewModeActive:!1},this.setIsMapActiveState=this.setIsMapActiveState.bind(this),this.setIsFloorplanViewModeActive=this.setIsFloorplanViewModeActive.bind(this),this.setCurrentControlsType=this.setCurrentControlsType.bind(this)}render(){const{currentControlsType:e,isMapActive:t,isFloorplanViewModeActive:i}=this.state,s=t||i,n=!t&&"orbit"!==e||i;return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("button",{title:"orbit"===this.state.currentControlsType?"First person view":"Dollhouse view",className:"btn btn-default panel-icon-button-container ".concat(s?"disabled":""),onClick:()=>!s&&this.props.floorplan3DThis.onSwitchControlsClick(),children:"orbit"===this.state.currentControlsType?(0,l.jsx)(ga,{}):(0,l.jsx)(ba,{})}),(0,l.jsx)("button",{title:"View floorplan",className:"btn btn-default panel-icon-button-container ".concat(n?"disabled":""),onClick:()=>!n&&this.props.floorplan3DThis.onBirdPerspectiveViewButtonClick(),children:(0,l.jsx)(ma,{})}),(0,l.jsx)("button",{title:"Reset view",className:"btn btn-default panel-icon-button-container",onClick:()=>this.props.floorplan3DThis.onResetCameraViewButtonClick(),children:(0,l.jsx)(Pp,{})})]})}}const Fp=kp;class Mp extends o.Component{constructor(){super(),this.onRoomButtonClick=e=>()=>{const t=yi(e.coordsInsideWithOrphans,this.props.floorplan3DThis.scaleFactor),i=new te.FM8(e.visualCenterCoords.x,e.visualCenterCoords.y).multiplyScalar(this.props.floorplan3DThis.scaleFactor);if(this.props.floorplan3DThis.currentControls===this.props.floorplan3DThis.firstPersonControls||this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus())if(this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()){const e=this.props.mainComponentThis.floorplanGeneral.floorplan_bearing||0,i=((e,t,i,o,s,n,a,r)=>{const l=(i-e)/a,h=(o-t)/a;let c;if(0===l&&0===h)return[n,s];if(0===l)c=h<0?0:180;else if(0===h)c=l>0?90:-90;else{const e=180*Math.atan(Math.abs(h)/Math.abs(l))/Math.PI;c=l>0?h<0?90-e:90+e:h<0?-90+e:-90-e}ui.log("positionBearingDeg "+c);const d=Math.sqrt(Math.pow(l,2)+Math.pow(h,2));return(0,X.Z)(J()([n,s]),d/1e3,Li(r+c)).geometry.coordinates})(this.props.floorplan3DThis.floorplanWallsBoundingBox2DCoordinates.minX,this.props.floorplan3DThis.floorplanWallsBoundingBox2DCoordinates.minY,t.minX/this.props.floorplan3DThis.scaleFactor,t.minY/this.props.floorplan3DThis.scaleFactor,this.props.mainComponentThis.floorplanGeneral.gps_latitude,this.props.mainComponentThis.floorplanGeneral.gps_longitude,this.props.mainComponentThis.meter,e);Vi(this.props.floorplan3DThis._map,Wi(i[1],i[0],(t.maxX-t.minX)/(this.props.floorplan3DThis.scaleFactor*this.props.mainComponentThis.meter),(t.maxY-t.minY)/(this.props.floorplan3DThis.scaleFactor*this.props.mainComponentThis.meter),e),e,20)}else this.props.floorplan3DThis.setFirstPersonControlsCameraPosition(i,To(this.props.floorplan3DThis.firstPersonControlsCamera));else if(this.props.floorplan3DThis.currentControls===this.props.floorplan3DThis.orbitControls){const e=this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.getSelectedFloorplanFloor3D(),o=To(this.props.floorplan3DThis.orbitControlsCamera);this.props.floorplan3DThis.centerBBoxOrbitControlsCamera(t,e.floorHeight*this.props.floorplan3DThis.scaleFactor,i);const s=this.props.mainComponentThis.getFloorStartElevation(e.floorNumber,!0);this.props.floorplan3DThis.orbitControlsCamera.position.y+=s,this.props.floorplan3DThis.orbitControls.target=new te.Pa4(i.x,s,i.y),this.props.floorplan3DThis.setOrbitControlsBearingAroundTarget(this.props.floorplan3DThis.orbitControlsCamera,this.props.floorplan3DThis.orbitControls.target,o),this.props.floorplan3DThis.orbitControls.update()}},this.setRoomsDropdownListData=e=>this.setState({roomsList:e.map((e=>({...e,visualCenterCoords:this.props.mainComponentThis.qSVG.polygonVisualCenter(e)}))).filter((e=>e.visualCenterCoords))}),this.state={roomsList:[]},this.roomsIconButtonRef=o.createRef(),this.roomsListDropdown=o.createRef(),this.onRoomButtonClick=this.onRoomButtonClick.bind(this),this.setRoomsDropdownListData=this.setRoomsDropdownListData.bind(this)}componentDidMount(){((e,t)=>{t.current.classList.add("dropdown-overflow"),e.current.addEventListener("click",(()=>{t.current.classList.contains("active")?(t.current.classList.remove("active"),t.current.classList.remove("button-active")):(t.current.classList.add("button-active"),t.current.classList.add("active"))})),e.current.addEventListener("mouseenter",(()=>{t.current.classList.add("button-active"),t.current.classList.add("active")})),e.current.addEventListener("mouseleave",(()=>{t.current.classList.remove("active"),setTimeout((()=>{t.current.classList.contains("active")||t.current.classList.remove("button-active")}),500)}));const i=document.createElement("div");i.classList.add("hover-overlay"),i.addEventListener("mouseenter",(()=>{t.current.classList.contains("button-active")&&t.current.classList.add("active")})),e.current.insertAdjacentElement("afterend",i),t.current.addEventListener("mouseenter",(()=>{t.current.classList.contains("button-active")&&t.current.classList.add("active")})),t.current.addEventListener("mouseleave",(()=>{t.current.classList.remove("active"),t.current.classList.remove("button-active")}))})(this.roomsIconButtonRef,this.roomsListDropdown)}render(){const{roomsList:e}=this.state;return(0,l.jsxs)("div",{className:"rooms-camera-scene-control-container",children:[(0,l.jsx)("button",{ref:this.roomsIconButtonRef,title:"Go to room",className:"btn btn-default panel-icon-button-container rooms-action-button",children:(0,l.jsx)(Jn.Z,{})}),(0,l.jsx)("div",{ref:this.roomsListDropdown,className:"rooms-list-dropdown",children:e.length?e.map(((e,t)=>(0,l.jsx)("div",{className:"dropdown-button-container",children:(0,l.jsx)("button",{className:"btn btn-default",onClick:this.onRoomButtonClick(e),children:e.name||"Room ".concat(t)})},t))):(0,l.jsx)("div",{style:{textAlign:"center"},children:"No rooms"})})]})}}const Ap=Mp;class Rp extends o.Component{constructor(){var e;super(),e=this,this.setCheckedStatus=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.setState({checked:t},(()=>!!i&&i()))},this.getCheckedStatus=()=>this.state.checked,this.setDisabledStatus=e=>this.setState({disabled:e}),this.handleBindedObjectsHiglightChange=()=>{this.setState({checked:!this.state.checked},(()=>this.props.onChangeCallback()))},this.state={checked:!1,disabled:!1},this.setCheckedStatus=this.setCheckedStatus.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this),this.setDisabledStatus=this.setDisabledStatus.bind(this),this.handleBindedObjectsHiglightChange=this.handleBindedObjectsHiglightChange.bind(this)}render(){return(0,l.jsx)("button",{title:"Highlight binded objects",className:"btn btn-default panel-icon-button-container ".concat(this.state.disabled?"disabled":""," ").concat(this.state.checked?"active":""),onClick:()=>!this.state.disabled&&this.handleBindedObjectsHiglightChange(),children:(0,l.jsx)(Ca,{})})}}const Lp=Rp;var Bp=i(2174);class Wp extends o.Component{constructor(){super(),this.handleHighlightClickableChange=()=>{this.state.higlightEnabled||this.setState({higlightEnabled:!0},(()=>{this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.setDisabledStatus(!0);const e=this.props.floorplan3DThis.getActiveScenes().map((e=>({scene:e,floorplanClickableMeshes:e.getObjectsByProperty("isFloorplanItem",!0).filter((e=>this.props.floorplan3DThis.isFloorplanItemMeshBinded(e)&&e.changeStateOnClick))})));e.forEach((e=>e.floorplanClickableMeshes.forEach((e=>e.changeStateOnClick&&e.itemObject.setHighlightColor&&e.itemObject.highlightClickableColor())))),setTimeout((()=>{e.forEach((e=>e.floorplanClickableMeshes.forEach((e=>e.itemObject.resetHighlightColor&&e.itemObject.resetHighlightColor())))),this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.setDisabledStatus(!1),this.props.floorplan3DThis.bindedObjectsHighlightInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.highlightBindedObjects(),this.setState({higlightEnabled:!1})}),this.highlightIntervalMs)}))},this.handleShowOnlyClickableChange=()=>{this.props.floorplan3DThis.getActiveScenes().forEach((e=>{e.getObjectsByProperty("isFloorplanItem",!0).forEach((e=>{this.props.floorplan3DThis.isFloorplanItemMeshBinded(e)&&e.changeStateOnClick||(e.visible=this.state.showOnlyClickable)}))})),this.setState({showOnlyClickable:!this.state.showOnlyClickable})},this.isShowOnlyClickableObjectsActive=()=>this.state.showOnlyClickable,this.state={higlightEnabled:!1,showOnlyClickable:!1},this.highlightIntervalMs=3e3,this.handleHighlightClickableChange=this.handleHighlightClickableChange.bind(this),this.handleShowOnlyClickableChange=this.handleShowOnlyClickableChange.bind(this),this.isShowOnlyClickableObjectsActive=this.isShowOnlyClickableObjectsActive.bind(this)}render(){return(0,l.jsxs)("div",{className:"clickable-objects-scene-control-container",children:[(0,l.jsx)("button",{title:"Clickable objects",className:"btn btn-default panel-icon-button-container ".concat(this.state.higlightEnabled?"active":""),children:(0,l.jsx)(Bp.Z,{})}),(0,l.jsxs)("div",{className:"clickable-objects-dropdown toggle-on-hover",children:[(0,l.jsx)("div",{className:"dropdown-button-container",children:(0,l.jsx)("button",{className:"btn btn-default",onClick:this.handleHighlightClickableChange,children:"Highlight"})}),(0,l.jsx)("div",{className:"dropdown-button-container",children:(0,l.jsx)("button",{className:"btn btn-default ".concat(this.state.showOnlyClickable?"active-button":""),onClick:this.handleShowOnlyClickableChange,children:"Show only"})})]})]})}}const Vp=Wp;class Np extends o.Component{constructor(e){super(),this.setIsMapActiveState=e=>{this.setState({isMapActive:e})},this.onActiveSensorHeatmapChange=e=>()=>{const t=this.state.activeSensorHeatmap&&this.state.activeSensorHeatmap.heatmapName===e.heatmapName?null:e;t?this.props.floorplan3DThis.renderSensorHeatmap(e,this.props.floorplan3DThis.floorplan3DViewScene):this.props.floorplan3DThis.removeSensorHeatmap(this.props.floorplan3DThis.floorplan3DViewScene),this.setState({activeSensorHeatmap:t})},this.getActiveSensorHeatmap=()=>this.state.activeSensorHeatmap,this.setDropdownListData=e=>{const t=this.props.floorplan3DThis.getAvailableSensorUnitsData(),i=this.props.mainComponentThis.sensorHeatmapLastSavedData.filter((e=>!e.isUnitHeatmap||t.find((t=>t.measurementUnit===e.heatmapName))));let o=this.state.activeSensorHeatmap;o&&(o=i.find((e=>o.isUnitHeatmap?e.isUnitHeatmap&&e.heatmapName===o.heatmapName:e.heatmapName===o.heatmapName)),o||this.props.floorplan3DThis.removeSensorHeatmap(this.props.floorplan3DThis.floorplan3DViewScene)),this.setState({sensorsHeatmapData:i,activeSensorHeatmap:o},(()=>e&&e()))},this.onSensorsHeatmapIconClick=()=>{this.sensorHeatmapDropdownRef.current.classList.toggle("active"),this.sensorHeatmapDropdownRef.current.classList.contains("active")?this.props.floorplan3DThis.sceneControlDropdownEventListenersHandler("add",this.sensorsHeatmapDropdownOutsideClickCheckHandler):this.props.floorplan3DThis.sceneControlDropdownEventListenersHandler("remove",this.sensorsHeatmapDropdownOutsideClickCheckHandler)},this.state={isMapActive:!1,sensorsHeatmapData:[],activeSensorHeatmap:null},this.sensorHeatmapIconButtonRef=o.createRef(),this.sensorHeatmapDropdownRef=o.createRef(),this.setIsMapActiveState=this.setIsMapActiveState.bind(this),this.onActiveSensorHeatmapChange=this.onActiveSensorHeatmapChange.bind(this),this.getActiveSensorHeatmap=this.getActiveSensorHeatmap.bind(this),this.setDropdownListData=this.setDropdownListData.bind(this),this.onSensorsHeatmapIconClick=this.onSensorsHeatmapIconClick.bind(this),this.sensorsHeatmapDropdownOutsideClickCheckHandler=e.floorplan3DThis.createSceneControlDropdownOutsideClickCheck(this.sensorHeatmapDropdownRef,this.sensorHeatmapIconButtonRef,this.onSensorsHeatmapIconClick)}render(){const{sensorsHeatmapData:e,activeSensorHeatmap:t}=this.state;return(0,l.jsx)(Es.Z,{theme:Xs,children:(0,l.jsxs)("div",{className:"sensors-heatmap-scene-control-container",style:{display:e.length?"block":"none"},children:[(0,l.jsx)("button",{ref:this.sensorHeatmapIconButtonRef,title:"Draw sensors heatmap",className:"btn btn-default panel-icon-button-container sensors-heatmap-button ".concat(t?"active":""," ").concat(this.state.isMapActive?"disabled":""),onClick:()=>!this.state.isMapActive&&this.onSensorsHeatmapIconClick(),children:(0,l.jsx)(ya,{})}),(0,l.jsx)("div",{ref:this.sensorHeatmapDropdownRef,className:"sensors-heatmap-dropdown toggle-on-click",children:e.length?e.map(((e,i)=>(0,l.jsxs)("div",{className:"heatmap-switch-container",children:[(0,l.jsx)("div",{className:"label-container",children:e.heatmapName}),(0,l.jsx)("div",{children:(0,l.jsx)(Ys.Z,{checked:!!t&&e.heatmapName===t.heatmapName,onChange:this.onActiveSensorHeatmapChange(e)})})]},i))):(0,l.jsx)("div",{style:{textAlign:"center"},children:"No heatmaps"})})]})})}}const Ep=Np;class Hp extends o.Component{constructor(){super(),this.setFloorplanFloors3DData=(e,t)=>this.setState({floorplanFloors3D:e},(()=>t&&t())),this.setSelectedFloorplanFloor3D=(e,t)=>this.setState({selectedFloor3D:e},(()=>{this.updateFloorplanItemsInteraction(),this.updateIntersectionGroundPosition(),this.props.floorplan3DThis.centerFloorFirstPersonControlsCamera(),this.props.floorplan3DThis.floorplanNavigationRef.current.setActiveFloorLegend(),this.props.floorplan3DThis.roomCameraControlsRef.current.setRoomsDropdownListData(this.state.selectedFloor3D.roomData),t&&t()})),this.getSelectedFloorplanFloor3D=()=>this.state.selectedFloor3D,this.updateFloorplanItemsInteraction=()=>{this.props.floorplan3DThis.userInteractionCurrentController.removeItemBinder(),this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null);this.props.floorplan3DThis.getActiveScenes().forEach((e=>{const t=e.getObjectsByProperty("isFloorplanItem",!0);for(let i=0;i<t.length;i++)t[i].itemObject.disabled=t[i].itemObject.floorNumber!==this.state.selectedFloor3D.floorNumber}))},this.updateIntersectionGroundPosition=()=>{let e=[this.props.floorplan3DThis.floorplanViewUserInteractionController];this.props.floorplan3DThis.showMapLayer3DInputRef.current.getCheckedStatus()&&this.props.floorplan3DThis.floorplan3DOnMapScene&&e.push(this.props.floorplan3DThis.floorplanOnMapUserInteractionController);const t=this.props.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.state.selectedFloor3D.floorNumber,!0);e.forEach((e=>e.intersectionGround.position.y=t))},this.calculateFirstPersonControlsCameraPositionY=()=>this.state.selectedFloor3D?(this.props.floorplan3DThis.props.mainComponentThis.getFloorStartElevation(this.state.selectedFloor3D.floorNumber)+this.state.selectedFloor3D.floorHeight/2)*this.props.floorplan3DThis.scaleFactor:0,this.onFloorplanFloor3DClick=e=>()=>{this.state.selectedFloor3D.floorNumber!==e.floorNumber&&this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.onFloorplanFloorClick(this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsData.find((t=>t.floorNumber===e.floorNumber)))()},this.handleFloorplanFloor3DChange=e=>{const t=this.state.selectedFloor3D,i=this.props.floorplan3DThis.props.mainComponentThis.floorplanFloorsData.find((e=>e.floorNumber===t.floorNumber)),o=this.props.floorplan3DThis.floorplanFloors.find((t=>t.floorNumber===e));this.setState({selectedFloor3D:o},(()=>{this.props.floorplan3DThis.updateSelectedFloor3DObject2DReferences(o),t.objData=this.props.floorplan3DThis.filterFurnitureObjData(i.objData).map((e=>{const t=this.props.floorplan3DThis.props.mainComponentThis.createObj2DClassInstanceFromObj(e);return t.update(this.props.floorplan3DThis.props.mainComponentThis),t})),this.props.floorplan3DThis.redrawFloorplanFloorItems(t),this.updateFloorplanItemsInteraction(),this.updateIntersectionGroundPosition(),this.props.floorplan3DThis.centerFloorFirstPersonControlsCamera(),this.props.floorplan3DThis.floorplanNavigationRef.current.setActiveFloorLegend(),this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((e=>e.floorID===o.floorID))&&this.onShowFloor3DClick(o)(),this.props.floorplan3DThis.roomCameraControlsRef.current.setRoomsDropdownListData(this.state.selectedFloor3D.roomData)}))},this.onHideFloor3DClick=e=>()=>{this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.push(e),this.props.floorplan3DThis.setFloorplanFloorItemsVisibility(e.floorNumber,!1),this.forceUpdate()},this.onShowFloor3DClick=e=>()=>{this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D=this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.filter((t=>t.floorID!==e.floorID)),this.props.floorplan3DThis.setFloorplanFloorItemsVisibility(e.floorNumber,!0),this.forceUpdate()},this.setIsFloorSwitchingDisabled=e=>this.setState({isFloorSwitchingDisabled:e}),this.state={floorplanFloors3D:[],selectedFloor3D:null,isFloorSwitchingDisabled:!1},this.setFloorplanFloors3DData=this.setFloorplanFloors3DData.bind(this),this.setSelectedFloorplanFloor3D=this.setSelectedFloorplanFloor3D.bind(this),this.getSelectedFloorplanFloor3D=this.getSelectedFloorplanFloor3D.bind(this),this.updateFloorplanItemsInteraction=this.updateFloorplanItemsInteraction.bind(this),this.updateIntersectionGroundPosition=this.updateIntersectionGroundPosition.bind(this),this.calculateFirstPersonControlsCameraPositionY=this.calculateFirstPersonControlsCameraPositionY.bind(this),this.handleFloorplanFloor3DChange=this.handleFloorplanFloor3DChange.bind(this),this.onFloorplanFloor3DClick=this.onFloorplanFloor3DClick.bind(this),this.onHideFloor3DClick=this.onHideFloor3DClick.bind(this),this.onShowFloor3DClick=this.onShowFloor3DClick.bind(this),this.setIsFloorSwitchingDisabled=this.setIsFloorSwitchingDisabled.bind(this)}render(){const{floorplanFloors3D:e,selectedFloor3D:t,isFloorSwitchingDisabled:i}=this.state;return(0,l.jsx)("div",{children:t&&(0,l.jsx)("div",{className:"floorplan-floors-buttons-container",children:e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((e=>(0,l.jsxs)("div",{className:"panel-option-container",children:[(0,l.jsxs)("div",{className:"option-name-note-container",children:[(0,l.jsxs)("button",{title:"Floor ".concat(e.floorNumber),className:"option-button btn ".concat(t.floorNumber===e.floorNumber?"btn-active":""," ").concat(i?"disabled":""),style:{margin:"5px 0"},onClick:()=>!i&&this.onFloorplanFloor3DClick(e)(),children:[(0,l.jsx)("span",{className:"label-span",children:"Floor\xa0"}),(0,l.jsx)("span",{children:e.floorNumber})]}),(0,l.jsx)("div",{className:"floor-info",children:(0,l.jsx)(ss,{indoorPanelExplanationBox:this.props.floorplan3DThis.panelInfoExplanationBox,infoText:lo(e)})})]}),(0,l.jsx)("button",{className:"btn btn-default action-icon-button ".concat(t.floorNumber===e.floorNumber?"disabled":""),children:this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))?(0,l.jsx)(Xn.Z,{className:"view-3d-visibility-icon",title:"Show floor",onClick:t.floorNumber!==e.floorNumber?this.onShowFloor3DClick(e):void 0}):(0,l.jsx)(Yn.Z,{className:"view-3d-visibility-icon",title:"Hide floor",onClick:t.floorNumber!==e.floorNumber?this.onHideFloor3DClick(e):void 0})})]},e.floorNumber)))})})}}const zp=Hp;class Gp extends o.Component{constructor(){super(),this.setFloorplanFloors3DData=(e,t)=>this.setState({floorplanFloors3D:e},(()=>t&&t())),this.setSelectedFloorplanFloor3D=(e,t)=>this.setState({selectedFloor3D:e},(()=>{this.updateFloorplanFloorsVisibility(e.floorNumber),t&&t()})),this.updateFloorplanFloorsVisibility=e=>{const t=this.state.floorplanFloors3D.filter((t=>t.floorNumber>e)),i=this.state.floorplanFloors3D.filter((t=>t.floorNumber<=e));t.forEach((e=>!this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))&&this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onHideFloor3DClick(e)())),i.forEach((e=>this.props.floorplan3DThis.props.mainComponentThis.hiddenFloorplanFloors3D.find((t=>t.floorID===e.floorID))&&this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onShowFloor3DClick(e)()))},this.onFloorplanFloor3DClick=e=>()=>{this.state.selectedFloor3D.floorNumber!==e.floorNumber&&(this.updateFloorplanFloorsVisibility(e.floorNumber),this.props.floorplan3DThis.floorplanFloorsPanelSelection3DRef.current.onFloorplanFloor3DClick(e)(),this.setState({selectedFloor3D:e}))},this.setIsFloorSwitchingDisabled=e=>this.setState({isFloorSwitchingDisabled:e}),this.state={floorplanFloors3D:[],selectedFloor3D:null,isFloorSwitchingDisabled:!1},this.setFloorplanFloors3DData=this.setFloorplanFloors3DData.bind(this),this.setSelectedFloorplanFloor3D=this.setSelectedFloorplanFloor3D.bind(this),this.onFloorplanFloor3DClick=this.onFloorplanFloor3DClick.bind(this),this.updateFloorplanFloorsVisibility=this.updateFloorplanFloorsVisibility.bind(this),this.setIsFloorSwitchingDisabled=this.setIsFloorSwitchingDisabled.bind(this)}render(){const{floorplanFloors3D:e,selectedFloor3D:t,isFloorSwitchingDisabled:i}=this.state;return(0,l.jsx)("div",{className:"scene-control-tools-container floors-selection scene-control",children:t&&e.length>1&&e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((e=>(0,l.jsx)("button",{title:"Floor ".concat(e.floorNumber),className:"btn btn-default panel-icon-button-container ".concat(t.floorNumber===e.floorNumber?"active":"","  ").concat(i?"disabled":""),onClick:()=>!i&&this.onFloorplanFloor3DClick(e)(),children:(0,l.jsx)("div",{className:"floor-number-container",children:e.floorNumber})},e.floorNumber)))})}}const Up=Gp;var qp=i(7747),Kp=i(1095),Yp=i(6302),Xp=i(7243);class Zp extends o.Component{render(){return(0,l.jsxs)("div",{className:"palette-color-container",children:[(0,l.jsxs)("div",{className:"content-container",children:[(0,l.jsx)(js,{containerStyle:{marginBottom:"0.5rem",justifyContent:"space-between"},label:this.props.valueFormItem.label,value:this.props.valueFormItem.value,labelClasses:"label-form-control-cancel",item:this.props.valueFormItem,error:this.props.valueFormItem.error,onChange:this.props.onChange}),(0,l.jsx)(js,{containerStyle:{margin:0,justifyContent:"space-between"},colorPickerBoxContainer:this.props.getColoringBox(),isColorInput:!0,label:this.props.colorFormItem.label,labelClasses:"label-form-control-cancel",item:this.props.colorFormItem,error:this.props.colorFormItem.error,onChange:this.props.onChange})]}),this.props.isRemovable&&(0,l.jsx)("div",{className:"options-container",children:this.props.isRemovable&&(0,l.jsx)("div",{title:"Delete color",className:"action-icon-container svg-center-inside-container",onClick:this.props.onDeletePaletteColorClick,children:(0,l.jsx)(Kp.Z,{})})})]})}}const Jp=Zp;var Qp=i(1317);class $p extends o.Component{constructor(e){super(),this.onAddIntermediateColorClick=()=>{this.props.addIntermediateColor(this.props.colorPaletteFormItem,this.intermediateColorsCount),this.intermediateColorsCount++},this.getMinMaxColorPaletteData=()=>({minValue:this.props.colorPaletteFormItem.find((e=>e.field.includes("min_value"))),minColor:this.props.colorPaletteFormItem.find((e=>e.field.includes("min_color"))),maxValue:this.props.colorPaletteFormItem.find((e=>e.field.includes("max_value"))),maxColor:this.props.colorPaletteFormItem.find((e=>e.field.includes("max_color")))}),this.paletteColorsValidation=()=>{const{minValue:e,minColor:t,maxValue:i,maxColor:o}=this.getMinMaxColorPaletteData(),s=[e,t,i,o];let n=!0;for(let h=0;h<s.length;h++)s[h].error="",s[h].validate(s[h].value)&&(s[h].error=s[h].validate(s[h].value),n=!1);const a=this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value;if(a.forEach((e=>{e.form[0].error="",e.form[1].error=""})),!n)return n;Qp.log(e),Qp.log(i);const r=parseFloat(e.value),l=parseFloat(i.value);if(r>=l)return n=!1,e.error="Min value must be less than max",n;for(let h=0;h<a.length;h++)if(a[h].form[1].validate(a[h].form[1].value)&&(a[h].form[1].error=a[h].form[1].validate(a[h].form[1].value),n=!1),a[h].form[0].validate(a[h].form[0].value))a[h].form[0].error=a[h].form[0].validate(a[h].form[0].value),n=!1;else{const e=parseFloat(a[h].form[0].value);if(e>r&&e<l){const t=a[h-1],i=a[h+1];t&&e<=parseFloat(t.form[0].value)?(a[h].form[0].error="Value must be greater than predecessor value",Qp.log("Invalid 3"),n=!1):i&&e>=parseFloat(i.form[0].value)&&(a[h].form[0].error="Value must be less than successor value",Qp.log("Invalid 4"),n=!1)}else a[h].form[0].error="Value must be between min and max",Qp.log("Invalid 2"),n=!1}return n},this.updateColorPalette=()=>{if(Qp.log("updateColorPalette",this.paletteColorsIsValid),this.colorPaletteCanvas&&this.colorPaletteCanvas.current){const e=30,t=this.formContainerRef.current.offsetHeight;if(this.paletteColorsIsValid){this.colorPaletteCanvas.current.width=e,this.colorPaletteCanvas.current.height=t,this.paletteContainerRef.current.style.height=t+"px";const i=document.createElement("canvas");i.width=e,i.height=t;const o=i.getContext("2d"),s=o.createLinearGradient(e/2,this.props.reverseColorOrder?t:0,e/2,this.props.reverseColorOrder?0:t),n=this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value,{minValue:a,minColor:r,maxValue:l,maxColor:h}=this.getMinMaxColorPaletteData();let c={0:r.value};n.forEach((e=>{Qp.log((e.form[0].value-a.value)/(l.value-a.value)),c[(e.form[0].value-a.value)/(l.value-a.value)]=e.form[1].value})),c["1.0"]=h.value;for(const e in c)s.addColorStop(e,c[e]);Qp.log("canvasLinearGradientColorStops",c),o.fillStyle=s,o.fillRect(0,0,e,t);const d=this.colorPaletteCanvas.current.getContext("2d");d.fillStyle=s,d.fillRect(0,0,e,t)}else{this.colorPaletteCanvas.current.getContext("2d").clearRect(0,0,e,t)}}},this.intermediateColorsCount=e.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value.length,this.paletteColorsIsValid=!1,this.colorPaletteCanvas=o.createRef(),this.formContainerRef=o.createRef(),this.paletteContainerRef=o.createRef(),this.onAddIntermediateColorClick=this.onAddIntermediateColorClick.bind(this),this.getMinMaxColorPaletteData=this.getMinMaxColorPaletteData.bind(this),this.paletteColorsValidation=this.paletteColorsValidation.bind(this),this.updateColorPalette=this.updateColorPalette.bind(this)}componentDidMount(){this.updateColorPalette()}componentDidUpdate(){this.updateColorPalette()}render(){Qp.log("colorPaletteFormItem",this.props.colorPaletteFormItem);const{minValue:e,minColor:t,maxValue:i,maxColor:s}=this.getMinMaxColorPaletteData();let n=this.props.colorPaletteFormItem.find((e=>e.field.includes("intermediate_colors"))).value;return!this.props.disableIntermediateColorsChange&&this.props.reverseColorOrder&&(n=[...n].reverse()),this.paletteColorsIsValid=this.paletteColorsValidation(),this.props.setIsPaletteValidValue&&this.props.setIsPaletteValidValue(this.paletteColorsIsValid),(0,l.jsxs)("div",{className:"color-palette-maker-container",style:this.props.containerStyle||{},children:[(0,l.jsxs)("div",{ref:this.formContainerRef,className:"form-container",children:[(0,l.jsx)(Jp,{valueFormItem:this.props.reverseColorOrder?i:e,colorFormItem:this.props.reverseColorOrder?s:t,getColoringBox:this.props.getColoringBox,onChange:this.props.onChange}),!this.props.disableIntermediateColorsChange&&(0,l.jsxs)(o.Fragment,{children:[n.map(((e,t)=>(0,l.jsx)(Jp,{valueFormItem:e.form[0],colorFormItem:e.form[1],getColoringBox:this.props.getColoringBox,onChange:this.props.onChange,isRemovable:!0,onDeletePaletteColorClick:()=>this.props.removeIntermediateColor(this.props.colorPaletteFormItem,e.counter),moveDown:!0,moveUp:!0},t))),(0,l.jsxs)("div",{className:"line-divider-container",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"svg-center-inside-container",title:"Add color",onClick:this.onAddIntermediateColorClick,children:(0,l.jsx)(Yp.Z,{})}),(0,l.jsx)("hr",{})]})]}),(0,l.jsx)(Jp,{valueFormItem:this.props.reverseColorOrder?e:i,colorFormItem:this.props.reverseColorOrder?t:s,getColoringBox:this.props.getColoringBox,onChange:this.props.onChange})]}),(0,l.jsx)("div",{ref:this.paletteContainerRef,className:"palette-container",children:(0,l.jsx)("canvas",{ref:this.colorPaletteCanvas})})]})}}const em=$p;var tm=i(1317);class im extends o.Component{constructor(e){super(),this.prepareSensorHeatmapsDataForSave=e=>e.map((e=>(e.heatmapSensorsItem.value.sort(((e,t)=>e.sensorConnectorId.localeCompare(t.sensorConnectorId))),{...e,colorData:e.colorData.filter((e=>"intermediate_colors"!==e.field)).map((e=>{let{validate:t,error:i,...o}=e;return o}))}))),this.calculateNeedsSaveCustom=e=>this.props.mainComponentThis.sensorHeatmapLastSavedData.length>0?Y(this.prepareSensorHeatmapsDataForSave(e),this.prepareSensorHeatmapsDataForSave(this.props.mainComponentThis.sensorHeatmapLastSavedData)):e.length>0,this.handleSensorHeatmapRoomLevelChange=e=>()=>{const t=this.state.sensorsHeatmapData.map((t=>({...t,isRoomLevel:t.heatmapId===e.heatmapId?!t.isRoomLevel:t.isRoomLevel})));this.setState({sensorsHeatmapData:t,needsSave:this.calculateNeedsSaveCustom(t)})},this.handleSensorHeatmapShowValueChange=e=>()=>{const t=this.state.sensorsHeatmapData.map((t=>({...t,showSensorValue:t.heatmapId===e.heatmapId?!t.showSensorValue:t.showSensorValue})));this.setState({sensorsHeatmapData:t,needsSave:this.calculateNeedsSaveCustom(t)})},this.onCustomSensorHeatmapSensorChange=e=>()=>t=>{tm.log("Event",t.target.value);const i=this.state.sensorsHeatmapData.map((i=>({...i,heatmapSensorsItem:i.heatmapId===e.heatmapId?{...i.heatmapSensorsItem,value:t.target.value.map((e=>({sensorConnectorId:e.value,bindedObjectIds:[]})))}:i.heatmapSensorsItem})));this.setState({sensorsHeatmapData:i,needsSave:this.calculateNeedsSaveCustom(i)})},this.onCustomSensorHeatmapNameChange=e=>t=>{const i=this.state.sensorsHeatmapData.map((i=>({...i,heatmapName:i.isUnitHeatmap||i.heatmapId!==e.heatmapId?i.heatmapName:t.target.value})));this.setState({sensorsHeatmapData:i,needsSave:this.calculateNeedsSaveCustom(i)})},this.onAddCustomHeatmapClick=()=>{const e=this.createSensorHeatmapDataObject({});this.setSensorColoringIntermediateValues(e);const t=[...this.state.sensorsHeatmapData,e];this.setState({sensorsHeatmapData:t,activeSensorHeatmapProperties:{heatmapId:e.heatmapId},needsSave:this.calculateNeedsSaveCustom(t)})},this.onEditCustomHeatmapClick=e=>()=>{this.setState({activeSensorHeatmapProperties:{heatmapId:e.heatmapId}})},this.onCheckCustomHeatmapClick=e=>()=>{if(!this.isSensorHeatmapColorPaletteValid)return;let t=this.state.activeSensorHeatmapProperties,i=!1;const o=q.isEmpty(e.heatmapName);o?(t.heatmapNameError=o,i=!0):Object.hasOwn(t,"heatmapNameError")&&delete t.heatmapNameError,e.heatmapSensorsItem.value.length?Object.hasOwn(t,"heatmapSensorsError")&&delete t.heatmapSensorsError:(t.heatmapSensorsError="Entry can not be empty.",i=!0),this.setState({activeSensorHeatmapProperties:i?t:null})},this.onDeleteCustomHeatmapClick=e=>()=>{const t=this.state.sensorsHeatmapData.filter((t=>t!==e));this.setState({sensorsHeatmapData:t,activeSensorHeatmapProperties:this.state.activeSensorHeatmapProperties&&this.state.activeSensorHeatmapProperties.heatmapId===e.heatmapId?null:this.state.activeSensorHeatmapProperties,needsSave:this.calculateNeedsSaveCustom(t)})},this.setSensorColoringIntermediateValues=e=>{e.colorData.find((e=>"intermediate_colors"===e.field)).value=this.props.floorplan3DThis.calculateSensorColoringIntermediateValues(e.colorData)},this.handleSensorColorPaletteItemChange=e=>t=>i=>{const o=t.field.includes("_value")?parseFloat(i.target.value):i.target.value,s=this.state.sensorsHeatmapData.map((i=>({...i,colorData:i.heatmapId===e.heatmapId?i.colorData.map((e=>({...e,value:e.field===t.field?o:e.value}))):i.colorData})));this.setSensorColoringIntermediateValues(s.find((t=>t.heatmapId===e.heatmapId))),this.setState({sensorsHeatmapData:s,needsSave:this.calculateNeedsSaveCustom(s)})},this.handleSensorColorPaletteDirectionChange=e=>()=>{const t=this.state.sensorsHeatmapData.map((t=>({...t,colorData:t.heatmapId===e.heatmapId?t.colorData.map((e=>({...e,value:(()=>{switch(e.field){case"critical_min_color":return t.colorData.find((e=>"critical_max_color"===e.field)).value;case"critical_max_color":return t.colorData.find((e=>"critical_min_color"===e.field)).value;default:return e.value}})()}))):t.colorData})));this.setSensorColoringIntermediateValues(t.find((t=>t.heatmapId===e.heatmapId))),this.setState({sensorsHeatmapData:t,needsSave:this.calculateNeedsSaveCustom(t)})},this.onSensorsHeatmapSettingsCloseClick=()=>{fi(this.props.containerRef.current,200,(()=>{s.unmountComponentAtNode(this.props.containerRef.current)}),!1)},this.onSaveSensorsHeatmapDataClick=()=>{if(!this.isSensorHeatmapColorPaletteValid)return;this.setState({saveLoading:!0});const e={...this.props.mainComponentThis.klet3DGeneral,sensorHeatmapData:this.prepareSensorHeatmapsDataForSave(this.state.sensorsHeatmapData)},t=()=>{this.props.mainComponentThis.klet3DGeneral=e,this.props.mainComponentThis.sensorHeatmapLastSavedData=e.sensorHeatmapData,this.props.floorplan3DThis.sensorsHeatmapSceneControlRef.current.setDropdownListData((()=>{const e=this.props.floorplan3DThis.sensorsHeatmapSceneControlRef.current.getActiveSensorHeatmap();e&&this.props.floorplan3DThis.renderSensorHeatmap(e,this.props.floorplan3DThis.floorplan3DViewScene)})),this.setState({saveLoading:!1,needsSave:!1})};this.props.callAPIForSave?C.post.call(this,"/klet3d/entity/".concat(this.props.mainComponentThis.props.floorplanID,"/").concat(this.props.mainComponentThis.props.licenseKey),{entitygeneral:e},(()=>{t()})):t()},this.createSensorHeatmapDataObject=e=>{const t=this.props.mainComponentThis.sensorHeatmapLastSavedData.find((t=>e.isUnitHeatmap?t.isUnitHeatmap&&t.heatmapId===e.heatmapId:t.heatmapId===e.heatmapId));return{heatmapId:t?t.heatmapId:(0,fn.v4)(),heatmapName:e.heatmapName||"",isRoomLevel:!t||t.isRoomLevel,showSensorValue:!!t&&t.showSensorValue,isUnitHeatmap:t?t.isUnitHeatmap:e.isUnitHeatmap,heatmapSensorsItem:t?t.heatmapSensorsItem:{value:[]},colorData:pi.map((e=>({...e,value:t&&"intermediate_colors"!==e.field?t.colorData.find((t=>t.field===e.field)).value:e.defaultValue})))}},this.state={sensorsHeatmapData:[],colorPickerBoxReady:!1,activeSensorHeatmapProperties:null,needsSave:!1,saveLoading:!1},this.colorPaletteContainerRef=o.createRef(),this.colorPaletteMakerRef=o.createRef(),this.isSensorHeatmapColorPaletteValid=!0,this.availableHeatmapSensors=e.floorplan3DThis.getAvailableBindedNumberSensors().map((t=>({name:e.mainComponentThis.getObjectConnectorKlet3DBinderName(t[e.mainComponentThis.connectorIDbinderIDPropertyName]),value:t[e.mainComponentThis.connectorIDbinderIDPropertyName]}))),this.customSensorHeatmapsTableHeaderLabels=[{label:"Name"},{label:"Heatmap Sensors"},{label:"Room",infoText:"Toggle this switch to display the heatmap on a room level. When off, the heatmap is shown for the entire floor."},{label:"Value",infoText:"Toggle this switch to display sensor values on heatmap."}],this.onSensorsHeatmapSettingsCloseClick=this.onSensorsHeatmapSettingsCloseClick.bind(this),this.handleSensorHeatmapRoomLevelChange=this.handleSensorHeatmapRoomLevelChange.bind(this),this.handleSensorHeatmapShowValueChange=this.handleSensorHeatmapShowValueChange.bind(this),this.onCustomSensorHeatmapSensorChange=this.onCustomSensorHeatmapSensorChange.bind(this),this.onCustomSensorHeatmapNameChange=this.onCustomSensorHeatmapNameChange.bind(this),this.onAddCustomHeatmapClick=this.onAddCustomHeatmapClick.bind(this),this.onEditCustomHeatmapClick=this.onEditCustomHeatmapClick.bind(this),this.onCheckCustomHeatmapClick=this.onCheckCustomHeatmapClick.bind(this),this.onDeleteCustomHeatmapClick=this.onDeleteCustomHeatmapClick.bind(this),this.handleSensorColorPaletteItemChange=this.handleSensorColorPaletteItemChange.bind(this),this.handleSensorColorPaletteDirectionChange=this.handleSensorColorPaletteDirectionChange.bind(this),this.onSaveSensorsHeatmapDataClick=this.onSaveSensorsHeatmapDataClick.bind(this),this.setSensorColoringIntermediateValues=this.setSensorColoringIntermediateValues.bind(this),this.prepareSensorHeatmapsDataForSave=this.prepareSensorHeatmapsDataForSave.bind(this),this.calculateNeedsSaveCustom=this.calculateNeedsSaveCustom.bind(this)}componentDidMount(){const e=[...this.props.mainComponentThis.sensorHeatmapLastSavedData.filter((e=>!e.isUnitHeatmap))].map((e=>this.createSensorHeatmapDataObject(e)));e.forEach((e=>this.setSensorColoringIntermediateValues(e))),this.setState({sensorsHeatmapData:e},(()=>this.setState({colorPickerBoxReady:!0})))}render(){const{sensorsHeatmapData:e,activeSensorHeatmapProperties:t,colorPickerBoxReady:i,needsSave:s,saveLoading:n}=this.state,a=e.filter((e=>!e.isUnitHeatmap)),r=t&&e.find((e=>e.heatmapId===t.heatmapId));return tm.log("sensorsHeatmapData",e),(0,l.jsx)(ps,{className:"sensors-heatmap-settings-modal",onCloseModalClick:this.onSensorsHeatmapSettingsCloseClick,children:(0,l.jsxs)("section",{className:"layout__section",style:{height:"auto",maxHeight:"85vh"},children:[(0,l.jsx)("div",{className:"sensors-heatmap-settings-popup-content-container ".concat(this.availableHeatmapSensors.length?"":"no-sensor-measures-data"),children:this.availableHeatmapSensors.length?(0,l.jsxs)(Es.Z,{theme:Xs,children:[(0,l.jsx)("div",{className:"sensor-heatmaps-container table-responsive",children:(0,l.jsxs)("div",{className:"sensor-heatmaps-table-container table-responsive",children:[(0,l.jsx)("div",{className:"title-row",children:(0,l.jsx)("h2",{children:"Heatmaps"})}),(0,l.jsxs)("table",{className:"table",style:{tableLayout:"fixed"},children:[(0,l.jsxs)("colgroup",{children:[(0,l.jsx)("col",{style:{width:211}}),(0,l.jsx)("col",{style:{width:211}}),(0,l.jsx)("col",{style:{width:73}}),(0,l.jsx)("col",{style:{width:73}}),(0,l.jsx)("col",{style:{width:36}}),(0,l.jsx)("col",{style:{width:36}})]}),(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[this.customSensorHeatmapsTableHeaderLabels.map(((e,t)=>(0,l.jsx)("th",{children:e.infoText?(0,l.jsxs)("div",{className:"table-info-header-container",children:[(0,l.jsx)("span",{children:e.label}),(0,l.jsx)(ss,{infoText:e.infoText,explanationInfoBoxStyles:{top:20,left:0===t?0:-70,width:140,zIndex:1}})]}):e.label},t))),(0,l.jsx)("th",{children:(0,l.jsx)("div",{className:"hidden-header-part",children:(0,l.jsx)(qp.Z,{})})}),(0,l.jsx)("th",{children:(0,l.jsx)("div",{className:"hidden-header-part",children:(0,l.jsx)(Kp.Z,{})})})]})}),(0,l.jsxs)("tbody",{children:[a.map(((e,i)=>(0,l.jsxs)("tr",{className:"sensor-heatmap-row ".concat(t&&t.heatmapId===e.heatmapId?"active":""),children:[(0,l.jsx)("td",{children:t&&t.heatmapId===e.heatmapId?(0,l.jsx)(us,{placeholder:"e.g. Floor1 Temperature",item:e,value:e.heatmapName,onChange:this.onCustomSensorHeatmapNameChange,formGroupStyle:{marginBottom:0},type:"text",error:t.heatmapNameError}):e.heatmapName}),(0,l.jsx)("td",{children:(0,l.jsxs)(xs,{containerStyle:{marginBottom:0},children:[(0,l.jsx)(Ks,{fullWidth:!0,item:{...e.heatmapSensorsItem,value:e.heatmapSensorsItem.value.map((e=>this.availableHeatmapSensors.find((t=>t.value===e.sensorConnectorId)))),options:this.availableHeatmapSensors},handleChange:t&&t.heatmapId===e.heatmapId?this.onCustomSensorHeatmapSensorChange(e):null}),t&&t.heatmapId===e.heatmapId&&t.heatmapSensorsError&&(0,l.jsx)("div",{className:"form-control feedback",children:t.heatmapSensorsError})]})}),(0,l.jsx)("td",{children:(0,l.jsx)("div",{children:(0,l.jsx)(Ys.Z,{checked:e.isRoomLevel,onChange:()=>t&&t.heatmapId===e.heatmapId&&this.handleSensorHeatmapRoomLevelChange(e)()})})}),(0,l.jsx)("td",{children:(0,l.jsx)("div",{children:(0,l.jsx)(Ys.Z,{checked:e.showSensorValue,onChange:()=>t&&t.heatmapId===e.heatmapId&&this.handleSensorHeatmapShowValueChange(e)()})})}),(0,l.jsx)("td",{children:t&&t.heatmapId===e.heatmapId?(0,l.jsx)(Xp.Z,{className:"green-icon",onClick:this.onCheckCustomHeatmapClick(e)}):!t||t.isUnitHeatmap?(0,l.jsx)(qp.Z,{className:"green-icon",onClick:this.onEditCustomHeatmapClick(e)}):null}),(0,l.jsx)("td",{children:t&&t.heatmapId===e.heatmapId||!t?(0,l.jsx)(Kp.Z,{className:"red-icon",onClick:this.onDeleteCustomHeatmapClick(e)}):null})]},i))),(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,children:(0,l.jsx)(Go,{disabled:!!t,type:t?"dull":"border-primary",className:"add-heatmap-button",onClick:this.onAddCustomHeatmapClick,children:(0,l.jsxs)("div",{children:[(0,l.jsx)(Yp.Z,{}),(0,l.jsx)("span",{children:"Add heatmap"})]})})})})]})]})]})}),(0,l.jsx)("div",{className:"divider",style:{visibility:i&&t?"visible":"hidden"}}),(0,l.jsx)("div",{ref:this.colorPaletteContainerRef,className:"sensor-heatmap-color-palette-container",children:i&&t&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"color-palette-direction-container",children:(0,l.jsxs)("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",title:"Toggle color palette direction",onClick:this.handleSensorColorPaletteDirectionChange(r),children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:"arrowGradient",x1:"50%",y1:"100%",x2:"50%",y2:"0%",children:[(0,l.jsx)("stop",{offset:"0%",stopColor:r.colorData.find((e=>"critical_min_color"===e.field)).value}),(0,l.jsx)(l.Fragment,{children:r.colorData.find((e=>"intermediate_colors"===e.field)).value.map(((e,t)=>(0,l.jsx)("stop",{offset:"".concat(100*e.interpolationFactor,"%"),stopColor:e.form[1].value},t)))}),(0,l.jsx)("stop",{offset:"100%",stopColor:r.colorData.find((e=>"critical_max_color"===e.field)).value})]})}),(0,l.jsx)("path",{className:"arrow-path",d:"M 50 0 L 30 30 L 40 30 L 40 100 L 60 100 L 60 30 L 70 30 Z",fill:"url(#arrowGradient)"})]})}),(0,l.jsx)(em,{ref:this.colorPaletteMakerRef,disableIntermediateColorsChange:!0,reverseColorOrder:!0,colorPaletteFormItem:r.colorData,onChange:this.handleSensorColorPaletteItemChange(r),getColoringBox:()=>this.colorPaletteContainerRef.current,setIsPaletteValidValue:e=>this.isSensorHeatmapColorPaletteValid=e})]})})]}):(0,l.jsx)("p",{children:"No sensor data for heatmap generation have been detected. Please ensure that your sensors are properly connected and bound to at least one object in the drawing."})}),this.availableHeatmapSensors.length>0&&(0,l.jsx)("div",{className:"save-track button-centered-container",children:(0,l.jsx)(Ko,{disabled:!s||!!t,buttonType:s?"primary":"dull",spinnerColor:"#ffffff",buttonText:" Save changes",loading:n,spinnerLoading:!0,onClick:this.onSaveSensorsHeatmapDataClick})})]})})}}const om=im;class sm extends o.Component{constructor(){super(),this.onShowHeatmapSettingsClick=()=>{gi(this.props.mainComponentThis.sensorsHeatmapSettingsPopupContainerRef.current,200,(()=>{s.render((0,l.jsx)(om,{containerRef:this.props.mainComponentThis.sensorsHeatmapSettingsPopupContainerRef,callAPIForSave:!0,floorplan3DThis:this.props.floorplan3DThis,mainComponentThis:this.props.mainComponentThis,setResponseError:this.props.setResponseError}),this.props.mainComponentThis.sensorsHeatmapSettingsPopupContainerRef.current)}),"block",!1)},this.onShowHeatmapSettingsClick=this.onShowHeatmapSettingsClick.bind(this)}render(){return(0,l.jsxs)("div",{children:[(0,l.jsx)("li",{onClick:this.onShowHeatmapSettingsClick,children:(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Sensors heatmap settings",children:[(0,l.jsx)(Zn.Z,{}),(0,l.jsx)("p",{children:"HEATMAP SETTINGS"})]})}),(0,l.jsx)("br",{})]})}}const nm=sm;class am extends o.Component{constructor(e){super(),this.setActiveStatus=e=>this.setState({active:e}),this.onCloseNavigationClick=()=>this.setState({active:!1}),this.resetBearingParams=()=>{this.circleNavigatorBearingAngleDeg=0,this.fullCirclesCount=0},this.updateNavigatorShape=()=>{this.circularSectorAngleDeg=L(vo(R(this.props.floorplan3DThis.firstPersonControlsCamera.fov),this.props.floorplan3DThis.canvasRef.current.offsetWidth/this.props.floorplan3DThis.canvasRef.current.offsetHeight)),ji(this.circleNavigatorRef.current),this.props.mainComponentThis.qSVG.create(this.circleNavigatorRef,"path",{d:mo(0,0,this.circularSectorRadiusSvg,this.circularSectorAngleDeg)}),this.setCircleNavigatorPosition(this.circleNavigatorPosition,this.circleNavigatorBearingAngleDeg)},this.setCircleNavigatorPosition=(e,t)=>{const i=this.circleNavigatorBearingAngleDeg;i>=270&&i<360&&t>0&&t<=90?this.fullCirclesCount++:i>0&&i<=90&&t>=270&&t<360&&this.fullCirclesCount--,this.circleNavigatorBearingAngleDeg=t,this.circleNavigatorPosition=e,this.circleNavigatorRef.current.setAttribute("transform","translate(".concat(e.x,", ").concat(e.y,") rotate(").concat(t+360*this.fullCirclesCount,")"))},this.setActiveFloorLegend=()=>{ji(this.floorLegendGroupElement.current),this.navigationSvgRef.current.setAttribute("viewBox","".concat(this.props.mainComponentThis.boxWallCoordinates.minX," ").concat(this.props.mainComponentThis.boxWallCoordinates.minY," ").concat(this.props.mainComponentThis.boxWallCoordinates.width," ").concat(this.props.mainComponentThis.boxWallCoordinates.height));for(let e=0;e<this.props.mainComponentThis.boxWall.current.children.length;e++)this.floorLegendGroupElement.current.appendChild(this.props.mainComponentThis.boxWall.current.children[e].cloneNode());this.floorLegendGroupElementBoundingClientRect=this.floorLegendGroupElement.current.getBoundingClientRect()},this.onNavigationSvgMouseMove=e=>{A(e.clientX,e.clientY,this.floorLegendGroupElementBoundingClientRect)?this.navigationSvgRef.current.style.cursor="pointer":this.navigationSvgRef.current.style.cursor="default"},this.onNavigationSvgClick=e=>t=>{const i=e?t.touches[0].pageX:t.clientX,o=e?t.touches[0].pageY:t.clientY;if(A(i,o,this.floorLegendGroupElementBoundingClientRect)){let e,t;e=i-this.floorLegendGroupElementBoundingClientRect.left,t=o-this.floorLegendGroupElementBoundingClientRect.top,e=e/this.floorLegendGroupElementBoundingClientRect.width*this.props.mainComponentThis.boxWallCoordinates.width,t=t/this.floorLegendGroupElementBoundingClientRect.height*this.props.mainComponentThis.boxWallCoordinates.height,e+=this.props.mainComponentThis.boxWallCoordinates.minX,t+=this.props.mainComponentThis.boxWallCoordinates.minY,this.props.floorplan3DThis.firstPersonControls.handleFloorplanNavigationClick({x:e,y:t})}},this.state={active:!1},this.circularSectorAngleDeg=0,this.circularSectorRadiusSvg=3*e.mainComponentThis.meter,this.circleNavigatorBearingAngleDeg=0,this.circleNavigatorPosition={x:0,y:0},this.fullCirclesCount=0,this.navigationSvgRef=o.createRef(),this.floorLegendGroupElement=o.createRef(),this.floorLegendGroupElementBoundingClientRect={},this.circleNavigatorRef=o.createRef(),this.setActiveStatus=this.setActiveStatus.bind(this),this.onCloseNavigationClick=this.onCloseNavigationClick.bind(this),this.setActiveFloorLegend=this.setActiveFloorLegend.bind(this),this.updateNavigatorShape=this.updateNavigatorShape.bind(this),this.setCircleNavigatorPosition=this.setCircleNavigatorPosition.bind(this),this.resetBearingParams=this.resetBearingParams.bind(this),this.onNavigationSvgMouseMove=this.onNavigationSvgMouseMove.bind(this),this.onNavigationSvgClick=this.onNavigationSvgClick.bind(this)}render(){return(0,l.jsxs)("div",{className:"floorplan-navigation-container ".concat(this.state.active?"active":""),children:[(0,l.jsx)("div",{className:"header-container",children:(0,l.jsx)("div",{className:"svg-center-inside-container close-icon",onClick:this.onCloseNavigationClick,children:(0,l.jsx)(ln.Z,{})})}),(0,l.jsxs)("svg",{ref:this.navigationSvgRef,onMouseMove:this.onNavigationSvgMouseMove,onClick:this.onNavigationSvgClick(!1),onTouchStart:this.onNavigationSvgClick(!0),children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("radialGradient",{id:"redGradient",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%",children:[(0,l.jsx)("stop",{offset:"0%",style:{stopColor:"#ffcccc",stopOpacity:1}}),(0,l.jsx)("stop",{offset:"100%",style:{stopColor:"#ff0000",stopOpacity:1}})]})}),(0,l.jsx)("g",{ref:this.floorLegendGroupElement}),(0,l.jsx)("g",{ref:this.circleNavigatorRef,className:"circle-navigator",fill:"url(#redGradient)",stroke:"#4b4b5a",strokeWidth:"4"})]})]})}}const rm=am;class lm extends o.Component{constructor(){super(),this.onModeOptionClick=e=>()=>this.setState({activeMode:e}),this.isPanModeOn=()=>"pan"===this.state.activeMode,this.setDisableStatus=e=>this.setState({disabled:e}),this.getActiveMode=()=>this.state.activeMode,this.state={disabled:!1,activeMode:"rotate"},this.modeOptions=[{title:"Rotation mode",icon:(0,l.jsx)(_a,{}),value:"rotate"},{title:"Pan mode",icon:(0,l.jsx)(va,{}),value:"pan"}],this.onModeOptionClick=this.onModeOptionClick.bind(this),this.isPanModeOn=this.isPanModeOn.bind(this),this.setDisableStatus=this.setDisableStatus.bind(this),this.getActiveMode=this.getActiveMode.bind(this)}render(){return this.state.disabled?null:(0,l.jsx)("div",{className:"orbit-controls-rotate-pan-mode-switch-container scene-control",children:this.modeOptions.map(((e,t)=>(0,l.jsx)("div",{title:e.title,className:"mode-option ".concat(0===t?"left":"right"," ").concat(this.state.activeMode===e.value?"active":""),onClick:this.onModeOptionClick(e.value),children:e.icon},t)))})}}const hm=lm;class cm extends o.Component{constructor(e){super(),this.initialize3DViewController=()=>{this.props.mainComponentThis.addOnDrawingControlerInstance&&this.props.mainComponentThis.addOnDrawingControlerInstance.initializeController("3D",{floorplan3DThis:this})},this.floorplan3DViewAnimate=()=>{this.mounted&&(setTimeout((()=>{requestAnimationFrame(this.floorplan3DViewAnimate)}),this.timeIntervalBetweenFrames),!this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.currentControls.getEnabledStatus()&&this.currentControls===this.firstPersonControls&&this.currentControls.animate(),this.floorplan3DViewRenderer.clear(),this.floorplan3DViewRenderer.render(this.floorplan3DViewScene,this.floorplan3DViewCamera),this.changedLightsShadowMaps.length>0&&this.isLightsShadowMapChangeFinished(!1))},this.onDataLoadedCallback=()=>{const e=this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();this.floorplanFloors=this.props.mainComponentThis.floorplanFloorsData.map((t=>t.floorNumber===e.floorNumber?{...t,floorHeight:this.props.mainComponentThis.floorHeight,objData:this.filterFurnitureObjData(this.props.mainComponentThis.OBJDATA),wallData:this.props.mainComponentThis.WALLS,roomData:this.props.mainComponentThis.ROOM.map((e=>this.calculateRoomCoordsOutsideWithOrphans(e))),floorNumber:this.props.mainComponentThis.floorNumber,floorNote:this.props.mainComponentThis.floorNote}:{...t,roomData:t.roomData.map((e=>this.calculateRoomCoordsOutsideWithOrphans(e))),objData:this.filterFurnitureObjData(t.objData).map((e=>{const t=this.props.mainComponentThis.createObj2DClassInstanceFromObj(e);return t.update(this.props.mainComponentThis),t}))})),this.floorplan3DViewScene=new te.xsS,this.floorplan3DViewRenderer=new te.CP7({antialias:!0,canvas:this.canvasRef.current,preserveDrawingBuffer:!0}),this.floorplan3DViewRenderer.setClearColor(16777215,1),this.floorplan3DViewRenderer.setPixelRatio(window.devicePixelRatio),this.floorplan3DViewRenderer.setSize(this.canvasRef.current.offsetWidth,this.canvasRef.current.offsetHeight),this.floorplan3DViewRenderer.autoClear=!1,this.floorplan3DViewRenderer.shadowMap.enabled=!0,this.floorplan3DViewRenderer.shadowMap.type=te.ntZ,this.floorplanWallsBoundingBox2DCoordinates=this.props.mainComponentThis.getFloorplanWallsBBoxCoords();const t=Si(this.floorplanWallsBoundingBox2DCoordinates,this.scaleFactor);this.floorplanWallsBBoxCenterVector=new te.Pa4(t.x,0,t.y),this.floorplanWallsObjectsBoundingBox2DCoordinates=this.props.mainComponentThis.getFloorplanWallsObjectsBBoxCoords();const i=Si(this.floorplanWallsObjectsBoundingBox2DCoordinates,this.scaleFactor);this.floorplanWallsObjectsBBoxCenterVector=new te.Pa4(i.x,0,i.y),this.orbitControlsCamera=new te.cPb(45,this.floorplan3DViewRenderer.domElement.offsetWidth/this.floorplan3DViewRenderer.domElement.offsetHeight,1,5e4),this.firstPersonControlsCamera=this.orbitControlsCamera.clone(),this.floorplanNavigationRef.current.updateNavigatorShape(),this.calculateFloorplanEnvironmentRadius();const o=(()=>{const e=window.location.hash.match(/^#viewIndex=(\d+)$/);return e?parseInt(e[1],10):null})(),s=!(null!==o&&o>1&&this.props.mainComponentThis.floorplanGeneral.floorplanCameraViews&&this.props.mainComponentThis.floorplanGeneral.floorplanCameraViews[o-1]);s&&this.centerFloorOrbitControlsCamera(),this.centerFloorFirstPersonControlsCamera(),this.orbitControls=new op(this.orbitControlsCamera,this.floorplan3DViewRenderer.domElement,this.floorplanWallsObjectsBBoxCenterVector.clone(),this),this.orbitControls.target=this.floorplanWallsBBoxCenterVector.clone(),this.orbitControls.update(),!s&&this.renderFloorplanCameraView(this.props.mainComponentThis.floorplanGeneral.floorplanCameraViews[o-1]),this.firstPersonControls=new Cp(this.firstPersonControlsCamera,this.floorplan3DViewRenderer.domElement,this.floorplan3DViewScene,this.floorplanWallsObjectsBBoxCenterVector.clone(),this),this.firstPersonControls.setEnabledStatus(!1),this.floorplan3DViewCamera=this.orbitControlsCamera,this.currentControls=this.orbitControls,this.floorplanViewHUDObject=new eh(this.floorplan3DViewScene),this.floorplanItemCurrentHUDObject=this.floorplanViewHUDObject,this.floorplanStartDate=H(this.floorplanTimeZone),this.floorplanStartDateSetTimestamp=(new Date).getTime(),this.createAmbientLight(this.floorplan3DViewScene),this.createFloorplanEnvironment(this.floorplan3DViewScene),this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers),te.Tme.prototype.deepClone=function(e){return(new this.constructor).deepCopy(this,e)},te.Tme.prototype.deepCopy=function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),e.material)if(e.material.isMaterial)this.material=e.material.clone();else{this.material=[];for(const t of e.material)this.material.push(t.clone())}if(e.geometry&&(this.geometry=e.geometry.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var o=e.children[i];this.add(o.deepClone())}return this},this.drawFloorplan(this.floorplan3DViewScene),this.sensorsHeatmapSceneControlRef.current.setDropdownListData(),this.floorplanViewUserInteractionController=new ih(this.floorplan3DViewScene,this.canvasRef.current,this),this.userInteractionCurrentController=this.floorplanViewUserInteractionController,this.floorplan3DViewAnimate(),window.addEventListener("keydown",this.handleKeyDown3D),this.floorplan3DViewRenderer.domElement.addEventListener("cameraMoved",this.onCameraMoved)},this.state={isPanelShowed:!1},this.canvasRef=o.createRef(),this.panel=o.createRef(),this.panelControl=o.createRef(),this.sceneControlToolsContainer=o.createRef(),this.controlPanelRef=o.createRef(),this.panelInfoExplanationBox=o.createRef(),this.heightFactorRef=o.createRef(),this.wallsOpacityRef=o.createRef(),this.mapLayer3DContainerRef=o.createRef(),this.showMapLayer3DInputRef=o.createRef(),this.bindedObjectsHighlightInputRef=o.createRef(),this.clickableObjectsSceneControlRef=o.createRef(),this.sensorsHeatmapSceneControlRef=o.createRef(),this.sensorsHeatmapRef=o.createRef(),this.wallsVisibilityOptionsRef=o.createRef(),this.cameraControlsRef=o.createRef(),this.roomCameraControlsRef=o.createRef(),this.floorplanFloorsPanelSelection3DRef=o.createRef(),this.floorplanFloorsSceneControlsSelectionRef=o.createRef(),this.glamosLogoImgRef=o.createRef(),this.alertRef=o.createRef(),this.maxShadowCastingLightsAlert=o.createRef(),this.floorplanNavigationRef=o.createRef(),this.orbitControlsRotatePanModeSwitchRef=o.createRef(),this.sunLightControlsRef=o.createRef(),this.sunPositionAlertRef=o.createRef(),this.timeIntervalBetweenFrames=50,this.floorplan3DViewRenderer=null,this.floorplan3DViewCamera=null,this.orbitControlsCamera=null,this.firstPersonControlsCamera=null,this.floorplan3DViewScene=null,this.currentControls=null,this.orbitControls=null,this.firstPersonControls=null,this.firstPersonCameraTransitionInProgress=!1,this.exportPngResolutionScale=4,this.scaleFactor=e.mainComponentThis.floorplan3DScaleFactor,this.doorHeight=180,this.windowHeight=100,this.isPointOnWallDecimalPrecision=e.mainComponentThis.isPointOnWallDecimalPrecision,this.panelWidth=220,this.floorplanWallsBoundingBox2DCoordinates=null,this.floorplanWallsBBoxCenterVector=null,this.floorplanWallsObjectsBoundingBox2DCoordinates=null,this.floorplanWallsObjectsBBoxCenterVector=null,this.wallStartEndPlanesColor=13421772,this.wallTopBottomPlanesColor=14540253,this.wallStartEndPlanesMaterial=null,this.wallBottomPlaneMaterial=null,this.wallTopPlaneMaterial=null,this.textureLoader=new te.dpR,this.gltfLoader=new tp.E,this.fontLoader=new ep.J,this.materialToTextureMappings={},this.mounted=!1,this.floorplanWallMaterials=[],this.roomFloorTextures=[],this.loadedTextures=[],this.loadingWallMaterialsStatuses=[],this.loadingRoomFloorTexturesStatuses=[],this.loadingCallbacksStatuses=[],this.loadingWallObjectsStatuses=[],this.loadingFreeLightObjectsStatuses=[],this.loadingFreeFurnitureObjectsStatuses=[],this.loadingFanObjectsStatuses=[],this.loadingCoverObjectsStatuses=[],this.loadingPresenceObjectsStatuses=[],this.loadingHVACObjectsStatuses=[],this.loadingCameraObjectsStatuses=[],this.loadingScreenObjectsStatuses=[],this.floorplanViewWalls3D=[],this.currentWalls3D=[],this.floorplanViewRoomFloors=[],this.currentRoomFloors=[],this.floorplanViewFurniture=[],this.currentFurniture=[],this.floorplanViewLights=[],this.currentViewLights=[],this.floorplanViewFans=[],this.currentViewFans=[],this.floorplanViewCovers=[],this.currentViewCovers=[],this.floorplanViewPresenceBinarys=[],this.currentViewPresenceBinarys=[],this.floorplanViewHVACs=[],this.currentViewHVACs=[],this.floorplanViewCameras=[],this.currentViewCameras=[],this.floorplanViewScreens=[],this.currentViewScreens=[],this.floorplanViewSensors=[],this.currentViewSensors=[],this.floorplanViewOthers=[],this.currentViewOthers=[],this.floorplanViewPresenceAreas=[],this.currentViewPresenceAreas=[],this.textFont=null,this.doorObjects3D=[],this.windowObjects3D=[],this.lightObjects3D=[],this.furnitureObjects3D=[],this.fanObjects3D=[],this.coverObjects3D=[],this.presenceBinaryObjects3D=[],this.presenceAreaObjects3D=[],this.presenceObjects3D=[],this.HVACObjects3D=[],this.cameraObjects3D=[],this.screenObjects3D=[],this.floorplan3DOnMapScene=null,this.floorplan3DOnMapCameraPosition=null,this.floorplan3DOnMapCamera=null,this.floorplan3DOnMapRenderer=null,this._map=null,this.floorplanFloors=[],this.wallStartEndPlanesMaterial=new te.xoR({color:this.wallStartEndPlanesColor,side:te.ehD}),this.wallBottomPlaneMaterial=new te.xoR({color:this.wallTopBottomPlanesColor,side:te._Li}),this.wallTopPlaneMaterial=new te.xoR({color:this.wallTopBottomPlanesColor,side:te.ehD}),this.roomFloorDefaultMaterial=new te.xoR({side:te.ehD,color:15658734}),this.sensorValueDecimalPrecision=1,this.floorplanViewUserInteractionController=null,this.floorplanOnMapUserInteractionController=null,this.userInteractionCurrentController=null,this.floorplanViewHUDObject=null,this.floorplanOnMapHUDObject=null,this.floorplanItemCurrentHUDObject=null,this.floorplanEnvironmentRadius=0,this.environmentCircleSegmentsCount=32,this.panelDrawingOptions=[{objects3DArray:this.furnitureObjects3D,object3DProperties:{type:"furniture"},currentViewArrayName:"currentFurniture",floorplanViewArrayName:"floorplanViewFurniture"},{objects3DArray:this.doorObjects3D,object3DProperties:{type:"door"}},{objects3DArray:this.windowObjects3D,object3DProperties:{type:"window"}},{objects3DArray:this.lightObjects3D,object3DProperties:{type:"light"},currentViewArrayName:"currentViewLights",floorplanViewArrayName:"floorplanViewLights"},{objects3DArray:this.fanObjects3D,object3DProperties:{type:"fan"},currentViewArrayName:"currentViewFans",floorplanViewArrayName:"floorplanViewFans"},{objects3DArray:this.coverObjects3D,object3DProperties:{type:"cover"},currentViewArrayName:"currentViewCovers",floorplanViewArrayName:"floorplanViewCovers"},{objects3DArray:this.presenceObjects3D,object3DProperties:{type:"presence_binary"},currentViewArrayName:"currentViewPresenceBinarys",floorplanViewArrayName:"floorplanViewPresenceBinarys"},{objects3DArray:this.HVACObjects3D,object3DProperties:{type:"hvac"},currentViewArrayName:"currentViewHVACs",floorplanViewArrayName:"floorplanViewHVACs"},{objects3DArray:this.cameraObjects3D,object3DProperties:{type:"camera"},currentViewArrayName:"currentViewCameras",floorplanViewArrayName:"floorplanViewCameras"},{objects3DArray:this.screenObjects3D,object3DProperties:{type:"screen"},currentViewArrayName:"currentViewScreens",floorplanViewArrayName:"floorplanViewScreens"}],this.sunLightPositionFloorplan3DViewInterval=null,this.sunLightPositionFloorplan3DOnMapInterval=null,this.updateSunLightPositionIntervalDelayMs=6e4,this.sunLightPositionFloorplan3DViewCameraHelpers={auxiliaryCameraHelper:null,mainCameraHelper:null,offscreenShadowCamera:null,type:"floorplan3DView"},this.sunLightPositionFloorplan3DOnMapCameraHelpers={auxiliaryCameraHelper:null,mainCameraHelper:null,offscreenShadowCamera:null,type:"floorplan3DOnMap"},this.floorplanStartDate=null,this.floorplanStartDateSetTimestamp=(new Date).getTime(),this.floorplanTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,this.skyMaterial=null,this.bindedObjectTextHeight=2,this.editModeValue=$t.find((e=>"Edit"===e.label)).value,this.defaultUserMode=$t.find((e=>"Control"===e.label)).value,this.selectedUserMode=this.defaultUserMode,this.shadowCastingLightsActive=[],this.shadowCastingLightsWaitingList=[],this.maxShadowCastingLightsCount=15,this.changedLightsShadowMaps=[],this.changeLightShadowMapsLoadingSet=!1,this.isInitialFloorplanDrawingFinished=!1,this.componentWillUnmountCustomCallback=null,this.objectConnectorsArray=[],this.sensorHeatmapFloorOffset=2.5,this.sensorHeatmapPlanesData=[],this.floorplanRoomsMappingRenderTargets=[],this.screenBasicLightPartDepth=1,this.screen3DGlowLightPartDepth=50,this.screenMeshPartDepth=.5,this.initialize3DViewController=this.initialize3DViewController.bind(this),this.floorplan3DViewAnimate=this.floorplan3DViewAnimate.bind(this),this.onDataLoadedCallback=this.onDataLoadedCallback.bind(this),this.createAmbientLight=Cr.bind(this),this.createFloorplanEnvironmentGround=xr.bind(this),this.createFloorplanEnvironmentSky=yr.bind(this),this.createFloorplanEnvironment=Sr.bind(this),this.centerBBoxOrbitControlsCamera=vr.bind(this),this.centerFloorOrbitControlsCamera=Tr.bind(this),this.setOrbitControlsBearingAroundTarget=jr.bind(this),this.calculateFloorplanEnvironmentRadius=_r.bind(this),this.setCircleNavigatorFromFirstPersonControls=Or.bind(this),this.setFirstPersonControlsCameraPosition=Ir.bind(this),this.centerFloorFirstPersonControlsCamera=Pr.bind(this),this.smoothTransitionToFirstPerson=kr.bind(this),this.calculateControlsMaxDistance=Fr.bind(this),this.switchToFirstPersonControls=Mr.bind(this),this.onSwitchControlsClick=Ar.bind(this),this.isCameraPOVEnabled=Rr.bind(this),this.setCameraPOVView=Lr.bind(this),this.selectedCameraItemPOVView=Br.bind(this),this.drawFloorplan=Hr.bind(this),this.createFloorplanItem=zr.bind(this),this.removeFloorplanItem=Gr.bind(this),this.drawFloorplanFloorsWalls=Ur.bind(this),this.drawFloorWalls=qr.bind(this),this.drawFloorplanFloorsWallObjects=Kr.bind(this),this.drawFloorplanFreeFurniture=Yr.bind(this),this.drawFloorFreeFurniture=Xr.bind(this),this.drawFloorplanRoomFloors=Zr.bind(this),this.drawFloorRoomFloors=Jr.bind(this),this.drawFloorplanFreeLights=Qr.bind(this),this.drawFloorFreeLights=$r.bind(this),this.drawFloorplanFreeFans=el.bind(this),this.drawFloorFreeFans=tl.bind(this),this.drawFloorplanFreeCovers=il.bind(this),this.drawFloorFreeCovers=ol.bind(this),this.drawFloorplanFreePresenceBinarys=sl.bind(this),this.drawFloorFreePresenceBinarys=nl.bind(this),this.drawFloorplanFreeHVACs=al.bind(this),this.drawFloorFreeHVACs=rl.bind(this),this.drawFloorplanFreeCameras=ll.bind(this),this.drawFloorFreeCameras=hl.bind(this),this.drawFloorplanFreeScreens=cl.bind(this),this.drawFloorFreeScreens=dl.bind(this),this.drawFloorplanSensors=pl.bind(this),this.drawFloorplanOthers=ml.bind(this),this.drawFloorplanPresenceAreas=ul.bind(this),this.drawFloorBindedUnfixedObjects=gl.bind(this),this.redrawFloorplanFloorItems=fl.bind(this),this.removeFloorplanFloor=bl.bind(this),this.removeFloorplanFloorItems=wl.bind(this),this.addFloorplanFloor=Cl.bind(this),this.addFloorplanFloorItems=xl.bind(this),this.rotateAroundPoint=sh.bind(this),this.rotateChildAroundWorldPoint=nh.bind(this),this.translateObjectInWorld=ah.bind(this),this.createMeshFromObject=rh.bind(this),this.onCameraMoved=lh.bind(this),this.updateWallsVisibility=hh.bind(this),this.setFloorplanItemShadow=ch.bind(this),this.changeWallMaterialOpacity=dh.bind(this),this.focusFloorplanOnMap=ph.bind(this),this.show3DFloorplanOnMap=mh.bind(this),this.highlightBindedObjects=uh.bind(this),this.setFloorplanFloorItemsVisibility=gh.bind(this),this.drawLine=fh.bind(this),this.drawGlobalCoordinateSystem=bh.bind(this),this.processSceneVec3=wh.bind(this),this.inverseProcessSceneVec3=Ch.bind(this),this.getFloorplanViewSceneItem=xh.bind(this),this.turnWaitingLightOn=yh.bind(this),this.setLightStateParameters=Sh.bind(this),this.addShadowCastLightToList=_h.bind(this),this.isLightsShadowMapChangeFinished=Dh.bind(this),this.changeSelectedObjectMaterial=Th.bind(this),this.getActiveScenes=vh.bind(this),this.backTo2D=Wc.bind(this),this.onWindowResize=Vc.bind(this),this.onPanelControlClick=Nc.bind(this),this.onExportPngClick=Ec.bind(this),this.onShowOnMapLayer3DClick=Hc.bind(this),this.hidePanel=zc.bind(this),this.onFloorplanItemSelect=Gc.bind(this),this.onFloorplanItemUnselect=Uc.bind(this),this.userInteractionControlerNothingClickedReset=qc.bind(this),this.closeActiveRightBox=Kc.bind(this),this.handleKeyDown3D=Yc.bind(this),this.onBirdPerspectiveViewButtonClick=Xc.bind(this),this.onResetCameraViewButtonClick=Zc.bind(this),this.loadFloorplanItemObject3D=cc.bind(this),this.loadTexture=dc.bind(this),this.onInitialFloorplanDrawingFinishedCallback=pc.bind(this),this.isInitialLoadingFinished=mc.bind(this),this.cameraItemRotation=jh.bind(this),this.cameraItemRotationY=Oh.bind(this),this.cameraItemRotationX=Ih.bind(this),this.removeCameraCoverageArea3DMesh=Ph.bind(this),this.createCameraCoverageArea3DVisualization=kh.bind(this),this.calculateScreenPartDimenions=Fh.bind(this),this.setScreenPartMeshPosition=Mh.bind(this),this.getScreenPartLocalDepth=Ah.bind(this),this.renderFloorplanCameraView=Rh.bind(this),this.initializeSunLightPositionIntervalCalculation=Fd.bind(this),this.clearSunLightPositionInterval=Md.bind(this),this.updateSunLightPosition=Ad.bind(this),this.onSunLightPositionCoordinateSystemTransformReady=Rd.bind(this),this.deallocateSceneSunLightData=Ld.bind(this),this.onObjectConnectorsDataChange=sd.bind(this),this.addObjectConnectorObject=nd.bind(this),this.getObjectConnectorAdditionalParameters=ad.bind(this),this.getObjectsConnectorUnfixedBindedObjectParameters=rd.bind(this),this.objectConnectorBindedObjectsOnItemRemoveCheck=ld.bind(this),this.getIsFixed2DObjectsValue=hd.bind(this),this.updateRightBoxBindingComponent=cd.bind(this),this.handleLightSwitchClick=dd.bind(this),this.handleDoorWindowSwitchClick=pd.bind(this),this.handleFanSwitchClick=md.bind(this),this.handleCoverSwitchClick=ud.bind(this),this.handlePresenceBinaryDetectionUpdate=gd.bind(this),this.handleHVACUpdate=fd.bind(this),this.handleChristmasTreeUpdate=bd.bind(this),this.handleCameraUpdate=wd.bind(this),this.handleScreenUpdate=Cd.bind(this),this.handlePresenceAreaBindedObjectUpdate=xd.bind(this),this.calculatePresenceAreaDetectedObjectCoordinateValue=yd.bind(this),this.cloneUnfixedBindedObject3D=Sd.bind(this),this.createUnfixedItem=_d.bind(this),this.removeUnfixedItem=Dd.bind(this),this.toggleLightState=$h.bind(this),this.toggleFanState=ec.bind(this),this.toggleCoverState=tc.bind(this),this.toggleHVACState=ic.bind(this),this.toggleChristmasTreeState=oc.bind(this),this.onCameraClick=sc.bind(this),this.toggleScreenState=nc.bind(this),this.updateControlPanelState=ac.bind(this),this.calculateShapeGeometryUVMappings=vl.bind(this),this.calculateAngleBetween2DVectors=Tl.bind(this),this.createFloorplan3DXZPlaneBBoxPoints=jl.bind(this),this.calculateMaxXMaxZOffsetsFromCenterPoint=Ol.bind(this),this.calculateCurrentDate=Il.bind(this),this.calculateTextureWrapValues=Pl.bind(this),this.calculateRoomCoordsOutsideWithOrphans=kl.bind(this),this.changeCoordinateSystemBasisForPoints=Fl.bind(this),this.getSelectedDrawingOption=Ml.bind(this),this.filterFurnitureObjData=Al.bind(this),this.filterFreeFurnitureObjData=Rl.bind(this),this.filterFreeLightsObjData=Ll.bind(this),this.filterFreeHVACsObjData=Bl.bind(this),this.filterFreeFansObjData=Wl.bind(this),this.filterFreePresenceBinarysObjData=Vl.bind(this),this.filterFreeCoversObjData=Nl.bind(this),this.filterFreeCamerasObjData=El.bind(this),this.filterFreeScreensObjData=Hl.bind(this),this.removeNonWallFloorplanItemFrom3DArray=zl.bind(this),this.setCurrentFromFloorplanArrays=Gl.bind(this),this.getMaxFloorNumber=Ul.bind(this),this.isFloorHidden=ql.bind(this),this.calculateSunPosition=Kl.bind(this),this.sceneControlDropdownEventListenersHandler=Yl.bind(this),this.createSceneControlDropdownOutsideClickCheck=Xl.bind(this),this.updateSelectedFloor3DObject2DReferences=Zl.bind(this),this.createFloorplanTimeMesh=Uh.bind(this),this.createTextMesh=Wh.bind(this),this.createTextBackgroundMesh=Vh.bind(this),this.initializeSensorColorPaletteImageData=Nh.bind(this),this.calculateSensorRangeColoringColor=Eh.bind(this),this.createSensorMesh=Hh.bind(this),this.createOtherMesh=zh.bind(this),this.createPresenceAreaGroup=Gh.bind(this),this.createPointLight=qh.bind(this),this.createSpotLight=Kh.bind(this),this.createLightSourceMesh=Yh.bind(this),this.createScreenPartBasicLight=Xh.bind(this),this.createScreenPart3DGlowLight=Zh.bind(this),this.createScreenPartMesh=Jh.bind(this),this.createTextureMaterial=Qh.bind(this),this.renderSensorHeatmap=Wd.bind(this),this.renderSensorFloorHeatmap=Vd.bind(this),this.removeSensorHeatmapValueTextMeshes=Nd.bind(this),this.createSensorHeatmapValueTextMesh=Ed.bind(this),this.createSensorHeatmapPlane=Hd.bind(this),this.removeSensorHeatmapPlane=zd.bind(this),this.removeSensorHeatmap=Gd.bind(this),this.getRoomsMappingRenderTargetData=Ud.bind(this),this.createRoomsMappingRenderTarget=qd.bind(this),this.createSensorHeatmapPlaneMaterial=Kd.bind(this),this.getAvailableBindedNumberSensors=Yd.bind(this),this.getAvailableSensorUnitsData=Xd.bind(this),this.createSensorConnectorsFloorRoomsDistribution=Zd.bind(this),this.getSensorUnitFloorsRoomsDistribution=Jd.bind(this),this.getSensorHeatmapFloorsRoomsDistribution=Qd.bind(this),this.calculateSensorColoringIntermediateValues=$d.bind(this),this.updateDoorWindowMeshState=je.bind(this),this.setDoorWindowMeshToDefaultState=Oe.bind(this)}componentDidMount(){this.mounted=!0,this.initialize3DViewController()}componentWillUnmount(){this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),So(this.floorplan3DViewScene,this.floorplan3DViewRenderer),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene&&So(this.floorplan3DOnMapScene,this.floorplan3DOnMapRenderer),this.orbitControls&&this.orbitControls.dispose(),this.firstPersonControls&&this.firstPersonControls.dispose(),this.componentWillUnmountCustomCallback&&this.componentWillUnmountCustomCallback(),this.props.mainComponentThis.addOnDrawingControlerInstance&&(this.props.mainComponentThis.addOnDrawingControlerInstance.view3DController=null),this.mounted=!1}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"glamos-bottom-left-logo",style:{right:10,left:"auto"},children:(0,l.jsx)("img",{ref:this.glamosLogoImgRef,alt:"Glamos logo",src:Lc})}),(0,l.jsx)("canvas",{className:"full-height",ref:this.canvasRef}),(0,l.jsx)("div",{ref:this.mapLayer3DContainerRef,className:"map-layer-container floorplan3d"}),(0,l.jsxs)(Es.Z,{theme:Xs,children:[(0,l.jsx)("div",{ref:this.panelInfoExplanationBox,className:"panel-info-explanation-box",style:{width:"auto",maxWidth:200}}),(0,l.jsxs)("div",{ref:this.sceneControlToolsContainer,className:"scene-control-tools-container panel-transition scene-control",children:[(0,l.jsx)(Fp,{ref:this.cameraControlsRef,floorplan3DThis:this}),(0,l.jsx)(Lp,{ref:this.bindedObjectsHighlightInputRef,onChangeCallback:this.highlightBindedObjects}),(0,l.jsx)(Vp,{ref:this.clickableObjectsSceneControlRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)(Ap,{ref:this.roomCameraControlsRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)(Ep,{ref:this.sensorsHeatmapSceneControlRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis})]}),(0,l.jsx)(Up,{ref:this.floorplanFloorsSceneControlsSelectionRef,floorplan3DThis:this}),(0,l.jsx)(cn,{ref:this.maxShadowCastingLightsAlert}),(0,l.jsx)(cn,{ref:this.alertRef,delay:5e3}),(0,l.jsx)(cn,{ref:this.sunPositionAlertRef,delay:5e3}),(0,l.jsxs)(Fa,{panelRef:this.panel,panelWidth:this.panelWidth,children:[(0,l.jsx)("li",{className:"back-to-2d-container panel-action-button",children:(0,l.jsx)(Go,{type:"blue",onClick:this.backTo2D,children:"Back to 2D"})}),(0,l.jsx)(zp,{ref:this.floorplanFloorsPanelSelection3DRef,floorplan3DThis:this}),(0,l.jsx)("br",{}),(0,l.jsx)(Op,{floorplan3DThis:this}),(0,l.jsx)("br",{}),(0,l.jsx)(yp,{ref:this.wallsVisibilityOptionsRef,panelInfoExplanationBox:this.panelInfoExplanationBox,mainComponentThis:this}),(0,l.jsx)(Dp,{ref:this.wallsOpacityRef,mainComponentThis:this}),(0,l.jsx)("br",{}),(0,l.jsx)(nm,{ref:this.sensorsHeatmapRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis,setResponseError:this.props.setResponseError}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Export as PNG",onClick:this.onExportPngClick,children:[(0,l.jsx)(Un.Z,{}),(0,l.jsx)("p",{children:"EXPORT PNG"})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsx)(fr,{})}),(0,l.jsx)("li",{children:(0,l.jsx)(pr,{ref:this.showMapLayer3DInputRef,onChangeCallback:this.onShowOnMapLayer3DClick})}),(0,l.jsx)("li",{children:(0,l.jsx)(wr,{ref:this.sunLightControlsRef,floorplan3DThis:this})}),"HomeAssistant"===this.props.mainComponentThis.props.addOnIntegrationType&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(Ps,{label:"Add-on URL",value:this.props.mainComponentThis.props.customProps.isContainerApp?"".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port):"".concat(window.location.pathname).concat(window.location.search),containerStyle:{marginBottom:"1rem"}})]}),(0,l.jsx)(Tp,{ref:this.controlPanelRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis})]}),(0,l.jsx)("div",{ref:this.panelControl,className:"panel-control-container panel-transition svg-center-inside-container",title:this.state.isPanelShowed?"Hide settings":"Open settings",onClick:this.onPanelControlClick,children:this.state.isPanelShowed?(0,l.jsx)(Pa.Z,{className:"panel-transition"}):(0,l.jsx)(Zn.Z,{style:{padding:2,boxSizing:"border-box"}})}),(0,l.jsx)(rm,{ref:this.floorplanNavigationRef,floorplan3DThis:this,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)(hm,{ref:this.orbitControlsRotatePanModeSwitchRef})]})]})}}const dm=cm;var pm=i(1317);function mm(e,t,i,o){const s=this.panel.current.style.width.slice(0,-2);pm.log("Panel width "+s);let n,a=(s-this.offset.left)*t+i,r=e.minX-a,l=24*t+o,h=e.minY-l,c=this.taille_h*t+o-e.maxY,d=this.isSmallScreen()?null:Fi();return n=d?(this.taille_w-this.offset.left-d.offsetWidth)*t+i:(this.taille_w-this.offset.left)*t+i,{minX:r,maxX:n-e.maxX,minY:h,maxY:c}}function um(e,t,i){return t.width_viewbox_clone=t.width_viewbox_clone-i*this.zoomXMove,t.zoomFactor_clone=t.width_viewbox_clone/this.taille_w,t.originX_viewbox_clone=t.originX_viewbox_clone+i*this.zoomXMove/2,t.originY_viewbox_clone=t.originY_viewbox_clone+i*(this.zoomXMove/2)*this.ratio_viewbox,this.getBoxDimensionsForCurrentZoom(e,t.zoomFactor_clone,t.originX_viewbox_clone,t.originY_viewbox_clone)}function gm(e,t,i,o,s){let n=!0;do{if(pm.log("Do while "+i+" "+s+" "+JSON.stringify(t)+" params "+JSON.stringify(o)),-1===s){if(this.isOverMaxZoomOut(o.width_viewbox_clone,this.zoomXMove))break;n=t[i]<0}else{if(this.isOverMaxZoomIn(o.width_viewbox_clone,this.zoomXMove))break;let a={...o};n=(t=this.boxZoomSimulationSetZoomParameters(e,a,s))[i]>0}n&&(o.zoomLevelsNeeded=o.zoomLevelsNeeded+1*s,t=this.boxZoomSimulationSetZoomParameters(e,o,s))}while(n)}function fm(e,t,i){const o=this.showWholeBoxZoomOperations(e,t,i);this.width_viewbox=o.width_viewbox,this.height_viewbox=o.height_viewbox,this.originX_viewbox=o.originX_viewbox,this.originY_viewbox=o.originY_viewbox,this.zoomFactor=o.zoomFactor,this.zoom=o.zoom}function bm(e,t,i){this.originX_viewbox=e.x-this.width_viewbox/2,this.originY_viewbox=e.y-this.height_viewbox/2;const o=this.getBoxDimensionsForCurrentZoom(t,this.zoomFactor,this.originX_viewbox,this.originY_viewbox);if(o.minX<0){const e=this.panel.current.style.width.slice(0,-2);e-this.offset.left>this.taille_w/2&&(pm.log("Upao u zastitu left panela"),this.originX_viewbox+=Math.floor(o.minX),o.minX=t.minX-((e-this.offset.left)*this.zoomFactor+this.originX_viewbox))}o.minY<0&&24>this.taille_w/2*this.ratio_viewbox&&(pm.log("Upao u zastitu gornjeg dijela"),this.originY_viewbox+=Math.floor(o.minY),o.minY=t.minY-(24*this.zoomFactor+this.originY_viewbox)),this.showWholeBoxZoom(t,o,i)}function wm(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.getFloorplanWallsObjectsBBoxCoords(null!==t?t:this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber),o=Si(i);o&&this.centerAndShowWholeBoxOperations(o,i,e)}function Cm(e,t,i){let o={width_viewbox_clone:this.width_viewbox,originX_viewbox_clone:this.originX_viewbox,originY_viewbox_clone:this.originY_viewbox,zoomFactor_clone:this.zoomFactor,zoomLevelsNeeded:0};pm.log("Box rib dimensions"),pm.log(t);let s=[],n="zoomout",a=-1;for(let d in t)pm.log(d),t[d]<0&&s.push({value:t[d],propertyName:d,isVertical:"minY"===d||"maxY"===d});if(pm.log("Negative dimension"),pm.log(JSON.stringify(s)),0===s.length){for(let e in t)s.push({value:t[e],propertyName:e,isVertical:"minY"===e||"maxY"===e});n="zoomin",a=1}let r=null,l=s.filter((e=>!e.isVertical));if(l.length>0){r=l[0];for(let e=1;e<l.length;e++)l[e].value<r.value&&(r=l[e])}let h=null,c=s.filter((e=>e.isVertical));if(c.length>0){h=c[0];for(let e=1;e<c.length;e++)c[e].value<h.value&&(h=c[e])}if(r&&!h)pm.log("Samo horizontalni"),this.boxZoomSimulation(e,t,r.propertyName,o,a),!i&&this.zoomToSpecificLevel(n,Math.abs(o.zoomLevelsNeeded));else if(!r&&h)pm.log("Samo vertikalni"),this.boxZoomSimulation(e,t,h.propertyName,o,a),!i&&this.zoomToSpecificLevel(n,Math.abs(o.zoomLevelsNeeded));else{pm.log("Oba");let s=r.propertyName,l=h.propertyName;r.value>h.value&&(s=h.propertyName,l=r.propertyName),this.boxZoomSimulation(e,t,s,o,a),(t=this.getBoxDimensionsForCurrentZoom(e,o.zoomFactor_clone,o.originX_viewbox_clone,o.originY_viewbox_clone))[l]>0||(pm.log("Zoom druge dimenzije"),"zoomin"===n&&(a=-1),this.boxZoomSimulation(e,t,l,o,a)),!i&&this.zoomToSpecificLevel(n,Math.abs(o.zoomLevelsNeeded))}return!i&&this.setSvgViewBoxes(),pm.log("Levels needed "+o.zoomLevelsNeeded),{originX_viewbox:i?this.originX_viewbox:o.originX_viewbox_clone,originY_viewbox:i?this.originY_viewbox:o.originY_viewbox_clone,width_viewbox:i?this.width_viewbox:o.width_viewbox_clone,height_viewbox:i?this.height_viewbox:o.width_viewbox_clone*this.ratio_viewbox,zoomFactor:i?this.zoomFactor:o.zoomFactor_clone,zoom:this.zoom+o.zoomLevelsNeeded}}function xm(e,t){let i,o=t;if(pm.log("Initial zoom level change "+t+"zzoom type "+e),"zoomout"===e){if(this.isOverMaxZoomOut(this.width_viewbox,t*this.zoomXMove))for(o--;this.isOverMaxZoomOut(this.width_viewbox,o*this.zoomXMove);)o--;i=o*this.zoomXMove,this.setZoomParameters("zoomout",i,!1)}else{if(this.isOverMaxZoomIn(this.width_viewbox,t*this.zoomXMove))for(o--;this.isOverMaxZoomIn(this.width_viewbox,o*this.zoomXMove);)o--;pm.log("Zoom level change "+t),i=o*this.zoomXMove,this.setZoomParameters("zoomin",i,!1)}}function ym(e,t){let i;if("zoomin"===e){if(this.isOverMaxZoomIn(this.width_viewbox,t))return!1;this.width_viewbox-=t,i=this.taille_w/this.width_viewbox,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox+t/2,this.originY_viewbox=this.originY_viewbox+t/2*this.ratio_viewbox}else if("zoomout"===e){if(this.isOverMaxZoomOut(this.width_viewbox,t))return!1;this.width_viewbox+=t,i=this.taille_w/this.width_viewbox,this.height_viewbox=this.width_viewbox*this.ratio_viewbox,this.originX_viewbox=this.originX_viewbox-t/2,this.originY_viewbox=this.originY_viewbox-t/2*this.ratio_viewbox}return this.setScaleValueWidth(i),this.zoomFactor=this.width_viewbox/this.taille_w,!0}function Sm(e,t,i){if(this.showMapLayer2DInputRef.current.getCheckedStatus())var o=this.calcul_snap({pageX:this.offset.left,pageY:this.offset.top+this.offset.scrollY});if("zoomout"===e||"zoomin"===e){if(!this.setZoomParameters(e,t,!0))return}else"zoomreset"===e?(this.showHideLeftRightBoxes(),this.centerAndShowFloorplanAndUploadedFloorplanImage(!1)):"zoomright"===e?this.originX_viewbox+=i:"zoomleft"===e?this.originX_viewbox-=i:"zoomtop"===e?this.originY_viewbox-=i:"zoombottom"===e?this.originY_viewbox+=i:"zoomdrag"===e&&(this.originX_viewbox-=t,this.originY_viewbox-=i);this.showMapLayer2DInputRef.current.getCheckedStatus()&&("zoomreset"===e||"zoomout"===e||"zoomin"===e?this.handleMapZoomChange(o):this.handleMapDrag(o)),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),"zoomreset"!==e&&this.setSvgViewBoxes()}function _m(e){if(this.boxFloorplanImage.current.childNodes.length>0){const t=ki([this.uploadFloorplanImageToolsRef.current.getFloorplanImageBoundingBox(),this.getFloorplanWallsObjectsBBoxCoords(this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber)||{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}]);this.centerAndShowWholeBoxOperations(t[0],t[1],e)}else this.centerAndShowWholeFloor(e)}function Dm(e,t){const i=this.taille_w-e+t>(this.maxZoomInLevel-this.defaultZoomLevel)*this.zoomXMove;if(this.showMapLayer2DInputRef.current.getCheckedStatus()&&!i){const i=Bi(this._map.getCenter().lat,(e-t)/this.taille_w/this.meter);return pm.log("New map layer zoom "+i),i>22}return i}function vm(e,t){const i=e-this.taille_w+t>Math.abs(this.maxZoomOutLevel-this.defaultZoomLevel)*this.zoomXMove;if(this.showMapLayer2DInputRef.current.getCheckedStatus()&&!i){const i=Bi(this._map.getCenter().lat,(e+t)/this.taille_w/this.meter);return pm.log("New map layer zoom "+i),i<0}return i}function Tm(){if(this.taille_w-(this.maxZoomInLevelDefaultValue-this.defaultZoomLevel)*this.zoomXMove<0){let e=this.maxZoomInLevelDefaultValue-1;for(;this.taille_w-(e-this.defaultZoomLevel)*this.zoomXMove<0;)e--;this.maxZoomInLevel=e}else if(this.taille_w-(this.maxZoomInLevelDefaultValue-this.defaultZoomLevel)*this.zoomXMove>0){let e=this.maxZoomInLevelDefaultValue;for(;this.taille_w-(e+1-this.defaultZoomLevel)*this.zoomXMove>0;)e++;this.maxZoomInLevel=e}else this.maxZoomInLevel=this.maxZoomInLevelDefaultValue}function jm(e){const t=this.meter*e;let i="metric"===this.measureSystemContext.userUnit?t:M(this.imperialSystemSquareFeetSize,"feet","meter")*t;this.scaleVal.current.style.width=i+"px"}function Om(e){let t=e.coordsInsideWithOrphans,i="M"+t[0].x+","+t[0].y;for(let o=1;o<t.length-1;o++)i=i+" L"+t[o].x+","+t[o].y;if(i+="Z",e.inside.length>0)for(let o=0;o<e.inside.length;o++){i=i+" M"+this.Rooms.polygons[e.inside[o]].coords[this.Rooms.polygons[e.inside[o]].coords.length-1].x+","+this.Rooms.polygons[e.inside[o]].coords[this.Rooms.polygons[e.inside[o]].coords.length-1].y;for(let t=this.Rooms.polygons[e.inside[o]].coords.length-2;t>-1;t--)i=i+" L"+this.Rooms.polygons[e.inside[o]].coords[t].x+","+this.Rooms.polygons[e.inside[o]].coords[t].y}return i}function Im(e){let t=this.createRoomPath(e),i=this.qSVG.create(this.boxBind,"path",{id:"roomSelected",d:t,fill:"#c9c14c","fill-opacity":.5,stroke:"#c9c14c","fill-rule":"evenodd","stroke-width":3});return i.type="room",i.realRoomArea=e.realRoomArea,i.id=e.id,i}function Pm(){this.selectedBinder&&(this.selectedBinder.graph?this.selectedBinder.graph.remove():this.selectedBinder.remove(),this.selectedBinder.obj&&(this.isWindowObject(this.selectedBinder.obj.type)?this.removeWindowRotationAxisDirectionBinder():this.isCameraObject(this.selectedBinder.obj.type)?this.removeCameraCoverageAreaBinder():this.isPresenceAreaObject(this.selectedBinder.obj.type)&&this.removePresenceAreaBinder()),this.selectedBinder=null)}function km(){this.binder&&(this.binder.graph?this.binder.graph.remove():this.binder.remove(),this.isWindowObject(this.binder.type)&&this.removeWindowRotationAxisDirectionBinder(),this.binder=null)}function Fm(){this.windowRotationAxisDirectionGraph&&(this.windowRotationAxisDirectionGraph.remove(),this.windowRotationAxisDirectionGraph=null)}function Mm(){this.cameraCoverageAreaGraph&&(this.cameraCoverageAreaGraph.remove(),this.cameraCoverageAreaGraph=null)}function Am(){this.presenceAreaGraph&&(this.presenceAreaGraph.remove(),this.presenceAreaGraph=null)}var Rm=i(1317);function Lm(){this.hideSubItems(),this.razButton(),"block"===this.layerList.current.style.display?(Rm.log("Hide layer list"),fi(this.layerList.current,this.othersTimeout,null,!1),this.layersListArrowRef.current.classList.remove("down"),this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode"):(Rm.log("Show layer list"),gi(this.layerList.current,this.othersTimeout,null,"block",!1),this.layersListArrowRef.current.classList.add("down"),this.layerMode.current.classList.add("btn-success"),this.foncButton("layer_mode"),this.boxInfo.current.innerHTML="",this.modeOption=void 0),this.removeSelectedBinder()}function Bm(){"room_mode"!==this.mode&&(this.cursor("pointer"),I()?this.boxInfo.current.innerHTML="Touch room which you want to configure":this.boxInfo.current.innerHTML="Configure rooms",this.removeSelectedBinder(),this.foncButton("room_mode"))}function Wm(){"select_mode"!==this.mode&&(this.boxInfo.current.innerHTML="Select mode",this.removeSelectedBinder(),this.foncButton("select_mode"))}function Vm(){"none"!==this.uploadImageFloorplanShowRef.current.style.display?gi(this.boxFloorplanImage.current,this.othersTimeout,(()=>{gi(this.uploadImageFloorplanHideRef.current,0,null,"inline",!1),fi(this.uploadImageFloorplanShowRef.current,0,null,!1),this.uploadFloorplanImageStatusContainerRef.current.title="Hide floorplan image"}),"inline",!1):(Rm.log("Sakrij floorplan image"),fi(this.boxFloorplanImage.current,this.othersTimeout,(()=>{gi(this.uploadImageFloorplanShowRef.current,0,null,"inline",!1),fi(this.uploadImageFloorplanHideRef.current,0,null,!1),this.uploadFloorplanImageStatusContainerRef.current.title="Show floorplan image"}),!1))}function Nm(){("upload_floorplan_image_mode"!==this.mode||"upload_floorplan_image_mode"===this.mode&&!Fi())&&(this.removeSelectedBinder(),this.hideSubItems(),this.translateRightBox(this.floorplanImageTools.current,-250,!0),this.foncButton("upload_floorplan_image_mode"),this.cursor("default"),this.boxInfo.current.innerHTML="Upload floorplan image")}function Em(){"layer_mode"===this.mode&&"block"===this.layerList.current.style.display?(fi(this.layerList.current,this.othersTimeout,null,!1),this.layersListArrowRef.current.classList.remove("down")):(this.hideActiveRightBox(),this.removeSelectedBinder(),"upload_floorplan_image_mode"!==this.mode&&"floorplan_image_scaling"!==this.mode&&"floorplan_image_translation"!==this.mode||(this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group")&&this.boxFloorplanImage.current.querySelector(".floorplan-image-scaling-group").remove(),this.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group")&&this.boxFloorplanImage.current.querySelector(".floorplan-image-translate-group").remove()))}function Hm(){this.selectMode.current.classList.remove("btn-success"),this.selectMode.current.classList.add("btn-default"),this.roomMode.current.classList.remove("btn-success"),this.roomMode.current.classList.add("btn-default"),this.uploadFloorplanImageMode.current.classList.remove("btn-success"),this.uploadFloorplanImageMode.current.classList.add("btn-default"),this.layerMode.current.classList.remove("btn-success"),this.layerMode.current.classList.add("btn-default")}function zm(e,t){if("dont_save"!==t&&this.save(!1,!1),Rm.log("Option: "+t),"layer_mode"!==e){let t;"upload_floorplan_image_mode"!==e&&this.hideSubItems(),this.razButton(),"select_mode"===e?t=this.selectMode:"room_mode"===e?t=this.roomMode:"upload_floorplan_image_mode"===e&&(t=this.uploadFloorplanImageMode),t.current.classList.remove("bnt-default"),t.current.classList.add("btn-success")}Rm.log("New mode "+e),this.mode=e,this.modeOption=t,this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null)}var Gm=i(1317);const Um=(e,t,i)=>{if(i){const i="GLAMOS_'Floorplan_".concat((new Date).getDate().toString().padStart(2,"0"),"_").concat(((new Date).getMonth()+1).toString().padStart(2,"0"),"_").concat((new Date).getFullYear());if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob){const t=e.msToBlob();navigator.msSaveOrOpenBlob(t,i)}else{((e,t)=>{let i=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),o=document.createElement("a");o.setAttribute("download",t),o.setAttribute("href",e),o.setAttribute("target","_blank"),o.dispatchEvent(i)})(e.toDataURL("image/png"),i)}t(!0)}else t(e.toDataURL("image/png"))};function qm(e,t,i,o,s,n,r,l,h){return new Promise(((c,d)=>{const p=l?0:60;if(i.drawImage(e,0,0),o.revokeObjectURL(s),r){let e=new Image;e.onload=()=>{i.drawImage(e,(h.width+2*p)/2-83,h.height+2*p-50,166,40),Um(t,c,n)},e.onerror=e=>{this.boxInfo.current.innerHTML="Ooops. An error happened during exporting to png.",d(e)},e.src=a}else Um(t,c,n)}))}function Km(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new Promise(((a,r)=>{Gm.log(s);const l=(s,n)=>new Promise(((a,r)=>{s.style.width="",s.style.height="";const l=i?0:60;s.setAttribute("viewBox",n.minX-l+" "+(n.minY-l)+" "+(n.width+2*l)+" "+(n.height+2*l)),s.setAttribute("width",n.width+2*l),s.setAttribute("height",n.height+2*l),o||(s.style.backgroundColor="#ffffff"),Oi(s,s);let h=document.createElement("canvas");this.exportPngResolutionScale=4;const c=1e4;(n.width+2*l)*this.exportPngResolutionScale>c&&(this.exportPngResolutionScale=T(c/(n.width+2*l),2)),(n.height+2*l)*this.exportPngResolutionScale>c&&(this.exportPngResolutionScale=T(c/(n.height+2*l),2)),h.width=(n.width+2*l)*this.exportPngResolutionScale,h.height=(n.height+2*l)*this.exportPngResolutionScale,Gm.log("Canvas element"),Gm.log(h);let d=h.getContext("2d");d.scale(this.exportPngResolutionScale,this.exportPngResolutionScale);let p=(new XMLSerializer).serializeToString(s),m=window.URL||window.webkitURL||window,u=new Image,g=new Blob([p],{type:"image/svg+xml;charset=utf-8"}),f=m.createObjectURL(g);u.onload=()=>{a(this.exportFloorplanPngOnLoadCallback(u,h,d,m,f,e,t,i,n))},u.onerror=e=>{this.boxInfo.current.innerHTML="Ooops. An error happened during exporting to png.",r(e)},u.src=f}));let h,c;if(n)h=n.svgElement,c=n.bboxCoords,l(h,c).then((e=>a(e))).catch((e=>r(e)));else{let e=this.linRef.current.cloneNode(!0);c=this.getFloorplanWallsObjectsBBoxCoords(this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber),this.exportPngShowGrid?e.querySelector(".boxGrid").style.opacity=1:e.querySelector(".boxGrid").remove(),this.exportPngShowMeasures?e.querySelector("#boxRib").style.display="inline":e.querySelector("#boxRib").remove(),e.querySelector("#boxScale").remove(),e.querySelector("#boxBind").remove(),e.querySelector("#boxFloorDrawingHelper").remove();const t=e.querySelector("#boxRoom"),i=e.querySelector("#room-textures-container"),o=t.querySelectorAll("path");let s=[];for(let n=0;n<o.length;n++){const e=o[n].getAttribute("fill");if(e&&e.startsWith("url(#room-texture_")){const t=e.split("#")[1].slice(0,-1),o=i.querySelector("#".concat(t)),n=o&&o.querySelector("image");if(n){const e=n.getAttribute("href");let t=e.split("/");t=t[t.length-1].split(".")[0];const i=s.find((e=>e.imageName===t));i?i.imagePatternElements.push(n):s.push({imageName:t,imageHref:e,imagePatternElements:[n],dataURL:null})}}}s.length>0?s.forEach((t=>{const i=new Image;i.onload=()=>{const o=document.createElement("canvas");o.width=Kt[t.imageName].width,o.height=Kt[t.imageName].height;o.getContext("2d").drawImage(i,0,0,Kt[t.imageName].width,Kt[t.imageName].height),t.dataURL=o.toDataURL("image/png"),t.imagePatternElements.forEach((e=>{e.setAttribute("href",t.dataURL)})),s.find((e=>null===e.dataURL))||l(e,c).then((e=>a(e))).catch((e=>r(e)))},i.onerror=e=>Gm.log("Room pattern image loading error",e),i.crossOrigin="anonymous",i.src=t.imageHref})):l(e,c).then((e=>a(e))).catch((e=>r(e)))}}))}var Ym=i(1317);function Xm(){this.HISTORY=[],this.HISTORY.index=0,window.localStorage.removeItem("history")}function Zm(e,t){"set_name"===e&&(this.boxPlanName.current.innerHTML=t)}function Jm(e,t){((e,t)=>{for(let i in e)null!=e[i].child&&(e[i].child=e.indexOf(e[i].child)),null!=e[i].parent&&(e[i].parent=e.indexOf(e[i].parent));for(let i=0;i<t.length;i++)t[i].up&&delete t[i].up,t[i].down&&delete t[i].down})(this.WALLS,this.OBJDATA),Ym.log("OBJ DATA"),Ym.log(this.OBJDATA);let i={floorHeight:this.floorHeight,objData:this.OBJDATA,wallData:this.WALLS,roomData:this.ROOM,floorNumber:this.floorNumber,floorNote:this.floorNote,groundColor:this.groundColor,skyColorType:this.skyColorType,skyColor:this.skyColor,clockVisibility:this.clockVisibility,ambientLightIntensity:this.ambientLightIntensity};const o=JSON.stringify(no(i));let s=[this.HISTORY[this.HISTORY.index-1],this.lastSavedObject];for(let n=0;n<s.length;n++)s[n]&&(s[n]=JSON.parse(s[n]),s[n]=no(s[n]),s[n]=JSON.stringify(s[n]));this.saveNeeded=!!s[1]&&o!==s[1],this.determineBoxPlanNameValue(this.saveNeeded?"save":"remove_asterisk");return o!==s[0]?(t&&(this.boxInfo.current.innerHTML=""),e&&window.localStorage.removeItem("history"),this.HISTORY.index<this.HISTORY.length&&this.HISTORY.splice(this.HISTORY.index,this.HISTORY.length-this.HISTORY.index),O(i)||(Ym.log("Resetiraj history"),this.resetHistory()),this.HISTORY.push(JSON.stringify(i)),Ym.log("History IN SAVE:"),Ym.log(this.HISTORY),window.localStorage.setItem("history",JSON.stringify(this.HISTORY)),this.HISTORY.index++,this.setWallsChildParentValues(this.WALLS),!0):(this.setWallsChildParentValues(this.WALLS),Ym.log("Ne spremaj duplicirani HISTORY"),!1)}function Qm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.HISTORY.index,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=[];if(i)s=i;else{if(0===this.HISTORY.length&&!t)return!1;s=JSON.parse(window.localStorage.getItem("history")),s=JSON.parse(s[e])}this.WALLS=s.wallData,Ym.log(this.WALLS),this.setWallsChildParentValues(this.WALLS),this.ROOM=s.roomData,this.editor.architect(this.WALLS),Ym.log("OBJ DATA IN LOAD"),Ym.log(this.OBJDATA);for(let n in this.OBJDATA)this.OBJDATA[n].graph.remove();this.OBJDATA=[];for(let n in s.objData){let e=s.objData[n];if("text"===e.class||"homeAssistant"===e.class||"sensors"===e.class||"presence_area"===e.class||""!==this.getObjectFolderName(e.type)){e.hinge||(e.hinge="normal");let t=this.createObj2DClassInstanceFromObj(e);this.OBJDATA.push(t),this.boxCarpentry.current.appendChild(this.OBJDATA[this.OBJDATA.length-1].graph),t.update(this),Ym.log("End object"),Ym.log(t)}else Ym.log("Obj filtered",e.type)}if(!o){this.wallIdCounter=this.WALLS.length;for(let e=0;e<this.ROOM.length;e++)this.ROOM[e].id=e;this.roomIdCounter=this.ROOM.length}this.editor.showScaleBox(),this.rib()}function $m(e,t){this.floorplanFloorsPanelBoxRef.current.setSelectedFloorplanFloor(e,(()=>{this.resetHistory(),this.lastSavedObject=null,this.setFloorParametersValues(e),this.load(0,!1,e),this.save(!0,!1),this.lastSavedObject=this.HISTORY[this.HISTORY.length-1],this.centerAndShowWholeFloor(!1),this.showMapLayer2DInputRef.current.getCheckedStatus()&&this._map&&this.onMapContextLoadedCallback2D(this._map),ji(this.boxFloorDrawingHelper.current),this.floorDrawingHelperOptionsRef.current.getCheckedStatus()&&this.drawUnderlyingFloorDrawingHelper(e),t&&t()}))}function eu(){if(this.isFloorplanNoWalls()){const e=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();for(let t=0;t<this.floorplanFloorsData.length;t++){if((this.floorplanFloorsData[t].floorNumber===e.floorNumber?this.OBJDATA:this.floorplanFloorsData[t].objData).length>0)return!1}return!0}return!1}function tu(){const e=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();for(let t=0;t<this.floorplanFloorsData.length;t++){if((this.floorplanFloorsData[t].floorNumber===e.floorNumber?this.WALLS:this.floorplanFloorsData[t].wallData).filter((e=>!Mi(e.start,e.end))).length>0)return!1}return!0}var iu=i(1317);function ou(e,t){let i,o;if(e.touches){let t=e.changedTouches;i=t[0].pageX,o=t[0].pageY}else i=e.pageX,o=e.pageY;let s,n,a=(i-this.offset.left)*this.zoomFactor+this.originX_viewbox,r=(o-this.offset.scrollY-this.offset.top)*this.zoomFactor+this.originY_viewbox;return"on"===t&&(s=Math.round(a/this.grid)*this.grid,n=Math.round(r/this.grid)*this.grid),"off"===t&&(s=a,n=r),{x:s,y:n,xMouse:a,yMouse:r}}function su(e,t){return{screenX:(e-this.originX_viewbox)/this.zoomFactor+this.offset.left,screenY:(t-this.originY_viewbox)/this.zoomFactor+this.offset.scrollY+this.offset.top}}function nu(e){this.linRef.current.style.cursor=e}function au(){let e=Fi();iu.log("Queried element"),iu.log(e),e&&(e!==this.floorplanImageTools.current?e.querySelector(".close-rightBox").click():this.uploadFloorplanImageToolsRef.current.onInsertFlorplanImageClose(null,!0))}function ru(e,t,i){i?e.classList.add("active"):e.classList.remove("active"),this.isSmallScreen()&&this.isPanelMaximized()&&this.onPanelControlClick(),this.isSmallScreen()?this.rightControlsBox.current.style.transform="translateX(-150px)":this.rightControlsBox.current.style.transform="translateX(".concat(i?t-150:-150,"px)"),e.style.transform="translateX(".concat(t,"px)")}function lu(){this.preventFloorParametersOpening||(this.hideActiveRightBox(),this.translateRightBox(this.floorParameters.current,-250,!0))}function hu(e,t,i,o,s,n,a){let r=arguments.length>7&&void 0!==arguments[7]&&arguments[7];iu.log(r);let l=[];if(l.params={},l.params.bindBox=!1,l.params.move=!1,l.params.resize=!1,l.params.rotate=!1,"onWall"===e&&(l.params.onWallOffsetAngle=0),"socle"===t&&l.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+s/2+" L "+o/2+","+s/2+" L "+o/2+","+-s/2+" Z",fill:"#19ab7f",stroke:"#19ab7f",strokeDashArray:""}),"lights"===t){l.params.bindBox=!0,l.params.move=!0;const e=-o/2,t=.5*-s,n=o/2,a=.5*s;"onWall"===qe[this.lightsDetails[i].itemType]?(l.push({path:"M".concat(o/2," ").concat(-s/2," L").concat(o/2," ").concat(s/2," M").concat(e," ").concat(t," L").concat(n," ").concat(a," M").concat(e," ").concat(a," L").concat(n," ").concat(t),fill:"none",stroke:"#333",strokeDashArray:""}),l.params.onWallOffsetAngle=90):l.push({path:"M".concat(e," ").concat(t," L").concat(n," ").concat(a," M").concat(e," ").concat(a," L").concat(n," ").concat(t),fill:"none",stroke:"#333",strokeDashArray:""}),l.params.width=o,l.params.height=s}if("furniture"===t)if(l.params.bindBox=!0,l.params.move=!0,l.params.resize=!0,l.params.rotate=!0,this.isStaircaseObject(i)){l.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+s/2+" L "+o/2+","+s/2+" L "+o/2+","+-s/2+" Z",fill:"#fff",stroke:"#333",strokeDashArray:""});const e=s/n;for(var h=1;h<n+1;h++)l.push({path:"M "+-o/2+","+(-s/2+h*e)+" L "+o/2+","+(-s/2+h*e),fill:"none",stroke:"#333",strokeDashArray:"none"})}else!this.furnitureAsyncPatternRef.current.isPatternLoaded(i)&&this.furnitureAsyncPatternRef.current.loadPattern(i),l.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+s/2+" L "+o/2+","+s/2+" L "+o/2+","+-s/2+" Z",fill:"url(#".concat(i,")"),strokeDashArray:""});if("homeAssistant"===t&&"other_entity"===i&&(l.params.bindBox=!0,l.params.move=!0,l.params.resize=!1,l.params.rotate=!1,l.push({path:this.qSVG.circlePath(0,0,o),fill:"#fff",stroke:"#333",strokeDashArray:""})),"sensors"===t&&"sensor"===i&&(l.params.bindBox=!0,l.params.move=!0,l.params.resize=!1,l.params.rotate=!1,l.push({path:"M "+-o/2+",0 L "+-o/4+","+-o*Math.sqrt(3)/4+" L "+o/4+","+-o*Math.sqrt(3)/4+" L "+o/2+",0 L "+o/4+","+o*Math.sqrt(3)/4+" L "+-o/4+","+o*Math.sqrt(3)/4+" Z",fill:"#fff",stroke:"#333",strokeDashArray:""})),"doorWindow"===t&&(l.push({path:"M "+-o/2+","+-s/2+"L "+-o/2+","+s/2+"L "+o/2+","+s/2+"L "+o/2+","+-s/2+" Z",fill:"#ccc",stroke:"none",strokeDashArray:""}),fo(i)?l.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+(-o-s/2)+"  A"+o+","+o+" 0 0,1 "+o/2+","+-s/2,fill:"none",stroke:this.colorWall,strokeDashArray:""}):bo(i)&&(l.push({path:"M "+-o/2+","+-s/2+" L "+-o/2+","+(-o/2-s/2)+" A"+o/2+","+o/2+" 0 0,1 0,"+-s/2,fill:"none",stroke:this.colorWall,strokeDashArray:""}),l.push({path:"M "+o/2+","+-s/2+" L "+o/2+","+(-o/2-s/2)+" A"+o/2+","+o/2+" 0 0,0 0,"+-s/2,fill:"none",stroke:this.colorWall,strokeDashArray:""})),l.params.resize=!0),"measure"===t&&(l.params.bindBox=!0,l.push({path:"M-"+o/2+",0 l10,-10 l0,8 l"+(o-20)+",0 l0,-8 l10,10 l-10,10 l0,-8 l-"+(o-20)+",0 l0,8 Z",fill:"#729eeb",stroke:"none",strokeDashArray:""})),"boundingBox"===t&&l.push({path:"M"+(-o/2-10)+","+(-s/2-10)+" L"+(o/2+10)+","+(-s/2-10)+" L"+(o/2+10)+","+(s/2+10)+" L"+(-o/2-10)+","+(s/2+10)+" Z",fill:"none",stroke:"#aaa",strokeDashArray:""}),"text"===t&&(l.params.bindBox=!0,l.params.move=!0,l.params.rotate=!0,l.push({text:n.text,x:"0",y:"0",fill:i,stroke:i,fontSize:n.size+"px",strokeWidth:"0px"})),"presence_area"===t){l.params.bindBox=!0,l.params.move=!0,l.params.resize=!1,l.params.rotate=!1;const e=-s/2;l.push({path:"M ".concat(-o/2," ").concat(-s/2+e," H ").concat(o/2," V ").concat(s/2+e," H ").concat(-o/2," Z"),strokeDashArray:5.5,stroke:"#000",fill:"none"});const t=.1*o;l.push({path:"M ".concat(-o/4," ").concat(-s/4+e," m-").concat(t,",0 a").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0 a").concat(t,",").concat(t," 0 1,0 -").concat(2*t,",0"),fill:"#000"}),l.push({path:"M ".concat(o/4," ").concat(-s/8+e," m-").concat(t,",0 a").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0 a").concat(t,",").concat(t," 0 1,0 -").concat(2*t,",0"),fill:"#000"}),l.push({path:"M ".concat(0," ",s/4+e," m-").concat(t,",0 a").concat(t,",").concat(t," 0 1,0 ").concat(2*t,",0 a").concat(t,",").concat(t," 0 1,0 -").concat(2*t,",0"),fill:"#000"})}return l}function cu(){Fi()&&(this.hideActiveRightBox(),this.removeSelectedBinder())}function du(){this.isSmallScreen()?(this.hideRightBox(),this.minimizePanel(this.smallScreenMinimizedPanelSize)):this.panel.current.style.width==="".concat(this.smallScreenMinimizedPanelSize,"px")?this.minimizePanel(this.bigScreenMinimizedPanelSize):this.panel.current.style.width==="".concat(this.smallScreenMaximizedPanelSize,"px")&&this.maximizePanel(this.bigScreenMaximizedPanelSize)}function pu(){if(this.isSmallScreen())this.rightControlsBox.current.style.transform="translateX(-150px)";else{const t=Fi();this.rightControlsBox.current.style.transform="translateX(".concat(t?(e=t.style.transform,-parseFloat(e.replace(/[^\d.]/g,""))-150):-150,"px)")}var e}function mu(){return this.panel.current.style.width==="".concat(this.smallScreenMaximizedPanelSize,"px")||this.panel.current.style.width==="".concat(this.bigScreenMaximizedPanelSize,"px")}function uu(){return this.taille_w<this.smallScreenPixelSize}function gu(){return this.props.floorplanID}function fu(){let e=this.boxPlanName.current.innerHTML;return""===e||"Draft(not saved)"===e?null:"*"===e[e.length-1]?e.slice(0,e.length-1):e}function bu(){this.linRef.current.setAttribute("viewBox",this.originX_viewbox+" "+this.originY_viewbox+" "+this.width_viewbox+" "+this.height_viewbox),this.gridSvgElementRef.current.setAttribute("viewBox",this.originX_viewbox+" "+this.originY_viewbox+" "+this.width_viewbox+" "+this.height_viewbox)}function wu(e,t,i){const{translateX:o,translateY:s}=io(e,i),n=this.qSVG.create("none","path",{d:"M"+t.point2.x+" "+t.point2.y+" Q "+t.controlPoint.x+" "+t.controlPoint.y+" "+t.point1.x+" "+t.point1.y,"stroke-width":2,stroke:"#f00",fill:"transparent","marker-end":"url(#window-rotation-direction-arrow-triangle)"});return{svgGroupElement:this.qSVG.create("none","g",{transform:"translate(".concat(o,", ").concat(s,") rotate(").concat(e.angle+90,",0,0) scale(").concat("up"===i?1:-1,", 1)")}),curveArrowPath:n}}function Cu(e){if(!wo(e.type))return;const t=e.additionalParams.rotationDirection||"up";let i=e.additionalParams.rotationAxis||"start";bo(e.type)&&!this.windowDoubleAxisRotationOptions.find((e=>e.rotationAxis===i&&e.rotationDirection===t))&&(i=this.windowDoubleAxisRotationOptions.find((e=>e.rotationDirection===t)).rotationAxis);const o=to(i,t,e);e.additionalParams.rotationDirection=t,e.additionalParams.rotationAxis=i,e.additionalParams.curvePoints={point1:{x:o.curvePoint1X,y:o.curvePoint1Y},point2:{x:o.curvePoint2X,y:o.curvePoint2Y},controlPoint:{x:o.controlPointX,y:o.controlPointY}},e.additionalParams.controlPointOnWall={x:o.transformedControlPointOnWallCoordinates.x,y:o.transformedControlPointOnWallCoordinates.y},e.additionalParams.arrowControlPoint={x:o.transformedArrowControlPointCoordinates.x,y:o.transformedArrowControlPointCoordinates.y};const s=this.editor.rayCastingWall({x:e.x,y:e.y},!0);if(s){const t=e.angleSign;this.inWallonWallObjectBinderAngleCalculation(s,e.additionalParams.arrowControlPoint,e),e.additionalParams.arrowControlPointAngleSign=e.angleSign,e.angleSign=t}}function xu(e,t,i){let o=this.qSVG.angleDeg(e.start.x,e.start.y,e.end.x,e.end.y),s=this.qSVG.vectorXY({x:e.start.x,y:e.start.y},{x:e.end.x,y:e.end.y}),n=this.qSVG.vectorXY({x:e.end.x,y:e.end.y},t),a=this.qSVG.vectorDeter(s,n);return i.angleSign=0,1===Math.sign(a)&&(i.angleSign=1,o+=180),o}function yu(e,t,i,o){let s=Pi(e.equations.base,o[ho(o)],t);return!!(this.qSVG.btwn(s[0].x,e.start.x,e.end.x)&&this.qSVG.btwn(s[0].y,e.start.y,e.end.y)&&this.qSVG.btwn(s[1].x,e.start.x,e.end.x)&&this.qSVG.btwn(s[1].y,e.start.y,e.end.y))&&(o.x=t.x,o.y=t.y,o.angle=this.inWallonWallObjectBinderAngleCalculation(e,i,o),o.limit=s,co(o,e),o.update(this),!0)}function Su(e,t,i){const o=Ki(e.start,e.end),s=ho(i);if(i[s]>o){const n={x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2};i.x=n.x,i.y=n.y,i.angle=this.inWallonWallObjectBinderAngleCalculation(e,t,i),i.limit=[{x:e.start.x,y:e.start.y},{x:e.end.x,y:e.end.y}],co(i,e),i[s]=o,i.update(this)}}function _u(e,t,i,o){const s=o.obj,n=ho(o),a=Ki(e.start,e.end),r=o[n];if(r>a)return this.setInWallOnWallObjectWidthToWallWidth(e,i,o),s&&(s[n]=o[n]),!0;if(this.wallItemObjOriginalWidth<a){const a=o[n];return o[n]=this.wallItemObjOriginalWidth,this.inWallonWallObjectBinderJoinToWall(e,t,i,o)?(s&&(s[n]=this.wallItemObjOriginalWidth),!0):(o[n]=a,this.inWallonWallObjectBinderJoinToWall(e,t,i,o))}return r===a?(o.angle=this.inWallonWallObjectBinderAngleCalculation(e,i,o),co(o,e),o.update(this),!1):this.inWallonWallObjectBinderJoinToWall(e,t,i,o)}function Du(e,t,i){let o;if(o=this.editor.nearWall(this.snap,t)){let t=o.wall;this.cursor("crosshair"),this.binder?e&&this.inWallonWallObjectForceJoinToWall(t,o,this.snap,this.binder):(this.binder=i(t,o),this.wallItemObjOriginalWidth=this.binder[ho(this.binder)],this.binder.angle=this.inWallonWallObjectBinderAngleCalculation(t,this.snap,this.binder),co(this.binder,t),this.binder.update(this),this.boxBind.current.appendChild(this.binder.graph))}else this.removeBinder()}function vu(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const n=[{x:e.x-i,y:e.y-o},{x:e.x-i,y:e.y+o},{x:e.x+i,y:e.y+o},{x:e.x+i,y:e.y-o}];oo(n,e,R(s));for(let a=0;a<t.length;a++)if(this.qSVG.polygonPolygonIntersect(n,t[a].coords))return!1;return!0}function Tu(e,t){const{titleText:i}=this.determineObj2DInfoTexts(e,"rightBoxTextContents");this.wallItemToolsTitle.current.innerHTML=i,this.isDoorObject(e.type)&&fo(e.type)?gi(this.doorHinge.current,0):fi(this.doorHinge.current,0),this.hideActiveRightBox(),this.translateRightBox(this.wallItemToolsRef.current,-this.rightBoxWidth,!0),this.setWallItemToolsValue(e,t)}function ju(e,t){"text"===e.class?gi(this.freeItemTextToolsRef.current,0):fi(this.freeItemTextToolsRef.current,0);const{titleText:i}=this.determineObj2DInfoTexts(e,"rightBoxTextContents");this.freeItemTitleRef.current.innerHTML=i,this.hideActiveRightBox(),this.translateRightBox(this.freeItemToolsRef.current,-this.rightBoxWidth,!0),this.setFreeItemToolsValue(e,t)}function Ou(e,t){const{titleText:i}=this.determineObj2DInfoTexts(e,"rightBoxTextContents");this.presenceAreaToolsTitle.current.innerHTML=i,this.hideActiveRightBox(),this.translateRightBox(this.presenceAreaToolsRef.current,-this.rightBoxWidth,!0),this.setPresenceAreaToolsValue(e),this.presenceAreaItemToolsCustomSetter(e,t)}function Iu(e,t){if("text"===e.class)switch(t){case"onDeleteMessage":return"Text deleted";case"onRightBoxOpenMessage":return"Modify text";case"rightBoxTextContents":return{titleText:"Modify text",deleteText:"Delete text"}}else if("lights"===e.class)switch(t){case"onDeleteMessage":return"Light deleted";case"onRightBoxOpenMessage":return"Modify light";case"rightBoxTextContents":return{titleText:"Modify light",deleteText:"Delete light"}}else if("doorWindow"===e.class)if(this.isDoorObject(e.type))switch(t){case"onDeleteMessage":return"Door deleted";case"onRightBoxOpenMessage":return"Modify door";case"rightBoxTextContents":return{titleText:"Modify door",deleteText:"Delete door"}}else if(this.isWindowObject(e.type))switch(t){case"onDeleteMessage":return"Window deleted";case"onRightBoxOpenMessage":return"Modify window";case"rightBoxTextContents":return{titleText:"Modify window",deleteText:"Delete window"}}else iu.error("Invalid determineObj2DInfoTexts");else if("furniture"===e.class)if(this.isFanObject(e.type))switch(t){case"onDeleteMessage":return"Fan deleted";case"onRightBoxOpenMessage":return"Modify fan";case"rightBoxTextContents":return{titleText:"Modify fan",deleteText:"Delete fan"}}else if(this.isCoverObject(e.type))switch(t){case"onDeleteMessage":return"Cover deleted";case"onRightBoxOpenMessage":return"Modify cover";case"rightBoxTextContents":return{titleText:"Modify cover",deleteText:"Delete cover"}}else if(this.isPresenceBinaryObject(e.type))switch(t){case"onDeleteMessage":return"Presence point deleted";case"onRightBoxOpenMessage":return"Modify presence point";case"rightBoxTextContents":return{titleText:"Modify presence",deleteText:"Delete presence"}}else if(this.isHVACObject(e.type))switch(t){case"onDeleteMessage":return"HVAC deleted";case"onRightBoxOpenMessage":return"Modify HVAC";case"rightBoxTextContents":return{titleText:"Modify HVAC",deleteText:"Delete HVAC"}}else if(this.isCameraObject(e.type))switch(t){case"onDeleteMessage":return"Camera deleted";case"onRightBoxOpenMessage":return"Modify camera";case"rightBoxTextContents":return{titleText:"Modify camera",deleteText:"Delete camera"}}else if(this.isScreenObject(e.type))switch(t){case"onDeleteMessage":return"Screen deleted";case"onRightBoxOpenMessage":return"Modify screen";case"rightBoxTextContents":return{titleText:"Modify screen",deleteText:"Delete screen"}}else switch(t){case"onDeleteMessage":return"Furniture deleted";case"onRightBoxOpenMessage":return"Modify furniture";case"rightBoxTextContents":return{titleText:"Modify furniture",deleteText:"Delete furniture"}}else if("homeAssistant"===e.class)switch(t){case"onDeleteMessage":return"Entity deleted";case"onRightBoxOpenMessage":return"Modify entity";case"rightBoxTextContents":return{titleText:"Modify entity",deleteText:"Delete entity"}}else if("sensors"===e.class)switch(t){case"onDeleteMessage":return"Sensor deleted";case"onRightBoxOpenMessage":return"Modify sensor";case"rightBoxTextContents":return{titleText:"Modify sensor",deleteText:"Delete sensor"}}else if(this.isPresenceAreaObject(e.type))switch(t){case"onDeleteMessage":return"Presence area deleted";case"onRightBoxOpenMessage":return"Modify presence area";case"rightBoxTextContents":return{titleText:"Modify presence",deleteText:"Delete presence"}}else iu.error("Invalid determineObj2DInfoTexts")}function Pu(e,t){const{titleText:i}=this.determineObj2DInfoTexts(e,"rightBoxTextContents");this.sensorOtherToolsTitleRef.current.innerHTML=i,this.hideActiveRightBox(),this.translateRightBox(this.sensorOtherToolsRef.current,-this.rightBoxWidth,!0),this.sensorOtherItemToolsCustomSetter(e,t)}function ku(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centimeter",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inch";return $i(parseFloat(e),this.measureSystemContext.userUnit,"metric"===this.measureSystemContext.userUnit?t:i,"meter",!0)*this.meter}function Fu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"centimeter",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inch",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.itemDimensionsDecimalPrecision;return Qi(e/this.meter,this.measureSystemContext.userUnit,"meter","metric"===this.measureSystemContext.userUnit?t:i,o,!1,!1,!0)}function Mu(e,t){const i=this.boxRoom.current.querySelector('[data-room-id="'.concat(this.selectedRoomId,'"]')),o=!q.isHexColor(e);i&&i.setAttribute("fill",o?e:"none"!==e?"url(#room-texture_".concat(this.selectedRoomId,")"):"none"),this.editor.renderRoomTextures(this.ROOM.map((i=>({...i,...i.id===this.selectedRoomId&&{...e&&{floorTexture:e},...t>=0&&{floorTextureRepeatCount:t}}}))))}function Au(e){if(!this.binder)return this.foncButton("select_mode"),!1;this.binder.id=(0,fn.v4)(),this.OBJDATA.push(this.binder),this.binder.graph.remove(),this.boxCarpentry.current.appendChild(this.OBJDATA[this.OBJDATA.length-1].graph),this.binder=null,this.boxInfo.current.innerHTML=e,this.saveNeeded=!0,this.save(!1,!1)}function Ru(e,t,i){const o="groundColor"===i?this.groundColorDefaultValue:this.clockVisibilityDefaultValue;return t&&e?Object.hasOwn(t,i)?t[i]:Object.hasOwn(e[0],i)?e[0][i]:o:o}function Lu(e,t){this.groundColor=this.getFloorplanGroundColorClockVisibilityValue(e,t,"groundColor"),this.clockVisibility=this.getFloorplanGroundColorClockVisibilityValue(e,t,"clockVisibility")}function Bu(e,t,i){const o="skyColor"===i?this.skyColorDefaultValue:this.skyColorDefaultType;return t&&e&&Object.hasOwn(t,i)?t[i]:o}function Wu(e,t){this.skyColorType=this.getSkyColorTypeColorValue(e,t,"skyColorType"),this.skyColor=this.getSkyColorTypeColorValue(e,t,"skyColor")}function Vu(e){this.ambientLightIntensity=Object.hasOwn(e,"ambientLightIntensity")?e.ambientLightIntensity:this.ambientLightIntensityDefaultValue}function Nu(e,t){let i=[];this.setFloorplanGroundColorClockVisibilityValues(e,t),this.setSkyColorTypeColorValue(e,t),this.setAmbientLightIntensityValue(t);for(let o=0;o<e.length;o++){let t=[];for(let s=0;s<e[o].objData.length;s++){const n=qe[this.getObjectItemType(e[o].objData[s].type)];if(n&&e[o].objData[s].family!==n&&(iu.log("Object family change",e[o].objData[s].type,e[o].objData[s].family,n),e[o].objData[s].family=n),"furniture"!==e[o].objData[s].class||this.isStaircaseObject(e[o].objData[s].type)||i.find((t=>t.name===e[o].objData[s].type))||!this.furnitureDimensions[e[o].objData[s].type]||i.push(e[o].objData[s].type),"onWall"===e[o].objData[s].family||"inWall"===e[o].objData[s].family){const i=this.createObj2DClassInstanceFromObj(e[o].objData[s]),n={x:i.x,y:i.y};let a;Object.hasOwn(e[o].objData[s].additionalParams,"hideWithWall")?0===e[o].objData[s].limit.length&&(a=this.editor.rayCastingWall(n,!0,e[o].wallData),a?(i.limit=Pi(a.equations.base,i.size,n),iu.log("Set obj limit",i)):(a=this.editor.nearWall(n,e[o].wallData),a?(this.inWallonWallObjectBinderJoinToWall(a.wall,a,n,i),iu.log("Join obj to wall",i)):i.params.bindBox?iu.log("Keep bind box object without limits"):(iu.log("Delete socle object without limit"),t.push(s)))):(a=this.editor.nearWall(n,e[o].wallData),a?(this.inWallonWallObjectBinderJoinToWall(a.wall,a,n,i),iu.log("Join wall obj without wall",a,i)):iu.error("Wall obj without assigned wall")),i.cloneProperties(e[o].objData[s])}}t.sort(((e,t)=>t-e)),t.forEach((t=>e[o].objData.splice(t,1)))}this.furnitureAsyncPatternRef.current.addImagePathData(this.getFurniturePatternImagePaths()),i.forEach((e=>this.furnitureAsyncPatternRef.current.loadPattern(e))),this.wallMaterialsAsyncPatternRef.current.onFloorplanDrawedCallback()}function Eu(e){e?(this.boxWallCoordinates={},wi(e,this.boxWallCoordinates)):this.boxWallCoordinates={minX:0,maxX:0,minY:0,maxY:0,width:0,height:0}}function Hu(){this.freeItemMaterialsComponentRef.current&&this.freeItemMaterialsComponentRef.current.reset(),this.wallItemMaterialsComponentRef.current&&this.wallItemMaterialsComponentRef.current.reset()}function zu(e){return k(e.gps_latitude)?this.homeAssistantConfigObject?this.homeAssistantConfigObject.latitude:null:e.gps_latitude}function Gu(e){return k(e.gps_longitude)?this.homeAssistantConfigObject?this.homeAssistantConfigObject.longitude:null:e.gps_longitude}function Uu(e){return"doorWindow"===e.class?{open_state:"on",closed_state:"off"}:"lights"===e.class?{switched_on_state:"on",switched_off_state:"off",power_sync:!1,power:10,color_sync:!1,color:"#ffffff",variant:"point",spot_angle:45,spot_distance:this.SPOT_DISTANCE_MAX}:"sensors"===e.class?{sensor_type:"number",background:{background_coloring_type:null,background_fixed_color:"#ffffff",background_range_min_value:"",background_range_min_color:"#0000ff",background_range_max_value:"",background_range_max_color:"#ff0000",background_range_intermediate_colors:[],background_opacity:1,checked:!1},text:{text_coloring_type:"fixed",text_fixed_color:"#000000",text_range_min_value:"",text_range_min_color:"#0000ff",text_range_max_value:"",text_range_max_color:"#ff0000",text_range_intermediate_colors:[],text_opacity:1,text_font_size:20,checked:!0}}:"homeAssistant"===e.class?{color:"#000000",opacity:1,font_size:20}:this.isPresenceAreaObject(e.type)?{}:"furniture"!==e.class?null:this.isFanObject(e.type)?{switched_on_state:"on",switched_off_state:"off",percentage_sync:!1,percentage:50,direction_sync:!1,direction:"forward"}:this.isCoverObject(e.type)?{closing_direction:"top",open_offset:this.convertValueToSvgUnits("metric"===this.measureSystemContext.userUnit?10:5),closed_offset:0}:this.isPresenceBinaryObject(e.type)?{detected_state:"on",undetected_state:"off",detected_opacity:100,undetected_opacity:0}:this.isHVACObject(e.type)?{hvac_switched_on_state:"on",hvac_switched_off_state:"off"}:this.isChristmasTreeObject(e.type)?{christmas_light_switched_on_state:"on",christmas_light_switched_off_state:"off"}:this.isCameraObject(e.type)?{}:this.isScreenObject(e.type)?{screen_switched_on_state:"on",screen_switched_off_state:"off",screen_on_color:"#32CD32",screen_off_color:"#8B0000",screen_is_light:!1,screen_3d_glow_effect:!1,screen_3d_glow_factor:ut[e.type].screenPartDepthScaleFactor,screen_3d_glow_spread:1.2}:void 0}function qu(e){if("lights"===e.class)return{variant:!0};if("sensors"===e.class)return{background:{background_coloring_type:!0,background_fixed_color:!0,background_range_min_value:!0,background_range_min_color:!0,background_range_max_value:!0,background_range_max_color:!0,background_range_intermediate_colors:!0,background_opacity:!0,checked:!0},text:{text_coloring_type:!0,text_fixed_color:!0,text_range_min_value:!0,text_range_min_color:!0,text_range_max_value:!0,text_range_max_color:!0,text_range_intermediate_colors:!0,text_opacity:!0,text_font_size:!0,checked:!0}};if("homeAssistant"===e.class)return{color:!0,opacity:!0,font_size:!0};if(this.isPresenceAreaObject(e.type))return{};if("furniture"===e.class){if(this.isFanObject(e.type))return{percentage_sync:!0,percentage:!0,direction_sync:!0,direction:!0};if(this.isCoverObject(e.type))return{closing_direction:!0,open_offset:!0,closed_offset:!0};if(this.isPresenceBinaryObject(e.type))return{detected_opacity:!0,undetected_opacity:!0};if(this.isHVACObject(e.type))return{};if(this.isChristmasTreeObject(e.type))return{};if(this.isCameraObject(e.type))return{};if(this.isScreenObject(e.type))return{screen_on_color:!0,screen_off_color:!0,screen_is_light:!0,screen_3d_glow_effect:!0,screen_3d_glow_factor:!0,screen_3d_glow_spread:!0}}return{}}function Ku(){if(this.bindingRightBoxComponentRef.current){const e=this.bindingRightBoxComponentRef.current.activeParameters.current;e&&e.resetValues&&e.resetValues()}}function Yu(e){return this.windowModels.includes(e)}function Xu(e){return this.doorModels.includes(e)}function Zu(e){return this.isWindowObject(e)||this.isDoorObject(e)}function Ju(e){return this.lightModels.includes(e)}function Qu(e){return this.staircaseModels.includes(e)}function $u(e){return this.fanModels.includes(e)}function eg(e){return this.coverModels.includes(e)}function tg(e){return this.presenceModels.includes(e)}function ig(e){return"generic_presence_area"===e}function og(e){return this.hvacModels.includes(e)}function sg(e){return"internal-unity-air-conditioning"===e}function ng(e){return St.includes(e)}function ag(e){return this.cameraModels.includes(e)}function rg(e){return this.screenModels.includes(e)}function lg(e){return this.furnitureModels.includes(e)}function hg(e,t){return"sensor"===e&&"sensor"===t||("other_entity"===e&&"other_entity"===t||(!(!this.isPresenceAreaObject(e)||!this.isPresenceAreaObject(t))||(!(!this.isDoorWindowObject(e)||!this.isDoorWindowObject(t))||(!(!this.isLightObject(e)||!this.isLightObject(t))||(!(!this.isFanObject(e)||!this.isFanObject(t))||(!(!this.isCoverObject(e)||!this.isCoverObject(t))||(!(!this.isPresenceBinaryObject(e)||!this.isPresenceBinaryObject(t))||(!(!this.isHVACObject(e)||!this.isHVACObject(t))||(!(!this.isChristmasTreeObject(e)||!this.isChristmasTreeObject(t))||(!(!this.isCameraObject(e)||!this.isCameraObject(t))||!(!this.isScreenObject(e)||!this.isScreenObject(t))))))))))))}function cg(e){return"other_entity"===e?"homeAssistant":"sensor"===e?"sensors":this.isPresenceAreaObject(e)?"presence_area":this.isLightObject(e)?"lights":this.isDoorObject(e)||this.isWindowObject(e)?"doorWindow":"furniture"}function dg(e){return{name:e,folder:this.getObjectFolderName(e),width:T(this.furnitureDimensions[e].width,0),height:T(this.furnitureDimensions[e].height,0),mirrorImage:ft.includes(e),objId:this.folderNameToModelsMapping[this.getObjectFolderName(e)].details[e].objId}}function pg(){return[...this.furnitureModels,...this.fanModels,...this.coverModels,...this.presenceModels,...this.hvacModels,...this.cameraModels,...this.screenModels].filter((e=>this.furnitureDimensions[e])).map((e=>this.createFurniturePatternImagePathData(e)))}function mg(e){for(const[t,i]of Object.entries(this.folderNameToModelsMapping))if(i.models.includes(e))return t;return""}function ug(e){for(const t of Object.values(this.folderNameToModelsMapping))if(t.models.includes(e))return t.details[e].itemType;return""}function gg(e){if(""!==this.getObjectFolderName(e.object_external_id))this.folderNameToModelsMapping[this.getObjectFolderName(e.object_external_id)].details[e.object_external_id].itemType=e.object_metadata.details.itemType;else{let t;e.object_metadata.objCategory?t=e.object_metadata.objCategory:"lights"===e.object_metadata.objClass&&(t="light");const i=Dt(e.object_metadata.details.dimensions.width3D,e.object_metadata.details.dimensions.depth3D,e.object_metadata.details.dimensions.height3D,e.object_metadata.details.author,e.object_name,e.object_metadata.details.itemType);i.objId=e.object_id,this.folderNameToModelsMapping[t].models.push(e.object_external_id),this.folderNameToModelsMapping[t].details[e.object_external_id]=i,this.folderNameToModelsMapping[t].isFurnitureCategory&&(this.furnitureModels.push(e.object_external_id),this.furnitureDetails[e.object_external_id]=i),"furniture"===e.object_metadata.objClass&&(this.furnitureDimensions[e.object_external_id]={width:T(e.object_metadata.thumbnailTopWidth,0),height:T(e.object_metadata.thumbnailTopHeight,0)})}}const fg=(e,t)=>{let i=e;for(let o=0;o<t.length&&void 0!==i;o++)i=i[t[o]];return i};function bg(e,t,i,o,s,n){const a=void 0!==s?s:o?o.selectInput?o.value.value:o.value:void 0,r=e.objID.find((e=>e.id===t.id));let l;l=fg(this.getKlet3DBinderObjectLevelParams(t),i)&&r?r:e.params;for(let h=0;h<i.length;h++){const e=i[h];h===i.length-1?n?(Array.isArray(l[e])||(l[e]=[]),l[e].push(a)):l[e]=a:(void 0===l[e]&&(l[e]={}),l=l[e])}}function wg(e,t,i){const o=fg(this.getKlet3DBinderParamsDefaultValues(t),i);if(e){const s=fg(e.params,i),n=e.objID.find((e=>e.id===t.id)),a=n?fg(n,i):void 0;return fg(this.getKlet3DBinderObjectLevelParams(t),i)&&n?P(a)?P(s)?o:s:a:P(s)?n&&!P(a)?a:o:s}return o}function Cg(){let e=this.floorplanFloorsData[0];for(let t=1;t<this.floorplanFloorsData.length;t++)this.floorplanFloorsData[t].floorNumber<e.floorNumber&&(e=this.floorplanFloorsData[t]);return e}function xg(){let e=this.floorplanFloorsData[0];for(let t=1;t<this.floorplanFloorsData.length;t++)this.floorplanFloorsData[t].floorNumber>e.floorNumber&&(e=this.floorplanFloorsData[t]);return e}function yg(e,t){let i=this.floorThickness+this.roomFloorVerticalOffset;for(let o=0;o<e;o++){const e=this.floorplanFloorsData.find((e=>e.floorNumber===o));i+=e?e.floorHeight:this.wallHeightDefaultValue,i+=this.floorThickness+this.roomFloorVerticalOffset}return t?i*this.floorplan3DScaleFactor:i}function Sg(e){const t=this.convertSvgToValueUnits(e,"centimeter","inch",this.wallHeightDecimalPrecision);this.floorHeightInputRef.current.setValue(t),this.floorHeightInputRef.current.setInitialValue(t),this.onFloorHeightInputChange(!1)}function _g(e){this.floorHeight=e&&e.floorHeight||this.wallHeightDefaultValue,this.setFloorHeightInputValue(this.floorHeight),this.floorNote=e.floorNote,this.floorNoteInputRef.current.setFloorNoteValue(e.floorNote),this.floorNumber=e.floorNumber,this.floorNumberInputRef.current.setFloorNumber(e.floorNumber)}function Dg(e){const t=new Dn(e.family,e.class,e.type,{x:e.x,y:e.y},e.angle,e.angleSign,e.size,e.hinge,e.thick,e.value,{...e.additionalParams},this);return t.id=e.id,t.limit=e.limit,t}function vg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];null!==e?t=e===this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber?this.WALLS:this.floorplanFloorsData.find((t=>t.floorNumber===e)).wallData:this.floorplanFloorsData.forEach((e=>t.push(...e.wallData)));let i=xi(t);return i?wi(i):(i={},i.minX=i.minY=i.maxX=i.maxY=i.width=i.height=0),i}function Tg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];if(null!==e?t=e===this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor().floorNumber?this.OBJDATA:this.floorplanFloorsData.find((t=>t.floorNumber===e)).objData:this.floorplanFloorsData.forEach((e=>t.push(...e.objData.filter((e=>""!==this.getObjectFolderName(e.type)))))),t.length>0){let e=Ci(t);return wi(e),e}return null}function jg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];const i=this.getFloorplanWallsBBoxCoords(e);0!==i.width&&0!==i.height&&t.push(i);const o=this.getFloorplanObjectsBBoxCoords(e);if(o&&t.push(o),t.length>0){const e=ki(t);return{...e[1],width:e[1].maxX-e[1].minX,height:e[1].maxY-e[1].minY}}return null}function Og(e){for(let t in e)null!=e[t].child&&(e[t].child=e[e[t].child]),null!=e[t].parent&&(e[t].parent=e[e[t].parent])}function Ig(e){ji(this.boxFloorDrawingHelper.current);const t=this.floorplanFloorsData.filter((t=>t.floorNumber<e.floorNumber));if(t.length>0){t.sort(((e,t)=>t.floorNumber-e.floorNumber)),this.setWallsChildParentValues(t[0].wallData),this.editor.wallsComputing(t[0].wallData,!1,this.boxFloorDrawingHelper.current),t[0].roomData.forEach((e=>this.qSVG.create(this.boxFloorDrawingHelper,"path",{class:"room-path",d:this.createRoomPath(e),"fill-rule":"evenodd","stroke-width":0})));const e=xi(t[0].wallData);if(e){const t=Si(e);this.qSVG.create(this.boxFloorDrawingHelper,"text",{x:t.x,y:t.y,"font-size":"1em",stroke:"#555","text-anchor":"middle"})}}}function Pg(e){const t=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();if(!t)return this.getLowestFloorData().floorNumber;for(let i=0;i<this.floorplanFloorsData.length;i++){if((t.floorNumber===this.floorplanFloorsData[i].floorNumber?this.OBJDATA:this.floorplanFloorsData[i].objData).find((t=>t.id===e.id)))return this.floorplanFloorsData[i].floorNumber}}function kg(){let e=[];for(let t=0;t<this.floorplanFloorsData.length;t++)e.push(...this.floorplanFloorsData[t].objData);return e}function Fg(e){return this.getFloorplanObj2Ds().find((t=>t.id===e))}function Mg(e,t){e.hinge=t,e.update(this),this.save(!1,!0)}function Ag(e){return{presenceAreaWidth:3*this.meter,presenceAreaHeight:3*this.meter,presenceAreaRotation:0,detectedObjectToModelMappings:new Array(e||this.presenceAreaDetectionObjectsDefaultLimit).fill(null).map(((e,t)=>({detectedObjectName:"Detected object ".concat(t),detectedObjectField:"detected_object_".concat(t),modelType:this.presenceModels[0]})))}}function Rg(e){const t=this.getObj2DFloorNumber(e),i=this.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor();return this.editor.nearWall({x:e.x,y:e.y},i&&t!==i.floorNumber?this.floorplanFloorsData.find((e=>e.floorNumber===t)).wallData:this.WALLS).wall}function Lg(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{offsetValue:((i=i||this.getWallItemObj2DTargetWall2D(e)).thick/2+t)*o,wall2D:i}}function Bg(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=e.additionalParams.depth3D,s=(t=t||this.getWallItemObj2DTargetWall2D(e)).thick;let n;if(Ct[e.type])n=0;else if(s>o)n=(s/2-o/2)*i;else{n=-(o/2-s/2)*i*(wt[e.type]?-1:1)}return{offsetValue:n,wall2D:t}}var Wg=i(1317);function Vg(){Wg.log("Hide all size"),ji(this.boxBind.current),this.sizeText=[],this.showAllSizeStatus=0}function Ng(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Wg.log("In wall rib pozvan"),t||ji(this.boxRib.current);let i,o=[];o.push([]),o.push([]);let s,n=e.angle*(180/Math.PI),a=this.editor.objFromWall(e);o[0].push({wall:e,crossObj:!1,side:"up",coords:e.coords[0],distance:0}),o[1].push({wall:e,crossObj:!1,side:"down",coords:e.coords[1],distance:0});for(let r in a)s=a[r],s.up=[this.qSVG.nearPointOnEquation(e.equations.up,s.limit[0]),this.qSVG.nearPointOnEquation(e.equations.up,s.limit[1])],s.down=[this.qSVG.nearPointOnEquation(e.equations.down,s.limit[0]),this.qSVG.nearPointOnEquation(e.equations.down,s.limit[1])],i=Ki(e.coords[0],s.up[0])/this.meter,o[0].push({wall:s,crossObj:r,side:"up",coords:s.up[0],distance:i.toFixed(2)}),i=Ki(e.coords[0],s.up[1])/this.meter,o[0].push({wall:s,crossObj:r,side:"up",coords:s.up[1],distance:i.toFixed(2)}),i=Ki(e.coords[1],s.down[0])/this.meter,o[1].push({wall:s,crossObj:r,side:"down",coords:s.down[0],distance:i.toFixed(2)}),i=Ki(e.coords[1],s.down[1])/this.meter,o[1].push({wall:s,crossObj:r,side:"down",coords:s.down[1],distance:i.toFixed(2)});i=Ki(e.coords[0],e.coords[3])/this.meter,o[0].push({wall:s,crossObj:!1,side:"up",coords:e.coords[3],distance:i}),i=Ki(e.coords[1],e.coords[2])/this.meter,o[1].push({wall:s,crossObj:!1,side:"down",coords:e.coords[2],distance:i}),o[0].sort((function(e,t){return(e.distance-t.distance).toFixed(2)})),o[1].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let r in o)for(let e=1;e<o[r].length;e++){let t=!0,i=-5,s=Math.abs(o[r][e-1].distance-o[r][e].distance),a=n;if(t){"down"===o[r][e-1].side&&(i=10-i),(a>89||a<-89)&&(a-=180,i="down"===o[r][e-1].side?-5:10-i),this.sizeText[e]=document.createElementNS("http://www.w3.org/2000/svg","text");let t=this.qSVG.middle(o[r][e-1].coords.x,o[r][e-1].coords.y,o[r][e].coords.x,o[r][e].coords.y);this.sizeText[e].setAttributeNS(null,"x",t.x),this.sizeText[e].setAttributeNS(null,"y",t.y+i),this.sizeText[e].setAttributeNS(null,"text-anchor","middle"),this.sizeText[e].setAttributeNS(null,"font-family","system-ui"),this.sizeText[e].setAttributeNS(null,"pointer-events","none"),this.sizeText[e].setAttributeNS(null,"stroke","#ffffff"),this.sizeText[e].textContent=Qi(s,this.measureSystemContext.userUnit),this.sizeText[e].textContent<1?(this.sizeText[e].setAttributeNS(null,"font-size","0.8em"),this.sizeText[e].textContent=this.sizeText[e].textContent.substring(1,this.sizeText[e].textContent.length)):this.sizeText[e].setAttributeNS(null,"font-size","15px"),this.sizeText[e].setAttributeNS(null,"stroke-width","0.27px"),this.sizeText[e].setAttributeNS(null,"fill","#666666"),this.sizeText[e].setAttribute("transform","rotate("+a+" "+t.x+","+t.y+")"),this.boxRib.current.appendChild(this.sizeText[e])}}}function Eg(){let e,t,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,s=[];s.push([]),s.push([]);for(let n in this.WALLS)if(this.WALLS[n].equations.base){s[0].push([]),s[0][n].push({wallIndex:n,crossEdge:n,side:"up",coords:this.WALLS[n].coords[0],distance:0}),s[1].push([]),s[1][n].push({wallIndex:n,crossEdge:n,side:"down",coords:this.WALLS[n].coords[1],distance:0});for(let o in this.WALLS)n!==o&&this.WALLS[o].equations.base&&(i=zi(this.WALLS[n].equations.base,this.WALLS[o].equations.base,"object"),this.qSVG.btwn(i.x,this.WALLS[n].start.x,this.WALLS[n].end.x,"round")&&this.qSVG.btwn(i.y,this.WALLS[n].start.y,this.WALLS[n].end.y,"round")&&(e=zi(this.WALLS[n].equations.up,this.WALLS[o].equations.up,"object"),this.qSVG.btwn(e.x,this.WALLS[n].coords[0].x,this.WALLS[n].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[n].coords[0].y,this.WALLS[n].coords[3].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[0].x,this.WALLS[o].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[0].y,this.WALLS[o].coords[3].y,"round")&&(t=Ki(this.WALLS[n].coords[0],e)/this.meter,s[0][n].push({wallIndex:n,crossEdge:o,side:"up",coords:e,distance:t.toFixed(2)})),e=zi(this.WALLS[n].equations.up,this.WALLS[o].equations.down,"object"),this.qSVG.btwn(e.x,this.WALLS[n].coords[0].x,this.WALLS[n].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[n].coords[0].y,this.WALLS[n].coords[3].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[1].x,this.WALLS[o].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[1].y,this.WALLS[o].coords[2].y,"round")&&(t=Ki(this.WALLS[n].coords[0],e)/this.meter,s[0][n].push({wallIndex:n,crossEdge:o,side:"up",coords:e,distance:t.toFixed(2)})),e=zi(this.WALLS[n].equations.down,this.WALLS[o].equations.up,"object"),this.qSVG.btwn(e.x,this.WALLS[n].coords[1].x,this.WALLS[n].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[n].coords[1].y,this.WALLS[n].coords[2].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[0].x,this.WALLS[o].coords[3].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[0].y,this.WALLS[o].coords[3].y,"round")&&(t=Ki(this.WALLS[n].coords[1],e)/this.meter,s[1][n].push({wallIndex:n,crossEdge:o,side:"down",coords:e,distance:t.toFixed(2)})),e=zi(this.WALLS[n].equations.down,this.WALLS[o].equations.down,"object"),this.qSVG.btwn(e.x,this.WALLS[n].coords[1].x,this.WALLS[n].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[n].coords[1].y,this.WALLS[n].coords[2].y,"round")&&this.qSVG.btwn(e.x,this.WALLS[o].coords[1].x,this.WALLS[o].coords[2].x,"round")&&this.qSVG.btwn(e.y,this.WALLS[o].coords[1].y,this.WALLS[o].coords[2].y,"round")&&(t=Ki(this.WALLS[n].coords[1],e)/this.meter,s[1][n].push({wallIndex:n,crossEdge:o,side:"down",coords:e,distance:t.toFixed(2)}))));t=Ki(this.WALLS[n].coords[0],this.WALLS[n].coords[3])/this.meter,s[0][n].push({wallIndex:n,crossEdge:n,side:"up",coords:this.WALLS[n].coords[3],distance:t.toFixed(2)}),t=Ki(this.WALLS[n].coords[1],this.WALLS[n].coords[2])/this.meter,s[1][n].push({wallIndex:n,crossEdge:n,side:"down",coords:this.WALLS[n].coords[2],distance:t.toFixed(2)})}for(let n in s[0])s[0][n].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));for(let n in s[1])s[1][n].sort((function(e,t){return(e.distance-t.distance).toFixed(2)}));this.sizeText=[],5===o&&ji(this.boxRib.current);for(let n in s)for(let e in s[n])for(let t=1;t<s[n][e].length;t++)if(s[n][e][t-1].wallIndex===s[n][e][t].wallIndex){let i=!0,a=Math.abs(s[n][e][t-1].distance-s[n][e][t].distance);if(a<.15&&(i=!1),i&&s[n][e][t-1].crossEdge===s[n][e][t].crossEdge&&s[n][e][t].crossEdge!==s[n][e][t].wallIndex&&(i=!1),i&&s[n][e].length>2&&1===t){let o=[];for(let i=0;i<4;i++)o.push({x:this.WALLS[s[n][e][t].crossEdge].coords[i].x,y:this.WALLS[s[n][e][t].crossEdge].coords[i].y});Ni(s[n][e][0].coords,o)&&(i=!1)}if(i&&s[n][e].length>2&&t===s[n][e].length-1){let o=[];for(let i=0;i<4;i++)o.push({x:this.WALLS[s[n][e][t-1].crossEdge].coords[i].x,y:this.WALLS[s[n][e][t-1].crossEdge].coords[i].y});Ni(s[n][e][s[n][e].length-1].coords,o)&&(i=!1)}if(i){let i=this.WALLS[s[n][e][t].wallIndex].angle*(180/Math.PI),r=-o;"down"===s[n][e][t-1].side&&(r=10-r),(i>90||i<-89)&&(i-=180,r="down"===s[n][e][t-1].side?-o:10-r),this.sizeText[t]=document.createElementNS("http://www.w3.org/2000/svg","text");let l=this.qSVG.middle(s[n][e][t-1].coords.x,s[n][e][t-1].coords.y,s[n][e][t].coords.x,s[n][e][t].coords.y);this.sizeText[t].setAttributeNS(null,"x",l.x),this.sizeText[t].setAttributeNS(null,"y",l.y+r),this.sizeText[t].setAttributeNS(null,"text-anchor","middle"),this.sizeText[t].setAttributeNS(null,"font-family","roboto"),this.sizeText[t].setAttributeNS(null,"stroke","#ffffff"),this.sizeText[t].textContent=Qi(a,this.measureSystemContext.userUnit),this.sizeText[t].textContent<1?(this.sizeText[t].setAttributeNS(null,"font-size","0.73em"),this.sizeText[t].textContent=this.sizeText[t].textContent.substring(1,this.sizeText[t].textContent.length)):this.sizeText[t].setAttributeNS(null,"font-size","0.9em"),this.sizeText[t].setAttributeNS(null,"stroke-width","0.2px"),this.sizeText[t].setAttributeNS(null,"fill","#555555"),this.sizeText[t].setAttribute("transform","rotate("+i+" "+l.x+","+l.y+")"),this.boxRib.current.appendChild(this.sizeText[t])}}}function Hg(){this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null)}function zg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],o={},s={};o.distance=t,this.lineIntersectionP&&(this.lineIntersectionP.remove(),this.lineIntersectionP=null),this.lineIntersectionP=this.qSVG.create(this.boxBind,"path",{d:"",stroke:"transparent","stroke-width":.5,"stroke-opacity":"1",fill:"none"});for(let n=0;n<this.WALLS.length;n++)if(-1===i.indexOf(this.WALLS[n])){let t,i=this.WALLS[n].start.x,a=this.WALLS[n].start.y,r=this.WALLS[n].end.x,l=this.WALLS[n].end.y;0===Math.abs(l-a)?(s.C="v",s.D=i,s.E="h",s.F=a,s.G="v",s.H=r,s.I="h",s.J=l):0===Math.abs(r-i)?(s.C="h",s.D=a,s.E="v",s.F=i,s.G="h",s.H=l,s.I="v",s.J=r):(s.C=(i-r)/(l-a),s.D=a-i*s.C,s.E=(l-a)/(r-i),s.F=a-i*s.E,s.G=(i-r)/(l-a),s.H=l-r*s.C,s.I=(l-a)/(r-i),s.J=l-r*s.E),s.A=s.C,s.B=s.D,t=this.qSVG.nearPointOnEquation(s,e),t.distance<o.distance&&(o.distance=t.distance,o.node=n,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=1),s.A=s.E,s.B=s.F,t=this.qSVG.nearPointOnEquation(s,e),t.distance<o.distance&&(o.distance=t.distance,o.node=n,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=1),s.A=s.G,s.B=s.H,t=this.qSVG.nearPointOnEquation(s,e),t.distance<o.distance&&(o.distance=t.distance,o.node=n,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=2),s.A=s.I,s.B=s.J,t=this.qSVG.nearPointOnEquation(s,e),t.distance<o.distance&&(o.distance=t.distance,o.node=n,o.x=t.x,o.y=t.y,o.x1=i,o.y1=a,o.x2=r,o.y2=l,o.way=2)}return o.distance<t&&(2===o.way?(this.lineIntersectionP.setAttribute("d","M"+o.x1+","+o.y1+" L"+o.x2+","+o.y2+" L"+o.x+","+o.y),this.lineIntersectionP.setAttribute("stroke","#d7ac57")):(this.lineIntersectionP.setAttribute("d","M"+o.x2+","+o.y2+" L"+o.x1+","+o.y1+" L"+o.x+","+o.y),this.lineIntersectionP.setAttribute("stroke","#d7ac57")),{x:o.x,y:o.y,wall:this.WALLS[o.node],distance:o.distance})}var Gg=i(5828),Ug=i(7575);class qg extends o.Component{constructor(){super(),this.onFloorplanItemModelClick=e=>{this.setState({selectedFloorplanItemModel:e}),this.props.onFloorplanItemSelectionCallback(e)},this.onFloorplanItemsCategorySelectClick=e=>{const t=e.target.textContent;this.setState({selectedCategory:t},(()=>{this.floorplanItemCategorySelectRef.current.closeDropdownMenu(),this.floorplanItemCategorySelectRef.current.setValue(t)}))},this.onFloorplanItemSearchInputChange=e=>{let t=[];t=""===e.target.value?this.props.items:this.props.items.map((t=>({...t,models:t.models.filter((i=>i.toLowerCase().includes(e.target.value.toLowerCase())||t.details[i].title.toLowerCase().includes(e.target.value.toLowerCase())))}))),this.setState({floorplanItemsFiltered:t,searchInputValue:e.target.value})},this.state={floorplanItemsFiltered:[],selectedFloorplanItemModel:null,searchInputValue:"",selectedCategory:"All"},this.floorplanItemCategorySelectRef=o.createRef(),this.onFloorplanItemModelClick=this.onFloorplanItemModelClick.bind(this),this.onFloorplanItemsCategorySelectClick=this.onFloorplanItemsCategorySelectClick.bind(this),this.onFloorplanItemSearchInputChange=this.onFloorplanItemSearchInputChange.bind(this)}componentDidMount(){this.setState({floorplanItemsFiltered:this.props.items,selectedFloorplanItemModel:this.props.initialSelectedItemModel,searchInputValue:"",selectedCategory:"All"},(()=>this.floorplanItemCategorySelectRef.current&&this.floorplanItemCategorySelectRef.current.setValue("All")))}render(){const{floorplanItemsFiltered:e,selectedFloorplanItemModel:t,searchInputValue:i,selectedCategory:o}=this.state,s="All"===o?e:[e.find((e=>e.title===o))];return(0,l.jsxs)("div",{className:"floorplan-items-container ".concat(this.props.containerClasses||""),children:[this.props.items.length>1&&(0,l.jsx)(Fs,{ref:this.floorplanItemCategorySelectRef,onListItemClick:this.onFloorplanItemsCategorySelectClick,listItems:["All",...Object.values(this.props.items).map((e=>e.title))]}),this.props.items.reduce(((e,t)=>e+t.models.length),0)>1&&!this.props.hideSearchInput&&(0,l.jsxs)("div",{className:"search-container",children:[(0,l.jsxs)("div",{style:{flexGrow:1},children:[(0,l.jsx)("div",{className:"hidden-placeholder",children:"Search"}),(0,l.jsx)("input",{placeholder:"Search",className:"form-control input",value:i,onChange:this.onFloorplanItemSearchInputChange})]}),(0,l.jsx)("div",{className:"search-icon-container",children:(0,l.jsx)(Ug.Z,{})})]}),(0,l.jsx)("div",{className:"floorplan-items-data-container",children:s.map((e=>e.models.length>0&&(0,l.jsxs)("div",{className:"floorplan-item-data-container",children:[e.models.length>0&&!this.props.hideCategoryLabel&&(0,l.jsx)("div",{className:"floorplan-item-category-label",children:e.title}),(0,l.jsx)("div",{className:"floorplan-item-models-selection-grid ".concat(this.props.gridContainerClasses||""),children:e.models.map((i=>(0,l.jsx)("div",{className:"selection-grid-item-card ".concat(t===i?"selected":""," ").concat(this.props.disabled?"disabled":""),onClick:()=>!this.props.disabled&&this.onFloorplanItemModelClick(i),children:(0,l.jsx)(Gg.LazyLoadImage,{alt:e.details[i].title,src:e.details[i].objId?"https://app.klet3d.com/api/glamos/klet3d/objects-download2/".concat(e.details[i].objId,"/").concat(i,".png"):"".concat("https://app.klet3d.com","/models3D/objMtl/thumbnails/").concat(this.props.mainComponentThis.getObjectFolderName(i),"/").concat(i,".png"),placeholder:(0,l.jsx)("div",{className:"spinner-container",children:(0,l.jsx)(Ms,{center:!0,noMargin:!0,spinnerStyle:{width:14,height:14}})}),width:"100%",height:"100%",onLoad:()=>this.setState({["".concat(i,"_loaded")]:!0}),visibleByDefault:this.state["".concat(i,"_loaded")]})},i)))})]},e.title)))})]})}}const Kg=qg;class Yg extends o.Component{constructor(){super(),this.state={changeFloorplanItemType:!1}}render(){const{changeFloorplanItemType:e}=this.state;return(0,l.jsxs)(xs,{children:[(0,l.jsx)(fs,{disabled:!0,infoLabel:!0,infoLabelTitle:"Change type",infoText:"Check this box if you want to change selected item type.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:e}),(0,l.jsx)(Kg,{disabled:!0,containerClasses:"right-box-floorplan-item-type-selection-container",gridContainerClasses:"single-column",initialSelectedItemModel:this.props.selectedItemObj2D.type,items:[{...this.props.mainComponentThis.folderNameToModelsMapping[this.props.selectedItemFolderName],models:this.props.mainComponentThis.folderNameToModelsMapping[this.props.selectedItemFolderName].models.filter((e=>e===this.props.selectedItemObj2D.type))}],mainComponentThis:this.props.mainComponentThis},e)]})}}const Xg=Yg;class Zg extends o.Component{constructor(){super(),this.onItemClick=e=>t=>{this.setState({selectedItem:e}),this.props.onClickCallback&&this.props.onClickCallback(t,e)},this.setSelectedItem=e=>this.setState({selectedItem:e}),this.getSelectedItem=()=>this.state.selectedItem,this.state={selectedItem:null},this.onItemClick=this.onItemClick.bind(this),this.setSelectedItem=this.setSelectedItem.bind(this),this.getSelectedItem=this.getSelectedItem.bind(this)}render(){const{selectedItem:e}=this.state;return(0,l.jsx)("div",{className:"colors-textures-grid-container ".concat(this.props.isColor?"":"textures"),children:this.props.isColor?this.props.items.map((t=>(0,l.jsx)("div",{className:"selection-grid-item-card color textEditorColorModify ".concat(e===t.gradientStartColor?"selected":""," ").concat(this.props.disabled?"disabled":""),style:{color:t.gradientStartColor,background:"linear-gradient(30deg, ".concat(t.gradientStartColor,", ").concat(t.gradientStopColor,")")},onClick:this.props.disabled?void 0:this.onItemClick(t.gradientStartColor)},t.gradientStartColor))):this.props.items.map(((t,i)=>(0,l.jsx)("div",{className:"selection-grid-item-card ".concat(e===t?"selected":""," ").concat(this.props.disabled?"disabled":""),style:{backgroundImage:"none"===t?t:"/textures/".concat(t,".png")},onClick:this.props.disabled?void 0:this.onItemClick(t),children:"none"!==t&&(0,l.jsx)("img",{src:"".concat("https://app.klet3d.com","/textures/").concat(t,".png")})},i)))})}}const Jg=Zg;class Qg extends o.Component{constructor(){super(),this.fontSizeNumberSliderInput=o.createRef(),this.modifyFontSizeSlider=o.createRef(),this.textColorsSelectionRef=o.createRef(),this.modifyTextContent=o.createRef()}componentDidMount(){this.props.textItemFontSizeValueRef.current.textContent=this.props.targetObject2D.value.size,this.modifyFontSizeSlider.current.value=this.props.targetObject2D.value.size,this.fontSizeNumberSliderInput.current.setNumberInputInitialValues(this.props.targetObject2D.value.size),this.modifyTextContent.current.value=this.props.targetObject2D.value.text,this.textColorsSelectionRef.current.setSelectedItem(this.props.targetObject2D.type),this.props.restoreSelectedBinderCall&&this.props.mainComponentThis.onModifyFontSizeChange(this.props.targetObject2D.value.size)}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(cr,{ref:this.fontSizeNumberSliderInput,disabled:!0,sliderInputRef:this.modifyFontSizeSlider,valueLabelText:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(ta,{}),"Font size : ",(0,l.jsx)("span",{ref:this.props.textItemFontSizeValueRef})]}),sliderStep:.1,minValue:10,maxValue:70,onSliderValueChanged:this.props.mainComponentThis.onModifyFontSizeChange,onSliderChangeFinished:()=>{this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}}),(0,l.jsx)(us,{disabled:!0,label:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(oa,{}),"Text content:"]}),labelStyle:{display:"flex",alignItems:"center"},inputRef:this.modifyTextContent,onChange:this.props.mainComponentThis.onModifyTextContentChange}),(0,l.jsx)(xs,{labelStyle:{display:"flex",alignItems:"center"},label:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(na,{}),"Text color:"]}),children:(0,l.jsx)(Jg,{ref:this.textColorsSelectionRef,disabled:!0,items:We,isColor:!0,onClickCallback:this.props.mainComponentThis.onModifyTextColorButonClick})})]})}}const $g=Qg;class ef extends o.Component{constructor(){super(),this.setRotationInputValues=e=>{this.itemRotationSlider.current.value=e,this.props.itemRotationValueRef.current.textContent=e,this.itemRotationNumberSliderInput.current.inputNumberComponentRef.current.setValue(e)},this.onRotationChange=e=>{let t=!0;"floorFree"===this.props.targetObject2D.family&&(t=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:this.props.targetObject2D.x,y:this.props.targetObject2D.y},this.props.mainComponentThis.WALLS,this.props.targetObject2D.size/2,this.props.targetObject2D.thick/2,e)),t?(this.lastSavedAngleValue=e,this.props.mainComponentThis.setItemRotationAngle(e,this.props.targetObject2D),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.rotateSelectedItem(),this.props.mainComponentThis.cameraCoverageOptionsActiveRef.current&&this.props.mainComponentThis.cameraCoverageOptionsActiveRef.current.handleItemRotationChange(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)):this.setRotationInputValues(this.lastSavedAngleValue)},this.itemRotationSlider=o.createRef(),this.itemRotationNumberSliderInput=o.createRef(),this.lastSavedAngleValue=null,this.setRotationInputValues=this.setRotationInputValues.bind(this),this.onRotationChange=this.onRotationChange.bind(this)}componentDidMount(){this.setRotationInputValues(this.props.targetObject2D.angle),this.itemRotationNumberSliderInput.current.setNumberInputInitialValues(this.props.targetObject2D.angle),this.lastSavedAngleValue=this.props.targetObject2D.angle,this.props.restoreSelectedBinderCall&&this.onRotationChange(this.props.targetObject2D.angle)}render(){return(0,l.jsx)(xs,{children:(0,l.jsx)(cr,{ref:this.itemRotationNumberSliderInput,disabled:!0,sliderInputRef:this.itemRotationSlider,valueLabelText:(0,l.jsxs)("div",{style:{display:"flex"},children:[(0,l.jsx)($n,{}),"Rotation:\xa0",(0,l.jsx)("span",{ref:this.props.itemRotationValueRef})," \xb0"]}),sliderStep:1,minValue:-180,maxValue:180,onSliderValueChanged:this.onRotationChange,onSliderChangeFinished:()=>{this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}})})}}const tf=ef;class of extends o.Component{constructor(e){super(),this.saveChanges=(e,t,i,o,s)=>{const n=[this.props.targetObject2D];this.props.mainComponentThis.selectedBinder&&n.push(this.props.mainComponentThis.selectedBinder),n.forEach((e=>{t&&(e[t]=i),e.update(this.props.mainComponentThis)})),this.props.targetObject2D.additionalParams[e]=i,this[s]=o,this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.resizeSelectedItem(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)},this.onWidthChange=()=>e=>{const t=this.widthInputComponentRef.current.getValue(),i=e||this.props.mainComponentThis.convertValueToSvgUnits(t),o=90===this.props.targetObject2D.params.onWallOffsetAngle?"thick":"size";let s=!0;e||("inWall"===this.props.targetObject2D.family||"onWall"===this.props.targetObject2D.family?s=this.props.mainComponentThis.onWallItemWidthChange(i,this.props.targetObject2D,this.props.mainComponentThis.WALLS):"floorFree"===this.props.targetObject2D.family&&(s=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:this.props.targetObject2D.x,y:this.props.targetObject2D.y},this.props.mainComponentThis.WALLS,"size"===o?i/2:this.props.targetObject2D.thick/2,"size"===o?this.props.targetObject2D.thick/2:i/2,this.props.targetObject2D.angle))),s?this.saveChanges("width3D",o,i,t,"lastSavedWidthValue"):this.widthInputComponentRef.current.setValue(this.lastSavedWidthValue)},this.onDepthChange=()=>e=>{const t=this.depthInputComponentRef.current.getValue(),i=e||this.props.mainComponentThis.convertValueToSvgUnits(t),o=90===this.props.targetObject2D.params.onWallOffsetAngle?"size":"thick";let s=!0;e||"floorFree"===this.props.targetObject2D.family&&(s=this.props.mainComponentThis.floorFreeObjectPositionValidation({x:this.props.targetObject2D.x,y:this.props.targetObject2D.y},this.props.mainComponentThis.WALLS,"size"===o?i/2:this.props.targetObject2D.size/2,"size"===o?this.props.targetObject2D.size/2:i/2,this.props.targetObject2D.angle)),s?this.saveChanges("depth3D",o,i,t,"lastSavedDepthValue"):this.depthInputComponentRef.current.setValue(this.lastSavedDepthValue)},this.onHeightChange=()=>()=>{const e=this.heightInputComponentRef.current.getValue(),t=this.props.mainComponentThis.convertValueToSvgUnits(e);t<this.props.mainComponentThis.floorHeight?this.saveChanges("height3D",null,t,e,"lastSavedHeightValue"):this.heightInputComponentRef.current.setValue(this.lastSavedHeightValue)},this.widthInputComponentRef=o.createRef(),this.depthInputComponentRef=o.createRef(),this.heightInputComponentRef=o.createRef(),this.dimensionItem={min:-1/0,max:1/0,step:e.mainComponentThis.itemDimensionsInputStep},this.lastSavedWidthValue=null,this.lastSavedDepthValue=null,this.lastSavedHeightValue=null,this.saveChanges=this.saveChanges.bind(this),this.onWidthChange=this.onWidthChange.bind(this),this.onDepthChange=this.onDepthChange.bind(this),this.onHeightChange=this.onHeightChange.bind(this)}componentDidMount(){new Array({inputRef:this.widthInputComponentRef,dimensionPropertyName:"width3D",lastSavedPropertyName:"lastSavedWidthValue"},{inputRef:this.depthInputComponentRef,dimensionPropertyName:"depth3D",lastSavedPropertyName:"lastSavedDepthValue"},{inputRef:this.heightInputComponentRef,dimensionPropertyName:"height3D",lastSavedPropertyName:"lastSavedHeightValue"}).forEach((e=>{const t=this.props.mainComponentThis.convertSvgToValueUnits(this.props.targetObject2D.additionalParams[e.dimensionPropertyName]);e.inputRef.current.setValue(t),e.inputRef.current.setInitialValue(t),this[e.lastSavedPropertyName]=t})),this.props.restoreSelectedBinderCall&&(this.onWidthChange()(this.props.targetObject2D.additionalParams.width3D),this.onDepthChange()(this.props.targetObject2D.additionalParams.depth3D))}render(){return(0,l.jsxs)(xs,{label:"Dimensions(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"cm":"in",")"),children:[(0,l.jsx)(js,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.widthInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:(0,l.jsx)(nn,{longText:"Height:",shortText:"Width:"}),labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onWidthChange}),(0,l.jsx)(js,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.depthInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:(0,l.jsx)(nn,{longText:"Height:",shortText:"Depth:"}),labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onDepthChange}),(0,l.jsx)(js,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.heightInputComponentRef,isNumberInput:!0,controledNumberInput:!1,label:"Height:",labelClasses:"label-form-control-cancel",item:this.dimensionItem,onChange:this.onHeightChange})]})}}const sf=of;class nf extends o.Component{constructor(){super(),this.state={checked:!1}}componentDidMount(){this.setState({checked:this.props.selectedItemObj2D.additionalParams.mirrored})}render(){return(0,l.jsx)(xs,{children:(0,l.jsx)(fs,{disabled:!0,infoLabel:!0,infoLabelTitle:"Mirror object",infoText:"Check this box to mirror the object.",explanationInfoBoxStyles:{left:-120,width:100,zIndex:1},checked:this.state.checked})})}}const af=nf;class rf extends o.Component{constructor(e){var t;super(),t=this,this.onPositionYChange=()=>()=>{const e=this.positionYInputComponentRef.current.getValue(),t=this.props.mainComponentThis.convertValueToSvgUnits(e),i=t+this.props.targetObject2D.additionalParams.height3D<=this.props.mainComponentThis.floorHeight&&t>=0;i&&(this.lastSavedPositionYValue=e,this.props.targetObject2D.additionalParams.positionY=t,this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedItemVerticalPosition(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)),i?this.positionYInputComponentRef.current.inputRef.current.classList.remove("is-invalid"):this.positionYInputComponentRef.current.inputRef.current.classList.add("is-invalid")},this.setPositionYInputValues=function(e){let i=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(i=t.props.mainComponentThis.convertSvgToValueUnits(e)),t.positionYInputComponentRef.current.setValue(i)},this.positionYInputComponentRef=o.createRef(),this.positionItem={min:0,max:1/0,step:e.mainComponentThis.itemDimensionsInputStep},this.lastSavedPositionYValue=null,this.onPositionYChange=this.onPositionYChange.bind(this),this.setPositionYInputValues=this.setPositionYInputValues.bind(this)}componentDidMount(){const e=this.props.mainComponentThis.convertSvgToValueUnits(this.props.targetObject2D.additionalParams.positionY);this.setPositionYInputValues(e),this.positionYInputComponentRef.current.setInitialValue(e),this.lastSavedPositionYValue=e}render(){return(0,l.jsxs)(xs,{children:[(0,l.jsxs)("div",{className:"label form-control label-info-box-container",style:{display:"flex"},children:[(0,l.jsx)("span",{children:"Vertical position(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"cm":"in",")")}),(0,l.jsx)(ss,{infoText:(0,l.jsxs)("span",{children:["Vertical position of the item's ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"bottom"})," relative to the"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"floor"})]}),explanationInfoBoxStyles:{left:-150,width:130,zIndex:1}})]}),(0,l.jsx)(js,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:this.positionYInputComponentRef,isNumberInput:!0,controledNumberInput:!1,labelClasses:"label-form-control-cancel",item:this.positionItem,onChange:this.onPositionYChange})]})}}const lf=rf;class hf extends o.Component{constructor(){super(),this.onItemTypeChange=()=>()=>{},this.state={itemTypeEdit:null,updateItemTypeLoading:!1},this.onItemTypeChange=this.onItemTypeChange.bind(this)}componentDidMount(){if("lights"===this.props.selectedItemObj2D.class||"furniture"===this.props.selectedItemObj2D.class){const e=this.props.mainComponentThis.getObjectItemType(this.props.selectedItemObj2D.type);this.setState({itemTypeEdit:{...mi,value:mi.options.find((t=>t.value===e))}})}}render(){const{itemTypeEdit:e}=this.state;return null===e?null:(0,l.jsx)(xs,{children:(0,l.jsx)(us,{disabled:!0,selectInput:!0,label:e.label,item:e,error:e.error,fullWidth:!0,explanationInfoBoxStyles:{width:120,left:-140},onChange:this.onItemTypeChange})})}}const cf=hf;var df=i(1317);class pf extends o.Component{constructor(e){super(),this.handleRotationOptionChange=e=>()=>{df.log("handleRotationOptionChange");const t=[...this.state.rotationOptions];t.forEach((e=>e.selected=!1));const i=t.find((t=>t===e.choices[0].value));i&&(i.selected=!0,this.setState({rotationOptions:t},(()=>{this.props.windowObj2D.additionalParams.rotationAxis=i.rotationAxis,this.props.windowObj2D.additionalParams.rotationDirection=i.rotationDirection,this.props.mainComponentThis.setWindowObjectRotationProperties(this.props.windowObj2D),this.props.windowObj2D.update(this.props.mainComponentThis),this.props.mainComponentThis.floorplan3DComponent.current?this.props.mainComponentThis.floorplan3DComponent.current.onSelectedWindowItemRotationOptionChange():this.props.mainComponentThis.createWindowRotationPropertiesBinder(this.props.windowObj2D),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!1)})))},this.state={rotationOptions:e.mainComponentThis[bo(e.windowObj2D.type)?"windowDoubleAxisRotationOptions":"windowSingleAxisRotationOptions"].map((t=>({...t,imageURI:null,selected:(e.windowObj2D.additionalParams.rotationAxis||"start")===t.rotationAxis&&(e.windowObj2D.additionalParams.rotationDirection||"up")===t.rotationDirection})))},this.handleRotationOptionChange=this.handleRotationOptionChange.bind(this)}componentDidMount(){!this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.createWindowRotationPropertiesBinder(this.props.windowObj2D);let e=[...this.state.rotationOptions];for(let t=0;t<e.length;t++){const i=to(e[t].rotationAxis,e[t].rotationDirection,this.props.windowObj2D),o=this.props.mainComponentThis.createWindowRotationSvg(this.props.windowObj2D,{point1:{x:i.curvePoint1X,y:i.curvePoint1Y},point2:{x:i.curvePoint2X,y:i.curvePoint2Y},controlPoint:{x:i.controlPointX,y:i.controlPointY}},e[t].rotationDirection);o.svgGroupElement.appendChild(o.curveArrowPath);const s=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","defs"),a=document.createElementNS("http://www.w3.org/2000/svg","marker");a.setAttribute("id","window-rotation-direction-arrow-triangle"),a.setAttribute("viewBox","0 0 10 10"),a.setAttribute("refX","5"),a.setAttribute("refY","5"),a.setAttribute("markerUnits","strokeWidth"),a.setAttribute("markerWidth","4"),a.setAttribute("markerHeight","4"),a.setAttribute("orient","auto");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),r.setAttribute("fill","#f00"),a.appendChild(r),n.appendChild(a),s.appendChild(n),s.appendChild(o.svgGroupElement),document.body.appendChild(s);const{arrowHalfLength:l,translateX:h,translateY:c}=io(this.props.windowObj2D,e[t].rotationDirection);let d=(this.props.windowObj2D.angle+90)*(Math.PI/180),p=[{x:-l,y:i.controlPointY/2},{x:l,y:i.controlPointY/2},{x:l,y:0},{x:-l,y:0}],m={x:0,y:0};p.forEach((e=>{e.x+=h,e.y+=c})),m.x+=h,m.y+=c,oo(p,m,d);const u=so(p),g=5;s.setAttribute("viewBox","".concat(u.minX-g," ").concat(u.minY-g," ").concat(u.width+2*g," ").concat(u.height+2*g)),s.setAttribute("width",u.width+2*g),s.setAttribute("height",u.height+2*g),e[t].imageURI="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(s)),document.body.removeChild(document.body.lastChild)}this.setState({rotationOptions:e})}render(){const{rotationOptions:e}=this.state;return df.log(e),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:"Rotation options"}),(0,l.jsx)("div",{children:e.filter((e=>e.imageURI)).map(((t,i)=>(0,l.jsx)("div",{children:(0,l.jsx)(ws,{disabled:!0,choiceRowStyle:{display:"flex",alignItems:"center"},onChange:this.handleRotationOptionChange,item:{choices:[{name:null,value:t,inputSiblingElement:(0,l.jsx)("img",{style:{paddingLeft:"0.5rem"},src:t.imageURI})}],value:e.find((e=>e.selected))}})},i)))})]})}}const mf=pf;class uf extends o.Component{constructor(){super(),this.MATERIAL_OPTIONS={DEFAULT:{label:"Default",value:"default"},COLOR:{label:"Color",value:"color"},TEXTURE:{label:"Texture",value:"texture"}},this.HIGHLIGHT_COLOR=2600544,this.setMaterialColor=(e,t)=>{this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((i=>i.setPaintedColor(t,e.name)),this.props.selectedItem)},this.resetMaterialColor=e=>{this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>t.setPartColor("default",e.name)),this.props.selectedItem)},this.getPartListItemClickHandler=()=>(e,t)=>{const i=this.state.edit[t];if(this.state.selectedMesh){const e=this.state.edit[this.state.selectedMesh.index],t=Object.values(this.MATERIAL_OPTIONS).findIndex((t=>t.value===e.value.type));this.syncMeshWithItemOption(e,Object.values(this.MATERIAL_OPTIONS)[t])}this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((e=>{e.setPartColor(this.HIGHLIGHT_COLOR,i.value.meshName)}),this.props.selectedItem),this.highlightedTimeout&&clearTimeout(this.highlightedTimeout),this.highlightedTimeout=setTimeout((()=>{this.syncMeshWithItemOption(this.state.edit[t],Object.values(this.MATERIAL_OPTIONS).find((e=>e.value===this.state.edit[t].value.type)))}),this.partHiglightTimeoutMs),this.partSelectListsRef.current.setValue(i.label);const o=Object.values(this.MATERIAL_OPTIONS).find((e=>e.value===i.value.type));o?this.partMaterialSelectListsRef.current.setValue(o.label):this.partMaterialSelectListsRef.current.setValue(Object.values(this.MATERIAL_OPTIONS)[0].label),this.setState({selectedMesh:{name:i.value.meshName,index:t}});o.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():this.props.selectedItem.setSelected()},this.getPartMaterialListItemClickHandler=(e,t)=>(e,i)=>{const o=Object.values(this.MATERIAL_OPTIONS)[i];o.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():this.props.selectedItem.setSelected(),this.setState({edit:this.state.edit.map(((e,i)=>{if(i===t){const{colorPickerColor:t,textureName:i}=this.syncMeshWithItemOption(e,o);return o.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.partTextureSelectRef.current.setSelectedItem(i),{...e,value:{...e.value,type:o.value,...o.value===this.MATERIAL_OPTIONS.COLOR.value&&{color:t}}}}return e}))},(()=>{this.save()})),this.partMaterialSelectListsRef.current&&this.partMaterialSelectListsRef.current.setValue(o.label)},this.getOnItemColorChange=e=>{let{mesh:t}=e;return e=>{let{target:i}=e;const o=i.value;this.setState({edit:this.state.edit.map((e=>e.value.meshName===t.name?{...e,value:{...e.value,color:o}}:e))},(()=>{this.save()}));const s=parseInt(o.split("#").at(-1),16);this.setMaterialColor(t,s)}},this.texturesSelectionCallbackHandler=(e,t)=>{this.setState({edit:this.state.edit.map((e=>e.value.meshName===this.state.selectedMesh.name?{...e,value:{...e.value,type:this.MATERIAL_OPTIONS.TEXTURE.value,textureName:t}}:e))},(()=>{this.save()})),this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((e=>{e.setCustomTextureByName(t,this.state.selectedMesh.name)}),this.props.selectedItem)},this.state={edit:[],selectedMesh:null},this.meshes={},this.partHiglightTimeoutMs=2e3,this.partSelectListsRef=o.createRef(),this.partMaterialSelectListsRef=o.createRef(),this.selectListsColorPickerRef=o.createRef(),this.partTextureSelectRef=o.createRef(),this.save=this.save.bind(this),this.getPartMaterialListItemClickHandler=this.getPartMaterialListItemClickHandler.bind(this),this.getOnItemColorChange=this.getOnItemColorChange.bind(this),this.setMaterialColor=this.setMaterialColor.bind(this),this.resetMaterialColor=this.resetMaterialColor.bind(this),this.syncMeshWithItemOption=this.syncMeshWithItemOption.bind(this),this.highlightedTimeout=null}save(){const e=this.state.edit.map((e=>e.value));this.props.targetObject2D.additionalParams.materials=e,this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}syncMeshWithItemOption(e,t){let i,o;if(t.value===this.MATERIAL_OPTIONS.DEFAULT.value&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>{t.removePaintedColor(e.value.meshName,!1),t.removeCustomTexture(e.value.meshName,!1)}),this.props.selectedItem),t.value===this.MATERIAL_OPTIONS.COLOR.value){const t=this.props.selectedItem.getPartColor("default",e.value.meshName,!0),o=t?"#".concat(t.toString(16).padStart(6,"0")):null;i=e.value.color||o||"#000000";const s=parseInt(i.split("#").at(-1),16);this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>t.setPaintedColor(s,e.value.meshName)),this.props.selectedItem)}return t.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.props.mainComponentThis.floorplan3DComponent.current.changeSelectedObjectMaterial((t=>{o=t.restoreCustomTexture(e.value.meshName)}),this.props.selectedItem),{colorPickerColor:i,textureName:o}}componentDidMount(){const e=this.props.targetObject2D.additionalParams.materials||[];this.setState({edit:this.props.selectedItem.mesh.children.filter((e=>e.name&&e.name.length>0)).map(((t,i)=>(this.meshes[t.name]=t,{mesh:t,label:"Part ".concat(i+1),value:e.find((e=>e.meshName===t.name))||{type:this.MATERIAL_OPTIONS.DEFAULT.value,meshName:t.name}}))),selectedMesh:this.props.selectedItem.mesh.children[0]?{name:this.props.selectedItem.mesh.children[0].name,index:0}:null},(()=>{const e=this.state.selectedMesh&&this.state.edit[this.state.selectedMesh.index];if(e&&(this.partSelectListsRef.current&&this.partSelectListsRef.current.setValue(e.label),this.partMaterialSelectListsRef.current)){const t=Object.values(this.MATERIAL_OPTIONS).find((t=>t.value===e.value.type));t?(t.value===this.MATERIAL_OPTIONS.COLOR.value?this.props.selectedItem.setUnselected():t.value===this.MATERIAL_OPTIONS.TEXTURE.value&&this.partTextureSelectRef.current.setSelectedItem(e.value.textureName),this.partMaterialSelectListsRef.current.setValue(t.label)):this.partMaterialSelectListsRef.current.setValue(Object.values(this.MATERIAL_OPTIONS)[0].label)}}))}reset(){if(this.props.mainComponentThis.floorplan3DComponent.current&&this.state.selectedMesh){const e=this.state.selectedMesh.index,t=this.state.edit[e],i=Object.values(this.MATERIAL_OPTIONS).findIndex((e=>e.value===t.value.type));this.syncMeshWithItemOption(t,Object.values(this.MATERIAL_OPTIONS)[i])}}render(){const e=this.state.edit.map((e=>e.label)),t=this.state.selectedMesh&&this.state.selectedMesh.index,i=t>=0&&this.state.edit[t];return i?(0,l.jsxs)(xs,{label:"Item material",containerClasses:"select-object-material-container",children:[(0,l.jsx)(Fs,{ref:this.partSelectListsRef,onListItemClick:this.getPartListItemClickHandler(),listItems:e}),(0,l.jsx)("div",{style:{marginBottom:"0.5rem"}}),(0,l.jsx)(Fs,{disabled:!0,ref:this.partMaterialSelectListsRef,onListItemClick:this.getPartMaterialListItemClickHandler(i,t),listItems:Object.values(this.MATERIAL_OPTIONS).filter((e=>e.value!==this.MATERIAL_OPTIONS.TEXTURE.value||this.props.selectedItem.isPartUVUnwrapped(this.state.selectedMesh.name))).map((e=>e.label))}),i.value.type===this.MATERIAL_OPTIONS.COLOR.value&&(0,l.jsx)(vs,{disabled:!0,containerStyle:{marginTop:"0.5rem",zIndex:this.state.edit.length-t},item:{...i,value:i.value.color},onChange:this.getOnItemColorChange,boxContainer:this.props.colorPickerBoxContainer}),(0,l.jsx)("div",{style:{display:i.value.type===this.MATERIAL_OPTIONS.TEXTURE.value?"block":"none"},children:(0,l.jsx)(xs,{label:"Select texture",containerClasses:"room-floor-textures-form-group-container ",children:(0,l.jsx)("div",{className:"room-floor-textures-component-container",style:{height:"500px"},children:(0,l.jsx)(Jg,{disabled:!0,ref:this.partTextureSelectRef,items:qt,onClickCallback:this.texturesSelectionCallbackHandler})})})})]}):null}}const gf=uf;class ff extends o.Component{constructor(e){super(),this.updateCameraCoverageAreaGraph=()=>{this.props.mainComponentThis.floorplan3DComponent.current?this.props.mainComponentThis.floorplan3DComponent.current.createCameraCoverageArea3DVisualization(this.props.cameraObj2D):this.props.mainComponentThis.createCameraCoverageArea2DVisualization(this.props.cameraObj2D)},this.onCameraCoverageOptionItemChange=e=>()=>{let t=parseFloat(e.inputRef.current.getValue());e.isMeasureItem&&(t=this.props.mainComponentThis.convertValueToSvgUnits(t,"meter","feet"));const i=this.props.cameraObj2D.additionalParams[e.parameterName];if(this.props.cameraObj2D.additionalParams[e.parameterName]=t,this.updateCameraCoverageAreaGraph(),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0),this.props.mainComponentThis.floorplan3DComponent.current){const t=this.props.cameraObj2D.additionalParams.mirrored?dt[this.props.cameraObj2D.type].modelMirroredRotationYSign:1;this.props.mainComponentThis.floorplan3DComponent.current.selectedCameraItemRotation(uo("cameraRotationAngleXDeg"===e.parameterName?i:this.props.cameraObj2D.additionalParams.cameraRotationAngleXDeg,this.props.cameraObj2D.additionalParams.cameraRotationAngleXDeg,"cameraRotationAngleYDeg"===e.parameterName?i*t:this.props.cameraObj2D.additionalParams.cameraRotationAngleYDeg*t,this.props.cameraObj2D.additionalParams.cameraRotationAngleYDeg*t))}},this.handleItemMirroredChange=()=>{const e=dt[this.props.cameraObj2D.type].modelMirroredRotationYSign*parseFloat(this.cameraRotationYInputComponentRef.current.getValue());this.cameraRotationYInputComponentRef.current.setValue(e),this.cameraRotationYInputComponentRef.current.setInitialValue(e),this.props.cameraObj2D.additionalParams.cameraRotationAngleYDeg=e,this.updateCameraCoverageAreaGraph()},this.handleItemRotationChange=()=>{this.props.mainComponentThis.floorplan3DComponent.current||this.props.mainComponentThis.createCameraCoverageArea2DVisualization(this.props.cameraObj2D)},this.cameraHorizontalFOVInputComponentRef=o.createRef(),this.cameraDistanceInputComponentRef=o.createRef(),this.cameraRotationYInputComponentRef=o.createRef(),this.cameraRotationXInputComponentRef=o.createRef(),this.cameraCoverageOptionItems=[{field:"camera_horizontal_fov_angle",label:"FOV(\xb0):",min:1,max:170,step:1,inputRef:this.cameraHorizontalFOVInputComponentRef,parameterName:"cameraHorizontalFOVAngleDeg"},{field:"camera_distance",label:"Distance(".concat("metric"===e.mainComponentThis.measureSystemContext.userUnit?"m":"ft","):"),min:"metric"===e.mainComponentThis.measureSystemContext.userUnit?.5:1,max:1/0,step:"metric"===e.mainComponentThis.measureSystemContext.userUnit?.1:1,inputRef:this.cameraDistanceInputComponentRef,parameterName:"cameraDistance",isMeasureItem:!0,isLongTextItem:!0},{field:"camera_rotation_y",label:"Rotation Y(\xb0):",min:dt[e.cameraObj2D.type].rotationYAngleDegMin,max:dt[e.cameraObj2D.type].rotationYAngleDegMax,step:1,inputRef:this.cameraRotationYInputComponentRef,parameterName:"cameraRotationAngleYDeg"},{field:"camera_rotation_x",label:"Rotation X(\xb0):",min:dt[e.cameraObj2D.type].rotationXAngleDegMin,max:dt[e.cameraObj2D.type].rotationXAngleDegMax,step:1,inputRef:this.cameraRotationXInputComponentRef,parameterName:"cameraRotationAngleXDeg",isLongTextItem:!0}],this.updateCameraCoverageAreaGraph=this.updateCameraCoverageAreaGraph.bind(this),this.onCameraCoverageOptionItemChange=this.onCameraCoverageOptionItemChange.bind(this),this.handleItemMirroredChange=this.handleItemMirroredChange.bind(this),this.handleItemRotationChange=this.handleItemRotationChange.bind(this)}componentDidMount(){this.updateCameraCoverageAreaGraph(),this.cameraCoverageOptionItems.forEach((e=>{let t=this.props.cameraObj2D.additionalParams[e.parameterName];e.isMeasureItem&&(t=this.props.mainComponentThis.convertSvgToValueUnits(t,"meter","feet",-Math.log10(e.step))),e.inputRef.current.setValue(t),e.inputRef.current.setInitialValue(t)}))}render(){return(0,l.jsxs)(xs,{label:"Camera coverage",children:[this.cameraCoverageOptionItems.map((e=>(0,l.jsx)(js,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:e.inputRef,isNumberInput:!0,controledNumberInput:!1,label:e.isLongTextItem?e.label:(0,l.jsx)(nn,{longText:this.cameraCoverageOptionItems.find((e=>e.isLongTextItem)).label,shortText:e.label}),labelClasses:"label-form-control-cancel",item:e,onChange:this.onCameraCoverageOptionItemChange},e.field))),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.isCameraPOVEnabled()&&(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Go,{type:"primary",onClick:()=>this.props.mainComponentThis.floorplan3DComponent.current.selectedCameraItemPOVView(),children:"Camera POV"})})]})}}const bf=ff;class wf extends o.Component{constructor(e){var t;super(),t=this,this.updatePresenceAreaGraph=()=>{this.props.mainComponentThis.floorplan3DComponent.current||this.props.mainComponentThis.createPresenceArea2DVisualization(this.props.presenceAreaObj2D)},this.setPresenceAreaParameterValue=(e,t)=>{e.isMeasureItem&&(t=this.props.mainComponentThis.convertValueToSvgUnits(t,"meter","feet")),this.props.presenceAreaObj2D.additionalParams[e.parameterName]=t,this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)},this.onPresenceAreaNumberParameterChange=e=>function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t.setPresenceAreaParameterValue(e,null!==i&&void 0!==i?i:parseFloat(e.inputRef.current.getValue())),t.updatePresenceAreaGraph()},this.onPresenceAreaSelectDetectedObjectChange=()=>e=>{this.setState({presenceAreaModelsItem:{...this.state.presenceAreaModelsItem,value:e.target.value}})},this.onPresenceAreaDetectedObjectModelChange=e=>{let t=this.props.presenceAreaObj2D.additionalParams[this.state.presenceAreaModelsItem.parameterName];t.find((e=>e.detectedObjectField===this.state.presenceAreaModelsItem.value.value)).modelType=e,this.setPresenceAreaParameterValue(this.state.presenceAreaModelsItem,t)},this.onPresenceAreaRotationAngleChange=e=>function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const o=null!==e&&void 0!==e?e:t.presenceAreaOptionItems.find((e=>"presence_area_rotation"===e.field));let s;null!==i?(s=i,o.inputRef.current.setValue(i)):s=parseFloat(o.inputRef.current.getValue()),t.props.mainComponentThis.setItemRotationAngle(s,t.props.presenceAreaObj2D),t.onPresenceAreaNumberParameterChange(o)(s)},this.state={presenceAreaModelsItem:{field:"presence_area_models",label:"",parameterName:"detectedObjectToModelMappings"}},this.presenceAreaOptionItems=[{field:"presence_area_width",label:"Width:",min:"metric"===e.mainComponentThis.context.userUnit?.5:1,max:1/0,step:"metric"===e.mainComponentThis.context.userUnit?.1:1,inputRef:o.createRef(),parameterName:"presenceAreaWidth",isMeasureItem:!0},{field:"presence_area_height",label:"Height:",min:"metric"===e.mainComponentThis.context.userUnit?.5:1,max:1/0,step:"metric"===e.mainComponentThis.context.userUnit?.1:1,inputRef:o.createRef(),parameterName:"presenceAreaHeight",isMeasureItem:!0,isLongTextItem:!0},{field:"presence_area_rotation",label:"Rotation(\xb0):",min:-180,max:180,step:1,inputRef:o.createRef(),parameterName:"presenceAreaRotation"}],this.presenceModelsFolderName=e.mainComponentThis.getObjectFolderName(e.mainComponentThis.presenceModels[0]),this.updatePresenceAreaGraph=this.updatePresenceAreaGraph.bind(this),this.setPresenceAreaParameterValue=this.setPresenceAreaParameterValue.bind(this),this.onPresenceAreaNumberParameterChange=this.onPresenceAreaNumberParameterChange.bind(this),this.onPresenceAreaSelectDetectedObjectChange=this.onPresenceAreaSelectDetectedObjectChange.bind(this),this.onPresenceAreaDetectedObjectModelChange=this.onPresenceAreaDetectedObjectModelChange.bind(this),this.onPresenceAreaRotationAngleChange=this.onPresenceAreaRotationAngleChange.bind(this)}componentDidMount(){this.updatePresenceAreaGraph(),this.presenceAreaOptionItems.forEach((e=>{let t=this.props.presenceAreaObj2D.additionalParams[e.parameterName];e.isMeasureItem&&(t=this.props.mainComponentThis.convertSvgToValueUnits(t,"meter","feet",-Math.log10(e.step))),e.inputRef.current.setValue(t),e.inputRef.current.setInitialValue(t),this.props.restoreSelectedBinderCall&&this.props.mainComponentThis.setItemRotationAngle(t,this.props.presenceAreaObj2D)}));const e=this.props.mainComponentThis.getPresenceAreaObjectDefaultValues()[this.state.presenceAreaModelsItem.parameterName].map((e=>({name:e.detectedObjectName,value:e.detectedObjectField})));this.setState({presenceAreaModelsItem:{...this.state.presenceAreaModelsItem,options:e,value:e[0]}})}render(){const{presenceAreaModelsItem:e}=this.state,t=this.presenceAreaOptionItems.filter((e=>e.isMeasureItem)),i=this.presenceAreaOptionItems.find((e=>"presence_area_rotation"===e.field));return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(xs,{label:"Dimensions(".concat("metric"===this.props.mainComponentThis.context.userUnit?"m":"ft",")"),containerStyle:{marginBottom:"0.5rem"},children:t.map((e=>(0,l.jsx)(js,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:e.inputRef,isNumberInput:!0,controledNumberInput:!1,label:e.isLongTextItem?e.label:(0,l.jsx)(nn,{longText:this.presenceAreaOptionItems.find((e=>e.isLongTextItem)).label,shortText:e.label}),labelClasses:"label-form-control-cancel",item:e,onChange:this.onPresenceAreaNumberParameterChange},e.field)))}),(0,l.jsx)(xs,{label:"Orientation",containerStyle:{marginBottom:"0.5rem"},children:(0,l.jsx)(js,{disabled:!0,containerStyle:{marginBottom:"0.5rem"},uncontroledNumberInputRef:i.inputRef,isNumberInput:!0,controledNumberInput:!1,label:i.label,labelClasses:"label-form-control-cancel",item:i,onChange:this.onPresenceAreaRotationAngleChange})}),(0,l.jsxs)(xs,{containerClasses:"presence-area-models-container",children:[(0,l.jsx)(rn,{labelText:"Models",infoText:"Specify which models to display for each detected object in the presence area.",explanationInfoBoxLeft:-50,disableMarginIncrease:!0}),e.value&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(us,{disabled:!0,selectInput:!0,item:e,fullWidth:!0,formGroupStyle:{marginBottom:"0.5rem"},onChange:this.onPresenceAreaSelectDetectedObjectChange}),(0,l.jsx)(Kg,{disabled:!0,containerClasses:"right-box-presence-area-model-selection-container",initialSelectedItemModel:this.props.presenceAreaObj2D.additionalParams[e.parameterName].find((t=>t.detectedObjectField===e.value.value)).modelType,items:[{...this.props.mainComponentThis.folderNameToModelsMapping[this.presenceModelsFolderName]}],hideSearchInput:!0,hideCategoryLabel:!0,onFloorplanItemSelectionCallback:this.onPresenceAreaDetectedObjectModelChange,mainComponentThis:this.props.mainComponentThis},e.value.value)]})]})]})}}const Cf=wf;var xf=i(1317);function yf(){let e=null!==this.selectedBinder.realRoomArea?this.selectedBinder.realRoomArea/(this.meter*this.meter):null;this.selectedBinder.setAttribute("fill","none"),this.selectedBinder.setAttribute("stroke","#ddf00a"),this.selectedBinder.setAttribute("stroke-width",7),document.getElementsByClassName("size")[0].innerHTML=null!==e?eo(e,this.measureSystemContext.userUnit,"square meter","square foot",this.roomSurfaceDecimalPrecision,!0,!0):"Cannot be determined";const t=this.ROOM.find((e=>e.id===parseInt(this.selectedBinder.id)));if(xf.log("targetRoom"),xf.log(t),this.selectedRoomId=t.id,t.surface){const e=eo(t.surface,this.measureSystemContext.userUnit,"square meter","square foot",this.roomSurfaceDecimalPrecision);this.roomSurface.current.setValue(e),this.roomSurface.current.setInitialValue(e)}else this.roomSurface.current.setValue(""),this.roomSurface.current.setInitialValue("");let i=t.name;this.roomName.current.value=i,""!==t.name?this.roomNameSelectRef.current.setValue(i):this.roomNameSelectRef.current.setValue("None"),this.roomFloorParametersRef.current.setFloorParametersForRoom(t)}function Sf(e){const t=Qi(e.thick/this.meter,this.measureSystemContext.userUnit,"meter","metric"===this.measureSystemContext.userUnit?"centimeter":"inch",this.wallWidthDecimalPrecision,!1,!1,!0),i=Qi(Ki(e.start,e.end)/this.meter,this.measureSystemContext.userUnit,"meter","feet",this.wallLengthDecimalPrecision);this.wallWidth.current.value=t,this.wallWidthValue.current.textContent=t,this.wallWidthNumberSliderInput.current.setNumberInputInitialValues(t),this.wallLengthValue.current.textContent=i,this.wallLength.current.setValue(i),this.wallLength.current.setInitialValue(i),this.wallMaterialRef.current.setSelectedWallMaterialData(e),this.wallAlwaysHideRef.current.setSelectWallAlwaysHideStatus(e,t),this.wallCustomHeightRef.current.setSelectedCustomWallHeightData(e)}function _f(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("text"===e.class)s.render((0,l.jsx)(tf,{targetObject2D:e,itemRotationValueRef:this.itemRotationValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemRotationsRef.current),s.render((0,l.jsx)($g,{targetObject2D:e,textItemFontSizeValueRef:this.textItemFontSizeValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemTextToolsRef.current),s.unmountComponentAtNode(this.freeItemDimensionsRef.current),s.unmountComponentAtNode(this.freeItemPositionsRef.current),s.unmountComponentAtNode(this.freeItemMirroredRef.current),s.unmountComponentAtNode(this.freeCameraCoverageOptionsContainerRef.current),s.unmountComponentAtNode(this.freeItemTypesSelectionBoxRef.current),s.unmountComponentAtNode(this.freeItemChangeTypeRef.current),s.unmountComponentAtNode(this.freeItemMaterialsRef.current);else{if(xt[e.type]?(s.unmountComponentAtNode(this.freeItemDimensionsRef.current),s.unmountComponentAtNode(this.freeItemPositionsRef.current),s.unmountComponentAtNode(this.freeItemRotationsRef.current),s.unmountComponentAtNode(this.freeItemMirroredRef.current)):(s.render((0,l.jsx)(tf,{ref:this.activeItemRotationsRef,targetObject2D:e,itemRotationValueRef:this.itemRotationValue,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemRotationsRef.current),s.render((0,l.jsx)(sf,{targetObject2D:e,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemDimensionsRef.current),Ge.includes(this.getObjectItemType(e.type))?s.unmountComponentAtNode(this.freeItemPositionsRef.current):s.render((0,l.jsx)(lf,{ref:this.activeItemPositionsRef,targetObject2D:e,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.freeItemPositionsRef.current),""!==this.getObjectFolderName(e.type)?s.render((0,l.jsx)(af,{selectedItemObj2D:e,mainComponentThis:this},(new Date).getTime()),this.freeItemMirroredRef.current):s.unmountComponentAtNode(this.freeItemMirroredRef.current)),this.isCameraObject(e.type)?s.render((0,l.jsx)(bf,{ref:this.cameraCoverageOptionsActiveRef,cameraObj2D:e,mainComponentThis:this},(new Date).getTime()),this.freeCameraCoverageOptionsContainerRef.current):s.unmountComponentAtNode(this.freeCameraCoverageOptionsContainerRef.current),s.render((0,l.jsx)(Xg,{selectedItemObj2D:e,selectedItemFolderName:this.getObjectFolderName(e.type),mainComponentThis:this},(new Date).getTime()),this.freeItemTypesSelectionBoxRef.current),s.render((0,l.jsx)(cf,{selectedItemObj2D:e,setResponseError:this.setState.bind(this),mainComponentThis:this},(new Date).getTime()),this.freeItemChangeTypeRef.current),this.floorplan3DComponent.current){const t=this.floorplan3DComponent.current.userInteractionCurrentController.selectedObject;this.freeItemMaterialsRef.current&&s.render((0,l.jsx)(gf,{ref:this.freeItemMaterialsComponentRef,selectedItem:t,mainComponentThis:this,colorPickerBoxContainer:this.freeItemMaterialsRef.current,targetObject2D:e},(new Date).getTime()),this.freeItemMaterialsRef.current)}else s.unmountComponentAtNode(this.freeItemMaterialsRef.current);s.unmountComponentAtNode(this.freeItemTextToolsRef.current),this.freeItemToolsCustomSetter(e,t)}}function Df(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xt[e.type]?(s.unmountComponentAtNode(this.wallItemDimensionsRef.current),s.unmountComponentAtNode(this.wallItemPositionsRef.current),s.unmountComponentAtNode(this.wallItemMirroredRef.current)):(s.render((0,l.jsx)(sf,{targetObject2D:e,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.wallItemDimensionsRef.current),Ge.includes(this.getObjectItemType(e.type))?s.unmountComponentAtNode(this.wallItemPositionsRef.current):s.render((0,l.jsx)(lf,{ref:this.activeItemPositionsRef,targetObject2D:e,restoreSelectedBinderCall:i,mainComponentThis:this},(new Date).getTime()),this.wallItemPositionsRef.current),""!==this.getObjectFolderName(e.type)?s.render((0,l.jsx)(af,{selectedItemObj2D:e,mainComponentThis:this},(new Date).getTime()),this.wallItemMirroredRef.current):s.unmountComponentAtNode(this.wallItemMirroredRef.current)),s.render((0,l.jsx)(Xg,{selectedItemObj2D:e,selectedItemFolderName:this.getObjectFolderName(e.type),mainComponentThis:this},(new Date).getTime()),this.wallItemTypesSelectionBoxRef.current),s.render((0,l.jsx)(cf,{selectedItemObj2D:e,setResponseError:this.setState.bind(this),mainComponentThis:this},(new Date).getTime()),this.wallItemChangeTypeRef.current),this.isWindowObject(e.type)&&wo(e.type)?s.render((0,l.jsx)(mf,{mainComponentThis:this,windowObj2D:e},(new Date).getTime()),this.windowRotationOptionsContainerRef.current):s.unmountComponentAtNode(this.windowRotationOptionsContainerRef.current),this.isCameraObject(e.type)?s.render((0,l.jsx)(bf,{ref:this.cameraCoverageOptionsActiveRef,cameraObj2D:e,mainComponentThis:this},(new Date).getTime()),this.wallCameraCoverageOptionsContainerRef.current):s.unmountComponentAtNode(this.wallCameraCoverageOptionsContainerRef.current),this.wallItemHideWithWallRef.current.setSelectedObjectData(e),this.floorplan3DComponent.current){const t=this.floorplan3DComponent.current.userInteractionCurrentController.selectedObject;this.wallItemMaterialsRef.current&&s.render((0,l.jsx)(gf,{ref:this.wallItemMaterialsComponentRef,selectedItem:t,mainComponentThis:this,colorPickerBoxContainer:this.wallItemMaterialsRef.current,targetObject2D:e},(new Date).getTime()),this.wallItemMaterialsRef.current)}else s.unmountComponentAtNode(this.wallItemMaterialsRef.current);this.wallItemToolsCustomSetter(e,t)}function vf(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s.render((0,l.jsx)(Cf,{ref:this.presenceAreaOptionsRef,presenceAreaObj2D:e,restoreSelectedBinderCall:t,mainComponentThis:this},(new Date).getTime()),this.presenceAreaOptionsContainerRef.current)}var Tf=i(1317);class jf extends o.Component{constructor(e){var t;super(e),t=this,this.generateFloorplanImageCanvas=e=>{const t=this.props.mainComponentThis.qSVG.create("none","svg",{preserveAspectRatio:"xMidYMin slice"}),i=this.props.mainComponentThis.qSVG.create("none","g");return this.props.mainComponentThis.floorplanFloorsData.forEach((e=>{this.props.mainComponentThis.setWallsChildParentValues(e.wallData),this.props.mainComponentThis.editor.wallsComputing(e.wallData,!1,i,!1)})),t.appendChild(i),this.props.mainComponentThis.downloadSvg(!1,!1,!0,e,!1,{svgElement:t,bboxCoords:this.props.mainComponentThis.getFloorplanWallsBBoxCoords()})},this.addFloorplanImageLayer=e=>{this.currentFloorplanImageCanvasCoordinates=this.calculateFloorplanImageCanvasCoordinatesForBearing(this.state.edit.find((e=>"bearing_angle"===e.field)).value),this._map.addSource("floorplan-image-source",{type:"canvas",canvas:this.floorplanCanvas,coordinates:this.currentFloorplanImageCanvasCoordinates,animate:!1}),this._map.addLayer({id:"floorplan-image-layer",type:"raster",source:"floorplan-image-source"}),e&&this.setState({floorplanImageLayerAdded:!0},(()=>this.focusFloorplanImageCanvas(!1)))},this.focusFloorplanImageCanvas=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!t.floorplanImageCanvasCurrentBearingPolygon||e&&!t.isStyleChangeAllowed()||t.setState({mapCenter:(0,uc.Z)(t.floorplanImageCanvasCurrentBearingPolygon).geometry.coordinates},(()=>{Vi(t._map,t.currentFloorplanImageCanvasCoordinates,Number(t.floorplanBearingSliderRef.current.value))}))},this.closeShowFloorplanOnMapModal=(e,t,i)=>{e&&this.props.mainComponentThis.showMapLayer2DInputRef.current.getCheckedStatus()&&s.unmountComponentAtNode(this.props.mainComponentThis.mapLayer2DContainerRef.current),fi(this.props.containerRef.current,200,(()=>{s.unmountComponentAtNode(this.props.containerRef.current),e&&this.props.mainComponentThis.showMapLayer2DInputRef.current.getCheckedStatus()&&s.render((0,l.jsx)(Rc,{ref:this.props.mainComponentThis.showMapLayer2D3DRef,is3D:!1,center:[16.8557,44.0462],floorplanGpsCoords:[t,i],onMapContextLoadedCallback:this.props.mainComponentThis.onMapContextLoadedCallback2D,preserveDrawingBuffer:!1,mapStylesChangeRef:this.props.mainComponentThis.mapStylesChangeRef,mainComponentThis:this.props.mainComponentThis}),this.props.mainComponentThis.mapLayer2DContainerRef.current)}),!1)},this.onMapZoom=()=>{this._map&&(this._zoom=this._map.getZoom())},this.onMapClick=(e,t)=>{if(this._map&&this.state.changeTopLeftGpsCoordinatesEnabled){const e=this.state.edit.map((e=>"gps_lat"===e.field?{...e,value:t.lngLat.lat.toString()}:"gps_long"===e.field?{...e,value:t.lngLat.lng.toString()}:{...e}));this.setState({edit:e},(()=>this.handleFloorplanImageCanvasCoordinateChange(t.lngLat.lng,t.lngLat.lat)))}},this.switchLayer=e=>()=>{if(this._map&&this.isStyleChangeAllowed()&&this.state.selectedMapStyle!==e&&this.mounted){let t=this.state.selectedMapStyle;this.setState({selectedMapStyle:e,mapStyleLoaded:!1},(()=>{this._map.getStyle().layers.forEach((e=>{this._map.removeLayer(e.id)}));const{callback:i,newStyle:o}=((e,t,i)=>{let o=null,s="mapbox/"+e;return"TERRAIN"!==e&&"TERRAIN"===t&&(i.setTerrain(null),i.removeSource("mapbox-dem")),"TERRAIN"===e&&(s="mapbox-map-design/ckhqrf2tz0dt119ny6azh975y",o=()=>{i.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),i.setTerrain({source:"mapbox-dem",exaggeration:1.5}),i.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})}),"BUILDINGS"===e&&(s="mapbox/light-v10",o=()=>{const e=i.getStyle().layers;let t;for(let i=0;i<e.length;i++)if("symbol"===e[i].type&&e[i].layout["text-field"]){t=e[i].id;break}i.addLayer({id:"3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},t)}),{callback:o,newStyle:s}})(e,t,this._map);this._map.setStyle("mapbox://styles/"+o,{diff:!1}),this._map.once("idle",(()=>{this.mounted&&this.setState({mapStyleLoaded:!0},(()=>{i&&i(),this.state.floorplanImageLayerAdded&&this.addFloorplanImageLayer(!1)}))}))}))}},this.isStyleChangeAllowed=()=>{if(this.state.mapStyleLoaded){const e=this._map.getStyle();let t=e&&e.layers;return t?this.state.floorplanImageLayerAdded&&!t.find((e=>"floorplan-image-layer"===e.id))?(Tf.log("False, nema floorplanImageCanvas layera"),!1):"BUILDINGS"!==this.state.selectedMapStyle||"BUILDINGS"===this.state.selectedMapStyle&&t.find((e=>"3d-buildings"===e.id))?"TERRAIN"!==this.state.selectedMapStyle||"TERRAIN"===this.state.selectedMapStyle&&t.find((e=>"sky"===e.id))&&e.sources["mapbox-dem"]?(Tf.log("Omogucena promjena stila"),!0):(Tf.log("False. nema terrain layera"),!1):(Tf.log("False. nema buildings layera"),!1):(Tf.log("Nema layera"),!1)}return Tf.log("Vanjski if. Nije loadan stil"),!1},this.calculateFloorplanImageCanvasCoordinatesForBearing=e=>{const t={pivot:[this.state.edit.find((e=>"gps_long"===e.field)).value,this.state.edit.find((e=>"gps_lat"===e.field)).value]};return this.floorplanImageCanvasCurrentBearingPolygon=(0,fc.Z)(this.floorplanImageCanvasZeroBearingPolygon,e,t),this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0].slice(0,-1)},this.handleFloorplanImageCanvasCoordinateChange=(e,t)=>{this.state.floorplanBearingAngleMechanismDisabled?this.createFloorplanImageCanvas(e,t,{floorplanBearingAngleMechanismDisabled:!1}):this.translateFloorplanImageCanvas(e,t)},this.createFloorplanImageCanvas=function(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;t.floorplanImageCanvasZeroBearingPolygon.geometry.coordinates=[[...Wi(i,e,t.floorplanDimensions.width,t.floorplanDimensions.height),[e,i]]],t.generateFloorplanImageCanvas(!t.state.showFloorplanImageBackground).then((e=>{let i=new Image;i.onload=()=>{t.state.showFloorplanImageBackground?t.floorplanWhiteBgImage=i:t.floorplanTransparentBgImage=i,t.floorplanCanvas.width=i.width,t.floorplanCanvas.height=i.height,t.floorplanCanvas.getContext("2d").drawImage(i,0,0),t.setState({...o,floorplanImageLoaded:!0,loading:!1,mapCenter:(0,uc.Z)(t.floorplanImageCanvasZeroBearingPolygon).geometry.coordinates},(()=>!!s&&s()))},i.onerror=e=>{t.setState({error:e,visibleErrorPopup:!0,loading:!1,mapCenter:(0,uc.Z)(t.floorplanImageCanvasZeroBearingPolygon).geometry.coordinates})},i.src=e})).catch((()=>t.setState({errorNote:"Ooops. An error happened during floorplan image creation."})))},this.translateFloorplanImageCanvas=(e,t)=>{const i=J()(this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0][0]),o=J()([e,t]),s=(0,bc.Z)(i,o),n=(0,wc.Z)(i,o);this.floorplanImageCanvasZeroBearingPolygon=(0,gc.Z)(this.floorplanImageCanvasZeroBearingPolygon,n,s),this.floorplanImageCanvasCurrentBearingPolygon=(0,gc.Z)(this.floorplanImageCanvasCurrentBearingPolygon,n,s),this.currentFloorplanImageCanvasCoordinates=this.floorplanImageCanvasCurrentBearingPolygon.geometry.coordinates[0].slice(0,-1),this._map.getSource("floorplan-image-source").setCoordinates(this.currentFloorplanImageCanvasCoordinates)},this.changeFloorplanImageCanvasImage=e=>{this._map.removeLayer("floorplan-image-layer"),this._map.removeSource("floorplan-image-source"),this.floorplanCanvas.width=e.width,this.floorplanCanvas.height=e.height,this.floorplanCanvas.getContext("2d").drawImage(e,0,0),this.addFloorplanImageLayer()},this.onChangeFloorplanImageCanvasBackgroundOptionClick=()=>{if(this.isStyleChangeAllowed()){let e=!0,t=!this.state.showFloorplanImageBackground;t?this.floorplanWhiteBgImage&&(e=!1):this.floorplanTransparentBgImage&&(e=!1),e?this.generateFloorplanImageCanvas(!t).then((e=>{let i=new Image;i.onload=()=>{t?this.floorplanWhiteBgImage=i:this.floorplanTransparentBgImage=i,this.changeFloorplanImageCanvasImage(i),this.setState({showFloorplanImageBackground:t})},i.onerror=e=>{this.setState({error:e,visibleErrorPopup:!0})},i.src=e})).catch((()=>this.setState({errorNote:"Ooops. An error happened during floorplan image creation."}))):(this.changeFloorplanImageCanvasImage(t?this.floorplanWhiteBgImage:this.floorplanTransparentBgImage),this.setState({showFloorplanImageBackground:t}))}},this.state={edit:null,originalData:{},floorplanImageLoaded:!1,floorplanImageLayerAdded:!1,floorplanNoInitialBearing:!1,loading:!0,error:null,floorplanLoadingError:null,tooltip:null,visibleErrorPopup:!1,mapCenter:[],selectedMapStyle:"light-v8",mapStyleLoaded:!0,changeTopLeftGpsCoordinatesEnabled:!1,errorNote:null,changeBearingAngleEnabled:!1,floorplanGpsCoordinatesMechanismDisabled:!1,floorplanBearingAngleMechanismDisabled:!1,showFloorplanImageBackground:!0},this._map=null,this.zoomRange=4,this._zoom=9,this.mounted=!1,this.floorplanDimensions={width:0,height:0},this.floorplanImageCanvasZeroBearingPolygon={type:"Feature",geometry:{type:"Polygon",coordinates:[]},properties:{}},this.getBaseStations=!1,this.floorplanGeneral=null,this.floorplanImageCanvasCurrentBearingPolygon=null,this.currentFloorplanImageCanvasCoordinates=null,this.floorplanBearingNumberSliderInput=o.createRef(),this.floorplanBearingSliderRef=o.createRef(),this.floorplanCanvas=document.createElement("canvas"),this.floorplanWhiteBgImage=null,this.floorplanTransparentBgImage=null,this.addFloorplanImageLayer=this.addFloorplanImageLayer.bind(this),this.closeShowFloorplanOnMapModal=this.closeShowFloorplanOnMapModal.bind(this),this.onMapZoom=this.onMapZoom.bind(this),this.onMapClick=this.onMapClick.bind(this),this.switchLayer=this.switchLayer.bind(this),this.isStyleChangeAllowed=this.isStyleChangeAllowed.bind(this),this.calculateFloorplanImageCanvasCoordinatesForBearing=this.calculateFloorplanImageCanvasCoordinatesForBearing.bind(this),this.focusFloorplanImageCanvas=this.focusFloorplanImageCanvas.bind(this),this.handleFloorplanImageCanvasCoordinateChange=this.handleFloorplanImageCanvasCoordinateChange.bind(this),this.createFloorplanImageCanvas=this.createFloorplanImageCanvas.bind(this),this.translateFloorplanImageCanvas=this.translateFloorplanImageCanvas.bind(this),this.changeFloorplanImageCanvasImage=this.changeFloorplanImageCanvasImage.bind(this),this.onChangeFloorplanImageCanvasBackgroundOptionClick=this.onChangeFloorplanImageCanvasBackgroundOptionClick.bind(this),this.generateFloorplanImageCanvas=this.generateFloorplanImageCanvas.bind(this)}componentWillUnmount(){this.mounted=!1}componentDidMount(){this.mounted=!0,this.props.floorplanID?C.get.call(this,"/klet3d/entity/".concat(this.props.floorplanID,"/").concat(this.props.mainComponentThis.props.licenseKey),(e=>{if(e&&e.length>0){this.floorplanGeneral=e[0].plan_general;const o=this.props.mainComponentThis.getFloorplanGpsLongitude(e[0].plan_general),s=this.props.mainComponentThis.getFloorplanGpsLatitude(e[0].plan_general),n=this.props.mainComponentThis.getFloorplanWallsBBoxCoords();this.floorplanDimensions.width=T(n.width/this.props.mainComponentThis.meter,2),this.floorplanDimensions.height=T(n.height/this.props.mainComponentThis.meter,2);const a=e[0].plan_general.floorplan_bearing||Q.find((e=>"bearing_angle"===e.field)).defaultValue,r=(t={gps_lat:s&&s.toString(),gps_long:o&&o.toString(),bearing_angle:a},i=Q,Object.entries(t).map((e=>{let[t,o]=e;return{...i.find((e=>e.field===t)),value:void 0!==o&&null!==o?o:""}})));k(s)||k(o)?G.call(this,"mapCenter",this.props.setResponseError,(()=>this.setState({edit:r,originalData:r,loading:!1,floorplanNoInitialBearing:!0,floorplanBearingAngleMechanismDisabled:!0},(()=>{this.floorplanBearingSliderRef.current.value=a,this.floorplanBearingNumberSliderInput.current.setNumberInputInitialValues(a)})))):this.createFloorplanImageCanvas(o,s,{edit:r,originalData:r,floorplanNoInitialBearing:!e[0].plan_general.floorplan_bearing&&0!==e[0].plan_general.floorplan_bearing},(()=>{this.floorplanBearingSliderRef.current.value=a,this.floorplanBearingNumberSliderInput.current.setNumberInputInitialValues(a)}))}var t,i})):this.setState({loading:!1,floorplanLoadingError:"Floorplan couldn't be found. Please save it first then try again."})}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(ps,{onCloseModalClick:()=>this.closeShowFloorplanOnMapModal(!1),children:(0,l.jsx)("div",{className:"layout__section",style:{height:"auto",maxHeight:"85vh"},children:(()=>this.state.loading?(0,l.jsx)(Ms,{center:!0}):this.state.floorplanLoadingError?(0,l.jsx)("p",{className:"show-floorplan-on-map-error",children:this.state.floorplanLoadingError}):(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("section",{className:"show-floorplan-on-map-form-controls-container",children:this.state.edit&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsxs)("div",{className:"form-controls-container",children:[(0,l.jsx)("div",{className:"form-container",children:this.state.edit.slice(0,2).map((e=>(0,l.jsx)(us,{disabled:!0,label:e.label,placeholder:e.placeholder,item:e,value:e.value||"",type:e.type,error:e.error},e.label)))}),(0,l.jsx)(Es.Z,{theme:Xs,children:(0,l.jsx)("div",{title:"Change floorplan coordinates",children:(0,l.jsx)(Ys.Z,{disabled:!0,checked:this.state.changeTopLeftGpsCoordinatesEnabled})})})]}),(0,l.jsxs)("div",{className:"form-controls-container",children:[(0,l.jsx)("div",{className:"form-container",children:(0,l.jsx)(cr,{disabled:!0,ref:this.floorplanBearingNumberSliderInput,sliderInputRef:this.floorplanBearingSliderRef,valueLabelText:Q.find((e=>"bearing_angle"===e.field)).label,sliderStep:1,minValue:0,maxValue:359,defaultValue:Q.find((e=>"bearing_angle"===e.field)).defaultValue})}),(0,l.jsx)(Es.Z,{theme:Xs,children:(0,l.jsx)("div",{title:"Change floorplan bearing",children:(0,l.jsx)(Ys.Z,{disabled:!0,checked:this.state.changeBearingAngleEnabled})})})]})]})}),(this.state.changeTopLeftGpsCoordinatesEnabled||this.state.changeBearingAngleEnabled||this.state.errorNote)&&(0,l.jsx)("p",{className:"above-map-note ".concat(this.state.errorNote?"error":""),children:this.state.errorNote?this.state.errorNote:this.state.changeTopLeftGpsCoordinatesEnabled?"Select coordinates of the top left corner of your floorplan":"Rotate floorplan around the top left corner"}),(0,l.jsxs)("section",{className:"layout__section map",children:[(0,l.jsx)("div",{className:"layer-change show-floorplan-on-map map-feature-icon svg-center-inside-container"}),(0,l.jsx)("div",{className:"layer-dropdown",style:{top:105},children:(0,l.jsx)(Js,{mapStyles:ee,switchLayer:this.switchLayer,selectedMapStyle:this.state.selectedMapStyle})}),this.state.floorplanImageLayerAdded&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{className:"last-point-center show-floorplan-on-map map-feature-icon svg-center-inside-container",onClick:this.focusFloorplanImageCanvas,children:(0,l.jsx)(Pp,{})}),(0,l.jsx)("div",{className:"feature-info",children:(0,l.jsx)("div",{children:"Focus floorplan image"})}),(0,l.jsx)("div",{className:"floorplan-image-background-option map-feature-icon svg-center-inside-container",onClick:this.onChangeFloorplanImageCanvasBackgroundOptionClick,children:this.state.showFloorplanImageBackground?(0,l.jsx)("svg",{viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsx)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M2448 4784 c-97 -23 -157 -60 -248 -153 -116 -119 -245 -286 -415\r -541 -564 -845 -870 -1711 -817 -2305 45 -495 297 -921 710 -1198 164 -110\r 377 -198 585 -239 160 -32 434 -32 593 0 579 116 1039 517 1223 1070 58 175\r 76 294 75 512 0 154 -5 222 -22 324 -93 545 -363 1176 -767 1796 -158 243\r -378 526 -488 627 -113 104 -276 145 -429 107z m178 -320 c65 -31 283 -302\r 471 -584 296 -443 562 -1006 663 -1400 6 -25 13 -53 16 -62 5 -17 -58 -18\r -1215 -18 -672 0 -1221 1 -1221 3 0 2 15 57 34 123 119 418 342 886 633 1329\r 192 291 418 575 484 608 43 21 92 21 135 1z"})})}):(0,l.jsx)("svg",{viewBox:"0 0 512.000000 512.000000",preserveAspectRatio:"xMidYMid meet",children:(0,l.jsx)("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:(0,l.jsx)("path",{d:"M2448 4784 c-97 -23 -157 -60 -248 -153 -116 -119 -245 -286 -415\r\n-541 -564 -845 -870 -1711 -817 -2305 65 -721 582 -1295 1295 -1437 160 -32\r\n434 -32 593 0 579 116 1039 517 1223 1070 58 175 76 294 75 512 0 154 -5 222\r\n-22 324 -93 545 -363 1176 -767 1796 -158 243 -378 526 -488 627 -113 104\r\n-276 145 -429 107z m178 -320 c65 -31 283 -302 471 -584 296 -443 562 -1006\r\n663 -1400 6 -25 13 -53 16 -62 5 -17 -58 -18 -1215 -18 -672 0 -1221 1 -1221\r\n3 0 2 15 57 34 123 119 418 342 886 633 1329 192 291 418 575 484 608 43 21\r\n92 21 135 1z m1210 -2431 c11 -71 -4 -287 -25 -383 -99 -438 -410 -789 -831\r\n-938 -152 -53 -237 -67 -425 -66 -137 0 -187 5 -261 22 -260 61 -452 168 -635\r\n351 -188 188 -297 386 -350 636 -22 107 -35 288 -25 368 l7 57 1269 0 1269 0\r\n7 -47z"})})})}),(0,l.jsx)("div",{className:"feature-info",style:{width:this.state.showFloorplanImageBackground?150:180},children:(0,l.jsx)("div",{children:this.state.showFloorplanImageBackground?"White background":"Transparent background"})})]}),(0,l.jsx)("div",{className:"glamos-bottom-left-logo",children:(0,l.jsx)("img",{alt:"Glamos logo",src:"dark-v10"===this.state.selectedMapStyle||"satellite-v9"===this.state.selectedMapStyle||"TERRAIN"===this.state.selectedMapStyle?Lc:a})}),(0,l.jsxs)(en,{preserveDrawingBuffer:!0,mapStyle:"mapbox://styles/mapbox/light-v8",center:this.state.mapCenter,zoom:[this._zoom],minZoom:3,maxZoom:15,onZoom:this.onMapZoom,onClick:this.onMapClick,children:[(0,l.jsx)(Qs.Ly,{className:"zoom-control"}),(0,l.jsx)(Qs.AI,{className:"rotation-control"}),(0,l.jsx)(Qs.jf,{className:"scale-control",measurement:"metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"km":"mi"}),(0,l.jsx)(Qs.X$.Consumer,{children:e=>{this._map=e,this.state.floorplanImageLoaded&&!this.state.floorplanImageLayerAdded&&(this._map.setMaxZoom(22),this.addFloorplanImageLayer(!0))}})]})]}),(0,l.jsx)("div",{className:"button-centered-container",style:{marginTop:"1rem"},children:(0,l.jsx)(Go,{type:"dull",disabled:!0,children:"Save changes"})})]}))()})}),(0,l.jsx)(on,{visible:this.state.visibleErrorPopup,loading:!1,error:this.state.error,singleButton:!0,statePropertyName:"visibleErrorPopup",setChoice:this.setState.bind(this)})]})}}const Of=jf;var If=i(1317);function Pf(e,t){e&&(window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("keydown",this.handleKeyDown,{capture:!0})),t&&(window.addEventListener("resize",this.handleWindowResize),window.addEventListener("keydown",this.handleKeyDown,{capture:!0}))}function kf(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isFloorplanNoWalls())this.setShow3DStatus(!1,(()=>{!e&&s.unmountComponentAtNode(this.loadingComponentContainer.current),gi(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout)}));else{this.hideActiveRightBox();const t=()=>{window.removeEventListener("keydown",this.handleKeyDown,{capture:!0}),!0!==this.state.show3D?this.setShow3DStatus(!0,(()=>this.floorplan3DComponent.current.onDataLoadedCallback())):this.floorplan3DComponent.current.onDataLoadedCallback()};e?s.render((0,l.jsx)(ur,{}),this.loadingComponentContainer.current,(()=>t())):t()}}function Ff(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.panel.current.querySelectorAll(".panel-icon-button-container");if(e===this.smallScreenMinimizedPanelSize){const e=this.panel.current.querySelectorAll(".panel-action-button > button");for(let t of e)t.classList.add("small-screen-minimized"),t.classList.add("floorplan")}else{const e=this.panel.current.querySelectorAll(".panel-action-button > button");for(let t of e)t.classList.remove("small-screen-minimized"),t.classList.remove("floorplan")}this.panel.current.classList.add("panel-small-screen-minimized"),this.panelControl.current.title="Show panel",this.boxPlanName.current.style.paddingLeft="".concat(e+30,"px"),this.boxInfo.current.style.left="".concat(e+30,"px"),this.panel.current.style.width="".concat(e,"px"),t&&(this.panelControl.current.style.transform="translateX(".concat(e,"px)")),this.panelControl.current.children[0].style.transform="rotate(180deg)",this.panel.current.addEventListener("transitionend",(()=>{this.panel.current.classList.add("panel-centered");for(let e of i)e.classList.add("panel-icon-button-no-text"),e.classList.remove("fully");this.layersListArrowRef.current.classList.add("hidden");const t=this.panel.current.querySelectorAll(".checked-input-container");for(let e of t)e.classList.add("checked-input-container-no-label");const o=document.querySelectorAll(".left-panel-switch-option-container.panel2D");for(let e of o)e.classList.add("hide-label");this.uploadImageFloorplanSettingsIconRef.current.classList.add("hide"),e===this.smallScreenMinimizedPanelSize?this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="wrap":this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="nowrap",e===this.smallScreenMinimizedPanelSize?this.uploadFloorplanImageStatusContainerRef.current.classList.add("small-screen-minimized"):this.uploadFloorplanImageStatusContainerRef.current.classList.remove("small-screen-minimized"),this.floorplanFloorsPanelBoxContainerRef.current.classList.add("hide-labels")}),{once:!0}),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.hidePanel()}function Mf(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.panel.current.querySelectorAll(".panel-icon-button-container");this.isSmallScreen()&&this.hideRightBox(),this.panel.current.classList.remove("panel-small-screen-minimized");const o=this.panel.current.querySelectorAll(".panel-action-button > button");for(let s of o)s.classList.remove("small-screen-minimized"),s.classList.remove("floorplan");this.panelControl.current.title="Hide panel",this.boxPlanName.current.style.paddingLeft="".concat(e+10,"px"),this.boxInfo.current.style.left="".concat(e+30,"px"),this.panel.current.style.width="".concat(e,"px"),this.panel.current.classList.remove("panel-centered"),t&&(this.panelControl.current.style.transform="translateX(".concat(e,"px)")),this.panelControl.current.children[0].style.transform="rotate(0deg)",this.panel.current.addEventListener("transitionend",(()=>{for(let e of i)e.classList.remove("panel-icon-button-no-text"),e.classList.add("fully");this.layersListArrowRef.current.classList.remove("hidden");const t=this.panel.current.querySelectorAll(".checked-input-container");for(let e of t)e.classList.remove("checked-input-container-no-label");const o=document.querySelectorAll(".left-panel-switch-option-container.panel2D");for(let e of o)e.classList.remove("hide-label");e!==this.smallScreenMaximizedPanelSize&&this.uploadImageFloorplanSettingsIconRef.current.classList.remove("hide"),this.uploadFloorplanPanelButtonContainer.current.style.flexWrap="nowrap",this.uploadFloorplanImageStatusContainerRef.current.classList.remove("small-screen-minimized"),this.floorplanFloorsPanelBoxContainerRef.current.classList.remove("hide-labels")}),{once:!0})}function Af(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.isPanelMaximized()){const t=this.isSmallScreen()?this.smallScreenMinimizedPanelSize:this.bigScreenMinimizedPanelSize;this.minimizePanel(t,e)}else{const t=this.isSmallScreen()?this.smallScreenMaximizedPanelSize:this.bigScreenMaximizedPanelSize;this.maximizePanel(t,e)}}function Rf(e){this.resetKlet3DBinderParams(),this.resetSelectedObjectMaterial(),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.removeCameraCoverageArea3DMesh(),this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.translateRightBox(e.current,this.rightBoxWidth,!1)}function Lf(){this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.translateRightBox(this.floorParameters.current,250,!1)}function Bf(){this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.translateRightBox(this.wallTools.current,this.rightBoxWidth,!1),this.wallMaterialRef.current.resetWallMaterialData(),this.wallAlwaysHideRef.current.resetWallAlwaysHideStatus(),this.wallCustomHeightRef.current.resetCustomWallHeightData()}function Wf(){this.resetKlet3DBinderParams(),this.resetSelectedObjectMaterial(),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.removeCameraCoverageArea3DMesh(),this.foncButton("select_mode"),this.boxInfo.current.innerHTML="Select mode",this.translateRightBox(this.wallItemToolsRef.current,this.rightBoxWidth,!1),this.rib()}function Vf(){let e=this.linRef.current.getBoundingClientRect();if(this.taille_h!==e.height||this.taille_w!==e.width){If.log("Window resize"),this.taille_w=e.width,this.taille_h=e.height,this.offset={left:e.left,top:e.top,scrollY:window.scrollY},this.determineMaxZoomInLevel(),this.showHideLeftRightBoxes(),this.handleRightControlsBoxResize(),this.width_viewbox=this.taille_w,this.height_viewbox=this.taille_h,this.ratio_viewbox=this.height_viewbox/this.width_viewbox,this.zoomFactor=1,this.zoom=this.defaultZoomLevel,this.centerAndShowFloorplanAndUploadedFloorplanImage(!0);const t=this.zoom-this.defaultZoomLevel;this.zoomToSpecificLevel(t>0?"zoomin":"zoomout",Math.abs(t)),this.drawingAreaPopupActive&&this.drawingAreaPopupZoomTranslateControl(),this.setSvgViewBoxes(),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onWindowResize()}}function Nf(e){if("INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&!e.repeat)if(If.log("Key down"),e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)!e.ctrlKey||e.altKey||e.metaKey||e.shiftKey||If.log("Ctrl key combos");else if(If.log("Single key"),"ArrowLeft"===e.key)this.onZoomButonClick("zoomleft");else if("ArrowUp"===e.key)this.onZoomButonClick("zoomtop");else if("ArrowRight"===e.key)this.onZoomButonClick("zoomright");else if("ArrowDown"===e.key)this.onZoomButonClick("zoombottom");else if("+"===e.key)this.onZoomButonClick("zoomin");else if("-"===e.key)this.onZoomButonClick("zoomout");else if("Escape"===e.key)this.action=0,"select_mode"!==this.mode&&(If.log("On escape binder"),If.log(this.binder),this.removeBinder(),this.cursor("default"),this.boxInfo.current.innerHTML="Select mode",this.foncButton("select_mode")),If.log("Escape pressed"),this.hideActiveRightBox(),this.removeSelectedBinder();else if("Delete"===e.key){If.log("delete pressed");let e=Fi();if(If.log("Queried element"),If.log(e),e){let t=e.querySelector(".button--type-delete");If.log("Delete button"),If.log(t),t&&t.click()}}}function Ef(){this.showRib?(fi(this.boxScale.current,this.othersTimeout,null,!1,!0),fi(this.boxRib.current,this.othersTimeout,null,!1),this.showRibRef.current.checked=!1,this.showRib=!1):(gi(this.boxScale.current,this.othersTimeout,null,"inline",!1),gi(this.boxRib.current,this.othersTimeout,null,"inline",!1),this.showRibRef.current.checked=!0,this.showRib=!0)}function Hf(){this.showBoxGridChecked?(this.showBoxGridChecked=!1,this.showBoxGrid.current.checked=!1,fi(this.boxGridRef.current,this.othersTimeout,null,!1)):(this.showBoxGridChecked=!0,this.showBoxGrid.current.checked=!0,gi(this.boxGridRef.current,this.othersTimeout,null,"inline",!1))}function zf(){this.removeSelectedBinder(),this.showMapLayer2DInputRef.current.getCheckedStatus()?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),s.unmountComponentAtNode(this.mapLayer2DContainerRef.current)):this.isFloorplanNoWalls()?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),gi(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout)):C.get.call(this,"/klet3d/entity/".concat(this.getFloorplanID(),"/").concat(this.props.licenseKey),(e=>{e&&e.length>0?k(this.getFloorplanGpsLatitude(e[0].plan_general))&&k(this.getFloorplanGpsLongitude(e[0].plan_general))?(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),this.onFloorplanGpsCoordsClick()):(this.floorplanGeneral=e[0].plan_general,this.showMapLayer2DInputRef.current.setCheckedStatus(!0),s.render((0,l.jsx)(Rc,{ref:this.showMapLayer2D3DRef,is3D:!1,center:[16.8557,44.0462],floorplanGpsCoords:[this.getFloorplanGpsLongitude(e[0].plan_general),this.getFloorplanGpsLatitude(e[0].plan_general)],onMapContextLoadedCallback:this.onMapContextLoadedCallback2D,preserveDrawingBuffer:!1,mapStylesChangeRef:this.mapStylesChangeRef,mainComponentThis:this}),this.mapLayer2DContainerRef.current)):(this.showMapLayer2DInputRef.current.setCheckedStatus(!1),this.boxInfo.current.innerHTML="There is no floorplan with specified id")}))}function Gf(){this.translateRightBox(this.roomTools.current,this.rightBoxWidth,!1),this.roomNameDropdownMenu.current.classList.remove("show"),this.boxInfo.current.innerHTML="Select mode",this.foncButton("select_mode")}function Uf(e){this.zoom_maker(e,!this.showMapLayer2D3DRef.current||"zoomin"!==e&&"zoomout"!==e?this.zoomXMove:this.zoomXMoveOnMapScaleFactor*this.zoomXMove,this.zoomXView)}function qf(){this.isFloorplanNoWalls()?gi(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout):gi(this.showFloorplanOnMapContainerRef.current,200,(()=>{s.render((0,l.jsx)(Of,{floorplanID:this.getFloorplanID(),containerRef:this.showFloorplanOnMapContainerRef,setResponseError:this.setState.bind(this),mainComponentThis:this}),this.showFloorplanOnMapContainerRef.current)}),"block",!1)}function Kf(){this.floorHeight=$i(parseFloat(this.floorHeightInputRef.current.getValue()),this.measureSystemContext.userUnit,"metric"===this.measureSystemContext.userUnit?"centimeter":"inch","meter",!0)*this.meter}function Yf(e){s.render((0,l.jsx)(ur,{}),this.loadingComponentContainer.current,(()=>{this.resetHistory(),this.floorplanFloorsPanelBoxRef.current.setSelectedFloorplanFloor(e,(()=>{this.loadFloorplanFloor(e,(()=>{this.floorplan3DComponent.current&&this.floorplan3DComponent.current.floorplanFloorsPanelSelection3DRef.current.handleFloorplanFloor3DChange(e.floorNumber),s.unmountComponentAtNode(this.loadingComponentContainer.current)}))}))}))}function Xf(e){const t=this.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.id))));return t?this.getObjectConnectorKlet3DBinderData(t[this.connectorIDbinderIDPropertyName]):null}class Zf extends o.Component{constructor(){super(),this.setSelectedWallMaterialData=e=>{this.setState({selectedWall:e,edit:Ee.map((t=>({...t,value:e[t.field]})))},(()=>{this.state.edit.forEach((e=>{this[e.dropdownRefPropertyName].current.classList.remove("show"),this[e.selectRefPropertyName].current.setValue(q.isHexColor(e.value)?e.value:"Color"),this.drawWallSideMaterialPath(e)}))}))},this.drawWallSideMaterialPath=e=>{this.removeWallSidesColorLines(e);const{interiorLineCoords:t,exteriorLineCoords:i}=ro(this.state.selectedWall,this.props.mainComponentThis.isPointOnWallDecimalPrecision),o="interiorPlaneMaterial"===e.field?t:i;2===o.length&&this.props.mainComponentThis.qSVG.create(this.props.mainComponentThis.boxBind,"line",{id:e.field,x1:o[0].x,y1:o[0].y,x2:o[1].x,y2:o[1].y,"stroke-width":2,stroke:q.isHexColor(e.value)?"url(#".concat(e.value,")"):e.value})},this.removeWallSidesColorLines=e=>{const t=this.props.mainComponentThis.boxBind.current.querySelector("#".concat(e.field));t&&t.remove()},this.resetWallMaterialData=()=>{this.state.edit.forEach((e=>this.removeWallSidesColorLines(e))),this.setState({selectedWall:null,edit:[]})},this.onWallMaterialListItemClick=e=>(t,i)=>{let o;if(i>0){const e=Ne[i];o=e.title}else o=e.defaultColorValue;this.props.mainComponentThis.selectedBinder.wall[e.field]=o,this.setState({edit:this.state.edit.map((t=>({...t,value:t.field===e.field?o:t.value})))},(()=>{this.drawWallSideMaterialPath(this.state.edit.find((t=>t.field===e.field))),this[e.selectRefPropertyName].current.setValue(i>0?o:"Color"),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}))},this.onWallSideColorChange=e=>t=>{this.setState({edit:this.state.edit.map((i=>({...i,value:i.field===e.field?t.target.value:i.value})))},(()=>{this.props.mainComponentThis.selectedBinder.wall[e.field]=t.target.value,this.props.mainComponentThis.boxBind.current.querySelector("#".concat(e.field)).setAttribute("stroke",t.target.value),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}))},this.state={selectedWall:null,edit:[]},Ee.forEach((e=>{this[e.selectRefPropertyName]=o.createRef(),this[e.dropdownRefPropertyName]=o.createRef()})),this.setSelectedWallMaterialData=this.setSelectedWallMaterialData.bind(this),this.drawWallSideMaterialPath=this.drawWallSideMaterialPath.bind(this),this.removeWallSidesColorLines=this.removeWallSidesColorLines.bind(this),this.onWallMaterialListItemClick=this.onWallMaterialListItemClick.bind(this),this.onWallSideColorChange=this.onWallSideColorChange.bind(this)}render(){return(0,l.jsx)(xs,{label:"Wall material",children:this.state.edit.map(((e,t)=>(0,l.jsxs)("div",{className:"form-group inline",children:[(0,l.jsx)("div",{className:"label-container",children:(0,l.jsx)("label",{className:"label form-control label-form-control-cancel",children:e.label})}),(0,l.jsxs)("div",{className:"input-container",style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(Fs,{disabled:!0,ref:this[e.selectRefPropertyName],dropdownMenuRef:this[e.dropdownRefPropertyName],containerClasses:"wall-material-select ".concat(0===t?"first":""),onListItemClick:this.onWallMaterialListItemClick(e),listItems:Ne.map((e=>e.title))}),!q.isHexColor(e.value)&&(0,l.jsx)(vs,{disabled:!0,containerStyle:{marginTop:"0.5rem",zIndex:0===t?3:1},item:e,onChange:this.onWallSideColorChange,boxContainer:this.props.mainComponentThis.wallTools.current})]})]},e.field)))})}}const Jf=Zf;class Qf extends o.Component{constructor(){super(),this.setSelectWallAlwaysHideStatus=(e,t)=>{this.wallNotHiddenWidthValue=t,this.setState({alwaysHide:e.alwaysHide||!1})},this.resetWallAlwaysHideStatus=()=>{this.setState({alwaysHide:!1})},this.state={alwaysHide:!1},this.wallNotHiddenWidthValue=null,this.setSelectWallAlwaysHideStatus=this.setSelectWallAlwaysHideStatus.bind(this),this.resetWallAlwaysHideStatus=this.resetWallAlwaysHideStatus.bind(this)}render(){return(0,l.jsx)(xs,{children:(0,l.jsx)(fs,{disabled:!0,infoLabel:!0,infoLabelTitle:"Always hide",infoText:"Check this box to hide wall in 3D view.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:this.state.alwaysHide})})}}const $f=Qf;class eb extends o.Component{constructor(){super(),this.setSelectedObjectData=e=>{this.selectedObject2D=e,this.setState({checked:e.additionalParams.hideWithWall})},this.onWallItemHideWithWallChange=()=>{this.selectedObject2D.additionalParams.hideWithWall=!this.state.checked,this.setState({checked:this.selectedObject2D.additionalParams.hideWithWall}),this.props.mainComponentThis.floorplan3DComponent.current&&this.props.mainComponentThis.floorplan3DComponent.current.updateWallsVisibility(),this.props.mainComponentThis.save(!1,!0)},this.state={checked:!0},this.selectedObject2D=null,this.setSelectedObjectData=this.setSelectedObjectData.bind(this),this.onWallItemHideWithWallChange=this.onWallItemHideWithWallChange.bind(this)}render(){return(0,l.jsx)(xs,{children:(0,l.jsx)(fs,{disabled:!0,infoLabel:!0,infoLabelTitle:"Hide with wall",infoText:"Check this box to hide the object along with the wall.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:this.state.checked,onChange:this.onWallItemHideWithWallChange})})}}const tb=eb;class ib extends o.Component{constructor(){super(),this.setSelectedCustomWallHeightData=e=>{const t=this.props.mainComponentThis.convertSvgToValueUnits(e.wallHeight,"centimeter","inch",this.props.mainComponentThis.wallHeightDecimalPrecision);this.wallCustomHeightRef.current.setValue(t),this.wallCustomHeightRef.current.setInitialValue(t)},this.resetCustomWallHeightData=()=>{this.wallCustomHeightRef.current.setValue(""),this.wallCustomHeightRef.current.setInitialValue("")},this.onWallCustomHeightInputChange=()=>{const e=this.props.mainComponentThis.convertValueToSvgUnits(parseFloat(this.wallCustomHeightRef.current.getValue()));this.props.mainComponentThis.selectedBinder.wall.wallHeight=e,this.props.mainComponentThis.save(!1,!0)},this.wallCustomHeightRef=o.createRef(),this.wallCustomHeightInitialValue=null,this.setSelectedCustomWallHeightData=this.setSelectedCustomWallHeightData.bind(this),this.resetCustomWallHeightData=this.resetCustomWallHeightData.bind(this),this.onWallCustomHeightInputChange=this.onWallCustomHeightInputChange.bind(this)}render(){return(0,l.jsx)(xs,{label:"Wall height(".concat("metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"cm":"in",")"),children:(0,l.jsx)(as,{ref:this.wallCustomHeightRef,disabled:!0,title:"Set custom wall height",inputStep:Math.pow(10,-this.props.mainComponentThis.wallHeightDecimalPrecision),inputMin:1,inputMax:this.props.mainComponentThis.wallHeightMaxValue,onInputValueChanged:this.onWallCustomHeightInputChange})})}}const ob=ib;var sb=i(8847);const nb=class{constructor(e,t,i,o){if(this.binderIDPropertyName=o.connectorIDbinderIDPropertyName,this[this.binderIDPropertyName]=e[this.binderIDPropertyName],this.objID=t,this.params={},i&&(s=i,0!==Object.keys(s).length))this.params=i;else if(this.objID.length>0){let e=o.getObject2DById(this.objID[0].id);if(e){const t=o.getKlet3DBinderParamsDefaultValues(e);t&&(this.params=t)}}var s}};var ab=i(9325),rb=i(3284),lb=i(6433);const hb=["air_quality","alarm_control_panel","binary_sensor","button","calendar","climate","cover","date","datetime","device_tracker","event","fan","humidifier","image","lawn_mower","light","lock","number","scene","select","sensor","siren","stt","switch","sun","text","time","todo","tts","update","vacuum","valve","wake_word","water_heater","weather","zone"];var cb=i(7267),db=i(1317);class pb extends o.Component{constructor(e){super(),this.closePopup=()=>{this.props.floorplan3DThis&&this.props.floorplan3DThis.userInteractionCurrentController.setSelectedObject(null),fi(this.props.containerRef.current,200,(()=>{s.unmountComponentAtNode(this.props.containerRef.current)}),!1)},this.handleBinderCheckboxClick=e=>{const t=this.state.selectedBinder&&this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]?null:e;let i=!1;i=this.state.initialBinder?!t||t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]!==this.state.initialBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]:!!t,this.setState({selectedBinder:t,needsSave:i})},this.handlePageChange=(e,t)=>{this.setState({currentPage:t})},this.updateSelectedBinderData=e=>{const t=this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]);if(t){const i=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.state.selectedBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));i?i.objID.push({id:this.props.obj2D.id}):e.push(new nb(t,[{id:this.props.obj2D.id}],null,this.props.mainComponentThis))}},this.onSaveChangesClick=()=>{this.setState({loading:!0});let e=this.props.mainComponentThis.klet3DLastSavedData.map((e=>({...e})));if(this.state.initialBinder){const t=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.state.initialBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(t.objID=t.objID.filter((e=>e.id!==this.props.obj2D.id))),this.state.selectedBinder&&this.updateSelectedBinderData(e),e=e.filter((e=>e.objID.length>0))}else{if(!this.state.selectedBinder)return void this.closePopup();this.updateSelectedBinderData(e)}const t=()=>{if(this.props.mainComponentThis.klet3DLastSavedData=e,this.props.floorplan3DThis){for(let i=0;i<e.length;i++){const t=this.props.floorplan3DThis.getObjectConnectorParamsData(e[i][this.props.mainComponentThis.connectorIDbinderIDPropertyName],this.props.mainComponentThis.getObject2DById(e[i].objID[0].id));if(t){const o=this.props.floorplan3DThis.getIsFixed2DObjectsValue(t);let s=this.props.floorplan3DThis.objectConnectorsArray.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e[i][this.props.mainComponentThis.connectorIDbinderIDPropertyName]));if(s){let t=[];for(let o=0;o<s.bindedObjects.length;o++)e[i].objID.find((e=>e.id===s.bindedObjects[o].object2D.id))||t.push(o);t.sort(((e,t)=>t-e));for(let e=0;e<t.length;e++)db.log("removeBindedObject"),s.removeBindedObject(s.bindedObjects[t[e]]);for(let n=0;n<e[i].objID.length;n++)if(!s.bindedObjects.find((t=>t.object2D.id===e[i].objID[n].id)))if(o){let t;for(let o=0;o<this.props.floorplan3DThis.floorplan3DViewScene.children.length;o++)if(this.props.floorplan3DThis.floorplan3DViewScene.children[o].object2D&&this.props.floorplan3DThis.floorplan3DViewScene.children[o].object2D.id===e[i].objID[n].id){t=this.props.floorplan3DThis.floorplan3DViewScene.children[o];break}db.log("addBindedObject fixed"),t&&s.addBindedObject(t)}else{let t,o={};for(let s=0;s<this.props.floorplan3DThis.floorplanFloors.length;s++)if(t=this.props.floorplan3DThis.floorplanFloors[s].objData.find((t=>t.id===e[i].objID[n].id)),t){o={object2D:t,floorNumber:this.props.floorplan3DThis.floorplanFloors[s].floorNumber};break}db.log("addBindedObject unfixed"),s.addBindedObject(this.props.floorplan3DThis.getObjectsConnectorUnfixedBindedObjectParameters(o),!0)}}else this.props.floorplan3DThis.addObjectConnectorObject(e[i])}}let t=[];for(let i=0;i<this.props.floorplan3DThis.objectConnectorsArray.length;i++)e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.floorplan3DThis.objectConnectorsArray[i][this.props.mainComponentThis.connectorIDbinderIDPropertyName]))||t.push(i);t.sort(((e,t)=>t-e));for(let e=0;e<t.length;e++)db.log("Remove ObjectsConnector object",this.props.floorplan3DThis.objectConnectorsArray[t[e]]),this.props.floorplan3DThis.objectConnectorsArray[t[e]].remove(),this.props.floorplan3DThis.objectConnectorsArray.splice(t[e],1);this.props.floorplan3DThis.updateControlPanelState()}this.props.updateKlet3DBinderState&&this.props.updateKlet3DBinderState(e.find((e=>e.objID.find((e=>e.id===this.props.obj2D.id))))),this.closePopup()};this.props.callAPIForSave?C.post.call(this,"/klet3d/entity/".concat(this.props.mainComponentThis.props.floorplanID,"/").concat(this.props.mainComponentThis.props.licenseKey),{entitydata:e},(e=>{db.log("Klet post API response"),db.log(e),t()})):t()},this.handleSearchChange=e=>{if(e){const t=this.props.availableBinders.filter((t=>this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).toLowerCase().includes(e.toLowerCase())||this.props.customSearchMethod&&this.props.customSearchMethod(t,e)));this.setState({searchFilteredData:t,currentPage:1,searchFilterText:e})}else this.setState({searchFilteredData:this.props.availableBinders,currentPage:1,searchFilterText:e})},this.state={initialBinder:null,selectedBinder:null,currentPage:1,rowsPerPage:10,searchFilteredData:e.availableBinders,needsSave:!1,loading:!1},this.mounted=!1,this.closePopup=this.closePopup.bind(this),this.updateSelectedBinderData=this.updateSelectedBinderData.bind(this),this.onSaveChangesClick=this.onSaveChangesClick.bind(this),this.handleBinderCheckboxClick=this.handleBinderCheckboxClick.bind(this),this.handlePageChange=this.handlePageChange.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}componentDidMount(){this.mounted=!0,this.setState({initialBinder:this.props.klet3DBinder,selectedBinder:this.props.klet3DBinder})}componentWillUnmount(){this.mounted=!1}render(){const{selectedBinder:e,currentPage:t,rowsPerPage:i,searchFilteredData:o,searchFilterText:s,needsSave:n,loading:a}=this.state,{pageFirstRowIndex:r,pageLastRowIndex:h}=((e,t,i)=>{const o=(e-1)*t;return{pageFirstRowIndex:o,pageLastRowIndex:o+t>i?i:o+t}})(t,i,this.props.availableBinders.length),c=o.slice(r,h);return(0,l.jsx)(ps,{onCloseModalClick:this.closePopup,children:(0,l.jsxs)("section",{className:"layout__section door-window-ha-entities-binding-popup-content-container",style:{height:"auto",maxHeight:"85vh"},children:[(0,l.jsxs)("div",{className:"table-responsive form-group",children:[(0,l.jsxs)("div",{className:"search-row-container",children:[(0,l.jsx)("h2",{children:this.props.tableTitle}),(0,l.jsxs)("div",{className:"search-entities-container",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"hidden-placeholder",children:"Search entities"}),(0,l.jsx)("input",{placeholder:"Search entities",className:"form-control input",value:s,onChange:e=>this.handleSearchChange(e.target.value)})]}),(0,l.jsx)("div",{className:"search-icon-container",children:(0,l.jsx)(Ug.Z,{})})]})]}),(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"#"}),(0,l.jsx)("th",{}),(0,l.jsx)("th",{children:"ID"}),(0,l.jsx)("th",{children:"Name"}),this.props.hasDomain&&(0,l.jsx)("th",{children:"Domain"}),this.props.hasDates&&(0,l.jsx)("th",{children:"Last change"}),this.props.hasDates&&(0,l.jsx)("th",{children:"Last update"})]})}),(0,l.jsx)("tbody",{children:c.length>0?c.map(((t,i)=>{const o=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));let s=0;return o&&(s=o.objID.filter((e=>e.id!==this.props.obj2D.id)).length),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:r+i+1}),(0,l.jsx)("td",{children:(0,l.jsxs)("div",{className:"entity-binding-option-choice-container",children:[(0,l.jsx)(fs,{checked:!!e&&e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===t[this.props.mainComponentThis.connectorIDbinderIDPropertyName],onChange:()=>this.handleBinderCheckboxClick(t)}),s>0&&(0,l.jsx)(ss,{explanationInfoBoxStyles:{textAlign:"left"},infoText:(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"NOTE:"})," This entity is binded with"," ",(0,l.jsx)("span",{children:s})," more floorplan\xa0",(0,l.jsx)("span",{children:1===s?"object":"objects"})]})})]})}),(0,l.jsx)("td",{children:this.props.binderIDLayoutMethod(t)}),(0,l.jsx)("td",{children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(t[this.props.mainComponentThis.connectorIDbinderIDPropertyName])}),this.props.hasDomain&&(0,l.jsx)("td",{children:t.domain}),this.props.hasDates&&(0,l.jsx)("td",{children:E(new Date(t.last_changed))}),this.props.hasDates&&(0,l.jsx)("td",{children:E(new Date(t.last_updated))})]},t[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,children:"No entities found"})})})]}),(0,l.jsx)(cb.Z,{className:"table-pagination",count:Math.ceil(o.length/i),page:t,onChange:this.handlePageChange})]}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!n,buttonType:n?"primary":"dull",spinnerColor:"#ffffff",buttonText:" Save changes",loading:a,spinnerLoading:!0,onClick:this.onSaveChangesClick})})]})})}}const mb=pb;class ub extends o.Component{constructor(){super(),this.onConfigureEntityClick=async()=>{this.props.mainComponentThis.hasBrowserModIntegration&&await this.props.mainComponentThis.openBrowserModMoreInfoPopupForEntity(this.props.targetKlet3DBinder.entity_id)},this.onConfigureEntityClick=this.onConfigureEntityClick.bind(this)}render(){return"HomeAssistant"===this.props.mainComponentThis.props.addOnIntegrationType?(0,l.jsxs)(xs,{children:[(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Go,{disabled:!this.props.mainComponentThis.hasBrowserModIntegration,type:this.props.mainComponentThis.hasBrowserModIntegration?"light-blue":"dull",onClick:this.onConfigureEntityClick,children:"More info"})}),!this.props.mainComponentThis.hasBrowserModIntegration&&(0,l.jsxs)("div",{className:"form-control feedback center-spike browser-mod-feedback",children:["Install"," ",(0,l.jsx)("a",{target:"_blank",href:"https://github.com/thomasloven/hass-browser_mod",rel:"noreferrer",children:"Browser Mod"})," ","integration in order to use this feature"]})]}):null}}const gb=ub;class fb extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.simpleOnChangeHandlerBinded=Ro.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.onSaveClick=this.onSaveClick.bind(this)}componentDidMount(){const e=ei.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])})));this.setState({edit:e,originalData:e})}render(){const{edit:e,needsSave:t,loading:i}=this.state;return 0===e.length?null:(0,l.jsxs)(xs,{children:[(0,l.jsx)(rn,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),e.map((e=>(0,l.jsx)(js,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandlerBinded},e.field))),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const bb=fb;var wb=i(1317);class Cb extends o.Component{constructor(){super(),this.spotDistanceSliderToSvg=e=>e*this.SPOT_DISTANCE_STEP,this.spotDistanceSvgToSlider=e=>e/this.SPOT_DISTANCE_STEP,this.onSpotLightDistanceValueChange=e=>t=>{const i=this.spotDistanceSliderToSvg(t);this.simpleOnLiveChangeHandlerBinded(e)(i),this.setState({edit:this.state.edit.map((i=>({...i,value:i.field===e.field?t:i.value})))})},this.klet3DDataCustomSetterMethod=e=>{this.state.edit.forEach((t=>{"spot_distance"===t.field?this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],null,this.spotDistanceSliderToSvg(t.value)):this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],t)}))},this.onSaveClick=()=>{this.state.edit.some((e=>e.error))||this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null,this.klet3DDataCustomSetterMethod)},this.resetValues=()=>{this.state.needsSave&&(wb.log("original data",this.state.originalData,this.props.klet3DBinder),this.state.originalData.forEach((e=>{if(ti.find((t=>t.field===e.field))){const t=e.selectInput?e.value.value:e.value;this.props.mainComponentThis.setKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field],null,"spot_distance"===e.field?this.spotDistanceSliderToSvg(t):t)}})),this.props.mainComponentThis.floorplan3DComponent.current&&this.update3DViewState())},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.spotLightDistanceSlider=o.createRef(),this.spotLightDistanceSliderInput=o.createRef(),this.simpleOnChangeHandlerBinded=Ro.bind(this),this.simpleOnLiveChangeHandlerBinded=Lo.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.spotDistanceSliderToSvg=this.spotDistanceSliderToSvg.bind(this),this.spotDistanceSvgToSlider=this.spotDistanceSvgToSlider.bind(this),this.onSpotLightDistanceValueChange=this.onSpotLightDistanceValueChange.bind(this),this.klet3DDataCustomSetterMethod=this.klet3DDataCustomSetterMethod.bind(this),this.resetValues=this.resetValues.bind(this)}componentDidMount(){const e=ti.map((e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);if(e.selectInput)return{...e,value:e.options.find((e=>e.value===t))||e.options[0]};return"spot_distance"===e.field?(this.SPOT_DISTANCE_STEP=this.props.mainComponentThis.SPOT_DISTANCE_MAX/e.max,{...e,value:this.spotDistanceSvgToSlider(t)}):{...e,value:t}}));this.setState({edit:e,originalData:e})}componentWillUnmount(){this.resetValues()}render(){const{edit:e,needsSave:t,loading:i}=this.state;wb.log(e);const o=e.filter((e=>"switched_on_state"===e.field||"switched_off_state"===e.field)),s=e.find((e=>"power_sync"===e.field)),n=e.find((e=>"power"===e.field)),a=e.find((e=>"color_sync"===e.field)),r=e.find((e=>"color"===e.field)),h=e.find((e=>"variant"===e.field)),c=e.find((e=>"spot_angle"===e.field)),d=e.find((e=>"spot_distance"===e.field));return 0===e.length?null:(wb.log(r.value),(0,l.jsxs)(xs,{containerClasses:"light-parameters-container",children:[(0,l.jsx)(rn,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","light values which correspond to given states"]})}),o.map(((e,t)=>(0,l.jsx)(js,{containerStyle:{marginBottom:t===o.length-1?"1rem":"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandlerBinded},e.field))),(0,l.jsxs)(xs,{label:n.label,children:[(0,l.jsx)(fs,{infoLabel:!0,infoLabelTitle:s.label,infoText:"If checked, power will be automatically set from HomeAssistant. If unchecked, power will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:s.value||s.defaultValue,onChange:this.simpleOnLiveChangeHandlerBinded(s)}),!s.value&&(0,l.jsx)(hs,{placeholder:n.placeholder,inputStep:n.step,inputMin:n.min,inputMax:n.max,usePropsValue:!0,value:n.value,onInputValueChanged:this.simpleOnLiveChangeHandlerBinded(n)})]}),(0,l.jsxs)(xs,{label:r.label,children:[(0,l.jsx)(fs,{infoLabel:!0,infoLabelTitle:a.label,infoText:"If checked, color will be automatically set from HomeAssistant. If unchecked, color will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:a.value||a.defaultValue,onChange:this.simpleOnLiveChangeHandlerBinded(a)}),!a.value&&(0,l.jsx)(vs,{item:r,onChange:this.simpleOnLiveChangeHandlerBinded,boxContainer:Fi()})]}),(0,l.jsx)(us,{selectInput:!0,fullWidth:!0,label:h.label,item:h,onChange:this.simpleOnLiveChangeHandlerBinded}),h.value&&"spot"===h.value.value&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(xs,{label:c.label,children:(0,l.jsx)(hs,{placeholder:c.placeholder,inputStep:c.step,inputMin:c.min,inputMax:c.max,usePropsValue:!0,value:c.value,onInputValueChanged:this.simpleOnLiveChangeHandlerBinded(c)})}),(0,l.jsx)(xs,{children:(0,l.jsx)(cr,{ref:this.spotLightDistanceSliderInput,sliderInputRef:this.spotLightDistanceSlider,valueLabelText:(0,l.jsxs)("div",{style:{display:"flex"},children:["Distance:\xa0",T(d.value,Math.log(d.step))]}),defaultValue:T(d.value,Math.log(d.step)),minValue:d.min,maxValue:d.max,sliderStep:d.step,onSliderValueChanged:this.onSpotLightDistanceValueChange(d)})})]}),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]}))}}const xb=Cb;class yb extends o.Component{componentDidUpdate(){this.props.disableRangeChoice&&"range"===this.props.coloringOptionFormItem.value&&this.props.onChange(this.props.coloringOptionFormItem)("")}render(){return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(ws,{formGroupContainerStyle:{marginBottom:"0.5rem"},rightLabel:!0,item:{...this.props.coloringOptionFormItem,choices:[this.props.coloringOptionFormItem.choices[0]]},onChange:this.props.onChange}),this.props.coloringOptionFormItem.choices[0].value===this.props.coloringOptionFormItem.value&&(0,l.jsx)(vs,{item:this.props.coloringOptionFormItem.choices[0].form[0],onChange:this.props.onChange,boxContainer:Fi(),containerStyle:{marginBottom:"0.5rem"}}),(0,l.jsx)(ws,{formGroupContainerStyle:{marginBottom:"0.5rem"},disabled:this.props.disableRangeChoice,rightLabel:!0,item:{...this.props.coloringOptionFormItem,choices:[this.props.coloringOptionFormItem.choices[1]]},onChange:this.props.onChange}),this.props.coloringOptionFormItem.choices[1].value===this.props.coloringOptionFormItem.value&&(0,l.jsx)(em,{ref:this.props.colorPaletteMakerRef,containerStyle:{marginBottom:"0.5rem"},colorPaletteFormItem:this.props.coloringOptionFormItem.choices[1].form,onChange:this.props.onChange,addIntermediateColor:this.props.addIntermediateColor,removeIntermediateColor:this.props.removeIntermediateColor,getColoringBox:()=>Fi()}),(0,l.jsx)(js,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:this.props.opacityItem.isNumberInput,controledNumberInput:!!this.props.opacityItem.isNumberInput||null,label:this.props.opacityItem.keepTextWidth?(0,l.jsx)(nn,{longText:this.props.opacityItem.longText,shortText:this.props.opacityItem.label}):this.props.opacityItem.label,value:this.props.opacityItem.value,labelClasses:"label-form-control-cancel",item:this.props.opacityItem,error:this.props.opacityItem.error,onChange:this.props.onChange})]})}}const Sb=yb;var _b=i(1317);class Db extends o.Component{constructor(){super(),this.cloneEditData=(e,t)=>e.map((e=>e.form?{...e,form:e.form.map((e=>e.formChoices?{...e,choices:e.choices.map((e=>({...e,form:e.form.map((e=>Array.isArray(e.value)?{...e,value:e.value.map((e=>e.form?{...e,form:e.form.map((e=>({...e,...t?{error:void 0}:{}})))}:{...e,...t?{error:void 0}:{}}))}:{...e,...t?{error:void 0}:{}}))})))}:{...e,...t?{error:void 0}:{}}))}:{...e,...t?{error:void 0}:{}})),this.calculateNeedsSaveCustom=e=>Y(this.cloneEditData(e,!0),this.state.originalData),this.addIntermediateColor=(e,t)=>{e.find((e=>e.field.includes("intermediate_colors"))).value.push(hi(t)),this.setState({needsSave:this.calculateNeedsSaveCustom(this.state.edit)})},this.removeIntermediateColor=(e,t)=>{e.find((e=>e.field.includes("intermediate_colors"))).value.splice(e.find((e=>e.field.includes("intermediate_colors"))).value.findIndex((e=>e.counter===t)),1),this.setState({needsSave:this.calculateNeedsSaveCustom(this.state.edit)})},this.onSaveClick=()=>{let e=!1;if(this.setState({edit:this.state.edit.map((t=>{const i=t.validate&&t.validate(t.value);return i&&(e=!0),t.form?{...t,error:i,form:t.form.map((i=>{const o=i.validate&&i.validate(i.value);return o&&(e=!0),i.formChoices?{...i,error:o,choices:i.choices.map((o=>{if("range"===o.value){if("range"===i.value){const i="background"===t.field?this.sensorBackgroundOptionColorPaletteRef:this.sensorTextColorPaletteRef;e=i.current&&!i.current.paletteColorsValidation()}return{...o}}return{...o,form:o.form.map((t=>{const i=t.validate&&t.validate(t.value);return i&&(e=!0),{...t,error:i}}))}}))}:{...i,error:o}}))}:{...t,error:i}}))}),_b.log("On save isInvalid",e),!e){let e=[...this.props.mainComponentThis.klet3DLastSavedData],t=e.find((e=>e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]));t&&(this.state.edit.forEach((e=>{e.form?(this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,"checked"],e),e.form.forEach((i=>{this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,void 0===i.value?null:i.value),i.formChoices&&i.choices.forEach((i=>{i.form.forEach((i=>{Array.isArray(i.value)?(this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,[]),i.value.forEach((o=>{this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],null,{value:o.form.find((e=>e.field.includes("intermediate_color_value"))).value,color:o.form.find((e=>e.field.includes("intermediate_color_color"))).value},!0)}))):this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field,i.field],i)}))}))}))):this.props.mainComponentThis.setKlet3DDataParamValue(t,this.props.targetObject2D,[e.field],e)})),_b.log("targetKlet3DData",t),this.objectsBindingParamsCallSaveAPI(t,e,this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null))}},this.onSensorParameterChange=e=>t=>{const i=t&&t.target?t.target.value:t;_b.log("On sensor parameter change",e,i);const o=this.state.edit.map((t=>t.field===e.field?(_b.log("Target find"),{...t,value:i}):t.form?{...t,form:t.form.map((t=>t.field===e.field?(_b.log("Target find"),{...t,value:i}):t.formChoices?{...t,choices:t.choices.map((t=>({...t,form:t.form.map((t=>t.field===e.field?(_b.log("Target find"),{...t,value:i}):Array.isArray(t.value)?{...t,value:t.value.map((t=>t.form?{...t,form:t.form.map((t=>({...t,value:t.field===e.field?i:t.value})))}:{...t}))}:{...t}))})))}:{...t}))}:{...t}));this.setState({edit:o,needsSave:this.calculateNeedsSaveCustom(o)})},this.onSensorCheckboxParameterChange=e=>()=>{const t=this.state.edit.map((t=>t.field===e.field?{...t,value:!t.value,form:t.form.map((e=>({...e,value:e.field.includes("_coloring_type")&&t.value?"":e.value})))}:{...t}));this.setState({edit:t,needsSave:this.calculateNeedsSaveCustom(t)})},this.onAddSensorToHeatmapClick=()=>this.props.mainComponentThis.floorplan3DComponent.current.sensorsHeatmapRef.current.onShowHeatmapSettingsClick(),this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.sensorBackgroundOptionColorPaletteRef=o.createRef(),this.sensorTextColorPaletteRef=o.createRef(),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.update3DViewState=Wo.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.onSensorParameterChange=this.onSensorParameterChange.bind(this),this.onSensorCheckboxParameterChange=this.onSensorCheckboxParameterChange.bind(this),this.addIntermediateColor=this.addIntermediateColor.bind(this),this.removeIntermediateColor=this.removeIntermediateColor.bind(this),this.cloneEditData=this.cloneEditData.bind(this),this.calculateNeedsSaveCustom=this.calculateNeedsSaveCustom.bind(this),this.onAddSensorToHeatmapClick=this.onAddSensorToHeatmapClick.bind(this)}componentDidMount(){const e=ci.map((e=>e.form?{...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,"checked"]),form:e.form.map((t=>t.formChoices?{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]),choices:t.choices.map((t=>({...t,form:t.form.map((t=>Array.isArray(this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]))?{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field]).map(((e,t)=>hi(t,e.value,e.color)))}:{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field])}))})))}:{...t,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field,t.field])}))}:{...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])}));this.setState({edit:e,originalData:this.cloneEditData(e)})}render(){const{needsSave:e,loading:t,edit:i}=this.state;_b.log(i);const s=i.find((e=>"sensor_type"===e.field)),n=i.find((e=>"background"===e.field)),a=i.find((e=>"text"===e.field));return 0===i.length?null:(0,l.jsxs)("div",{className:"sensor-parameters-container",children:[(0,l.jsx)(xs,{children:(0,l.jsx)(ws,{rightLabel:!0,label:s.label,onChange:this.onSensorParameterChange,item:s,radioGroupContainerStyle:{justifyContent:"space-evenly"}})}),(0,l.jsxs)(xs,{label:"Coloring",labelStyle:{marginBottom:0},children:[(0,l.jsx)(fs,{infoLabel:!0,infoLabelTitle:n.label,infoText:n.infoText,explanationInfoBoxStyles:n.explanationInfoBoxStyles,checked:n.value,onChange:this.onSensorCheckboxParameterChange(n)}),!0===n.value&&(0,l.jsx)(Sb,{colorPaletteMakerRef:this.sensorBackgroundOptionColorPaletteRef,disableRangeChoice:"number"!==s.value,coloringOptionItem:n,coloringOptionFormItem:n.form[0],opacityItem:n.form.find((e=>"background_opacity"===e.field)),addIntermediateColor:this.addIntermediateColor,removeIntermediateColor:this.removeIntermediateColor,onChange:this.onSensorParameterChange}),(0,l.jsx)(fs,{infoLabel:!0,infoLabelTitle:a.label,infoText:a.infoText,explanationInfoBoxStyles:a.explanationInfoBoxStyles,checked:a.value,onChange:this.onSensorCheckboxParameterChange(a)}),!0===a.value?(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(Sb,{colorPaletteMakerRef:this.sensorTextColorPaletteRef,disableRangeChoice:"number"!==s.value||"range"===n.form[0].value,coloringOptionItem:a,coloringOptionFormItem:a.form[0],opacityItem:a.form.find((e=>"text_opacity"===e.field)),addIntermediateColor:this.addIntermediateColor,removeIntermediateColor:this.removeIntermediateColor,onChange:this.onSensorParameterChange}),a.form.slice(-1).map((e=>(0,l.jsx)(js,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:e.isNumberInput,controledNumberInput:!!e.isNumberInput||null,label:e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.onSensorParameterChange},e.field)))]}):null]}),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),this.props.mainComponentThis.floorplan3DComponent.current&&(0,l.jsx)(xs,{children:(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Go,{type:"blue",onClick:this.onAddSensorToHeatmapClick,children:"Add to heatmap"})})}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!e,buttonType:e?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:t,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const vb=Db;var Tb=i(1317);class jb extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.simpleOnChangeHandlerBinded=Ro.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.onSaveClick=this.onSaveClick.bind(this)}componentDidMount(){Tb.log(di);const e=di.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])})));this.setState({edit:e,originalData:e})}render(){const{edit:e,needsSave:t,loading:i}=this.state;return Tb.log("OtherBindingParameters",e),0===e.length?null:(0,l.jsxs)(xs,{children:[(0,l.jsx)(rn,{labelText:"Text",infoText:(0,l.jsxs)("span",{children:["Define text preferences to display"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","value"]})}),e.map((e=>(0,l.jsx)(js,{containerStyle:{marginBottom:"0.5rem"},isNumberInput:e.isNumberInput,controledNumberInput:!!e.isNumberInput||null,isColorInput:e.isColorInput,colorPickerBoxContainer:e.isColorInput&&Fi(),label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandlerBinded},e.field))),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const Ob=jb;var Ib=i(1317);class Pb extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.setPercentageNumberSliderInputValues=e=>{this.fanPercentageNumberSliderInput.current&&(this.fanPercentageSlider.current.value=e,this.fanPercentageNumberSliderInput.current.inputNumberComponentRef.current.setValue(e))},this.resetValues=()=>Vo.call(this,ii),this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.fanPercentageNumberSliderInput=o.createRef(),this.fanPercentageSlider=o.createRef(),this.simpleOnChangeHandlerBinded=Ro.bind(this),this.simpleOnLiveChangeHandlerBinded=Lo.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.setPercentageNumberSliderInputValues=this.setPercentageNumberSliderInputValues.bind(this),this.resetValues=this.resetValues.bind(this),this.onSaveClick=this.onSaveClick.bind(this)}componentDidMount(){const e=ii.map((e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);return{...e,value:e.selectInput?e.options.find((e=>e.value===t)):t}}));this.setState({edit:e,originalData:e},(()=>this.setPercentageNumberSliderInputValues(e.find((e=>"percentage"===e.field)).value)))}componentWillUnmount(){this.resetValues()}render(){const{edit:e,needsSave:t,loading:i}=this.state;Ib.log(e);const o=e.find((e=>"direction"===e.field)),s=e.find((e=>"direction_sync"===e.field)),n=e.find((e=>"percentage"===e.field)),a=e.find((e=>"percentage_sync"===e.field)),r=e.filter((e=>"switched_on_state"===e.field||"switched_off_state"===e.field));return 0===e.length?null:(0,l.jsxs)(xs,{containerClasses:"fan-parameters-container",children:[(0,l.jsxs)(xs,{label:o.label,children:[(0,l.jsx)(fs,{infoLabel:!0,infoLabelTitle:s.label,infoText:"If checked, direction will be automatically set from HomeAssistant. If unchecked, direction will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:s.value||s.defaultValue,onChange:this.simpleOnLiveChangeHandlerBinded(s)}),!s.value&&o&&(0,l.jsx)(us,{selectInput:!0,fullWidth:!0,item:o,onChange:this.simpleOnLiveChangeHandlerBinded})]}),(0,l.jsxs)(xs,{label:(0,l.jsxs)("div",{style:{display:"flex"},children:["Fan percentage:\xa0",a.value?"Synced":"".concat(n.value," %")]}),children:[(0,l.jsx)(fs,{infoLabel:!0,infoLabelTitle:a.label,infoText:"If checked, percentage will be automatically set from HomeAssistant. If unchecked, percentage will be manually set.",explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:a.value||a.defaultValue,onChange:this.simpleOnLiveChangeHandlerBinded(a)}),!a.value&&(0,l.jsx)(cr,{ref:this.fanPercentageNumberSliderInput,sliderInputRef:this.fanPercentageSlider,valueLabelText:"",defaultValue:n.value,sliderStep:n.step,minValue:n.min,maxValue:n.max,onSliderValueChanged:e=>{this.setPercentageNumberSliderInputValues(e),this.simpleOnLiveChangeHandlerBinded(n)(e)}})]}),(0,l.jsx)(rn,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","fan values which correspond to given states"]})}),r.map(((e,t)=>(0,l.jsx)(js,{containerStyle:{marginBottom:t===r.length-1?"1rem":"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandlerBinded},e.field))),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const kb=Pb;class Fb extends o.Component{constructor(){super(),this.onCoverParameterValueChange=e=>t=>{if("closing_direction"===e.field){const i=t&&t.target?t.target.value:t;this.setState({edit:this.state.edit.map((e=>({...e,error:"open_offset"===e.field||"closed_offset"===e.field?this.offsetValuesErrorCheck(this.state.edit.find((e=>"open_offset"===e.field)).value,this.state.edit.find((e=>"closed_offset"===e.field)).value,i.value,e.field):e.error})))},(()=>this.simpleOnChangeHandlerBinded(e)(t)))}else this.simpleOnChangeHandlerBinded(e)(t)},this.klet3DDataCustomSetterMethod=e=>{this.state.edit.forEach((t=>{"open_offset"===t.field||"closed_offset"===t.field?this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],null,this.props.mainComponentThis.convertValueToSvgUnits(t.value)):this.props.mainComponentThis.setKlet3DDataParamValue(e,this.props.targetObject2D,[t.field],t)}))},this.onSaveClick=()=>{this.state.edit.some((e=>e.error))||this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null,this.klet3DDataCustomSetterMethod)},this.onOpenClosedOffsetChangeHandler=e=>t=>{const i="open_offset"===e.field?t&&t.target?t.target.value:t:this.state.edit.find((e=>"open_offset"===e.field)).value,o="closed_offset"===e.field?t&&t.target?t.target.value:t:this.state.edit.find((e=>"closed_offset"===e.field)).value,s=this.state.edit.map((t=>({...t,value:t.field===e.field?"open_offset"===e.field?i:o:t.value,error:"open_offset"===t.field||"closed_offset"===t.field?this.offsetValuesErrorCheck(i,o,this.state.edit.find((e=>"closing_direction"===e.field)).value.value,t.field):t.error})));this.setState({edit:s,needsSave:K(s,this.state.originalData)})},this.offsetValuesErrorCheck=(e,t,i,o)=>{const s=this.props.mainComponentThis.convertValueToSvgUnits(e),n=this.props.mainComponentThis.convertValueToSvgUnits(t),a="top"===i?this.props.targetObject2D.additionalParams.height3D:this.props.targetObject2D.additionalParams.width3D;if(("open_offset"===o?s:n)<0)return"Number is too low";return!!(s+n>a)&&"Number is too high"},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.simpleOnChangeHandlerBinded=Ro.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.onCoverParameterValueChange=this.onCoverParameterValueChange.bind(this),this.klet3DDataCustomSetterMethod=this.klet3DDataCustomSetterMethod.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.onOpenClosedOffsetChangeHandler=this.onOpenClosedOffsetChangeHandler.bind(this),this.offsetValuesErrorCheck=this.offsetValuesErrorCheck.bind(this)}componentDidMount(){const e=oi.map((e=>{const t=this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]);return{...e,value:e.selectInput?e.options.find((e=>e.value===t)):"open_offset"===e.field||"closed_offset"===e.field?this.props.mainComponentThis.convertSvgToValueUnits(t):t,step:"open_offset"===e.field||"closed_offset"===e.field?this.props.mainComponentThis.itemDimensionsInputStep:null}}));this.setState({edit:e,originalData:e})}render(){const{edit:e,needsSave:t,loading:i}=this.state,o=e.find((e=>"closing_direction"===e.field)),s=e.filter((e=>"open_offset"===e.field||"closed_offset"===e.field)).map((e=>{const t="open_offset"===e.field,i=this.state.edit.find((e=>"closing_direction"===e.field)).value.value;let o=e.label;return t?"top"===i?o="Top":"left"===i?o="Left":"right"===i&&(o="Right"):"top"===i?o="Bottom":"left"===i?o="Right":"right"===i&&(o="Left"),{...e,label:o}})).sort((e=>"Top"===e.label?-1:"Bottom"===e.label?1:"Left"===e.label?-1:"Right"===e.label?1:0));return 0!==e.length&&o?(0,l.jsxs)(xs,{containerClasses:"cover-parameters-container",children:[(0,l.jsx)(us,{selectInput:!0,fullWidth:!0,label:(0,l.jsx)(rn,{labelText:o.label,infoText:(0,l.jsxs)("span",{children:["Specify in which direction the cover closes",(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:"Top"})," - cover closes from bottom to top",(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:"Left"})," - cover closes from right to left",(0,l.jsx)("br",{}),(0,l.jsx)("b",{children:"Right"})," - cover closes from left to right"]})}),item:o,onChange:this.onCoverParameterValueChange}),(0,l.jsx)(rn,{labelText:"Offsets",infoText:(0,l.jsxs)("span",{children:["Specify the ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:"offsets"})," for the cover in the open and closed position",(0,l.jsx)("br",{}),"If value is different from 0, the 3D model will not open/close completely"]})}),s.map(((e,t)=>{const i="metric"===this.props.mainComponentThis.measureSystemContext.userUnit?"cm":"in",o="".concat(e.label," (").concat(i,"):");return(0,l.jsx)(js,{containerStyle:{marginBottom:1===t?"1rem":"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:o}):o,step:e.step,item:e,value:e.value,error:e.error,onChange:this.onOpenClosedOffsetChangeHandler,labelClasses:"label-form-control-cancel",isNumberInput:!0,controledNumberInput:!0,usePropsValue:!0},e.field)})),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]}):null}}const Mb=Fb;class Ab extends o.Component{constructor(){super(),this.setOpacityNumberSliderInputValues=(e,t)=>{e.sliderInputRef.current.value=t,e.valueRef.current.textContent=t,e.numberSliderInputPairRef.current.inputNumberComponentRef.current.setValue(t)},this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.simpleOnChangeHandlerBinded=Ro.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.setOpacityNumberSliderInputValues=this.setOpacityNumberSliderInputValues.bind(this)}componentDidMount(){const e=si.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field]),..."detected_opacity"===e.field||"undetected_opacity"===e.field?{numberSliderInputPairRef:o.createRef(),sliderInputRef:o.createRef(),valueRef:o.createRef()}:{}})));this.setState({edit:e,originalData:e},(()=>{this.state.edit.filter((e=>"detected_opacity"===e.field||"undetected_opacity"===e.field)).forEach((e=>this.setOpacityNumberSliderInputValues(e,e.value)))}))}render(){const{edit:e,needsSave:t,loading:i}=this.state,o=e.filter((e=>"detected_state"===e.field||"undetected_state"===e.field)),s=e.filter((e=>"detected_opacity"===e.field||"undetected_opacity"===e.field));return 0===e.length?null:(0,l.jsxs)(xs,{children:[(0,l.jsx)(rn,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),o.map((e=>(0,l.jsx)(js,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandlerBinded},e.field))),s.map((e=>(0,l.jsx)(cr,{ref:e.numberSliderInputPairRef,sliderInputRef:e.sliderInputRef,valueLabelText:(0,l.jsxs)("div",{style:{display:"flex"},children:["".concat(e.label,":"),"\xa0",(0,l.jsx)("span",{ref:e.valueRef})," %"]}),sliderStep:e.step,minValue:e.min,maxValue:e.max,onSliderValueChanged:t=>{this.setOpacityNumberSliderInputValues(e,t),this.simpleOnChangeHandlerBinded(e)(t)}},e.field))),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const Rb=Ab;class Lb extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.simpleOnChangeHandlerBinded=Ro.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.onSaveClick=this.onSaveClick.bind(this)}componentDidMount(){if("HomeAssistant"!==this.props.mainComponentThis.props.addOnIntegrationType||"climate"!==this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).domain){const e=ni.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])})));this.setState({edit:e,originalData:e})}}render(){const{edit:e,needsSave:t,loading:i}=this.state;return 0===e.length?null:(0,l.jsxs)(xs,{children:[(0,l.jsx)(rn,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),e.map((e=>(0,l.jsx)(js,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandlerBinded},e.field))),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const Bb=Lb;class Wb extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.simpleOnSaveHandlerBinded(this.props.mainComponentThis.floorplan3DComponent.current?this.update3DViewState:null)},this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.simpleOnChangeHandlerBinded=Ro.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.onSaveClick=this.onSaveClick.bind(this)}componentDidMount(){const e=ai.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])})));this.setState({edit:e,originalData:e})}render(){const{edit:e,needsSave:t,loading:i}=this.state;return 0===e.length?null:(0,l.jsxs)(xs,{children:[(0,l.jsx)(rn,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","sensor values which correspond to given states"]})}),e.map((e=>(0,l.jsx)(js,{containerStyle:{marginBottom:"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandlerBinded},e.field))),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const Vb=Wb;class Nb extends o.Component{constructor(){super(),this.browserModPopupComponentRef=o.createRef()}render(){return(0,l.jsx)(xs,{children:(0,l.jsx)(gb,{ref:this.browserModPopupComponentRef,targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis})})}}const Eb=Nb;class Hb extends o.Component{constructor(){super(),this.onSaveClick=()=>{this.state.edit.some((e=>e.error))||this.simpleOnSaveHandlerBinded()},this.resetValues=()=>Vo.call(this,ri),this.state={edit:[],needsSave:!1,originalData:[],loading:!1},this.simpleOnChangeHandlerBinded=Ro.bind(this),this.simpleOnLiveChangeHandlerBinded=Lo.bind(this),this.simpleOnSaveHandlerBinded=Bo.bind(this),this.update3DViewState=Wo.bind(this),this.objectsBindingParamsCallSaveAPI=No.bind(this),this.onSaveClick=this.onSaveClick.bind(this),this.resetValues=this.resetValues.bind(this)}componentDidMount(){let e=ri;if("HomeAssistant"===this.props.mainComponentThis.props.addOnIntegrationType){const t=this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName]).domain;"media_player"!==t&&"remote"!==t||(e=e.filter((e=>"screen_switched_on_state"===e.field||"screen_switched_off_state"===e.field)))}const t=e.map((e=>({...e,value:this.props.mainComponentThis.getKlet3DDataParamValue(this.props.klet3DBinder,this.props.targetObject2D,[e.field])})));this.setState({edit:t,originalData:t})}componentWillUnmount(){this.resetValues()}render(){const{edit:e,needsSave:t,loading:i}=this.state;if(0===e.length)return null;const s=e.filter((e=>"screen_switched_on_state"===e.field||"screen_switched_off_state"===e.field)),n=e.filter((e=>"screen_on_color"===e.field||"screen_off_color"===e.field)),a=e.find((e=>"screen_is_light"===e.field)),r=e.find((e=>"screen_3d_glow_effect"===e.field)),h=e.filter((e=>"screen_3d_glow_factor"===e.field||"screen_3d_glow_spread"===e.field));return(0,l.jsxs)(xs,{children:[(0,l.jsxs)(xs,{children:[s.length>0&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(rn,{labelText:"States",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","values which correspond to given states"]})}),s.map(((e,t)=>(0,l.jsx)(js,{containerStyle:{marginBottom:t===s.length-1?"1rem":"0.5rem"},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,value:e.value,labelClasses:"label-form-control-cancel",item:e,error:e.error,onChange:this.simpleOnChangeHandlerBinded},e.field)))]}),(0,l.jsx)(rn,{labelText:"Colors",infoText:(0,l.jsxs)("span",{children:["Specify"," ",(0,l.jsx)("span",{style:{fontWeight:"bold"},children:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(this.props.klet3DBinder[this.props.mainComponentThis.connectorIDbinderIDPropertyName])})," ","colors which correspond to given states"]})}),n.map((e=>(0,l.jsx)(js,{isColorInput:!0,label:e.isLongText?e.label:(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}),labelClasses:"label-form-control-cancel",item:e,onChange:this.simpleOnLiveChangeHandlerBinded,colorPickerBoxContainer:Fi()},e.field))),(0,l.jsx)(fs,{infoLabel:!0,infoLabelTitle:a.label,infoText:a.infoText,explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:a.value||a.defaultValue,onChange:this.simpleOnLiveChangeHandlerBinded(a)}),a.value&&(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(fs,{infoLabel:!0,infoLabelTitle:r.label,infoText:r.infoText,explanationInfoBoxStyles:{left:-160,width:140,zIndex:1},checked:r.value||r.defaultValue,onChange:this.simpleOnLiveChangeHandlerBinded(r)}),r.value&&(0,l.jsx)(gn,{children:h.map(((e,t)=>(0,l.jsx)(js,{isNumberInput:!0,controledNumberInput:!0,labelClasses:"label-form-control-cancel",containerStyle:{marginBottom:t<h.length-1?"0.5rem":0},label:e.keepTextWidth?(0,l.jsx)(nn,{longText:e.longText,shortText:e.label}):e.label,placeholder:e.placeholder,item:e,usePropsValue:!0,onChange:this.simpleOnLiveChangeHandlerBinded},"".concat(r.value,"+").concat(e.field))))})]})]}),(0,l.jsx)(gb,{targetKlet3DBinder:this.props.klet3DBinder,mainComponentThis:this.props.mainComponentThis}),(0,l.jsx)("div",{className:"button-centered-container",children:(0,l.jsx)(Ko,{disabled:!t,buttonType:t?"primary":"dull",spinnerColor:"#ffffff",buttonText:"Save",loading:i,spinnerLoading:!0,onClick:this.onSaveClick})})]})}}const zb=Hb;class Gb extends o.Component{render(){return null}}const Ub=Gb;class qb extends o.Component{constructor(e){super(),this.updateKlet3DBinderState=e=>{this.setState({klet3DBinder:e})},this.state={klet3DBinder:e.klet3DBinder},this.updateKlet3DBinderState=this.updateKlet3DBinderState.bind(this),this.activeParameters=o.createRef()}render(){const{klet3DBinder:e}=this.state;return(0,l.jsxs)(o.Fragment,{children:[this.props.renderDivider&&(0,l.jsx)("h3",{children:(0,l.jsx)("hr",{})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{children:this.props.title}),(0,l.jsxs)("div",{className:"door-window-ha-entities-binding-right-box-content-container",children:[(0,l.jsx)(us,{disabled:!0,label:"Entity",formGroupStyle:{marginBottom:"0.5rem"},inputStyle:{textAlign:"center"},value:e?this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e[this.props.mainComponentThis.connectorIDbinderIDPropertyName]):"-"}),(0,l.jsx)(Go,{type:"light-blue",onClick:()=>this.props.mainComponentThis.openBindingPopup(this.props.selectedObj,e,this.props.floorplan3DThis,this.updateKlet3DBinderState),children:e?"Change entity":"Add entity"})]}),e&&"doorWindow"===this.props.selectedObj.class&&(0,l.jsx)(bb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&"lights"===this.props.selectedObj.class&&(0,l.jsx)(xb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&"sensors"===this.props.selectedObj.class&&(0,l.jsx)(vb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&"homeAssistant"===this.props.selectedObj.class&&(0,l.jsx)(Ob,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isPresenceAreaObject(this.props.selectedObj.type)&&(0,l.jsx)(Ub,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isFanObject(this.props.selectedObj.type)&&(0,l.jsx)(kb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isCoverObject(this.props.selectedObj.type)&&(0,l.jsx)(Mb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isPresenceBinaryObject(this.props.selectedObj.type)&&(0,l.jsx)(Rb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isHVACObject(this.props.selectedObj.type)&&(0,l.jsx)(Bb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isChristmasTreeObject(this.props.selectedObj.type)&&(0,l.jsx)(Vb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isCameraObject(this.props.selectedObj.type)&&(0,l.jsx)(Eb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis}),e&&this.props.mainComponentThis.isScreenObject(this.props.selectedObj.type)&&(0,l.jsx)(zb,{ref:this.activeParameters,targetObject2D:this.props.selectedObj,klet3DBinder:e,updateKlet3DBinderState:this.updateKlet3DBinderState,callAPIForSave:this.props.callAPIForSave,setResponseError:this.props.setResponseError,mainComponentThis:this.props.mainComponentThis})]})]})}}const Kb=qb;var Yb=i(1317);function Xb(e){{let t=!1;e[0].entitygeneral||(e[0].entitygeneral={},t=!0),e[0].entitygeneral.version&&e[0].entitygeneral.version===this.HAAddonCurrentVersion||(e[0].entitygeneral.version=this.HAAddonCurrentVersion,Yb.log("Update version",e[0].entitygeneral),t=!0),this.props.customProps.isContainerApp&&(e[0].entitygeneral.isContainerApp=this.props.customProps.isContainerApp,Yb.log("Container app"),t=!0),t?C.post.call(this,"/klet3d/entity/".concat(this.props.floorplanID,"/").concat(this.props.licenseKey),{entitygeneral:e[0].entitygeneral},(t=>{Yb.log("Klet post API response"),Yb.log(t),this.onFloorplanDataLoadCallback(e)})):this.onFloorplanDataLoadCallback(e)}}function Zb(e,t){let i=[];if(e[t])for(const[o,s]of Object.entries(e[t]))i.push({name:o,serviceDataProperties:Object.entries(s.fields).map((e=>{let[t,i]=e;return{name:t,isRequired:i.required||!1}}))});return i}function Jb(){this.onShow3DClick(!1),this.unsubscribeConfig=(0,ab.wQ)(this.homeAssistantConnection,this.onConfigChangeCallback),this.unsubscribeServices=(0,rb.R)(this.homeAssistantConnection,this.onServicesChangeCallback)}async function Qb(e){if(Yb.log("Entities!",e),Object.keys(e).length!==this.homeAssistantEntities.length){Yb.log("Entities count changed");try{const t=await(0,lb.U2)(this.homeAssistantConnection);Yb.log("Get services socket result",t),this.hasBrowserModIntegration=!!t.browser_mod,this.homeAssistantEntities=[];for(const[o,s]of Object.entries(e)){const e=o.split(".")[0];this.homeAssistantEntities.push({entity_id:o,domain:e,...s,services:this.getServicesForEntity(t,e)})}let i={entity_id:"climate.climate_test_entity_id",domain:"climate",state:this.onEntitiesChangeCallCounter>1?"cool":"heat",attributes:{min_temp:8,max_temp:30,current_temperature:26,target_temperature:20,friendly_name:"Climate test"},last_changed:"2023-12-15T09:30:46.251751+00:00",last_updated:"2023-12-15T09:30:46.251751+00:00"};this.homeAssistantEntities.push(i,{...i,entity_id:"climate.climate_test_entity_id2"})}catch(t){Yb.log("Get services socket error",t)}}else for(const[i,o]of Object.entries(e)){let e=this.homeAssistantEntities.find((e=>e.entity_id===i));if(e)for(const[t,i]of Object.entries(o))e[t]=i}Yb.log("Parsed entities",this.homeAssistantEntities),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onHAEntitiesChangeCallback(this.homeAssistantEntities),0===this.onEntitiesChangeCallCounter&&this.onEntitiesLoadedCallback(),this.onEntitiesChangeCallCounter++}function $b(e){for(let t=0;t<this.homeAssistantEntities.length;t++){const i=this.homeAssistantEntities[t].domain;this.homeAssistantEntities[t].services=this.getServicesForEntity(e,i)}Yb.log("New services",e)}function ew(e){Yb.log("New config",e),this.homeAssistantConfigObject&&(Ii(this.homeAssistantConfigObject,e)||(Yb.log("HA config change"),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onHAConfigChange(e))),this.homeAssistantConfigObject=e}async function tw(e,t,i,o){try{const s=await(0,lb._D)(this.homeAssistantConnection,e,t,{entity_id:i,...o},{entity_id:i});return Yb.log("Call service result",s),s.context}catch(s){return Yb.log("Call service error",s),null}}function iw(e,t,i,o){const n=this.getBindedObjectKlet3DBinderData(e)?this.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.id)))):null;s.render((0,l.jsx)(Kb,{ref:this.bindingRightBoxComponentRef,mainComponentThis:this,floorplan3DThis:t,klet3DBinder:n,title:"Home Assistant",selectedObj:e,renderDivider:o,callAPIForSave:!0,setResponseError:this.setState.bind(this)},(new Date).getTime()),i.current)}function ow(e,t,i,o){const n=this.availableEntitiesDomainNamesToObject2DMapping(e);if(0===n.length)return;if(!this.getKlet3DBinderParamsDefaultValues(e))return;let a=this.homeAssistantEntities.filter((e=>n.includes(e.domain)));const r=this.getFloorplanObj2Ds();a=a.filter((t=>{const i=this.klet3DLastSavedData.find((e=>e.entity_id===t.entity_id));if(i){let t;for(let e=0;e<i.objID.length&&(t=r.find((t=>t.id===i.objID[e].id)),!t);e++);return!!t&&this.isSameBindedObjectType(t.type,e.type)}return!0})),gi(this.bindingPopupRightBoxContainerRef.current,200,(()=>{s.render((0,l.jsx)(mb,{updateKlet3DBinderState:o,containerRef:this.bindingPopupRightBoxContainerRef,klet3DBinder:t,obj2D:e,availableBinders:a,customSearchMethod:(e,t)=>e.entity_id.split(".")[1].toLowerCase().includes(t.toLowerCase()),binderIDLayoutMethod:e=>e.entity_id.split(".")[1],tableTitle:"Available Home Assistant entities",hasDomain:!0,hasDates:!0,callAPIForSave:!0,floorplan3DThis:i,setResponseError:this.setState.bind(this),mainComponentThis:this}),this.bindingPopupRightBoxContainerRef.current)}),"block",!1)}function sw(){this.unsubscribeEntities&&this.unsubscribeEntities(),this.unsubscribeServices&&this.unsubscribeServices(),this.unsubscribeConfig&&this.unsubscribeConfig(),this.homeAssistantConnection&&this.homeAssistantConnection.close()}function nw(e,t){this.availableEntitiesDomainNamesToObject2DMapping(e).length>0?this.renderBindingRightBox(e,t,this.bindingFreeItemContainerRef,!0):s.unmountComponentAtNode(this.bindingFreeItemContainerRef.current)}function aw(e,t){this.availableEntitiesDomainNamesToObject2DMapping(e).length>0?this.renderBindingRightBox(e,t,this.bindingWallItemContainerRef,!0):s.unmountComponentAtNode(this.bindingWallItemContainerRef.current)}function rw(e,t){this.availableEntitiesDomainNamesToObject2DMapping(e).length>0?this.renderBindingRightBox(e,t,this.sensorOtherToolsContainerRef,!1):s.unmountComponentAtNode(this.sensorOtherToolsContainerRef.current)}function lw(e,t){this.availableEntitiesDomainNamesToObject2DMapping(e).length>0?this.renderBindingRightBox(e,t,this.presenceAreaToolsContainerRef,!1):s.unmountComponentAtNode(this.presenceAreaToolsContainerRef.current)}function hw(e){const t=this.getObjectConnectorKlet3DBinderData(e);return t?(i=t).attributes&&i.attributes.friendly_name||i.entity_id.split(".")[1]:"";var i}function cw(e){return this.homeAssistantEntities.find((t=>t.entity_id===e))}function dw(e){return"doorWindow"===e.class?["input_boolean","binary_sensor"]:"lights"===e.class?["light","switch"]:"sensors"===e.class||this.isPresenceAreaObject(e.type)?["sensor"]:"furniture"===e.class?this.isFanObject(e.type)?["fan"]:this.isCoverObject(e.type)?["cover"]:this.isPresenceBinaryObject(e.type)?["binary_sensor"]:this.isHVACObject(e.type)?["climate","switch"]:this.isChristmasTreeObject(e.type)?["light","switch","input_boolean"]:this.isCameraObject(e.type)?["camera"]:this.isScreenObject(e.type)?["light","switch","input_boolean","binary_sensor","sensor","media_player","remote"]:[]:"homeAssistant"===e.class?hb:[]}async function pw(e){try{let t={entity:e};{const e=localStorage.getItem("browser_mod-browser-id");e&&(t.browser_id=e)}await this.callHomeAssistantService("browser_mod","more_info",e,t)}catch(t){Yb.error("Failed to open popup",t)}}const mw=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mainComponentThis=e,this.controlerParams=t,this.mainComponentThis.HAAddonCurrentVersion="1.0.18",this.mainComponentThis.homeAssistantConnection=null,this.mainComponentThis.homeAssistantEntities=[],this.mainComponentThis.homeAssistantConfigObject=this.mainComponentThis.props.customProps.userConfig,this.mainComponentThis.onEntitiesChangeCallCounter=0,this.mainComponentThis.unsubscribeEntities=null,this.mainComponentThis.unsubscribeServices=null,this.mainComponentThis.unsubscribeConfig=null,this.mainComponentThis.homeAssistantConnection=this.mainComponentThis.props.customProps.connection,this.mainComponentThis.connectorIDbinderIDPropertyName="entity_id",this.hasBrowserModIntegration=!1,this.mainComponentThis.onFloorplanDataLoadCustomAPICalls=Xb.bind(this.mainComponentThis),this.mainComponentThis.getServicesForEntity=Zb.bind(this.mainComponentThis),this.mainComponentThis.onEntitiesLoadedCallback=Jb.bind(this.mainComponentThis),this.mainComponentThis.onEntitiesChangeCallback=Qb.bind(this.mainComponentThis),this.mainComponentThis.onServicesChangeCallback=$b.bind(this.mainComponentThis),this.mainComponentThis.onConfigChangeCallback=ew.bind(this.mainComponentThis),this.mainComponentThis.callHomeAssistantService=tw.bind(this.mainComponentThis),this.mainComponentThis.renderBindingRightBox=iw.bind(this.mainComponentThis),this.mainComponentThis.openBindingPopup=ow.bind(this.mainComponentThis),this.mainComponentThis.freeItemToolsCustomSetter=nw.bind(this.mainComponentThis),this.mainComponentThis.wallItemToolsCustomSetter=aw.bind(this.mainComponentThis),this.mainComponentThis.sensorOtherItemToolsCustomSetter=rw.bind(this.mainComponentThis),this.mainComponentThis.presenceAreaItemToolsCustomSetter=lw.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderName=hw.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderData=cw.bind(this.mainComponentThis),this.mainComponentThis.availableEntitiesDomainNamesToObject2DMapping=dw.bind(this.mainComponentThis),this.mainComponentThis.openBrowserModMoreInfoPopupForEntity=pw.bind(this.mainComponentThis),this.mainComponentThis.componentWillUnmountCustomCallback=sw.bind(this.mainComponentThis),this.onFloorplanDataLoadControllerCallback=this.onFloorplanDataLoadControllerCallback.bind(this.mainComponentThis)}onFloorplanDataLoadControllerCallback(e){if(this.homeAssistantConnection){this.klet3DGeneral=e[0].entitygeneral||{},this.sensorHeatmapLastSavedData=this.klet3DGeneral&&Object.hasOwn(this.klet3DGeneral,"sensorHeatmapData")?this.klet3DGeneral.sensorHeatmapData:[];let t=e[0].entitydata||[];const i=this.getFloorplanObj2Ds();this.klet3DLastSavedData=t.filter((e=>(e.objID=e.objID.map((e=>e.id?e:{id:e})),e.objID=e.objID.filter((e=>i.find((t=>t.id===e.id)))),e.objID.length>0))).map((e=>new nb(e,e.objID,e.params,this))),this.unsubscribeEntities=(0,sb.p)(this.homeAssistantConnection,this.onEntitiesChangeCallback)}}};var uw=i(1317);function gw(e){const t=JSON.parse(JSON.stringify(this.HAConfigObject));if(this.HAConfigObject=e,this.floorplanTimeZone=this.HAConfigObject.time_zone,e.time_zone!==t.time_zone&&(uw.log("HA time zone change"),this.floorplanStartDate=H(e.time_zone),this.floorplanStartDateSetTimestamp=(new Date).getTime(),this.showMapLayer3DInputRef.current.getCheckedStatus()&&this.floorplan3DOnMapScene?(this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DOnMapInterval,!0),this.initializeSunLightPositionIntervalCalculation(!0,this.floorplan3DOnMapScene,this.sunLightPositionFloorplan3DOnMapCameraHelpers),this.textFont&&this.createFloorplanTimeMesh(this.floorplan3DViewScene,this.floorplanStartDate)):(this.clearSunLightPositionInterval(this.sunLightPositionFloorplan3DViewInterval),this.initializeSunLightPositionIntervalCalculation(!1,this.floorplan3DViewScene,this.sunLightPositionFloorplan3DViewCameraHelpers))),!Ii(t.unit_system,e.unit_system)){uw.log("HA unit system change");for(let e=0;e<this.objectConnectorsArray.length;e++)"sensor"!==this.objectConnectorsArray[e].class&&"other"!==this.objectConnectorsArray[e].class||this.objectConnectorsArray[e].update({entity:this.objectConnectorsArray[e].entity})}}function fw(e){let t=[];for(let i=0;i<this.objectConnectorsArray.length;i++){let o=e.find((e=>e.entity_id===this.objectConnectorsArray[i].entity.entity_id));o?Ii(this.objectConnectorsArray[i].entity,o)||this.objectConnectorsArray[i].update({entity:{...o}}):t.push(i)}t.sort(((e,t)=>t-e));for(let i=0;i<t.length;i++)this.objectConnectorsArray[t[i]].remove(),this.objectConnectorsArray.splice(t[i],1);if(this.isInitialFloorplanDrawingFinished){for(let t=0;t<e.length;t++){const i=this.props.mainComponentThis.klet3DLastSavedData.find((i=>i.entity_id===e[t].entity_id));i&&!this.objectConnectorsArray.find((i=>i.entity_id===e[t].entity_id))&&this.addObjectConnectorObject(i)}this.onObjectConnectorsDataChange&&this.onObjectConnectorsDataChange()}uw.log("objectConnectorsArray",this.objectConnectorsArray)}function bw(e,t,i){const o=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id));if(!o)return"";{const s=this.getObjectConnectorClassValue(this.getObjectConnectorParamsData(e.entity_id,i.object2D)),n=e.entity_id.split(".")[0];if("door_window"===s)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"open_state":"closed_state"]);if("lights"===s)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"switched_on_state":"switched_off_state"]);if("fan"===s)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"switched_on_state":"switched_off_state"]);if("cover"===s){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return t?t.attributes.current_position||0:null}if("presence_binary"===s)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"detected_state":"undetected_state"]);if("hvac"===s)return"climate"===n?"off"===t?["off"]:["heat","cool","heat_cool","auto","dry","fan_only"]:[this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"hvac_switched_on_state":"hvac_switched_off_state"])];if("christmas_tree_lights"===s)return this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["on"===t?"christmas_light_switched_on_state":"christmas_light_switched_off_state"]);if("camera"===s)return"off"===t?["idle"]:["recording","streaming"];if("screen"!==s)return"";if("off"===t)switch(n){case"media_player":case"remote":return["off","unavailable","unknown"];default:return[this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["screen_switched_off_state"])]}else switch(n){case"media_player":return["on","idle","playing","paused","standby","buffering"];case"remote":return["on"];default:return[this.props.mainComponentThis.getKlet3DDataParamValue(o,i.object2D,["screen_switched_on_state"])]}}}function ww(e,t){const i=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(t);if(i&&(e.entity=i,e.entity_id=i.entity_id),this.isFloorplanItemMeshBinded(e)){let i={};this.props.mainComponentThis.isLightObject(t.type)&&(i.isInitialRenderCall=!0),e.changeStateMethod(e,{entity:e.entity,...i})}!this.clickableObjectsSceneControlRef.current.isShowOnlyClickableObjectsActive()||this.isFloorplanItemMeshBinded(e)&&e.changeStateOnClick||(e.visible=!1)}function Cw(e){return!!e.entity}function xw(e){const t=e.light,i=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return!!i&&("on"===t.state?i.state!==this.getHAEntityUserSpecificedStateValue(i,"off",e)&&i.state===this.getHAEntityUserSpecificedStateValue(i,"on",e):i.state===this.getHAEntityUserSpecificedStateValue(i,"on",e)||(i.state,this.getHAEntityUserSpecificedStateValue(i,"off",e),!1))}function yw(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),o=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id)),s=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["power"]);if(this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["power_sync"])&&o&&o.attributes.brightness&&o.attributes.brightness<=255&&o.attributes.brightness>=1){const e=o.attributes.brightness;t.power=e/255*20}else t.power=s;const n=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["color"]);if(this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["color_sync"])&&o&&o.attributes.rgb_color){const e=o.attributes.rgb_color;t.color=new te.Ilk("rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"))}else t.color=new te.Ilk(n);return t.variant=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["variant"]),t.spot_angle=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["spot_angle"]),t.spot_distance=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["spot_distance"]),t}function Sw(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return!!t&&("open"===e.status?t.state!==this.getHAEntityUserSpecificedStateValue(t,"off",e)&&t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e):t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)||(t.state,this.getHAEntityUserSpecificedStateValue(t,"off",e),!1))}function _w(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return t?"on"===e.state?t.state===this.getHAEntityUserSpecificedStateValue(t,"off",e)?"off":t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)?"on":"off":t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)?"on":(t.state,this.getHAEntityUserSpecificedStateValue(t,"off",e),"off"):"off"}function Dw(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return t?"on"===e.state?t.state===this.getHAEntityUserSpecificedStateValue(t,"off",e)?"off":(t.state,this.getHAEntityUserSpecificedStateValue(t,"on",e),"on"):t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)?"on":t.state===this.getHAEntityUserSpecificedStateValue(t,"off",e)?"off":"on":"on"}function vw(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);if(!t)return"off";const i=this.getHVACEntityStateValue(t);return"on"===e.state?this.getHAEntityUserSpecificedStateValue(t,"off",e).includes(i)?"off":this.getHAEntityUserSpecificedStateValue(t,"on",e).includes(i)?"on":"off":this.getHAEntityUserSpecificedStateValue(t,"on",e).includes(i)?"on":(this.getHAEntityUserSpecificedStateValue(t,"off",e).includes(i),"off")}function Tw(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return t?"on"===e.state?t.state===this.getHAEntityUserSpecificedStateValue(t,"off",e)?"off":t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)?"on":"off":t.state===this.getHAEntityUserSpecificedStateValue(t,"on",e)?"on":(t.state,this.getHAEntityUserSpecificedStateValue(t,"off",e),"off"):"off"}function jw(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return t?"on"===e.state?this.getHAEntityUserSpecificedStateValue(t,"off",e).includes(t.state)?"off":this.getHAEntityUserSpecificedStateValue(t,"on",e).includes(t.state)?"on":"off":this.getHAEntityUserSpecificedStateValue(t,"on",e).includes(t.state)?"on":(this.getHAEntityUserSpecificedStateValue(t,"off",e).includes(t.state),"off"):"off"}function Ow(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return t?"on"===e.state?this.getHAEntityUserSpecificedStateValue(t,"off",e).includes(t.state)?"off":this.getHAEntityUserSpecificedStateValue(t,"on",e).includes(t.state)?"on":"off":this.getHAEntityUserSpecificedStateValue(t,"on",e).includes(t.state)?"on":(this.getHAEntityUserSpecificedStateValue(t,"off",e).includes(t.state),"off"):null}function Iw(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),o=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id)),s=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["direction"]);this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["direction_sync"])&&o&&o.attributes.direction?t.direction=o.attributes.direction:t.direction=s;const n=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["percentage"]);return this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["percentage_sync"])&&o&&o.attributes.percentage?t.percentage=o.attributes.percentage:t.percentage=n,t}function Pw(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id)),o=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));return t.openOffset=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["open_offset"]),t.closedOffset=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["closed_offset"]),t.closingDirection=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["closing_direction"]),t.currentPosition=o&&void 0!==o.attributes.current_position?o.attributes.current_position:0,t}function kw(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id));return uw.log("targetKlet3DData",i),t.detectedOpacity=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["detected_opacity"])/100,t.undetectedOpacity=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["undetected_opacity"])/100,t}function Fw(e,t){let i={};const o=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===t.entity.entity_id));if(i.mode="neutral",o){const e=this.getHVACEntityStateValue(o);if("heat"===e)i.mode="heating";else if("cool"===e)i.mode="cooling";else if("dry"===e)i.mode="drying";else if(("heat_cool"===e||"auto"===e)&&Object.hasOwn(o.attributes,"current_temperature")&&Object.hasOwn(o.attributes,"target_temperature")){const e=parseFloat(o.attributes.current_temperature),t=parseFloat(o.attributes.target_temperature);e>t?i.mode="cooling":e<t&&(i.mode="heating")}}return i}function Mw(){return{}}function Aw(){return{}}function Rw(e){let t={};const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.entity_id===e.entity_id));return uw.log("targetKlet3DData",i),t.screen_on_color=new te.Ilk(this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["screen_on_color"])),t.screen_off_color=new te.Ilk(this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["screen_off_color"])),t.screen_is_light=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["screen_is_light"]),t.screen_3d_glow_effect=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["screen_3d_glow_effect"]),t.screen_3d_glow_factor=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["screen_3d_glow_factor"]),t.screen_3d_glow_spread=this.props.mainComponentThis.getKlet3DDataParamValue(i,e.object2D,["screen_3d_glow_spread"]),t}async function Lw(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"toggle",e.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle light. Please check your connection and try again.","error")}}}async function Bw(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"toggle",e.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle fan. Please check your connection and try again.","error")}}}async function Ww(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"set_cover_position"===e.name))){let i=0;0===t.attributes.current_position&&(i=100);await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"set_cover_position",e.entity_id,{position:i})||this.alertRef.current.showAlert("Error while trying to toggle cover. Please check your connection and try again.","error")}}}async function Vw(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"toggle",e.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle HVAC. Please check your connection and try again.","error")}}}async function Nw(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity_id.split(".")[0],"toggle",e.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle christmas tree. Please check your connection and try again.","error")}}}async function Ew(e){this.floorplan3DViewScene.getObjectByName("coverage_area_mesh")?this.removeCameraCoverageArea3DMesh():this.createCameraCoverageArea3DVisualization(e.object2D)}function Hw(e,t){this.setCameraPOVView(e,(()=>{this.props.mainComponentThis.openBrowserModMoreInfoPopupForEntity(t.entity_id)}))}async function zw(e){const t=e.entity_id.split(".")[0];if("binary_sensor"===t||"sensor"===t)return;const i=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity_id));if(i){if(i.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(t,"toggle",e.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle screen. Please check your connection and try again.","error")}}}function Gw(e,t){t.entity=e.entity,t.entity_id=e.entity_id}function Uw(e){const t=this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D);return t&&t.attributes.unit_of_measurement||""}function qw(e){const t=e.connectorBindedObjectObj2D;return"sensors"===t.class?"sensor":this.props.mainComponentThis.isPresenceAreaObject(t.type)?"presence_area":"doorWindow"===t.class?"door_window":this.props.mainComponentThis.isLightObject(t.type)?"lights":this.props.mainComponentThis.isFanObject(t.type)?"fan":this.props.mainComponentThis.isCoverObject(t.type)?"cover":this.props.mainComponentThis.isPresenceBinaryObject(t.type)?"presence_binary":this.props.mainComponentThis.isHVACObject(t.type)?"hvac":this.props.mainComponentThis.isChristmasTreeObject(t.type)?"christmas_tree_lights":this.props.mainComponentThis.isCameraObject(t.type)?"camera":this.props.mainComponentThis.isScreenObject(t.type)?"screen":"other"}function Kw(e,t){e.entity={...t.entity},e.entity_id=e.entity.entity_id,e.domain=e.entity_id.split(".")[0]}function Yw(e){const t={...e.entity};e.entity=null;const i=this.getHAEntityUserSpecificedStateValue(t,this.HAEntityFixed2DObjectsBindDefaultStateValue(t.entity_id,e),e);return{entity:{...t,state:""!==i?Array.isArray(i)?i[0]:i:void 0}}}function Xw(e,t){return e.entity=t.entity,{entity:t.entity}}function Zw(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.entity_id===t.entity.entity_id));if(!i)return null;let o={};return o.isSensorNumberValue=this.getIsSensorNumberValue(t.entity.entity_id,e.object2D),o.sensorOutputValue=o.isSensorNumberValue?T(parseFloat(t.entity.state),this.sensorValueDecimalPrecision):t.entity.state,o.connectorInstanceSavedParameters=i,o.sensorMeshPropertiesSetter=e=>{e.name=t.entity.entity_id,e.entity=t.entity},o}function Jw(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e)),o=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===i.entity_id));return"number"===this.props.mainComponentThis.getKlet3DDataParamValue(i,t,["sensor_type"])&&!q.isNumber(o.state)}function Qw(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.entity_id===t.entity_id));if(!i)return null;let o={};return o.otherValue=t.entity.state,o.connectorInstanceSavedParameters=i,o.otherMeshPropertiesSetter=e=>{e.name=t.entity.entity_id,e.entity=t.entity},o}function $w(e,t){if(!this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.entity_id===t.entity_id)))return null;let i={...this.getPresenceAreaDetectedObjectsData(e.object2D,{entity:t.entity})};return i.presenceAreaGroupPropertiesSetter=e=>{e.name=t.entity.entity_id,e.entity=t.entity},i}function eC(e,t){const i=this.props.mainComponentThis.homeAssistantEntities.find((e=>e.entity_id===t.entity.entity_id));return{detectedObjectsPositions:e.additionalParams.detectedObjectToModelMappings.map(((e,t)=>({detected_object_field:e.detectedObjectField,coordX:i&&Object.hasOwn(i.attributes,"target".concat(t+1,"_x"))?i.attributes["target".concat(t+1,"_x")]:null,coordY:i&&Object.hasOwn(i.attributes,"target".concat(t+1,"_y"))?i.attributes["target".concat(t+1,"_y")]:null}))),coordinatesUnit:"mm"}}function tC(e,t){return{entity:{...this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(e)},connectorBindedObjectObj2D:t}}function iC(e){return e.entity.entity_id}async function oC(e){const t=this.props.mainComponentThis.homeAssistantEntities.find((t=>t.entity_id===e.entity.entity_id));if(t){if(t.services.find((e=>"toggle"===e.name))){await this.props.mainComponentThis.callHomeAssistantService(e.entity.entity_id.split(".")[0],"toggle",e.entity.entity_id,{})||this.alertRef.current.showAlert("Error while trying to toggle ".concat(e.type,". Please check your connection and try again."),"error")}}}function sC(e,t){if(t)return{value:this.getObjectPanelItemValue(e,!0,this.getObjectConnectorParamsData(e.entity.entity_id,e.object2D)),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.entity.entity_id),entity_id:e.entity.entity_id,entity:e.entity};{const t=this.getIsSensorNumberValue(e.entity_id,e.object2D);return{value:this.getObjectPanelItemValue(e,!1,this.getObjectConnectorParamsData(e.entity.entity_id,e.object2D),t),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.entity.entity_id),isNumberValue:t,entity_id:e.entity.entity_id,entity:e.entity}}}function nC(e,t,i,o){if(t){if(this.props.mainComponentThis.isCoverObject(e.object2D.type))return this.getHAEntityUserSpecificedStateValue(i.entity,null,e);if(this.props.mainComponentThis.isHVACObject(e.object2D.type)){const t=this.getHVACEntityStateValue(i.entity);return this.getHAEntityUserSpecificedStateValue(i.entity,"on",e).includes(t)}return this.props.mainComponentThis.isCameraObject(e.object2D.type)||this.props.mainComponentThis.isScreenObject(e.object2D.type)?this.getHAEntityUserSpecificedStateValue(i.entity,"on",e).includes(i.entity.state):i.entity.state===this.getHAEntityUserSpecificedStateValue(i.entity,"on",e)}return this.props.mainComponentThis.isPresenceAreaObject(e.object2D.type)?this.getPresenceAreaDetectedObjectsData(e.object2D,i):o?T(i.entity.state,this.sensorValueDecimalPrecision):i.entity.state}function aC(e){if(this.props.mainComponentThis.getBindedObjectKlet3DBinderData(e.object2D)){const t=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id))));e.mesh.longPressCustomHandler?e.mesh.longPressCustomHandler(e,t):this.props.mainComponentThis.openBrowserModMoreInfoPopupForEntity(t.entity_id)}}function rC(e){return e.state}function lC(e,t){switch(this.getObjectConnectorClassValue(this.getObjectConnectorParamsData(e,t.object2D))){case"door_window":case"lights":case"fan":case"hvac":case"christmas_tree_lights":case"camera":case"screen":default:return"off";case"cover":return null;case"presence_binary":return"on"}}var hC=i(1317);const cC=class{constructor(e,t){hC.log("HomeAssistant3DViewController constructor",t),this.mainComponentThis=e,this.controlerParams=t,this.floorplan3DThis=this.controlerParams.floorplan3DThis,this.floorplan3DThis.HAConfigObject={},this.floorplan3DThis.onHAConfigChange=gw.bind(this.floorplan3DThis),this.floorplan3DThis.onHAEntitiesChangeCallback=fw.bind(this.floorplan3DThis),this.floorplan3DThis.getHAEntityUserSpecificedStateValue=bw.bind(this.floorplan3DThis),this.floorplan3DThis.setFloorplanItemMeshProperties=ww.bind(this.floorplan3DThis),this.floorplan3DThis.isFloorplanItemMeshBinded=Cw.bind(this.floorplan3DThis),this.floorplan3DThis.getLightTurnOnState=xw.bind(this.floorplan3DThis),this.floorplan3DThis.getLightProperties=yw.bind(this.floorplan3DThis),this.floorplan3DThis.getDoorWindowOpenStatus=Sw.bind(this.floorplan3DThis),this.floorplan3DThis.getFanState=_w.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceBinaryState=Dw.bind(this.floorplan3DThis),this.floorplan3DThis.getHVACState=vw.bind(this.floorplan3DThis),this.floorplan3DThis.getChristmasTreeLightState=Tw.bind(this.floorplan3DThis),this.floorplan3DThis.getCameraState=jw.bind(this.floorplan3DThis),this.floorplan3DThis.getScreenState=Ow.bind(this.floorplan3DThis),this.floorplan3DThis.getFanProperties=Iw.bind(this.floorplan3DThis),this.floorplan3DThis.getCoverProperties=Pw.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceBinaryProperties=kw.bind(this.floorplan3DThis),this.floorplan3DThis.getHVACProperties=Fw.bind(this.floorplan3DThis),this.floorplan3DThis.getChristmasTreeLightProperties=Mw.bind(this.floorplan3DThis),this.floorplan3DThis.getCameraProperties=Aw.bind(this.floorplan3DThis),this.floorplan3DThis.getScreenProperties=Rw.bind(this.floorplan3DThis),this.floorplan3DThis.toggleLightStateAction=Lw.bind(this.floorplan3DThis),this.floorplan3DThis.toggleFanStateAction=Bw.bind(this.floorplan3DThis),this.floorplan3DThis.toggleCoverStateAction=Ww.bind(this.floorplan3DThis),this.floorplan3DThis.toggleHVACStateAction=Vw.bind(this.floorplan3DThis),this.floorplan3DThis.toggleChristmasTreeStateAction=Nw.bind(this.floorplan3DThis),this.floorplan3DThis.onCameraClickActions=Ew.bind(this.floorplan3DThis),this.floorplan3DThis.onCameraLongPress=Hw.bind(this.floorplan3DThis),this.floorplan3DThis.toggleScreenStateAction=zw.bind(this.floorplan3DThis),this.floorplan3DThis.cloneUnfixedBindedObject3DCustomCallback=Gw.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorUnitOfMeasurement=Uw.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorClassValue=qw.bind(this.floorplan3DThis),this.floorplan3DThis.setObjectsConnectorInstanceCustomProperties=Kw.bind(this.floorplan3DThis),this.floorplan3DThis.removeBindedFixedObjectCallback=Yw.bind(this.floorplan3DThis),this.floorplan3DThis.addBindedFixedObjectCallback=Xw.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorMeshParameters=Zw.bind(this.floorplan3DThis),this.floorplan3DThis.getIsSensorNumberValue=Jw.bind(this.floorplan3DThis),this.floorplan3DThis.getOtherMeshParameters=Qw.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceAreaGroupParameters=$w.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceAreaDetectedObjectsData=eC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsData=tC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsDataIDValue=iC.bind(this.floorplan3DThis),this.floorplan3DThis.onDoorWindowSwitchChange=oC.bind(this.floorplan3DThis),this.floorplan3DThis.getPanelItemProperties=sC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectPanelItemValue=nC.bind(this.floorplan3DThis),this.floorplan3DThis.selectedItemLongPressHandler=aC.bind(this.floorplan3DThis),this.floorplan3DThis.getHVACEntityStateValue=rC.bind(this.floorplan3DThis),this.floorplan3DThis.HAEntityFixed2DObjectsBindDefaultStateValue=lC.bind(this.floorplan3DThis)}};var dC=i(1317);function pC(e){if("data_msg"===e.data.type){if(e.origin!==this.props.customProps.integratorDomain)return;dC.log("Sender domain",e.origin),dC.log("Message event"),dC.log(e),dC.log(e.data),dC.log("Forwarded data"),dC.log(e.data.data);const t=JSON.parse(e.data.data).availableEntities;if(Object.keys(t).length!==this.webIntegrationEntities.length){dC.log("Entities count changed"),this.webIntegrationEntities=[];for(let e=0;e<t.length;e++)this.webIntegrationEntities.push({...t[e]})}else for(let e=0;e<t.length;e++){let i=this.webIntegrationEntities.find((i=>i.web_id===t[e].web_id));if(i)for(const[o,s]of Object.entries(t[e]))i[o]=s}this.floorplan3DComponent.current&&this.floorplan3DComponent.current.onWebIntegrationDataChange3DCallback(this.webIntegrationEntities),0===this.onWebIntegrationDataChangeCallCounter&&this.onWebIntegrationDataLoadedCallback(),this.onWebIntegrationDataChangeCallCounter++}}function mC(){this.onShow3DClick(!1)}function uC(e,t,i,o){if("sensors"!==e.class)return;const n=this.getBindedObjectKlet3DBinderData(e)?this.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.id)))):null;s.render((0,l.jsx)(Kb,{ref:this.bindingRightBoxComponentRef,mainComponentThis:this,floorplan3DThis:t,klet3DBinder:n,title:"Sensors binding",selectedObj:e,renderDivider:o,callAPIForSave:!0,setResponseError:this.setState.bind(this)},(new Date).getTime()),i.current)}function gC(e,t,i,o){let n=[...this.webIntegrationEntities];const a=this.getFloorplanObj2Ds();n=n.filter((t=>{const i=this.klet3DLastSavedData.find((e=>e.web_id===t.web_id));if(i){let t;for(let e=0;e<i.objID.length&&(t=a.find((t=>t.id===i.objID[e].id)),!t);e++);return!!t&&this.isSameBindedObjectType(t.type,e.type)}return!0})),gi(this.bindingPopupRightBoxContainerRef.current,200,(()=>{s.render((0,l.jsx)(mb,{updateKlet3DBinderState:o,containerRef:this.bindingPopupRightBoxContainerRef,klet3DBinder:t,obj2D:e,availableBinders:n,binderIDLayoutMethod:e=>e.web_id,tableTitle:"Available sensors",hasDomain:!1,hasDates:!1,callAPIForSave:!0,floorplan3DThis:i,setResponseError:this.setState.bind(this),mainComponentThis:this}),this.bindingPopupRightBoxContainerRef.current)}),"block",!1)}function fC(){}function bC(){}function wC(e,t){this.renderBindingRightBox(e,t,this.sensorOtherToolsContainerRef,!1)}function CC(){}function xC(e){return this.getObjectConnectorKlet3DBinderData(e).name}function yC(e){return this.webIntegrationEntities.find((t=>t.web_id===e))}function SC(){window.removeEventListener("message",this.onWebIntegrationDataChangeCallback)}const _C=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.mainComponentThis=e,this.controlerParams=t,this.mainComponentThis.onWebIntegrationDataChangeCallCounter=0,this.mainComponentThis.webIntegrationEntities=[],this.mainComponentThis.connectorIDbinderIDPropertyName="web_id",this.mainComponentThis.onWebIntegrationDataChangeCallback=pC.bind(this.mainComponentThis),this.mainComponentThis.onWebIntegrationDataLoadedCallback=mC.bind(this.mainComponentThis),this.mainComponentThis.renderBindingRightBox=uC.bind(this.mainComponentThis),this.mainComponentThis.openBindingPopup=gC.bind(this.mainComponentThis),this.mainComponentThis.freeItemToolsCustomSetter=fC.bind(this.mainComponentThis),this.mainComponentThis.wallItemToolsCustomSetter=bC.bind(this.mainComponentThis),this.mainComponentThis.sensorOtherItemToolsCustomSetter=wC.bind(this.mainComponentThis),this.mainComponentThis.presenceAreaItemToolsCustomSetter=CC.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderName=xC.bind(this.mainComponentThis),this.mainComponentThis.getObjectConnectorKlet3DBinderData=yC.bind(this.mainComponentThis),this.mainComponentThis.componentWillUnmountCustomCallback=SC.bind(this.mainComponentThis),this.onFloorplanDataLoadControllerCallback=this.onFloorplanDataLoadControllerCallback.bind(this.mainComponentThis)}onFloorplanDataLoadControllerCallback(e){this.klet3DGeneral=e[0].entitygeneral||{},this.sensorHeatmapLastSavedData=this.klet3DGeneral&&Object.hasOwn(this.klet3DGeneral,"sensorHeatmapData")?this.klet3DGeneral.sensorHeatmapData:[];let t=e[0].entitydata||[];const i=this.getFloorplanObj2Ds();this.klet3DLastSavedData=t.filter((e=>(e.objID=e.objID.map((e=>e.id?e:{id:e})),e.objID=e.objID.filter((e=>i.find((t=>t.id===e.id)))),e.objID.length>0))).map((e=>new nb(e,e.objID,e.params,this))),window.addEventListener("message",this.onWebIntegrationDataChangeCallback),window.parent.postMessage({type:"success_msg",message:"Handshake success"},this.props.customProps.integratorDomain)}};var DC=i(1317);function vC(e){let t=[];for(let i=0;i<this.objectConnectorsArray.length;i++){let o=e.find((e=>e.web_id===this.objectConnectorsArray[i].webEntity.web_id));o?Ii(this.objectConnectorsArray[i].webEntity,o)||this.objectConnectorsArray[i].update({webEntity:{...o}}):t.push(i)}t.sort(((e,t)=>t-e));for(let i=0;i<t.length;i++)this.objectConnectorsArray[t[i]].remove(),this.objectConnectorsArray.splice(t[i],1);if(this.isInitialFloorplanDrawingFinished){for(let t=0;t<e.length;t++){const i=this.props.mainComponentThis.klet3DLastSavedData.find((i=>i.web_id===e[t].web_id));i&&!this.objectConnectorsArray.find((i=>i.web_id===e[t].web_id))&&this.addObjectConnectorObject(i)}this.onObjectConnectorsDataChange&&this.onObjectConnectorsDataChange()}DC.log("objectConnectorsArray",this.objectConnectorsArray)}function TC(e,t){let i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.objID.find((e=>e.id===t.id))));if(i){const t=this.props.mainComponentThis.webIntegrationEntities.find((e=>e.web_id===i.web_id));t&&(e.webEntity=t,e.web_id=t.web_id)}if(this.isFloorplanItemMeshBinded(e)){let i={};this.props.mainComponentThis.isLightObject(t.type)&&(i.isInitialRenderCall=!0),e.changeStateMethod(e,{webEntity:e.webEntity,...i})}!this.clickableObjectsSceneControlRef.current.isShowOnlyClickableObjectsActive()||this.isFloorplanItemMeshBinded(e)&&e.changeStateOnClick||(e.visible=!1)}function jC(e){return!!e.webEntity}function OC(e){const t=e.light;if(!this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.web_id===e.web_id)))return!1;return!!this.props.mainComponentThis.webIntegrationEntities.find((t=>t.web_id===e.web_id))&&(DC.log("Light state",t.state),!1)}function IC(e){let t={};const i=this.props.mainComponentThis.getKlet3DBinderParamsDefaultValues(e.object2D);for(let o in i)t[o]="color"===o?new te.Ilk(i[o]):i[o];return t}function PC(e){this.props.mainComponentThis.webIntegrationEntities.find((t=>t.web_id===e.web_id));return!1}function kC(e){this.props.mainComponentThis.webIntegrationEntities.find((t=>t.web_id===e.web_id));return"off"}function FC(e){this.props.mainComponentThis.webIntegrationEntities.find((t=>t.web_id===e.web_id));return"on"}function MC(e){this.props.mainComponentThis.webIntegrationEntities.find((t=>t.web_id===e.web_id));return"off"}function AC(e){this.props.mainComponentThis.webIntegrationEntities.find((t=>t.web_id===e.web_id));return"off"}function RC(e){this.props.mainComponentThis.webIntegrationEntities.find((t=>t.web_id===e.web_id));return"off"}function LC(e){return this.props.mainComponentThis.webIntegrationEntities.find((t=>t.web_id===e.web_id))?"off":null}function BC(e){let t={};const i=this.props.mainComponentThis.getKlet3DBinderParamsDefaultValues(e.object2D);for(let o in i)t[o]=i[o];return t}function WC(e){let t={};const i=this.props.mainComponentThis.getKlet3DBinderParamsDefaultValues(e.object2D);for(let o in i)t[o]=i[o];return t}function VC(e){let t={};const i=this.props.mainComponentThis.getKlet3DBinderParamsDefaultValues(e.object2D);for(let o in i)t[o]=i[o];return t}function NC(e,t){DC.log(e,t,t.webEntity);let i={mode:"neutral"};return i}function EC(){return{}}function HC(){return{}}function zC(e){let t={};const i=this.props.mainComponentThis.getKlet3DBinderParamsDefaultValues(e.object2D);for(let o in i)t[o]=i[o];return t}async function GC(){}async function UC(){}async function qC(){}async function KC(){}async function YC(){}async function XC(e){this.floorplan3DViewScene.getObjectByName("coverage_area_mesh")?this.removeCameraCoverageArea3DMesh():this.createCameraCoverageArea3DVisualization(e.object2D)}async function ZC(){}function JC(e,t){t.webEntity=e.webEntity,t.web_id=e.web_id}function QC(e){const t=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t.objID.find((t=>t.id===e.object2D.id))));if(!t)return"";const i=this.props.mainComponentThis.webIntegrationEntities.find((e=>e.web_id===t.web_id));return i&&i.attributes.unit||""}function $C(){return"sensor"}function ex(e,t){e.webEntity={...t.webEntity},e.web_id=e.webEntity.web_id}function tx(e){const t={...e.webEntity};e.webEntity=null;return{webEntity:{...t,state:""}}}function ix(e,t){return e.webEntity=t.webEntity,{webEntity:t.webEntity}}function ox(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.web_id===t.webEntity.web_id));if(!i)return null;let o={};return o.isSensorNumberValue=this.getIsSensorNumberValue(t.webEntity.web_id,e.object2D),o.sensorOutputValue=o.isSensorNumberValue?T(parseFloat(t.webEntity.state),this.sensorValueDecimalPrecision):t.webEntity.state,o.connectorInstanceSavedParameters=i,o.sensorMeshPropertiesSetter=e=>{e.name=t.webEntity.web_id,e.webEntity=t.webEntity},o}function sx(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((t=>t[this.props.mainComponentThis.connectorIDbinderIDPropertyName]===e)),o=this.props.mainComponentThis.webIntegrationEntities.find((e=>e.web_id===i.web_id));return DC.log("getIsSensorNumberValue object2D",t),"number"===i.params.sensor_type&&!q.isNumber(o.state)}function nx(e,t){const i=this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.web_id===t.web_id));if(!i)return null;let o={};return o.otherValue=t.webEntity.state,o.connectorInstanceSavedParameters=i,o.otherMeshPropertiesSetter=e=>{e.name=t.webEntity.web_id,e.webEntity=t.webEntity},o}function ax(e,t){if(!this.props.mainComponentThis.klet3DLastSavedData.find((e=>e.web_id===t.webEntity.web_id)))return null;let i={...this.getPresenceAreaDetectedObjectsData(e.object2D,{webEntity:t.webEntity})};return i.presenceAreaGroupPropertiesSetter=e=>{e.name=t.webEntity.web_id,e.webEntity=t.webEntity},i}function rx(e,t){const i=this.props.mainComponentThis.webIntegrationEntities.find((e=>e.web_id===t.webEntity.web_id));return{detectedObjectsPositions:e.additionalParams.detectedObjectToModelMappings.map(((e,t)=>({detected_object_field:e.detectedObjectField,coordX:i&&Object.hasOwn(i.attributes,"target".concat(t,"_x"))?i.attributes["target".concat(t,"_x")]:null,coordY:i&&Object.hasOwn(i.attributes,"target".concat(t,"_y"))?i.attributes["target".concat(t,"_y")]:null}))),coordinatesUnit:"mm"}}function lx(e,t){return{webEntity:{...this.props.mainComponentThis.getObjectConnectorKlet3DBinderData(e)},connectorBindedObjectObj2D:t}}function hx(e){return e.webEntity.web_id}async function cx(){}function dx(e,t){if(t)return{value:this.getObjectPanelItemValue(e,!0,this.getObjectConnectorParamsData(e.webEntity.web_id,e.object2D)),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.webEntity.web_id),web_id:e.webEntity.web_id,webEntity:e.webEntity};{const t=this.getIsSensorNumberValue(e.web_id,e.object2D);return{value:this.getObjectPanelItemValue(e,!1,this.getObjectConnectorParamsData(e.webEntity.web_id,e.object2D),t),name:this.props.mainComponentThis.getObjectConnectorKlet3DBinderName(e.webEntity.web_id),isNumberValue:t,web_id:e.webEntity.web_id,webEntity:e.webEntity}}}function px(e,t,i,o){return t?!!this.props.mainComponentThis.isCoverObject(e.object2D.type)&&0:o?T(i.webEntity.state,this.sensorValueDecimalPrecision):i.webEntity.state}const mx=class{constructor(e,t){this.mainComponentThis=e,this.controlerParams=t,this.floorplan3DThis=this.controlerParams.floorplan3DThis,this.floorplan3DThis.onWebIntegrationDataChange3DCallback=vC.bind(this.floorplan3DThis),this.floorplan3DThis.setFloorplanItemMeshProperties=TC.bind(this.floorplan3DThis),this.floorplan3DThis.isFloorplanItemMeshBinded=jC.bind(this.floorplan3DThis),this.floorplan3DThis.getLightTurnOnState=OC.bind(this.floorplan3DThis),this.floorplan3DThis.getLightProperties=IC.bind(this.floorplan3DThis),this.floorplan3DThis.getDoorWindowOpenStatus=PC.bind(this.floorplan3DThis),this.floorplan3DThis.getFanState=kC.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceBinaryState=FC.bind(this.floorplan3DThis),this.floorplan3DThis.getHVACState=MC.bind(this.floorplan3DThis),this.floorplan3DThis.getChristmasTreeLightState=AC.bind(this.floorplan3DThis),this.floorplan3DThis.getCameraState=RC.bind(this.floorplan3DThis),this.floorplan3DThis.getScreenState=LC.bind(this.floorplan3DThis),this.floorplan3DThis.getFanProperties=BC.bind(this.floorplan3DThis),this.floorplan3DThis.getCoverProperties=WC.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceBinaryProperties=VC.bind(this.floorplan3DThis),this.floorplan3DThis.getHVACProperties=NC.bind(this.floorplan3DThis),this.floorplan3DThis.getChristmasTreeLightProperties=EC.bind(this.floorplan3DThis),this.floorplan3DThis.getCameraProperties=HC.bind(this.floorplan3DThis),this.floorplan3DThis.getScreenProperties=zC.bind(this.floorplan3DThis),this.floorplan3DThis.toggleLightStateAction=GC.bind(this.floorplan3DThis),this.floorplan3DThis.toggleFanStateAction=UC.bind(this.floorplan3DThis),this.floorplan3DThis.toggleCoverStateAction=qC.bind(this.floorplan3DThis),this.floorplan3DThis.toggleHVACStateAction=KC.bind(this.floorplan3DThis),this.floorplan3DThis.toggleChristmasTreeStateAction=YC.bind(this.floorplan3DThis),this.floorplan3DThis.onCameraClickActions=XC.bind(this.floorplan3DThis),this.floorplan3DThis.toggleScreenStateAction=ZC.bind(this.floorplan3DThis),this.floorplan3DThis.cloneUnfixedBindedObject3DCustomCallback=JC.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorUnitOfMeasurement=QC.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorClassValue=$C.bind(this.floorplan3DThis),this.floorplan3DThis.setObjectsConnectorInstanceCustomProperties=ex.bind(this.floorplan3DThis),this.floorplan3DThis.removeBindedFixedObjectCallback=tx.bind(this.floorplan3DThis),this.floorplan3DThis.addBindedFixedObjectCallback=ix.bind(this.floorplan3DThis),this.floorplan3DThis.getSensorMeshParameters=ox.bind(this.floorplan3DThis),this.floorplan3DThis.getIsSensorNumberValue=sx.bind(this.floorplan3DThis),this.floorplan3DThis.getOtherMeshParameters=nx.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceAreaGroupParameters=ax.bind(this.floorplan3DThis),this.floorplan3DThis.getPresenceAreaDetectedObjectsData=rx.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsData=lx.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectConnectorParamsDataIDValue=hx.bind(this.floorplan3DThis),this.floorplan3DThis.onDoorWindowSwitchChange=cx.bind(this.floorplan3DThis),this.floorplan3DThis.getPanelItemProperties=dx.bind(this.floorplan3DThis),this.floorplan3DThis.getObjectPanelItemValue=px.bind(this.floorplan3DThis)}};const ux=class{constructor(e,t){this.mainComponentThis=e,this.addOnIntegrationType=t,this.view2DController=null,this.view3DController=null,this.target2DViewControllerClass=null,this.target3DViewControllerClass=null,"HomeAssistant"===this.addOnIntegrationType?(this.target2DViewControllerClass=mw,this.target3DViewControllerClass=cC):"WebIntegration"===this.addOnIntegrationType&&(this.target2DViewControllerClass=_C,this.target3DViewControllerClass=mx)}initializeController(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"2D"===e?this.view2DController=new this.target2DViewControllerClass(this.mainComponentThis,t):this.view3DController=new this.target3DViewControllerClass(this.mainComponentThis,t)}};class gx extends o.Component{constructor(){super(),this.setFloorplanFloorsData=(e,t)=>this.setState({floorplanFloors:e},(()=>t&&t())),this.setSelectedFloorplanFloor=(e,t)=>this.setState({selectedFloor:e},(()=>{this.props.mainComponentThis.floorplan3DComponent.current||this.props.mainComponentThis.openFloorParametersRightBox(),t&&t()})),this.getSelectedFloorplanFloor=()=>this.state.selectedFloor,this.getTargetSwitchFloor=()=>this.state.targetSwitchFloor,this.getTargetDeleteFloor=()=>this.state.targetDeleteFloor,this.onFloorplanFloorClick=e=>()=>{this.state.selectedFloor.floorNumber!==e.floorNumber?this.setState({targetSwitchFloor:e},(()=>this.props.mainComponentThis.handleFloorplanFloorClick(e))):this.props.mainComponentThis.floorplan3DComponent.current||this.props.mainComponentThis.openFloorParametersRightBox()},this.state={floorplanFloors:[],selectedFloor:null,targetSwitchFloor:null,targetDeleteFloor:null},this.setFloorplanFloorsData=this.setFloorplanFloorsData.bind(this),this.setSelectedFloorplanFloor=this.setSelectedFloorplanFloor.bind(this),this.getSelectedFloorplanFloor=this.getSelectedFloorplanFloor.bind(this),this.getTargetSwitchFloor=this.getTargetSwitchFloor.bind(this),this.getTargetDeleteFloor=this.getTargetDeleteFloor.bind(this),this.onFloorplanFloorClick=this.onFloorplanFloorClick.bind(this)}render(){const{floorplanFloors:e,selectedFloor:t}=this.state;return(0,l.jsx)("div",{ref:this.props.containerRef,className:"floorplan-floors-buttons-container",children:t&&e.sort(((e,t)=>e.floorNumber-t.floorNumber)).map((e=>(0,l.jsxs)("div",{className:"panel-option-container",children:[(0,l.jsxs)("div",{className:"option-name-note-container",children:[(0,l.jsxs)("button",{title:"Floor ".concat(e.floorNumber),className:"option-button btn ".concat(t.floorNumber===e.floorNumber?"btn-active":""),style:{margin:"5px 0"},onClick:this.onFloorplanFloorClick(e),children:[(0,l.jsx)("span",{className:"label-span",children:"Floor\xa0"}),(0,l.jsx)("span",{children:e.floorNumber})]}),(0,l.jsx)("div",{className:"floor-info",children:(0,l.jsx)(ss,{indoorPanelExplanationBox:this.props.mainComponentThis.panelFloorNoteExplanationBox,infoText:lo(e)})})]}),(0,l.jsx)("a",{href:"https://app.klet3d.com/floorplan/".concat(this.props.mainComponentThis.getFloorplanID()),target:"_blank",rel:"noreferrer",style:{textDecoration:"none",visibility:"hidden"},children:(0,l.jsx)("button",{className:"btn btn-default action-icon-button",title:"Delete floor ".concat(e.floorNumber),children:(0,l.jsx)(Kp.Z,{})})})]},e.floorNumber)))})}}const fx=gx;class bx extends o.Component{constructor(){super(),this.setFloorNumber=e=>{this.numberInputRef.current.setValue(e),this.numberInputRef.current.setInitialValue(e),this.setState({floorNumberError:null})},this.state={floorNumberError:null},this.numberInputRef=o.createRef(),this.setFloorNumber=this.setFloorNumber.bind(this)}render(){return(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"parameter-title",children:"FLOOR NUMBER"}),(0,l.jsx)("div",{className:"parameter-input-container",children:(0,l.jsxs)(xs,{children:[(0,l.jsx)(as,{ref:this.numberInputRef,disabled:!0,placeholder:"Floor number",allowEmpty:!0,inputStep:1,inputMin:0,inputMax:300}),this.state.floorNumberError&&(0,l.jsx)("div",{className:"form-control feedback",children:this.state.floorNumberError})]})})]})}}const wx=bx;class Cx extends o.Component{constructor(){super(),this.setFloorNoteValue=e=>{this.setState({value:e})},this.state={value:""},this.setFloorNoteValue=this.setFloorNoteValue.bind(this)}render(){return(0,l.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,l.jsx)("h3",{className:"parameter-title",children:"FLOOR NOTE"}),(0,l.jsx)("div",{className:"parameter-input-container",children:(0,l.jsx)("textarea",{disabled:!0,style:{fontFamily:"inherit"},placeholder:"Insert floor notes",className:"form-control input",value:this.state.value,type:"text"})})]})}}const xx=Cx;class yx extends o.Component{constructor(){super(),this.getCheckedStatus=()=>this.state.showFloorDrawingHelper,this.onFloorDrawingHelperChange=()=>{this.state.showFloorDrawingHelper?fi(this.props.mainComponentThis.boxFloorDrawingHelper.current,this.props.mainComponentThis.othersTimeout,null,!1):(this.props.mainComponentThis.drawUnderlyingFloorDrawingHelper(this.props.mainComponentThis.floorplanFloorsPanelBoxRef.current.getSelectedFloorplanFloor()),gi(this.props.mainComponentThis.boxFloorDrawingHelper.current,this.props.mainComponentThis.othersTimeout,null,"inline",!1)),this.setState({showFloorDrawingHelper:!this.state.showFloorDrawingHelper})},this.state={showFloorDrawingHelper:!0},this.onFloorDrawingHelperChange=this.onFloorDrawingHelperChange.bind(this),this.getCheckedStatus=this.getCheckedStatus.bind(this)}render(){return(0,l.jsxs)("div",{className:"floor-drawing-helper-container",children:[(0,l.jsxs)("div",{className:"label-container",children:[(0,l.jsx)("h3",{className:"parameter-title",children:"UNDERLYING FLOOR"}),(0,l.jsx)(ss,{infoText:"Show or hide the floor below as a drawing guide",explanationInfoBoxStyles:{left:-150,width:130,zIndex:1}})]}),(0,l.jsx)("div",{className:"switch-container parameter-input-container",children:(0,l.jsx)(Es.Z,{theme:Xs,children:(0,l.jsx)(Ys.Z,{checked:this.state.showFloorDrawingHelper,onChange:this.onFloorDrawingHelperChange})})})]})}}const Sx=yx;class _x extends o.Component{constructor(){super(),this.MIN_REPEAT_TIMES=5,this.MAX_REPEAT_TIMES=5,this.NUMBER_OF_STEPS=40,this.MIN_REPEAT_VALUE=1/this.MIN_REPEAT_TIMES,this.MAX_REPEAT_VALUE=1*this.MAX_REPEAT_TIMES,this.STEP_VALUE=Math.round((this.MAX_REPEAT_VALUE-this.MIN_REPEAT_VALUE)/this.NUMBER_OF_STEPS*10)/10,this.onManualTextureToggleChange=e=>{const t=e.target.checked?1:0;this.props.onRepeatChangeCallback&&this.props.onRepeatChangeCallback(t,this.props.roomFloorTypesSelectionRef.current.getSelectedItem()),this.setValue(t)},this.onTextureRepeatCountChange=e=>{const t=parseFloat(e);this.props.onRepeatChangeCallback&&this.props.onRepeatChangeCallback(t,this.props.roomFloorTypesSelectionRef.current.getSelectedItem()),this.setValue(t)},this.state={floorTextureRepeatCount:void 0},this.repeatSliderInputRef=o.createRef(),this.repeatSliderComponentRef=o.createRef()}getValue(){return this.state.floorTextureRepeatCount}setValue(e){this.setState({floorTextureRepeatCount:e}),this.repeatSliderInputRef.current.value=e,this.repeatSliderComponentRef.current.inputNumberComponentRef.current.setValue(e),this.props.mainComponentThis.saveNeeded=!0,this.props.mainComponentThis.save(!1,!0)}render(){return(0,l.jsxs)("div",{children:[(0,l.jsx)(fs,{disabled:!0,infoLabel:!0,infoLabelTitle:"Set texture size",infoText:"Manually set the texture size.",explanationInfoBoxStyles:{left:-120,width:100,zIndex:1},checked:!!this.state.floorTextureRepeatCount,onChange:this.onManualTextureToggleChange}),(0,l.jsx)("div",{style:{display:[0,void 0].includes(this.state.floorTextureRepeatCount)?"none":"block"},children:(0,l.jsx)(cr,{disabled:!0,ref:this.repeatSliderComponentRef,sliderInputRef:this.repeatSliderInputRef,minValue:this.MIN_REPEAT_VALUE,maxValue:this.MAX_REPEAT_VALUE,sliderStep:this.STEP_VALUE,onSliderValueChanged:this.onTextureRepeatCountChange})})]})}}const Dx=_x;var vx=i(1317);class Tx extends o.Component{constructor(){super(),this.setFloorParametersForRoom=e=>{let t=e.roomFloorType;t||(t="none"!==e.floorTexture?"pattern":"default"),this.selectedRoom=e,this.setState({roomFloorTypeItem:{...$,value:$.options.find((e=>e.value===t))}},(()=>{this.setFloorParametersData()}))},this.setFloorParametersData=()=>{switch(this.state.roomFloorTypeItem.value.value){case"default":case"none":break;case"pattern":this.roomFloorTypesSelectionRef.current.setSelectedItem(this.selectedRoom.floorTexture),this.roomFloorTexturesRepeatComponentRef.current.setValue(this.selectedRoom.floorTextureRepeatCount);break;case"color":this.setState({floorColorItem:{value:this.selectedRoom.floorColor||this.defaultRoomFloorColor}},(()=>this.onFloorColorChange()({target:{value:this.state.floorColorItem.value}})));break;default:vx.error("Invalid room floor type")}},this.onRoomFloorTypeItemClick=()=>e=>{this.setState({roomFloorTypeItem:{...this.state.roomFloorTypeItem,value:e.target.value}},(()=>{this.selectedRoom.roomFloorType=this.state.roomFloorTypeItem.value.value,this.setFloorParametersData(),this.props.mainComponentThis.save(!1,!0)}))},this.onFloorColorChange=()=>e=>{const t=e.target.value;this.setState({floorColorItem:{...this.state.floorColorItem,value:t}})},this.state={roomFloorTypeItem:null,floorColorItem:null},this.roomFloorTypesSelectionRef=o.createRef(),this.roomFloorTexturesRepeatComponentRef=o.createRef(),this.defaultRoomFloorColor="#ffffff",this.selectedRoom=null,this.setFloorParametersForRoom=this.setFloorParametersForRoom.bind(this),this.setFloorParametersData=this.setFloorParametersData.bind(this),this.onRoomFloorTypeItemClick=this.onRoomFloorTypeItemClick.bind(this),this.onFloorColorChange=this.onFloorColorChange.bind(this)}render(){const{roomFloorTypeItem:e,floorColorItem:t}=this.state;return(0,l.jsxs)(xs,{label:"Room floor",containerClasses:"room-floor-textures-form-group-container",children:[e&&(0,l.jsx)(us,{formGroupStyle:{marginBottom:0},disabled:!0,selectInput:!0,fullWidth:!0,explanationInfoBoxStyles:{left:-120,width:100,zIndex:1},item:e,onChange:this.onRoomFloorTypeItemClick},this.props.mainComponentThis.selectedRoomId),(()=>{switch(e&&e.value.value){case"pattern":return(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{ref:this.props.mainComponentThis.roomFloorTexturesRepeatComponentContainerRef,children:(0,l.jsx)(Dx,{ref:this.roomFloorTexturesRepeatComponentRef,onRepeatChangeCallback:this.props.mainComponentThis.onRoomFloorTextureRepeatChange,mainComponentThis:this.props.mainComponentThis})}),(0,l.jsx)("div",{ref:this.props.mainComponentThis.roomFloorTexturesComponentContainerRef,className:"room-floor-textures-component-container",children:(0,l.jsx)(Jg,{ref:this.roomFloorTypesSelectionRef,disabled:!0,items:qt,onClickCallback:this.props.mainComponentThis.onRoomFloorTextureChange})})]});case"color":return t?(0,l.jsx)(vs,{disabled:!0,item:t,containerStyle:{marginTop:"0.5rem"},onChange:this.onFloorColorChange,boxContainer:this.props.mainComponentThis.roomTools.current}):null;default:return null}})()]})}}const jx=Tx;var Ox=i(1317);class Ix extends o.Component{constructor(e){super(e),this.setShow3DStatus=(e,t)=>this.setState({show3D:e},(()=>t&&t())),this.onFloorplanDataLoadCallback=e=>{Ox.log("ucitavaj"),this.floorplanFloorsData=e[0].plan_object,this.floorplanFloorsData.forEach((e=>{Object.hasOwn(e,"floorID")||(e.floorID=(0,fn.v4)()),Object.hasOwn(e,"floorHeight")||(e.floorHeight=e.wallHeight),e.wallData.forEach((t=>{Object.hasOwn(t,"wallHeight")?Object.hasOwn(t,"startHeight")&&Object.hasOwn(t,"endHeight")||(t.startHeight=t.endHeight=t.wallHeight):t.wallHeight=t.startHeight=t.endHeight=e.floorHeight}))})),this.floorplanFloorsPanelBoxRef.current.setFloorplanFloorsData(this.floorplanFloorsData,(()=>{this.setFloorplanEnvironmentSettings(e[0].plan_object,e[0].plan_general),this.determineBoxPlanNameValue("set_name",e[0].plan_name),this.loadFloorplanFloor(this.getLowestFloorData()),this.floorplanGeneral=e[0].plan_general;const t=this.getFloorplanWallsBBoxCoords();this.floorplanLastSavedTopLeftSvgCoords={x:t.minX,y:t.minY},this.addOnDrawingControlerInstance.view2DController.onFloorplanDataLoadControllerCallback(e)}))},this.state={responseError:null,customResponseError:null,show3D:!0},this.mounted=!1,this.useGenerateHMWebWorkers="undefined"!==typeof Worker&&"undefined"!==typeof OffscreenCanvas,this.measureSystemContext={userUnit:this.props.userUnit},this.WALLS=[],this.ORPHANWALLS=[],this.OBJDATA=[],this.ROOM=[],this.HISTORY=[],this.userAddedObjects=[],this.windowModels=[...Ye],this.doorModels=[...Xe],this.lightModels=[...Ze],this.bathroomModels=[...Je],this.bedroomModels=[...Qe],this.exteriorModels=[...$e],this.kitchenModels=[...et],this.livingRoomModels=[...tt],this.otherModels=[...it],this.officeModels=[...ot],this.staircaseModels=[...st],this.vehiclesModels=[...nt],this.fanModels=[...at],this.coverModels=[...rt],this.presenceModels=[...lt],this.hvacModels=[...ht],this.cameraModels=[...ct],this.screenModels=[...pt],this.furnitureModels=[...Gt],this.windowsDetails={...vt},this.doorsDetails={...Tt},this.lightsDetails={...jt},this.bathroomDetails={...Ot},this.bedroomDetails={...It},this.exteriorDetails={...Pt},this.kitchenDetails={...kt},this.livingRoomDetails={...Ft},this.fanDetails={...Mt},this.coverDetails={...At},this.presenceDetails={...Rt},this.hvacDetails={...Lt},this.cameraDetails={...Bt},this.screenDetails={...Wt},this.otherDetails={...Vt},this.officeDetails={...Nt},this.staircaseDetails={...Et},this.vehiclesDetails={...Ht},this.furnitureDetails={...Ut},this.furnitureDimensions={...zt},this.folderNameToModelsMapping={window:{title:"Windows",models:this.windowModels,details:this.windowsDetails},door:{title:"Doors",models:this.doorModels,details:this.doorsDetails},light:{title:"Lights",models:this.lightModels,details:this.lightsDetails},fan:{title:"Fans",models:this.fanModels,details:this.fanDetails},cover:{title:"Covers",models:this.coverModels,details:this.coverDetails},presence:{title:"Presence",models:this.presenceModels,details:this.presenceDetails},hvac:{title:"HVAC",models:this.hvacModels,details:this.hvacDetails},camera:{title:"Camera",models:this.cameraModels,details:this.cameraDetails},screen:{title:"Screen",models:this.screenModels,details:this.screenDetails},livingRoom:{title:"Living room",models:this.livingRoomModels,details:this.livingRoomDetails,isFurnitureCategory:!0},kitchen:{title:"Kitchen",models:this.kitchenModels,details:this.kitchenDetails,isFurnitureCategory:!0},bedroom:{title:"Bedroom",models:this.bedroomModels,details:this.bedroomDetails,isFurnitureCategory:!0},office:{title:"Office",models:this.officeModels,details:this.officeDetails,isFurnitureCategory:!0},bathroom:{title:"Bathroom",models:this.bathroomModels,details:this.bathroomDetails,isFurnitureCategory:!0},staircase:{title:"Staircase",models:this.staircaseModels,details:this.staircaseDetails,isFurnitureCategory:!0},exterior:{title:"Exterior",models:this.exteriorModels,details:this.exteriorDetails,isFurnitureCategory:!0},other:{title:"Other",models:this.otherModels,details:this.otherDetails,isFurnitureCategory:!0},vehicles:{title:"Vehicles",models:this.vehiclesModels,details:this.vehiclesDetails,isFurnitureCategory:!0}},this.wallIdCounter=0,this.roomIdCounter=0,this.drag="off",this.action=0,this.magnetic=0,this.construc=0,this.wallDrawingStartClick=!1,this.nearWallNodeRange=10,this.selectModeNearWallNodeRange=1,this.Rcircle=4,this.wallBinderBallsRadius=4,this.wallBinderPulsingBallRadius=5,this.nearWallBinderRadius=6,this.nearWallConstrucRadius=12,this.wallThicknessMinValue="metric"===this.measureSystemContext.userUnit?3:1,this.wallThicknessMaxValue="metric"===this.measureSystemContext.userUnit?50:20,this.wallWidthInputStep=.1,this.wallWidthDecimalPrecision=-Math.log10(this.wallWidthInputStep),this.wallLengthInputStep="metric"===this.measureSystemContext.userUnit?.01:.1,this.wallLengthDecimalPrecision=-Math.log10(this.wallLengthInputStep),this.itemDimensionsInputStep="metric"===this.measureSystemContext.userUnit?1:.1,this.itemDimensionsDecimalPrecision=-Math.log10(this.itemDimensionsInputStep),this.roomSurfaceInputStep=.1,this.roomSurfaceDecimalPrecision=-Math.log10(this.roomSurfaceInputStep),this.isPointOnWallDecimalPrecision=8,this.mode="select_mode",this.modeOption=void 0,this.selectModeRightClickDraggOn=!1,this.taille_w=null,this.taille_h=null,this.offset=null,this.grid=20,this.showRib=!0,this.meter=30,this.floorplan3DScaleFactor=3,this.imperialSystemSquareFeetSize=3,this.wallThicknessDefaultValue="metric"===this.measureSystemContext.userUnit?16:6,this.wallHeightDefaultValue="metric"===this.measureSystemContext.userUnit?2.6*this.meter:$i(120,this.measureSystemContext.userUnit,"inch","meter",!0)*this.meter,this.groundColorDefaultValue="#8b4513",this.clockVisibilityDefaultValue="visible",this.skyColorDefaultType="dynamic",this.skyColorDefaultValue="#000000",this.ambientLightIntensityDefaultValue=2,this.wallHeightDecimalPrecision=0,this.wallHeightMaxValue="metric"===this.measureSystemContext.userUnit?5e3:2e3,this.floorHeight=null,this.floorThickness=.05*this.meter,this.roomFloorVerticalOffset=3,this.groundColor=null,this.skyColor=null,this.skyColorType=null,this.ambientLightIntensity=null,this.clockVisibility=null,this.floorNumber=null,this.floorNote="",this.wallSize=$i(this.wallThicknessDefaultValue,this.measureSystemContext.userUnit,"metric"===this.measureSystemContext.userUnit?"centimeter":"inch","meter",!0)*this.meter,this.grid_snap="off",this.colorWall="#666",this.pox=0,this.poy=0,this.touchZoomDollyStartDistance=null,this.touchZoomDollyEndDistance=null,this.touchStartPageCoordinates=null,this.touchZoomTouches=[],this.zoomTouchFocusPoint=null,this.wallStartX=0,this.wallStartY=0,this.smallScreenPixelSize=600,this.smallScreenMinimizedPanelSize=50,this.smallScreenMaximizedPanelSize=150,this.bigScreenMinimizedPanelSize=100,this.bigScreenMaximizedPanelSize=200,this.rightBoxWidth=250,this.width_viewbox=null,this.height_viewbox=null,this.ratio_viewbox=null,this.originX_viewbox=0,this.originY_viewbox=0,this.defaultZoomLevel=9,this.zoom=this.defaultZoomLevel,this.zoomXMove=200,this.zoomXMoveOnMapScaleFactor=20,this.zoomXView=50,this.maxZoomOutLevel=-1/0,this.maxZoomInLevelDefaultValue=15,this.maxZoomInLevel=this.maxZoomInLevelDefaultValue,this.zoomFactor=1,this.globalArea=null,this.snap=null,this.lineIntersectionP=null,this.sizeText=[],this.showAllSizeStatus=0,this.editor=null,this.qSVG=null,this.binder=null,this.selectedBinder=null,this.windowRotationAxisDirectionGraph=null,this.windowSingleAxisRotationOptions=[{rotationAxis:"start",rotationDirection:"up"},{rotationAxis:"end",rotationDirection:"up"},{rotationAxis:"start",rotationDirection:"down"},{rotationAxis:"end",rotationDirection:"down"}],this.windowDoubleAxisRotationOptions=[{rotationAxis:"start",rotationDirection:"up"},{rotationAxis:"start",rotationDirection:"down"}],this.cameraCoverageAreaGraph=null,this.presenceAreaGraph=null,this.presenceAreaDetectionObjectsDefaultLimit=3,this.selectedRoomId=null,this.equation1=null,this.equation2=null,this.equation3=null,this.Rooms=null,this.wallEndConstruc=!1,this.lengthTemp=null,this.wallListRun=[],this.wallListObj=[],this.equationFollowers=[],this.equationsObj=[],this.x=void 0,this.y=void 0,this.distX=null,this.distY=null,this.multiChecked=!0,this.showBoxGridChecked=!0,this.decimalPrecision=12,this.boxWallCoordinates=null,this.exportPngShowGrid=!1,this.exportPngShowMeasures=!1,this.lastSavedObject=null,this.exportPngResolutionScale=4,this.selectedWallMaterial="Unknown",this.modalTimeout=500,this.othersTimeout=200,this.floorplanGeneral=null,this.floorplanFloorsData=[],this.hiddenFloorplanFloors3D=[],this.floorplanLastSavedTopLeftSvgCoords=null,this.testLocationNumberDefaultSizes={radius:this.meter/2,fontSize:15},this._map=null,this.mapCornersGpsCoords=[],this.mapCornerCoordsDebug=!1,this.addOnDrawingControlerInstance=null,this.klet3DLastSavedData=[],this.sensorHeatmapLastSavedData=[],this.klet3DGeneral={},this.SPOT_DISTANCE_MAX=1e3,this.wallItemObjOriginalWidth=null,this.preventFloorParametersOpening=!1,this.linRef=o.createRef(),this.mainContainerRef=o.createRef(),this.mapLayer2DContainerRef=o.createRef(),this.floorplan3DContainerRef=o.createRef(),this.showFloorplanOnMapContainerRef=o.createRef(),this.floorplan3DComponent=o.createRef(),this.boxPlanName=o.createRef(),this.boxFloorplanImage=o.createRef(),this.boxFloorDrawingHelper=o.createRef(),this.boxSurface=o.createRef(),this.boxRoom=o.createRef(),this.boxWall=o.createRef(),this.boxArea=o.createRef(),this.boxText=o.createRef(),this.boxDebug=o.createRef(),this.boxCarpentry=o.createRef(),this.boxGridRef=o.createRef(),this.boxScale=o.createRef(),this.boxRib=o.createRef(),this.boxBind=o.createRef(),this.wallMaterialsAsyncPatternRef=o.createRef(),this.furnitureAsyncPatternRef=o.createRef(),this.furnitureDefsContainerRef=o.createRef(),this.roomTextureContainerRef=o.createRef(),this.roomTexturePreviewContainerRef=o.createRef(),this.uploadFloorplanPanelButtonContainer=o.createRef(),this.boxInfo=o.createRef(),this.wallWidthValue=o.createRef(),this.wallLengthValue=o.createRef(),this.freeItemToolsRef=o.createRef(),this.freeItemTitleRef=o.createRef(),this.freeItemDimensionsRef=o.createRef(),this.freeItemPositionsRef=o.createRef(),this.freeItemRotationsRef=o.createRef(),this.freeCameraCoverageOptionsContainerRef=o.createRef(),this.freeItemMaterialsRef=o.createRef(),this.freeItemChangeTypeRef=o.createRef(),this.freeItemMaterialsComponentRef=o.createRef(),this.freeItemTextToolsRef=o.createRef(),this.freeItemTypesSelectionBoxRef=o.createRef(),this.cameraCoverageOptionsActiveRef=o.createRef(),this.sensorOtherToolsRef=o.createRef(),this.sensorOtherToolsTitleRef=o.createRef(),this.sensorOtherToolsContainerRef=o.createRef(),this.presenceAreaToolsRef=o.createRef(),this.presenceAreaToolsTitle=o.createRef(),this.presenceAreaToolsContainerRef=o.createRef(),this.presenceAreaOptionsRef=o.createRef(),this.presenceAreaOptionsContainerRef=o.createRef(),this.textItemFontSizeValue=o.createRef(),this.itemRotationValue=o.createRef(),this.labelBox=o.createRef(),this.textLayerModalContent=o.createRef(),this.showFloorplanNoWallsErrorModal=o.createRef(),this.selectedFloorNoWallsErrorModal=o.createRef(),this.panel=o.createRef(),this.showRibRef=o.createRef(),this.showBoxGrid=o.createRef(),this.showMapLayer2DInputRef=o.createRef(),this.roomTools=o.createRef(),this.wallTools=o.createRef(),this.floorParameters=o.createRef(),this.roomName=o.createRef(),this.wallItemToolsRef=o.createRef(),this.wallItemToolsTitle=o.createRef(),this.wallItemDimensionsRef=o.createRef(),this.wallItemMirroredRef=o.createRef(),this.wallItemPositionsRef=o.createRef(),this.wallItemMaterialsRef=o.createRef(),this.wallItemMaterialsComponentRef=o.createRef(),this.activeItemRotationsRef=o.createRef(),this.activeItemPositionsRef=o.createRef(),this.roomNameSelectRef=o.createRef(),this.wallMaterialRef=o.createRef(),this.wallAlwaysHideRef=o.createRef(),this.wallCustomHeightRef=o.createRef(),this.scaleVal=o.createRef(),this.selectMode=o.createRef(),this.roomMode=o.createRef(),this.layerMode=o.createRef(),this.layerList=o.createRef(),this.floorplanImageTools=o.createRef(),this.floorplanImagePattern=o.createRef(),this.floorplanImage=o.createRef(),this.areaValue=o.createRef(),this.roomSurface=o.createRef(),this.doorHinge=o.createRef(),this.wallLength=o.createRef(),this.wallWidth=o.createRef(),this.rightControlsBox=o.createRef(),this.panelControl=o.createRef(),this.roomNameDropdownMenu=o.createRef(),this.uploadFloorplanImageMode=o.createRef(),this.loadingComponentContainer=o.createRef(),this.uploadImageFloorplanSettingsIconRef=o.createRef(),this.uploadFloorplanImageStatusContainerRef=o.createRef(),this.uploadImageFloorplanHideRef=o.createRef(),this.uploadImageFloorplanShowRef=o.createRef(),this.uploadFloorplanImageErrorModal=o.createRef(),this.uploadFloorplanImageErrorMessageRef=o.createRef(),this.wallDrawingAltHint=o.createRef(),this.wallWidthNumberSliderInput=o.createRef(),this.floorHeightInputRef=o.createRef(),this.uploadFloorplanImageToolsRef=o.createRef(),this.layersListArrowRef=o.createRef(),this.mapStylesChangeRef=o.createRef(),this.showMapLayer2D3DRef=o.createRef(),this.gridSvgElementRef=o.createRef(),this.windowRotationOptionsContainerRef=o.createRef(),this.wallItemChangeTypeRef=o.createRef(),this.wallCameraCoverageOptionsContainerRef=o.createRef(),this.wallItemTypesSelectionBoxRef=o.createRef(),this.roomFloorTexturesComponentContainerRef=o.createRef(),this.roomFloorTexturesRepeatComponentContainerRef=o.createRef(),this.wallItemHideWithWallRef=o.createRef(),this.freeItemMirroredRef=o.createRef(),this.bindingWallItemContainerRef=o.createRef(),this.bindingPopupRightBoxContainerRef=o.createRef(),this.sensorsHeatmapSettingsPopupContainerRef=o.createRef(),this.bindingFreeItemContainerRef=o.createRef(),this.bindingRightBoxComponentRef=o.createRef(),this.floorplanFloorsPanelBoxContainerRef=o.createRef(),this.floorplanFloorsPanelBoxRef=o.createRef(),this.panelFloorNoteExplanationBox=o.createRef(),this.floorNoteInputRef=o.createRef(),this.floorNumberInputRef=o.createRef(),this.floorDrawingHelperOptionsRef=o.createRef(),this.roomFloorParametersRef=o.createRef(),this.panelInfoExplanationBox=o.createRef(),this.onShow3DClick=kf.bind(this),this.resetHistory=Xm.bind(this),this.save=Jm.bind(this),this.determineBoxPlanNameValue=Zm.bind(this),this.load=Qm.bind(this),this.removeSelectedBinder=Pm.bind(this),this.removeBinder=km.bind(this),this.removeWindowRotationAxisDirectionBinder=Fm.bind(this),this.removeCameraCoverageAreaBinder=Mm.bind(this),this.removePresenceAreaBinder=Am.bind(this),this.exportFloorplanPngOnLoadCallback=qm.bind(this),this.downloadSvg=Km.bind(this),this.onShowBoxGridClick=Hf.bind(this),this.onShowOnMapLayer2DClick=zf.bind(this),this.onShowRibClick=Ef.bind(this),this.onRoomToolsCloseClick=Gf.bind(this),this.onZoomButonClick=Uf.bind(this),this.onFloorplanGpsCoordsClick=qf.bind(this),this.onFloorHeightInputChange=Kf.bind(this),this.zoom_maker=Sm.bind(this),this.handleMouseMove=An.bind(this),this.handleMouseDown=Wn.bind(this),this.handleMouseUp=Ln.bind(this),this.handleContextMenu=Gn.bind(this),this.handleMouseWheel=Vn.bind(this),this.handleTouchStart=Nn.bind(this),this.handleTouchMove=Hn.bind(this),this.handleTouchEnd=zn.bind(this),this.textAndUploadFloorplanImageBinderCreation=Tn.bind(this),this.roomModeBinderCreation=jn.bind(this),this.selectModeObj2DWallNodeWallSegmentBinderCreation=On.bind(this),this.createWindowRotationPropertiesBinder=In.bind(this),this.createCameraCoverageArea2DVisualization=Pn.bind(this),this.createPresenceArea2DVisualization=kn.bind(this),this.inWallonWallObjectBinderCreation=Du.bind(this),this.inWallonWallObjectBinderAngleCalculation=xu.bind(this),this.inWallonWallObjectBinderJoinToWall=yu.bind(this),this.setInWallOnWallObjectWidthToWallWidth=Su.bind(this),this.inWallonWallObjectForceJoinToWall=_u.bind(this),this.floorFreeObjectPositionValidation=vu.bind(this),this.openWallItemToolsRightBox=Tu.bind(this),this.openFreeItemToolsRightBox=ju.bind(this),this.openPresenceAreaToolsRightBox=Ou.bind(this),this.determineObj2DInfoTexts=Iu.bind(this),this.openSensorOtherToolsRightBox=Pu.bind(this),this.convertValueToSvgUnits=ku.bind(this),this.convertSvgToValueUnits=Fu.bind(this),this.updateSelectedRoomFill=Mu.bind(this),this.handleObj2DMouseUp=Au.bind(this),this.setFloorplanEnvironmentSettings=Nu.bind(this),this.setBoxWallCoordinatesValues=Eu.bind(this),this.resetSelectedObjectMaterial=Hu.bind(this),this.getFloorplanGpsLatitude=zu.bind(this),this.getFloorplanGpsLongitude=Gu.bind(this),this.getFloorplanGroundColorClockVisibilityValue=Ru.bind(this),this.setFloorplanGroundColorClockVisibilityValues=Lu.bind(this),this.getSkyColorTypeColorValue=Bu.bind(this),this.setSkyColorTypeColorValue=Wu.bind(this),this.setAmbientLightIntensityValue=Vu.bind(this),this.getKlet3DBinderParamsDefaultValues=Uu.bind(this),this.getKlet3DBinderObjectLevelParams=qu.bind(this),this.resetKlet3DBinderParams=Ku.bind(this),this.isWindowObject=Yu.bind(this),this.isDoorObject=Xu.bind(this),this.isDoorWindowObject=Zu.bind(this),this.isLightObject=Ju.bind(this),this.isStaircaseObject=Qu.bind(this),this.isFanObject=$u.bind(this),this.isCoverObject=eg.bind(this),this.isPresenceBinaryObject=tg.bind(this),this.isPresenceAreaObject=ig.bind(this),this.isHVACObject=og.bind(this),this.isACObject=sg.bind(this),this.isChristmasTreeObject=ng.bind(this),this.isCameraObject=ag.bind(this),this.isScreenObject=rg.bind(this),this.isFurnitureObject=lg.bind(this),this.isSameBindedObjectType=hg.bind(this),this.getObjectClass=cg.bind(this),this.getObjectFolderName=mg.bind(this),this.getObjectItemType=ug.bind(this),this.createFurniturePatternImagePathData=dg.bind(this),this.getFurniturePatternImagePaths=pg.bind(this),this.createUserAddedObjectModelsDetailsDimensionsData=gg.bind(this),this.setKlet3DDataParamValue=bg.bind(this),this.getKlet3DDataParamValue=wg.bind(this),this.centerAndShowWholeFloor=wm.bind(this),this.centerAndShowFloorplanAndUploadedFloorplanImage=_m.bind(this),this.isOverMaxZoomIn=Dm.bind(this),this.isOverMaxZoomOut=vm.bind(this),this.determineMaxZoomInLevel=Tm.bind(this),this.setScaleValueWidth=jm.bind(this),this.centerAndShowWholeBoxOperations=bm.bind(this),this.showWholeBoxZoom=fm.bind(this),this.setZoomParameters=ym.bind(this),this.zoomToSpecificLevel=xm.bind(this),this.calcul_snap=ou.bind(this),this.calcul_snap_inverse=su.bind(this),this.intersectionOff=Hg.bind(this),this.intersection=zg.bind(this),this.hideAllSize=Vg.bind(this),this.inWallRib=Ng.bind(this),this.rib=Eg.bind(this),this.cursor=nu.bind(this),this.razButton=Hm.bind(this),this.foncButton=zm.bind(this),this.onLayerModeClick=Lm.bind(this),this.onRoomModeClick=Bm.bind(this),this.onSelectModeClick=Wm.bind(this),this.onUploadFloorplanImageClick=Nm.bind(this),this.handleKeyDown=Nf.bind(this),this.handleWindowResize=Vf.bind(this),this.hideRightBox=cu.bind(this),this.showHideLeftRightBoxes=du.bind(this),this.isSmallScreen=uu.bind(this),this.isPanelMaximized=mu.bind(this),this.onWallToolsCloseClick=Bf.bind(this),this.onWallItemToolsCloseClick=Wf.bind(this),this.onFreeItemToolsCloseClick=Rf.bind(this),this.onFloorParametersCloseClick=Lf.bind(this),this.translateRightBox=ru.bind(this),this.openFloorParametersRightBox=lu.bind(this),this.onPanelControlClick=Af.bind(this),this.minimizePanel=Ff.bind(this),this.maximizePanel=Mf.bind(this),this.hideActiveRightBox=au.bind(this),this.hideSubItems=Em.bind(this),this.isFloorplanEmpty=eu.bind(this),this.isFloorplanNoWalls=tu.bind(this),this.onUploadedFloorplanImageStatusChangeClick=Vm.bind(this),this.resizeAndKeyDownEventListenersControl=Pf.bind(this),this.setWallToolsValues=Sf.bind(this),this.createRoomPath=Om.bind(this),this.createRoomBinderPath=Im.bind(this),this.setRoomToolsValues=yf.bind(this),this.setWallItemToolsValue=Df.bind(this),this.setFreeItemToolsValue=_f.bind(this),this.setPresenceAreaToolsValue=vf.bind(this),this.componentWillUnmountCustomCallback=null,this.carpentryCalc=hu.bind(this),this.showWholeBoxZoomOperations=Cm.bind(this),this.getBoxDimensionsForCurrentZoom=mm.bind(this),this.boxZoomSimulation=gm.bind(this),this.boxZoomSimulationSetZoomParameters=um.bind(this),this.getFloorplanID=gu.bind(this),this.getFloorplanName=fu.bind(this),this.setSvgViewBoxes=bu.bind(this),this.handleRightControlsBoxResize=pu.bind(this),this.createWindowRotationSvg=wu.bind(this),this.setWindowObjectRotationProperties=Cu.bind(this),this.calculateGpsCoordinatesForNewSvgPoint=xc.bind(this),this.handleMapDrag=_c.bind(this),this.handleMapZoomChange=Dc.bind(this),this.onMapContextLoadedCallback2D=vc.bind(this),this.onMapCameraOptionsSetFinishCallback=Tc.bind(this),this.calculateMapCornersCoordinatesFromTopLeftPoint=Sc.bind(this),this.alignFloorplanTopLeftCornerOnMap=yc.bind(this),this.getCurrentMapCornersGpsCoords=jc.bind(this),this.handleMapLayerWindowResize=Oc.bind(this),this.coordinateFloorplanSvgZoomWithMap=Ic.bind(this),this.getBindedObjectKlet3DBinderData=Xf.bind(this),this.setShow3DStatus=this.setShow3DStatus.bind(this),this.onFloorplanDataLoadCallback=this.onFloorplanDataLoadCallback.bind(this),this.handleFloorplanFloorClick=Yf.bind(this),this.loadFloorplanFloor=$m.bind(this),this.getLowestFloorData=Cg.bind(this),this.getHighestFloorData=xg.bind(this),this.getFloorStartElevation=yg.bind(this),this.setFloorHeightInputValue=Sg.bind(this),this.setFloorParametersValues=_g.bind(this),this.createObj2DClassInstanceFromObj=Dg.bind(this),this.getFloorplanWallsBBoxCoords=vg.bind(this),this.getFloorplanObjectsBBoxCoords=Tg.bind(this),this.getFloorplanWallsObjectsBBoxCoords=jg.bind(this),this.setWallsChildParentValues=Og.bind(this),this.drawUnderlyingFloorDrawingHelper=Ig.bind(this),this.getObj2DFloorNumber=Pg.bind(this),this.getFloorplanObj2Ds=kg.bind(this),this.getObject2DById=Fg.bind(this),this.setDoorObject2DHinge=Mg.bind(this),this.getPresenceAreaObjectDefaultValues=Ag.bind(this),this.getWallItemObj2DTargetWall2D=Rg.bind(this),this.getOnWallItemDepthOffsetParams=Lg.bind(this),this.getInWallItemDepthOffsetParams=Bg.bind(this)}componentDidMount(){this.mounted=!0,this.qSVG=new wn(this),this.editor=new _n(this.boxWall,this.boxArea,this.panel,this.boxRoom,this.boxSurface,this.boxRib,this.areaValue,this.boxScale,this),this.linRef.current.addEventListener("wheel",(e=>{e.preventDefault(),this.handleMouseWheel(e)}),{passive:!1}),this.linRef.current.addEventListener("touchstart",(e=>{e.preventDefault(),this.handleTouchStart(e,this)}),{passive:!1}),this.linRef.current.addEventListener("touchmove",(e=>{e.preventDefault(),this.handleTouchMove(e,this)}),{passive:!1}),this.linRef.current.addEventListener("touchend",(e=>{e.preventDefault(),this.handleTouchEnd(e,this)}),{passive:!1}),document.getElementsByClassName("header-info-track")[0]&&window.addEventListener("applicationInfoHidden",(()=>{this.offset.top=this.linRef.current.getBoundingClientRect().top,this.offset.scrollY=window.scrollY})),this.resizeAndKeyDownEventListenersControl(!1,!0);let e=this.linRef.current.getBoundingClientRect();this.taille_w=e.width,this.taille_h=e.height,this.offset={left:e.left,top:e.top,scrollY:window.scrollY},this.determineMaxZoomInLevel(),this.width_viewbox=this.taille_w,this.height_viewbox=this.taille_h,this.ratio_viewbox=this.height_viewbox/this.width_viewbox,this.setSvgViewBoxes();const t=()=>requestAnimationFrame((()=>{this.panel.current.style.transform="translateX(200px)",this.panelControl.current.style.transform="translateX(".concat(this.panel.current.style.width,")"),this.state.show3D&&this.panel.current.addEventListener("transitionend",(()=>{this.rightControlsBox.current.style.transform="translateX(-150px)"}),{once:!0})}));this.isSmallScreen()?(this.onPanelControlClick(!1),t()):t(),this.addOnDrawingControlerInstance=new ux(this,this.props.addOnIntegrationType),this.addOnDrawingControlerInstance.initializeController("2D"),this.floorplan3DComponent.current&&this.floorplan3DComponent.current.initialize3DViewController(),s.render((0,l.jsx)(ur,{}),this.loadingComponentContainer.current,(()=>{C.get.call(this,"/klet3d/objects2/".concat(this.props.floorplanID),(e=>{this.userAddedObjects=e,this.userAddedObjects.forEach((e=>this.createUserAddedObjectModelsDetailsDimensionsData(e))),C.get.call(this,"/klet3d/entity/".concat(this.props.floorplanID,"/").concat(this.props.licenseKey),(e=>{Ox.log("Floorplan response data"),Ox.log(e);let t=null;if(0===e.length?t=(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("span",{children:"There is no data for specified floorplan."})," ",(0,l.jsx)("br",{}),(0,l.jsx)("span",{children:"Check floorplanID from add-on configuration and try again."})]}):e[0]&&"expired"===e[0].status&&(t=(0,l.jsx)("span",{children:e[0].info})),t)return this.setState({customResponseError:t}),void s.unmountComponentAtNode(this.loadingComponentContainer.current);this.onFloorplanDataLoadCustomAPICalls?this.onFloorplanDataLoadCustomAPICalls(e):this.onFloorplanDataLoadCallback(e)}))}))}))}componentWillUnmount(){Ox.log("Component will unmount"),this.componentWillUnmountCustomCallback&&this.componentWillUnmountCustomCallback(),this.mounted=!1}render(){const{responseError:e,customResponseError:t}=this.state;return Ox.log("Context",this.measureSystemContext),(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{ref:this.loadingComponentContainer})," ",(0,l.jsx)(es,{responseError:e,customResponseError:t,children:(0,l.jsx)(Ho,{indoorMapping:!0,responseError:e,children:(0,l.jsxs)("div",{ref:this.mainContainerRef,className:"main-container full-height",style:{overflow:"hidden"},children:[(0,l.jsxs)("div",{className:"svg-canvases-container full-height",children:[(0,l.jsx)("div",{ref:this.mapLayer2DContainerRef,className:"map-layer-container"}),(0,l.jsxs)("svg",{ref:this.gridSvgElementRef,className:"grid-svg-element lin full-height",viewBox:"0 0 1100 700",preserveAspectRatio:"xMidYMin slice",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("defs",{children:(0,l.jsx)(ja,{measureSystemContext:this.measureSystemContext,svgMeterUnits:this.meter,imperialSystemSquareFeetSize:this.imperialSystemSquareFeetSize})}),(0,l.jsx)("g",{ref:this.boxGridRef,className:"svgGrid box-grid fade-in",children:(0,l.jsx)("rect",{width:2e4,height:2e4,x:-3500,y:-2e3,fill:"url(#grid)"})})]}),(0,l.jsxs)("svg",{ref:this.linRef,viewBox:"0 0 1100 700",preserveAspectRatio:"xMidYMin slice",xmlns:"http://www.w3.org/2000/svg",className:"lin full-height",onClick:e=>e.preventDefault(),onMouseUp:e=>this.handleMouseUp(e),onMouseDown:e=>this.handleMouseDown(e),onMouseMove:e=>{j(e,(e=>{this.handleMouseMove(e)}),30)()},onContextMenu:e=>this.handleContextMenu(e),children:[(0,l.jsx)(Ba,{floorplanImagePattern:this.floorplanImagePattern,floorplanImage:this.floorplanImage,measureSystemContext:this.measureSystemContext,svgMeterUnits:this.meter,floorplan3DScaleFactor:this.floorplan3DScaleFactor,imperialSystemSquareFeetSize:this.imperialSystemSquareFeetSize,wallMaterialsAsyncPatternRef:this.wallMaterialsAsyncPatternRef,furnitureAsyncPatternRef:this.furnitureAsyncPatternRef,roomTextureContainerRef:this.roomTextureContainerRef,roomTexturePreviewContainerRef:this.roomTexturePreviewContainerRef,mainComponentThis:this}),(0,l.jsx)("g",{className:"boxGrid",style:{opacity:0},children:(0,l.jsx)("rect",{width:2e4,height:2e4,x:-3500,y:-2e3,fill:"url(#grid)"})}),(0,l.jsx)("g",{id:"boxFloorDrawingHelper",ref:this.boxFloorDrawingHelper,className:"box-floor-drawing-helper fade-in"}),(0,l.jsx)("g",{id:"boxFloorplan",ref:this.boxFloorplanImage,className:"box-floorplan fade-in"}),(0,l.jsx)("g",{id:"boxSurface",ref:this.boxSurface}),(0,l.jsx)("g",{id:"boxRoom",ref:this.boxRoom}),(0,l.jsx)("g",{id:"boxWall",ref:this.boxWall}),(0,l.jsx)("g",{id:"boxCarpentry",ref:this.boxCarpentry}),(0,l.jsx)("g",{id:"boxBind",ref:this.boxBind}),(0,l.jsx)("g",{id:"boxArea",ref:this.boxArea}),(0,l.jsx)("g",{id:"boxRib",ref:this.boxRib,className:"box-rib fade-in"}),(0,l.jsx)("g",{id:"boxScale",ref:this.boxScale,className:"box-scale fade-in"}),(0,l.jsx)("g",{id:"boxText",ref:this.boxText}),(0,l.jsx)("g",{id:"boxDebug",ref:this.boxDebug})]})]}),this.state.show3D&&(0,l.jsx)("div",{ref:this.floorplan3DContainerRef,className:"floorplan3D-container full-height hidden fade-in",style:{display:"block"},children:(0,l.jsx)(dm,{ref:this.floorplan3DComponent,setResponseError:this.setState.bind(this),mainComponentThis:this})}),(0,l.jsx)("div",{ref:this.showFloorplanOnMapContainerRef,className:"indoor-modal show-floorplan-on-map-container"}),(0,l.jsx)("div",{ref:this.areaValue,className:"areaValue hidden"}),(0,l.jsx)("div",{ref:this.bindingPopupRightBoxContainerRef,className:"indoor-modal door-window-ha-entities-binding-popup-container"}),(0,l.jsx)("div",{ref:this.sensorsHeatmapSettingsPopupContainerRef,className:"indoor-modal sensors-heatmap-settings-popup-container"}),(0,l.jsxs)("div",{ref:this.drawingAreaPopup,className:"drawing-area-popup",children:[(0,l.jsx)("div",{className:"popup-tip"}),(0,l.jsx)("div",{className:"popup-content",children:(0,l.jsxs)("div",{className:"popup-content-container",children:[(0,l.jsx)("div",{className:"close-tooltip",children:(0,l.jsx)("div",{onClick:this.onDrawingAreaPopupCloseClick,children:(0,l.jsx)(ln.Z,{})})}),(0,l.jsx)("div",{ref:this.popupContentRef,className:"content-mounting-container"})]})})]}),(0,l.jsxs)(Ya,{containerRef:this.wallTools,onCloseRightBox:this.onWallToolsCloseClick,children:[(0,l.jsx)("h3",{children:"Modify the wall"}),(0,l.jsx)(cr,{disabled:!0,ref:this.wallWidthNumberSliderInput,sliderInputRef:this.wallWidth,valueLabelText:(0,l.jsxs)(o.Fragment,{children:["Width [",(0,l.jsx)("span",{children:"".concat(this.wallThicknessMinValue,"-").concat(this.wallThicknessMaxValue)}),"] :"," ",(0,l.jsx)("span",{ref:this.wallWidthValue})," ",(0,l.jsx)("span",{children:"".concat("metric"===this.measureSystemContext.userUnit?"cm":"in")})]}),sliderStep:this.wallWidthInputStep,minValue:this.wallThicknessMinValue,maxValue:this.wallThicknessMaxValue}),(0,l.jsx)(xs,{label:(0,l.jsxs)(o.Fragment,{children:["Length: ",(0,l.jsx)("span",{ref:this.wallLengthValue})," ",(0,l.jsx)("span",{children:"".concat("metric"===this.measureSystemContext.userUnit?"m":"ft")})]}),children:(0,l.jsx)(as,{disabled:!0,ref:this.wallLength,inputStep:this.wallLengthInputStep,inputMin:this.wallLengthInputStep,inputMax:1/0,checkInputValueChangeBeforeCall:!0})}),(0,l.jsx)(Jf,{ref:this.wallMaterialRef,mainComponentThis:this}),(0,l.jsx)($f,{ref:this.wallAlwaysHideRef,mainComponentThis:this}),(0,l.jsx)(ob,{ref:this.wallCustomHeightRef,mainComponentThis:this}),(0,l.jsx)(Xo,{mainComponentThis:this})]}),(0,l.jsxs)(Ya,{containerRef:this.wallItemToolsRef,onCloseRightBox:this.onWallItemToolsCloseClick,children:[(0,l.jsx)("h3",{ref:this.wallItemToolsTitle}),(0,l.jsx)("div",{ref:this.doorHinge,children:(0,l.jsx)("div",{className:"button-centered-container form-group",children:(0,l.jsx)(Go,{disabled:!0,type:"dull",onClick:this.onChangeDoorHingeClick,children:"REVERSE SWING"})})}),(0,l.jsx)("div",{ref:this.windowRotationOptionsContainerRef}),(0,l.jsx)("div",{ref:this.wallItemDimensionsRef}),(0,l.jsx)("div",{ref:this.wallItemMirroredRef}),(0,l.jsx)("div",{ref:this.wallItemPositionsRef}),(0,l.jsx)("div",{ref:this.wallCameraCoverageOptionsContainerRef}),(0,l.jsx)("div",{ref:this.wallItemMaterialsRef}),(0,l.jsx)(tb,{ref:this.wallItemHideWithWallRef,mainComponentThis:this}),(0,l.jsx)("div",{ref:this.wallItemChangeTypeRef}),(0,l.jsx)("div",{ref:this.wallItemTypesSelectionBoxRef}),(0,l.jsx)(Xo,{mainComponentThis:this}),(0,l.jsx)("div",{ref:this.bindingWallItemContainerRef})]}),(0,l.jsxs)(Ya,{containerRef:this.freeItemToolsRef,onCloseRightBox:()=>this.onFreeItemToolsCloseClick(this.freeItemToolsRef),children:[(0,l.jsx)("h3",{ref:this.freeItemTitleRef}),(0,l.jsx)("div",{ref:this.freeItemDimensionsRef}),(0,l.jsx)("div",{ref:this.freeItemMirroredRef}),(0,l.jsx)("div",{ref:this.freeItemPositionsRef}),(0,l.jsx)("div",{ref:this.freeItemRotationsRef}),(0,l.jsx)("div",{ref:this.freeCameraCoverageOptionsContainerRef}),(0,l.jsx)("div",{ref:this.freeItemMaterialsRef}),(0,l.jsx)("div",{ref:this.freeItemChangeTypeRef}),(0,l.jsx)("div",{ref:this.freeItemTypesSelectionBoxRef}),(0,l.jsx)("div",{ref:this.freeItemTextToolsRef}),(0,l.jsx)(Xo,{mainComponentThis:this}),(0,l.jsx)("div",{ref:this.bindingFreeItemContainerRef})]}),(0,l.jsxs)(Ya,{containerRef:this.sensorOtherToolsRef,onCloseRightBox:()=>this.onFreeItemToolsCloseClick(this.sensorOtherToolsRef),children:[(0,l.jsx)("h3",{ref:this.sensorOtherToolsTitleRef}),(0,l.jsx)("div",{ref:this.sensorOtherToolsContainerRef})]}),(0,l.jsxs)(Ya,{containerRef:this.presenceAreaToolsRef,containerClasses:"presence-area-right-box-container",onCloseRightBox:()=>this.onFreeItemToolsCloseClick(this.presenceAreaToolsRef),children:[(0,l.jsx)("h3",{ref:this.presenceAreaToolsTitle}),(0,l.jsx)("div",{ref:this.presenceAreaOptionsContainerRef,className:"presence-area-options-container"}),(0,l.jsx)("div",{ref:this.presenceAreaToolsContainerRef})]}),(0,l.jsx)(sr,{ref:this.uploadFloorplanImageToolsRef,mainComponentThis:this,floorplanImageTools:this.floorplanImageTools,uploadImageFloorplanSettingsIconRef:this.uploadImageFloorplanSettingsIconRef,uploadFloorplanImageStatusContainerRef:this.uploadFloorplanImageStatusContainerRef,uploadImageFloorplanHideRef:this.uploadImageFloorplanHideRef,uploadImageFloorplanShowRef:this.uploadImageFloorplanShowRef,boxFloorplanImage:this.boxFloorplanImage,uploadFloorplanImageErrorMessageRef:this.uploadFloorplanImageErrorMessageRef,uploadFloorplanImageErrorModal:this.uploadFloorplanImageErrorModal,floorplanImagePattern:this.floorplanImagePattern,floorplanImage:this.floorplanImage}),(0,l.jsxs)(Ya,{containerRef:this.roomTools,containerClasses:"flex",onCloseRightBox:this.onRoomToolsCloseClick,children:[(0,l.jsx)(xs,{label:(0,l.jsxs)(o.Fragment,{children:["Estimated surface: ",(0,l.jsx)("span",{className:"size"})]})}),(0,l.jsx)(xs,{label:"If you have the actual area, you can write it(".concat("metric"===this.measureSystemContext.userUnit?"m\xb2":"ft\xb2",")"),children:(0,l.jsx)(as,{disabled:!0,ref:this.roomSurface,placeholder:"Real surface",inputStep:this.roomSurfaceInputStep,inputMin:this.roomSurfaceInputStep,inputMax:1/0,checkInputValueChangeBeforeCall:!0})}),(0,l.jsx)(us,{disabled:!0,label:"Type room name",inputRef:this.roomName,placeholder:"e.g. Bedroom"}),(0,l.jsx)(xs,{label:"or select it:",children:(0,l.jsx)(Fs,{disabled:!0,ref:this.roomNameSelectRef,dropdownMenuRef:this.roomNameDropdownMenu,listItems:Ve})}),(0,l.jsx)(jx,{ref:this.roomFloorParametersRef,mainComponentThis:this}),(0,l.jsx)(Xo,{mainComponentThis:this})]}),(0,l.jsxs)(Ya,{containerRef:this.floorParameters,containerClasses:"floor-parameters-container",onCloseRightBox:this.onFloorParametersCloseClick,children:[(0,l.jsx)(xx,{ref:this.floorNoteInputRef,mainComponentThis:this}),(0,l.jsx)(wx,{ref:this.floorNumberInputRef,mainComponentThis:this}),(0,l.jsx)(Xo,{mainComponentThis:this}),(0,l.jsx)(Sx,{ref:this.floorDrawingHelperOptionsRef,mainComponentThis:this})]}),(0,l.jsx)("div",{ref:this.panelInfoExplanationBox,className:"panel-info-explanation-box"}),(0,l.jsx)("div",{ref:this.panelFloorNoteExplanationBox,className:"panel-info-explanation-box",style:{width:"auto",maxWidth:200}}),(0,l.jsxs)(Fa,{panelRef:this.panel,panelControlRef:this.panelControl,onPanelControlClick:this.onPanelControlClick,children:[(0,l.jsx)("div",{className:"button-centered-container panel-action-button",children:(0,l.jsx)(Go,{type:"blue",className:"show3d-button panel-transition",onClick:this.onShow3DClick,children:"View 3D"})}),(0,l.jsx)(fx,{ref:this.floorplanFloorsPanelBoxRef,containerRef:this.floorplanFloorsPanelBoxContainerRef,mainComponentThis:this}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Export as PNG",onClick:()=>{0===this.WALLS.length?gi(this.selectedFloorNoWallsErrorModal.current,this.modalTimeout):this.downloadSvg(!0,!0,!1,!1).catch((e=>Ox.log("Export png error",e)))},children:[(0,l.jsx)(Un.Z,{}),(0,l.jsx)("p",{children:"EXPORT PNG"})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Edit floorplan GPS location",onClick:this.onFloorplanGpsCoordsClick,children:[(0,l.jsx)(da,{}),(0,l.jsx)("p",{children:"GPS COORDS"})]})}),(0,l.jsx)("li",{children:(0,l.jsx)(pr,{ref:this.showMapLayer2DInputRef,containerClasses:"panel2D",onChangeCallback:this.onShowOnMapLayer2DClick})}),(0,l.jsx)("br",{}),(0,l.jsx)(xs,{label:"Floor height(".concat("metric"===this.measureSystemContext.userUnit?"cm":"in",")"),containerStyle:{marginBottom:0},children:(0,l.jsx)(as,{disabled:!0,ref:this.floorHeightInputRef,title:"Set floor height",inputStep:Math.pow(10,-this.wallHeightDecimalPrecision),inputMin:1,inputMax:this.wallHeightMaxValue,onInputValueChanged:this.onFloorHeightInputChange})}),(0,l.jsx)("br",{}),(0,l.jsxs)("li",{ref:this.uploadFloorplanPanelButtonContainer,className:"upload-floorplan-panel-button-container",children:[(0,l.jsxs)("button",{className:"btn btn-default fully panel-icon-button-container",title:"Upload floorplan image",ref:this.uploadFloorplanImageMode,onClick:this.onUploadFloorplanImageClick,style:{position:"relative"},children:[(0,l.jsx)(ha,{}),(0,l.jsx)(Zn.Z,{className:"settings-icon hidden",ref:this.uploadImageFloorplanSettingsIconRef}),(0,l.jsx)("p",{children:"IMAGE"})]}),(0,l.jsxs)("button",{ref:this.uploadFloorplanImageStatusContainerRef,onClick:this.onUploadedFloorplanImageStatusChangeClick,className:"btn btn-default show-hide-uploaded-floorplan-image-container hidden",children:[(0,l.jsx)(Yn.Z,{ref:this.uploadImageFloorplanShowRef,style:{display:"none"}}),(0,l.jsx)(Xn.Z,{ref:this.uploadImageFloorplanHideRef,style:{display:"none"}})]})]}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{title:"Select mode",className:"btn btn-success fully panel-icon-button-container",ref:this.selectMode,onClick:this.onSelectModeClick,children:[(0,l.jsx)(ra,{}),(0,l.jsx)("p",{children:"SELECT"})]})}),(0,l.jsx)("br",{}),(0,l.jsx)("li",{children:(0,l.jsxs)("button",{title:"Select room",className:"btn btn-default fully panel-icon-button-container",ref:this.roomMode,onClick:this.onRoomModeClick,children:[(0,l.jsx)(Jn.Z,{style:{fill:"none"}}),(0,l.jsx)("p",{children:"ROOM"})]})}),(0,l.jsx)("br",{}),(0,l.jsxs)("div",{style:{position:"relative"},children:[(0,l.jsx)("li",{children:(0,l.jsxs)("button",{title:"Show layers",className:"btn btn-default fully panel-icon-button-container",style:{position:"relative"},ref:this.layerMode,onClick:this.onLayerModeClick,children:[(0,l.jsx)(qn.Z,{style:{fill:"none"}}),(0,l.jsx)("p",{children:"LAYERS"}),(0,l.jsx)(Kn.Z,{ref:this.layersListArrowRef,className:"layers-list-arrow"})]})}),(0,l.jsxs)("div",{ref:this.layerList,className:"list-unstyled layer-list hidden",children:[(0,l.jsx)(fs,{title:"Show floorplan measures",inputRef:this.showRibRef,onChange:this.onShowRibClick,defaultChecked:!0,label:"MEASURES"}),(0,l.jsx)(fs,{title:"Show grid",inputRef:this.showBoxGrid,onChange:this.onShowBoxGridClick,defaultChecked:!0,label:"GRID"})]})]}),"HomeAssistant"===this.props.addOnIntegrationType&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),(0,l.jsx)(Ps,{label:"Add-on URL",value:this.props.customProps.isContainerApp?"".concat(window.location.protocol,"//").concat(window.location.hostname,":").concat(window.location.port):"".concat(window.location.pathname).concat(window.location.search),containerStyle:{marginBottom:"1rem"}})]})]}),(0,l.jsx)(Ia,{modalRef:this.selectedFloorNoWallsErrorModal,modalBody:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"indoor-paragraph-centered",children:"Floor must contain at least one wall in order to use this feature"})}),(0,l.jsx)("div",{className:"indoor-modal-row center",children:(0,l.jsx)(Go,{type:"primary",onClick:()=>fi(this.selectedFloorNoWallsErrorModal.current,this.modalTimeout),children:"OK"})})]}),modalFooter:null}),(0,l.jsx)(Ia,{modalRef:this.showFloorplanNoWallsErrorModal,modalBody:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("div",{children:(0,l.jsx)("p",{className:"indoor-paragraph-centered",children:"Floorplan must contain at least one wall in order to use this feature"})}),(0,l.jsx)("div",{className:"indoor-modal-row center",children:(0,l.jsx)(Go,{type:"primary",onClick:()=>fi(this.showFloorplanNoWallsErrorModal.current,this.modalTimeout),children:"OK"})})]}),modalFooter:null}),(0,l.jsx)("div",{ref:this.boxInfo,className:"boxInfo box-info panel-transition"}),(0,l.jsx)("div",{ref:this.boxPlanName,className:"box-plan-name panel-transition"}),(0,l.jsx)(qa,{mainComponentThis:this})]})})})]})}}const Px=Ix;var kx=i(5164),Fx=i(9049),Mx=i(3377),Ax=i(1317);class Rx extends o.Component{constructor(){super(),this.authenticateToHomeAssistant=async()=>{try{return await(0,kx.v0)({hassUrl:this.homeAssistantURL,redirectUrl:void 0,loadTokens:async()=>window._env_.token?(0,kx.pf)(this.homeAssistantURL,window._env_.token).data:void 0,saveTokens:e=>{0}})}catch(e){return Ax.log("Auth error",e),Ax.log(e===Fx.DJ),Ax.log(e===Fx.rh),Ax.log(e===Fx.Zh),null}},this.connectToHomeAssistant=async()=>{if(Ax.log("Home assistant forwarded variables",window._env_),window._env_)if(this.floorplanID=window._env_.floorplanID,this.licenseKey=window._env_.licenseKey,Object.hasOwn(window._env_,"homeAssistantURL")?(this.homeAssistantURL=window._env_.homeAssistantURL,this.isContainerApp=!0):(this.homeAssistantURL=window.location.origin,this.isContainerApp=!1),this.floorplanID&&this.licenseKey&&this.homeAssistantURL){let t,i;if(Ax.log("Auth token storage",t),t=await this.authenticateToHomeAssistant(),!t)return void this.setState({loading:!1,error:"Home Assistant authentication failed"});Ax.log("Auth token parsed",t),Ax.log(JSON.stringify(t));try{i=await(0,Mx.I5)({auth:t})}catch(e){Ax.log("Create connection error",e),Ax.log(e===Fx.OH),Ax.log(e===Fx.DJ);let t=(0,l.jsx)("span",{children:"Connection to Home Assistant failed."});return e===Fx.DJ?(t=(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("span",{children:"Connection authentication failed."})," ",(0,l.jsx)("br",{}),(0,l.jsx)("span",{children:"Check if access token from add-on configuration has expired."})]}),localStorage.removeItem("glamos_token")):e===Fx.OH&&(t=(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("span",{children:"Connection to your Home Assistant instance failed."}),(0,l.jsx)("br",{})," ",(0,l.jsx)("span",{children:"Please try again."})]})),void this.setState({loading:!1,error:t})}this.homeAssistantUserConfig=await(0,lb.iE)(i),Ax.log("HA config",this.homeAssistantUserConfig),this.homeAssistantConnection=i,this.customProps={connection:this.homeAssistantConnection,userConfig:this.homeAssistantUserConfig,isContainerApp:this.isContainerApp},this.userUnit="km"===this.homeAssistantUserConfig.unit_system.length?"metric":"imperial",this.setState({loading:!1})}else{let e;e=this.floorplanID?this.licenseKey?"Home Assistant URL":"License key":"Floorplan ID",e+=" parameter is required.",this.setState({loading:!1,error:(0,l.jsx)(o.Fragment,{children:(0,l.jsx)("span",{style:{display:"inline-block"},children:e})})})}else this.setState({loading:!1,error:(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)("span",{style:{display:"inline-block"},children:"Can't read configuration variables."}),(0,l.jsx)("br",{}),(0,l.jsx)("span",{style:{marginTop:"1em",display:"inline-block"},children:"Please restart add-on."})]})})},this.authenticateWebIntegrator=e=>{if(Ax.log("Sender domain",e.origin),Ax.log("Message event"),Ax.log(e),Ax.log(e.data),"handshake_msg"===e.data.type){clearTimeout(this.webIntegrationTimeout),!0?(this.customProps.integratorDomain=e.origin,this.setState({loading:!1})):this.setState({loading:!1,error:"Invalid credentials"})}},this.connectToWebIntegrator=()=>{const e=window.location.search.substring(1).split("&");for(let t=0;t<e.length;t++){const[i,o]=e[t].split("=");"floorplanID"===i?this.floorplanID=o:"licenseKey"===i?this.licenseKey=o:"clientID"===i&&(this.customProps.integratorClientID=o)}this.floorplanID&&this.licenseKey&&this.customProps.integratorClientID?(Ax.log("FloorplanID",this.floorplanID,"License key",this.licenseKey),window.addEventListener("message",this.authenticateWebIntegrator,{once:!0}),window.parent.postMessage({type:"iframeReady",message:"Iframe is ready to receive data"},"*"),this.webIntegrationTimeout=setTimeout((()=>{this.setState({loading:!1,error:"Connection timed out. Please ensure the host application is running and try again."})}),this.webIntegrationWaitForHandshakeMsgTimeMs)):this.setState({loading:!1,error:"Floorplan ID and license must be specified"})},this.state={loading:!0,error:null},this.homeAssistantConnection=null,this.homeAssistantUserConfig={},this.webIntegrationTimeout=null,this.webIntegrationWaitForHandshakeMsgTimeMs=1e4,this.floorplanID="",this.licenseKey="",this.homeAssistantURL="",this.isContainerApp=!1,this.userUnit="metric",this.customProps={},this.authenticateToHomeAssistant=this.authenticateToHomeAssistant.bind(this),this.connectToHomeAssistant=this.connectToHomeAssistant.bind(this),this.authenticateWebIntegrator=this.authenticateWebIntegrator.bind(this),this.connectToWebIntegrator=this.connectToWebIntegrator.bind(this)}componentDidMount(){"HomeAssistant"===this.props.addOnIntegrationType?this.connectToHomeAssistant():"WebIntegration"===this.props.addOnIntegrationType&&this.connectToWebIntegrator()}render(){const{loading:e,error:t}=this.state;return e?(0,l.jsx)(Ms,{screenCenter:!0}):t?(0,l.jsx)(Qo,{message:t}):(0,l.jsx)(Px,{customProps:this.customProps,userUnit:this.userUnit,floorplanID:this.floorplanID,licenseKey:this.licenseKey,addOnIntegrationType:this.props.addOnIntegrationType})}}const Lx=Rx;class Bx extends o.Component{constructor(){super(),this.addOnIntegrationType="HomeAssistant",this.addOnIntegrationType="HomeAssistant"}render(){return(0,l.jsx)(mn,{children:(0,l.jsxs)("div",{className:"page-container",children:[(0,l.jsx)("div",{className:"page-content-container",children:(0,l.jsx)(Lx,{addOnIntegrationType:this.addOnIntegrationType})}),(0,l.jsx)("div",{className:"footer",children:(0,l.jsxs)("div",{children:["Powered by",(0,l.jsx)("img",{srcSet:"\n                    ".concat(r.default," 1x,\n                    ").concat(r.retina," 2x\n                "),alt:""})]})})]})})}}const Wx=Bx;var Vx=i(1317);Vx.log=function(){},Vx.warn=function(){},Vx.error=function(){},s.render((0,l.jsx)(Wx,{}),document.getElementById("root"))}},e=>{e.O(0,[982],(()=>{return t=6806,e(e.s=t);var t}));e.O()}]);